var Qk=a=>{throw TypeError(a)};var w2=(a,e,s)=>e.has(a)||Qk("Cannot "+s);var za=(a,e,s)=>(w2(a,e,"read from private field"),s?s.call(a):e.get(a)),Xc=(a,e,s)=>e.has(a)?Qk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,s),Eo=(a,e,s,r)=>(w2(a,e,"write to private field"),r?r.call(a,s):e.set(a,s),s),Jc=(a,e,s)=>(w2(a,e,"access private method"),s);var Hk=(a,e,s,r)=>({set _(n){Eo(a,e,n,s)},get _(){return za(a,e,r)}});function oO(a,e){for(var s=0;s<e.length;s++){const r=e[s];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in a)){const i=Object.getOwnPropertyDescriptor(r,n);i&&Object.defineProperty(a,n,i.get?i:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var hue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function G_(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var N2={exports:{}},Dg={};var Vk;function lO(){if(Vk)return Dg;Vk=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var l in n)l!=="key"&&(i[l]=n[l])}else i=n;return n=i.ref,{$$typeof:a,type:r,key:o,ref:n!==void 0?n:null,props:i}}return Dg.Fragment=e,Dg.jsx=s,Dg.jsxs=s,Dg}var zk;function cO(){return zk||(zk=1,N2.exports=lO()),N2.exports}var t=cO(),j2={exports:{}},or={};var $k;function dO(){if($k)return or;$k=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),g=Symbol.iterator;function p(K){return K===null||typeof K!="object"?null:(K=g&&K[g]||K["@@iterator"],typeof K=="function"?K:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function w(K,I,R){this.props=K,this.context=I,this.refs=y,this.updater=R||v}w.prototype.isReactComponent={},w.prototype.setState=function(K,I){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,I,"setState")},w.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function B(){}B.prototype=w.prototype;function j(K,I,R){this.props=K,this.context=I,this.refs=y,this.updater=R||v}var E=j.prototype=new B;E.constructor=j,b(E,w.prototype),E.isPureReactComponent=!0;var S=Array.isArray;function T(){}var M={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function P(K,I,R){var G=R.ref;return{$$typeof:a,type:K,key:I,ref:G!==void 0?G:null,props:R}}function Y(K,I){return P(K.type,I,K.props)}function Q(K){return typeof K=="object"&&K!==null&&K.$$typeof===a}function L(K){var I={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(R){return I[R]})}var ae=/\/+/g;function ne(K,I){return typeof K=="object"&&K!==null&&K.key!=null?L(""+K.key):I.toString(36)}function V(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(T,T):(K.status="pending",K.then(function(I){K.status==="pending"&&(K.status="fulfilled",K.value=I)},function(I){K.status==="pending"&&(K.status="rejected",K.reason=I)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function O(K,I,R,G,se){var le=typeof K;(le==="undefined"||le==="boolean")&&(K=null);var ye=!1;if(K===null)ye=!0;else switch(le){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(K.$$typeof){case a:case e:ye=!0;break;case m:return ye=K._init,O(ye(K._payload),I,R,G,se)}}if(ye)return se=se(K),ye=G===""?"."+ne(K,0):G,S(se)?(R="",ye!=null&&(R=ye.replace(ae,"$&/")+"/"),O(se,I,R,"",function(Te){return Te})):se!=null&&(Q(se)&&(se=Y(se,R+(se.key==null||K&&K.key===se.key?"":(""+se.key).replace(ae,"$&/")+"/")+ye)),I.push(se)),1;ye=0;var De=G===""?".":G+":";if(S(K))for(var me=0;me<K.length;me++)G=K[me],le=De+ne(G,me),ye+=O(G,I,R,le,se);else if(me=p(K),typeof me=="function")for(K=me.call(K),me=0;!(G=K.next()).done;)G=G.value,le=De+ne(G,me++),ye+=O(G,I,R,le,se);else if(le==="object"){if(typeof K.then=="function")return O(V(K),I,R,G,se);throw I=String(K),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return ye}function X(K,I,R){if(K==null)return K;var G=[],se=0;return O(K,G,"","",function(le){return I.call(R,le,se++)}),G}function $(K){if(K._status===-1){var I=K._result;I=I(),I.then(function(R){(K._status===0||K._status===-1)&&(K._status=1,K._result=R)},function(R){(K._status===0||K._status===-1)&&(K._status=2,K._result=R)}),K._status===-1&&(K._status=0,K._result=I)}if(K._status===1)return K._result.default;throw K._result}var H=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},te={map:X,forEach:function(K,I,R){X(K,function(){I.apply(this,arguments)},R)},count:function(K){var I=0;return X(K,function(){I++}),I},toArray:function(K){return X(K,function(I){return I})||[]},only:function(K){if(!Q(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return or.Activity=A,or.Children=te,or.Component=w,or.Fragment=s,or.Profiler=n,or.PureComponent=j,or.StrictMode=r,or.Suspense=c,or.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,or.__COMPILER_RUNTIME={__proto__:null,c:function(K){return M.H.useMemoCache(K)}},or.cache=function(K){return function(){return K.apply(null,arguments)}},or.cacheSignal=function(){return null},or.cloneElement=function(K,I,R){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var G=b({},K.props),se=K.key;if(I!=null)for(le in I.key!==void 0&&(se=""+I.key),I)!D.call(I,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&I.ref===void 0||(G[le]=I[le]);var le=arguments.length-2;if(le===1)G.children=R;else if(1<le){for(var ye=Array(le),De=0;De<le;De++)ye[De]=arguments[De+2];G.children=ye}return P(K.type,se,G)},or.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:i,_context:K},K},or.createElement=function(K,I,R){var G,se={},le=null;if(I!=null)for(G in I.key!==void 0&&(le=""+I.key),I)D.call(I,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(se[G]=I[G]);var ye=arguments.length-2;if(ye===1)se.children=R;else if(1<ye){for(var De=Array(ye),me=0;me<ye;me++)De[me]=arguments[me+2];se.children=De}if(K&&K.defaultProps)for(G in ye=K.defaultProps,ye)se[G]===void 0&&(se[G]=ye[G]);return P(K,le,se)},or.createRef=function(){return{current:null}},or.forwardRef=function(K){return{$$typeof:l,render:K}},or.isValidElement=Q,or.lazy=function(K){return{$$typeof:m,_payload:{_status:-1,_result:K},_init:$}},or.memo=function(K,I){return{$$typeof:u,type:K,compare:I===void 0?null:I}},or.startTransition=function(K){var I=M.T,R={};M.T=R;try{var G=K(),se=M.S;se!==null&&se(R,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(T,H)}catch(le){H(le)}finally{I!==null&&R.types!==null&&(I.types=R.types),M.T=I}},or.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},or.use=function(K){return M.H.use(K)},or.useActionState=function(K,I,R){return M.H.useActionState(K,I,R)},or.useCallback=function(K,I){return M.H.useCallback(K,I)},or.useContext=function(K){return M.H.useContext(K)},or.useDebugValue=function(){},or.useDeferredValue=function(K,I){return M.H.useDeferredValue(K,I)},or.useEffect=function(K,I){return M.H.useEffect(K,I)},or.useEffectEvent=function(K){return M.H.useEffectEvent(K)},or.useId=function(){return M.H.useId()},or.useImperativeHandle=function(K,I,R){return M.H.useImperativeHandle(K,I,R)},or.useInsertionEffect=function(K,I){return M.H.useInsertionEffect(K,I)},or.useLayoutEffect=function(K,I){return M.H.useLayoutEffect(K,I)},or.useMemo=function(K,I){return M.H.useMemo(K,I)},or.useOptimistic=function(K,I){return M.H.useOptimistic(K,I)},or.useReducer=function(K,I,R){return M.H.useReducer(K,I,R)},or.useRef=function(K){return M.H.useRef(K)},or.useState=function(K){return M.H.useState(K)},or.useSyncExternalStore=function(K,I,R){return M.H.useSyncExternalStore(K,I,R)},or.useTransition=function(){return M.H.useTransition()},or.version="19.2.4",or}var qk;function W_(){return qk||(qk=1,j2.exports=dO()),j2.exports}var C=W_();const qt=G_(C),l6=oO({__proto__:null,default:qt},[C]);var _2={exports:{}},Tg={},C2={exports:{}},k2={};var Gk;function uO(){return Gk||(Gk=1,(function(a){function e(O,X){var $=O.length;O.push(X);e:for(;0<$;){var H=$-1>>>1,te=O[H];if(0<n(te,X))O[H]=X,O[$]=te,$=H;else break e}}function s(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var X=O[0],$=O.pop();if($!==X){O[0]=$;e:for(var H=0,te=O.length,K=te>>>1;H<K;){var I=2*(H+1)-1,R=O[I],G=I+1,se=O[G];if(0>n(R,$))G<te&&0>n(se,R)?(O[H]=se,O[G]=$,H=G):(O[H]=R,O[I]=$,H=I);else if(G<te&&0>n(se,$))O[H]=se,O[G]=$,H=G;else break e}}return X}function n(O,X){var $=O.sortIndex-X.sortIndex;return $!==0?$:O.id-X.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;a.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();a.unstable_now=function(){return o.now()-l}}var c=[],u=[],m=1,A=null,g=3,p=!1,v=!1,b=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function E(O){for(var X=s(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=O)r(u),X.sortIndex=X.expirationTime,e(c,X);else break;X=s(u)}}function S(O){if(b=!1,E(O),!v)if(s(c)!==null)v=!0,T||(T=!0,L());else{var X=s(u);X!==null&&V(S,X.startTime-O)}}var T=!1,M=-1,D=5,P=-1;function Y(){return y?!0:!(a.unstable_now()-P<D)}function Q(){if(y=!1,T){var O=a.unstable_now();P=O;var X=!0;try{e:{v=!1,b&&(b=!1,B(M),M=-1),p=!0;var $=g;try{t:{for(E(O),A=s(c);A!==null&&!(A.expirationTime>O&&Y());){var H=A.callback;if(typeof H=="function"){A.callback=null,g=A.priorityLevel;var te=H(A.expirationTime<=O);if(O=a.unstable_now(),typeof te=="function"){A.callback=te,E(O),X=!0;break t}A===s(c)&&r(c),E(O)}else r(c);A=s(c)}if(A!==null)X=!0;else{var K=s(u);K!==null&&V(S,K.startTime-O),X=!1}}break e}finally{A=null,g=$,p=!1}X=void 0}}finally{X?L():T=!1}}}var L;if(typeof j=="function")L=function(){j(Q)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ne=ae.port2;ae.port1.onmessage=Q,L=function(){ne.postMessage(null)}}else L=function(){w(Q,0)};function V(O,X){M=w(function(){O(a.unstable_now())},X)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(O){O.callback=null},a.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<O?Math.floor(1e3/O):5},a.unstable_getCurrentPriorityLevel=function(){return g},a.unstable_next=function(O){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var $=g;g=X;try{return O()}finally{g=$}},a.unstable_requestPaint=function(){y=!0},a.unstable_runWithPriority=function(O,X){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var $=g;g=O;try{return X()}finally{g=$}},a.unstable_scheduleCallback=function(O,X,$){var H=a.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?H+$:H):$=H,O){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=$+te,O={id:m++,callback:X,priorityLevel:O,startTime:$,expirationTime:te,sortIndex:-1},$>H?(O.sortIndex=$,e(u,O),s(c)===null&&O===s(u)&&(b?(B(M),M=-1):b=!0,V(S,$-H))):(O.sortIndex=te,e(c,O),v||p||(v=!0,T||(T=!0,L()))),O},a.unstable_shouldYield=Y,a.unstable_wrapCallback=function(O){var X=g;return function(){var $=g;g=X;try{return O.apply(this,arguments)}finally{g=$}}}})(k2)),k2}var Wk;function hO(){return Wk||(Wk=1,C2.exports=uO()),C2.exports}var B2={exports:{}},Ri={};var Yk;function mO(){if(Yk)return Ri;Yk=1;var a=W_();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(c,u,m){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:A==null?null:""+A,children:c,containerInfo:u,implementation:m}}var o=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ri.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ri.createPortal=function(c,u){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return i(c,u,null,m)},Ri.flushSync=function(c){var u=o.T,m=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=u,r.p=m,r.d.f()}},Ri.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},Ri.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Ri.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var m=u.as,A=l(m,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,p=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;m==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:A,integrity:g,fetchPriority:p}):m==="script"&&r.d.X(c,{crossOrigin:A,integrity:g,fetchPriority:p,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ri.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var m=l(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:m,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},Ri.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var m=u.as,A=l(m,u.crossOrigin);r.d.L(c,m,{crossOrigin:A,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ri.preloadModule=function(c,u){if(typeof c=="string")if(u){var m=l(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:m,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},Ri.requestFormReset=function(c){r.d.r(c)},Ri.unstable_batchedUpdates=function(c,u){return c(u)},Ri.useFormState=function(c,u,m){return o.H.useFormState(c,u,m)},Ri.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ri.version="19.2.4",Ri}var Kk;function c6(){if(Kk)return B2.exports;Kk=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),B2.exports=mO(),B2.exports}var Xk;function AO(){if(Xk)return Tg;Xk=1;var a=hO(),e=W_(),s=c6();function r(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function i(d){var h=d,f=d;if(d.alternate)for(;h.return;)h=h.return;else{d=h;do h=d,(h.flags&4098)!==0&&(f=h.return),d=h.return;while(d)}return h.tag===3?f:null}function o(d){if(d.tag===13){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function l(d){if(d.tag===31){var h=d.memoizedState;if(h===null&&(d=d.alternate,d!==null&&(h=d.memoizedState)),h!==null)return h.dehydrated}return null}function c(d){if(i(d)!==d)throw Error(r(188))}function u(d){var h=d.alternate;if(!h){if(h=i(d),h===null)throw Error(r(188));return h!==d?null:d}for(var f=d,x=h;;){var _=f.return;if(_===null)break;var F=_.alternate;if(F===null){if(x=_.return,x!==null){f=x;continue}break}if(_.child===F.child){for(F=_.child;F;){if(F===f)return c(_),d;if(F===x)return c(_),h;F=F.sibling}throw Error(r(188))}if(f.return!==x.return)f=_,x=F;else{for(var re=!1,Ee=_.child;Ee;){if(Ee===f){re=!0,f=_,x=F;break}if(Ee===x){re=!0,x=_,f=F;break}Ee=Ee.sibling}if(!re){for(Ee=F.child;Ee;){if(Ee===f){re=!0,f=F,x=_;break}if(Ee===x){re=!0,x=F,f=_;break}Ee=Ee.sibling}if(!re)throw Error(r(189))}}if(f.alternate!==x)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?d:h}function m(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d;for(d=d.child;d!==null;){if(h=m(d),h!==null)return h;d=d.sibling}return null}var A=Object.assign,g=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),j=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function L(d){return d===null||typeof d!="object"?null:(d=Q&&d[Q]||d["@@iterator"],typeof d=="function"?d:null)}var ae=Symbol.for("react.client.reference");function ne(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===ae?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case b:return"Fragment";case w:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case T:return"SuspenseList";case P:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case v:return"Portal";case j:return d.displayName||"Context";case B:return(d._context.displayName||"Context")+".Consumer";case E:var h=d.render;return d=d.displayName,d||(d=h.displayName||h.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case M:return h=d.displayName||null,h!==null?h:ne(d.type)||"Memo";case D:h=d._payload,d=d._init;try{return ne(d(h))}catch{}}return null}var V=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},H=[],te=-1;function K(d){return{current:d}}function I(d){0>te||(d.current=H[te],H[te]=null,te--)}function R(d,h){te++,H[te]=d.current,d.current=h}var G=K(null),se=K(null),le=K(null),ye=K(null);function De(d,h){switch(R(le,h),R(se,d),R(G,null),h.nodeType){case 9:case 11:d=(d=h.documentElement)&&(d=d.namespaceURI)?dk(d):0;break;default:if(d=h.tagName,h=h.namespaceURI)h=dk(h),d=uk(h,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}I(G),R(G,d)}function me(){I(G),I(se),I(le)}function Te(d){d.memoizedState!==null&&R(ye,d);var h=G.current,f=uk(h,d.type);h!==f&&(R(se,d),R(G,f))}function we(d){se.current===d&&(I(G),I(se)),ye.current===d&&(I(ye),Bg._currentValue=$)}var st,ce;function tt(d){if(st===void 0)try{throw Error()}catch(f){var h=f.stack.trim().match(/\n( *(at )?)/);st=h&&h[1]||"",ce=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+st+d+ce}var Ae=!1;function gt(d,h){if(!d||Ae)return"";Ae=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(h){var os=function(){throw Error()};if(Object.defineProperty(os.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(os,[])}catch($t){var Vt=$t}Reflect.construct(d,[],os)}else{try{os.call()}catch($t){Vt=$t}d.call(os.prototype)}}else{try{throw Error()}catch($t){Vt=$t}(os=d())&&typeof os.catch=="function"&&os.catch(function(){})}}catch($t){if($t&&Vt&&typeof $t.stack=="string")return[$t.stack,Vt.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var F=x.DetermineComponentFrameRoot(),re=F[0],Ee=F[1];if(re&&Ee){var at=re.split(`
`),Ut=Ee.split(`
`);for(_=x=0;x<at.length&&!at[x].includes("DetermineComponentFrameRoot");)x++;for(;_<Ut.length&&!Ut[_].includes("DetermineComponentFrameRoot");)_++;if(x===at.length||_===Ut.length)for(x=at.length-1,_=Ut.length-1;1<=x&&0<=_&&at[x]!==Ut[_];)_--;for(;1<=x&&0<=_;x--,_--)if(at[x]!==Ut[_]){if(x!==1||_!==1)do if(x--,_--,0>_||at[x]!==Ut[_]){var es=`
`+at[x].replace(" at new "," at ");return d.displayName&&es.includes("<anonymous>")&&(es=es.replace("<anonymous>",d.displayName)),es}while(1<=x&&0<=_);break}}}finally{Ae=!1,Error.prepareStackTrace=f}return(f=d?d.displayName||d.name:"")?tt(f):""}function q(d,h){switch(d.tag){case 26:case 27:case 5:return tt(d.type);case 16:return tt("Lazy");case 13:return d.child!==h&&h!==null?tt("Suspense Fallback"):tt("Suspense");case 19:return tt("SuspenseList");case 0:case 15:return gt(d.type,!1);case 11:return gt(d.type.render,!1);case 1:return gt(d.type,!0);case 31:return tt("Activity");default:return""}}function Qt(d){try{var h="",f=null;do h+=q(d,f),f=d,d=d.return;while(d);return h}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var yt=Object.prototype.hasOwnProperty,Oe=a.unstable_scheduleCallback,ze=a.unstable_cancelCallback,Le=a.unstable_shouldYield,oe=a.unstable_requestPaint,he=a.unstable_now,W=a.unstable_getCurrentPriorityLevel,ve=a.unstable_ImmediatePriority,Qe=a.unstable_UserBlockingPriority,Ze=a.unstable_NormalPriority,J=a.unstable_LowPriority,He=a.unstable_IdlePriority,xt=a.log,Xe=a.unstable_setDisableYieldValue,Ct=null,_e=null;function Se(d){if(typeof xt=="function"&&Xe(d),_e&&typeof _e.setStrictMode=="function")try{_e.setStrictMode(Ct,d)}catch{}}var Ve=Math.clz32?Math.clz32:Mt,et=Math.log,vt=Math.LN2;function Mt(d){return d>>>=0,d===0?32:31-(et(d)/vt|0)|0}var Ye=256,Et=262144,Gt=4194304;function ee(d){var h=d&42;if(h!==0)return h;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return d&261888;case 262144:case 524288:case 1048576:case 2097152:return d&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function Ie(d,h,f){var x=d.pendingLanes;if(x===0)return 0;var _=0,F=d.suspendedLanes,re=d.pingedLanes;d=d.warmLanes;var Ee=x&134217727;return Ee!==0?(x=Ee&~F,x!==0?_=ee(x):(re&=Ee,re!==0?_=ee(re):f||(f=Ee&~d,f!==0&&(_=ee(f))))):(Ee=x&~F,Ee!==0?_=ee(Ee):re!==0?_=ee(re):f||(f=x&~d,f!==0&&(_=ee(f)))),_===0?0:h!==0&&h!==_&&(h&F)===0&&(F=_&-_,f=h&-h,F>=f||F===32&&(f&4194048)!==0)?h:_}function ue(d,h){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&h)===0}function fe(d,h){switch(d){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xe(){var d=Gt;return Gt<<=1,(Gt&62914560)===0&&(Gt=4194304),d}function Me(d){for(var h=[],f=0;31>f;f++)h.push(d);return h}function ct(d,h){d.pendingLanes|=h,h!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function Pt(d,h,f,x,_,F){var re=d.pendingLanes;d.pendingLanes=f,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=f,d.entangledLanes&=f,d.errorRecoveryDisabledLanes&=f,d.shellSuspendCounter=0;var Ee=d.entanglements,at=d.expirationTimes,Ut=d.hiddenUpdates;for(f=re&~f;0<f;){var es=31-Ve(f),os=1<<es;Ee[es]=0,at[es]=-1;var Vt=Ut[es];if(Vt!==null)for(Ut[es]=null,es=0;es<Vt.length;es++){var $t=Vt[es];$t!==null&&($t.lane&=-536870913)}f&=~os}x!==0&&ts(d,x,0),F!==0&&_===0&&d.tag!==0&&(d.suspendedLanes|=F&~(re&~h))}function ts(d,h,f){d.pendingLanes|=h,d.suspendedLanes&=~h;var x=31-Ve(h);d.entangledLanes|=h,d.entanglements[x]=d.entanglements[x]|1073741824|f&261930}function as(d,h){var f=d.entangledLanes|=h;for(d=d.entanglements;f;){var x=31-Ve(f),_=1<<x;_&h|d[x]&h&&(d[x]|=h),f&=~_}}function Zt(d,h){var f=h&-h;return f=(f&42)!==0?1:Be(f),(f&(d.suspendedLanes|h))!==0?0:f}function Be(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function mt(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Nt(){var d=X.p;return d!==0?d:(d=window.event,d===void 0?32:Pk(d.type))}function Ne(d,h){var f=X.p;try{return X.p=d,h()}finally{X.p=f}}var Je=Math.random().toString(36).slice(2),ht="__reactFiber$"+Je,It="__reactProps$"+Je,Pe="__reactContainer$"+Je,Ke="__reactEvents$"+Je,nt="__reactListeners$"+Je,zt="__reactHandles$"+Je,is="__reactResources$"+Je,ke="__reactMarker$"+Je;function de(d){delete d[ht],delete d[It],delete d[Ke],delete d[nt],delete d[zt]}function ie(d){var h=d[ht];if(h)return h;for(var f=d.parentNode;f;){if(h=f[Pe]||f[ht]){if(f=h.alternate,h.child!==null||f!==null&&f.child!==null)for(d=xk(d);d!==null;){if(f=d[ht])return f;d=xk(d)}return h}d=f,f=d.parentNode}return null}function Ue(d){if(d=d[ht]||d[Pe]){var h=d.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return d}return null}function bt(d){var h=d.tag;if(h===5||h===26||h===27||h===6)return d.stateNode;throw Error(r(33))}function ot(d){var h=d[is];return h||(h=d[is]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Dt(d){d[ke]=!0}var jt=new Set,kt={};function gs(d,h){Xs(d,h),Xs(d+"Capture",h)}function Xs(d,h){for(kt[d]=h,d=0;d<h.length;d++)jt.add(h[d])}var Ss=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Is={},bs={};function ds(d){return yt.call(bs,d)?!0:yt.call(Is,d)?!1:Ss.test(d)?bs[d]=!0:(Is[d]=!0,!1)}function xs(d,h,f){if(ds(h))if(f===null)d.removeAttribute(h);else{switch(typeof f){case"undefined":case"function":case"symbol":d.removeAttribute(h);return;case"boolean":var x=h.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){d.removeAttribute(h);return}}d.setAttribute(h,""+f)}}function xr(d,h,f){if(f===null)d.removeAttribute(h);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(h);return}d.setAttribute(h,""+f)}}function qr(d,h,f,x){if(x===null)d.removeAttribute(f);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(f);return}d.setAttributeNS(h,f,""+x)}}function mr(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Uo(d){var h=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Ln(d,h,f){var x=Object.getOwnPropertyDescriptor(d.constructor.prototype,h);if(!d.hasOwnProperty(h)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var _=x.get,F=x.set;return Object.defineProperty(d,h,{configurable:!0,get:function(){return _.call(this)},set:function(re){f=""+re,F.call(this,re)}}),Object.defineProperty(d,h,{enumerable:x.enumerable}),{getValue:function(){return f},setValue:function(re){f=""+re},stopTracking:function(){d._valueTracker=null,delete d[h]}}}}function ho(d){if(!d._valueTracker){var h=Uo(d)?"checked":"value";d._valueTracker=Ln(d,h,""+d[h])}}function Xh(d){if(!d)return!1;var h=d._valueTracker;if(!h)return!0;var f=h.getValue(),x="";return d&&(x=Uo(d)?d.checked?"true":"false":d.value),d=x,d!==f?(h.setValue(d),!0):!1}function bi(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var vn=/[\n"\\]/g;function cn(d){return d.replace(vn,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Pu(d,h,f,x,_,F,re,Ee){d.name="",re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"?d.type=re:d.removeAttribute("type"),h!=null?re==="number"?(h===0&&d.value===""||d.value!=h)&&(d.value=""+mr(h)):d.value!==""+mr(h)&&(d.value=""+mr(h)):re!=="submit"&&re!=="reset"||d.removeAttribute("value"),h!=null?Jh(d,re,mr(h)):f!=null?Jh(d,re,mr(f)):x!=null&&d.removeAttribute("value"),_==null&&F!=null&&(d.defaultChecked=!!F),_!=null&&(d.checked=_&&typeof _!="function"&&typeof _!="symbol"),Ee!=null&&typeof Ee!="function"&&typeof Ee!="symbol"&&typeof Ee!="boolean"?d.name=""+mr(Ee):d.removeAttribute("name")}function CA(d,h,f,x,_,F,re,Ee){if(F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(d.type=F),h!=null||f!=null){if(!(F!=="submit"&&F!=="reset"||h!=null)){ho(d);return}f=f!=null?""+mr(f):"",h=h!=null?""+mr(h):f,Ee||h===d.value||(d.value=h),d.defaultValue=h}x=x??_,x=typeof x!="function"&&typeof x!="symbol"&&!!x,d.checked=Ee?d.checked:!!x,d.defaultChecked=!!x,re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"&&(d.name=re),ho(d)}function Jh(d,h,f){h==="number"&&bi(d.ownerDocument)===d||d.defaultValue===""+f||(d.defaultValue=""+f)}function yi(d,h,f,x){if(d=d.options,h){h={};for(var _=0;_<f.length;_++)h["$"+f[_]]=!0;for(f=0;f<d.length;f++)_=h.hasOwnProperty("$"+d[f].value),d[f].selected!==_&&(d[f].selected=_),_&&x&&(d[f].defaultSelected=!0)}else{for(f=""+mr(f),h=null,_=0;_<d.length;_++){if(d[_].value===f){d[_].selected=!0,x&&(d[_].defaultSelected=!0);return}h!==null||d[_].disabled||(h=d[_])}h!==null&&(h.selected=!0)}}function Zh(d,h,f){if(h!=null&&(h=""+mr(h),h!==d.value&&(d.value=h),f==null)){d.defaultValue!==h&&(d.defaultValue=h);return}d.defaultValue=f!=null?""+mr(f):""}function em(d,h,f,x){if(h==null){if(x!=null){if(f!=null)throw Error(r(92));if(V(x)){if(1<x.length)throw Error(r(93));x=x[0]}f=x}f==null&&(f=""),h=f}f=mr(h),d.defaultValue=f,x=d.textContent,x===f&&x!==""&&x!==null&&(d.value=x),ho(d)}function Qo(d,h){if(h){var f=d.firstChild;if(f&&f===d.lastChild&&f.nodeType===3){f.nodeValue=h;return}}d.textContent=h}var Fd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kA(d,h,f){var x=h.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?x?d.setProperty(h,""):h==="float"?d.cssFloat="":d[h]="":x?d.setProperty(h,f):typeof f!="number"||f===0||Fd.has(h)?h==="float"?d.cssFloat=f:d[h]=(""+f).trim():d[h]=f+"px"}function BA(d,h,f){if(h!=null&&typeof h!="object")throw Error(r(62));if(d=d.style,f!=null){for(var x in f)!f.hasOwnProperty(x)||h!=null&&h.hasOwnProperty(x)||(x.indexOf("--")===0?d.setProperty(x,""):x==="float"?d.cssFloat="":d[x]="");for(var _ in h)x=h[_],h.hasOwnProperty(_)&&f[_]!==x&&kA(d,_,x)}else for(var F in h)h.hasOwnProperty(F)&&kA(d,F,h[F])}function tm(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),SA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ii(d){return SA.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}function Ho(){}var Gl=null;function Dd(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Pc=null,Ws=null;function EA(d){var h=Ue(d);if(h&&(d=h.stateNode)){var f=d[It]||null;e:switch(d=h.stateNode,h.type){case"input":if(Pu(d,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),h=f.name,f.type==="radio"&&h!=null){for(f=d;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+cn(""+h)+'"][type="radio"]'),h=0;h<f.length;h++){var x=f[h];if(x!==d&&x.form===d.form){var _=x[It]||null;if(!_)throw Error(r(90));Pu(x,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(h=0;h<f.length;h++)x=f[h],x.form===d.form&&Xh(x)}break e;case"textarea":Zh(d,f.value,f.defaultValue);break e;case"select":h=f.value,h!=null&&yi(d,!!f.multiple,h,!1)}}}var rm=!1;function FA(d,h,f){if(rm)return d(h,f);rm=!0;try{var x=d(h);return x}finally{if(rm=!1,(Pc!==null||Ws!==null)&&(tb(),Pc&&(h=Pc,d=Ws,Ws=Pc=null,EA(h),d)))for(h=0;h<d.length;h++)EA(d[h])}}function Xi(d,h){var f=d.stateNode;if(f===null)return null;var x=f[It]||null;if(x===null)return null;f=x[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(d=d.type,x=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!x;break e;default:d=!1}if(d)return null;if(f&&typeof f!="function")throw Error(r(231,h,typeof f));return f}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),am=!1;if(Yn)try{var Td={};Object.defineProperty(Td,"passive",{get:function(){am=!0}}),window.addEventListener("test",Td,Td),window.removeEventListener("test",Td,Td)}catch{am=!1}var Ji=null,Pd=null,pl=null;function DA(){if(pl)return pl;var d,h=Pd,f=h.length,x,_="value"in Ji?Ji.value:Ji.textContent,F=_.length;for(d=0;d<f&&h[d]===_[d];d++);var re=f-d;for(x=1;x<=re&&h[f-x]===_[F-x];x++);return pl=_.slice(d,1<x?1-x:void 0)}function mo(d){var h=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&h===13&&(d=13)):d=h,d===10&&(d=13),32<=d||d===13?d:0}function Iu(){return!0}function Lu(){return!1}function Mn(d){function h(f,x,_,F,re){this._reactName=f,this._targetInst=_,this.type=x,this.nativeEvent=F,this.target=re,this.currentTarget=null;for(var Ee in d)d.hasOwnProperty(Ee)&&(f=d[Ee],this[Ee]=f?f(F):F[Ee]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?Iu:Lu,this.isPropagationStopped=Lu,this}return A(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Iu)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Iu)},persist:function(){},isPersistent:Iu}),h}var gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ao=Mn(gl),Wl=A({},gl,{view:0,detail:0}),Mu=Mn(Wl),Id,Yl,Kl,Ld=A({},Wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zs,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Kl&&(Kl&&d.type==="mousemove"?(Id=d.screenX-Kl.screenX,Yl=d.screenY-Kl.screenY):Yl=Id=0,Kl=d),Id)},movementY:function(d){return"movementY"in d?d.movementY:Yl}}),nm=Mn(Ld),Xl=A({},Ld,{dataTransfer:0}),Jl=Mn(Xl),TA=A({},Wl,{relatedTarget:0}),Zl=Mn(TA),PA=A({},gl,{animationName:0,elapsedTime:0,pseudoElement:0}),U=Mn(PA),pe=A({},gl,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Ge=Mn(pe),lt=A({},gl,{data:0}),Bt=Mn(lt),ss={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ms={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ts={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rs(d){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(d):(d=Ts[d])?!!h[d]:!1}function Zs(){return Rs}var nr=A({},Wl,{key:function(d){if(d.key){var h=ss[d.key]||d.key;if(h!=="Unidentified")return h}return d.type==="keypress"?(d=mo(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?ms[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zs,charCode:function(d){return d.type==="keypress"?mo(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?mo(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Er=Mn(nr),Fa=A({},Ld,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xa=Mn(Fa),fa=A({},Wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zs}),wn=Mn(fa),dn=A({},gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kn=Mn(dn),ec=A({},Ld,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Vo=Mn(ec),tc=A({},gl,{newState:0,oldState:0}),im=Mn(tc),Ru=[9,13,27,32],xl=Yn&&"CompositionEvent"in window,zo=null;Yn&&"documentMode"in document&&(zo=document.documentMode);var Md=Yn&&"TextEvent"in window&&!zo,sc=Yn&&(!xl||zo&&8<zo&&11>=zo),Rn=" ",Ic=!1;function Lc(d,h){switch(d){case"keyup":return Ru.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ou(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var bl=!1;function vi(d,h){switch(d){case"compositionend":return Ou(h);case"keypress":return h.which!==32?null:(Ic=!0,Rn);case"textInput":return d=h.data,d===Rn&&Ic?null:d;default:return null}}function rc(d,h){if(bl)return d==="compositionend"||!xl&&Lc(d,h)?(d=DA(),pl=Pd=Ji=null,bl=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return sc&&h.locale!=="ko"?null:h.data;default:return null}}var Uu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function om(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!Uu[d.type]:h==="textarea"}function Zi(d,h,f,x){Pc?Ws?Ws.push(x):Ws=[x]:Pc=x,h=lb(h,"onChange"),0<h.length&&(f=new Ao("onChange","change",null,f,x),d.push({event:f,listeners:h}))}var $o=null,ac=null;function lm(d){ak(d,0)}function qo(d){var h=bt(d);if(Xh(h))return d}function Mc(d,h){if(d==="change")return h}var Li=!1;if(Yn){var wi;if(Yn){var yl="oninput"in document;if(!yl){var vl=document.createElement("div");vl.setAttribute("oninput","return;"),yl=typeof vl.oninput=="function"}wi=yl}else wi=!1;Li=wi&&(!document.documentMode||9<document.documentMode)}function nc(){$o&&($o.detachEvent("onpropertychange",Qu),ac=$o=null)}function Qu(d){if(d.propertyName==="value"&&qo(ac)){var h=[];Zi(h,ac,d,Dd(d)),FA(lm,h)}}function Hu(d,h,f){d==="focusin"?(nc(),$o=h,ac=f,$o.attachEvent("onpropertychange",Qu)):d==="focusout"&&nc()}function Ja(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return qo(ac)}function IA(d,h){if(d==="click")return qo(h)}function wl(d,h){if(d==="input"||d==="change")return qo(h)}function Nl(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var Xn=typeof Object.is=="function"?Object.is:Nl;function ic(d,h){if(Xn(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var f=Object.keys(d),x=Object.keys(h);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var _=f[x];if(!yt.call(h,_)||!Xn(d[_],h[_]))return!1}return!0}function Vu(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function zu(d,h){var f=Vu(d);d=0;for(var x;f;){if(f.nodeType===3){if(x=d+f.textContent.length,d<=h&&x>=h)return{node:f,offset:h-d};d=x}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Vu(f)}}function oc(d,h){return d&&h?d===h?!0:d&&d.nodeType===3?!1:h&&h.nodeType===3?oc(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1:!1}function lc(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var h=bi(d.document);h instanceof d.HTMLIFrameElement;){try{var f=typeof h.contentWindow.location.href=="string"}catch{f=!1}if(f)d=h.contentWindow;else break;h=bi(d.document)}return h}function jl(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}var Rd=Yn&&"documentMode"in document&&11>=document.documentMode,eo=null,cc=null,li=null,fo=!1;function Qr(d,h,f){var x=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;fo||eo==null||eo!==bi(x)||(x=eo,"selectionStart"in x&&jl(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),li&&ic(li,x)||(li=x,x=lb(cc,"onSelect"),0<x.length&&(h=new Ao("onSelect","select",null,h,f),d.push({event:h,listeners:x}),h.target=eo)))}function Fr(d,h){var f={};return f[d.toLowerCase()]=h.toLowerCase(),f["Webkit"+d]="webkit"+h,f["Moz"+d]="moz"+h,f}var pa={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},Za={},_l={};Yn&&(_l=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Go(d){if(Za[d])return Za[d];if(!pa[d])return d;var h=pa[d],f;for(f in h)if(h.hasOwnProperty(f)&&f in _l)return Za[d]=h[f];return d}var Od=Go("animationend"),cm=Go("animationiteration"),Xp=Go("animationstart"),F0=Go("transitionrun"),D0=Go("transitionstart"),T0=Go("transitioncancel"),Jp=Go("transitionend"),Zp=new Map,Ud="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ud.push("scrollEnd");function po(d,h){Zp.set(d,h),gs(h,[d])}var dm=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)},to=[],Qd=0,LA=0;function um(){for(var d=Qd,h=LA=Qd=0;h<d;){var f=to[h];to[h++]=null;var x=to[h];to[h++]=null;var _=to[h];to[h++]=null;var F=to[h];if(to[h++]=null,x!==null&&_!==null){var re=x.pending;re===null?_.next=_:(_.next=re.next,re.next=_),x.pending=_}F!==0&&mm(f,_,F)}}function hm(d,h,f,x){to[Qd++]=d,to[Qd++]=h,to[Qd++]=f,to[Qd++]=x,LA|=x,d.lanes|=x,d=d.alternate,d!==null&&(d.lanes|=x)}function MA(d,h,f,x){return hm(d,h,f,x),ci(d)}function dc(d,h){return hm(d,null,null,h),ci(d)}function mm(d,h,f){d.lanes|=f;var x=d.alternate;x!==null&&(x.lanes|=f);for(var _=!1,F=d.return;F!==null;)F.childLanes|=f,x=F.alternate,x!==null&&(x.childLanes|=f),F.tag===22&&(d=F.stateNode,d===null||d._visibility&1||(_=!0)),d=F,F=F.return;return d.tag===3?(F=d.stateNode,_&&h!==null&&(_=31-Ve(f),d=F.hiddenUpdates,x=d[_],x===null?d[_]=[h]:x.push(h),h.lane=f|536870912),F):null}function ci(d){if(50<vg)throw vg=0,q1=null,Error(r(185));for(var h=d.return;h!==null;)d=h,h=d.return;return d.tag===3?d.stateNode:null}var Jn={};function RA(d,h,f,x){this.tag=d,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(d,h,f,x){return new RA(d,h,f,x)}function OA(d){return d=d.prototype,!(!d||!d.isReactComponent)}function go(d,h){var f=d.alternate;return f===null?(f=di(d.tag,h,d.key,d.mode),f.elementType=d.elementType,f.type=d.type,f.stateNode=d.stateNode,f.alternate=d,d.alternate=f):(f.pendingProps=h,f.type=d.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=d.flags&65011712,f.childLanes=d.childLanes,f.lanes=d.lanes,f.child=d.child,f.memoizedProps=d.memoizedProps,f.memoizedState=d.memoizedState,f.updateQueue=d.updateQueue,h=d.dependencies,f.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},f.sibling=d.sibling,f.index=d.index,f.ref=d.ref,f.refCleanup=d.refCleanup,f}function Am(d,h){d.flags&=65011714;var f=d.alternate;return f===null?(d.childLanes=0,d.lanes=h,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=f.childLanes,d.lanes=f.lanes,d.child=f.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=f.memoizedProps,d.memoizedState=f.memoizedState,d.updateQueue=f.updateQueue,d.type=f.type,h=f.dependencies,d.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),d}function $u(d,h,f,x,_,F){var re=0;if(x=d,typeof d=="function")OA(d)&&(re=1);else if(typeof d=="string")re=YR(d,f,G.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case P:return d=di(31,f,h,_),d.elementType=P,d.lanes=F,d;case b:return Rc(f.children,_,F,h);case y:re=8,_|=24;break;case w:return d=di(12,f,h,_|2),d.elementType=w,d.lanes=F,d;case S:return d=di(13,f,h,_),d.elementType=S,d.lanes=F,d;case T:return d=di(19,f,h,_),d.elementType=T,d.lanes=F,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case j:re=10;break e;case B:re=9;break e;case E:re=11;break e;case M:re=14;break e;case D:re=16,x=null;break e}re=29,f=Error(r(130,d===null?"null":typeof d,"")),x=null}return h=di(re,f,h,_),h.elementType=d,h.type=x,h.lanes=F,h}function Rc(d,h,f,x){return d=di(7,d,x,h),d.lanes=f,d}function fm(d,h,f){return d=di(6,d,null,h),d.lanes=f,d}function UA(d){var h=di(18,null,null,0);return h.stateNode=d,h}function qu(d,h,f){return h=di(4,d.children!==null?d.children:[],d.key,h),h.lanes=f,h.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},h}var QA=new WeakMap;function xo(d,h){if(typeof d=="object"&&d!==null){var f=QA.get(d);return f!==void 0?f:(h={value:d,source:h,stack:Qt(h)},QA.set(d,h),h)}return{value:d,source:h,stack:Qt(h)}}var Gu=[],Hd=0,HA=null,pm=0,bo=[],yo=0,Oc=null,vo=1,wo="";function so(d,h){Gu[Hd++]=pm,Gu[Hd++]=HA,HA=d,pm=h}function P0(d,h,f){bo[yo++]=vo,bo[yo++]=wo,bo[yo++]=Oc,Oc=d;var x=vo;d=wo;var _=32-Ve(x)-1;x&=~(1<<_),f+=1;var F=32-Ve(h)+_;if(30<F){var re=_-_%5;F=(x&(1<<re)-1).toString(32),x>>=re,_-=re,vo=1<<32-Ve(h)+_|f<<_|x,wo=F+d}else vo=1<<F|f<<_|x,wo=d}function eg(d){d.return!==null&&(so(d,1),P0(d,1,0))}function VA(d){for(;d===HA;)HA=Gu[--Hd],Gu[Hd]=null,pm=Gu[--Hd],Gu[Hd]=null;for(;d===Oc;)Oc=bo[--yo],bo[yo]=null,wo=bo[--yo],bo[yo]=null,vo=bo[--yo],bo[yo]=null}function I0(d,h){bo[yo++]=vo,bo[yo++]=wo,bo[yo++]=Oc,vo=h.id,wo=h.overflow,Oc=d}var Zn=null,Na=null,br=!1,Ni=null,Ua=!1,Wo=Error(r(519));function Uc(d){var h=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wu(xo(h,d)),Wo}function tg(d){var h=d.stateNode,f=d.type,x=d.memoizedProps;switch(h[ht]=d,h[It]=x,f){case"dialog":vr("cancel",h),vr("close",h);break;case"iframe":case"object":case"embed":vr("load",h);break;case"video":case"audio":for(f=0;f<Ng.length;f++)vr(Ng[f],h);break;case"source":vr("error",h);break;case"img":case"image":case"link":vr("error",h),vr("load",h);break;case"details":vr("toggle",h);break;case"input":vr("invalid",h),CA(h,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":vr("invalid",h);break;case"textarea":vr("invalid",h),em(h,x.value,x.defaultValue,x.children)}f=x.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||h.textContent===""+f||x.suppressHydrationWarning===!0||lk(h.textContent,f)?(x.popover!=null&&(vr("beforetoggle",h),vr("toggle",h)),x.onScroll!=null&&vr("scroll",h),x.onScrollEnd!=null&&vr("scrollend",h),x.onClick!=null&&(h.onclick=Ho),h=!0):h=!1,h||Uc(d,!0)}function uc(d){for(Zn=d.return;Zn;)switch(Zn.tag){case 5:case 31:case 13:Ua=!1;return;case 27:case 3:Ua=!0;return;default:Zn=Zn.return}}function ei(d){if(d!==Zn)return!1;if(!br)return uc(d),br=!0,!1;var h=d.tag,f;if((f=h!==3&&h!==27)&&((f=h===5)&&(f=d.type,f=!(f!=="form"&&f!=="button")||o2(d.type,d.memoizedProps)),f=!f),f&&Na&&Uc(d),uc(d),h===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));Na=gk(d)}else if(h===31){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));Na=gk(d)}else h===27?(h=Na,lh(d.type)?(d=h2,h2=null,Na=d):Na=h):Na=Zn?Sl(d.stateNode.nextSibling):null;return!0}function Vd(){Na=Zn=null,br=!1}function sg(){var d=Ni;return d!==null&&(Bo===null?Bo=d:Bo.push.apply(Bo,d),Ni=null),d}function Wu(d){Ni===null?Ni=[d]:Ni.push(d)}var zA=K(null),Qc=null,Cl=null;function Hc(d,h,f){R(zA,h._currentValue),h._currentValue=f}function No(d){d._currentValue=zA.current,I(zA)}function Yu(d,h,f){for(;d!==null;){var x=d.alternate;if((d.childLanes&h)!==h?(d.childLanes|=h,x!==null&&(x.childLanes|=h)):x!==null&&(x.childLanes&h)!==h&&(x.childLanes|=h),d===f)break;d=d.return}}function zd(d,h,f,x){var _=d.child;for(_!==null&&(_.return=d);_!==null;){var F=_.dependencies;if(F!==null){var re=_.child;F=F.firstContext;e:for(;F!==null;){var Ee=F;F=_;for(var at=0;at<h.length;at++)if(Ee.context===h[at]){F.lanes|=f,Ee=F.alternate,Ee!==null&&(Ee.lanes|=f),Yu(F.return,f,d),x||(re=null);break e}F=Ee.next}}else if(_.tag===18){if(re=_.return,re===null)throw Error(r(341));re.lanes|=f,F=re.alternate,F!==null&&(F.lanes|=f),Yu(re,f,d),re=null}else re=_.child;if(re!==null)re.return=_;else for(re=_;re!==null;){if(re===d){re=null;break}if(_=re.sibling,_!==null){_.return=re.return,re=_;break}re=re.return}_=re}}function Vc(d,h,f,x){d=null;for(var _=h,F=!1;_!==null;){if(!F){if((_.flags&524288)!==0)F=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var re=_.alternate;if(re===null)throw Error(r(387));if(re=re.memoizedProps,re!==null){var Ee=_.type;Xn(_.pendingProps.value,re.value)||(d!==null?d.push(Ee):d=[Ee])}}else if(_===ye.current){if(re=_.alternate,re===null)throw Error(r(387));re.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(d!==null?d.push(Bg):d=[Bg])}_=_.return}d!==null&&zd(h,d,f,x),h.flags|=262144}function $A(d){for(d=d.firstContext;d!==null;){if(!Xn(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function zc(d){Qc=d,Cl=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function ti(d){return L0(Qc,d)}function qA(d,h){return Qc===null&&zc(d),L0(d,h)}function L0(d,h){var f=h._currentValue;if(h={context:h,memoizedValue:f,next:null},Cl===null){if(d===null)throw Error(r(308));Cl=h,d.dependencies={lanes:0,firstContext:h},d.flags|=524288}else Cl=Cl.next=h;return f}var u1=typeof AbortController<"u"?AbortController:function(){var d=[],h=this.signal={aborted:!1,addEventListener:function(f,x){d.push(x)}};this.abort=function(){h.aborted=!0,d.forEach(function(f){return f()})}},h1=a.unstable_scheduleCallback,m1=a.unstable_NormalPriority,en={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ku(){return{controller:new u1,data:new Map,refCount:0}}function gm(d){d.refCount--,d.refCount===0&&h1(m1,function(){d.controller.abort()})}var xm=null,GA=0,N=0,k=null;function z(d,h){if(xm===null){var f=xm=[];GA=0,N=J1(),k={status:"pending",value:void 0,then:function(x){f.push(x)}}}return GA++,h.then(Z,Z),h}function Z(){if(--GA===0&&xm!==null){k!==null&&(k.status="fulfilled");var d=xm;xm=null,N=0,k=null;for(var h=0;h<d.length;h++)(0,d[h])()}}function ge(d,h){var f=[],x={status:"pending",value:null,reason:null,then:function(_){f.push(_)}};return d.then(function(){x.status="fulfilled",x.value=h;for(var _=0;_<f.length;_++)(0,f[_])(h)},function(_){for(x.status="rejected",x.reason=_,_=0;_<f.length;_++)(0,f[_])(void 0)}),x}var je=O.S;O.S=function(d,h){D4=he(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&z(d,h),je!==null&&je(d,h)};var Ce=K(null);function Fe(){var d=Ce.current;return d!==null?d:_a.pooledCache}function Re(d,h){h===null?R(Ce,Ce.current):R(Ce,h.pool)}function qe(){var d=Fe();return d===null?null:{parent:en._currentValue,pool:d}}var ut=Error(r(460)),Lt=Error(r(474)),$e=Error(r(542)),wt={then:function(){}};function Ft(d){return d=d.status,d==="fulfilled"||d==="rejected"}function Xt(d,h,f){switch(f=d[f],f===void 0?d.push(h):f!==h&&(h.then(Ho,Ho),h=f),h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,fs(d),d;default:if(typeof h.status=="string")h.then(Ho,Ho);else{if(d=_a,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=h,d.status="pending",d.then(function(x){if(h.status==="pending"){var _=h;_.status="fulfilled",_.value=x}},function(x){if(h.status==="pending"){var _=h;_.status="rejected",_.reason=x}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw d=h.reason,fs(d),d}throw Wt=h,ut}}function Tt(d){try{var h=d._init;return h(d._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Wt=f,ut):f}}var Wt=null;function rs(){if(Wt===null)throw Error(r(459));var d=Wt;return Wt=null,d}function fs(d){if(d===ut||d===$e)throw Error(r(483))}var us=null,Ls=0;function _s(d){var h=Ls;return Ls+=1,us===null&&(us=[]),Xt(us,d,h)}function tr(d,h){h=h.props.ref,d.ref=h!==void 0?h:null}function Fs(d,h){throw h.$$typeof===g?Error(r(525)):(d=Object.prototype.toString.call(h),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":d)))}function pr(d){function h(St,At){if(d){var Rt=St.deletions;Rt===null?(St.deletions=[At],St.flags|=16):Rt.push(At)}}function f(St,At){if(!d)return null;for(;At!==null;)h(St,At),At=At.sibling;return null}function x(St){for(var At=new Map;St!==null;)St.key!==null?At.set(St.key,St):At.set(St.index,St),St=St.sibling;return At}function _(St,At){return St=go(St,At),St.index=0,St.sibling=null,St}function F(St,At,Rt){return St.index=Rt,d?(Rt=St.alternate,Rt!==null?(Rt=Rt.index,Rt<At?(St.flags|=67108866,At):Rt):(St.flags|=67108866,At)):(St.flags|=1048576,At)}function re(St){return d&&St.alternate===null&&(St.flags|=67108866),St}function Ee(St,At,Rt,ns){return At===null||At.tag!==6?(At=fm(Rt,St.mode,ns),At.return=St,At):(At=_(At,Rt),At.return=St,At)}function at(St,At,Rt,ns){var $s=Rt.type;return $s===b?es(St,At,Rt.props.children,ns,Rt.key):At!==null&&(At.elementType===$s||typeof $s=="object"&&$s!==null&&$s.$$typeof===D&&Tt($s)===At.type)?(At=_(At,Rt.props),tr(At,Rt),At.return=St,At):(At=$u(Rt.type,Rt.key,Rt.props,null,St.mode,ns),tr(At,Rt),At.return=St,At)}function Ut(St,At,Rt,ns){return At===null||At.tag!==4||At.stateNode.containerInfo!==Rt.containerInfo||At.stateNode.implementation!==Rt.implementation?(At=qu(Rt,St.mode,ns),At.return=St,At):(At=_(At,Rt.children||[]),At.return=St,At)}function es(St,At,Rt,ns,$s){return At===null||At.tag!==7?(At=Rc(Rt,St.mode,ns,$s),At.return=St,At):(At=_(At,Rt),At.return=St,At)}function os(St,At,Rt){if(typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint")return At=fm(""+At,St.mode,Rt),At.return=St,At;if(typeof At=="object"&&At!==null){switch(At.$$typeof){case p:return Rt=$u(At.type,At.key,At.props,null,St.mode,Rt),tr(Rt,At),Rt.return=St,Rt;case v:return At=qu(At,St.mode,Rt),At.return=St,At;case D:return At=Tt(At),os(St,At,Rt)}if(V(At)||L(At))return At=Rc(At,St.mode,Rt,null),At.return=St,At;if(typeof At.then=="function")return os(St,_s(At),Rt);if(At.$$typeof===j)return os(St,qA(St,At),Rt);Fs(St,At)}return null}function Vt(St,At,Rt,ns){var $s=At!==null?At.key:null;if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return $s!==null?null:Ee(St,At,""+Rt,ns);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case p:return Rt.key===$s?at(St,At,Rt,ns):null;case v:return Rt.key===$s?Ut(St,At,Rt,ns):null;case D:return Rt=Tt(Rt),Vt(St,At,Rt,ns)}if(V(Rt)||L(Rt))return $s!==null?null:es(St,At,Rt,ns,null);if(typeof Rt.then=="function")return Vt(St,At,_s(Rt),ns);if(Rt.$$typeof===j)return Vt(St,At,qA(St,Rt),ns);Fs(St,Rt)}return null}function $t(St,At,Rt,ns,$s){if(typeof ns=="string"&&ns!==""||typeof ns=="number"||typeof ns=="bigint")return St=St.get(Rt)||null,Ee(At,St,""+ns,$s);if(typeof ns=="object"&&ns!==null){switch(ns.$$typeof){case p:return St=St.get(ns.key===null?Rt:ns.key)||null,at(At,St,ns,$s);case v:return St=St.get(ns.key===null?Rt:ns.key)||null,Ut(At,St,ns,$s);case D:return ns=Tt(ns),$t(St,At,Rt,ns,$s)}if(V(ns)||L(ns))return St=St.get(Rt)||null,es(At,St,ns,$s,null);if(typeof ns.then=="function")return $t(St,At,Rt,_s(ns),$s);if(ns.$$typeof===j)return $t(St,At,Rt,qA(At,ns),$s);Fs(At,ns)}return null}function Ps(St,At,Rt,ns){for(var $s=null,Vr=null,Os=At,hr=At=0,Cr=null;Os!==null&&hr<Rt.length;hr++){Os.index>hr?(Cr=Os,Os=null):Cr=Os.sibling;var zr=Vt(St,Os,Rt[hr],ns);if(zr===null){Os===null&&(Os=Cr);break}d&&Os&&zr.alternate===null&&h(St,Os),At=F(zr,At,hr),Vr===null?$s=zr:Vr.sibling=zr,Vr=zr,Os=Cr}if(hr===Rt.length)return f(St,Os),br&&so(St,hr),$s;if(Os===null){for(;hr<Rt.length;hr++)Os=os(St,Rt[hr],ns),Os!==null&&(At=F(Os,At,hr),Vr===null?$s=Os:Vr.sibling=Os,Vr=Os);return br&&so(St,hr),$s}for(Os=x(Os);hr<Rt.length;hr++)Cr=$t(Os,St,hr,Rt[hr],ns),Cr!==null&&(d&&Cr.alternate!==null&&Os.delete(Cr.key===null?hr:Cr.key),At=F(Cr,At,hr),Vr===null?$s=Cr:Vr.sibling=Cr,Vr=Cr);return d&&Os.forEach(function(mh){return h(St,mh)}),br&&so(St,hr),$s}function Js(St,At,Rt,ns){if(Rt==null)throw Error(r(151));for(var $s=null,Vr=null,Os=At,hr=At=0,Cr=null,zr=Rt.next();Os!==null&&!zr.done;hr++,zr=Rt.next()){Os.index>hr?(Cr=Os,Os=null):Cr=Os.sibling;var mh=Vt(St,Os,zr.value,ns);if(mh===null){Os===null&&(Os=Cr);break}d&&Os&&mh.alternate===null&&h(St,Os),At=F(mh,At,hr),Vr===null?$s=mh:Vr.sibling=mh,Vr=mh,Os=Cr}if(zr.done)return f(St,Os),br&&so(St,hr),$s;if(Os===null){for(;!zr.done;hr++,zr=Rt.next())zr=os(St,zr.value,ns),zr!==null&&(At=F(zr,At,hr),Vr===null?$s=zr:Vr.sibling=zr,Vr=zr);return br&&so(St,hr),$s}for(Os=x(Os);!zr.done;hr++,zr=Rt.next())zr=$t(Os,St,hr,zr.value,ns),zr!==null&&(d&&zr.alternate!==null&&Os.delete(zr.key===null?hr:zr.key),At=F(zr,At,hr),Vr===null?$s=zr:Vr.sibling=zr,Vr=zr);return d&&Os.forEach(function(iO){return h(St,iO)}),br&&so(St,hr),$s}function ya(St,At,Rt,ns){if(typeof Rt=="object"&&Rt!==null&&Rt.type===b&&Rt.key===null&&(Rt=Rt.props.children),typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case p:e:{for(var $s=Rt.key;At!==null;){if(At.key===$s){if($s=Rt.type,$s===b){if(At.tag===7){f(St,At.sibling),ns=_(At,Rt.props.children),ns.return=St,St=ns;break e}}else if(At.elementType===$s||typeof $s=="object"&&$s!==null&&$s.$$typeof===D&&Tt($s)===At.type){f(St,At.sibling),ns=_(At,Rt.props),tr(ns,Rt),ns.return=St,St=ns;break e}f(St,At);break}else h(St,At);At=At.sibling}Rt.type===b?(ns=Rc(Rt.props.children,St.mode,ns,Rt.key),ns.return=St,St=ns):(ns=$u(Rt.type,Rt.key,Rt.props,null,St.mode,ns),tr(ns,Rt),ns.return=St,St=ns)}return re(St);case v:e:{for($s=Rt.key;At!==null;){if(At.key===$s)if(At.tag===4&&At.stateNode.containerInfo===Rt.containerInfo&&At.stateNode.implementation===Rt.implementation){f(St,At.sibling),ns=_(At,Rt.children||[]),ns.return=St,St=ns;break e}else{f(St,At);break}else h(St,At);At=At.sibling}ns=qu(Rt,St.mode,ns),ns.return=St,St=ns}return re(St);case D:return Rt=Tt(Rt),ya(St,At,Rt,ns)}if(V(Rt))return Ps(St,At,Rt,ns);if(L(Rt)){if($s=L(Rt),typeof $s!="function")throw Error(r(150));return Rt=$s.call(Rt),Js(St,At,Rt,ns)}if(typeof Rt.then=="function")return ya(St,At,_s(Rt),ns);if(Rt.$$typeof===j)return ya(St,At,qA(St,Rt),ns);Fs(St,Rt)}return typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint"?(Rt=""+Rt,At!==null&&At.tag===6?(f(St,At.sibling),ns=_(At,Rt),ns.return=St,St=ns):(f(St,At),ns=fm(Rt,St.mode,ns),ns.return=St,St=ns),re(St)):f(St,At)}return function(St,At,Rt,ns){try{Ls=0;var $s=ya(St,At,Rt,ns);return us=null,$s}catch(Os){if(Os===ut||Os===$e)throw Os;var Vr=di(29,Os,null,St.mode);return Vr.lanes=ns,Vr.return=St,Vr}}}var ja=pr(!0),ir=pr(!1),Cs=!1;function ys(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Da(d,h){d=d.updateQueue,h.updateQueue===d&&(h.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function Ys(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function cr(d,h,f){var x=d.updateQueue;if(x===null)return null;if(x=x.shared,(Yr&2)!==0){var _=x.pending;return _===null?h.next=h:(h.next=_.next,_.next=h),x.pending=h,h=ci(d),mm(d,null,f),h}return hm(d,x,h,f),ci(d)}function Gr(d,h,f){if(h=h.updateQueue,h!==null&&(h=h.shared,(f&4194048)!==0)){var x=h.lanes;x&=d.pendingLanes,f|=x,h.lanes=f,as(d,f)}}function Nn(d,h){var f=d.updateQueue,x=d.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var _=null,F=null;if(f=f.firstBaseUpdate,f!==null){do{var re={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};F===null?_=F=re:F=F.next=re,f=f.next}while(f!==null);F===null?_=F=h:F=F.next=h}else _=F=h;f={baseState:x.baseState,firstBaseUpdate:_,lastBaseUpdate:F,shared:x.shared,callbacks:x.callbacks},d.updateQueue=f;return}d=f.lastBaseUpdate,d===null?f.firstBaseUpdate=h:d.next=h,f.lastBaseUpdate=h}var si=!1;function ga(){if(si){var d=k;if(d!==null)throw d}}function un(d,h,f,x){si=!1;var _=d.updateQueue;Cs=!1;var F=_.firstBaseUpdate,re=_.lastBaseUpdate,Ee=_.shared.pending;if(Ee!==null){_.shared.pending=null;var at=Ee,Ut=at.next;at.next=null,re===null?F=Ut:re.next=Ut,re=at;var es=d.alternate;es!==null&&(es=es.updateQueue,Ee=es.lastBaseUpdate,Ee!==re&&(Ee===null?es.firstBaseUpdate=Ut:Ee.next=Ut,es.lastBaseUpdate=at))}if(F!==null){var os=_.baseState;re=0,es=Ut=at=null,Ee=F;do{var Vt=Ee.lane&-536870913,$t=Vt!==Ee.lane;if($t?(_r&Vt)===Vt:(x&Vt)===Vt){Vt!==0&&Vt===N&&(si=!0),es!==null&&(es=es.next={lane:0,tag:Ee.tag,payload:Ee.payload,callback:null,next:null});e:{var Ps=d,Js=Ee;Vt=h;var ya=f;switch(Js.tag){case 1:if(Ps=Js.payload,typeof Ps=="function"){os=Ps.call(ya,os,Vt);break e}os=Ps;break e;case 3:Ps.flags=Ps.flags&-65537|128;case 0:if(Ps=Js.payload,Vt=typeof Ps=="function"?Ps.call(ya,os,Vt):Ps,Vt==null)break e;os=A({},os,Vt);break e;case 2:Cs=!0}}Vt=Ee.callback,Vt!==null&&(d.flags|=64,$t&&(d.flags|=8192),$t=_.callbacks,$t===null?_.callbacks=[Vt]:$t.push(Vt))}else $t={lane:Vt,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null},es===null?(Ut=es=$t,at=os):es=es.next=$t,re|=Vt;if(Ee=Ee.next,Ee===null){if(Ee=_.shared.pending,Ee===null)break;$t=Ee,Ee=$t.next,$t.next=null,_.lastBaseUpdate=$t,_.shared.pending=null}}while(!0);es===null&&(at=os),_.baseState=at,_.firstBaseUpdate=Ut,_.lastBaseUpdate=es,F===null&&(_.shared.lanes=0),rh|=re,d.lanes=re,d.memoizedState=os}}function ui(d,h){if(typeof d!="function")throw Error(r(191,d));d.call(h)}function hn(d,h){var f=d.callbacks;if(f!==null)for(d.callbacks=null,d=0;d<f.length;d++)ui(f[d],h)}var Ar=K(null),Lr=K(0);function Ta(d,h){d=eu,R(Lr,d),R(Ar,h),eu=d|h.baseLanes}function Hr(){R(Lr,eu),R(Ar,Ar.current)}function jn(){eu=Lr.current,I(Ar),I(Lr)}var Pa=K(null),Mr=null;function tn(d){var h=d.alternate;R(Dr,Dr.current&1),R(Pa,d),Mr===null&&(h===null||Ar.current!==null||h.memoizedState!==null)&&(Mr=d)}function Wr(d){R(Dr,Dr.current),R(Pa,d),Mr===null&&(Mr=d)}function mn(d){d.tag===22?(R(Dr,Dr.current),R(Pa,d),Mr===null&&(Mr=d)):An()}function An(){R(Dr,Dr.current),R(Pa,Pa.current)}function oa(d){I(Pa),Mr===d&&(Mr=null),I(Dr)}var Dr=K(0);function hi(d){for(var h=d;h!==null;){if(h.tag===13){var f=h.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||d2(f)||u2(f)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Qa=0,Vs=null,zs=null,Rr=null,Mi=!1,jo=!1,ji=!1,fn=0,$c=0,qc=null,WA=0;function xa(){throw Error(r(321))}function rg(d,h){if(h===null)return!1;for(var f=0;f<h.length&&f<d.length;f++)if(!Xn(d[f],h[f]))return!1;return!0}function ag(d,h,f,x,_,F){return Qa=F,Vs=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,O.H=d===null||d.memoizedState===null?VC:v1,ji=!1,F=f(x,_),ji=!1,jo&&(F=hc(h,f,x,_)),YA(d),F}function YA(d){O.H=hg;var h=zs!==null&&zs.next!==null;if(Qa=0,Rr=zs=Vs=null,Mi=!1,$c=0,qc=null,h)throw Error(r(300));d===null||Un||(d=d.dependencies,d!==null&&$A(d)&&(Un=!0))}function hc(d,h,f,x){Vs=d;var _=0;do{if(jo&&(qc=null),$c=0,jo=!1,25<=_)throw Error(r(301));if(_+=1,Rr=zs=null,d.updateQueue!=null){var F=d.updateQueue;F.lastEffect=null,F.events=null,F.stores=null,F.memoCache!=null&&(F.memoCache.index=0)}O.H=zC,F=h(f,x)}while(jo);return F}function A1(){var d=O.H,h=d.useState()[0];return h=typeof h.then=="function"?Gc(h):h,d=d.useState()[0],(zs!==null?zs.memoizedState:null)!==d&&(Vs.flags|=1024),h}function ng(){var d=fn!==0;return fn=0,d}function ig(d,h,f){h.updateQueue=d.updateQueue,h.flags&=-2053,d.lanes&=~f}function KA(d){if(Mi){for(d=d.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}Mi=!1}Qa=0,Rr=zs=Vs=null,jo=!1,$c=fn=0,qc=null}function On(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rr===null?Vs.memoizedState=Rr=d:Rr=Rr.next=d,Rr}function Ha(){if(zs===null){var d=Vs.alternate;d=d!==null?d.memoizedState:null}else d=zs.next;var h=Rr===null?Vs.memoizedState:Rr.next;if(h!==null)Rr=h,zs=d;else{if(d===null)throw Vs.alternate===null?Error(r(467)):Error(r(310));zs=d,d={memoizedState:zs.memoizedState,baseState:zs.baseState,baseQueue:zs.baseQueue,queue:zs.queue,next:null},Rr===null?Vs.memoizedState=Rr=d:Rr=Rr.next=d}return Rr}function bm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gc(d){var h=$c;return $c+=1,qc===null&&(qc=[]),d=Xt(qc,d,h),h=Vs,(Rr===null?h.memoizedState:Rr.next)===null&&(h=h.alternate,O.H=h===null||h.memoizedState===null?VC:v1),d}function Xu(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Gc(d);if(d.$$typeof===j)return ti(d)}throw Error(r(438,String(d)))}function $d(d){var h=null,f=Vs.updateQueue;if(f!==null&&(h=f.memoCache),h==null){var x=Vs.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(h={data:x.data.map(function(_){return _.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),f===null&&(f=bm(),Vs.updateQueue=f),f.memoCache=h,f=h.data[h.index],f===void 0)for(f=h.data[h.index]=Array(d),x=0;x<d;x++)f[x]=Y;return h.index++,f}function kl(d,h){return typeof h=="function"?h(d):h}function XA(d){var h=Ha();return Ju(h,zs,d)}function Ju(d,h,f){var x=d.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=f;var _=d.baseQueue,F=x.pending;if(F!==null){if(_!==null){var re=_.next;_.next=F.next,F.next=re}h.baseQueue=_=F,x.pending=null}if(F=d.baseState,_===null)d.memoizedState=F;else{h=_.next;var Ee=re=null,at=null,Ut=h,es=!1;do{var os=Ut.lane&-536870913;if(os!==Ut.lane?(_r&os)===os:(Qa&os)===os){var Vt=Ut.revertLane;if(Vt===0)at!==null&&(at=at.next={lane:0,revertLane:0,gesture:null,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null}),os===N&&(es=!0);else if((Qa&Vt)===Vt){Ut=Ut.next,Vt===N&&(es=!0);continue}else os={lane:0,revertLane:Ut.revertLane,gesture:null,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null},at===null?(Ee=at=os,re=F):at=at.next=os,Vs.lanes|=Vt,rh|=Vt;os=Ut.action,ji&&f(F,os),F=Ut.hasEagerState?Ut.eagerState:f(F,os)}else Vt={lane:os,revertLane:Ut.revertLane,gesture:Ut.gesture,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null},at===null?(Ee=at=Vt,re=F):at=at.next=Vt,Vs.lanes|=os,rh|=os;Ut=Ut.next}while(Ut!==null&&Ut!==h);if(at===null?re=F:at.next=Ee,!Xn(F,d.memoizedState)&&(Un=!0,es&&(f=k,f!==null)))throw f;d.memoizedState=F,d.baseState=re,d.baseQueue=at,x.lastRenderedState=F}return _===null&&(x.lanes=0),[d.memoizedState,x.dispatch]}function JA(d){var h=Ha(),f=h.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=d;var x=f.dispatch,_=f.pending,F=h.memoizedState;if(_!==null){f.pending=null;var re=_=_.next;do F=d(F,re.action),re=re.next;while(re!==_);Xn(F,h.memoizedState)||(Un=!0),h.memoizedState=F,h.baseQueue===null&&(h.baseState=F),f.lastRenderedState=F}return[F,x]}function ZA(d,h,f){var x=Vs,_=Ha(),F=br;if(F){if(f===void 0)throw Error(r(407));f=f()}else f=h();var re=!Xn((zs||_).memoizedState,f);if(re&&(_.memoizedState=f,Un=!0),_=_.queue,f1(lg.bind(null,x,_,d),[d]),_.getSnapshot!==h||re||Rr!==null&&Rr.memoizedState.tag&1){if(x.flags|=2048,Gd(9,{destroy:void 0},og.bind(null,x,_,f,h),null),_a===null)throw Error(r(349));F||(Qa&127)!==0||mc(x,h,f)}return f}function mc(d,h,f){d.flags|=16384,d={getSnapshot:h,value:f},h=Vs.updateQueue,h===null?(h=bm(),Vs.updateQueue=h,h.stores=[d]):(f=h.stores,f===null?h.stores=[d]:f.push(d))}function og(d,h,f,x){h.value=f,h.getSnapshot=x,M0(h)&&cg(d)}function lg(d,h,f){return f(function(){M0(h)&&cg(d)})}function M0(d){var h=d.getSnapshot;d=d.value;try{var f=h();return!Xn(d,f)}catch{return!0}}function cg(d){var h=dc(d,2);h!==null&&So(h,d,2)}function Wc(d){var h=On();if(typeof d=="function"){var f=d;if(d=f(),ji){Se(!0);try{f()}finally{Se(!1)}}}return h.memoizedState=h.baseState=d,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:d},h}function R0(d,h,f,x){return d.baseState=f,Ju(d,zs,typeof x=="function"?x:kl)}function O0(d,h,f,x,_){if(V0(d))throw Error(r(485));if(d=h.action,d!==null){var F={payload:_,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(re){F.listeners.push(re)}};O.T!==null?f(!0):F.isTransition=!1,x(F),f=h.pending,f===null?(F.next=h.pending=F,U0(h,F)):(F.next=f.next,h.pending=f.next=F)}}function U0(d,h){var f=h.action,x=h.payload,_=d.state;if(h.isTransition){var F=O.T,re={};O.T=re;try{var Ee=f(_,x),at=O.S;at!==null&&at(re,Ee),dg(d,h,Ee)}catch(Ut){qd(d,h,Ut)}finally{F!==null&&re.types!==null&&(F.types=re.types),O.T=F}}else try{F=f(_,x),dg(d,h,F)}catch(Ut){qd(d,h,Ut)}}function dg(d,h,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(x){Q0(d,h,x)},function(x){return qd(d,h,x)}):Q0(d,h,f)}function Q0(d,h,f){h.status="fulfilled",h.value=f,ef(h),d.state=f,h=d.pending,h!==null&&(f=h.next,f===h?d.pending=null:(f=f.next,h.next=f,U0(d,f)))}function qd(d,h,f){var x=d.pending;if(d.pending=null,x!==null){x=x.next;do h.status="rejected",h.reason=f,ef(h),h=h.next;while(h!==x)}d.action=null}function ef(d){d=d.listeners;for(var h=0;h<d.length;h++)(0,d[h])()}function ym(d,h){return h}function Bl(d,h){if(br){var f=_a.formState;if(f!==null){e:{var x=Vs;if(br){if(Na){t:{for(var _=Na,F=Ua;_.nodeType!==8;){if(!F){_=null;break t}if(_=Sl(_.nextSibling),_===null){_=null;break t}}F=_.data,_=F==="F!"||F==="F"?_:null}if(_){Na=Sl(_.nextSibling),x=_.data==="F!";break e}}Uc(x)}x=!1}x&&(h=f[0])}}return f=On(),f.memoizedState=f.baseState=h,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ym,lastRenderedState:h},f.queue=x,f=UC.bind(null,Vs,x),x.dispatch=f,x=Wc(!1),F=y1.bind(null,Vs,!1,x.queue),x=On(),_={state:h,dispatch:null,action:d,pending:null},x.queue=_,f=O0.bind(null,Vs,_,F,f),_.dispatch=f,x.memoizedState=d,[h,f,!1]}function Ac(d){var h=Ha();return fc(h,zs,d)}function fc(d,h,f){if(h=Ju(d,h,ym)[0],d=XA(kl)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var x=Gc(h)}catch(re){throw re===ut?$e:re}else x=h;h=Ha();var _=h.queue,F=_.dispatch;return f!==h.memoizedState&&(Vs.flags|=2048,Gd(9,{destroy:void 0},tf.bind(null,_,f),null)),[x,F,d]}function tf(d,h){d.action=h}function sf(d){var h=Ha(),f=zs;if(f!==null)return fc(h,f,d);Ha(),h=h.memoizedState,f=Ha();var x=f.queue.dispatch;return f.memoizedState=d,[h,x,!1]}function Gd(d,h,f,x){return d={tag:d,create:f,deps:x,inst:h,next:null},h=Vs.updateQueue,h===null&&(h=bm(),Vs.updateQueue=h),f=h.lastEffect,f===null?h.lastEffect=d.next=d:(x=f.next,f.next=d,d.next=x,h.lastEffect=d),d}function H0(){return Ha().memoizedState}function Zu(d,h,f,x){var _=On();Vs.flags|=d,_.memoizedState=Gd(1|h,{destroy:void 0},f,x===void 0?null:x)}function eh(d,h,f,x){var _=Ha();x=x===void 0?null:x;var F=_.memoizedState.inst;zs!==null&&x!==null&&rg(x,zs.memoizedState.deps)?_.memoizedState=Gd(h,F,f,x):(Vs.flags|=d,_.memoizedState=Gd(1|h,F,f,x))}function CC(d,h){Zu(8390656,8,d,h)}function f1(d,h){eh(2048,8,d,h)}function eR(d){Vs.flags|=4;var h=Vs.updateQueue;if(h===null)h=bm(),Vs.updateQueue=h,h.events=[d];else{var f=h.events;f===null?h.events=[d]:f.push(d)}}function kC(d){var h=Ha().memoizedState;return eR({ref:h,nextImpl:d}),function(){if((Yr&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}function BC(d,h){return eh(4,2,d,h)}function SC(d,h){return eh(4,4,d,h)}function EC(d,h){if(typeof h=="function"){d=d();var f=h(d);return function(){typeof f=="function"?f():h(null)}}if(h!=null)return d=d(),h.current=d,function(){h.current=null}}function FC(d,h,f){f=f!=null?f.concat([d]):null,eh(4,4,EC.bind(null,h,d),f)}function p1(){}function DC(d,h){var f=Ha();h=h===void 0?null:h;var x=f.memoizedState;return h!==null&&rg(h,x[1])?x[0]:(f.memoizedState=[d,h],d)}function TC(d,h){var f=Ha();h=h===void 0?null:h;var x=f.memoizedState;if(h!==null&&rg(h,x[1]))return x[0];if(x=d(),ji){Se(!0);try{d()}finally{Se(!1)}}return f.memoizedState=[x,h],x}function g1(d,h,f){return f===void 0||(Qa&1073741824)!==0&&(_r&261930)===0?d.memoizedState=h:(d.memoizedState=f,d=P4(),Vs.lanes|=d,rh|=d,f)}function PC(d,h,f,x){return Xn(f,h)?f:Ar.current!==null?(d=g1(d,f,x),Xn(d,h)||(Un=!0),d):(Qa&42)===0||(Qa&1073741824)!==0&&(_r&261930)===0?(Un=!0,d.memoizedState=f):(d=P4(),Vs.lanes|=d,rh|=d,h)}function IC(d,h,f,x,_){var F=X.p;X.p=F!==0&&8>F?F:8;var re=O.T,Ee={};O.T=Ee,y1(d,!1,h,f);try{var at=_(),Ut=O.S;if(Ut!==null&&Ut(Ee,at),at!==null&&typeof at=="object"&&typeof at.then=="function"){var es=ge(at,x);ug(d,h,es,Xo(d))}else ug(d,h,x,Xo(d))}catch(os){ug(d,h,{then:function(){},status:"rejected",reason:os},Xo())}finally{X.p=F,re!==null&&Ee.types!==null&&(re.types=Ee.types),O.T=re}}function tR(){}function x1(d,h,f,x){if(d.tag!==5)throw Error(r(476));var _=LC(d).queue;IC(d,_,h,$,f===null?tR:function(){return MC(d),f(x)})}function LC(d){var h=d.memoizedState;if(h!==null)return h;h={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:$},next:null};var f={};return h.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:f},next:null},d.memoizedState=h,d=d.alternate,d!==null&&(d.memoizedState=h),h}function MC(d){var h=LC(d);h.next===null&&(h=d.alternate.memoizedState),ug(d,h.next.queue,{},Xo())}function b1(){return ti(Bg)}function RC(){return Ha().memoizedState}function OC(){return Ha().memoizedState}function sR(d){for(var h=d.return;h!==null;){switch(h.tag){case 24:case 3:var f=Xo();d=Ys(f);var x=cr(h,d,f);x!==null&&(So(x,h,f),Gr(x,h,f)),h={cache:Ku()},d.payload=h;return}h=h.return}}function rR(d,h,f){var x=Xo();f={lane:x,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},V0(d)?QC(h,f):(f=MA(d,h,f,x),f!==null&&(So(f,d,x),HC(f,h,x)))}function UC(d,h,f){var x=Xo();ug(d,h,f,x)}function ug(d,h,f,x){var _={lane:x,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(V0(d))QC(h,_);else{var F=d.alternate;if(d.lanes===0&&(F===null||F.lanes===0)&&(F=h.lastRenderedReducer,F!==null))try{var re=h.lastRenderedState,Ee=F(re,f);if(_.hasEagerState=!0,_.eagerState=Ee,Xn(Ee,re))return hm(d,h,_,0),_a===null&&um(),!1}catch{}if(f=MA(d,h,_,x),f!==null)return So(f,d,x),HC(f,h,x),!0}return!1}function y1(d,h,f,x){if(x={lane:2,revertLane:J1(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},V0(d)){if(h)throw Error(r(479))}else h=MA(d,f,x,2),h!==null&&So(h,d,2)}function V0(d){var h=d.alternate;return d===Vs||h!==null&&h===Vs}function QC(d,h){jo=Mi=!0;var f=d.pending;f===null?h.next=h:(h.next=f.next,f.next=h),d.pending=h}function HC(d,h,f){if((f&4194048)!==0){var x=h.lanes;x&=d.pendingLanes,f|=x,h.lanes=f,as(d,f)}}var hg={readContext:ti,use:Xu,useCallback:xa,useContext:xa,useEffect:xa,useImperativeHandle:xa,useLayoutEffect:xa,useInsertionEffect:xa,useMemo:xa,useReducer:xa,useRef:xa,useState:xa,useDebugValue:xa,useDeferredValue:xa,useTransition:xa,useSyncExternalStore:xa,useId:xa,useHostTransitionStatus:xa,useFormState:xa,useActionState:xa,useOptimistic:xa,useMemoCache:xa,useCacheRefresh:xa};hg.useEffectEvent=xa;var VC={readContext:ti,use:Xu,useCallback:function(d,h){return On().memoizedState=[d,h===void 0?null:h],d},useContext:ti,useEffect:CC,useImperativeHandle:function(d,h,f){f=f!=null?f.concat([d]):null,Zu(4194308,4,EC.bind(null,h,d),f)},useLayoutEffect:function(d,h){return Zu(4194308,4,d,h)},useInsertionEffect:function(d,h){Zu(4,2,d,h)},useMemo:function(d,h){var f=On();h=h===void 0?null:h;var x=d();if(ji){Se(!0);try{d()}finally{Se(!1)}}return f.memoizedState=[x,h],x},useReducer:function(d,h,f){var x=On();if(f!==void 0){var _=f(h);if(ji){Se(!0);try{f(h)}finally{Se(!1)}}}else _=h;return x.memoizedState=x.baseState=_,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:_},x.queue=d,d=d.dispatch=rR.bind(null,Vs,d),[x.memoizedState,d]},useRef:function(d){var h=On();return d={current:d},h.memoizedState=d},useState:function(d){d=Wc(d);var h=d.queue,f=UC.bind(null,Vs,h);return h.dispatch=f,[d.memoizedState,f]},useDebugValue:p1,useDeferredValue:function(d,h){var f=On();return g1(f,d,h)},useTransition:function(){var d=Wc(!1);return d=IC.bind(null,Vs,d.queue,!0,!1),On().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,h,f){var x=Vs,_=On();if(br){if(f===void 0)throw Error(r(407));f=f()}else{if(f=h(),_a===null)throw Error(r(349));(_r&127)!==0||mc(x,h,f)}_.memoizedState=f;var F={value:f,getSnapshot:h};return _.queue=F,CC(lg.bind(null,x,F,d),[d]),x.flags|=2048,Gd(9,{destroy:void 0},og.bind(null,x,F,f,h),null),f},useId:function(){var d=On(),h=_a.identifierPrefix;if(br){var f=wo,x=vo;f=(x&~(1<<32-Ve(x)-1)).toString(32)+f,h="_"+h+"R_"+f,f=fn++,0<f&&(h+="H"+f.toString(32)),h+="_"}else f=WA++,h="_"+h+"r_"+f.toString(32)+"_";return d.memoizedState=h},useHostTransitionStatus:b1,useFormState:Bl,useActionState:Bl,useOptimistic:function(d){var h=On();h.memoizedState=h.baseState=d;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=f,h=y1.bind(null,Vs,!0,f),f.dispatch=h,[d,h]},useMemoCache:$d,useCacheRefresh:function(){return On().memoizedState=sR.bind(null,Vs)},useEffectEvent:function(d){var h=On(),f={impl:d};return h.memoizedState=f,function(){if((Yr&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},v1={readContext:ti,use:Xu,useCallback:DC,useContext:ti,useEffect:f1,useImperativeHandle:FC,useInsertionEffect:BC,useLayoutEffect:SC,useMemo:TC,useReducer:XA,useRef:H0,useState:function(){return XA(kl)},useDebugValue:p1,useDeferredValue:function(d,h){var f=Ha();return PC(f,zs.memoizedState,d,h)},useTransition:function(){var d=XA(kl)[0],h=Ha().memoizedState;return[typeof d=="boolean"?d:Gc(d),h]},useSyncExternalStore:ZA,useId:RC,useHostTransitionStatus:b1,useFormState:Ac,useActionState:Ac,useOptimistic:function(d,h){var f=Ha();return R0(f,zs,d,h)},useMemoCache:$d,useCacheRefresh:OC};v1.useEffectEvent=kC;var zC={readContext:ti,use:Xu,useCallback:DC,useContext:ti,useEffect:f1,useImperativeHandle:FC,useInsertionEffect:BC,useLayoutEffect:SC,useMemo:TC,useReducer:JA,useRef:H0,useState:function(){return JA(kl)},useDebugValue:p1,useDeferredValue:function(d,h){var f=Ha();return zs===null?g1(f,d,h):PC(f,zs.memoizedState,d,h)},useTransition:function(){var d=JA(kl)[0],h=Ha().memoizedState;return[typeof d=="boolean"?d:Gc(d),h]},useSyncExternalStore:ZA,useId:RC,useHostTransitionStatus:b1,useFormState:sf,useActionState:sf,useOptimistic:function(d,h){var f=Ha();return zs!==null?R0(f,zs,d,h):(f.baseState=d,[d,f.queue.dispatch])},useMemoCache:$d,useCacheRefresh:OC};zC.useEffectEvent=kC;function w1(d,h,f,x){h=d.memoizedState,f=f(x,h),f=f==null?h:A({},h,f),d.memoizedState=f,d.lanes===0&&(d.updateQueue.baseState=f)}var N1={enqueueSetState:function(d,h,f){d=d._reactInternals;var x=Xo(),_=Ys(x);_.payload=h,f!=null&&(_.callback=f),h=cr(d,_,x),h!==null&&(So(h,d,x),Gr(h,d,x))},enqueueReplaceState:function(d,h,f){d=d._reactInternals;var x=Xo(),_=Ys(x);_.tag=1,_.payload=h,f!=null&&(_.callback=f),h=cr(d,_,x),h!==null&&(So(h,d,x),Gr(h,d,x))},enqueueForceUpdate:function(d,h){d=d._reactInternals;var f=Xo(),x=Ys(f);x.tag=2,h!=null&&(x.callback=h),h=cr(d,x,f),h!==null&&(So(h,d,f),Gr(h,d,f))}};function $C(d,h,f,x,_,F,re){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(x,F,re):h.prototype&&h.prototype.isPureReactComponent?!ic(f,x)||!ic(_,F):!0}function qC(d,h,f,x){d=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(f,x),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(f,x),h.state!==d&&N1.enqueueReplaceState(h,h.state,null)}function vm(d,h){var f=h;if("ref"in h){f={};for(var x in h)x!=="ref"&&(f[x]=h[x])}if(d=d.defaultProps){f===h&&(f=A({},f));for(var _ in d)f[_]===void 0&&(f[_]=d[_])}return f}function GC(d){dm(d)}function WC(d){console.error(d)}function YC(d){dm(d)}function z0(d,h){try{var f=d.onUncaughtError;f(h.value,{componentStack:h.stack})}catch(x){setTimeout(function(){throw x})}}function KC(d,h,f){try{var x=d.onCaughtError;x(f.value,{componentStack:f.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function j1(d,h,f){return f=Ys(f),f.tag=3,f.payload={element:null},f.callback=function(){z0(d,h)},f}function XC(d){return d=Ys(d),d.tag=3,d}function JC(d,h,f,x){var _=f.type.getDerivedStateFromError;if(typeof _=="function"){var F=x.value;d.payload=function(){return _(F)},d.callback=function(){KC(h,f,x)}}var re=f.stateNode;re!==null&&typeof re.componentDidCatch=="function"&&(d.callback=function(){KC(h,f,x),typeof _!="function"&&(ah===null?ah=new Set([this]):ah.add(this));var Ee=x.stack;this.componentDidCatch(x.value,{componentStack:Ee!==null?Ee:""})})}function aR(d,h,f,x,_){if(f.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(h=f.alternate,h!==null&&Vc(h,f,_,!0),f=Pa.current,f!==null){switch(f.tag){case 31:case 13:return Mr===null?sb():f.alternate===null&&pn===0&&(pn=3),f.flags&=-257,f.flags|=65536,f.lanes=_,x===wt?f.flags|=16384:(h=f.updateQueue,h===null?f.updateQueue=new Set([x]):h.add(x),Y1(d,x,_)),!1;case 22:return f.flags|=65536,x===wt?f.flags|=16384:(h=f.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([x])},f.updateQueue=h):(f=h.retryQueue,f===null?h.retryQueue=new Set([x]):f.add(x)),Y1(d,x,_)),!1}throw Error(r(435,f.tag))}return Y1(d,x,_),sb(),!1}if(br)return h=Pa.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=_,x!==Wo&&(d=Error(r(422),{cause:x}),Wu(xo(d,f)))):(x!==Wo&&(h=Error(r(423),{cause:x}),Wu(xo(h,f))),d=d.current.alternate,d.flags|=65536,_&=-_,d.lanes|=_,x=xo(x,f),_=j1(d.stateNode,x,_),Nn(d,_),pn!==4&&(pn=2)),!1;var F=Error(r(520),{cause:x});if(F=xo(F,f),yg===null?yg=[F]:yg.push(F),pn!==4&&(pn=2),h===null)return!0;x=xo(x,f),f=h;do{switch(f.tag){case 3:return f.flags|=65536,d=_&-_,f.lanes|=d,d=j1(f.stateNode,x,d),Nn(f,d),!1;case 1:if(h=f.type,F=f.stateNode,(f.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(ah===null||!ah.has(F))))return f.flags|=65536,_&=-_,f.lanes|=_,_=XC(_),JC(_,d,f,x),Nn(f,_),!1}f=f.return}while(f!==null);return!1}var _1=Error(r(461)),Un=!1;function _i(d,h,f,x){h.child=d===null?ir(h,null,f,x):ja(h,d.child,f,x)}function ZC(d,h,f,x,_){f=f.render;var F=h.ref;if("ref"in x){var re={};for(var Ee in x)Ee!=="ref"&&(re[Ee]=x[Ee])}else re=x;return zc(h),x=ag(d,h,f,re,F,_),Ee=ng(),d!==null&&!Un?(ig(d,h,_),Wd(d,h,_)):(br&&Ee&&eg(h),h.flags|=1,_i(d,h,x,_),h.child)}function e4(d,h,f,x,_){if(d===null){var F=f.type;return typeof F=="function"&&!OA(F)&&F.defaultProps===void 0&&f.compare===null?(h.tag=15,h.type=F,t4(d,h,F,x,_)):(d=$u(f.type,null,x,h,h.mode,_),d.ref=h.ref,d.return=h,h.child=d)}if(F=d.child,!T1(d,_)){var re=F.memoizedProps;if(f=f.compare,f=f!==null?f:ic,f(re,x)&&d.ref===h.ref)return Wd(d,h,_)}return h.flags|=1,d=go(F,x),d.ref=h.ref,d.return=h,h.child=d}function t4(d,h,f,x,_){if(d!==null){var F=d.memoizedProps;if(ic(F,x)&&d.ref===h.ref)if(Un=!1,h.pendingProps=x=F,T1(d,_))(d.flags&131072)!==0&&(Un=!0);else return h.lanes=d.lanes,Wd(d,h,_)}return C1(d,h,f,x,_)}function s4(d,h,f,x){var _=x.children,F=d!==null?d.memoizedState:null;if(d===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((h.flags&128)!==0){if(F=F!==null?F.baseLanes|f:f,d!==null){for(x=h.child=d.child,_=0;x!==null;)_=_|x.lanes|x.childLanes,x=x.sibling;x=_&~F}else x=0,h.child=null;return r4(d,h,F,f,x)}if((f&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},d!==null&&Re(h,F!==null?F.cachePool:null),F!==null?Ta(h,F):Hr(),mn(h);else return x=h.lanes=536870912,r4(d,h,F!==null?F.baseLanes|f:f,f,x)}else F!==null?(Re(h,F.cachePool),Ta(h,F),An(),h.memoizedState=null):(d!==null&&Re(h,null),Hr(),An());return _i(d,h,_,f),h.child}function mg(d,h){return d!==null&&d.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function r4(d,h,f,x,_){var F=Fe();return F=F===null?null:{parent:en._currentValue,pool:F},h.memoizedState={baseLanes:f,cachePool:F},d!==null&&Re(h,null),Hr(),mn(h),d!==null&&Vc(d,h,x,!0),h.childLanes=_,null}function $0(d,h){return h=G0({mode:h.mode,children:h.children},d.mode),h.ref=d.ref,d.child=h,h.return=d,h}function a4(d,h,f){return ja(h,d.child,null,f),d=$0(h,h.pendingProps),d.flags|=2,oa(h),h.memoizedState=null,d}function nR(d,h,f){var x=h.pendingProps,_=(h.flags&128)!==0;if(h.flags&=-129,d===null){if(br){if(x.mode==="hidden")return d=$0(h,x),h.lanes=536870912,mg(null,d);if(Wr(h),(d=Na)?(d=pk(d,Ua),d=d!==null&&d.data==="&"?d:null,d!==null&&(h.memoizedState={dehydrated:d,treeContext:Oc!==null?{id:vo,overflow:wo}:null,retryLane:536870912,hydrationErrors:null},f=UA(d),f.return=h,h.child=f,Zn=h,Na=null)):d=null,d===null)throw Uc(h);return h.lanes=536870912,null}return $0(h,x)}var F=d.memoizedState;if(F!==null){var re=F.dehydrated;if(Wr(h),_)if(h.flags&256)h.flags&=-257,h=a4(d,h,f);else if(h.memoizedState!==null)h.child=d.child,h.flags|=128,h=null;else throw Error(r(558));else if(Un||Vc(d,h,f,!1),_=(f&d.childLanes)!==0,Un||_){if(x=_a,x!==null&&(re=Zt(x,f),re!==0&&re!==F.retryLane))throw F.retryLane=re,dc(d,re),So(x,d,re),_1;sb(),h=a4(d,h,f)}else d=F.treeContext,Na=Sl(re.nextSibling),Zn=h,br=!0,Ni=null,Ua=!1,d!==null&&I0(h,d),h=$0(h,x),h.flags|=4096;return h}return d=go(d.child,{mode:x.mode,children:x.children}),d.ref=h.ref,h.child=d,d.return=h,d}function q0(d,h){var f=h.ref;if(f===null)d!==null&&d.ref!==null&&(h.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(d===null||d.ref!==f)&&(h.flags|=4194816)}}function C1(d,h,f,x,_){return zc(h),f=ag(d,h,f,x,void 0,_),x=ng(),d!==null&&!Un?(ig(d,h,_),Wd(d,h,_)):(br&&x&&eg(h),h.flags|=1,_i(d,h,f,_),h.child)}function n4(d,h,f,x,_,F){return zc(h),h.updateQueue=null,f=hc(h,x,f,_),YA(d),x=ng(),d!==null&&!Un?(ig(d,h,F),Wd(d,h,F)):(br&&x&&eg(h),h.flags|=1,_i(d,h,f,F),h.child)}function i4(d,h,f,x,_){if(zc(h),h.stateNode===null){var F=Jn,re=f.contextType;typeof re=="object"&&re!==null&&(F=ti(re)),F=new f(x,F),h.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,F.updater=N1,h.stateNode=F,F._reactInternals=h,F=h.stateNode,F.props=x,F.state=h.memoizedState,F.refs={},ys(h),re=f.contextType,F.context=typeof re=="object"&&re!==null?ti(re):Jn,F.state=h.memoizedState,re=f.getDerivedStateFromProps,typeof re=="function"&&(w1(h,f,re,x),F.state=h.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(re=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),re!==F.state&&N1.enqueueReplaceState(F,F.state,null),un(h,x,F,_),ga(),F.state=h.memoizedState),typeof F.componentDidMount=="function"&&(h.flags|=4194308),x=!0}else if(d===null){F=h.stateNode;var Ee=h.memoizedProps,at=vm(f,Ee);F.props=at;var Ut=F.context,es=f.contextType;re=Jn,typeof es=="object"&&es!==null&&(re=ti(es));var os=f.getDerivedStateFromProps;es=typeof os=="function"||typeof F.getSnapshotBeforeUpdate=="function",Ee=h.pendingProps!==Ee,es||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(Ee||Ut!==re)&&qC(h,F,x,re),Cs=!1;var Vt=h.memoizedState;F.state=Vt,un(h,x,F,_),ga(),Ut=h.memoizedState,Ee||Vt!==Ut||Cs?(typeof os=="function"&&(w1(h,f,os,x),Ut=h.memoizedState),(at=Cs||$C(h,f,at,x,Vt,Ut,re))?(es||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(h.flags|=4194308)):(typeof F.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=x,h.memoizedState=Ut),F.props=x,F.state=Ut,F.context=re,x=at):(typeof F.componentDidMount=="function"&&(h.flags|=4194308),x=!1)}else{F=h.stateNode,Da(d,h),re=h.memoizedProps,es=vm(f,re),F.props=es,os=h.pendingProps,Vt=F.context,Ut=f.contextType,at=Jn,typeof Ut=="object"&&Ut!==null&&(at=ti(Ut)),Ee=f.getDerivedStateFromProps,(Ut=typeof Ee=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(re!==os||Vt!==at)&&qC(h,F,x,at),Cs=!1,Vt=h.memoizedState,F.state=Vt,un(h,x,F,_),ga();var $t=h.memoizedState;re!==os||Vt!==$t||Cs||d!==null&&d.dependencies!==null&&$A(d.dependencies)?(typeof Ee=="function"&&(w1(h,f,Ee,x),$t=h.memoizedState),(es=Cs||$C(h,f,es,x,Vt,$t,at)||d!==null&&d.dependencies!==null&&$A(d.dependencies))?(Ut||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(x,$t,at),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(x,$t,at)),typeof F.componentDidUpdate=="function"&&(h.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof F.componentDidUpdate!="function"||re===d.memoizedProps&&Vt===d.memoizedState||(h.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||re===d.memoizedProps&&Vt===d.memoizedState||(h.flags|=1024),h.memoizedProps=x,h.memoizedState=$t),F.props=x,F.state=$t,F.context=at,x=es):(typeof F.componentDidUpdate!="function"||re===d.memoizedProps&&Vt===d.memoizedState||(h.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||re===d.memoizedProps&&Vt===d.memoizedState||(h.flags|=1024),x=!1)}return F=x,q0(d,h),x=(h.flags&128)!==0,F||x?(F=h.stateNode,f=x&&typeof f.getDerivedStateFromError!="function"?null:F.render(),h.flags|=1,d!==null&&x?(h.child=ja(h,d.child,null,_),h.child=ja(h,null,f,_)):_i(d,h,f,_),h.memoizedState=F.state,d=h.child):d=Wd(d,h,_),d}function o4(d,h,f,x){return Vd(),h.flags|=256,_i(d,h,f,x),h.child}var k1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function B1(d){return{baseLanes:d,cachePool:qe()}}function S1(d,h,f){return d=d!==null?d.childLanes&~f:0,h&&(d|=Ko),d}function l4(d,h,f){var x=h.pendingProps,_=!1,F=(h.flags&128)!==0,re;if((re=F)||(re=d!==null&&d.memoizedState===null?!1:(Dr.current&2)!==0),re&&(_=!0,h.flags&=-129),re=(h.flags&32)!==0,h.flags&=-33,d===null){if(br){if(_?tn(h):An(),(d=Na)?(d=pk(d,Ua),d=d!==null&&d.data!=="&"?d:null,d!==null&&(h.memoizedState={dehydrated:d,treeContext:Oc!==null?{id:vo,overflow:wo}:null,retryLane:536870912,hydrationErrors:null},f=UA(d),f.return=h,h.child=f,Zn=h,Na=null)):d=null,d===null)throw Uc(h);return u2(d)?h.lanes=32:h.lanes=536870912,null}var Ee=x.children;return x=x.fallback,_?(An(),_=h.mode,Ee=G0({mode:"hidden",children:Ee},_),x=Rc(x,_,f,null),Ee.return=h,x.return=h,Ee.sibling=x,h.child=Ee,x=h.child,x.memoizedState=B1(f),x.childLanes=S1(d,re,f),h.memoizedState=k1,mg(null,x)):(tn(h),E1(h,Ee))}var at=d.memoizedState;if(at!==null&&(Ee=at.dehydrated,Ee!==null)){if(F)h.flags&256?(tn(h),h.flags&=-257,h=F1(d,h,f)):h.memoizedState!==null?(An(),h.child=d.child,h.flags|=128,h=null):(An(),Ee=x.fallback,_=h.mode,x=G0({mode:"visible",children:x.children},_),Ee=Rc(Ee,_,f,null),Ee.flags|=2,x.return=h,Ee.return=h,x.sibling=Ee,h.child=x,ja(h,d.child,null,f),x=h.child,x.memoizedState=B1(f),x.childLanes=S1(d,re,f),h.memoizedState=k1,h=mg(null,x));else if(tn(h),u2(Ee)){if(re=Ee.nextSibling&&Ee.nextSibling.dataset,re)var Ut=re.dgst;re=Ut,x=Error(r(419)),x.stack="",x.digest=re,Wu({value:x,source:null,stack:null}),h=F1(d,h,f)}else if(Un||Vc(d,h,f,!1),re=(f&d.childLanes)!==0,Un||re){if(re=_a,re!==null&&(x=Zt(re,f),x!==0&&x!==at.retryLane))throw at.retryLane=x,dc(d,x),So(re,d,x),_1;d2(Ee)||sb(),h=F1(d,h,f)}else d2(Ee)?(h.flags|=192,h.child=d.child,h=null):(d=at.treeContext,Na=Sl(Ee.nextSibling),Zn=h,br=!0,Ni=null,Ua=!1,d!==null&&I0(h,d),h=E1(h,x.children),h.flags|=4096);return h}return _?(An(),Ee=x.fallback,_=h.mode,at=d.child,Ut=at.sibling,x=go(at,{mode:"hidden",children:x.children}),x.subtreeFlags=at.subtreeFlags&65011712,Ut!==null?Ee=go(Ut,Ee):(Ee=Rc(Ee,_,f,null),Ee.flags|=2),Ee.return=h,x.return=h,x.sibling=Ee,h.child=x,mg(null,x),x=h.child,Ee=d.child.memoizedState,Ee===null?Ee=B1(f):(_=Ee.cachePool,_!==null?(at=en._currentValue,_=_.parent!==at?{parent:at,pool:at}:_):_=qe(),Ee={baseLanes:Ee.baseLanes|f,cachePool:_}),x.memoizedState=Ee,x.childLanes=S1(d,re,f),h.memoizedState=k1,mg(d.child,x)):(tn(h),f=d.child,d=f.sibling,f=go(f,{mode:"visible",children:x.children}),f.return=h,f.sibling=null,d!==null&&(re=h.deletions,re===null?(h.deletions=[d],h.flags|=16):re.push(d)),h.child=f,h.memoizedState=null,f)}function E1(d,h){return h=G0({mode:"visible",children:h},d.mode),h.return=d,d.child=h}function G0(d,h){return d=di(22,d,null,h),d.lanes=0,d}function F1(d,h,f){return ja(h,d.child,null,f),d=E1(h,h.pendingProps.children),d.flags|=2,h.memoizedState=null,d}function c4(d,h,f){d.lanes|=h;var x=d.alternate;x!==null&&(x.lanes|=h),Yu(d.return,h,f)}function D1(d,h,f,x,_,F){var re=d.memoizedState;re===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:_,treeForkCount:F}:(re.isBackwards=h,re.rendering=null,re.renderingStartTime=0,re.last=x,re.tail=f,re.tailMode=_,re.treeForkCount=F)}function d4(d,h,f){var x=h.pendingProps,_=x.revealOrder,F=x.tail;x=x.children;var re=Dr.current,Ee=(re&2)!==0;if(Ee?(re=re&1|2,h.flags|=128):re&=1,R(Dr,re),_i(d,h,x,f),x=br?pm:0,!Ee&&d!==null&&(d.flags&128)!==0)e:for(d=h.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&c4(d,f,h);else if(d.tag===19)c4(d,f,h);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break e;for(;d.sibling===null;){if(d.return===null||d.return===h)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}switch(_){case"forwards":for(f=h.child,_=null;f!==null;)d=f.alternate,d!==null&&hi(d)===null&&(_=f),f=f.sibling;f=_,f===null?(_=h.child,h.child=null):(_=f.sibling,f.sibling=null),D1(h,!1,_,f,F,x);break;case"backwards":case"unstable_legacy-backwards":for(f=null,_=h.child,h.child=null;_!==null;){if(d=_.alternate,d!==null&&hi(d)===null){h.child=_;break}d=_.sibling,_.sibling=f,f=_,_=d}D1(h,!0,f,null,F,x);break;case"together":D1(h,!1,null,null,void 0,x);break;default:h.memoizedState=null}return h.child}function Wd(d,h,f){if(d!==null&&(h.dependencies=d.dependencies),rh|=h.lanes,(f&h.childLanes)===0)if(d!==null){if(Vc(d,h,f,!1),(f&h.childLanes)===0)return null}else return null;if(d!==null&&h.child!==d.child)throw Error(r(153));if(h.child!==null){for(d=h.child,f=go(d,d.pendingProps),h.child=f,f.return=h;d.sibling!==null;)d=d.sibling,f=f.sibling=go(d,d.pendingProps),f.return=h;f.sibling=null}return h.child}function T1(d,h){return(d.lanes&h)!==0?!0:(d=d.dependencies,!!(d!==null&&$A(d)))}function iR(d,h,f){switch(h.tag){case 3:De(h,h.stateNode.containerInfo),Hc(h,en,d.memoizedState.cache),Vd();break;case 27:case 5:Te(h);break;case 4:De(h,h.stateNode.containerInfo);break;case 10:Hc(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,Wr(h),null;break;case 13:var x=h.memoizedState;if(x!==null)return x.dehydrated!==null?(tn(h),h.flags|=128,null):(f&h.child.childLanes)!==0?l4(d,h,f):(tn(h),d=Wd(d,h,f),d!==null?d.sibling:null);tn(h);break;case 19:var _=(d.flags&128)!==0;if(x=(f&h.childLanes)!==0,x||(Vc(d,h,f,!1),x=(f&h.childLanes)!==0),_){if(x)return d4(d,h,f);h.flags|=128}if(_=h.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),R(Dr,Dr.current),x)break;return null;case 22:return h.lanes=0,s4(d,h,f,h.pendingProps);case 24:Hc(h,en,d.memoizedState.cache)}return Wd(d,h,f)}function u4(d,h,f){if(d!==null)if(d.memoizedProps!==h.pendingProps)Un=!0;else{if(!T1(d,f)&&(h.flags&128)===0)return Un=!1,iR(d,h,f);Un=(d.flags&131072)!==0}else Un=!1,br&&(h.flags&1048576)!==0&&P0(h,pm,h.index);switch(h.lanes=0,h.tag){case 16:e:{var x=h.pendingProps;if(d=Tt(h.elementType),h.type=d,typeof d=="function")OA(d)?(x=vm(d,x),h.tag=1,h=i4(null,h,d,x,f)):(h.tag=0,h=C1(null,h,d,x,f));else{if(d!=null){var _=d.$$typeof;if(_===E){h.tag=11,h=ZC(null,h,d,x,f);break e}else if(_===M){h.tag=14,h=e4(null,h,d,x,f);break e}}throw h=ne(d)||d,Error(r(306,h,""))}}return h;case 0:return C1(d,h,h.type,h.pendingProps,f);case 1:return x=h.type,_=vm(x,h.pendingProps),i4(d,h,x,_,f);case 3:e:{if(De(h,h.stateNode.containerInfo),d===null)throw Error(r(387));x=h.pendingProps;var F=h.memoizedState;_=F.element,Da(d,h),un(h,x,null,f);var re=h.memoizedState;if(x=re.cache,Hc(h,en,x),x!==F.cache&&zd(h,[en],f,!0),ga(),x=re.element,F.isDehydrated)if(F={element:x,isDehydrated:!1,cache:re.cache},h.updateQueue.baseState=F,h.memoizedState=F,h.flags&256){h=o4(d,h,x,f);break e}else if(x!==_){_=xo(Error(r(424)),h),Wu(_),h=o4(d,h,x,f);break e}else for(d=h.stateNode.containerInfo,d.nodeType===9?d=d.body:d=d.nodeName==="HTML"?d.ownerDocument.body:d,Na=Sl(d.firstChild),Zn=h,br=!0,Ni=null,Ua=!0,f=ir(h,null,x,f),h.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Vd(),x===_){h=Wd(d,h,f);break e}_i(d,h,x,f)}h=h.child}return h;case 26:return q0(d,h),d===null?(f=wk(h.type,null,h.pendingProps,null))?h.memoizedState=f:br||(f=h.type,d=h.pendingProps,x=cb(le.current).createElement(f),x[ht]=h,x[It]=d,Ci(x,f,d),Dt(x),h.stateNode=x):h.memoizedState=wk(h.type,d.memoizedProps,h.pendingProps,d.memoizedState),null;case 27:return Te(h),d===null&&br&&(x=h.stateNode=bk(h.type,h.pendingProps,le.current),Zn=h,Ua=!0,_=Na,lh(h.type)?(h2=_,Na=Sl(x.firstChild)):Na=_),_i(d,h,h.pendingProps.children,f),q0(d,h),d===null&&(h.flags|=4194304),h.child;case 5:return d===null&&br&&((_=x=Na)&&(x=LR(x,h.type,h.pendingProps,Ua),x!==null?(h.stateNode=x,Zn=h,Na=Sl(x.firstChild),Ua=!1,_=!0):_=!1),_||Uc(h)),Te(h),_=h.type,F=h.pendingProps,re=d!==null?d.memoizedProps:null,x=F.children,o2(_,F)?x=null:re!==null&&o2(_,re)&&(h.flags|=32),h.memoizedState!==null&&(_=ag(d,h,A1,null,null,f),Bg._currentValue=_),q0(d,h),_i(d,h,x,f),h.child;case 6:return d===null&&br&&((d=f=Na)&&(f=MR(f,h.pendingProps,Ua),f!==null?(h.stateNode=f,Zn=h,Na=null,d=!0):d=!1),d||Uc(h)),null;case 13:return l4(d,h,f);case 4:return De(h,h.stateNode.containerInfo),x=h.pendingProps,d===null?h.child=ja(h,null,x,f):_i(d,h,x,f),h.child;case 11:return ZC(d,h,h.type,h.pendingProps,f);case 7:return _i(d,h,h.pendingProps,f),h.child;case 8:return _i(d,h,h.pendingProps.children,f),h.child;case 12:return _i(d,h,h.pendingProps.children,f),h.child;case 10:return x=h.pendingProps,Hc(h,h.type,x.value),_i(d,h,x.children,f),h.child;case 9:return _=h.type._context,x=h.pendingProps.children,zc(h),_=ti(_),x=x(_),h.flags|=1,_i(d,h,x,f),h.child;case 14:return e4(d,h,h.type,h.pendingProps,f);case 15:return t4(d,h,h.type,h.pendingProps,f);case 19:return d4(d,h,f);case 31:return nR(d,h,f);case 22:return s4(d,h,f,h.pendingProps);case 24:return zc(h),x=ti(en),d===null?(_=Fe(),_===null&&(_=_a,F=Ku(),_.pooledCache=F,F.refCount++,F!==null&&(_.pooledCacheLanes|=f),_=F),h.memoizedState={parent:x,cache:_},ys(h),Hc(h,en,_)):((d.lanes&f)!==0&&(Da(d,h),un(h,null,null,f),ga()),_=d.memoizedState,F=h.memoizedState,_.parent!==x?(_={parent:x,cache:x},h.memoizedState=_,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=_),Hc(h,en,x)):(x=F.cache,Hc(h,en,x),x!==_.cache&&zd(h,[en],f,!0))),_i(d,h,h.pendingProps.children,f),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function Yd(d){d.flags|=4}function P1(d,h,f,x,_){if((h=(d.mode&32)!==0)&&(h=!1),h){if(d.flags|=16777216,(_&335544128)===_)if(d.stateNode.complete)d.flags|=8192;else if(R4())d.flags|=8192;else throw Wt=wt,Lt}else d.flags&=-16777217}function h4(d,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!kk(h))if(R4())d.flags|=8192;else throw Wt=wt,Lt}function W0(d,h){h!==null&&(d.flags|=4),d.flags&16384&&(h=d.tag!==22?xe():536870912,d.lanes|=h,of|=h)}function Ag(d,h){if(!br)switch(d.tailMode){case"hidden":h=d.tail;for(var f=null;h!==null;)h.alternate!==null&&(f=h),h=h.sibling;f===null?d.tail=null:f.sibling=null;break;case"collapsed":f=d.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?h||d.tail===null?d.tail=null:d.tail.sibling=null:x.sibling=null}}function Ia(d){var h=d.alternate!==null&&d.alternate.child===d.child,f=0,x=0;if(h)for(var _=d.child;_!==null;)f|=_.lanes|_.childLanes,x|=_.subtreeFlags&65011712,x|=_.flags&65011712,_.return=d,_=_.sibling;else for(_=d.child;_!==null;)f|=_.lanes|_.childLanes,x|=_.subtreeFlags,x|=_.flags,_.return=d,_=_.sibling;return d.subtreeFlags|=x,d.childLanes=f,h}function oR(d,h,f){var x=h.pendingProps;switch(VA(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ia(h),null;case 1:return Ia(h),null;case 3:return f=h.stateNode,x=null,d!==null&&(x=d.memoizedState.cache),h.memoizedState.cache!==x&&(h.flags|=2048),No(en),me(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(d===null||d.child===null)&&(ei(h)?Yd(h):d===null||d.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,sg())),Ia(h),null;case 26:var _=h.type,F=h.memoizedState;return d===null?(Yd(h),F!==null?(Ia(h),h4(h,F)):(Ia(h),P1(h,_,null,x,f))):F?F!==d.memoizedState?(Yd(h),Ia(h),h4(h,F)):(Ia(h),h.flags&=-16777217):(d=d.memoizedProps,d!==x&&Yd(h),Ia(h),P1(h,_,d,x,f)),null;case 27:if(we(h),f=le.current,_=h.type,d!==null&&h.stateNode!=null)d.memoizedProps!==x&&Yd(h);else{if(!x){if(h.stateNode===null)throw Error(r(166));return Ia(h),null}d=G.current,ei(h)?tg(h):(d=bk(_,x,f),h.stateNode=d,Yd(h))}return Ia(h),null;case 5:if(we(h),_=h.type,d!==null&&h.stateNode!=null)d.memoizedProps!==x&&Yd(h);else{if(!x){if(h.stateNode===null)throw Error(r(166));return Ia(h),null}if(F=G.current,ei(h))tg(h);else{var re=cb(le.current);switch(F){case 1:F=re.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:F=re.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":F=re.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":F=re.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":F=re.createElement("div"),F.innerHTML="<script><\/script>",F=F.removeChild(F.firstChild);break;case"select":F=typeof x.is=="string"?re.createElement("select",{is:x.is}):re.createElement("select"),x.multiple?F.multiple=!0:x.size&&(F.size=x.size);break;default:F=typeof x.is=="string"?re.createElement(_,{is:x.is}):re.createElement(_)}}F[ht]=h,F[It]=x;e:for(re=h.child;re!==null;){if(re.tag===5||re.tag===6)F.appendChild(re.stateNode);else if(re.tag!==4&&re.tag!==27&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===h)break e;for(;re.sibling===null;){if(re.return===null||re.return===h)break e;re=re.return}re.sibling.return=re.return,re=re.sibling}h.stateNode=F;e:switch(Ci(F,_,x),_){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&Yd(h)}}return Ia(h),P1(h,h.type,d===null?null:d.memoizedProps,h.pendingProps,f),null;case 6:if(d&&h.stateNode!=null)d.memoizedProps!==x&&Yd(h);else{if(typeof x!="string"&&h.stateNode===null)throw Error(r(166));if(d=le.current,ei(h)){if(d=h.stateNode,f=h.memoizedProps,x=null,_=Zn,_!==null)switch(_.tag){case 27:case 5:x=_.memoizedProps}d[ht]=h,d=!!(d.nodeValue===f||x!==null&&x.suppressHydrationWarning===!0||lk(d.nodeValue,f)),d||Uc(h,!0)}else d=cb(d).createTextNode(x),d[ht]=h,h.stateNode=d}return Ia(h),null;case 31:if(f=h.memoizedState,d===null||d.memoizedState!==null){if(x=ei(h),f!==null){if(d===null){if(!x)throw Error(r(318));if(d=h.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(557));d[ht]=h}else Vd(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Ia(h),d=!1}else f=sg(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=f),d=!0;if(!d)return h.flags&256?(oa(h),h):(oa(h),null);if((h.flags&128)!==0)throw Error(r(558))}return Ia(h),null;case 13:if(x=h.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(_=ei(h),x!==null&&x.dehydrated!==null){if(d===null){if(!_)throw Error(r(318));if(_=h.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[ht]=h}else Vd(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Ia(h),_=!1}else _=sg(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=_),_=!0;if(!_)return h.flags&256?(oa(h),h):(oa(h),null)}return oa(h),(h.flags&128)!==0?(h.lanes=f,h):(f=x!==null,d=d!==null&&d.memoizedState!==null,f&&(x=h.child,_=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(_=x.alternate.memoizedState.cachePool.pool),F=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(F=x.memoizedState.cachePool.pool),F!==_&&(x.flags|=2048)),f!==d&&f&&(h.child.flags|=8192),W0(h,h.updateQueue),Ia(h),null);case 4:return me(),d===null&&s2(h.stateNode.containerInfo),Ia(h),null;case 10:return No(h.type),Ia(h),null;case 19:if(I(Dr),x=h.memoizedState,x===null)return Ia(h),null;if(_=(h.flags&128)!==0,F=x.rendering,F===null)if(_)Ag(x,!1);else{if(pn!==0||d!==null&&(d.flags&128)!==0)for(d=h.child;d!==null;){if(F=hi(d),F!==null){for(h.flags|=128,Ag(x,!1),d=F.updateQueue,h.updateQueue=d,W0(h,d),h.subtreeFlags=0,d=f,f=h.child;f!==null;)Am(f,d),f=f.sibling;return R(Dr,Dr.current&1|2),br&&so(h,x.treeForkCount),h.child}d=d.sibling}x.tail!==null&&he()>Z0&&(h.flags|=128,_=!0,Ag(x,!1),h.lanes=4194304)}else{if(!_)if(d=hi(F),d!==null){if(h.flags|=128,_=!0,d=d.updateQueue,h.updateQueue=d,W0(h,d),Ag(x,!0),x.tail===null&&x.tailMode==="hidden"&&!F.alternate&&!br)return Ia(h),null}else 2*he()-x.renderingStartTime>Z0&&f!==536870912&&(h.flags|=128,_=!0,Ag(x,!1),h.lanes=4194304);x.isBackwards?(F.sibling=h.child,h.child=F):(d=x.last,d!==null?d.sibling=F:h.child=F,x.last=F)}return x.tail!==null?(d=x.tail,x.rendering=d,x.tail=d.sibling,x.renderingStartTime=he(),d.sibling=null,f=Dr.current,R(Dr,_?f&1|2:f&1),br&&so(h,x.treeForkCount),d):(Ia(h),null);case 22:case 23:return oa(h),jn(),x=h.memoizedState!==null,d!==null?d.memoizedState!==null!==x&&(h.flags|=8192):x&&(h.flags|=8192),x?(f&536870912)!==0&&(h.flags&128)===0&&(Ia(h),h.subtreeFlags&6&&(h.flags|=8192)):Ia(h),f=h.updateQueue,f!==null&&W0(h,f.retryQueue),f=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(f=d.memoizedState.cachePool.pool),x=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==f&&(h.flags|=2048),d!==null&&I(Ce),null;case 24:return f=null,d!==null&&(f=d.memoizedState.cache),h.memoizedState.cache!==f&&(h.flags|=2048),No(en),Ia(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function lR(d,h){switch(VA(h),h.tag){case 1:return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 3:return No(en),me(),d=h.flags,(d&65536)!==0&&(d&128)===0?(h.flags=d&-65537|128,h):null;case 26:case 27:case 5:return we(h),null;case 31:if(h.memoizedState!==null){if(oa(h),h.alternate===null)throw Error(r(340));Vd()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 13:if(oa(h),d=h.memoizedState,d!==null&&d.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Vd()}return d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 19:return I(Dr),null;case 4:return me(),null;case 10:return No(h.type),null;case 22:case 23:return oa(h),jn(),d!==null&&I(Ce),d=h.flags,d&65536?(h.flags=d&-65537|128,h):null;case 24:return No(en),null;case 25:return null;default:return null}}function m4(d,h){switch(VA(h),h.tag){case 3:No(en),me();break;case 26:case 27:case 5:we(h);break;case 4:me();break;case 31:h.memoizedState!==null&&oa(h);break;case 13:oa(h);break;case 19:I(Dr);break;case 10:No(h.type);break;case 22:case 23:oa(h),jn(),d!==null&&I(Ce);break;case 24:No(en)}}function fg(d,h){try{var f=h.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var _=x.next;f=_;do{if((f.tag&d)===d){x=void 0;var F=f.create,re=f.inst;x=F(),re.destroy=x}f=f.next}while(f!==_)}}catch(Ee){ca(h,h.return,Ee)}}function th(d,h,f){try{var x=h.updateQueue,_=x!==null?x.lastEffect:null;if(_!==null){var F=_.next;x=F;do{if((x.tag&d)===d){var re=x.inst,Ee=re.destroy;if(Ee!==void 0){re.destroy=void 0,_=h;var at=f,Ut=Ee;try{Ut()}catch(es){ca(_,at,es)}}}x=x.next}while(x!==F)}}catch(es){ca(h,h.return,es)}}function A4(d){var h=d.updateQueue;if(h!==null){var f=d.stateNode;try{hn(h,f)}catch(x){ca(d,d.return,x)}}}function f4(d,h,f){f.props=vm(d.type,d.memoizedProps),f.state=d.memoizedState;try{f.componentWillUnmount()}catch(x){ca(d,h,x)}}function pg(d,h){try{var f=d.ref;if(f!==null){switch(d.tag){case 26:case 27:case 5:var x=d.stateNode;break;case 30:x=d.stateNode;break;default:x=d.stateNode}typeof f=="function"?d.refCleanup=f(x):f.current=x}}catch(_){ca(d,h,_)}}function Yc(d,h){var f=d.ref,x=d.refCleanup;if(f!==null)if(typeof x=="function")try{x()}catch(_){ca(d,h,_)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(_){ca(d,h,_)}else f.current=null}function p4(d){var h=d.type,f=d.memoizedProps,x=d.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":f.autoFocus&&x.focus();break e;case"img":f.src?x.src=f.src:f.srcSet&&(x.srcset=f.srcSet)}}catch(_){ca(d,d.return,_)}}function I1(d,h,f){try{var x=d.stateNode;ER(x,d.type,f,h),x[It]=h}catch(_){ca(d,d.return,_)}}function g4(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&lh(d.type)||d.tag===4}function L1(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||g4(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&lh(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function M1(d,h,f){var x=d.tag;if(x===5||x===6)d=d.stateNode,h?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(d,h):(h=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,h.appendChild(d),f=f._reactRootContainer,f!=null||h.onclick!==null||(h.onclick=Ho));else if(x!==4&&(x===27&&lh(d.type)&&(f=d.stateNode,h=null),d=d.child,d!==null))for(M1(d,h,f),d=d.sibling;d!==null;)M1(d,h,f),d=d.sibling}function Y0(d,h,f){var x=d.tag;if(x===5||x===6)d=d.stateNode,h?f.insertBefore(d,h):f.appendChild(d);else if(x!==4&&(x===27&&lh(d.type)&&(f=d.stateNode),d=d.child,d!==null))for(Y0(d,h,f),d=d.sibling;d!==null;)Y0(d,h,f),d=d.sibling}function x4(d){var h=d.stateNode,f=d.memoizedProps;try{for(var x=d.type,_=h.attributes;_.length;)h.removeAttributeNode(_[0]);Ci(h,x,f),h[ht]=d,h[It]=f}catch(F){ca(d,d.return,F)}}var Kd=!1,Qn=!1,R1=!1,b4=typeof WeakSet=="function"?WeakSet:Set,mi=null;function cR(d,h){if(d=d.containerInfo,n2=pb,d=lc(d),jl(d)){if("selectionStart"in d)var f={start:d.selectionStart,end:d.selectionEnd};else e:{f=(f=d.ownerDocument)&&f.defaultView||window;var x=f.getSelection&&f.getSelection();if(x&&x.rangeCount!==0){f=x.anchorNode;var _=x.anchorOffset,F=x.focusNode;x=x.focusOffset;try{f.nodeType,F.nodeType}catch{f=null;break e}var re=0,Ee=-1,at=-1,Ut=0,es=0,os=d,Vt=null;t:for(;;){for(var $t;os!==f||_!==0&&os.nodeType!==3||(Ee=re+_),os!==F||x!==0&&os.nodeType!==3||(at=re+x),os.nodeType===3&&(re+=os.nodeValue.length),($t=os.firstChild)!==null;)Vt=os,os=$t;for(;;){if(os===d)break t;if(Vt===f&&++Ut===_&&(Ee=re),Vt===F&&++es===x&&(at=re),($t=os.nextSibling)!==null)break;os=Vt,Vt=os.parentNode}os=$t}f=Ee===-1||at===-1?null:{start:Ee,end:at}}else f=null}f=f||{start:0,end:0}}else f=null;for(i2={focusedElem:d,selectionRange:f},pb=!1,mi=h;mi!==null;)if(h=mi,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,mi=d;else for(;mi!==null;){switch(h=mi,F=h.alternate,d=h.flags,h.tag){case 0:if((d&4)!==0&&(d=h.updateQueue,d=d!==null?d.events:null,d!==null))for(f=0;f<d.length;f++)_=d[f],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((d&1024)!==0&&F!==null){d=void 0,f=h,_=F.memoizedProps,F=F.memoizedState,x=f.stateNode;try{var Ps=vm(f.type,_);d=x.getSnapshotBeforeUpdate(Ps,F),x.__reactInternalSnapshotBeforeUpdate=d}catch(Js){ca(f,f.return,Js)}}break;case 3:if((d&1024)!==0){if(d=h.stateNode.containerInfo,f=d.nodeType,f===9)c2(d);else if(f===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":c2(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(r(163))}if(d=h.sibling,d!==null){d.return=h.return,mi=d;break}mi=h.return}}function y4(d,h,f){var x=f.flags;switch(f.tag){case 0:case 11:case 15:Jd(d,f),x&4&&fg(5,f);break;case 1:if(Jd(d,f),x&4)if(d=f.stateNode,h===null)try{d.componentDidMount()}catch(re){ca(f,f.return,re)}else{var _=vm(f.type,h.memoizedProps);h=h.memoizedState;try{d.componentDidUpdate(_,h,d.__reactInternalSnapshotBeforeUpdate)}catch(re){ca(f,f.return,re)}}x&64&&A4(f),x&512&&pg(f,f.return);break;case 3:if(Jd(d,f),x&64&&(d=f.updateQueue,d!==null)){if(h=null,f.child!==null)switch(f.child.tag){case 27:case 5:h=f.child.stateNode;break;case 1:h=f.child.stateNode}try{hn(d,h)}catch(re){ca(f,f.return,re)}}break;case 27:h===null&&x&4&&x4(f);case 26:case 5:Jd(d,f),h===null&&x&4&&p4(f),x&512&&pg(f,f.return);break;case 12:Jd(d,f);break;case 31:Jd(d,f),x&4&&N4(d,f);break;case 13:Jd(d,f),x&4&&j4(d,f),x&64&&(d=f.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(f=xR.bind(null,f),RR(d,f))));break;case 22:if(x=f.memoizedState!==null||Kd,!x){h=h!==null&&h.memoizedState!==null||Qn,_=Kd;var F=Qn;Kd=x,(Qn=h)&&!F?Zd(d,f,(f.subtreeFlags&8772)!==0):Jd(d,f),Kd=_,Qn=F}break;case 30:break;default:Jd(d,f)}}function v4(d){var h=d.alternate;h!==null&&(d.alternate=null,v4(h)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(h=d.stateNode,h!==null&&de(h)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Va=null,_o=!1;function Xd(d,h,f){for(f=f.child;f!==null;)w4(d,h,f),f=f.sibling}function w4(d,h,f){if(_e&&typeof _e.onCommitFiberUnmount=="function")try{_e.onCommitFiberUnmount(Ct,f)}catch{}switch(f.tag){case 26:Qn||Yc(f,h),Xd(d,h,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Qn||Yc(f,h);var x=Va,_=_o;lh(f.type)&&(Va=f.stateNode,_o=!1),Xd(d,h,f),_g(f.stateNode),Va=x,_o=_;break;case 5:Qn||Yc(f,h);case 6:if(x=Va,_=_o,Va=null,Xd(d,h,f),Va=x,_o=_,Va!==null)if(_o)try{(Va.nodeType===9?Va.body:Va.nodeName==="HTML"?Va.ownerDocument.body:Va).removeChild(f.stateNode)}catch(F){ca(f,h,F)}else try{Va.removeChild(f.stateNode)}catch(F){ca(f,h,F)}break;case 18:Va!==null&&(_o?(d=Va,Ak(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,f.stateNode),ff(d)):Ak(Va,f.stateNode));break;case 4:x=Va,_=_o,Va=f.stateNode.containerInfo,_o=!0,Xd(d,h,f),Va=x,_o=_;break;case 0:case 11:case 14:case 15:th(2,f,h),Qn||th(4,f,h),Xd(d,h,f);break;case 1:Qn||(Yc(f,h),x=f.stateNode,typeof x.componentWillUnmount=="function"&&f4(f,h,x)),Xd(d,h,f);break;case 21:Xd(d,h,f);break;case 22:Qn=(x=Qn)||f.memoizedState!==null,Xd(d,h,f),Qn=x;break;default:Xd(d,h,f)}}function N4(d,h){if(h.memoizedState===null&&(d=h.alternate,d!==null&&(d=d.memoizedState,d!==null))){d=d.dehydrated;try{ff(d)}catch(f){ca(h,h.return,f)}}}function j4(d,h){if(h.memoizedState===null&&(d=h.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{ff(d)}catch(f){ca(h,h.return,f)}}function dR(d){switch(d.tag){case 31:case 13:case 19:var h=d.stateNode;return h===null&&(h=d.stateNode=new b4),h;case 22:return d=d.stateNode,h=d._retryCache,h===null&&(h=d._retryCache=new b4),h;default:throw Error(r(435,d.tag))}}function K0(d,h){var f=dR(d);h.forEach(function(x){if(!f.has(x)){f.add(x);var _=bR.bind(null,d,x);x.then(_,_)}})}function Co(d,h){var f=h.deletions;if(f!==null)for(var x=0;x<f.length;x++){var _=f[x],F=d,re=h,Ee=re;e:for(;Ee!==null;){switch(Ee.tag){case 27:if(lh(Ee.type)){Va=Ee.stateNode,_o=!1;break e}break;case 5:Va=Ee.stateNode,_o=!1;break e;case 3:case 4:Va=Ee.stateNode.containerInfo,_o=!0;break e}Ee=Ee.return}if(Va===null)throw Error(r(160));w4(F,re,_),Va=null,_o=!1,F=_.alternate,F!==null&&(F.return=null),_.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)_4(h,d),h=h.sibling}var pc=null;function _4(d,h){var f=d.alternate,x=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Co(h,d),ko(d),x&4&&(th(3,d,d.return),fg(3,d),th(5,d,d.return));break;case 1:Co(h,d),ko(d),x&512&&(Qn||f===null||Yc(f,f.return)),x&64&&Kd&&(d=d.updateQueue,d!==null&&(x=d.callbacks,x!==null&&(f=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=f===null?x:f.concat(x))));break;case 26:var _=pc;if(Co(h,d),ko(d),x&512&&(Qn||f===null||Yc(f,f.return)),x&4){var F=f!==null?f.memoizedState:null;if(x=d.memoizedState,f===null)if(x===null)if(d.stateNode===null){e:{x=d.type,f=d.memoizedProps,_=_.ownerDocument||_;t:switch(x){case"title":F=_.getElementsByTagName("title")[0],(!F||F[ke]||F[ht]||F.namespaceURI==="http://www.w3.org/2000/svg"||F.hasAttribute("itemprop"))&&(F=_.createElement(x),_.head.insertBefore(F,_.querySelector("head > title"))),Ci(F,x,f),F[ht]=d,Dt(F),x=F;break e;case"link":var re=_k("link","href",_).get(x+(f.href||""));if(re){for(var Ee=0;Ee<re.length;Ee++)if(F=re[Ee],F.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&F.getAttribute("rel")===(f.rel==null?null:f.rel)&&F.getAttribute("title")===(f.title==null?null:f.title)&&F.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){re.splice(Ee,1);break t}}F=_.createElement(x),Ci(F,x,f),_.head.appendChild(F);break;case"meta":if(re=_k("meta","content",_).get(x+(f.content||""))){for(Ee=0;Ee<re.length;Ee++)if(F=re[Ee],F.getAttribute("content")===(f.content==null?null:""+f.content)&&F.getAttribute("name")===(f.name==null?null:f.name)&&F.getAttribute("property")===(f.property==null?null:f.property)&&F.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&F.getAttribute("charset")===(f.charSet==null?null:f.charSet)){re.splice(Ee,1);break t}}F=_.createElement(x),Ci(F,x,f),_.head.appendChild(F);break;default:throw Error(r(468,x))}F[ht]=d,Dt(F),x=F}d.stateNode=x}else Ck(_,d.type,d.stateNode);else d.stateNode=jk(_,x,d.memoizedProps);else F!==x?(F===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):F.count--,x===null?Ck(_,d.type,d.stateNode):jk(_,x,d.memoizedProps)):x===null&&d.stateNode!==null&&I1(d,d.memoizedProps,f.memoizedProps)}break;case 27:Co(h,d),ko(d),x&512&&(Qn||f===null||Yc(f,f.return)),f!==null&&x&4&&I1(d,d.memoizedProps,f.memoizedProps);break;case 5:if(Co(h,d),ko(d),x&512&&(Qn||f===null||Yc(f,f.return)),d.flags&32){_=d.stateNode;try{Qo(_,"")}catch(Ps){ca(d,d.return,Ps)}}x&4&&d.stateNode!=null&&(_=d.memoizedProps,I1(d,_,f!==null?f.memoizedProps:_)),x&1024&&(R1=!0);break;case 6:if(Co(h,d),ko(d),x&4){if(d.stateNode===null)throw Error(r(162));x=d.memoizedProps,f=d.stateNode;try{f.nodeValue=x}catch(Ps){ca(d,d.return,Ps)}}break;case 3:if(hb=null,_=pc,pc=db(h.containerInfo),Co(h,d),pc=_,ko(d),x&4&&f!==null&&f.memoizedState.isDehydrated)try{ff(h.containerInfo)}catch(Ps){ca(d,d.return,Ps)}R1&&(R1=!1,C4(d));break;case 4:x=pc,pc=db(d.stateNode.containerInfo),Co(h,d),ko(d),pc=x;break;case 12:Co(h,d),ko(d);break;case 31:Co(h,d),ko(d),x&4&&(x=d.updateQueue,x!==null&&(d.updateQueue=null,K0(d,x)));break;case 13:Co(h,d),ko(d),d.child.flags&8192&&d.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(J0=he()),x&4&&(x=d.updateQueue,x!==null&&(d.updateQueue=null,K0(d,x)));break;case 22:_=d.memoizedState!==null;var at=f!==null&&f.memoizedState!==null,Ut=Kd,es=Qn;if(Kd=Ut||_,Qn=es||at,Co(h,d),Qn=es,Kd=Ut,ko(d),x&8192)e:for(h=d.stateNode,h._visibility=_?h._visibility&-2:h._visibility|1,_&&(f===null||at||Kd||Qn||wm(d)),f=null,h=d;;){if(h.tag===5||h.tag===26){if(f===null){at=f=h;try{if(F=at.stateNode,_)re=F.style,typeof re.setProperty=="function"?re.setProperty("display","none","important"):re.display="none";else{Ee=at.stateNode;var os=at.memoizedProps.style,Vt=os!=null&&os.hasOwnProperty("display")?os.display:null;Ee.style.display=Vt==null||typeof Vt=="boolean"?"":(""+Vt).trim()}}catch(Ps){ca(at,at.return,Ps)}}}else if(h.tag===6){if(f===null){at=h;try{at.stateNode.nodeValue=_?"":at.memoizedProps}catch(Ps){ca(at,at.return,Ps)}}}else if(h.tag===18){if(f===null){at=h;try{var $t=at.stateNode;_?fk($t,!0):fk(at.stateNode,!1)}catch(Ps){ca(at,at.return,Ps)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===d)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}x&4&&(x=d.updateQueue,x!==null&&(f=x.retryQueue,f!==null&&(x.retryQueue=null,K0(d,f))));break;case 19:Co(h,d),ko(d),x&4&&(x=d.updateQueue,x!==null&&(d.updateQueue=null,K0(d,x)));break;case 30:break;case 21:break;default:Co(h,d),ko(d)}}function ko(d){var h=d.flags;if(h&2){try{for(var f,x=d.return;x!==null;){if(g4(x)){f=x;break}x=x.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var _=f.stateNode,F=L1(d);Y0(d,F,_);break;case 5:var re=f.stateNode;f.flags&32&&(Qo(re,""),f.flags&=-33);var Ee=L1(d);Y0(d,Ee,re);break;case 3:case 4:var at=f.stateNode.containerInfo,Ut=L1(d);M1(d,Ut,at);break;default:throw Error(r(161))}}catch(es){ca(d,d.return,es)}d.flags&=-3}h&4096&&(d.flags&=-4097)}function C4(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var h=d;C4(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),d=d.sibling}}function Jd(d,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)y4(d,h.alternate,h),h=h.sibling}function wm(d){for(d=d.child;d!==null;){var h=d;switch(h.tag){case 0:case 11:case 14:case 15:th(4,h,h.return),wm(h);break;case 1:Yc(h,h.return);var f=h.stateNode;typeof f.componentWillUnmount=="function"&&f4(h,h.return,f),wm(h);break;case 27:_g(h.stateNode);case 26:case 5:Yc(h,h.return),wm(h);break;case 22:h.memoizedState===null&&wm(h);break;case 30:wm(h);break;default:wm(h)}d=d.sibling}}function Zd(d,h,f){for(f=f&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var x=h.alternate,_=d,F=h,re=F.flags;switch(F.tag){case 0:case 11:case 15:Zd(_,F,f),fg(4,F);break;case 1:if(Zd(_,F,f),x=F,_=x.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Ut){ca(x,x.return,Ut)}if(x=F,_=x.updateQueue,_!==null){var Ee=x.stateNode;try{var at=_.shared.hiddenCallbacks;if(at!==null)for(_.shared.hiddenCallbacks=null,_=0;_<at.length;_++)ui(at[_],Ee)}catch(Ut){ca(x,x.return,Ut)}}f&&re&64&&A4(F),pg(F,F.return);break;case 27:x4(F);case 26:case 5:Zd(_,F,f),f&&x===null&&re&4&&p4(F),pg(F,F.return);break;case 12:Zd(_,F,f);break;case 31:Zd(_,F,f),f&&re&4&&N4(_,F);break;case 13:Zd(_,F,f),f&&re&4&&j4(_,F);break;case 22:F.memoizedState===null&&Zd(_,F,f),pg(F,F.return);break;case 30:break;default:Zd(_,F,f)}h=h.sibling}}function O1(d,h){var f=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(f=d.memoizedState.cachePool.pool),d=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(d=h.memoizedState.cachePool.pool),d!==f&&(d!=null&&d.refCount++,f!=null&&gm(f))}function U1(d,h){d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&gm(d))}function gc(d,h,f,x){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)k4(d,h,f,x),h=h.sibling}function k4(d,h,f,x){var _=h.flags;switch(h.tag){case 0:case 11:case 15:gc(d,h,f,x),_&2048&&fg(9,h);break;case 1:gc(d,h,f,x);break;case 3:gc(d,h,f,x),_&2048&&(d=null,h.alternate!==null&&(d=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==d&&(h.refCount++,d!=null&&gm(d)));break;case 12:if(_&2048){gc(d,h,f,x),d=h.stateNode;try{var F=h.memoizedProps,re=F.id,Ee=F.onPostCommit;typeof Ee=="function"&&Ee(re,h.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(at){ca(h,h.return,at)}}else gc(d,h,f,x);break;case 31:gc(d,h,f,x);break;case 13:gc(d,h,f,x);break;case 23:break;case 22:F=h.stateNode,re=h.alternate,h.memoizedState!==null?F._visibility&2?gc(d,h,f,x):gg(d,h):F._visibility&2?gc(d,h,f,x):(F._visibility|=2,rf(d,h,f,x,(h.subtreeFlags&10256)!==0||!1)),_&2048&&O1(re,h);break;case 24:gc(d,h,f,x),_&2048&&U1(h.alternate,h);break;default:gc(d,h,f,x)}}function rf(d,h,f,x,_){for(_=_&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var F=d,re=h,Ee=f,at=x,Ut=re.flags;switch(re.tag){case 0:case 11:case 15:rf(F,re,Ee,at,_),fg(8,re);break;case 23:break;case 22:var es=re.stateNode;re.memoizedState!==null?es._visibility&2?rf(F,re,Ee,at,_):gg(F,re):(es._visibility|=2,rf(F,re,Ee,at,_)),_&&Ut&2048&&O1(re.alternate,re);break;case 24:rf(F,re,Ee,at,_),_&&Ut&2048&&U1(re.alternate,re);break;default:rf(F,re,Ee,at,_)}h=h.sibling}}function gg(d,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var f=d,x=h,_=x.flags;switch(x.tag){case 22:gg(f,x),_&2048&&O1(x.alternate,x);break;case 24:gg(f,x),_&2048&&U1(x.alternate,x);break;default:gg(f,x)}h=h.sibling}}var xg=8192;function af(d,h,f){if(d.subtreeFlags&xg)for(d=d.child;d!==null;)B4(d,h,f),d=d.sibling}function B4(d,h,f){switch(d.tag){case 26:af(d,h,f),d.flags&xg&&d.memoizedState!==null&&KR(f,pc,d.memoizedState,d.memoizedProps);break;case 5:af(d,h,f);break;case 3:case 4:var x=pc;pc=db(d.stateNode.containerInfo),af(d,h,f),pc=x;break;case 22:d.memoizedState===null&&(x=d.alternate,x!==null&&x.memoizedState!==null?(x=xg,xg=16777216,af(d,h,f),xg=x):af(d,h,f));break;default:af(d,h,f)}}function S4(d){var h=d.alternate;if(h!==null&&(d=h.child,d!==null)){h.child=null;do h=d.sibling,d.sibling=null,d=h;while(d!==null)}}function bg(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var f=0;f<h.length;f++){var x=h[f];mi=x,F4(x,d)}S4(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)E4(d),d=d.sibling}function E4(d){switch(d.tag){case 0:case 11:case 15:bg(d),d.flags&2048&&th(9,d,d.return);break;case 3:bg(d);break;case 12:bg(d);break;case 22:var h=d.stateNode;d.memoizedState!==null&&h._visibility&2&&(d.return===null||d.return.tag!==13)?(h._visibility&=-3,X0(d)):bg(d);break;default:bg(d)}}function X0(d){var h=d.deletions;if((d.flags&16)!==0){if(h!==null)for(var f=0;f<h.length;f++){var x=h[f];mi=x,F4(x,d)}S4(d)}for(d=d.child;d!==null;){switch(h=d,h.tag){case 0:case 11:case 15:th(8,h,h.return),X0(h);break;case 22:f=h.stateNode,f._visibility&2&&(f._visibility&=-3,X0(h));break;default:X0(h)}d=d.sibling}}function F4(d,h){for(;mi!==null;){var f=mi;switch(f.tag){case 0:case 11:case 15:th(8,f,h);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var x=f.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:gm(f.memoizedState.cache)}if(x=f.child,x!==null)x.return=f,mi=x;else e:for(f=d;mi!==null;){x=mi;var _=x.sibling,F=x.return;if(v4(x),x===f){mi=null;break e}if(_!==null){_.return=F,mi=_;break e}mi=F}}}var uR={getCacheForType:function(d){var h=ti(en),f=h.data.get(d);return f===void 0&&(f=d(),h.data.set(d,f)),f},cacheSignal:function(){return ti(en).controller.signal}},hR=typeof WeakMap=="function"?WeakMap:Map,Yr=0,_a=null,yr=null,_r=0,la=0,Yo=null,sh=!1,nf=!1,Q1=!1,eu=0,pn=0,rh=0,Nm=0,H1=0,Ko=0,of=0,yg=null,Bo=null,V1=!1,J0=0,D4=0,Z0=1/0,eb=null,ah=null,ri=0,nh=null,lf=null,tu=0,z1=0,$1=null,T4=null,vg=0,q1=null;function Xo(){return(Yr&2)!==0&&_r!==0?_r&-_r:O.T!==null?J1():Nt()}function P4(){if(Ko===0)if((_r&536870912)===0||br){var d=Et;Et<<=1,(Et&3932160)===0&&(Et=262144),Ko=d}else Ko=536870912;return d=Pa.current,d!==null&&(d.flags|=32),Ko}function So(d,h,f){(d===_a&&(la===2||la===9)||d.cancelPendingCommit!==null)&&(cf(d,0),ih(d,_r,Ko,!1)),ct(d,f),((Yr&2)===0||d!==_a)&&(d===_a&&((Yr&2)===0&&(Nm|=f),pn===4&&ih(d,_r,Ko,!1)),Kc(d))}function I4(d,h,f){if((Yr&6)!==0)throw Error(r(327));var x=!f&&(h&127)===0&&(h&d.expiredLanes)===0||ue(d,h),_=x?fR(d,h):W1(d,h,!0),F=x;do{if(_===0){nf&&!x&&ih(d,h,0,!1);break}else{if(f=d.current.alternate,F&&!mR(f)){_=W1(d,h,!1),F=!1;continue}if(_===2){if(F=h,d.errorRecoveryDisabledLanes&F)var re=0;else re=d.pendingLanes&-536870913,re=re!==0?re:re&536870912?536870912:0;if(re!==0){h=re;e:{var Ee=d;_=yg;var at=Ee.current.memoizedState.isDehydrated;if(at&&(cf(Ee,re).flags|=256),re=W1(Ee,re,!1),re!==2){if(Q1&&!at){Ee.errorRecoveryDisabledLanes|=F,Nm|=F,_=4;break e}F=Bo,Bo=_,F!==null&&(Bo===null?Bo=F:Bo.push.apply(Bo,F))}_=re}if(F=!1,_!==2)continue}}if(_===1){cf(d,0),ih(d,h,0,!0);break}e:{switch(x=d,F=_,F){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:ih(x,h,Ko,!sh);break e;case 2:Bo=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(_=J0+300-he(),10<_)){if(ih(x,h,Ko,!sh),Ie(x,0,!0)!==0)break e;tu=h,x.timeoutHandle=hk(L4.bind(null,x,f,Bo,eb,V1,h,Ko,Nm,of,sh,F,"Throttled",-0,0),_);break e}L4(x,f,Bo,eb,V1,h,Ko,Nm,of,sh,F,null,-0,0)}}break}while(!0);Kc(d)}function L4(d,h,f,x,_,F,re,Ee,at,Ut,es,os,Vt,$t){if(d.timeoutHandle=-1,os=h.subtreeFlags,os&8192||(os&16785408)===16785408){os={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ho},B4(h,F,os);var Ps=(F&62914560)===F?J0-he():(F&4194048)===F?D4-he():0;if(Ps=XR(os,Ps),Ps!==null){tu=F,d.cancelPendingCommit=Ps(z4.bind(null,d,h,F,f,x,_,re,Ee,at,es,os,null,Vt,$t)),ih(d,F,re,!Ut);return}}z4(d,h,F,f,x,_,re,Ee,at)}function mR(d){for(var h=d;;){var f=h.tag;if((f===0||f===11||f===15)&&h.flags&16384&&(f=h.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var x=0;x<f.length;x++){var _=f[x],F=_.getSnapshot;_=_.value;try{if(!Xn(F(),_))return!1}catch{return!1}}if(f=h.child,h.subtreeFlags&16384&&f!==null)f.return=h,h=f;else{if(h===d)break;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ih(d,h,f,x){h&=~H1,h&=~Nm,d.suspendedLanes|=h,d.pingedLanes&=~h,x&&(d.warmLanes|=h),x=d.expirationTimes;for(var _=h;0<_;){var F=31-Ve(_),re=1<<F;x[F]=-1,_&=~re}f!==0&&ts(d,f,h)}function tb(){return(Yr&6)===0?(wg(0),!1):!0}function G1(){if(yr!==null){if(la===0)var d=yr.return;else d=yr,Cl=Qc=null,KA(d),us=null,Ls=0,d=yr;for(;d!==null;)m4(d.alternate,d),d=d.return;yr=null}}function cf(d,h){var f=d.timeoutHandle;f!==-1&&(d.timeoutHandle=-1,TR(f)),f=d.cancelPendingCommit,f!==null&&(d.cancelPendingCommit=null,f()),tu=0,G1(),_a=d,yr=f=go(d.current,null),_r=h,la=0,Yo=null,sh=!1,nf=ue(d,h),Q1=!1,of=Ko=H1=Nm=rh=pn=0,Bo=yg=null,V1=!1,(h&8)!==0&&(h|=h&32);var x=d.entangledLanes;if(x!==0)for(d=d.entanglements,x&=h;0<x;){var _=31-Ve(x),F=1<<_;h|=d[_],x&=~F}return eu=h,um(),f}function M4(d,h){Vs=null,O.H=hg,h===ut||h===$e?(h=rs(),la=3):h===Lt?(h=rs(),la=4):la=h===_1?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Yo=h,yr===null&&(pn=1,z0(d,xo(h,d.current)))}function R4(){var d=Pa.current;return d===null?!0:(_r&4194048)===_r?Mr===null:(_r&62914560)===_r||(_r&536870912)!==0?d===Mr:!1}function O4(){var d=O.H;return O.H=hg,d===null?hg:d}function U4(){var d=O.A;return O.A=uR,d}function sb(){pn=4,sh||(_r&4194048)!==_r&&Pa.current!==null||(nf=!0),(rh&134217727)===0&&(Nm&134217727)===0||_a===null||ih(_a,_r,Ko,!1)}function W1(d,h,f){var x=Yr;Yr|=2;var _=O4(),F=U4();(_a!==d||_r!==h)&&(eb=null,cf(d,h)),h=!1;var re=pn;e:do try{if(la!==0&&yr!==null){var Ee=yr,at=Yo;switch(la){case 8:G1(),re=6;break e;case 3:case 2:case 9:case 6:Pa.current===null&&(h=!0);var Ut=la;if(la=0,Yo=null,df(d,Ee,at,Ut),f&&nf){re=0;break e}break;default:Ut=la,la=0,Yo=null,df(d,Ee,at,Ut)}}AR(),re=pn;break}catch(es){M4(d,es)}while(!0);return h&&d.shellSuspendCounter++,Cl=Qc=null,Yr=x,O.H=_,O.A=F,yr===null&&(_a=null,_r=0,um()),re}function AR(){for(;yr!==null;)Q4(yr)}function fR(d,h){var f=Yr;Yr|=2;var x=O4(),_=U4();_a!==d||_r!==h?(eb=null,Z0=he()+500,cf(d,h)):nf=ue(d,h);e:do try{if(la!==0&&yr!==null){h=yr;var F=Yo;t:switch(la){case 1:la=0,Yo=null,df(d,h,F,1);break;case 2:case 9:if(Ft(F)){la=0,Yo=null,H4(h);break}h=function(){la!==2&&la!==9||_a!==d||(la=7),Kc(d)},F.then(h,h);break e;case 3:la=7;break e;case 4:la=5;break e;case 7:Ft(F)?(la=0,Yo=null,H4(h)):(la=0,Yo=null,df(d,h,F,7));break;case 5:var re=null;switch(yr.tag){case 26:re=yr.memoizedState;case 5:case 27:var Ee=yr;if(re?kk(re):Ee.stateNode.complete){la=0,Yo=null;var at=Ee.sibling;if(at!==null)yr=at;else{var Ut=Ee.return;Ut!==null?(yr=Ut,rb(Ut)):yr=null}break t}}la=0,Yo=null,df(d,h,F,5);break;case 6:la=0,Yo=null,df(d,h,F,6);break;case 8:G1(),pn=6;break e;default:throw Error(r(462))}}pR();break}catch(es){M4(d,es)}while(!0);return Cl=Qc=null,O.H=x,O.A=_,Yr=f,yr!==null?0:(_a=null,_r=0,um(),pn)}function pR(){for(;yr!==null&&!Le();)Q4(yr)}function Q4(d){var h=u4(d.alternate,d,eu);d.memoizedProps=d.pendingProps,h===null?rb(d):yr=h}function H4(d){var h=d,f=h.alternate;switch(h.tag){case 15:case 0:h=n4(f,h,h.pendingProps,h.type,void 0,_r);break;case 11:h=n4(f,h,h.pendingProps,h.type.render,h.ref,_r);break;case 5:KA(h);default:m4(f,h),h=yr=Am(h,eu),h=u4(f,h,eu)}d.memoizedProps=d.pendingProps,h===null?rb(d):yr=h}function df(d,h,f,x){Cl=Qc=null,KA(h),us=null,Ls=0;var _=h.return;try{if(aR(d,_,h,f,_r)){pn=1,z0(d,xo(f,d.current)),yr=null;return}}catch(F){if(_!==null)throw yr=_,F;pn=1,z0(d,xo(f,d.current)),yr=null;return}h.flags&32768?(br||x===1?d=!0:nf||(_r&536870912)!==0?d=!1:(sh=d=!0,(x===2||x===9||x===3||x===6)&&(x=Pa.current,x!==null&&x.tag===13&&(x.flags|=16384))),V4(h,d)):rb(h)}function rb(d){var h=d;do{if((h.flags&32768)!==0){V4(h,sh);return}d=h.return;var f=oR(h.alternate,h,eu);if(f!==null){yr=f;return}if(h=h.sibling,h!==null){yr=h;return}yr=h=d}while(h!==null);pn===0&&(pn=5)}function V4(d,h){do{var f=lR(d.alternate,d);if(f!==null){f.flags&=32767,yr=f;return}if(f=d.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!h&&(d=d.sibling,d!==null)){yr=d;return}yr=d=f}while(d!==null);pn=6,yr=null}function z4(d,h,f,x,_,F,re,Ee,at){d.cancelPendingCommit=null;do ab();while(ri!==0);if((Yr&6)!==0)throw Error(r(327));if(h!==null){if(h===d.current)throw Error(r(177));if(F=h.lanes|h.childLanes,F|=LA,Pt(d,f,F,re,Ee,at),d===_a&&(yr=_a=null,_r=0),lf=h,nh=d,tu=f,z1=F,$1=_,T4=x,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,yR(Ze,function(){return Y4(),null})):(d.callbackNode=null,d.callbackPriority=0),x=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||x){x=O.T,O.T=null,_=X.p,X.p=2,re=Yr,Yr|=4;try{cR(d,h,f)}finally{Yr=re,X.p=_,O.T=x}}ri=1,$4(),q4(),G4()}}function $4(){if(ri===1){ri=0;var d=nh,h=lf,f=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||f){f=O.T,O.T=null;var x=X.p;X.p=2;var _=Yr;Yr|=4;try{_4(h,d);var F=i2,re=lc(d.containerInfo),Ee=F.focusedElem,at=F.selectionRange;if(re!==Ee&&Ee&&Ee.ownerDocument&&oc(Ee.ownerDocument.documentElement,Ee)){if(at!==null&&jl(Ee)){var Ut=at.start,es=at.end;if(es===void 0&&(es=Ut),"selectionStart"in Ee)Ee.selectionStart=Ut,Ee.selectionEnd=Math.min(es,Ee.value.length);else{var os=Ee.ownerDocument||document,Vt=os&&os.defaultView||window;if(Vt.getSelection){var $t=Vt.getSelection(),Ps=Ee.textContent.length,Js=Math.min(at.start,Ps),ya=at.end===void 0?Js:Math.min(at.end,Ps);!$t.extend&&Js>ya&&(re=ya,ya=Js,Js=re);var St=zu(Ee,Js),At=zu(Ee,ya);if(St&&At&&($t.rangeCount!==1||$t.anchorNode!==St.node||$t.anchorOffset!==St.offset||$t.focusNode!==At.node||$t.focusOffset!==At.offset)){var Rt=os.createRange();Rt.setStart(St.node,St.offset),$t.removeAllRanges(),Js>ya?($t.addRange(Rt),$t.extend(At.node,At.offset)):(Rt.setEnd(At.node,At.offset),$t.addRange(Rt))}}}}for(os=[],$t=Ee;$t=$t.parentNode;)$t.nodeType===1&&os.push({element:$t,left:$t.scrollLeft,top:$t.scrollTop});for(typeof Ee.focus=="function"&&Ee.focus(),Ee=0;Ee<os.length;Ee++){var ns=os[Ee];ns.element.scrollLeft=ns.left,ns.element.scrollTop=ns.top}}pb=!!n2,i2=n2=null}finally{Yr=_,X.p=x,O.T=f}}d.current=h,ri=2}}function q4(){if(ri===2){ri=0;var d=nh,h=lf,f=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||f){f=O.T,O.T=null;var x=X.p;X.p=2;var _=Yr;Yr|=4;try{y4(d,h.alternate,h)}finally{Yr=_,X.p=x,O.T=f}}ri=3}}function G4(){if(ri===4||ri===3){ri=0,oe();var d=nh,h=lf,f=tu,x=T4;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?ri=5:(ri=0,lf=nh=null,W4(d,d.pendingLanes));var _=d.pendingLanes;if(_===0&&(ah=null),mt(f),h=h.stateNode,_e&&typeof _e.onCommitFiberRoot=="function")try{_e.onCommitFiberRoot(Ct,h,void 0,(h.current.flags&128)===128)}catch{}if(x!==null){h=O.T,_=X.p,X.p=2,O.T=null;try{for(var F=d.onRecoverableError,re=0;re<x.length;re++){var Ee=x[re];F(Ee.value,{componentStack:Ee.stack})}}finally{O.T=h,X.p=_}}(tu&3)!==0&&ab(),Kc(d),_=d.pendingLanes,(f&261930)!==0&&(_&42)!==0?d===q1?vg++:(vg=0,q1=d):vg=0,wg(0)}}function W4(d,h){(d.pooledCacheLanes&=h)===0&&(h=d.pooledCache,h!=null&&(d.pooledCache=null,gm(h)))}function ab(){return $4(),q4(),G4(),Y4()}function Y4(){if(ri!==5)return!1;var d=nh,h=z1;z1=0;var f=mt(tu),x=O.T,_=X.p;try{X.p=32>f?32:f,O.T=null,f=$1,$1=null;var F=nh,re=tu;if(ri=0,lf=nh=null,tu=0,(Yr&6)!==0)throw Error(r(331));var Ee=Yr;if(Yr|=4,E4(F.current),k4(F,F.current,re,f),Yr=Ee,wg(0,!1),_e&&typeof _e.onPostCommitFiberRoot=="function")try{_e.onPostCommitFiberRoot(Ct,F)}catch{}return!0}finally{X.p=_,O.T=x,W4(d,h)}}function K4(d,h,f){h=xo(f,h),h=j1(d.stateNode,h,2),d=cr(d,h,2),d!==null&&(ct(d,2),Kc(d))}function ca(d,h,f){if(d.tag===3)K4(d,d,f);else for(;h!==null;){if(h.tag===3){K4(h,d,f);break}else if(h.tag===1){var x=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(ah===null||!ah.has(x))){d=xo(f,d),f=XC(2),x=cr(h,f,2),x!==null&&(JC(f,x,h,d),ct(x,2),Kc(x));break}}h=h.return}}function Y1(d,h,f){var x=d.pingCache;if(x===null){x=d.pingCache=new hR;var _=new Set;x.set(h,_)}else _=x.get(h),_===void 0&&(_=new Set,x.set(h,_));_.has(f)||(Q1=!0,_.add(f),d=gR.bind(null,d,h,f),h.then(d,d))}function gR(d,h,f){var x=d.pingCache;x!==null&&x.delete(h),d.pingedLanes|=d.suspendedLanes&f,d.warmLanes&=~f,_a===d&&(_r&f)===f&&(pn===4||pn===3&&(_r&62914560)===_r&&300>he()-J0?(Yr&2)===0&&cf(d,0):H1|=f,of===_r&&(of=0)),Kc(d)}function X4(d,h){h===0&&(h=xe()),d=dc(d,h),d!==null&&(ct(d,h),Kc(d))}function xR(d){var h=d.memoizedState,f=0;h!==null&&(f=h.retryLane),X4(d,f)}function bR(d,h){var f=0;switch(d.tag){case 31:case 13:var x=d.stateNode,_=d.memoizedState;_!==null&&(f=_.retryLane);break;case 19:x=d.stateNode;break;case 22:x=d.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(h),X4(d,f)}function yR(d,h){return Oe(d,h)}var nb=null,uf=null,K1=!1,ib=!1,X1=!1,oh=0;function Kc(d){d!==uf&&d.next===null&&(uf===null?nb=uf=d:uf=uf.next=d),ib=!0,K1||(K1=!0,wR())}function wg(d,h){if(!X1&&ib){X1=!0;do for(var f=!1,x=nb;x!==null;){if(d!==0){var _=x.pendingLanes;if(_===0)var F=0;else{var re=x.suspendedLanes,Ee=x.pingedLanes;F=(1<<31-Ve(42|d)+1)-1,F&=_&~(re&~Ee),F=F&201326741?F&201326741|1:F?F|2:0}F!==0&&(f=!0,tk(x,F))}else F=_r,F=Ie(x,x===_a?F:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(F&3)===0||ue(x,F)||(f=!0,tk(x,F));x=x.next}while(f);X1=!1}}function vR(){J4()}function J4(){ib=K1=!1;var d=0;oh!==0&&DR()&&(d=oh);for(var h=he(),f=null,x=nb;x!==null;){var _=x.next,F=Z4(x,h);F===0?(x.next=null,f===null?nb=_:f.next=_,_===null&&(uf=f)):(f=x,(d!==0||(F&3)!==0)&&(ib=!0)),x=_}ri!==0&&ri!==5||wg(d),oh!==0&&(oh=0)}function Z4(d,h){for(var f=d.suspendedLanes,x=d.pingedLanes,_=d.expirationTimes,F=d.pendingLanes&-62914561;0<F;){var re=31-Ve(F),Ee=1<<re,at=_[re];at===-1?((Ee&f)===0||(Ee&x)!==0)&&(_[re]=fe(Ee,h)):at<=h&&(d.expiredLanes|=Ee),F&=~Ee}if(h=_a,f=_r,f=Ie(d,d===h?f:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),x=d.callbackNode,f===0||d===h&&(la===2||la===9)||d.cancelPendingCommit!==null)return x!==null&&x!==null&&ze(x),d.callbackNode=null,d.callbackPriority=0;if((f&3)===0||ue(d,f)){if(h=f&-f,h===d.callbackPriority)return h;switch(x!==null&&ze(x),mt(f)){case 2:case 8:f=Qe;break;case 32:f=Ze;break;case 268435456:f=He;break;default:f=Ze}return x=ek.bind(null,d),f=Oe(f,x),d.callbackPriority=h,d.callbackNode=f,h}return x!==null&&x!==null&&ze(x),d.callbackPriority=2,d.callbackNode=null,2}function ek(d,h){if(ri!==0&&ri!==5)return d.callbackNode=null,d.callbackPriority=0,null;var f=d.callbackNode;if(ab()&&d.callbackNode!==f)return null;var x=_r;return x=Ie(d,d===_a?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),x===0?null:(I4(d,x,h),Z4(d,he()),d.callbackNode!=null&&d.callbackNode===f?ek.bind(null,d):null)}function tk(d,h){if(ab())return null;I4(d,h,!0)}function wR(){PR(function(){(Yr&6)!==0?Oe(ve,vR):J4()})}function J1(){if(oh===0){var d=N;d===0&&(d=Ye,Ye<<=1,(Ye&261888)===0&&(Ye=256)),oh=d}return oh}function sk(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Ii(""+d)}function rk(d,h){var f=h.ownerDocument.createElement("input");return f.name=h.name,f.value=h.value,d.id&&f.setAttribute("form",d.id),h.parentNode.insertBefore(f,h),d=new FormData(d),f.parentNode.removeChild(f),d}function NR(d,h,f,x,_){if(h==="submit"&&f&&f.stateNode===_){var F=sk((_[It]||null).action),re=x.submitter;re&&(h=(h=re[It]||null)?sk(h.formAction):re.getAttribute("formAction"),h!==null&&(F=h,re=null));var Ee=new Ao("action","action",null,x,_);d.push({event:Ee,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(oh!==0){var at=re?rk(_,re):new FormData(_);x1(f,{pending:!0,data:at,method:_.method,action:F},null,at)}}else typeof F=="function"&&(Ee.preventDefault(),at=re?rk(_,re):new FormData(_),x1(f,{pending:!0,data:at,method:_.method,action:F},F,at))},currentTarget:_}]})}}for(var Z1=0;Z1<Ud.length;Z1++){var e2=Ud[Z1],jR=e2.toLowerCase(),_R=e2[0].toUpperCase()+e2.slice(1);po(jR,"on"+_R)}po(Od,"onAnimationEnd"),po(cm,"onAnimationIteration"),po(Xp,"onAnimationStart"),po("dblclick","onDoubleClick"),po("focusin","onFocus"),po("focusout","onBlur"),po(F0,"onTransitionRun"),po(D0,"onTransitionStart"),po(T0,"onTransitionCancel"),po(Jp,"onTransitionEnd"),Xs("onMouseEnter",["mouseout","mouseover"]),Xs("onMouseLeave",["mouseout","mouseover"]),Xs("onPointerEnter",["pointerout","pointerover"]),Xs("onPointerLeave",["pointerout","pointerover"]),gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ng="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ng));function ak(d,h){h=(h&4)!==0;for(var f=0;f<d.length;f++){var x=d[f],_=x.event;x=x.listeners;e:{var F=void 0;if(h)for(var re=x.length-1;0<=re;re--){var Ee=x[re],at=Ee.instance,Ut=Ee.currentTarget;if(Ee=Ee.listener,at!==F&&_.isPropagationStopped())break e;F=Ee,_.currentTarget=Ut;try{F(_)}catch(es){dm(es)}_.currentTarget=null,F=at}else for(re=0;re<x.length;re++){if(Ee=x[re],at=Ee.instance,Ut=Ee.currentTarget,Ee=Ee.listener,at!==F&&_.isPropagationStopped())break e;F=Ee,_.currentTarget=Ut;try{F(_)}catch(es){dm(es)}_.currentTarget=null,F=at}}}}function vr(d,h){var f=h[Ke];f===void 0&&(f=h[Ke]=new Set);var x=d+"__bubble";f.has(x)||(nk(h,d,2,!1),f.add(x))}function t2(d,h,f){var x=0;h&&(x|=4),nk(f,d,x,h)}var ob="_reactListening"+Math.random().toString(36).slice(2);function s2(d){if(!d[ob]){d[ob]=!0,jt.forEach(function(f){f!=="selectionchange"&&(CR.has(f)||t2(f,!1,d),t2(f,!0,d))});var h=d.nodeType===9?d:d.ownerDocument;h===null||h[ob]||(h[ob]=!0,t2("selectionchange",!1,h))}}function nk(d,h,f,x){switch(Pk(h)){case 2:var _=eO;break;case 8:_=tO;break;default:_=g2}f=_.bind(null,h,f,d),_=void 0,!am||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(_=!0),x?_!==void 0?d.addEventListener(h,f,{capture:!0,passive:_}):d.addEventListener(h,f,!0):_!==void 0?d.addEventListener(h,f,{passive:_}):d.addEventListener(h,f,!1)}function r2(d,h,f,x,_){var F=x;if((h&1)===0&&(h&2)===0&&x!==null)e:for(;;){if(x===null)return;var re=x.tag;if(re===3||re===4){var Ee=x.stateNode.containerInfo;if(Ee===_)break;if(re===4)for(re=x.return;re!==null;){var at=re.tag;if((at===3||at===4)&&re.stateNode.containerInfo===_)return;re=re.return}for(;Ee!==null;){if(re=ie(Ee),re===null)return;if(at=re.tag,at===5||at===6||at===26||at===27){x=F=re;continue e}Ee=Ee.parentNode}}x=x.return}FA(function(){var Ut=F,es=Dd(f),os=[];e:{var Vt=Zp.get(d);if(Vt!==void 0){var $t=Ao,Ps=d;switch(d){case"keypress":if(mo(f)===0)break e;case"keydown":case"keyup":$t=Er;break;case"focusin":Ps="focus",$t=Zl;break;case"focusout":Ps="blur",$t=Zl;break;case"beforeblur":case"afterblur":$t=Zl;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$t=nm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$t=Jl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$t=wn;break;case Od:case cm:case Xp:$t=U;break;case Jp:$t=Kn;break;case"scroll":case"scrollend":$t=Mu;break;case"wheel":$t=Vo;break;case"copy":case"cut":case"paste":$t=Ge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$t=Xa;break;case"toggle":case"beforetoggle":$t=im}var Js=(h&4)!==0,ya=!Js&&(d==="scroll"||d==="scrollend"),St=Js?Vt!==null?Vt+"Capture":null:Vt;Js=[];for(var At=Ut,Rt;At!==null;){var ns=At;if(Rt=ns.stateNode,ns=ns.tag,ns!==5&&ns!==26&&ns!==27||Rt===null||St===null||(ns=Xi(At,St),ns!=null&&Js.push(jg(At,ns,Rt))),ya)break;At=At.return}0<Js.length&&(Vt=new $t(Vt,Ps,null,f,es),os.push({event:Vt,listeners:Js}))}}if((h&7)===0){e:{if(Vt=d==="mouseover"||d==="pointerover",$t=d==="mouseout"||d==="pointerout",Vt&&f!==Gl&&(Ps=f.relatedTarget||f.fromElement)&&(ie(Ps)||Ps[Pe]))break e;if(($t||Vt)&&(Vt=es.window===es?es:(Vt=es.ownerDocument)?Vt.defaultView||Vt.parentWindow:window,$t?(Ps=f.relatedTarget||f.toElement,$t=Ut,Ps=Ps?ie(Ps):null,Ps!==null&&(ya=i(Ps),Js=Ps.tag,Ps!==ya||Js!==5&&Js!==27&&Js!==6)&&(Ps=null)):($t=null,Ps=Ut),$t!==Ps)){if(Js=nm,ns="onMouseLeave",St="onMouseEnter",At="mouse",(d==="pointerout"||d==="pointerover")&&(Js=Xa,ns="onPointerLeave",St="onPointerEnter",At="pointer"),ya=$t==null?Vt:bt($t),Rt=Ps==null?Vt:bt(Ps),Vt=new Js(ns,At+"leave",$t,f,es),Vt.target=ya,Vt.relatedTarget=Rt,ns=null,ie(es)===Ut&&(Js=new Js(St,At+"enter",Ps,f,es),Js.target=Rt,Js.relatedTarget=ya,ns=Js),ya=ns,$t&&Ps)t:{for(Js=kR,St=$t,At=Ps,Rt=0,ns=St;ns;ns=Js(ns))Rt++;ns=0;for(var $s=At;$s;$s=Js($s))ns++;for(;0<Rt-ns;)St=Js(St),Rt--;for(;0<ns-Rt;)At=Js(At),ns--;for(;Rt--;){if(St===At||At!==null&&St===At.alternate){Js=St;break t}St=Js(St),At=Js(At)}Js=null}else Js=null;$t!==null&&ik(os,Vt,$t,Js,!1),Ps!==null&&ya!==null&&ik(os,ya,Ps,Js,!0)}}e:{if(Vt=Ut?bt(Ut):window,$t=Vt.nodeName&&Vt.nodeName.toLowerCase(),$t==="select"||$t==="input"&&Vt.type==="file")var Vr=Mc;else if(om(Vt))if(Li)Vr=wl;else{Vr=Ja;var Os=Hu}else $t=Vt.nodeName,!$t||$t.toLowerCase()!=="input"||Vt.type!=="checkbox"&&Vt.type!=="radio"?Ut&&tm(Ut.elementType)&&(Vr=Mc):Vr=IA;if(Vr&&(Vr=Vr(d,Ut))){Zi(os,Vr,f,es);break e}Os&&Os(d,Vt,Ut),d==="focusout"&&Ut&&Vt.type==="number"&&Ut.memoizedProps.value!=null&&Jh(Vt,"number",Vt.value)}switch(Os=Ut?bt(Ut):window,d){case"focusin":(om(Os)||Os.contentEditable==="true")&&(eo=Os,cc=Ut,li=null);break;case"focusout":li=cc=eo=null;break;case"mousedown":fo=!0;break;case"contextmenu":case"mouseup":case"dragend":fo=!1,Qr(os,f,es);break;case"selectionchange":if(Rd)break;case"keydown":case"keyup":Qr(os,f,es)}var hr;if(xl)e:{switch(d){case"compositionstart":var Cr="onCompositionStart";break e;case"compositionend":Cr="onCompositionEnd";break e;case"compositionupdate":Cr="onCompositionUpdate";break e}Cr=void 0}else bl?Lc(d,f)&&(Cr="onCompositionEnd"):d==="keydown"&&f.keyCode===229&&(Cr="onCompositionStart");Cr&&(sc&&f.locale!=="ko"&&(bl||Cr!=="onCompositionStart"?Cr==="onCompositionEnd"&&bl&&(hr=DA()):(Ji=es,Pd="value"in Ji?Ji.value:Ji.textContent,bl=!0)),Os=lb(Ut,Cr),0<Os.length&&(Cr=new Bt(Cr,d,null,f,es),os.push({event:Cr,listeners:Os}),hr?Cr.data=hr:(hr=Ou(f),hr!==null&&(Cr.data=hr)))),(hr=Md?vi(d,f):rc(d,f))&&(Cr=lb(Ut,"onBeforeInput"),0<Cr.length&&(Os=new Bt("onBeforeInput","beforeinput",null,f,es),os.push({event:Os,listeners:Cr}),Os.data=hr)),NR(os,d,Ut,f,es)}ak(os,h)})}function jg(d,h,f){return{instance:d,listener:h,currentTarget:f}}function lb(d,h){for(var f=h+"Capture",x=[];d!==null;){var _=d,F=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||F===null||(_=Xi(d,f),_!=null&&x.unshift(jg(d,_,F)),_=Xi(d,h),_!=null&&x.push(jg(d,_,F))),d.tag===3)return x;d=d.return}return[]}function kR(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function ik(d,h,f,x,_){for(var F=h._reactName,re=[];f!==null&&f!==x;){var Ee=f,at=Ee.alternate,Ut=Ee.stateNode;if(Ee=Ee.tag,at!==null&&at===x)break;Ee!==5&&Ee!==26&&Ee!==27||Ut===null||(at=Ut,_?(Ut=Xi(f,F),Ut!=null&&re.unshift(jg(f,Ut,at))):_||(Ut=Xi(f,F),Ut!=null&&re.push(jg(f,Ut,at)))),f=f.return}re.length!==0&&d.push({event:h,listeners:re})}var BR=/\r\n?/g,SR=/\u0000|\uFFFD/g;function ok(d){return(typeof d=="string"?d:""+d).replace(BR,`
`).replace(SR,"")}function lk(d,h){return h=ok(h),ok(d)===h}function ba(d,h,f,x,_,F){switch(f){case"children":typeof x=="string"?h==="body"||h==="textarea"&&x===""||Qo(d,x):(typeof x=="number"||typeof x=="bigint")&&h!=="body"&&Qo(d,""+x);break;case"className":xr(d,"class",x);break;case"tabIndex":xr(d,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":xr(d,f,x);break;case"style":BA(d,x,F);break;case"data":if(h!=="object"){xr(d,"data",x);break}case"src":case"href":if(x===""&&(h!=="a"||f!=="href")){d.removeAttribute(f);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){d.removeAttribute(f);break}x=Ii(""+x),d.setAttribute(f,x);break;case"action":case"formAction":if(typeof x=="function"){d.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof F=="function"&&(f==="formAction"?(h!=="input"&&ba(d,h,"name",_.name,_,null),ba(d,h,"formEncType",_.formEncType,_,null),ba(d,h,"formMethod",_.formMethod,_,null),ba(d,h,"formTarget",_.formTarget,_,null)):(ba(d,h,"encType",_.encType,_,null),ba(d,h,"method",_.method,_,null),ba(d,h,"target",_.target,_,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){d.removeAttribute(f);break}x=Ii(""+x),d.setAttribute(f,x);break;case"onClick":x!=null&&(d.onclick=Ho);break;case"onScroll":x!=null&&vr("scroll",d);break;case"onScrollEnd":x!=null&&vr("scrollend",d);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(f=x.__html,f!=null){if(_.children!=null)throw Error(r(60));d.innerHTML=f}}break;case"multiple":d.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":d.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){d.removeAttribute("xlink:href");break}f=Ii(""+x),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?d.setAttribute(f,""+x):d.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?d.setAttribute(f,""):d.removeAttribute(f);break;case"capture":case"download":x===!0?d.setAttribute(f,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?d.setAttribute(f,x):d.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?d.setAttribute(f,x):d.removeAttribute(f);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?d.removeAttribute(f):d.setAttribute(f,x);break;case"popover":vr("beforetoggle",d),vr("toggle",d),xs(d,"popover",x);break;case"xlinkActuate":qr(d,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":qr(d,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":qr(d,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":qr(d,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":qr(d,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":qr(d,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":qr(d,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":qr(d,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":qr(d,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":xs(d,"is",x);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=sm.get(f)||f,xs(d,f,x))}}function a2(d,h,f,x,_,F){switch(f){case"style":BA(d,x,F);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(f=x.__html,f!=null){if(_.children!=null)throw Error(r(60));d.innerHTML=f}}break;case"children":typeof x=="string"?Qo(d,x):(typeof x=="number"||typeof x=="bigint")&&Qo(d,""+x);break;case"onScroll":x!=null&&vr("scroll",d);break;case"onScrollEnd":x!=null&&vr("scrollend",d);break;case"onClick":x!=null&&(d.onclick=Ho);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kt.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(_=f.endsWith("Capture"),h=f.slice(2,_?f.length-7:void 0),F=d[It]||null,F=F!=null?F[f]:null,typeof F=="function"&&d.removeEventListener(h,F,_),typeof x=="function")){typeof F!="function"&&F!==null&&(f in d?d[f]=null:d.hasAttribute(f)&&d.removeAttribute(f)),d.addEventListener(h,x,_);break e}f in d?d[f]=x:x===!0?d.setAttribute(f,""):xs(d,f,x)}}}function Ci(d,h,f){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vr("error",d),vr("load",d);var x=!1,_=!1,F;for(F in f)if(f.hasOwnProperty(F)){var re=f[F];if(re!=null)switch(F){case"src":x=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:ba(d,h,F,re,f,null)}}_&&ba(d,h,"srcSet",f.srcSet,f,null),x&&ba(d,h,"src",f.src,f,null);return;case"input":vr("invalid",d);var Ee=F=re=_=null,at=null,Ut=null;for(x in f)if(f.hasOwnProperty(x)){var es=f[x];if(es!=null)switch(x){case"name":_=es;break;case"type":re=es;break;case"checked":at=es;break;case"defaultChecked":Ut=es;break;case"value":F=es;break;case"defaultValue":Ee=es;break;case"children":case"dangerouslySetInnerHTML":if(es!=null)throw Error(r(137,h));break;default:ba(d,h,x,es,f,null)}}CA(d,F,Ee,at,Ut,re,_,!1);return;case"select":vr("invalid",d),x=re=F=null;for(_ in f)if(f.hasOwnProperty(_)&&(Ee=f[_],Ee!=null))switch(_){case"value":F=Ee;break;case"defaultValue":re=Ee;break;case"multiple":x=Ee;default:ba(d,h,_,Ee,f,null)}h=F,f=re,d.multiple=!!x,h!=null?yi(d,!!x,h,!1):f!=null&&yi(d,!!x,f,!0);return;case"textarea":vr("invalid",d),F=_=x=null;for(re in f)if(f.hasOwnProperty(re)&&(Ee=f[re],Ee!=null))switch(re){case"value":x=Ee;break;case"defaultValue":_=Ee;break;case"children":F=Ee;break;case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(91));break;default:ba(d,h,re,Ee,f,null)}em(d,x,_,F);return;case"option":for(at in f)f.hasOwnProperty(at)&&(x=f[at],x!=null)&&(at==="selected"?d.selected=x&&typeof x!="function"&&typeof x!="symbol":ba(d,h,at,x,f,null));return;case"dialog":vr("beforetoggle",d),vr("toggle",d),vr("cancel",d),vr("close",d);break;case"iframe":case"object":vr("load",d);break;case"video":case"audio":for(x=0;x<Ng.length;x++)vr(Ng[x],d);break;case"image":vr("error",d),vr("load",d);break;case"details":vr("toggle",d);break;case"embed":case"source":case"link":vr("error",d),vr("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ut in f)if(f.hasOwnProperty(Ut)&&(x=f[Ut],x!=null))switch(Ut){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:ba(d,h,Ut,x,f,null)}return;default:if(tm(h)){for(es in f)f.hasOwnProperty(es)&&(x=f[es],x!==void 0&&a2(d,h,es,x,f,void 0));return}}for(Ee in f)f.hasOwnProperty(Ee)&&(x=f[Ee],x!=null&&ba(d,h,Ee,x,f,null))}function ER(d,h,f,x){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,F=null,re=null,Ee=null,at=null,Ut=null,es=null;for($t in f){var os=f[$t];if(f.hasOwnProperty($t)&&os!=null)switch($t){case"checked":break;case"value":break;case"defaultValue":at=os;default:x.hasOwnProperty($t)||ba(d,h,$t,null,x,os)}}for(var Vt in x){var $t=x[Vt];if(os=f[Vt],x.hasOwnProperty(Vt)&&($t!=null||os!=null))switch(Vt){case"type":F=$t;break;case"name":_=$t;break;case"checked":Ut=$t;break;case"defaultChecked":es=$t;break;case"value":re=$t;break;case"defaultValue":Ee=$t;break;case"children":case"dangerouslySetInnerHTML":if($t!=null)throw Error(r(137,h));break;default:$t!==os&&ba(d,h,Vt,$t,x,os)}}Pu(d,re,Ee,at,Ut,es,F,_);return;case"select":$t=re=Ee=Vt=null;for(F in f)if(at=f[F],f.hasOwnProperty(F)&&at!=null)switch(F){case"value":break;case"multiple":$t=at;default:x.hasOwnProperty(F)||ba(d,h,F,null,x,at)}for(_ in x)if(F=x[_],at=f[_],x.hasOwnProperty(_)&&(F!=null||at!=null))switch(_){case"value":Vt=F;break;case"defaultValue":Ee=F;break;case"multiple":re=F;default:F!==at&&ba(d,h,_,F,x,at)}h=Ee,f=re,x=$t,Vt!=null?yi(d,!!f,Vt,!1):!!x!=!!f&&(h!=null?yi(d,!!f,h,!0):yi(d,!!f,f?[]:"",!1));return;case"textarea":$t=Vt=null;for(Ee in f)if(_=f[Ee],f.hasOwnProperty(Ee)&&_!=null&&!x.hasOwnProperty(Ee))switch(Ee){case"value":break;case"children":break;default:ba(d,h,Ee,null,x,_)}for(re in x)if(_=x[re],F=f[re],x.hasOwnProperty(re)&&(_!=null||F!=null))switch(re){case"value":Vt=_;break;case"defaultValue":$t=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==F&&ba(d,h,re,_,x,F)}Zh(d,Vt,$t);return;case"option":for(var Ps in f)Vt=f[Ps],f.hasOwnProperty(Ps)&&Vt!=null&&!x.hasOwnProperty(Ps)&&(Ps==="selected"?d.selected=!1:ba(d,h,Ps,null,x,Vt));for(at in x)Vt=x[at],$t=f[at],x.hasOwnProperty(at)&&Vt!==$t&&(Vt!=null||$t!=null)&&(at==="selected"?d.selected=Vt&&typeof Vt!="function"&&typeof Vt!="symbol":ba(d,h,at,Vt,x,$t));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Js in f)Vt=f[Js],f.hasOwnProperty(Js)&&Vt!=null&&!x.hasOwnProperty(Js)&&ba(d,h,Js,null,x,Vt);for(Ut in x)if(Vt=x[Ut],$t=f[Ut],x.hasOwnProperty(Ut)&&Vt!==$t&&(Vt!=null||$t!=null))switch(Ut){case"children":case"dangerouslySetInnerHTML":if(Vt!=null)throw Error(r(137,h));break;default:ba(d,h,Ut,Vt,x,$t)}return;default:if(tm(h)){for(var ya in f)Vt=f[ya],f.hasOwnProperty(ya)&&Vt!==void 0&&!x.hasOwnProperty(ya)&&a2(d,h,ya,void 0,x,Vt);for(es in x)Vt=x[es],$t=f[es],!x.hasOwnProperty(es)||Vt===$t||Vt===void 0&&$t===void 0||a2(d,h,es,Vt,x,$t);return}}for(var St in f)Vt=f[St],f.hasOwnProperty(St)&&Vt!=null&&!x.hasOwnProperty(St)&&ba(d,h,St,null,x,Vt);for(os in x)Vt=x[os],$t=f[os],!x.hasOwnProperty(os)||Vt===$t||Vt==null&&$t==null||ba(d,h,os,Vt,x,$t)}function ck(d){switch(d){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function FR(){if(typeof performance.getEntriesByType=="function"){for(var d=0,h=0,f=performance.getEntriesByType("resource"),x=0;x<f.length;x++){var _=f[x],F=_.transferSize,re=_.initiatorType,Ee=_.duration;if(F&&Ee&&ck(re)){for(re=0,Ee=_.responseEnd,x+=1;x<f.length;x++){var at=f[x],Ut=at.startTime;if(Ut>Ee)break;var es=at.transferSize,os=at.initiatorType;es&&ck(os)&&(at=at.responseEnd,re+=es*(at<Ee?1:(Ee-Ut)/(at-Ut)))}if(--x,h+=8*(F+re)/(_.duration/1e3),d++,10<d)break}}if(0<d)return h/d/1e6}return navigator.connection&&(d=navigator.connection.downlink,typeof d=="number")?d:5}var n2=null,i2=null;function cb(d){return d.nodeType===9?d:d.ownerDocument}function dk(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uk(d,h){if(d===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&h==="foreignObject"?0:d}function o2(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var l2=null;function DR(){var d=window.event;return d&&d.type==="popstate"?d===l2?!1:(l2=d,!0):(l2=null,!1)}var hk=typeof setTimeout=="function"?setTimeout:void 0,TR=typeof clearTimeout=="function"?clearTimeout:void 0,mk=typeof Promise=="function"?Promise:void 0,PR=typeof queueMicrotask=="function"?queueMicrotask:typeof mk<"u"?function(d){return mk.resolve(null).then(d).catch(IR)}:hk;function IR(d){setTimeout(function(){throw d})}function lh(d){return d==="head"}function Ak(d,h){var f=h,x=0;do{var _=f.nextSibling;if(d.removeChild(f),_&&_.nodeType===8)if(f=_.data,f==="/$"||f==="/&"){if(x===0){d.removeChild(_),ff(h);return}x--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")x++;else if(f==="html")_g(d.ownerDocument.documentElement);else if(f==="head"){f=d.ownerDocument.head,_g(f);for(var F=f.firstChild;F;){var re=F.nextSibling,Ee=F.nodeName;F[ke]||Ee==="SCRIPT"||Ee==="STYLE"||Ee==="LINK"&&F.rel.toLowerCase()==="stylesheet"||f.removeChild(F),F=re}}else f==="body"&&_g(d.ownerDocument.body);f=_}while(f);ff(h)}function fk(d,h){var f=d;d=0;do{var x=f.nextSibling;if(f.nodeType===1?h?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(h?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),x&&x.nodeType===8)if(f=x.data,f==="/$"){if(d===0)break;d--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||d++;f=x}while(f)}function c2(d){var h=d.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var f=h;switch(h=h.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":c2(f),de(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}d.removeChild(f)}}function LR(d,h,f,x){for(;d.nodeType===1;){var _=f;if(d.nodeName.toLowerCase()!==h.toLowerCase()){if(!x&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(x){if(!d[ke])switch(h){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(F=d.getAttribute("rel"),F==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(F!==_.rel||d.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||d.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||d.getAttribute("title")!==(_.title==null?null:_.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(F=d.getAttribute("src"),(F!==(_.src==null?null:_.src)||d.getAttribute("type")!==(_.type==null?null:_.type)||d.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&F&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(h==="input"&&d.type==="hidden"){var F=_.name==null?null:""+_.name;if(_.type==="hidden"&&d.getAttribute("name")===F)return d}else return d;if(d=Sl(d.nextSibling),d===null)break}return null}function MR(d,h,f){if(h==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!f||(d=Sl(d.nextSibling),d===null))return null;return d}function pk(d,h){for(;d.nodeType!==8;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!h||(d=Sl(d.nextSibling),d===null))return null;return d}function d2(d){return d.data==="$?"||d.data==="$~"}function u2(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState!=="loading"}function RR(d,h){var f=d.ownerDocument;if(d.data==="$~")d._reactRetry=h;else if(d.data!=="$?"||f.readyState!=="loading")h();else{var x=function(){h(),f.removeEventListener("DOMContentLoaded",x)};f.addEventListener("DOMContentLoaded",x),d._reactRetry=x}}function Sl(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===1||h===3)break;if(h===8){if(h=d.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return d}var h2=null;function gk(d){d=d.nextSibling;for(var h=0;d;){if(d.nodeType===8){var f=d.data;if(f==="/$"||f==="/&"){if(h===0)return Sl(d.nextSibling);h--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||h++}d=d.nextSibling}return null}function xk(d){d=d.previousSibling;for(var h=0;d;){if(d.nodeType===8){var f=d.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(h===0)return d;h--}else f!=="/$"&&f!=="/&"||h++}d=d.previousSibling}return null}function bk(d,h,f){switch(h=cb(f),d){case"html":if(d=h.documentElement,!d)throw Error(r(452));return d;case"head":if(d=h.head,!d)throw Error(r(453));return d;case"body":if(d=h.body,!d)throw Error(r(454));return d;default:throw Error(r(451))}}function _g(d){for(var h=d.attributes;h.length;)d.removeAttributeNode(h[0]);de(d)}var El=new Map,yk=new Set;function db(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var su=X.d;X.d={f:OR,r:UR,D:QR,C:HR,L:VR,m:zR,X:qR,S:$R,M:GR};function OR(){var d=su.f(),h=tb();return d||h}function UR(d){var h=Ue(d);h!==null&&h.tag===5&&h.type==="form"?MC(h):su.r(d)}var hf=typeof document>"u"?null:document;function vk(d,h,f){var x=hf;if(x&&typeof h=="string"&&h){var _=cn(h);_='link[rel="'+d+'"][href="'+_+'"]',typeof f=="string"&&(_+='[crossorigin="'+f+'"]'),yk.has(_)||(yk.add(_),d={rel:d,crossOrigin:f,href:h},x.querySelector(_)===null&&(h=x.createElement("link"),Ci(h,"link",d),Dt(h),x.head.appendChild(h)))}}function QR(d){su.D(d),vk("dns-prefetch",d,null)}function HR(d,h){su.C(d,h),vk("preconnect",d,h)}function VR(d,h,f){su.L(d,h,f);var x=hf;if(x&&d&&h){var _='link[rel="preload"][as="'+cn(h)+'"]';h==="image"&&f&&f.imageSrcSet?(_+='[imagesrcset="'+cn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(_+='[imagesizes="'+cn(f.imageSizes)+'"]')):_+='[href="'+cn(d)+'"]';var F=_;switch(h){case"style":F=mf(d);break;case"script":F=Af(d)}El.has(F)||(d=A({rel:"preload",href:h==="image"&&f&&f.imageSrcSet?void 0:d,as:h},f),El.set(F,d),x.querySelector(_)!==null||h==="style"&&x.querySelector(Cg(F))||h==="script"&&x.querySelector(kg(F))||(h=x.createElement("link"),Ci(h,"link",d),Dt(h),x.head.appendChild(h)))}}function zR(d,h){su.m(d,h);var f=hf;if(f&&d){var x=h&&typeof h.as=="string"?h.as:"script",_='link[rel="modulepreload"][as="'+cn(x)+'"][href="'+cn(d)+'"]',F=_;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":F=Af(d)}if(!El.has(F)&&(d=A({rel:"modulepreload",href:d},h),El.set(F,d),f.querySelector(_)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(kg(F)))return}x=f.createElement("link"),Ci(x,"link",d),Dt(x),f.head.appendChild(x)}}}function $R(d,h,f){su.S(d,h,f);var x=hf;if(x&&d){var _=ot(x).hoistableStyles,F=mf(d);h=h||"default";var re=_.get(F);if(!re){var Ee={loading:0,preload:null};if(re=x.querySelector(Cg(F)))Ee.loading=5;else{d=A({rel:"stylesheet",href:d,"data-precedence":h},f),(f=El.get(F))&&m2(d,f);var at=re=x.createElement("link");Dt(at),Ci(at,"link",d),at._p=new Promise(function(Ut,es){at.onload=Ut,at.onerror=es}),at.addEventListener("load",function(){Ee.loading|=1}),at.addEventListener("error",function(){Ee.loading|=2}),Ee.loading|=4,ub(re,h,x)}re={type:"stylesheet",instance:re,count:1,state:Ee},_.set(F,re)}}}function qR(d,h){su.X(d,h);var f=hf;if(f&&d){var x=ot(f).hoistableScripts,_=Af(d),F=x.get(_);F||(F=f.querySelector(kg(_)),F||(d=A({src:d,async:!0},h),(h=El.get(_))&&A2(d,h),F=f.createElement("script"),Dt(F),Ci(F,"link",d),f.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},x.set(_,F))}}function GR(d,h){su.M(d,h);var f=hf;if(f&&d){var x=ot(f).hoistableScripts,_=Af(d),F=x.get(_);F||(F=f.querySelector(kg(_)),F||(d=A({src:d,async:!0,type:"module"},h),(h=El.get(_))&&A2(d,h),F=f.createElement("script"),Dt(F),Ci(F,"link",d),f.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},x.set(_,F))}}function wk(d,h,f,x){var _=(_=le.current)?db(_):null;if(!_)throw Error(r(446));switch(d){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(h=mf(f.href),f=ot(_).hoistableStyles,x=f.get(h),x||(x={type:"style",instance:null,count:0,state:null},f.set(h,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){d=mf(f.href);var F=ot(_).hoistableStyles,re=F.get(d);if(re||(_=_.ownerDocument||_,re={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},F.set(d,re),(F=_.querySelector(Cg(d)))&&!F._p&&(re.instance=F,re.state.loading=5),El.has(d)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},El.set(d,f),F||WR(_,d,f,re.state))),h&&x===null)throw Error(r(528,""));return re}if(h&&x!==null)throw Error(r(529,""));return null;case"script":return h=f.async,f=f.src,typeof f=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Af(f),f=ot(_).hoistableScripts,x=f.get(h),x||(x={type:"script",instance:null,count:0,state:null},f.set(h,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,d))}}function mf(d){return'href="'+cn(d)+'"'}function Cg(d){return'link[rel="stylesheet"]['+d+"]"}function Nk(d){return A({},d,{"data-precedence":d.precedence,precedence:null})}function WR(d,h,f,x){d.querySelector('link[rel="preload"][as="style"]['+h+"]")?x.loading=1:(h=d.createElement("link"),x.preload=h,h.addEventListener("load",function(){return x.loading|=1}),h.addEventListener("error",function(){return x.loading|=2}),Ci(h,"link",f),Dt(h),d.head.appendChild(h))}function Af(d){return'[src="'+cn(d)+'"]'}function kg(d){return"script[async]"+d}function jk(d,h,f){if(h.count++,h.instance===null)switch(h.type){case"style":var x=d.querySelector('style[data-href~="'+cn(f.href)+'"]');if(x)return h.instance=x,Dt(x),x;var _=A({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return x=(d.ownerDocument||d).createElement("style"),Dt(x),Ci(x,"style",_),ub(x,f.precedence,d),h.instance=x;case"stylesheet":_=mf(f.href);var F=d.querySelector(Cg(_));if(F)return h.state.loading|=4,h.instance=F,Dt(F),F;x=Nk(f),(_=El.get(_))&&m2(x,_),F=(d.ownerDocument||d).createElement("link"),Dt(F);var re=F;return re._p=new Promise(function(Ee,at){re.onload=Ee,re.onerror=at}),Ci(F,"link",x),h.state.loading|=4,ub(F,f.precedence,d),h.instance=F;case"script":return F=Af(f.src),(_=d.querySelector(kg(F)))?(h.instance=_,Dt(_),_):(x=f,(_=El.get(F))&&(x=A({},f),A2(x,_)),d=d.ownerDocument||d,_=d.createElement("script"),Dt(_),Ci(_,"link",x),d.head.appendChild(_),h.instance=_);case"void":return null;default:throw Error(r(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(x=h.instance,h.state.loading|=4,ub(x,f.precedence,d));return h.instance}function ub(d,h,f){for(var x=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=x.length?x[x.length-1]:null,F=_,re=0;re<x.length;re++){var Ee=x[re];if(Ee.dataset.precedence===h)F=Ee;else if(F!==_)break}F?F.parentNode.insertBefore(d,F.nextSibling):(h=f.nodeType===9?f.head:f,h.insertBefore(d,h.firstChild))}function m2(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.title==null&&(d.title=h.title)}function A2(d,h){d.crossOrigin==null&&(d.crossOrigin=h.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=h.referrerPolicy),d.integrity==null&&(d.integrity=h.integrity)}var hb=null;function _k(d,h,f){if(hb===null){var x=new Map,_=hb=new Map;_.set(f,x)}else _=hb,x=_.get(f),x||(x=new Map,_.set(f,x));if(x.has(d))return x;for(x.set(d,null),f=f.getElementsByTagName(d),_=0;_<f.length;_++){var F=f[_];if(!(F[ke]||F[ht]||d==="link"&&F.getAttribute("rel")==="stylesheet")&&F.namespaceURI!=="http://www.w3.org/2000/svg"){var re=F.getAttribute(h)||"";re=d+re;var Ee=x.get(re);Ee?Ee.push(F):x.set(re,[F])}}return x}function Ck(d,h,f){d=d.ownerDocument||d,d.head.insertBefore(f,h==="title"?d.querySelector("head > title"):null)}function YR(d,h,f){if(f===1||h.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;return h.rel==="stylesheet"?(d=h.disabled,typeof h.precedence=="string"&&d==null):!0;case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function kk(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}function KR(d,h,f,x){if(f.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var _=mf(x.href),F=h.querySelector(Cg(_));if(F){h=F._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(d.count++,d=mb.bind(d),h.then(d,d)),f.state.loading|=4,f.instance=F,Dt(F);return}F=h.ownerDocument||h,x=Nk(x),(_=El.get(_))&&m2(x,_),F=F.createElement("link"),Dt(F);var re=F;re._p=new Promise(function(Ee,at){re.onload=Ee,re.onerror=at}),Ci(F,"link",x),f.instance=F}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(f,h),(h=f.state.preload)&&(f.state.loading&3)===0&&(d.count++,f=mb.bind(d),h.addEventListener("load",f),h.addEventListener("error",f))}}var f2=0;function XR(d,h){return d.stylesheets&&d.count===0&&fb(d,d.stylesheets),0<d.count||0<d.imgCount?function(f){var x=setTimeout(function(){if(d.stylesheets&&fb(d,d.stylesheets),d.unsuspend){var F=d.unsuspend;d.unsuspend=null,F()}},6e4+h);0<d.imgBytes&&f2===0&&(f2=62500*FR());var _=setTimeout(function(){if(d.waitingForImages=!1,d.count===0&&(d.stylesheets&&fb(d,d.stylesheets),d.unsuspend)){var F=d.unsuspend;d.unsuspend=null,F()}},(d.imgBytes>f2?50:800)+h);return d.unsuspend=f,function(){d.unsuspend=null,clearTimeout(x),clearTimeout(_)}}:null}function mb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fb(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var Ab=null;function fb(d,h){d.stylesheets=null,d.unsuspend!==null&&(d.count++,Ab=new Map,h.forEach(JR,d),Ab=null,mb.call(d))}function JR(d,h){if(!(h.state.loading&4)){var f=Ab.get(d);if(f)var x=f.get(null);else{f=new Map,Ab.set(d,f);for(var _=d.querySelectorAll("link[data-precedence],style[data-precedence]"),F=0;F<_.length;F++){var re=_[F];(re.nodeName==="LINK"||re.getAttribute("media")!=="not all")&&(f.set(re.dataset.precedence,re),x=re)}x&&f.set(null,x)}_=h.instance,re=_.getAttribute("data-precedence"),F=f.get(re)||x,F===x&&f.set(null,_),f.set(re,_),this.count++,x=mb.bind(this),_.addEventListener("load",x),_.addEventListener("error",x),F?F.parentNode.insertBefore(_,F.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(_,d.firstChild)),h.state.loading|=4}}var Bg={$$typeof:j,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function ZR(d,h,f,x,_,F,re,Ee,at){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=x,this.onUncaughtError=_,this.onCaughtError=F,this.onRecoverableError=re,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=at,this.incompleteTransitions=new Map}function Bk(d,h,f,x,_,F,re,Ee,at,Ut,es,os){return d=new ZR(d,h,f,re,at,Ut,es,os,Ee),h=1,F===!0&&(h|=24),F=di(3,null,null,h),d.current=F,F.stateNode=d,h=Ku(),h.refCount++,d.pooledCache=h,h.refCount++,F.memoizedState={element:x,isDehydrated:f,cache:h},ys(F),d}function Sk(d){return d?(d=Jn,d):Jn}function Ek(d,h,f,x,_,F){_=Sk(_),x.context===null?x.context=_:x.pendingContext=_,x=Ys(h),x.payload={element:f},F=F===void 0?null:F,F!==null&&(x.callback=F),f=cr(d,x,h),f!==null&&(So(f,d,h),Gr(f,d,h))}function Fk(d,h){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var f=d.retryLane;d.retryLane=f!==0&&f<h?f:h}}function p2(d,h){Fk(d,h),(d=d.alternate)&&Fk(d,h)}function Dk(d){if(d.tag===13||d.tag===31){var h=dc(d,67108864);h!==null&&So(h,d,67108864),p2(d,67108864)}}function Tk(d){if(d.tag===13||d.tag===31){var h=Xo();h=Be(h);var f=dc(d,h);f!==null&&So(f,d,h),p2(d,h)}}var pb=!0;function eO(d,h,f,x){var _=O.T;O.T=null;var F=X.p;try{X.p=2,g2(d,h,f,x)}finally{X.p=F,O.T=_}}function tO(d,h,f,x){var _=O.T;O.T=null;var F=X.p;try{X.p=8,g2(d,h,f,x)}finally{X.p=F,O.T=_}}function g2(d,h,f,x){if(pb){var _=x2(x);if(_===null)r2(d,h,x,gb,f),Ik(d,x);else if(rO(_,d,h,f,x))x.stopPropagation();else if(Ik(d,x),h&4&&-1<sO.indexOf(d)){for(;_!==null;){var F=Ue(_);if(F!==null)switch(F.tag){case 3:if(F=F.stateNode,F.current.memoizedState.isDehydrated){var re=ee(F.pendingLanes);if(re!==0){var Ee=F;for(Ee.pendingLanes|=2,Ee.entangledLanes|=2;re;){var at=1<<31-Ve(re);Ee.entanglements[1]|=at,re&=~at}Kc(F),(Yr&6)===0&&(Z0=he()+500,wg(0))}}break;case 31:case 13:Ee=dc(F,2),Ee!==null&&So(Ee,F,2),tb(),p2(F,2)}if(F=x2(x),F===null&&r2(d,h,x,gb,f),F===_)break;_=F}_!==null&&x.stopPropagation()}else r2(d,h,x,null,f)}}function x2(d){return d=Dd(d),b2(d)}var gb=null;function b2(d){if(gb=null,d=ie(d),d!==null){var h=i(d);if(h===null)d=null;else{var f=h.tag;if(f===13){if(d=o(h),d!==null)return d;d=null}else if(f===31){if(d=l(h),d!==null)return d;d=null}else if(f===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;d=null}else h!==d&&(d=null)}}return gb=d,null}function Pk(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(W()){case ve:return 2;case Qe:return 8;case Ze:case J:return 32;case He:return 268435456;default:return 32}default:return 32}}var y2=!1,ch=null,dh=null,uh=null,Sg=new Map,Eg=new Map,hh=[],sO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ik(d,h){switch(d){case"focusin":case"focusout":ch=null;break;case"dragenter":case"dragleave":dh=null;break;case"mouseover":case"mouseout":uh=null;break;case"pointerover":case"pointerout":Sg.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eg.delete(h.pointerId)}}function Fg(d,h,f,x,_,F){return d===null||d.nativeEvent!==F?(d={blockedOn:h,domEventName:f,eventSystemFlags:x,nativeEvent:F,targetContainers:[_]},h!==null&&(h=Ue(h),h!==null&&Dk(h)),d):(d.eventSystemFlags|=x,h=d.targetContainers,_!==null&&h.indexOf(_)===-1&&h.push(_),d)}function rO(d,h,f,x,_){switch(h){case"focusin":return ch=Fg(ch,d,h,f,x,_),!0;case"dragenter":return dh=Fg(dh,d,h,f,x,_),!0;case"mouseover":return uh=Fg(uh,d,h,f,x,_),!0;case"pointerover":var F=_.pointerId;return Sg.set(F,Fg(Sg.get(F)||null,d,h,f,x,_)),!0;case"gotpointercapture":return F=_.pointerId,Eg.set(F,Fg(Eg.get(F)||null,d,h,f,x,_)),!0}return!1}function Lk(d){var h=ie(d.target);if(h!==null){var f=i(h);if(f!==null){if(h=f.tag,h===13){if(h=o(f),h!==null){d.blockedOn=h,Ne(d.priority,function(){Tk(f)});return}}else if(h===31){if(h=l(f),h!==null){d.blockedOn=h,Ne(d.priority,function(){Tk(f)});return}}else if(h===3&&f.stateNode.current.memoizedState.isDehydrated){d.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}d.blockedOn=null}function xb(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;0<h.length;){var f=x2(d.nativeEvent);if(f===null){f=d.nativeEvent;var x=new f.constructor(f.type,f);Gl=x,f.target.dispatchEvent(x),Gl=null}else return h=Ue(f),h!==null&&Dk(h),d.blockedOn=f,!1;h.shift()}return!0}function Mk(d,h,f){xb(d)&&f.delete(h)}function aO(){y2=!1,ch!==null&&xb(ch)&&(ch=null),dh!==null&&xb(dh)&&(dh=null),uh!==null&&xb(uh)&&(uh=null),Sg.forEach(Mk),Eg.forEach(Mk)}function bb(d,h){d.blockedOn===h&&(d.blockedOn=null,y2||(y2=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,aO)))}var yb=null;function Rk(d){yb!==d&&(yb=d,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){yb===d&&(yb=null);for(var h=0;h<d.length;h+=3){var f=d[h],x=d[h+1],_=d[h+2];if(typeof x!="function"){if(b2(x||f)===null)continue;break}var F=Ue(f);F!==null&&(d.splice(h,3),h-=3,x1(F,{pending:!0,data:_,method:f.method,action:x},x,_))}}))}function ff(d){function h(at){return bb(at,d)}ch!==null&&bb(ch,d),dh!==null&&bb(dh,d),uh!==null&&bb(uh,d),Sg.forEach(h),Eg.forEach(h);for(var f=0;f<hh.length;f++){var x=hh[f];x.blockedOn===d&&(x.blockedOn=null)}for(;0<hh.length&&(f=hh[0],f.blockedOn===null);)Lk(f),f.blockedOn===null&&hh.shift();if(f=(d.ownerDocument||d).$$reactFormReplay,f!=null)for(x=0;x<f.length;x+=3){var _=f[x],F=f[x+1],re=_[It]||null;if(typeof F=="function")re||Rk(f);else if(re){var Ee=null;if(F&&F.hasAttribute("formAction")){if(_=F,re=F[It]||null)Ee=re.formAction;else if(b2(_)!==null)continue}else Ee=re.action;typeof Ee=="function"?f[x+1]=Ee:(f.splice(x,3),x-=3),Rk(f)}}}function Ok(){function d(F){F.canIntercept&&F.info==="react-transition"&&F.intercept({handler:function(){return new Promise(function(re){return _=re})},focusReset:"manual",scroll:"manual"})}function h(){_!==null&&(_(),_=null),x||setTimeout(f,20)}function f(){if(!x&&!navigation.transition){var F=navigation.currentEntry;F&&F.url!=null&&navigation.navigate(F.url,{state:F.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,_=null;return navigation.addEventListener("navigate",d),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(f,100),function(){x=!0,navigation.removeEventListener("navigate",d),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),_!==null&&(_(),_=null)}}}function v2(d){this._internalRoot=d}vb.prototype.render=v2.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw Error(r(409));var f=h.current,x=Xo();Ek(f,x,d,h,null,null)},vb.prototype.unmount=v2.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;Ek(d.current,2,null,d,null,null),tb(),h[Pe]=null}};function vb(d){this._internalRoot=d}vb.prototype.unstable_scheduleHydration=function(d){if(d){var h=Nt();d={blockedOn:null,target:d,priority:h};for(var f=0;f<hh.length&&h!==0&&h<hh[f].priority;f++);hh.splice(f,0,d),f===0&&Lk(d)}};var Uk=e.version;if(Uk!=="19.2.4")throw Error(r(527,Uk,"19.2.4"));X.findDOMNode=function(d){var h=d._reactInternals;if(h===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=u(h),d=d!==null?m(d):null,d=d===null?null:d.stateNode,d};var nO={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wb.isDisabled&&wb.supportsFiber)try{Ct=wb.inject(nO),_e=wb}catch{}}return Tg.createRoot=function(d,h){if(!n(d))throw Error(r(299));var f=!1,x="",_=GC,F=WC,re=YC;return h!=null&&(h.unstable_strictMode===!0&&(f=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(_=h.onUncaughtError),h.onCaughtError!==void 0&&(F=h.onCaughtError),h.onRecoverableError!==void 0&&(re=h.onRecoverableError)),h=Bk(d,1,!1,null,null,f,x,null,_,F,re,Ok),d[Pe]=h.current,s2(d),new v2(h)},Tg.hydrateRoot=function(d,h,f){if(!n(d))throw Error(r(299));var x=!1,_="",F=GC,re=WC,Ee=YC,at=null;return f!=null&&(f.unstable_strictMode===!0&&(x=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(F=f.onUncaughtError),f.onCaughtError!==void 0&&(re=f.onCaughtError),f.onRecoverableError!==void 0&&(Ee=f.onRecoverableError),f.formState!==void 0&&(at=f.formState)),h=Bk(d,1,!0,h,f??null,x,_,at,F,re,Ee,Ok),h.context=Sk(null),f=h.current,x=Xo(),x=Be(x),_=Ys(x),_.callback=null,cr(f,_,x),f=x,h.current.lanes=f,ct(h,f),Kc(h),d[Pe]=h.current,s2(d),new vb(h)},Tg.version="19.2.4",Tg}var Jk;function fO(){if(Jk)return _2.exports;Jk=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),_2.exports=AO(),_2.exports}var pO=fO();const gO=G_(pO);var Zk="popstate";function xO(a={}){function e(r,n){let{pathname:i,search:o,hash:l}=r.location;return Bj("",{pathname:i,search:o,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function s(r,n){return typeof n=="string"?n:Mx(n)}return yO(e,s,null,a)}function Wa(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function _c(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bO(){return Math.random().toString(36).substring(2,10)}function eB(a,e){return{usr:a.state,key:a.key,idx:e}}function Bj(a,e,s=null,r){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?Bp(e):e,state:s,key:e&&e.key||r||bO()}}function Mx({pathname:a="/",search:e="",hash:s=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(a+=s.charAt(0)==="#"?s:"#"+s),a}function Bp(a){let e={};if(a){let s=a.indexOf("#");s>=0&&(e.hash=a.substring(s),a=a.substring(0,s));let r=a.indexOf("?");r>=0&&(e.search=a.substring(r),a=a.substring(0,r)),a&&(e.pathname=a)}return e}function yO(a,e,s,r={}){let{window:n=document.defaultView,v5Compat:i=!1}=r,o=n.history,l="POP",c=null,u=m();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function m(){return(o.state||{idx:null}).idx}function A(){l="POP";let y=m(),w=y==null?null:y-u;u=y,c&&c({action:l,location:b.location,delta:w})}function g(y,w){l="PUSH";let B=Bj(b.location,y,w);u=m()+1;let j=eB(B,u),E=b.createHref(B);try{o.pushState(j,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;n.location.assign(E)}i&&c&&c({action:l,location:b.location,delta:1})}function p(y,w){l="REPLACE";let B=Bj(b.location,y,w);u=m();let j=eB(B,u),E=b.createHref(B);o.replaceState(j,"",E),i&&c&&c({action:l,location:b.location,delta:0})}function v(y){return vO(y)}let b={get action(){return l},get location(){return a(n,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Zk,A),c=y,()=>{n.removeEventListener(Zk,A),c=null}},createHref(y){return e(n,y)},createURL:v,encodeLocation(y){let w=v(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:p,go(y){return o.go(y)}};return b}function vO(a,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Wa(s,"No window.location.(origin|href) available to create URL");let r=typeof a=="string"?a:Mx(a);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=s+r),new URL(r,s)}function d6(a,e,s="/"){return wO(a,e,s,!1)}function wO(a,e,s,r){let n=typeof e=="string"?Bp(e):e,i=_u(n.pathname||"/",s);if(i==null)return null;let o=u6(a);NO(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=PO(i);l=DO(o[c],u,r)}return l}function u6(a,e=[],s=[],r="",n=!1){let i=(o,l,c=n,u)=>{let m={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&c)return;Wa(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let A=bu([r,m.relativePath]),g=s.concat(m);o.children&&o.children.length>0&&(Wa(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${A}".`),u6(o.children,e,g,A,c)),!(o.path==null&&!o.index)&&e.push({path:A,score:EO(A,o.index),routesMeta:g})};return a.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))i(o,l);else for(let c of h6(o.path))i(o,l,!0,c)}),e}function h6(a){let e=a.split("/");if(e.length===0)return[];let[s,...r]=e,n=s.endsWith("?"),i=s.replace(/\?$/,"");if(r.length===0)return n?[i,""]:[i];let o=h6(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),n&&l.push(...o),l.map(c=>a.startsWith("/")&&c===""?"/":c)}function NO(a){a.sort((e,s)=>e.score!==s.score?s.score-e.score:FO(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}var jO=/^:[\w-]+$/,_O=3,CO=2,kO=1,BO=10,SO=-2,tB=a=>a==="*";function EO(a,e){let s=a.split("/"),r=s.length;return s.some(tB)&&(r+=SO),e&&(r+=CO),s.filter(n=>!tB(n)).reduce((n,i)=>n+(jO.test(i)?_O:i===""?kO:BO),r)}function FO(a,e){return a.length===e.length&&a.slice(0,-1).every((r,n)=>r===e[n])?a[a.length-1]-e[e.length-1]:0}function DO(a,e,s=!1){let{routesMeta:r}=a,n={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,m=i==="/"?e:e.slice(i.length)||"/",A=ov({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},m),g=c.route;if(!A&&u&&s&&!r[r.length-1].route.index&&(A=ov({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!A)return null;Object.assign(n,A.params),o.push({params:n,pathname:bu([i,A.pathname]),pathnameBase:RO(bu([i,A.pathnameBase])),route:g}),A.pathnameBase!=="/"&&(i=bu([i,A.pathnameBase]))}return o}function ov(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[s,r]=TO(a.path,a.caseSensitive,a.end),n=e.match(s);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:r.reduce((u,{paramName:m,isOptional:A},g)=>{if(m==="*"){let v=l[g]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const p=l[g];return A&&!p?u[m]=void 0:u[m]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:a}}function TO(a,e=!1,s=!0){_c(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let r=[],n="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(r.push({paramName:"*"}),n+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":a!==""&&a!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),r]}function PO(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _c(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function _u(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=a.charAt(s);return r&&r!=="/"?null:a.slice(s)||"/"}var IO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function LO(a,e="/"){let{pathname:s,search:r="",hash:n=""}=typeof a=="string"?Bp(a):a,i;return s?(s=s.replace(/\/\/+/g,"/"),s.startsWith("/")?i=sB(s.substring(1),"/"):i=sB(s,e)):i=e,{pathname:i,search:OO(r),hash:UO(n)}}function sB(a,e){let s=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function S2(a,e,s,r){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MO(a){return a.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Y_(a){let e=MO(a);return e.map((s,r)=>r===e.length-1?s.pathname:s.pathnameBase)}function K_(a,e,s,r=!1){let n;typeof a=="string"?n=Bp(a):(n={...a},Wa(!n.pathname||!n.pathname.includes("?"),S2("?","pathname","search",n)),Wa(!n.pathname||!n.pathname.includes("#"),S2("#","pathname","hash",n)),Wa(!n.search||!n.search.includes("#"),S2("#","search","hash",n)));let i=a===""||n.pathname==="",o=i?"/":n.pathname,l;if(o==null)l=s;else{let A=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),A-=1;n.pathname=g.join("/")}l=A>=0?e[A]:"/"}let c=LO(n,l),u=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||m)&&(c.pathname+="/"),c}var bu=a=>a.join("/").replace(/\/\/+/g,"/"),RO=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),OO=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,UO=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a,QO=class{constructor(a,e,s,r=!1){this.status=a,this.statusText=e||"",this.internal=r,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function HO(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function VO(a){return a.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var m6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function A6(a,e){let s=a;if(typeof s!="string"||!IO.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let r=s,n=!1;if(m6)try{let i=new URL(window.location.href),o=s.startsWith("//")?new URL(i.protocol+s):new URL(s),l=_u(o.pathname,e);o.origin===i.origin&&l!=null?s=l+o.search+o.hash:n=!0}catch{_c(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:n,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var f6=["POST","PUT","PATCH","DELETE"];new Set(f6);var zO=["GET",...f6];new Set(zO);var Sp=C.createContext(null);Sp.displayName="DataRouter";var rw=C.createContext(null);rw.displayName="DataRouterState";var $O=C.createContext(!1),p6=C.createContext({isTransitioning:!1});p6.displayName="ViewTransition";var qO=C.createContext(new Map);qO.displayName="Fetchers";var GO=C.createContext(null);GO.displayName="Await";var ml=C.createContext(null);ml.displayName="Navigation";var i0=C.createContext(null);i0.displayName="Location";var Sc=C.createContext({outlet:null,matches:[],isDataRoute:!1});Sc.displayName="Route";var X_=C.createContext(null);X_.displayName="RouteError";var g6="REACT_ROUTER_ERROR",WO="REDIRECT",YO="ROUTE_ERROR_RESPONSE";function KO(a){if(a.startsWith(`${g6}:${WO}:{`))try{let e=JSON.parse(a.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function XO(a){if(a.startsWith(`${g6}:${YO}:{`))try{let e=JSON.parse(a.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new QO(e.status,e.statusText,e.data)}catch{}}function JO(a,{relative:e}={}){Wa(Ep(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=C.useContext(ml),{hash:n,pathname:i,search:o}=o0(a,{relative:e}),l=i;return s!=="/"&&(l=i==="/"?s:bu([s,i])),r.createHref({pathname:l,search:o,hash:n})}function Ep(){return C.useContext(i0)!=null}function Ti(){return Wa(Ep(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(i0).location}var x6="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function b6(a){C.useContext(ml).static||C.useLayoutEffect(a)}function ka(){let{isDataRoute:a}=C.useContext(Sc);return a?m7():ZO()}function ZO(){Wa(Ep(),"useNavigate() may be used only in the context of a <Router> component.");let a=C.useContext(Sp),{basename:e,navigator:s}=C.useContext(ml),{matches:r}=C.useContext(Sc),{pathname:n}=Ti(),i=JSON.stringify(Y_(r)),o=C.useRef(!1);return b6(()=>{o.current=!0}),C.useCallback((c,u={})=>{if(_c(o.current,x6),!o.current)return;if(typeof c=="number"){s.go(c);return}let m=K_(c,JSON.parse(i),n,u.relative==="path");a==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:bu([e,m.pathname])),(u.replace?s.replace:s.push)(m,u.state,u)},[e,s,i,n,a])}var e7=C.createContext(null);function t7(a){let e=C.useContext(Sc).outlet;return C.useMemo(()=>e&&C.createElement(e7.Provider,{value:a},e),[e,a])}function o0(a,{relative:e}={}){let{matches:s}=C.useContext(Sc),{pathname:r}=Ti(),n=JSON.stringify(Y_(s));return C.useMemo(()=>K_(a,JSON.parse(n),r,e==="path"),[a,n,r,e])}function s7(a,e){return y6(a,e)}function y6(a,e,s,r,n){Wa(Ep(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=C.useContext(ml),{matches:o}=C.useContext(Sc),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",m=l?l.pathnameBase:"/",A=l&&l.route;{let B=A&&A.path||"";w6(u,!A||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let g=Ti(),p;if(e){let B=typeof e=="string"?Bp(e):e;Wa(m==="/"||B.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${B.pathname}" was given in the \`location\` prop.`),p=B}else p=g;let v=p.pathname||"/",b=v;if(m!=="/"){let B=m.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(B.length).join("/")}let y=d6(a,{pathname:b});_c(A||y!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),_c(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=o7(y&&y.map(B=>Object.assign({},B,{params:Object.assign({},c,B.params),pathname:bu([m,i.encodeLocation?i.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?m:bu([m,i.encodeLocation?i.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),o,s,r,n);return e&&w?C.createElement(i0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},w):w}function r7(){let a=h7(),e=HO(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),s=a instanceof Error?a.stack:null,r="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",a),o=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:i},"ErrorBoundary")," or"," ",C.createElement("code",{style:i},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),s?C.createElement("pre",{style:n},s):null,o)}var a7=C.createElement(r7,null),v6=class extends C.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){this.props.onError?this.props.onError(a,e):console.error("React Router caught the following error during render",a)}render(){let a=this.state.error;if(this.context&&typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){const s=XO(a.digest);s&&(a=s)}let e=a!==void 0?C.createElement(Sc.Provider,{value:this.props.routeContext},C.createElement(X_.Provider,{value:a,children:this.props.component})):this.props.children;return this.context?C.createElement(n7,{error:a},e):e}};v6.contextType=$O;var E2=new WeakMap;function n7({children:a,error:e}){let{basename:s}=C.useContext(ml);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=KO(e.digest);if(r){let n=E2.get(e);if(n)throw n;let i=A6(r.location,s);if(m6&&!E2.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw E2.set(e,o),o}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return a}function i7({routeContext:a,match:e,children:s}){let r=C.useContext(Sp);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Sc.Provider,{value:a},s)}function o7(a,e=[],s=null,r=null,n=null){if(a==null){if(!s)return null;if(s.errors)a=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)a=s.matches;else return null}let i=a,o=s?.errors;if(o!=null){let m=i.findIndex(A=>A.route.id&&o?.[A.route.id]!==void 0);Wa(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let l=!1,c=-1;if(s)for(let m=0;m<i.length;m++){let A=i[m];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(c=m),A.route.id){let{loaderData:g,errors:p}=s,v=A.route.loader&&!g.hasOwnProperty(A.route.id)&&(!p||p[A.route.id]===void 0);if(A.route.lazy||v){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let u=s&&r?(m,A)=>{r(m,{location:s.location,params:s.matches?.[0]?.params??{},unstable_pattern:VO(s.matches),errorInfo:A})}:void 0;return i.reduceRight((m,A,g)=>{let p,v=!1,b=null,y=null;s&&(p=o&&A.route.id?o[A.route.id]:void 0,b=A.route.errorElement||a7,l&&(c<0&&g===0?(w6("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,y=null):c===g&&(v=!0,y=A.route.hydrateFallbackElement||null)));let w=e.concat(i.slice(0,g+1)),B=()=>{let j;return p?j=b:v?j=y:A.route.Component?j=C.createElement(A.route.Component,null):A.route.element?j=A.route.element:j=m,C.createElement(i7,{match:A,routeContext:{outlet:m,matches:w,isDataRoute:s!=null},children:j})};return s&&(A.route.ErrorBoundary||A.route.errorElement||g===0)?C.createElement(v6,{location:s.location,revalidation:s.revalidation,component:b,error:p,children:B(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:u}):B()},null)}function J_(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function l7(a){let e=C.useContext(Sp);return Wa(e,J_(a)),e}function c7(a){let e=C.useContext(rw);return Wa(e,J_(a)),e}function d7(a){let e=C.useContext(Sc);return Wa(e,J_(a)),e}function Z_(a){let e=d7(a),s=e.matches[e.matches.length-1];return Wa(s.route.id,`${a} can only be used on routes that contain a unique "id"`),s.route.id}function u7(){return Z_("useRouteId")}function h7(){let a=C.useContext(X_),e=c7("useRouteError"),s=Z_("useRouteError");return a!==void 0?a:e.errors?.[s]}function m7(){let{router:a}=l7("useNavigate"),e=Z_("useNavigate"),s=C.useRef(!1);return b6(()=>{s.current=!0}),C.useCallback(async(n,i={})=>{_c(s.current,x6),s.current&&(typeof n=="number"?await a.navigate(n):await a.navigate(n,{fromRouteId:e,...i}))},[a,e])}var rB={};function w6(a,e,s){!e&&!rB[a]&&(rB[a]=!0,_c(!1,s))}C.memo(A7);function A7({routes:a,future:e,state:s,onError:r}){return y6(a,void 0,s,r,e)}function bh({to:a,replace:e,state:s,relative:r}){Wa(Ep(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=C.useContext(ml);_c(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=C.useContext(Sc),{pathname:o}=Ti(),l=ka(),c=K_(a,Y_(i),o,r==="path"),u=JSON.stringify(c);return C.useEffect(()=>{l(JSON.parse(u),{replace:e,state:s,relative:r})},[l,u,r,e,s]),null}function N6(a){return t7(a.context)}function Gs(a){Wa(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function f7({basename:a="/",children:e=null,location:s,navigationType:r="POP",navigator:n,static:i=!1,unstable_useTransitions:o}){Wa(!Ep(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=a.replace(/^\/*/,"/"),c=C.useMemo(()=>({basename:l,navigator:n,static:i,unstable_useTransitions:o,future:{}}),[l,n,i,o]);typeof s=="string"&&(s=Bp(s));let{pathname:u="/",search:m="",hash:A="",state:g=null,key:p="default"}=s,v=C.useMemo(()=>{let b=_u(u,l);return b==null?null:{location:{pathname:b,search:m,hash:A,state:g,key:p},navigationType:r}},[l,u,m,A,g,p,r]);return _c(v!=null,`<Router basename="${l}"> is not able to match the URL "${u}${m}${A}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:C.createElement(ml.Provider,{value:c},C.createElement(i0.Provider,{children:e,value:v}))}function p7({children:a,location:e}){return s7(Sj(a),e)}function Sj(a,e=[]){let s=[];return C.Children.forEach(a,(r,n)=>{if(!C.isValidElement(r))return;let i=[...e,n];if(r.type===C.Fragment){s.push.apply(s,Sj(r.props.children,i));return}Wa(r.type===Gs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wa(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Sj(r.props.children,i)),s.push(o)}),s}var My="get",Ry="application/x-www-form-urlencoded";function aw(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function g7(a){return aw(a)&&a.tagName.toLowerCase()==="button"}function x7(a){return aw(a)&&a.tagName.toLowerCase()==="form"}function b7(a){return aw(a)&&a.tagName.toLowerCase()==="input"}function y7(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function v7(a,e){return a.button===0&&(!e||e==="_self")&&!y7(a)}var Nb=null;function w7(){if(Nb===null)try{new FormData(document.createElement("form"),0),Nb=!1}catch{Nb=!0}return Nb}var N7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function F2(a){return a!=null&&!N7.has(a)?(_c(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ry}"`),null):a}function j7(a,e){let s,r,n,i,o;if(x7(a)){let l=a.getAttribute("action");r=l?_u(l,e):null,s=a.getAttribute("method")||My,n=F2(a.getAttribute("enctype"))||Ry,i=new FormData(a)}else if(g7(a)||b7(a)&&(a.type==="submit"||a.type==="image")){let l=a.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=a.getAttribute("formaction")||l.getAttribute("action");if(r=c?_u(c,e):null,s=a.getAttribute("formmethod")||l.getAttribute("method")||My,n=F2(a.getAttribute("formenctype"))||F2(l.getAttribute("enctype"))||Ry,i=new FormData(l,a),!w7()){let{name:u,type:m,value:A}=a;if(m==="image"){let g=u?`${u}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else u&&i.append(u,A)}}else{if(aw(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=My,r=null,n=Ry,o=a}return i&&n==="text/plain"&&(o=i,i=void 0),{action:r,method:s.toLowerCase(),encType:n,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function e5(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function _7(a,e,s,r){let n=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return s?n.pathname.endsWith("/")?n.pathname=`${n.pathname}_.${r}`:n.pathname=`${n.pathname}.${r}`:n.pathname==="/"?n.pathname=`_root.${r}`:e&&_u(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function C7(a,e){if(a.id in e)return e[a.id];try{let s=await import(a.module);return e[a.id]=s,s}catch(s){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function k7(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function B7(a,e,s){let r=await Promise.all(a.map(async n=>{let i=e.routes[n.route.id];if(i){let o=await C7(i,s);return o.links?o.links():[]}return[]}));return D7(r.flat(1).filter(k7).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function aB(a,e,s,r,n,i){let o=(c,u)=>s[u]?c.route.id!==s[u].route.id:!0,l=(c,u)=>s[u].pathname!==c.pathname||s[u].route.path?.endsWith("*")&&s[u].params["*"]!==c.params["*"];return i==="assets"?e.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?e.filter((c,u)=>{let m=r.routes[c.route.id];if(!m||!m.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let A=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function S7(a,e,{includeHydrateFallback:s}={}){return E7(a.map(r=>{let n=e.routes[r.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),s&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function E7(a){return[...new Set(a)]}function F7(a){let e={},s=Object.keys(a).sort();for(let r of s)e[r]=a[r];return e}function D7(a,e){let s=new Set;return new Set(e),a.reduce((r,n)=>{let i=JSON.stringify(F7(n));return s.has(i)||(s.add(i),r.push({key:i,link:n})),r},[])}function j6(){let a=C.useContext(Sp);return e5(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function T7(){let a=C.useContext(rw);return e5(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var t5=C.createContext(void 0);t5.displayName="FrameworkContext";function _6(){let a=C.useContext(t5);return e5(a,"You must render this element inside a <HydratedRouter> element"),a}function P7(a,e){let s=C.useContext(t5),[r,n]=C.useState(!1),[i,o]=C.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:m,onTouchStart:A}=e,g=C.useRef(null);C.useEffect(()=>{if(a==="render"&&o(!0),a==="viewport"){let b=w=>{w.forEach(B=>{o(B.isIntersecting)})},y=new IntersectionObserver(b,{threshold:.5});return g.current&&y.observe(g.current),()=>{y.disconnect()}}},[a]),C.useEffect(()=>{if(r){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[r]);let p=()=>{n(!0)},v=()=>{n(!1),o(!1)};return s?a!=="intent"?[i,g,{}]:[i,g,{onFocus:Pg(l,p),onBlur:Pg(c,v),onMouseEnter:Pg(u,p),onMouseLeave:Pg(m,v),onTouchStart:Pg(A,p)}]:[!1,g,{}]}function Pg(a,e){return s=>{a&&a(s),s.defaultPrevented||e(s)}}function I7({page:a,...e}){let{router:s}=j6(),r=C.useMemo(()=>d6(s.routes,a,s.basename),[s.routes,a,s.basename]);return r?C.createElement(M7,{page:a,matches:r,...e}):null}function L7(a){let{manifest:e,routeModules:s}=_6(),[r,n]=C.useState([]);return C.useEffect(()=>{let i=!1;return B7(a,e,s).then(o=>{i||n(o)}),()=>{i=!0}},[a,e,s]),r}function M7({page:a,matches:e,...s}){let r=Ti(),{future:n,manifest:i,routeModules:o}=_6(),{basename:l}=j6(),{loaderData:c,matches:u}=T7(),m=C.useMemo(()=>aB(a,e,u,i,r,"data"),[a,e,u,i,r]),A=C.useMemo(()=>aB(a,e,u,i,r,"assets"),[a,e,u,i,r]),g=C.useMemo(()=>{if(a===r.pathname+r.search+r.hash)return[];let b=new Set,y=!1;if(e.forEach(B=>{let j=i.routes[B.route.id];!j||!j.hasLoader||(!m.some(E=>E.route.id===B.route.id)&&B.route.id in c&&o[B.route.id]?.shouldRevalidate||j.hasClientLoader?y=!0:b.add(B.route.id))}),b.size===0)return[];let w=_7(a,l,n.unstable_trailingSlashAwareDataRequests,"data");return y&&b.size>0&&w.searchParams.set("_routes",e.filter(B=>b.has(B.route.id)).map(B=>B.route.id).join(",")),[w.pathname+w.search]},[l,n.unstable_trailingSlashAwareDataRequests,c,r,i,m,e,a,o]),p=C.useMemo(()=>S7(A,i),[A,i]),v=L7(A);return C.createElement(C.Fragment,null,g.map(b=>C.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...s})),p.map(b=>C.createElement("link",{key:b,rel:"modulepreload",href:b,...s})),v.map(({key:b,link:y})=>C.createElement("link",{key:b,nonce:s.nonce,...y,crossOrigin:y.crossOrigin??s.crossOrigin})))}function R7(...a){return e=>{a.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var O7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{O7&&(window.__reactRouterVersion="7.13.0")}catch{}function U7({basename:a,children:e,unstable_useTransitions:s,window:r}){let n=C.useRef();n.current==null&&(n.current=xO({window:r,v5Compat:!0}));let i=n.current,[o,l]=C.useState({action:i.action,location:i.location}),c=C.useCallback(u=>{s===!1?l(u):C.startTransition(()=>l(u))},[s]);return C.useLayoutEffect(()=>i.listen(c),[i,c]),C.createElement(f7,{basename:a,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:s})}var C6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yf=C.forwardRef(function({onClick:e,discover:s="render",prefetch:r="none",relative:n,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:m,viewTransition:A,unstable_defaultShouldRevalidate:g,...p},v){let{basename:b,unstable_useTransitions:y}=C.useContext(ml),w=typeof u=="string"&&C6.test(u),B=A6(u,b);u=B.to;let j=JO(u,{relative:n}),[E,S,T]=P7(r,p),M=V7(u,{replace:o,state:l,target:c,preventScrollReset:m,relative:n,viewTransition:A,unstable_defaultShouldRevalidate:g,unstable_useTransitions:y});function D(Y){e&&e(Y),Y.defaultPrevented||M(Y)}let P=C.createElement("a",{...p,...T,href:B.absoluteURL||j,onClick:B.isExternal||i?e:D,ref:R7(v,S),target:c,"data-discover":!w&&s==="render"?"true":void 0});return E&&!w?C.createElement(C.Fragment,null,P,C.createElement(I7,{page:j})):P});Yf.displayName="Link";var Oy=C.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:r="",end:n=!1,style:i,to:o,viewTransition:l,children:c,...u},m){let A=o0(o,{relative:u.relative}),g=Ti(),p=C.useContext(rw),{navigator:v,basename:b}=C.useContext(ml),y=p!=null&&W7(A)&&l===!0,w=v.encodeLocation?v.encodeLocation(A).pathname:A.pathname,B=g.pathname,j=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;s||(B=B.toLowerCase(),j=j?j.toLowerCase():null,w=w.toLowerCase()),j&&b&&(j=_u(j,b)||j);const E=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let S=B===w||!n&&B.startsWith(w)&&B.charAt(E)==="/",T=j!=null&&(j===w||!n&&j.startsWith(w)&&j.charAt(w.length)==="/"),M={isActive:S,isPending:T,isTransitioning:y},D=S?e:void 0,P;typeof r=="function"?P=r(M):P=[r,S?"active":null,T?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let Y=typeof i=="function"?i(M):i;return C.createElement(Yf,{...u,"aria-current":D,className:P,ref:m,style:Y,to:o,viewTransition:l},typeof c=="function"?c(M):c)});Oy.displayName="NavLink";var Q7=C.forwardRef(({discover:a="render",fetcherKey:e,navigate:s,reloadDocument:r,replace:n,state:i,method:o=My,action:l,onSubmit:c,relative:u,preventScrollReset:m,viewTransition:A,unstable_defaultShouldRevalidate:g,...p},v)=>{let{unstable_useTransitions:b}=C.useContext(ml),y=q7(),w=G7(l,{relative:u}),B=o.toLowerCase()==="get"?"get":"post",j=typeof l=="string"&&C6.test(l),E=S=>{if(c&&c(S),S.defaultPrevented)return;S.preventDefault();let T=S.nativeEvent.submitter,M=T?.getAttribute("formmethod")||o,D=()=>y(T||S.currentTarget,{fetcherKey:e,method:M,navigate:s,replace:n,state:i,relative:u,preventScrollReset:m,viewTransition:A,unstable_defaultShouldRevalidate:g});b&&s!==!1?C.startTransition(()=>D()):D()};return C.createElement("form",{ref:v,method:B,action:w,onSubmit:r?c:E,...p,"data-discover":!j&&a==="render"?"true":void 0})});Q7.displayName="Form";function H7(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function k6(a){let e=C.useContext(Sp);return Wa(e,H7(a)),e}function V7(a,{target:e,replace:s,state:r,preventScrollReset:n,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let u=ka(),m=Ti(),A=o0(a,{relative:i});return C.useCallback(g=>{if(v7(g,e)){g.preventDefault();let p=s!==void 0?s:Mx(m)===Mx(A),v=()=>u(a,{replace:p,state:r,preventScrollReset:n,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?C.startTransition(()=>v()):v()}},[m,u,A,s,r,e,a,n,i,o,l,c])}var z7=0,$7=()=>`__${String(++z7)}__`;function q7(){let{router:a}=k6("useSubmit"),{basename:e}=C.useContext(ml),s=u7(),r=a.fetch,n=a.navigate;return C.useCallback(async(i,o={})=>{let{action:l,method:c,encType:u,formData:m,body:A}=j7(i,e);if(o.navigate===!1){let g=o.fetcherKey||$7();await r(g,s,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:m,body:A,formMethod:o.method||c,formEncType:o.encType||u,flushSync:o.flushSync})}else await n(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:m,body:A,formMethod:o.method||c,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:s,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,n,e,s])}function G7(a,{relative:e}={}){let{basename:s}=C.useContext(ml),r=C.useContext(Sc);Wa(r,"useFormAction must be used inside a RouteContext");let[n]=r.matches.slice(-1),i={...o0(a||".",{relative:e})},o=Ti();if(a==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(m=>m==="")){l.delete("index"),c.filter(A=>A).forEach(A=>l.append("index",A));let m=l.toString();i.search=m?`?${m}`:""}}return(!a||a===".")&&n.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(i.pathname=i.pathname==="/"?s:bu([s,i.pathname])),Mx(i)}function W7(a,{relative:e}={}){let s=C.useContext(p6);Wa(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=k6("useViewTransitionState"),n=o0(a,{relative:e});if(!s.isTransitioning)return!1;let i=_u(s.currentLocation.pathname,r)||s.currentLocation.pathname,o=_u(s.nextLocation.pathname,r)||s.nextLocation.pathname;return ov(n.pathname,o)!=null||ov(n.pathname,i)!=null}var B6=c6();const Y7=G_(B6),K7="/backend/api/log_activity.php";function X7(){return{user_id:parseInt(localStorage.getItem("user_id")||localStorage.getItem("goserveph_user_id")||"0"),user_email:localStorage.getItem("email")||localStorage.getItem("goserveph_email")||"",user_name:localStorage.getItem("full_name")||localStorage.getItem("display_name")||localStorage.getItem("user_name")||localStorage.getItem("first_name")||"",user_role:localStorage.getItem("goserveph_role")||localStorage.getItem("user_role")||"user"}}async function l0({action:a,action_category:e="system",description:s,module:r="",reference_id:n="",metadata:i=null,user_email:o="",user_name:l="",user_role:c=""}){try{const u=X7(),m={...u,user_email:o||u.user_email,user_name:l||u.user_name,user_role:c||u.user_role,action:a,action_category:e,description:s,module:r,reference_id:n,metadata:i};if(!m.user_email)return;fetch(K7,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(m)}).catch(A=>console.warn("Activity log failed:",A))}catch(u){console.warn("Activity logger error:",u)}}function J7(a,e="user"){l0({action:"Login",action_category:"account",description:"User logged in",module:"Authentication",metadata:{role:e},user_email:a,user_role:e})}function S6(){const a=localStorage.getItem("email")||localStorage.getItem("goserveph_email")||"",e=localStorage.getItem("goserveph_role")||localStorage.getItem("user_role")||"user";l0({action:"Logout",action_category:"account",description:"User logged out",module:"Authentication",user_email:a,user_role:e})}function Z7(a,e=""){l0({action:"Registration",action_category:"account",description:`${e||a} registered a new account`,module:"Authentication",user_email:a,user_name:e})}function ql(a,e="",s={}){l0({action:"Permit Submission",action_category:"permit",description:`Submitted a ${a} application`,module:a,reference_id:e,metadata:s})}function eU(a,e=""){l0({action:"Page Visit",action_category:"navigation",description:`Visited ${a}`,module:a,metadata:{path:e}})}const E6=C.createContext(null),nw=()=>{const a=C.useContext(E6);if(!a)throw new Error("useAuth must be used within an AuthProvider");return a},tU=({children:a})=>{const[e,s]=C.useState(null),[r,n]=C.useState(!0),[i,o]=C.useState(!1),l=ka(),c={"superadmin@eplms.com":"super","businessadmin@eplms.com":"business","buildingadmin@eplms.com":"building","barangaystaff@eplms.com":"barangay","transportadmin@eplms.com":"transport","admin@eplms.com":"super"};C.useEffect(()=>{u()},[]);const u=async()=>{try{const j=localStorage.getItem("auth_token"),E=localStorage.getItem("email");if(!j&&!E){n(!1);return}const S={Accept:"application/json","Content-Type":"application/json"};j&&(S.Authorization=`Bearer ${j}`);const T=await fetch("/backend/login/get_profile.php?action=get",{method:"GET",credentials:"include",headers:S});if(T.status===401){b(),n(!1);return}const M=await T.json();if(M.success&&M.data){const D=m(M.data);s(D),o(!0),localStorage.setItem("user_profile",JSON.stringify(D)),localStorage.setItem("user_name",D.fullName||D.username),localStorage.setItem("first_name",D.firstName||""),localStorage.setItem("last_name",D.lastName||""),localStorage.setItem("email",D.email||""),M.auth_method&&localStorage.setItem("auth_method",M.auth_method),D.role&&localStorage.setItem("user_role",D.role),D.department&&localStorage.setItem("user_department",D.department),D.email&&c[D.email.toLowerCase()]&&localStorage.setItem("admin_department",c[D.email.toLowerCase()])}else A()}catch(j){console.error("Auth check failed:",j),A()}finally{n(!1)}},m=j=>{const E=j.first_name||j.firstName||"",S=j.last_name||j.lastName||"",T=(j.email||"").toLowerCase(),M=j.role||j.user_type||"user";let D=j.department||j.dept||"";T&&c[T]&&(D=c[T]);const P=T in c||M.toLowerCase().includes("admin");return{...j,firstName:E,lastName:S,email:T,role:M,department:D,fullName:`${E} ${S}`.trim(),username:T?T.split("@")[0]:"User",isAdmin:P,adminType:P?T in c?"fixed":"regular":null}},A=()=>{const j=localStorage.getItem("user_profile"),E=localStorage.getItem("email")?.toLowerCase();if(j)try{const S=JSON.parse(j);s(S),o(!0)}catch{g(E)}else g(E)},g=j=>{const E=localStorage.getItem("user_name"),S=localStorage.getItem("user_role"),T=localStorage.getItem("user_department");if(E||j){const M=j&&c[j],D=M?c[j]:T;s({fullName:E||"",username:j?j.split("@")[0]:E||"User",email:j||"",role:S||(M?"admin":"user"),department:D||"",isAdmin:M||S?.toLowerCase().includes("admin")||!1,adminType:M?"fixed":S?.toLowerCase().includes("admin")?"regular":null}),o(!0)}},p=async j=>{try{b();const S=await(await fetch("/backend/login/otp-admin.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)})).json();if(S.success){S.token&&localStorage.setItem("auth_token",S.token);const T=(S.email||"").toLowerCase();return T&&(localStorage.setItem("email",T),c[T]&&localStorage.setItem("admin_department",c[T])),S.user_id&&localStorage.setItem("user_id",S.user_id),S.role&&localStorage.setItem("user_role",S.role),S.department&&localStorage.setItem("user_department",S.department),await u(),{success:!0,data:S}}else return{success:!1,message:S.message}}catch(E){return console.error("Login error:",E),{success:!1,message:"Network error"}}},v=async()=>{try{S6();const j=localStorage.getItem("auth_token");await fetch("/backend/login/logout.php",{method:"POST",credentials:"include",headers:j?{Authorization:`Bearer ${j}`,"Content-Type":"application/json"}:{"Content-Type":"application/json"}})}catch(j){console.error("Logout API error:",j)}finally{b(),l("/login")}},b=()=>{localStorage.clear(),s(null),o(!1),document.cookie="PHPSESSID=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"},B={user:e,loading:r,isAuthenticated:i,login:p,logout:v,updateUser:j=>{s(E=>{const S={...E,...j};if(j.email){const T=j.email.toLowerCase(),M=T in c;S.isAdmin=M||S.role?.toLowerCase().includes("admin"),S.adminType=M?"fixed":S.role?.toLowerCase().includes("admin")?"regular":null,M&&(S.department=c[T])}if(j.firstName||j.lastName){const T=`${j.firstName||E?.firstName||""} ${j.lastName||E?.lastName||""}`.trim();localStorage.setItem("user_name",T)}return j.role&&localStorage.setItem("user_role",j.role),j.department&&localStorage.setItem("user_department",j.department),j.email&&c[j.email.toLowerCase()]&&localStorage.setItem("admin_department",c[j.email.toLowerCase()]),S})},checkAuthStatus:u,clearAuth:b,isAdminType:j=>{if(!e||!e.isAdmin)return!1;const E=e.email?.toLowerCase();return E&&c[E]?c[E]===j:e.department===j},adminDepartments:c};return t.jsx(E6.Provider,{value:B,children:a})};const sU=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rU=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),nB=a=>{const e=rU(a);return e.charAt(0).toUpperCase()+e.slice(1)},F6=(...a)=>a.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim(),aU=a=>{for(const e in a)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var nU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const iU=C.forwardRef(({color:a="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:n="",children:i,iconNode:o,...l},c)=>C.createElement("svg",{ref:c,...nU,width:e,height:e,stroke:a,strokeWidth:r?Number(s)*24/Number(e):s,className:F6("lucide",n),...!i&&!aU(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,m])=>C.createElement(u,m)),...Array.isArray(i)?i:[i]]));const hs=(a,e)=>{const s=C.forwardRef(({className:r,...n},i)=>C.createElement(iU,{ref:i,iconNode:e,className:F6(`lucide-${sU(nB(a))}`,`lucide-${a}`,r),...n}));return s.displayName=nB(a),s};const oU=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],bd=hs("activity",oU);const lU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Vh=hs("arrow-left",lU);const cU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],sA=hs("arrow-right",cU);const dU=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],lx=hs("arrow-up-down",dU);const uU=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],_h=hs("award",uU);const hU=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],D6=hs("bell",hU);const mU=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Ej=hs("bot",mU);const AU=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ba=hs("briefcase",AU);const fU=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],ll=hs("building-2",fU);const pU=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Ur=hs("building",pU);const gU=[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]],hp=hs("bus",gU);const xU=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],iB=hs("calendar-clock",xU);const bU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],T6=hs("calendar-days",bU);const yU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],bn=hs("calendar",yU);const vU=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],Ad=hs("car",vU);const wU=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],P6=hs("chart-column",wU);const NU=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],oB=hs("chart-no-axes-column-increasing",NU);const jU=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],_U=hs("chart-pie",jU);const CU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ht=hs("check",CU);const kU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],fd=hs("chevron-down",kU);const BU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],s5=hs("chevron-left",BU);const SU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],pA=hs("chevron-right",SU);const EU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Vf=hs("chevron-up",EU);const FU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ks=hs("circle-alert",FU);const DU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Us=hs("circle-check-big",DU);const TU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ka=hs("circle-x",TU);const PU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],IU=hs("clipboard-check",PU);const LU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Fp=hs("clipboard-list",LU);const MU=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jr=hs("clock",MU);const RU=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],Kf=hs("cloud-download",RU);const OU=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],UU=hs("dollar-sign",OU);const QU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],nn=hs("download",QU);const HU=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],VU=hs("droplets",HU);const zU=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],D2=hs("eye-off",zU);const $U=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ws=hs("eye",$U);const qU=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],GU=hs("facebook",qU);const WU=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],I6=hs("factory",WU);const YU=[["path",{d:"M4 3 2 5v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"1n2rgs"}],["path",{d:"M6 8h4",key:"utf9t1"}],["path",{d:"M6 18h4",key:"12yh4b"}],["path",{d:"m12 3-2 2v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"3ha7mj"}],["path",{d:"M14 8h4",key:"1r8wg2"}],["path",{d:"M14 18h4",key:"1t3kbu"}],["path",{d:"m20 3-2 2v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"dfd4e2"}]],KU=hs("fence",YU);const XU=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],JU=hs("file-archive",XU);const ZU=[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]],e8=hs("file-audio",ZU);const t8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Fj=hs("file-check",t8);const s8=[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]],r8=hs("file-code",s8);const a8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],n8=hs("file-down",a8);const i8=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],o8=hs("file-pen-line",i8);const l8=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]],c8=hs("file-search",l8);const d8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Dj=hs("file-spreadsheet",d8);const u8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Kt=hs("file-text",u8);const h8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]],m8=hs("file-video",h8);const A8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],mp=hs("file",A8);const f8=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Rx=hs("funnel",f8);const p8=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],g8=hs("github",p8);const x8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Tj=hs("globe",x8);const b8=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Pj=hs("graduation-cap",b8);const y8=[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]],v8=hs("hammer",y8);const w8=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],N8=hs("hard-hat",w8);const j8=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],rn=hs("house",j8);const _8=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],io=hs("image",_8);const C8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],iw=hs("info",C8);const k8=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],lB=hs("key",k8);const B8=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],Pf=hs("landmark",B8);const S8=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],T2=hs("layers",S8);const E8=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],F8=hs("layout-dashboard",E8);const D8=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],T8=hs("linkedin",D8);const P8=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Or=hs("loader-circle",P8);const I8=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],ow=hs("log-in",I8);const L8=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],L6=hs("lock",L8);const M8=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],lw=hs("log-out",M8);const R8=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],cw=hs("mail",R8);const O8=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ec=hs("map-pin",O8);const U8=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Q8=hs("menu",U8);const H8=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],c0=hs("message-square",H8);const V8=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],r5=hs("phone",V8);const z8=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],cB=hs("plane",z8);const $8=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],rA=hs("printer",$8);const q8=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],G8=hs("radio",q8);const W8=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],fu=hs("receipt",W8);const Y8=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ya=hs("refresh-cw",Y8);const K8=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],X8=hs("save",K8);const J8=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],Ij=hs("scale",J8);const Z8=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m16 16-1.9-1.9",key:"1dq9hf"}]],eQ=hs("scan-search",Z8);const tQ=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],sa=hs("search",tQ);const sQ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rQ=hs("settings",sQ);const aQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],nQ=hs("shield-alert",aQ);const iQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],M6=hs("shield-check",iQ);const oQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Pr=hs("shield",oQ);const lQ=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],R6=hs("shopping-bag",lQ);const cQ=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M12 3v3",key:"1n5kay"}],["path",{d:"M18 6a2 2 0 0 1 1.387.56l2.307 2.22a1 1 0 0 1 0 1.44l-2.307 2.22A2 2 0 0 1 18 13H6a2 2 0 0 1-1.387-.56l-2.306-2.22a1 1 0 0 1 0-1.44l2.306-2.22A2 2 0 0 1 6 6z",key:"gqqp9m"}]],dQ=hs("signpost",cQ);const uQ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],dB=hs("square-pen",uQ);const hQ=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],O6=hs("store",hQ);const mQ=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],AQ=hs("tag",mQ);const fQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],pQ=hs("target",fQ);const gQ=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],U6=hs("ticket",gQ);const xQ=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],d0=hs("trending-down",xQ);const bQ=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],dl=hs("trending-up",bQ);const yQ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ap=hs("triangle-alert",yQ);const vQ=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],a5=hs("truck",vQ);const wQ=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],NQ=hs("twitter",wQ);const jQ=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],er=hs("upload",jQ);const _Q=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],CQ=hs("user-check",_Q);const kQ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],aA=hs("user-plus",kQ);const BQ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gr=hs("user",BQ);const SQ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],yd=hs("users",SQ);const EQ=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],Q6=hs("utensils",EQ);const FQ=[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]],DQ=hs("wine",FQ);const TQ=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],PQ=hs("wrench",TQ);const IQ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ls=hs("x",IQ);const LQ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],nA=hs("zap",LQ);const MQ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],RQ=hs("zoom-in",MQ);const OQ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],UQ=hs("zoom-out",OQ);function QQ(){const[a,e]=C.useState(new Date),[s,r]=C.useState(!0),[n,i]=C.useState(0),[o,l]=C.useState(!1),[c,u]=C.useState("Loading..."),[m,A]=C.useState(""),[g,p]=C.useState(""),[v,b]=C.useState(""),y=ka();C.useEffect(()=>{const j=setInterval(()=>e(new Date),1e3);return()=>clearInterval(j)},[]),C.useEffect(()=>{const j=()=>{const E=window.scrollY;r(E<n||E<100),i(E)};return window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j)},[n]);const w=()=>{console.log(" UserHeader: Getting user data from localStorage...");const j=localStorage.getItem("first_name")||localStorage.getItem("user_name")||localStorage.getItem("goserveph_name"),E=localStorage.getItem("full_name")||localStorage.getItem("display_name")||localStorage.getItem("goserveph_name"),S=localStorage.getItem("email")||localStorage.getItem("goserveph_email"),T=localStorage.getItem("role")||localStorage.getItem("goserveph_role")||"user";let M=j;if(!M&&E)M=E.split(" ")[0]||"User";else if(!M&&S){const D=S.split("@")[0];M=D.charAt(0).toUpperCase()+D.slice(1)}else M||(M="User");return console.log(" User data:",{firstName:M,fullName:E||M,email:S||"No email",role:T}),{firstName:M,fullName:E||M,email:S||"",role:T}};C.useEffect(()=>{const j=()=>{const S=w();u(S.firstName),A(S.fullName),p(S.email),b(S.role)};j();const E=()=>{console.log("Storage changed, updating user info"),j()};return window.addEventListener("storage",E),window.addEventListener("user-data-updated",E),()=>{window.removeEventListener("storage",E),window.removeEventListener("user-data-updated",E)}},[]);const B=async()=>{try{S6();const j=localStorage.getItem("auth_token");j&&await fetch("/backend/login/users.php?action=logout",{method:"POST",headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"},body:JSON.stringify({action:"logout"})})}catch(j){console.error("Logout API error:",j)}finally{["auth_token","email","user_id","first_name","last_name","full_name","user_name","username","role","isAdmin","department","otp_verified","goserveph_name","goserveph_email","goserveph_department","goserveph_user_id","goserveph_role","last_login_time","display_name"].forEach(E=>localStorage.removeItem(E)),document.cookie.split(";").forEach(E=>{const S=E.indexOf("="),T=S>-1?E.substr(0,S).trim():E.trim();document.cookie=`${T}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`}),sessionStorage.clear(),y("/login")}};return t.jsx("header",{className:`sticky top-0 z-50 bg-white shadow-sm border-b-3 border-[#FDA811] transition-transform duration-300 ${s?"translate-y-0":"-translate-y-full"}`,children:t.jsxs("div",{className:"container mx-auto px-4 py-2 flex justify-between items-center h-18",children:[t.jsxs(Yf,{to:"/user/dashboard",className:"flex items-center gap-3",children:[t.jsx("img",{src:"/logoplms.png",alt:"Logo",className:"w-12 h-12"}),t.jsxs("div",{children:[t.jsxs("div",{className:"text-lg font-bold",children:[t.jsx("span",{className:"text-blue-700",children:"Go"}),t.jsx("span",{className:"text-green-700",children:"Serve"}),t.jsx("span",{className:"text-blue-700",children:"PH"})]}),t.jsx("div",{className:"text-xs text-gray-600",children:"Serbisyong Publiko, Abot-Kamay Mo."})]})]}),t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsxs("div",{className:"text-right text-xs",children:[t.jsx("div",{className:"font-semibold",children:a.toLocaleTimeString()}),t.jsx("div",{children:a.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>l(!o),className:"flex items-center space-x-2 px-3 py-1 rounded hover:bg-gray-100",children:[t.jsx(gr,{size:20}),t.jsx("span",{className:"font-medium",children:c}),v&&t.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded capitalize",children:v})]}),o&&t.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white shadow-lg rounded-lg border z-50",children:[t.jsxs("div",{className:"px-4 py-3 border-b",children:[t.jsx("div",{className:"font-medium",children:m}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:g||"No email"}),v&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Role: ",t.jsx("span",{className:"font-medium capitalize",children:v})]})]}),t.jsxs("div",{className:"py-1",children:[t.jsxs(Yf,{to:"/user/profile",className:"flex items-center px-4 py-2 hover:bg-gray-100 text-sm",onClick:()=>l(!1),children:[t.jsx(gr,{size:14,className:"mr-2"})," My Profile"]}),t.jsxs(Yf,{to:"/user/activity",className:"flex items-center px-4 py-2 hover:bg-gray-100 text-sm",onClick:()=>l(!1),children:[t.jsx(bd,{size:14,className:"mr-2"})," Activity Trail"]}),t.jsxs("button",{onClick:B,className:"flex items-center w-full px-4 py-2 hover:bg-gray-100 text-red-600 text-sm border-t",children:[t.jsx(lw,{size:14,className:"mr-2"})," Log Out"]})]})]})]})]})]})})}function dw(){return t.jsxs("footer",{className:"w-full bg-white text-[#333] font-[Montserrat,Arial,sans-serif] border-t border-gray-200",children:[t.jsxs("div",{className:"max-w-[1800px] mx-auto px-6 md:px-12 py-10 grid grid-cols-1 md:grid-cols-3 gap-10 text-left",children:[t.jsxs("div",{className:"space-y-4 mx-auto w-fit",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("img",{src:"/GSM_logo.png",alt:"GoServePH Logo",className:"w-17 h-17 object-contain"}),t.jsxs("h2",{className:"text-3xl font-extrabold tracking-wide text-[#4CAF50]",children:["Go",t.jsx("span",{className:"text-[#FDA811]",children:"ServePH"})]})]}),t.jsx("p",{className:"text-md font-semibold text-[#555]",children:"Serbisyong Publiko, Abot-Kamay Mo."}),t.jsxs("div",{className:"flex gap-4 pt-3",children:[t.jsx("a",{href:"#",className:"text-[#4A90E2] hover:text-[#4CAF50] transition-colors","aria-label":"Facebook",children:t.jsx(GU,{size:20})}),t.jsx("a",{href:"#",className:"text-[#4A90E2] hover:text-[#4CAF50] transition-colors","aria-label":"Twitter",children:t.jsx(NQ,{size:20})}),t.jsx("a",{href:"#",className:"text-[#4A90E2] hover:text-[#4CAF50] transition-colors","aria-label":"LinkedIn",children:t.jsx(T8,{size:20})}),t.jsx("a",{href:"#",className:"text-[#4A90E2] hover:text-[#4CAF50] transition-colors","aria-label":"GitHub",children:t.jsx(g8,{size:20})})]})]}),t.jsxs("div",{className:"flex flex-col items-start space-y-2 mx-auto w-fit",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#FDA811] mb-2",children:"Pages"}),["Home","About Us","Contact Us","Policy","FAQs"].map((a,e)=>t.jsx("a",{href:`/${a.toLowerCase().replace(" ","")}`,className:"text-sm text-[#333] hover:text-[#4CAF50] transition-colors",children:a},e))]}),t.jsxs("div",{className:"space-y-4 mx-auto w-fit text-left",children:[t.jsxs("div",{className:"flex items-start justify-start gap-3",children:[t.jsx(Ec,{className:"mt-1 text-[#4CAF50]",size:18}),t.jsxs("p",{className:"text-sm leading-relaxed text-[#333]",children:[t.jsx("span",{className:"block font-semibold",children:"8th Ave, Grace Park East"}),"Caloocan, Metro Manila"]})]}),t.jsxs("div",{className:"flex items-center justify-start gap-3",children:[t.jsx(r5,{className:"text-[#4CAF50]",size:18}),t.jsx("p",{className:"text-sm text-[#333]",children:"+63 912 345 6789"})]}),t.jsxs("div",{className:"flex items-center justify-start gap-3",children:[t.jsx(cw,{className:"text-[#4CAF50]",size:18}),t.jsx("a",{href:"mailto:support@company.com",className:"text-sm text-[#4A90E2] hover:text-[#4CAF50] transition-colors",children:"support@company.com"})]})]})]}),t.jsxs("div",{className:"border-t border-gray-200 py-4 text-center text-xs text-[#555]",children:[" ",new Date().getFullYear()," Government Management System."," ",t.jsx("span",{className:"text-[#4CAF50] font-semibold",children:"Permit & Licensing Management System"})," ","Module. All rights reserved."]})]})}const HQ={"/user/dashboard":"Dashboard","/user/business/type":"Business Permit Type","/user/business/new":"New Business Permit","/user/business/renewal":"Business Permit Renewal","/user/business/amendment":"Business Permit Amendment","/user/business/liquor":"Business Liquor Permit","/user/business/special":"Business Special Permit","/user/building/type":"Building Permit Type","/user/building/new":"New Building Permit","/user/building/renewal":"Building Permit Renewal","/user/building/ancillary":"Ancillary Permit","/user/building/professional":"Professional Registration","/user/franchise/type":"Franchise Permit Type","/user/franchise/new":"New Franchise Permit","/user/franchise/renew":"Franchise Permit Renewal","/user/barangay/new":"New Barangay Permit","/user/permittracker":"Permit Tracker","/user/general":"General Settings","/user/security":"Security Settings","/user/activity":"Activity Trail","/user/profile":"My Profile","/admin/dashboard":"Admin Dashboard","/admin/businesspermit":"Business Permit Applications","/admin/businessdashboard":"Business Permit Dashboard","/admin/businessprocessing":"Business Permit Processing","/admin/buildingpermit":"Building Permit Applications","/admin/buildingdashboard":"Building Permit Dashboard","/admin/buildingprocessing":"Building Permit Processing","/admin/professionals":"Professionals","/admin/franchisedashboard":"Franchise Dashboard","/admin/franchisepermit":"Franchise Permit Applications","/admin/brgydashboard":"Barangay Permit Dashboard","/admin/brgypermit":"Barangay Permit Applications","/admin/permittracker":"Admin Permit Tracker","/admin/audittrail":"Audit Trail"};function H6(){const a=Ti(),e=C.useRef("");C.useEffect(()=>{const s=a.pathname;if(s===e.current||s==="/login"||s==="/register"||s==="/home"||s==="/"||!(localStorage.getItem("email")||localStorage.getItem("goserveph_email")))return;e.current=s;const n=HQ[s]||s.split("/").pop().replace(/-/g," ").replace(/\b\w/g,i=>i.toUpperCase());eU(n,s)},[a.pathname])}const VQ=()=>(H6(),t.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-800 dark:via-slate-800 dark:to-slate-800",children:[t.jsx(QQ,{}),t.jsx("main",{className:"flex-1 overflow-auto p-8",children:t.jsx(N6,{})}),t.jsx(dw,{})]}));function zQ({sidebarCollapsed:a,onToggleSidebar:e,breadcrumb:s=["Dashboard"]}){const[r,n]=qt.useState(""),[i,o]=qt.useState(new Date);qt.useEffect(()=>{const c=localStorage.getItem("theme");if(c)n(c),document.documentElement.classList.toggle("dark",c==="dark");else{const u=window.matchMedia("(prefers-color-scheme: dark)").matches;n(u?"dark":"light"),document.documentElement.classList.toggle("dark",u)}},[]);const l=()=>{const c=r==="dark"?"light":"dark";n(c),localStorage.setItem("theme",c),document.documentElement.classList.toggle("dark",c==="dark")};return qt.useEffect(()=>{const c=setInterval(()=>o(new Date),1e3);return()=>clearInterval(c)},[]),t.jsx("div",{className:"bg-white/-80 backdrop-blur-xl border-b-4 border-[#FDA811] dark:bg-slate-800 dark:border-[#FDA811]/80 px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{className:"p-2 rounded-lg text-slate-500 hover:bg-slate-200 dark:text-slate-300 dark:hover:bg-slate-700 transition-colors duration-200",onClick:e,children:t.jsx(Q8,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("div",{className:"hidden md:flex items-center space-x-1",children:t.jsx("h1",{className:"text-md font-bold dark:text-white",children:"Permit and Licensing Management"})}),t.jsx("div",{children:t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-300 font-bold",children:s.join(" > ")})})]})]}),t.jsx("div",{className:"flex-1 max-w-md mx-8",children:t.jsxs("div",{className:"relative",children:[t.jsx(sa,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500 dark:text-slate-300"}),t.jsx("input",{type:"text",placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg placeholder-slate-500 dark:placeholder-slate-300 focus:outline-none focus:ring-2 focus:border-transparent focus:ring-orange-300 hover:border-orange-300 transition-all"}),t.jsx("button",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 text-slate-400 dark:text-slate-300 hover:text-slate-600 dark:hover:text-white",children:t.jsx(Rx,{className:"w-5 h-5"})})]})}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"text-right text-sm text-gray-800 dark:text-gray-200",children:[t.jsx("div",{className:"font-semibold",children:i.toLocaleTimeString()}),t.jsx("div",{className:"text-xs",children:i.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),t.jsxs("button",{className:"relative rounded-xl p-2 text-slate-600 dark:text-slate-400 dark:hover:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors cursor-pointer",children:[t.jsx(D6,{className:"w-6 h-6"}),t.jsx("span",{className:"absolute top-0 w-4 h-4 text-white text-xs bg-red-500 rounded-full flex items-center justify-center",children:"1"})]}),t.jsx("button",{className:"ml-2 rounded-xl p-2 bg-slate-300 text-slate-600 hover:bg-slate-400 dark:bg-slate-700 dark:text-yellow-400 dark:hover:bg-slate-900 transition-colors cursor-pointer",onClick:l,"aria-label":"Toggle dark mode",children:r==="dark"?t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[t.jsx("circle",{cx:"12",cy:"12",r:"5",stroke:"currentColor",strokeWidth:"2",fill:"none"}),t.jsx("path",{stroke:"currentColor",strokeWidth:"2",d:"M12 1v2m0 18v2m11-11h-2M3 12H1m16.95 7.07l-1.41-1.41M6.46 6.46L5.05 5.05m13.9 0l-1.41 1.41M6.46 17.54l-1.41 1.41"})]}):t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{stroke:"currentColor",strokeWidth:"2",d:"M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z"})})})]})]})})}const Uy=[{id:"dashboard",label:"Dashboard",icon:F8,path:"/admin/dashboard",department:["super"]},{id:"businessDashboard",label:"Permit Dashboard",icon:P6,path:"/admin/businessdashboard",department:["business","super"]},{id:"businessPermit",label:"Business Permit Application",icon:Ba,path:"/admin/businesspermit",department:["business","super"]},{id:"buildingDashboard",label:"Permit Dashboard",icon:Fp,path:"/admin/buildingdashboard",department:["building","super"]},{id:"buildingPermit",label:"Permit Applications",icon:ll,path:"/admin/buildingpermit",department:["building","super"]},{id:"professionalRegistration",label:"Registration Application",icon:Pj,path:"/admin/professionals",department:["building","super"]},{id:"franchiseDashboard",label:"Permit Dashboard",icon:U6,path:"/admin/franchisedashboard",department:["transport","super"]},{id:"franchisePermit",label:"Permit Application",icon:hp,path:"/admin/franchisepermit",department:["transport","super"]},{id:"brgydashboard",label:"Permit Dashboard",icon:rn,path:"/admin/brgydashboard",department:["barangay","super"]},{id:"brgyPermit",label:"Clearance Requests",icon:M6,path:"/admin/brgypermit",department:["barangay","super"]},{id:"auditTrail",label:"Audit Activity Trail",icon:bd,path:"/admin/audittrail",department:["super"]}];function $Q({collapsed:a}){const e=Ti(),s=ka(),{user:r,logout:n}=nw(),[i,o]=C.useState(new Set),[l,c]=C.useState(!1),u=r?.name||r?.email||"Admin",m=r?.department||localStorage.getItem("goserveph_department")||sessionStorage.getItem("admin_department")||"",A=b=>{switch(b){case"business":return Ba;case"building":return ll;case"transport":return hp;case"barangay":return rn;default:return Ba}};C.useEffect(()=>{console.log(" [AdminSidebar] User data:",{user:r,adminName:u,adminDepartment:m,localStorageDepartment:localStorage.getItem("goserveph_department")})},[r]);const g=C.useMemo(()=>{if(!m)return console.log(" No department found, showing empty sidebar"),[];if(console.log(` Filtering sidebar for department: ${m}`),m==="super"){const b={},y=[];Uy.forEach(E=>{if(E.id==="dashboard")return;const S=E.department.find(T=>T!=="super");S?(b[S]||(b[S]={id:`${S}Department`,label:`${S.charAt(0).toUpperCase()+S.slice(1)} Department`,icon:A(S),department:["super"],subItems:[]}),b[S].subItems.push(E)):y.push(E)});const w=[],B=Uy.find(E=>E.id==="dashboard");return B&&w.push(B),["business","building","transport","barangay"].forEach(E=>{b[E]&&w.push(b[E])}),y.forEach(E=>w.push(E)),w.filter(Boolean)}return Uy.filter(b=>b.department.includes(m))},[m]);C.useEffect(()=>{const b=new Set;g.forEach(y=>{y.subItems&&y.subItems.some(B=>e.pathname===B.path)&&b.add(y.id)}),o(y=>y.size===b.size&&[...y].every(B=>b.has(B))?y:b)},[e.pathname,g]);const p=b=>{const y=new Set(i);y.has(b.id)?y.delete(b.id):(y.add(b.id),b.subItems&&b.subItems.length>0&&!b.subItems.some(w=>w.path===e.pathname)&&s(b.subItems[0].path)),o(y)},v=()=>{n()};return t.jsxs("div",{className:`${a?"w-[80px]":"w-64"} bg-white border-r border-slate-200/50 flex flex-col transition-width duration-200 dark:bg-slate-900 dark:border-slate-700`,children:[t.jsx("div",{className:"h-[84px] flex items-center px-4 space-x-3 border-b-4 border-[#FDA811]",children:t.jsxs(Oy,{to:"/admin/dashboard",className:"flex items-center space-x-3",children:[t.jsx("img",{src:"/GSM_logo.png",alt:"Logo",className:`object-cover rounded-xl transition-all duration-200 ${a?"w-10 h-10":"w-13 h-13"}`}),!a&&t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold dark:text-white",children:"GoServePH"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Admin Dashboard"}),t.jsxs("p",{className:"text-xs text-blue-600 font-medium",children:[m==="super"?"Super Admin":m==="business"?"Business ":m==="building"?"Building ":m==="transport"?"Transport ":m==="barangay"?"Barangay ":m.charAt(0).toUpperCase()+m.slice(1)," Department"]})]})]})}),!a&&t.jsxs("div",{className:"px-4 mt-2",children:[t.jsxs("div",{onClick:()=>c(!l),className:`flex items-center justify-between cursor-pointer px-4 py-3 border rounded-xl border-slate-300 dark:border-slate-700 transition-colors duration-200 ${l?"bg-[#4A90E2] text-white":"bg-white text-slate-700 dark:text-slate-200"}`,children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(gr,{className:`w-6 h-6 transition-colors duration-200 ${l?"text-white":"text-slate-600 dark:text-slate-400"}`}),t.jsx("div",{className:"ml-2",children:t.jsxs("p",{className:"text-sm font-medium",children:["Hi, ",u]})})]}),t.jsx(fd,{className:`w-4 h-4 transition-transform duration-200 ${l?"rotate-180 text-white":"text-slate-500"}`})]}),l&&t.jsxs("button",{onClick:v,className:"w-full flex items-center p-2 rounded-xl mt-2 transition-all duration-200 text-slate-600 dark:text-slate-400 hover:bg-red-500 hover:text-white dark:hover:bg-red-500 dark:hover:text-white",children:[t.jsx(lw,{className:"w-5 h-5"}),t.jsx("span",{className:"ml-2 text-sm font-medium",children:"Logout"})]})]}),t.jsx("hr",{className:"border-t border-slate-300 dark:border-slate-700 mt-2"}),t.jsx("nav",{className:"flex-1 p-2 space-y-2 overflow-y-auto",children:g.length===0?t.jsxs("div",{className:"p-4 text-center",children:[t.jsx("p",{className:"text-sm text-slate-500",children:"No menu items available"}),t.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Department: ",m||"Not set",t.jsx("br",{}),"Contact super admin for access"]})]}):g.map(b=>{const y=b.path===e.pathname||b.subItems&&b.subItems.some(w=>w.path===e.pathname);return t.jsx("div",{children:b.subItems?t.jsxs(t.Fragment,{children:[t.jsxs("button",{className:`w-full flex justify-between items-center p-2 rounded-xl transition-all duration-200 ${y?"bg-[#4CAF50] text-white font-semibold":"text-slate-600 dark:text-slate-400 hover:bg-[#4CAF50] hover:text-white dark:hover:bg-[#4CAF50] dark:hover:text-white"}`,onClick:()=>p(b),children:[t.jsxs("div",{className:"flex items-center justify-center",children:[b.icon&&t.jsx(b.icon,{className:`transition-all duration-200 ${a?"w-5 h-5":"w-6 h-6"}`}),!a&&t.jsx("span",{className:"ml-2 text-sm font-medium",children:b.label})]}),!a&&b.subItems&&t.jsx(fd,{className:`w-4 h-4 text-slate-500 transition-transform duration-200 ${i.has(b.id)?"rotate-180":""}`})]}),!a&&i.has(b.id)&&t.jsx("div",{className:"ml-8 mt-2 space-y-1 border-l border-slate-300",children:b.subItems.map(w=>t.jsx(Oy,{to:w.path,className:({isActive:B})=>`block w-full ml-2 text-sm text-left p-2 ${B?"border-l-4 border-[#FDA811] text-[#4CAF50] font-semibold bg-transparent":"text-slate-700 dark:text-slate-500 hover:bg-slate-200 dark:hover:text-slate-600 dark:hover:bg-slate-100"}`,children:w.label},w.id))})]}):t.jsx(Oy,{to:b.path,className:({isActive:w})=>`w-full flex items-center p-2 rounded-xl transition-all duration-200 ${w?"bg-[#4CAF50] text-white font-semibold":"text-slate-600 dark:text-slate-400 hover:bg-[#4CAF50] hover:text-white dark:hover:bg-[#4CAF50] dark:hover:text-white"}`,children:t.jsxs("div",{className:"flex items-center justify-center",children:[b.icon&&t.jsx(b.icon,{className:`transition-all duration-200 ${a?"w-5 h-5":"w-6 h-6"}`}),!a&&t.jsx("span",{className:"ml-2 text-sm font-medium",children:b.label})]})})},b.id)})})]})}const qQ=()=>{const[a,e]=C.useState(!1),s=Ti();H6();function r(){for(const n of Uy){if(n.path===s.pathname)return[n.label];if(n.subItems){const i=n.subItems.find(o=>o.path===s.pathname);if(i)return[n.label,i.label]}}return["Dashboard"]}return t.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-800 dark:via-slate-800 dark:to-slate-800",children:[t.jsx($Q,{collapsed:a}),t.jsxs("div",{className:"flex-1 flex flex-col",children:[t.jsx(zQ,{sidebarCollapsed:a,onToggleSidebar:()=>e(!a),breadcrumb:r()}),t.jsx("main",{className:"flex-1 overflow-auto p-4",children:t.jsx(N6,{})})]})]})},Hn=({children:a,requiredRole:e=null,allowedDepartments:s=[]})=>{const r=Ti(),[n,i]=C.useState(!0),[o,l]=C.useState(!1),[c,u]=C.useState("/login");return C.useEffect(()=>{const m=()=>{const g=localStorage.getItem("auth_token"),p=localStorage.getItem("goserveph_role"),v=localStorage.getItem("goserveph_department");if(console.log(" [ProtectedRoute] Checking auth:",{path:r.pathname,hasToken:!!g,userRole:p,userDepartment:v,requiredRole:e,allowedDepartments:s}),!g){console.log(" NO TOKEN - Redirecting to login"),u("/login"),l(!0),i(!1);return}if(e&&p!==e){console.log(` ROLE MISMATCH: ${p} trying to access ${e}`),u(p==="admin"?"/admin/dashboard":p==="user"?"/user/dashboard":"/login"),l(!0),i(!1);return}if(p==="admin"&&s.length>0&&(console.log(` Checking department access: ${v} in ${JSON.stringify(s)}`),!v||!s.includes(v))){console.log(` DEPARTMENT ACCESS DENIED: ${v} not in allowed departments`),u("/admin/dashboard"),l(!0),i(!1);return}console.log(" ACCESS GRANTED for:",{role:p,department:v}),i(!1)},A=setTimeout(()=>{m()},100);return()=>clearTimeout(A)},[r.pathname,e,s]),n?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Checking authentication..."})]})}):o?(console.log(` [ProtectedRoute] Redirecting to: ${c}`),t.jsx(bh,{to:c,replace:!0,state:{from:r.pathname}})):(console.log(" [ProtectedRoute] Rendering protected content"),a)},Ns={primary:"#4CAF50",secondary:"#4A90E2",accent:"#FDA811",background:"#FBFBFB",success:"#10B981",warning:"#F59E0B",error:"#EF4444",gray:{100:"#F3F4F6",200:"#E5E7EB",400:"#9CA3AF",500:"#6B7280",600:"#4B5563",700:"#374151",800:"#1F2937"}},Ig=[{id:1,name:"E-PERMIT TRACKER",description:"Track and monitor your submitted applications with real-time updates and notifications.",shortDescription:"Track your permit applications in real-time",icon:t.jsx(sa,{className:"w-10 h-10"}),path:"/user/permittracker",features:[{text:"Real-time status tracking",icon:t.jsx(nA,{size:16})},{text:"Document history",icon:t.jsx(Kt,{size:16})},{text:"Downloadable Unofficial Digital Copy",icon:t.jsx(jr,{size:16})}],stats:{processingTime:"24-48 hours",successRate:"98%",averageTime:"1.5 days"},color:Ns.secondary,bgColor:`${Ns.secondary}15`,hoverColor:"#3A7BC8",hoverBgColor:"#EBF3FF",activeBgColor:"#D8E7FF",popular:!0},{id:2,name:"BUSINESS PERMIT APPLICATION",description:"Complete digital processing for new business permits and renewals with integrated payment system.",shortDescription:"Start or renew your business operations",icon:t.jsx(Ba,{className:"w-10 h-10"}),path:"/user/business/type",features:[{text:"New business registration",icon:t.jsx(Kt,{size:16})},{text:"Annual renewal processing",icon:t.jsx(dl,{size:16})},{text:"Digital tax payment",icon:t.jsx(Pr,{size:16})},{text:"Downloadable Unofficial Digital Copy",icon:t.jsx(Us,{size:16})}],stats:{processingTime:"3-5 business days",successRate:"95%",averageTime:"3 days"},color:Ns.primary,bgColor:`${Ns.primary}15`,hoverColor:"#3D8B40",hoverBgColor:"#F0F9F0",activeBgColor:"#E1F3E1",popular:!0},{id:3,name:"BUILDING & CONSTRUCTION PERMIT",description:"Comprehensive building permit system with architectural review and safety compliance checks.",shortDescription:"Construction permits and safety compliance",icon:t.jsx(ll,{className:"w-10 h-10"}),path:"/user/building/type",features:[{text:"Building plan review",icon:t.jsx(Kt,{size:16})},{text:"Professional Registration",icon:t.jsx(Pr,{size:16})},{text:"Inspection scheduling",icon:t.jsx(bn,{size:16})},{text:"Downloadable Unofficial Digital Copy",icon:t.jsx(Us,{size:16})}],stats:{processingTime:"7-14 days",successRate:"92%",averageTime:"10 days"},color:"#F59E0B",bgColor:"#FEF3C715",hoverColor:"#D97706",hoverBgColor:"#FFF7E6",activeBgColor:"#FFEECC",popular:!1},{id:4,name:"FRANCHISE AND TRANSPORT PERMIT",description:"Streamlined franchise application for public utility vehicles with route management.",shortDescription:"Public transport franchise management",icon:t.jsx(Fp,{className:"w-10 h-10"}),path:"/user/franchise/type",features:[{text:"New franchise application",icon:t.jsx(Kt,{size:16})},{text:"Route management",icon:t.jsx(Ec,{size:16})},{text:"MTOP Applications",icon:t.jsx(a5,{size:16})},{text:"Renewal processing",icon:t.jsx(Ya,{size:16})}],stats:{processingTime:"5-7 days",successRate:"96%",averageTime:"5 days"},color:"#8B5CF6",bgColor:"#F5F3FF15",hoverColor:"#7C3AED",hoverBgColor:"#F5F0FF",activeBgColor:"#ECE5FF",popular:!1},{id:5,name:"BARANGAY CLEARANCE & CERTIFICATES",description:"Quick processing of barangay certifications including clearances and residency verification.",shortDescription:"Local barangay certificates and clearances",icon:t.jsx(Pf,{className:"w-10 h-10"}),path:"/user/barangay/new",features:[{text:"Clearance application",icon:t.jsx(Kt,{size:16})},{text:"Residency verification",icon:t.jsx(rn,{size:16})},{text:"Business endorsement",icon:t.jsx(Ba,{size:16})},{text:"Certificate issuance",icon:t.jsx(Us,{size:16})}],stats:{processingTime:"1-2 days",successRate:"99%",averageTime:"1 day"},color:Ns.secondary,bgColor:`${Ns.secondary}15`,hoverColor:"#3A7BC8",hoverBgColor:"#EBF3FF",activeBgColor:"#D8E7FF",popular:!0}],GQ=[{icon:t.jsx(Ur,{size:20}),name:"Building Permits",color:Ns.warning},{icon:t.jsx(Ba,{size:20}),name:"Business Permits",color:Ns.primary},{icon:t.jsx(Ad,{size:20}),name:"Transport Franchise",color:"#8B5CF6"},{icon:t.jsx(rn,{size:20}),name:"Barangay Clearances",color:Ns.secondary},{icon:t.jsx(Fj,{size:20}),name:"E-Permit Tracker",color:Ns.success},{icon:t.jsx(_h,{size:20}),name:"Professional License",color:Ns.error}],WQ=[{icon:t.jsx(nA,{size:20}),title:"Fast Processing",description:"70% faster than traditional methods",color:Ns.primary},{icon:t.jsx(Tj,{size:20}),title:"Online Access",description:"Access anytime, anywhere",color:Ns.secondary},{icon:t.jsx(L6,{size:20}),title:"Secure Platform",description:"Military-grade encryption",color:Ns.success},{icon:t.jsx(D6,{size:20}),title:"Real-time Updates",description:"Instant notifications",color:Ns.warning}];function uB(){const[a,e]=C.useState(Ig),[s,r]=C.useState(""),[n,i]=C.useState(null),[o,l]=C.useState(!1),[c,u]=C.useState(null),[m,A]=C.useState(!1),[g,p]=C.useState(null),v=ka();C.useEffect(()=>{if(!localStorage.getItem("hasSeenWelcomeModal")){const T=setTimeout(()=>{l(!0),localStorage.setItem("hasSeenWelcomeModal","true")},500);return()=>clearTimeout(T)}},[]);const b=()=>{l(!1)},y=S=>{const T=S.target.value.toLowerCase();r(T),e(Ig.filter(M=>M.name.toLowerCase().includes(T)||M.description.toLowerCase().includes(T)||M.shortDescription.toLowerCase().includes(T))),T&&i(null)},w=S=>{m||n===S||(g&&(clearTimeout(g),p(null)),A(!0),i(S),u(S),setTimeout(()=>{A(!1)},300))},B=()=>{if(m||!n)return;A(!0);const S=setTimeout(()=>{i(null),u(null),A(!1),p(null)},300);p(S)},j=S=>{const T=Ig.find(M=>M.id===S);T&&v(T.path)},E=(S,T)=>{T.stopPropagation(),v(S.path)};return C.useEffect(()=>()=>{g&&clearTimeout(g)},[g]),t.jsxs("div",{className:"min-h-screen flex flex-col",style:{background:Ns.background},children:[o&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 backdrop-blur-md",style:{background:"rgba(76, 175, 80, 0.08)"},onClick:b}),t.jsxs("div",{className:"relative rounded-2xl shadow-2xl p-8 max-w-4xl w-full animate-slideInUp max-h-[90vh] overflow-y-auto border",style:{background:"white",borderColor:`${Ns.primary}30`,borderWidth:"2px"},children:[t.jsx("button",{onClick:b,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 transition-all duration-300 z-10",style:{color:Ns.gray[600]},children:t.jsx(ls,{size:24})}),t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center p-4 rounded-2xl mb-6",style:{background:`linear-gradient(135deg, ${Ns.primary}15, ${Ns.secondary}15)`,border:`2px solid ${Ns.primary}20`},children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center shadow-lg",style:{background:`linear-gradient(135deg, ${Ns.primary}, ${Ns.secondary})`},children:t.jsx(ll,{size:32,className:"text-white"})}),t.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 rounded-full flex items-center justify-center shadow-md",style:{background:Ns.success},children:t.jsx(Us,{size:16,className:"text-white"})})]})}),t.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-3 bg-gradient-to-r",style:{background:`linear-gradient(135deg, ${Ns.primary}, ${Ns.secondary})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Permit & Licensing Management System"}),t.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Your comprehensive digital platform for all government permits and licenses"})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 p-4 rounded-xl border border-green-100",children:[t.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:Ns.primary},children:"5,000+"}),t.jsx("div",{className:"text-sm text-gray-600",children:"Monthly Users"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 p-4 rounded-xl border border-blue-100",children:[t.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:Ns.secondary},children:"98.5%"}),t.jsx("div",{className:"text-sm text-gray-600",children:"Success Rate"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-green-50 p-4 rounded-xl border border-yellow-100",children:[t.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:Ns.warning},children:"70%"}),t.jsx("div",{className:"text-sm text-gray-600",children:"Faster Processing"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 p-4 rounded-xl border border-purple-100",children:[t.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:"#8B5CF6"},children:"24/7"}),t.jsx("div",{className:"text-sm text-gray-600",children:"Online Access"})]})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-xl font-bold mb-4 text-center",style:{color:Ns.gray[800]},children:"Available Services"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:GQ.map((S,T)=>t.jsxs("div",{className:"flex flex-col items-center p-4 rounded-xl transition-all duration-300 hover:shadow-md hover:-translate-y-1 cursor-default group",style:{background:`${S.color}10`,border:`1px solid ${S.color}20`},children:[t.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center mb-3 transition-all duration-300 group-hover:scale-110",style:{background:S.color,color:"white"},children:S.icon}),t.jsx("span",{className:"text-sm font-medium text-center",style:{color:Ns.gray[700]},children:S.name})]},T))})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-xl font-bold mb-4 text-center",style:{color:Ns.gray[800]},children:"Why Choose PLMS?"}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:WQ.map((S,T)=>t.jsxs("div",{className:"flex items-start p-4 rounded-xl transition-all duration-300 hover:shadow-md",style:{background:`${S.color}08`,border:`1px solid ${S.color}20`},children:[t.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mr-3 flex-shrink-0",style:{background:S.color,color:"white"},children:S.icon}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold mb-1",style:{color:Ns.gray[800]},children:S.title}),t.jsx("p",{className:"text-sm text-gray-600",children:S.description})]})]},T))})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-xl font-bold mb-4 text-center",style:{color:Ns.gray[800]},children:"How PLMS Works"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 h-full w-0.5 hidden md:block",style:{background:`${Ns.primary}30`}}),t.jsx("div",{className:"grid md:grid-cols-4 gap-6",children:[{step:"1",title:"Select Service",desc:"Choose from available permits",icon:t.jsx(pQ,{size:20})},{step:"2",title:"Submit Online",desc:"Upload required documents",icon:t.jsx(Kt,{size:20})},{step:"3",title:"Track Progress",desc:"Real-time application tracking",icon:t.jsx(sa,{size:20})},{step:"4",title:"Receive Permit",desc:"Download digital copy instantly",icon:t.jsx(Us,{size:20})}].map((S,T)=>t.jsxs("div",{className:"relative text-center",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center shadow-md",style:{background:`linear-gradient(135deg, ${Ns.primary}, ${Ns.secondary})`,color:"white"},children:S.icon}),t.jsx("div",{className:"text-sm font-bold mb-1",style:{color:Ns.gray[800]},children:S.title}),t.jsx("div",{className:"text-xs text-gray-600",children:S.desc})]},T))})]})]}),t.jsxs("div",{className:"p-6 rounded-xl mb-6",style:{background:`${Ns.primary}08`,border:`1px solid ${Ns.primary}20`},children:[t.jsx("h3",{className:"text-lg font-bold mb-3 text-center",style:{color:Ns.primary},children:"Need Help?"}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"flex items-center justify-center p-3 rounded-lg bg-white",children:[t.jsx(cw,{size:16,className:"mr-2",style:{color:Ns.secondary}}),t.jsx("span",{className:"text-sm",children:"support@plms.gov.ph"})]}),t.jsxs("div",{className:"flex items-center justify-center p-3 rounded-lg bg-white",children:[t.jsx(r5,{size:16,className:"mr-2",style:{color:Ns.primary}}),t.jsx("span",{className:"text-sm",children:"(02) 1234-5678"})]}),t.jsxs("div",{className:"flex items-center justify-center p-3 rounded-lg bg-white",children:[t.jsx(jr,{size:16,className:"mr-2",style:{color:Ns.warning}}),t.jsx("span",{className:"text-sm",children:"Mon-Fri, 8AM-5PM"})]})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[t.jsx("button",{onClick:b,className:"px-6 py-3 rounded-lg font-semibold transition-all duration-300 hover:shadow-md",style:{background:Ns.background,color:Ns.primary,border:`2px solid ${Ns.primary}`},children:"Explore Services"}),t.jsx("button",{onClick:b,className:"px-6 py-3 rounded-lg font-semibold text-white transition-all duration-300 hover:shadow-md hover:-translate-y-0.5",style:{background:`linear-gradient(135deg, ${Ns.primary}, ${Ns.secondary})`},children:"Get Started Now"})]}),t.jsx("div",{className:"text-center mt-6 pt-4 border-t",style:{borderColor:`${Ns.gray[200]}`},children:t.jsx("p",{className:"text-sm text-gray-500",children:"PLMS - Making government services accessible, efficient, and transparent"})})]})]}),t.jsxs("main",{className:"flex-1 px-4 md:px-8 lg:px-12 py-8",children:[t.jsxs("div",{className:"max-w-5xl mx-auto mb-12",children:[t.jsxs("div",{className:"text-center mb-10",children:[t.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",style:{color:Ns.primary},children:"PERMIT AND LICENSING MANAGEMENT"}),t.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Streamlined digital services for businesses and individuals. Apply, track, and manage all your permits in one place."})]}),t.jsx("div",{className:"mb-12",children:t.jsxs("div",{className:"relative max-w-xl mx-auto",children:[t.jsx(sa,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),t.jsx("input",{type:"text",value:s,onChange:y,placeholder:"Search for services...",className:"w-full pl-10 pr-4 py-3 text-sm rounded-xl border-2 shadow-sm focus:outline-none focus:shadow-md transition-all duration-700",style:{borderColor:Ns.gray[200],background:"white"}}),s&&t.jsx("button",{onClick:()=>{r(""),e(Ig)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-300",children:t.jsx(ls,{size:18})})]})})]}),t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("div",{className:"space-y-5",children:a.map(S=>{const T=c===S.id,M=n===S.id;return t.jsxs("div",{className:"service-card relative overflow-hidden transition-all duration-500 rounded-xl shadow-lg border cursor-pointer group",onMouseEnter:()=>w(S.id),onMouseLeave:B,onClick:()=>j(S.id),style:{background:M||T?S.hoverBgColor:"white",borderColor:M||T?S.hoverColor:Ns.gray[200],borderWidth:"2px",borderStyle:"solid",transform:M||T?"translateY(-2px)":"translateY(0)",boxShadow:M||T?`0 15px 30px -10px ${S.color}30, 0 8px 15px -8px ${S.color}20`:"0 3px 5px -1px rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.06)",transition:"all 500ms cubic-bezier(0.4, 0, 0.2, 1)",height:M?"auto":"140px",minHeight:"140px"},children:[t.jsx("div",{className:"p-5 h-full flex items-center",children:t.jsxs("div",{className:"flex items-center w-full",children:[t.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center shadow-sm transition-all duration-500 mr-4",style:{background:M||T?S.hoverColor:`${S.color}15`,color:M||T?"white":S.color,transform:M||T?"scale(1.05)":"scale(1)",transition:"all 500ms cubic-bezier(0.4, 0, 0.2, 1)"},children:qt.cloneElement(S.icon,{className:"w-8 h-8"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("h3",{className:"text-lg font-bold transition-colors duration-500 truncate",style:{color:M||T?S.hoverColor:Ns.gray[800]},children:S.name}),S.popular&&t.jsx("span",{className:"px-1.5 py-0.5 text-xs font-semibold rounded-full flex-shrink-0 transition-all duration-500",style:{background:M||T?`${S.hoverColor}30`:`${Ns.accent}15`,color:M||T?S.hoverColor:Ns.accent,transition:"all 500ms cubic-bezier(0.4, 0, 0.2, 1)"},children:"Popular"})]}),t.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2 transition-colors duration-500",children:S.shortDescription}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("div",{className:"flex items-center text-xs transition-all duration-500",children:[t.jsx(jr,{size:12,className:"mr-1 transition-colors duration-500",style:{color:M||T?S.hoverColor:Ns.gray[500]}}),t.jsx("span",{className:"font-medium transition-colors duration-500",style:{color:M||T?S.hoverColor:Ns.gray[700]},children:S.stats.processingTime})]}),t.jsxs("div",{className:"flex items-center text-xs transition-all duration-500",children:[t.jsx(dl,{size:12,className:"mr-1 transition-colors duration-500",style:{color:M||T?S.hoverColor:Ns.gray[500]}}),t.jsxs("span",{className:"font-medium transition-colors duration-500",style:{color:M||T?S.hoverColor:Ns.gray[700]},children:[S.stats.successRate," success"]})]})]})]}),t.jsx("div",{className:"flex-shrink-0 flex items-center ml-3 opacity-70 transition-all duration-500",children:t.jsx(pA,{size:20,className:`transition-transform duration-500 ${M?"rotate-90":""}`,style:{color:M||T?S.hoverColor:Ns.gray[400],transform:M?"rotate(90deg)":"rotate(0deg)"}})})]})}),M&&t.jsxs("div",{className:"border-t px-5 py-4 animate-verySlowFadeIn",style:{borderColor:`${S.color}20`,background:`${S.color}03`},children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"text-base font-semibold mb-3 flex items-center transition-colors duration-500",style:{color:S.hoverColor},children:[t.jsx(nA,{size:16,className:"mr-2"}),"Key Features"]}),t.jsx("div",{className:"space-y-2",children:S.features.map((D,P)=>t.jsxs("div",{className:"flex items-start transition-all duration-500 hover:translate-x-1",style:{transition:"all 500ms cubic-bezier(0.4, 0, 0.2, 1)"},children:[t.jsx("div",{className:"mr-2 mt-0.5 transition-colors duration-500",style:{color:S.hoverColor},children:qt.cloneElement(D.icon,{size:14})}),t.jsx("span",{className:"text-sm text-gray-700",children:D.text})]},P))})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-base font-semibold mb-3 transition-colors duration-500",style:{color:S.hoverColor},children:"Service Details"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{children:t.jsx("p",{className:"text-sm text-gray-700 mb-2",children:S.description})}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[t.jsx("span",{className:"text-gray-600",children:"Processing Speed"}),t.jsxs("span",{className:"font-medium",style:{color:S.hoverColor},children:[S.stats.averageTime," average"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 overflow-hidden",children:t.jsx("div",{className:"h-1.5 rounded-full transition-all duration-500",style:{width:"85%",background:`linear-gradient(90deg, ${S.color}, ${S.hoverColor})`,transition:"all 500ms cubic-bezier(0.4, 0, 0.2, 1)"}})})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("div",{className:"flex-1 p-2 rounded-lg text-center transition-all duration-500",style:{background:`${S.color}10`,border:`1px solid ${S.color}20`,transition:"all 500ms cubic-bezier(0.4, 0, 0.2, 1)"},children:[t.jsx("div",{className:"text-xs text-gray-600",children:"Required Docs"}),t.jsx("div",{className:"text-base font-bold mt-0.5",style:{color:S.hoverColor},children:"3-5"})]}),t.jsxs("div",{className:"flex-1 p-2 rounded-lg text-center transition-all duration-500",style:{background:`${S.color}10`,border:`1px solid ${S.color}20`,transition:"all 500ms cubic-bezier(0.4, 0, 0.2, 1)"},children:[t.jsx("div",{className:"text-xs text-gray-600",children:"Online Payment"}),t.jsx("div",{className:"text-base font-bold mt-0.5",style:{color:S.hoverColor},children:"Yes"})]})]})]})]})]})]}),t.jsx("div",{className:"mt-6 pt-4 border-t flex justify-end items-center",style:{borderColor:`${S.color}20`},children:t.jsxs("button",{onClick:D=>E(S,D),className:"flex items-center px-4 py-2.5 rounded-lg font-semibold text-white shadow-md transition-all duration-500 hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0 text-sm",style:{background:`linear-gradient(135deg, ${S.color}, ${S.hoverColor})`,transition:"all 500ms cubic-bezier(0.4, 0, 0.2, 1)"},children:[t.jsxs("span",{children:["Proceed to ",S.name]}),t.jsx(sA,{size:16,className:"ml-1.5"})]})})]})]},S.id)})}),a.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(sa,{size:40,className:"mx-auto mb-3",style:{color:Ns.gray[400]}}),t.jsx("h3",{className:"text-lg font-semibold mb-1.5",style:{color:Ns.gray[700]},children:"No services found"}),t.jsxs("p",{className:"text-gray-600 max-w-md mx-auto text-sm",children:[`We couldn't find any services matching "`,s,'". Try searching for something else.']}),t.jsx("button",{onClick:()=>{r(""),e(Ig)},className:"mt-3 px-3 py-1.5 rounded-lg font-medium transition-all duration-700 hover:bg-gray-200 hover:-translate-y-0.5 text-sm",style:{background:Ns.gray[100],color:Ns.gray[700]},children:"Clear Search"})]})]}),t.jsxs("div",{className:"max-w-4xl mx-auto mt-12",children:[t.jsx("h2",{className:"text-xl font-bold text-center mb-8",style:{color:Ns.primary},children:"Why Choose Our Platform"}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 text-center transition-all duration-700 hover:shadow-md hover:-translate-y-1 hover:border-blue-100 cursor-default group",children:[t.jsx("div",{className:"w-10 h-10 mx-auto mb-3 rounded-full flex items-center justify-center transition-all duration-700 group-hover:scale-105",style:{background:`${Ns.primary}15`,color:Ns.primary},children:t.jsx(Pr,{size:20})}),t.jsx("h3",{className:"text-base font-bold mb-2 transition-colors duration-700 group-hover:text-blue-600",children:"Secure & Encrypted"}),t.jsx("p",{className:"text-gray-600 text-xs group-hover:text-gray-800",children:"Military-grade encryption protects all your documents and personal information."})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 text-center transition-all duration-700 hover:shadow-md hover:-translate-y-1 hover:border-green-100 cursor-default group",children:[t.jsx("div",{className:"w-10 h-10 mx-auto mb-3 rounded-full flex items-center justify-center transition-all duration-700 group-hover:scale-105",style:{background:`${Ns.secondary}15`,color:Ns.secondary},children:t.jsx(nA,{size:20})}),t.jsx("h3",{className:"text-base font-bold mb-2 transition-colors duration-700 group-hover:text-green-600",children:"Fast Processing"}),t.jsx("p",{className:"text-gray-600 text-xs group-hover:text-gray-800",children:"Automated workflows reduce processing time by up to 70% compared to manual systems."})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 text-center transition-all duration-700 hover:shadow-md hover:-translate-y-1 hover:border-orange-100 cursor-default group",children:[t.jsx("div",{className:"w-10 h-10 mx-auto mb-3 rounded-full flex items-center justify-center transition-all duration-700 group-hover:scale-105",style:{background:`${Ns.accent}15`,color:Ns.accent},children:t.jsx(yd,{size:20})}),t.jsx("h3",{className:"text-base font-bold mb-2 transition-colors duration-700 group-hover:text-orange-600",children:"24/7 Support"}),t.jsx("p",{className:"text-gray-600 text-xs group-hover:text-gray-800",children:"Get instant help from our support team via chat, email, or phone anytime."})]})]})]})]}),t.jsx("style",{jsx:!0,children:`
        @keyframes fadeIn {
          from { 
            opacity: 0; 
            transform: translateY(-10px); 
          }
          to { 
            opacity: 1; 
            transform: translateY(0); 
          }
        }
        
        @keyframes slideInUp {
          from { 
            opacity: 0; 
            transform: translateY(30px); 
          }
          to { 
            opacity: 1; 
            transform: translateY(0); 
          }
        }
        
        @keyframes verySlowFadeIn {
          0% { 
            opacity: 0; 
            transform: translateY(-5px); 
          }
          20% {
            opacity: 0;
            transform: translateY(-4px);
          }
          100% { 
            opacity: 1; 
            transform: translateY(0); 
          }
        }
        
        .animate-fadeIn {
          animation: fadeIn 0.5s ease-out;
        }
        
        .animate-slideInUp {
          animation: slideInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .animate-verySlowFadeIn {
          animation: verySlowFadeIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Line clamping for better text control */
        .line-clamp-2 {
          display: -webkit-box;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical;
          overflow: hidden;
        }
        
        /* Truncate long text */
        .truncate {
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }
        
        /* Smooth transitions */
        .transition-all {
          transition-property: all;
          transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        }
      `})]})}function YQ(){const[a,e]=C.useState(new Date),[s,r]=C.useState(!0),[n,i]=C.useState(null),o=ka();C.useEffect(()=>{const A=setInterval(()=>{e(new Date)},1e3);return()=>clearInterval(A)},[]),C.useEffect(()=>{let A=window.scrollY;const g=()=>{const p=window.scrollY,v=p>A?"down":"up";v!=="down"&&p>50?r(!0):v==="down"&&p>50&&r(!1),A=p>0?p:0};return window.addEventListener("scroll",g),()=>window.removeEventListener("scroll",g)},[]);const l=()=>{o("/login")},c=[{id:1,title:"Business Permit Application",description:"Apply, renew, and manage your business permits online with streamlined processing.",icon:t.jsx(Kt,{className:"w-6 h-6"}),gradient:"from-blue-500 to-blue-600",bgColor:"bg-gradient-to-br from-blue-50 to-blue-100",borderColor:"border-blue-300",iconBg:"bg-blue-500",textColor:"text-blue-600",features:["New Business","Renewal","Amendments","Payment"],stats:"Processed in 3-5 days",statsIcon:t.jsx(dl,{className:"w-4 h-4"})},{id:2,title:"Transport & Franchise Permit",description:"Secure transport permits, vehicle registration, and franchise applications digitally.",icon:t.jsx(Ad,{className:"w-6 h-6"}),gradient:"from-green-500 to-green-600",bgColor:"bg-gradient-to-br from-green-50 to-green-100",borderColor:"border-green-300",iconBg:"bg-green-500",textColor:"text-green-600",features:["Registration","Franchise","Renewal"],stats:"24/7 Online Application",statsIcon:t.jsx(Tj,{className:"w-4 h-4"})},{id:3,title:"Building & Construction Permit",description:"Submit building plans, get construction permits, and schedule inspections online.",icon:t.jsx(Ur,{className:"w-6 h-6"}),gradient:"from-orange-500 to-orange-600",bgColor:"bg-gradient-to-br from-orange-50 to-orange-100",borderColor:"border-orange-300",iconBg:"bg-orange-500",textColor:"text-orange-600",features:["Building Plans","Permits","Clearances"],stats:"Digital Plan Submission",statsIcon:t.jsx(nA,{className:"w-4 h-4"})},{id:4,title:"Barangay Permit & Clearance",description:"Obtain barangay clearance, community permits, and local certifications quickly.",icon:t.jsx(rn,{className:"w-6 h-6"}),gradient:"from-red-500 to-red-600",bgColor:"bg-gradient-to-br from-red-50 to-red-100",borderColor:"border-red-300",iconBg:"bg-red-500",textColor:"text-red-600",features:["Clearance","Certifications","Community","Local"],stats:"Issued in 24 hours",statsIcon:t.jsx(jr,{className:"w-4 h-4"})}],u=[{icon:t.jsx(L6,{className:"w-5 h-5"}),title:"Secure & Encrypted",description:"Bank-level security protection",gradient:"from-yellow-400 to-orange-500",iconBg:"bg-gradient-to-br from-yellow-400 to-orange-500"},{icon:t.jsx(Tj,{className:"w-5 h-5"}),title:"24/7 Access",description:"Apply anytime, anywhere",gradient:"from-blue-400 to-blue-600",iconBg:"bg-gradient-to-br from-blue-400 to-blue-600"},{icon:t.jsx(nA,{className:"w-5 h-5"}),title:"Fast Processing",description:"Quick turnaround times",gradient:"from-green-400 to-green-600",iconBg:"bg-gradient-to-br from-green-400 to-green-600"}],m=[{value:"50K+",label:"Active Users",icon:t.jsx(yd,{className:"w-5 h-5"})},{value:"100K+",label:"Applications",icon:t.jsx(Kt,{className:"w-5 h-5"})},{value:"99%",label:"Satisfaction",icon:t.jsx(_h,{className:"w-5 h-5"})}];return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-green-50 relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-100/30 rounded-full blur-3xl animate-pulse"}),t.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-green-100/30 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),t.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-indigo-100/30 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),t.jsx("header",{className:`sticky top-0 z-50 bg-white shadow-sm border-b-4 border-[#FDA811] transition-transform duration-300 ${s?"translate-y-0":"-translate-y-full"}`,children:t.jsxs("div",{className:"px-[50px] py-3 flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 flex items-center justify-center",children:t.jsx("img",{src:"/logoplms.png",alt:"PLMS Logo",className:"w-12 h-12 object-contain"})}),t.jsxs("div",{className:"flex flex-col leading-tight",children:[t.jsxs("span",{className:"text-xl font-bold",children:[t.jsx("span",{className:"text-blue-700",children:"Go"}),t.jsx("span",{className:"text-green-600",children:"Serve"}),t.jsx("span",{className:"text-blue-700",children:"PH"})]}),t.jsx("span",{className:"text-sm text-gray-600",children:"Serbisyong Publiko, Abot-Kamay Mo."})]})]}),t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("div",{className:"hidden md:block text-right text-sm text-gray-800 mr-3",children:[t.jsx("div",{className:"font-semibold",children:a.toLocaleTimeString()}),t.jsx("div",{children:a.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})})]})}),t.jsx("main",{className:"relative z-10 px-6 md:px-12 lg:px-[50px] py-8 md:py-10 lg:py-12",children:t.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 lg:gap-12 items-start",children:[t.jsxs("div",{className:"text-center lg:text-left space-y-6 mt-6",children:[t.jsxs("div",{className:"flex flex-col items-center lg:items-start gap-4",children:[t.jsx("img",{src:"/logoplms.png",alt:"PLMS Logo",className:"w-24 h-24 object-contain drop-shadow-lg"}),t.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-100 backdrop-blur-sm rounded-full border border-blue-300",children:[t.jsx(_h,{className:"w-4 h-4 text-blue-600"}),t.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Trusted Government Service Platform"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-extrabold leading-tight text-gray-800 drop-shadow-sm",children:["Permit & Licensing Made",t.jsx("span",{className:"block mt-2 bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:"Simple & Fast"})]}),t.jsx("p",{className:"text-base md:text-lg text-gray-700 leading-relaxed font-medium max-w-2xl",children:"Transform your permit applications with our secure digital platform. Government services are now faster, simpler, and accessible at your fingertips."})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:u.map((A,g)=>t.jsxs("div",{className:"bg-white backdrop-blur-md border border-gray-200 rounded-xl p-3 hover:bg-gray-50 transition-all duration-300 hover:scale-105 hover:shadow-xl group",children:[t.jsx("div",{className:`w-10 h-10 ${A.iconBg} rounded-lg flex items-center justify-center mb-2 group-hover:scale-110 transition-transform`,children:t.jsx("div",{className:"text-white",children:A.icon})}),t.jsx("h3",{className:"font-bold text-gray-800 text-sm mb-1",children:A.title}),t.jsx("p",{className:"text-xs text-gray-600",children:A.description})]},g))}),t.jsx("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:t.jsxs("button",{onClick:l,className:"group px-6 py-3 bg-gradient-to-r from-[#FDA811] to-[#ff8c00] text-white rounded-xl font-bold text-sm hover:shadow-2xl transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"}),t.jsx(aA,{className:"w-5 h-5 relative z-10"}),t.jsx("span",{className:"relative z-10",children:"Get Started Now"}),t.jsx(sA,{className:"w-5 h-5 relative z-10 group-hover:translate-x-1 transition-transform"})]})}),t.jsx("div",{className:"grid grid-cols-3 gap-4 pt-6 border-t border-gray-200",children:m.map((A,g)=>t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("div",{className:"flex items-center justify-center text-blue-600",children:A.icon}),t.jsx("div",{className:"text-xl md:text-2xl font-bold text-gray-800 drop-shadow-sm",children:A.value}),t.jsx("div",{className:"text-xs md:text-sm text-gray-600 font-medium",children:A.label})]},g))})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"text-center lg:text-left",children:[t.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-2 flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-100 backdrop-blur-sm rounded-lg flex items-center justify-center",children:t.jsx(Kt,{className:"w-5 h-5 text-blue-600"})}),"Our Services"]}),t.jsx("p",{className:"text-gray-700 text-sm md:text-base",children:"Wide-ranging digital system that streamlines the application, processing, tracking, and approval of permits and licenses across multiple sectors through a centralized and automated platform."})]}),t.jsx("div",{className:"grid grid-cols-1 gap-4",children:c.map(A=>t.jsxs("div",{onMouseEnter:()=>i(A.id),onMouseLeave:()=>i(null),className:`${A.bgColor} backdrop-blur-sm border-2 ${A.borderColor} rounded-xl p-4 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] hover:-translate-y-1 cursor-pointer group`,children:[t.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[t.jsx("div",{className:`w-12 h-12 ${A.iconBg} rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform flex-shrink-0`,children:t.jsx("div",{className:"text-white",children:A.icon})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:`font-bold text-lg mb-1 ${A.textColor} group-hover:underline`,children:A.title}),t.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:A.description})]})]}),t.jsxs("div",{className:`flex items-center gap-2 text-xs font-semibold ${A.textColor} mb-3 px-2 py-1.5 bg-white/50 rounded-md border ${A.borderColor} w-fit`,children:[A.statsIcon,t.jsx("span",{children:A.stats})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:A.features.map((g,p)=>t.jsx("span",{className:"px-2 py-1.5 bg-white/80 backdrop-blur-sm rounded-md text-xs font-medium text-gray-800 border border-gray-200 hover:bg-white transition-colors shadow-sm",children:g},p))})]},A.id))})]})]})}),t.jsx(dw,{})]})}function V6(a,e,s){if(typeof a=="function"?a===e:a.has(e))return arguments.length<3?e:s;throw new TypeError("Private element is not present on this object")}function KQ(a,e){if(e.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")}function hB(a,e){return a.get(V6(a,e))}function XQ(a,e,s){KQ(a,e),e.set(a,s)}function JQ(a,e,s){return a.set(V6(a,e),s),s}const ZQ=100,Hs={},e9=()=>{Hs.previousActiveElement instanceof HTMLElement?(Hs.previousActiveElement.focus(),Hs.previousActiveElement=null):document.body&&document.body.focus()},t9=a=>new Promise(e=>{if(!a)return e();const s=window.scrollX,r=window.scrollY;Hs.restoreFocusTimeout=setTimeout(()=>{e9(),e()},ZQ),window.scrollTo(s,r)}),z6="swal2-",s9=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],Yt=s9.reduce((a,e)=>(a[e]=z6+e,a),{}),r9=["success","warning","info","question","error"],lv=r9.reduce((a,e)=>(a[e]=z6+e,a),{}),$6="SweetAlert2:",n5=a=>a.charAt(0).toUpperCase()+a.slice(1),co=a=>{console.warn(`${$6} ${typeof a=="object"?a.join(" "):a}`)},gA=a=>{console.error(`${$6} ${a}`)},mB=[],a9=a=>{mB.includes(a)||(mB.push(a),co(a))},q6=(a,e=null)=>{a9(`"${a}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},uw=a=>typeof a=="function"?a():a,i5=a=>a&&typeof a.toPromise=="function",u0=a=>i5(a)?a.toPromise():Promise.resolve(a),o5=a=>a&&Promise.resolve(a)===a,uo=()=>document.body.querySelector(`.${Yt.container}`),h0=a=>{const e=uo();return e?e.querySelector(a):null},Al=a=>h0(`.${a}`),ra=()=>Al(Yt.popup),Dp=()=>Al(Yt.icon),n9=()=>Al(Yt["icon-content"]),G6=()=>Al(Yt.title),l5=()=>Al(Yt["html-container"]),W6=()=>Al(Yt.image),c5=()=>Al(Yt["progress-steps"]),hw=()=>Al(Yt["validation-message"]),jd=()=>h0(`.${Yt.actions} .${Yt.confirm}`),Tp=()=>h0(`.${Yt.actions} .${Yt.cancel}`),xA=()=>h0(`.${Yt.actions} .${Yt.deny}`),i9=()=>Al(Yt["input-label"]),Pp=()=>h0(`.${Yt.loader}`),m0=()=>Al(Yt.actions),Y6=()=>Al(Yt.footer),mw=()=>Al(Yt["timer-progress-bar"]),d5=()=>Al(Yt.close),o9=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,u5=()=>{const a=ra();if(!a)return[];const e=a.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),s=Array.from(e).sort((i,o)=>{const l=parseInt(i.getAttribute("tabindex")||"0"),c=parseInt(o.getAttribute("tabindex")||"0");return l>c?1:l<c?-1:0}),r=a.querySelectorAll(o9),n=Array.from(r).filter(i=>i.getAttribute("tabindex")!=="-1");return[...new Set(s.concat(n))].filter(i=>Ro(i))},h5=()=>yu(document.body,Yt.shown)&&!yu(document.body,Yt["toast-shown"])&&!yu(document.body,Yt["no-backdrop"]),Aw=()=>{const a=ra();return a?yu(a,Yt.toast):!1},l9=()=>{const a=ra();return a?a.hasAttribute("data-loading"):!1},fl=(a,e)=>{if(a.textContent="",e){const r=new DOMParser().parseFromString(e,"text/html"),n=r.querySelector("head");n&&Array.from(n.childNodes).forEach(o=>{a.appendChild(o)});const i=r.querySelector("body");i&&Array.from(i.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?a.appendChild(o.cloneNode(!0)):a.appendChild(o)})}},yu=(a,e)=>{if(!e)return!1;const s=e.split(/\s+/);for(let r=0;r<s.length;r++)if(!a.classList.contains(s[r]))return!1;return!0},c9=(a,e)=>{Array.from(a.classList).forEach(s=>{!Object.values(Yt).includes(s)&&!Object.values(lv).includes(s)&&!Object.values(e.showClass||{}).includes(s)&&a.classList.remove(s)})},ul=(a,e,s)=>{if(c9(a,e),!e.customClass)return;const r=e.customClass[s];if(r){if(typeof r!="string"&&!r.forEach){co(`Invalid type of customClass.${s}! Expected string or iterable object, got "${typeof r}"`);return}ea(a,r)}},fw=(a,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return a.querySelector(`.${Yt.popup} > .${Yt[e]}`);case"checkbox":return a.querySelector(`.${Yt.popup} > .${Yt.checkbox} input`);case"radio":return a.querySelector(`.${Yt.popup} > .${Yt.radio} input:checked`)||a.querySelector(`.${Yt.popup} > .${Yt.radio} input:first-child`);case"range":return a.querySelector(`.${Yt.popup} > .${Yt.range} input`);default:return a.querySelector(`.${Yt.popup} > .${Yt.input}`)}},K6=a=>{if(a.focus(),a.type!=="file"){const e=a.value;a.value="",a.value=e}},X6=(a,e,s)=>{!a||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(r=>{Array.isArray(a)?a.forEach(n=>{s?n.classList.add(r):n.classList.remove(r)}):s?a.classList.add(r):a.classList.remove(r)}))},ea=(a,e)=>{X6(a,e,!0)},Ql=(a,e)=>{X6(a,e,!1)},Ch=(a,e)=>{const s=Array.from(a.children);for(let r=0;r<s.length;r++){const n=s[r];if(n instanceof HTMLElement&&yu(n,e))return n}},Ym=(a,e,s)=>{s===`${parseInt(`${s}`)}`&&(s=parseInt(s)),s||parseInt(`${s}`)===0?a.style.setProperty(e,typeof s=="number"?`${s}px`:s):a.style.removeProperty(e)},xi=(a,e="flex")=>{a&&(a.style.display=e)},Yi=a=>{a&&(a.style.display="none")},m5=(a,e="block")=>{a&&new MutationObserver(()=>{A0(a,a.innerHTML,e)}).observe(a,{childList:!0,subtree:!0})},AB=(a,e,s,r)=>{const n=a.querySelector(e);n&&n.style.setProperty(s,r)},A0=(a,e,s="flex")=>{e?xi(a,s):Yi(a)},Ro=a=>!!(a&&(a.offsetWidth||a.offsetHeight||a.getClientRects().length)),d9=()=>!Ro(jd())&&!Ro(xA())&&!Ro(Tp()),Lj=a=>a.scrollHeight>a.clientHeight,u9=(a,e)=>{let s=a;for(;s&&s!==e;){if(Lj(s))return!0;s=s.parentElement}return!1},J6=a=>{const e=window.getComputedStyle(a),s=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return s>0||r>0},A5=(a,e=!1)=>{const s=mw();s&&Ro(s)&&(e&&(s.style.transition="none",s.style.width="100%"),setTimeout(()=>{s.style.transition=`width ${a/1e3}s linear`,s.style.width="0%"},10))},h9=()=>{const a=mw();if(!a)return;const e=parseInt(window.getComputedStyle(a).width);a.style.removeProperty("transition"),a.style.width="100%";const s=parseInt(window.getComputedStyle(a).width),r=e/s*100;a.style.width=`${r}%`},m9=()=>typeof window>"u"||typeof document>"u",A9=`
 <div aria-labelledby="${Yt.title}" aria-describedby="${Yt["html-container"]}" class="${Yt.popup}" tabindex="-1">
   <button type="button" class="${Yt.close}"></button>
   <ul class="${Yt["progress-steps"]}"></ul>
   <div class="${Yt.icon}"></div>
   <img class="${Yt.image}" />
   <h2 class="${Yt.title}" id="${Yt.title}"></h2>
   <div class="${Yt["html-container"]}" id="${Yt["html-container"]}"></div>
   <input class="${Yt.input}" id="${Yt.input}" />
   <input type="file" class="${Yt.file}" />
   <div class="${Yt.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${Yt.select}" id="${Yt.select}"></select>
   <div class="${Yt.radio}"></div>
   <label class="${Yt.checkbox}">
     <input type="checkbox" id="${Yt.checkbox}" />
     <span class="${Yt.label}"></span>
   </label>
   <textarea class="${Yt.textarea}" id="${Yt.textarea}"></textarea>
   <div class="${Yt["validation-message"]}" id="${Yt["validation-message"]}"></div>
   <div class="${Yt.actions}">
     <div class="${Yt.loader}"></div>
     <button type="button" class="${Yt.confirm}"></button>
     <button type="button" class="${Yt.deny}"></button>
     <button type="button" class="${Yt.cancel}"></button>
   </div>
   <div class="${Yt.footer}"></div>
   <div class="${Yt["timer-progress-bar-container"]}">
     <div class="${Yt["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),f9=()=>{const a=uo();return a?(a.remove(),Ql([document.documentElement,document.body],[Yt["no-backdrop"],Yt["toast-shown"],Yt["has-column"]]),!0):!1},jm=()=>{Hs.currentInstance&&Hs.currentInstance.resetValidationMessage()},p9=()=>{const a=ra();if(!a)return;const e=Ch(a,Yt.input),s=Ch(a,Yt.file),r=a.querySelector(`.${Yt.range} input`),n=a.querySelector(`.${Yt.range} output`),i=Ch(a,Yt.select),o=a.querySelector(`.${Yt.checkbox} input`),l=Ch(a,Yt.textarea);e&&(e.oninput=jm),s&&(s.onchange=jm),i&&(i.onchange=jm),o&&(o.onchange=jm),l&&(l.oninput=jm),r&&n&&(r.oninput=()=>{jm(),n.value=r.value},r.onchange=()=>{jm(),n.value=r.value})},g9=a=>{if(typeof a=="string"){const e=document.querySelector(a);if(!e)throw new Error(`Target element "${a}" not found`);return e}return a},x9=a=>{const e=ra();e&&(e.setAttribute("role",a.toast?"alert":"dialog"),e.setAttribute("aria-live",a.toast?"polite":"assertive"),a.toast||e.setAttribute("aria-modal","true"))},b9=a=>{window.getComputedStyle(a).direction==="rtl"&&(ea(uo(),Yt.rtl),Hs.isRTL=!0)},y9=a=>{const e=f9();if(m9()){gA("SweetAlert2 requires document to initialize");return}const s=document.createElement("div");s.className=Yt.container,e&&ea(s,Yt["no-transition"]),fl(s,A9),s.dataset.swal2Theme=a.theme;const r=g9(a.target||"body");r.appendChild(s),a.topLayer&&(s.setAttribute("popover",""),s.showPopover()),x9(a),b9(r),p9()},f5=(a,e)=>{a instanceof HTMLElement?e.appendChild(a):typeof a=="object"?v9(a,e):a&&fl(e,a)},v9=(a,e)=>{"jquery"in a?w9(e,a):fl(e,a.toString())},w9=(a,e)=>{if(a.textContent="",0 in e)for(let s=0;s in e;s++)a.appendChild(e[s].cloneNode(!0));else a.appendChild(e.cloneNode(!0))},N9=(a,e)=>{const s=m0(),r=Pp();!s||!r||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?Yi(s):xi(s),ul(s,e,"actions"),j9(s,r,e),fl(r,e.loaderHtml||""),ul(r,e,"loader"))};function j9(a,e,s){const r=jd(),n=xA(),i=Tp();!r||!n||!i||(I2(r,"confirm",s),I2(n,"deny",s),I2(i,"cancel",s),_9(r,n,i,s),s.reverseButtons&&(s.toast?(a.insertBefore(i,r),a.insertBefore(n,r)):(a.insertBefore(i,e),a.insertBefore(n,e),a.insertBefore(r,e))))}function _9(a,e,s,r){if(!r.buttonsStyling){Ql([a,e,s],Yt.styled);return}ea([a,e,s],Yt.styled),r.confirmButtonColor&&a.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&s.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),P2(a),P2(e),P2(s)}function P2(a){const e=window.getComputedStyle(a);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const s=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");a.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${s}`))}function I2(a,e,s){const r=n5(e);A0(a,s[`show${r}Button`],"inline-block"),fl(a,s[`${e}ButtonText`]||""),a.setAttribute("aria-label",s[`${e}ButtonAriaLabel`]||""),a.className=Yt[e],ul(a,s,`${e}Button`)}const C9=(a,e)=>{const s=d5();s&&(fl(s,e.closeButtonHtml||""),ul(s,e,"closeButton"),A0(s,e.showCloseButton),s.setAttribute("aria-label",e.closeButtonAriaLabel||""))},k9=(a,e)=>{const s=uo();s&&(B9(s,e.backdrop),S9(s,e.position),E9(s,e.grow),ul(s,e,"container"))};function B9(a,e){typeof e=="string"?a.style.background=e:e||ea([document.documentElement,document.body],Yt["no-backdrop"])}function S9(a,e){e&&(e in Yt?ea(a,Yt[e]):(co('The "position" parameter is not valid, defaulting to "center"'),ea(a,Yt.center)))}function E9(a,e){e&&ea(a,Yt[`grow-${e}`])}var Ea={innerParams:new WeakMap,domCache:new WeakMap};const F9=["input","file","range","select","radio","checkbox","textarea"],D9=(a,e)=>{const s=ra();if(!s)return;const r=Ea.innerParams.get(a),n=!r||e.input!==r.input;F9.forEach(i=>{const o=Ch(s,Yt[i]);o&&(I9(i,e.inputAttributes),o.className=Yt[i],n&&Yi(o))}),e.input&&(n&&T9(e),L9(e))},T9=a=>{if(!a.input)return;if(!Bn[a.input]){gA(`Unexpected type of input! Expected ${Object.keys(Bn).join(" | ")}, got "${a.input}"`);return}const e=Z6(a.input);if(!e)return;const s=Bn[a.input](e,a);xi(e),a.inputAutoFocus&&setTimeout(()=>{K6(s)})},P9=a=>{for(let e=0;e<a.attributes.length;e++){const s=a.attributes[e].name;["id","type","value","style"].includes(s)||a.removeAttribute(s)}},I9=(a,e)=>{const s=ra();if(!s)return;const r=fw(s,a);if(r){P9(r);for(const n in e)r.setAttribute(n,e[n])}},L9=a=>{if(!a.input)return;const e=Z6(a.input);e&&ul(e,a,"input")},p5=(a,e)=>{!a.placeholder&&e.inputPlaceholder&&(a.placeholder=e.inputPlaceholder)},f0=(a,e,s)=>{if(s.inputLabel){const r=document.createElement("label"),n=Yt["input-label"];r.setAttribute("for",a.id),r.className=n,typeof s.customClass=="object"&&ea(r,s.customClass.inputLabel),r.innerText=s.inputLabel,e.insertAdjacentElement("beforebegin",r)}},Z6=a=>{const e=ra();if(e)return Ch(e,Yt[a]||Yt.input)},cv=(a,e)=>{["string","number"].includes(typeof e)?a.value=`${e}`:o5(e)||co(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Bn={};Bn.text=Bn.email=Bn.password=Bn.number=Bn.tel=Bn.url=Bn.search=Bn.date=Bn["datetime-local"]=Bn.time=Bn.week=Bn.month=(a,e)=>{const s=a;return cv(s,e.inputValue),f0(s,s,e),p5(s,e),s.type=e.input,s};Bn.file=(a,e)=>{const s=a;return f0(s,s,e),p5(s,e),s};Bn.range=(a,e)=>{const s=a,r=s.querySelector("input"),n=s.querySelector("output");return r&&(cv(r,e.inputValue),r.type=e.input,f0(r,a,e)),n&&cv(n,e.inputValue),a};Bn.select=(a,e)=>{const s=a;if(s.textContent="",e.inputPlaceholder){const r=document.createElement("option");fl(r,e.inputPlaceholder),r.value="",r.disabled=!0,r.selected=!0,s.appendChild(r)}return f0(s,s,e),s};Bn.radio=a=>{const e=a;return e.textContent="",a};Bn.checkbox=(a,e)=>{const s=ra();if(!s)throw new Error("Popup not found");const r=fw(s,"checkbox");if(!r)throw new Error("Checkbox input not found");r.value="1",r.checked=!!e.inputValue;const i=a.querySelector("span");if(i){const o=e.inputPlaceholder||e.inputLabel;o&&fl(i,o)}return r};Bn.textarea=(a,e)=>{const s=a;cv(s,e.inputValue),p5(s,e),f0(s,s,e);const r=n=>parseInt(window.getComputedStyle(n).marginLeft)+parseInt(window.getComputedStyle(n).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const n=ra();if(!n)return;const i=parseInt(window.getComputedStyle(n).width),o=()=>{if(!document.body.contains(s))return;const l=s.offsetWidth+r(s),c=ra();c&&(l>i?c.style.width=`${l}px`:Ym(c,"width",e.width))};new MutationObserver(o).observe(s,{attributes:!0,attributeFilter:["style"]})}}),s};const M9=(a,e)=>{const s=l5();s&&(m5(s),ul(s,e,"htmlContainer"),e.html?(f5(e.html,s),xi(s,"block")):e.text?(s.textContent=e.text,xi(s,"block")):Yi(s),D9(a,e))},R9=(a,e)=>{const s=Y6();s&&(m5(s),A0(s,!!e.footer,"block"),e.footer&&f5(e.footer,s),ul(s,e,"footer"))},O9=(a,e)=>{const s=Ea.innerParams.get(a),r=Dp();if(!r)return;if(s&&e.icon===s.icon){pB(r,e),fB(r,e);return}if(!e.icon&&!e.iconHtml){Yi(r);return}if(e.icon&&Object.keys(lv).indexOf(e.icon)===-1){gA(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),Yi(r);return}xi(r),pB(r,e),fB(r,e),ea(r,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",eT)},fB=(a,e)=>{for(const[s,r]of Object.entries(lv))e.icon!==s&&Ql(a,r);ea(a,e.icon&&lv[e.icon]),H9(a,e),eT(),ul(a,e,"icon")},eT=()=>{const a=ra();if(!a)return;const e=window.getComputedStyle(a).getPropertyValue("background-color"),s=a.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<s.length;r++)s[r].style.backgroundColor=e},U9=a=>`
  ${a.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${a.animation?'<div class="swal2-success-fix"></div>':""}
  ${a.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,Q9=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,pB=(a,e)=>{if(!e.icon&&!e.iconHtml)return;let s=a.innerHTML,r="";e.iconHtml?r=gB(e.iconHtml):e.icon==="success"?(r=U9(e),s=s.replace(/ style=".*?"/g,"")):e.icon==="error"?r=Q9:e.icon&&(r=gB({question:"?",warning:"!",info:"i"}[e.icon])),s.trim()!==r.trim()&&fl(a,r)},H9=(a,e)=>{if(e.iconColor){a.style.color=e.iconColor,a.style.borderColor=e.iconColor;for(const s of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])AB(a,s,"background-color",e.iconColor);AB(a,".swal2-success-ring","border-color",e.iconColor)}},gB=a=>`<div class="${Yt["icon-content"]}">${a}</div>`,V9=(a,e)=>{const s=W6();if(s){if(!e.imageUrl){Yi(s);return}xi(s,""),s.setAttribute("src",e.imageUrl),s.setAttribute("alt",e.imageAlt||""),Ym(s,"width",e.imageWidth),Ym(s,"height",e.imageHeight),s.className=Yt.image,ul(s,e,"image")}};let g5=!1,tT=0,sT=0,rT=0,aT=0;const z9=a=>{a.addEventListener("mousedown",dv),document.body.addEventListener("mousemove",uv),a.addEventListener("mouseup",hv),a.addEventListener("touchstart",dv),document.body.addEventListener("touchmove",uv),a.addEventListener("touchend",hv)},$9=a=>{a.removeEventListener("mousedown",dv),document.body.removeEventListener("mousemove",uv),a.removeEventListener("mouseup",hv),a.removeEventListener("touchstart",dv),document.body.removeEventListener("touchmove",uv),a.removeEventListener("touchend",hv)},dv=a=>{const e=ra();if(!e)return;const s=Dp();if(a.target===e||s&&s.contains(a.target)){g5=!0;const r=nT(a);tT=r.clientX,sT=r.clientY,rT=parseInt(e.style.insetInlineStart)||0,aT=parseInt(e.style.insetBlockStart)||0,ea(e,"swal2-dragging")}},uv=a=>{const e=ra();if(e&&g5){let{clientX:s,clientY:r}=nT(a);const n=s-tT;e.style.insetInlineStart=`${rT+(Hs.isRTL?-n:n)}px`,e.style.insetBlockStart=`${aT+(r-sT)}px`}},hv=()=>{const a=ra();g5=!1,Ql(a,"swal2-dragging")},nT=a=>{let e=0,s=0;return a.type.startsWith("mouse")?(e=a.clientX,s=a.clientY):a.type.startsWith("touch")&&(e=a.touches[0].clientX,s=a.touches[0].clientY),{clientX:e,clientY:s}},q9=(a,e)=>{const s=uo(),r=ra();if(!(!s||!r)){if(e.toast){Ym(s,"width",e.width),r.style.width="100%";const n=Pp();n&&r.insertBefore(n,Dp())}else Ym(r,"width",e.width);Ym(r,"padding",e.padding),e.color&&(r.style.color=e.color),e.background&&(r.style.background=e.background),Yi(hw()),G9(r,e),e.draggable&&!e.toast?(ea(r,Yt.draggable),z9(r)):(Ql(r,Yt.draggable),$9(r))}},G9=(a,e)=>{const s=e.showClass||{};a.className=`${Yt.popup} ${Ro(a)?s.popup:""}`,e.toast?(ea([document.documentElement,document.body],Yt["toast-shown"]),ea(a,Yt.toast)):ea(a,Yt.modal),ul(a,e,"popup"),typeof e.customClass=="string"&&ea(a,e.customClass),e.icon&&ea(a,Yt[`icon-${e.icon}`])},W9=(a,e)=>{const s=c5();if(!s)return;const{progressSteps:r,currentProgressStep:n}=e;if(!r||r.length===0||n===void 0){Yi(s);return}xi(s),s.textContent="",n>=r.length&&co("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((i,o)=>{const l=Y9(i);if(s.appendChild(l),o===n&&ea(l,Yt["active-progress-step"]),o!==r.length-1){const c=K9(e);s.appendChild(c)}})},Y9=a=>{const e=document.createElement("li");return ea(e,Yt["progress-step"]),fl(e,a),e},K9=a=>{const e=document.createElement("li");return ea(e,Yt["progress-step-line"]),a.progressStepsDistance&&Ym(e,"width",a.progressStepsDistance),e},X9=(a,e)=>{const s=G6();s&&(m5(s),A0(s,!!(e.title||e.titleText),"block"),e.title&&f5(e.title,s),e.titleText&&(s.innerText=e.titleText),ul(s,e,"title"))},iT=(a,e)=>{var s;q9(a,e),k9(a,e),W9(a,e),O9(a,e),V9(a,e),X9(a,e),C9(a,e),M9(a,e),N9(a,e),R9(a,e);const r=ra();typeof e.didRender=="function"&&r&&e.didRender(r),(s=Hs.eventEmitter)===null||s===void 0||s.emit("didRender",r)},J9=()=>Ro(ra()),oT=()=>{var a;return(a=jd())===null||a===void 0?void 0:a.click()},Z9=()=>{var a;return(a=xA())===null||a===void 0?void 0:a.click()},eH=()=>{var a;return(a=Tp())===null||a===void 0?void 0:a.click()},Ip=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),lT=a=>{if(a.keydownTarget&&a.keydownHandlerAdded&&a.keydownHandler){const e=a.keydownHandler;a.keydownTarget.removeEventListener("keydown",e,{capture:a.keydownListenerCapture}),a.keydownHandlerAdded=!1}},tH=(a,e,s)=>{if(lT(a),!e.toast){const r=i=>rH(e,i,s);a.keydownHandler=r;const n=e.keydownListenerCapture?window:ra();if(n){a.keydownTarget=n,a.keydownListenerCapture=e.keydownListenerCapture;const i=r;a.keydownTarget.addEventListener("keydown",i,{capture:a.keydownListenerCapture}),a.keydownHandlerAdded=!0}}},Mj=(a,e)=>{var s;const r=u5();if(r.length){a=a+e,a===-2&&(a=r.length-1),a===r.length?a=0:a===-1&&(a=r.length-1),r[a].focus();return}(s=ra())===null||s===void 0||s.focus()},cT=["ArrowRight","ArrowDown"],sH=["ArrowLeft","ArrowUp"],rH=(a,e,s)=>{a&&(e.isComposing||e.keyCode===229||(a.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?aH(e,a):e.key==="Tab"?nH(e):[...cT,...sH].includes(e.key)?iH(e.key):e.key==="Escape"&&oH(e,a,s)))},aH=(a,e)=>{if(!uw(e.allowEnterKey))return;const s=ra();if(!s||!e.input)return;const r=fw(s,e.input);if(a.target&&r&&a.target instanceof HTMLElement&&a.target.outerHTML===r.outerHTML){if(["textarea","file"].includes(e.input))return;oT(),a.preventDefault()}},nH=a=>{const e=a.target,s=u5();let r=-1;for(let n=0;n<s.length;n++)if(e===s[n]){r=n;break}a.shiftKey?Mj(r,-1):Mj(r,1),a.stopPropagation(),a.preventDefault()},iH=a=>{const e=m0(),s=jd(),r=xA(),n=Tp();if(!e||!s||!r||!n)return;const i=[s,r,n];if(document.activeElement instanceof HTMLElement&&!i.includes(document.activeElement))return;const o=cT.includes(a)?"nextElementSibling":"previousElementSibling";let l=document.activeElement;if(l){for(let c=0;c<e.children.length;c++){if(l=l[o],!l)return;if(l instanceof HTMLButtonElement&&Ro(l))break}l instanceof HTMLButtonElement&&l.focus()}},oH=(a,e,s)=>{a.preventDefault(),uw(e.allowEscapeKey)&&s(Ip.esc)};var fp={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const lH=()=>{const a=uo();Array.from(document.body.children).forEach(s=>{s.contains(a)||(s.hasAttribute("aria-hidden")&&s.setAttribute("data-previous-aria-hidden",s.getAttribute("aria-hidden")||""),s.setAttribute("aria-hidden","true"))})},dT=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},uT=typeof window<"u"&&!!window.GestureEvent,cH=()=>{if(uT&&!yu(document.body,Yt.iosfix)){const a=document.body.scrollTop;document.body.style.top=`${a*-1}px`,ea(document.body,Yt.iosfix),dH()}},dH=()=>{const a=uo();if(!a)return;let e;a.ontouchstart=s=>{e=uH(s)},a.ontouchmove=s=>{e&&(s.preventDefault(),s.stopPropagation())}},uH=a=>{const e=a.target,s=uo(),r=l5();return!s||!r||hH(a)||mH(a)?!1:e===s||!Lj(s)&&e instanceof HTMLElement&&!u9(e,r)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(Lj(r)&&r.contains(e))},hH=a=>!!(a.touches&&a.touches.length&&a.touches[0].touchType==="stylus"),mH=a=>a.touches&&a.touches.length>1,AH=()=>{if(yu(document.body,Yt.iosfix)){const a=parseInt(document.body.style.top,10);Ql(document.body,Yt.iosfix),document.body.style.top="",document.body.scrollTop=a*-1}},fH=()=>{const a=document.createElement("div");a.className=Yt["scrollbar-measure"],document.body.appendChild(a);const e=a.getBoundingClientRect().width-a.clientWidth;return document.body.removeChild(a),e};let Xf=null;const pH=a=>{Xf===null&&(document.body.scrollHeight>window.innerHeight||a==="scroll")&&(Xf=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Xf+fH()}px`)},gH=()=>{Xf!==null&&(document.body.style.paddingRight=`${Xf}px`,Xf=null)};function hT(a,e,s,r){Aw()?xB(a,r):(t9(s).then(()=>xB(a,r)),lT(Hs)),uT?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),h5()&&(gH(),AH(),dT()),xH()}function xH(){Ql([document.documentElement,document.body],[Yt.shown,Yt["height-auto"],Yt["no-backdrop"],Yt["toast-shown"]])}function kh(a){a=yH(a);const e=fp.swalPromiseResolve.get(this),s=bH(this);this.isAwaitingPromise?a.isDismissed||(p0(this),e(a)):s&&e(a)}const bH=a=>{const e=ra();if(!e)return!1;const s=Ea.innerParams.get(a);if(!s||yu(e,s.hideClass.popup))return!1;Ql(e,s.showClass.popup),ea(e,s.hideClass.popup);const r=uo();return Ql(r,s.showClass.backdrop),ea(r,s.hideClass.backdrop),vH(a,e,s),!0};function mT(a){const e=fp.swalPromiseReject.get(this);p0(this),e&&e(a)}const p0=a=>{a.isAwaitingPromise&&(delete a.isAwaitingPromise,Ea.innerParams.get(a)||a._destroy())},yH=a=>typeof a>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},a),vH=(a,e,s)=>{var r;const n=uo(),i=J6(e);typeof s.willClose=="function"&&s.willClose(e),(r=Hs.eventEmitter)===null||r===void 0||r.emit("willClose",e),i&&n?wH(a,e,n,!!s.returnFocus,s.didClose):n&&hT(a,n,!!s.returnFocus,s.didClose)},wH=(a,e,s,r,n)=>{Hs.swalCloseEventFinishedCallback=hT.bind(null,a,s,r,n);const i=function(o){if(o.target===e){var l;(l=Hs.swalCloseEventFinishedCallback)===null||l===void 0||l.call(Hs),delete Hs.swalCloseEventFinishedCallback,e.removeEventListener("animationend",i),e.removeEventListener("transitionend",i)}};e.addEventListener("animationend",i),e.addEventListener("transitionend",i)},xB=(a,e)=>{setTimeout(()=>{var s;typeof e=="function"&&e.bind(a.params)(),(s=Hs.eventEmitter)===null||s===void 0||s.emit("didClose"),a._destroy&&a._destroy()})},pp=a=>{let e=ra();if(e||new dt,e=ra(),!e)return;const s=Pp();Aw()?Yi(Dp()):NH(e,a),xi(s),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},NH=(a,e)=>{const s=m0(),r=Pp();!s||!r||(!e&&Ro(jd())&&(e=jd()),xi(s),e&&(Yi(e),r.setAttribute("data-button-to-replace",e.className),s.insertBefore(r,e)),ea([a,s],Yt.loading))},jH=(a,e)=>{e.input==="select"||e.input==="radio"?SH(a,e):["text","email","number","tel","textarea"].some(s=>s===e.input)&&(i5(e.inputValue)||o5(e.inputValue))&&(pp(jd()),EH(a,e))},_H=(a,e)=>{const s=a.getInput();if(!s)return null;switch(e.input){case"checkbox":return CH(s);case"radio":return kH(s);case"file":return BH(s);default:return e.inputAutoTrim?s.value.trim():s.value}},CH=a=>a.checked?1:0,kH=a=>a.checked?a.value:null,BH=a=>a.files&&a.files.length?a.getAttribute("multiple")!==null?a.files:a.files[0]:null,SH=(a,e)=>{const s=ra();if(!s)return;const r=n=>{e.input==="select"?FH(s,mv(n),e):e.input==="radio"&&DH(s,mv(n),e)};i5(e.inputOptions)||o5(e.inputOptions)?(pp(jd()),u0(e.inputOptions).then(n=>{a.hideLoading(),r(n)})):typeof e.inputOptions=="object"?r(e.inputOptions):gA(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},EH=(a,e)=>{const s=a.getInput();s&&(Yi(s),u0(e.inputValue).then(r=>{s.value=e.input==="number"?`${parseFloat(r)||0}`:`${r}`,xi(s),s.focus(),a.hideLoading()}).catch(r=>{gA(`Error in inputValue promise: ${r}`),s.value="",xi(s),s.focus(),a.hideLoading()}))};function FH(a,e,s){const r=Ch(a,Yt.select);if(!r)return;const n=(i,o,l)=>{const c=document.createElement("option");c.value=l,fl(c,o),c.selected=AT(l,s.inputValue),i.appendChild(c)};e.forEach(i=>{const o=i[0],l=i[1];if(Array.isArray(l)){const c=document.createElement("optgroup");c.label=o,c.disabled=!1,r.appendChild(c),l.forEach(u=>n(c,u[1],u[0]))}else n(r,l,o)}),r.focus()}function DH(a,e,s){const r=Ch(a,Yt.radio);if(!r)return;e.forEach(i=>{const o=i[0],l=i[1],c=document.createElement("input"),u=document.createElement("label");c.type="radio",c.name=Yt.radio,c.value=o,AT(o,s.inputValue)&&(c.checked=!0);const m=document.createElement("span");fl(m,l),m.className=Yt.label,u.appendChild(c),u.appendChild(m),r.appendChild(u)});const n=r.querySelectorAll("input");n.length&&n[0].focus()}const mv=a=>{const e=[];return a instanceof Map?a.forEach((s,r)=>{let n=s;typeof n=="object"&&(n=mv(n)),e.push([r,n])}):Object.keys(a).forEach(s=>{let r=a[s];typeof r=="object"&&(r=mv(r)),e.push([s,r])}),e},AT=(a,e)=>!!e&&e!==null&&e!==void 0&&e.toString()===a.toString(),TH=a=>{const e=Ea.innerParams.get(a);a.disableButtons(),e.input?fT(a,"confirm"):b5(a,!0)},PH=a=>{const e=Ea.innerParams.get(a);a.disableButtons(),e.returnInputValueOnDeny?fT(a,"deny"):x5(a,!1)},IH=(a,e)=>{a.disableButtons(),e(Ip.cancel)},fT=(a,e)=>{const s=Ea.innerParams.get(a);if(!s.input){gA(`The "input" parameter is needed to be set when using returnInputValueOn${n5(e)}`);return}const r=a.getInput(),n=_H(a,s);s.inputValidator?LH(a,n,e):r&&!r.checkValidity()?(a.enableButtons(),a.showValidationMessage(s.validationMessage||r.validationMessage)):e==="deny"?x5(a,n):b5(a,n)},LH=(a,e,s)=>{const r=Ea.innerParams.get(a);a.disableInput(),Promise.resolve().then(()=>u0(r.inputValidator(e,r.validationMessage))).then(i=>{a.enableButtons(),a.enableInput(),i?a.showValidationMessage(i):s==="deny"?x5(a,e):b5(a,e)})},x5=(a,e)=>{const s=Ea.innerParams.get(a);s.showLoaderOnDeny&&pp(xA()),s.preDeny?(a.isAwaitingPromise=!0,Promise.resolve().then(()=>u0(s.preDeny(e,s.validationMessage))).then(n=>{n===!1?(a.hideLoading(),p0(a)):a.close({isDenied:!0,value:typeof n>"u"?e:n})}).catch(n=>pT(a,n))):a.close({isDenied:!0,value:e})},bB=(a,e)=>{a.close({isConfirmed:!0,value:e})},pT=(a,e)=>{a.rejectPromise(e)},b5=(a,e)=>{const s=Ea.innerParams.get(a);s.showLoaderOnConfirm&&pp(),s.preConfirm?(a.resetValidationMessage(),a.isAwaitingPromise=!0,Promise.resolve().then(()=>u0(s.preConfirm(e,s.validationMessage))).then(n=>{Ro(hw())||n===!1?(a.hideLoading(),p0(a)):bB(a,typeof n>"u"?e:n)}).catch(n=>pT(a,n))):bB(a,e)};function Av(){const a=Ea.innerParams.get(this);if(!a)return;const e=Ea.domCache.get(this);Yi(e.loader),Aw()?a.icon&&xi(Dp()):MH(e),Ql([e.popup,e.actions],Yt.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const MH=a=>{const e=a.loader.getAttribute("data-button-to-replace"),s=e?a.popup.getElementsByClassName(e):[];s.length?xi(s[0],"inline-block"):d9()&&Yi(a.actions)};function gT(){const a=Ea.innerParams.get(this),e=Ea.domCache.get(this);return e?fw(e.popup,a.input):null}function xT(a,e,s){const r=Ea.domCache.get(a);e.forEach(n=>{r[n].disabled=s})}function bT(a,e){const s=ra();if(!(!s||!a))if(a.type==="radio"){const r=s.querySelectorAll(`[name="${Yt.radio}"]`);for(let n=0;n<r.length;n++)r[n].disabled=e}else a.disabled=e}function yT(){xT(this,["confirmButton","denyButton","cancelButton"],!1)}function vT(){xT(this,["confirmButton","denyButton","cancelButton"],!0)}function wT(){bT(this.getInput(),!1)}function NT(){bT(this.getInput(),!0)}function jT(a){const e=Ea.domCache.get(this),s=Ea.innerParams.get(this);fl(e.validationMessage,a),e.validationMessage.className=Yt["validation-message"],s.customClass&&s.customClass.validationMessage&&ea(e.validationMessage,s.customClass.validationMessage),xi(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",Yt["validation-message"]),K6(r),ea(r,Yt.inputerror))}function _T(){const a=Ea.domCache.get(this);a.validationMessage&&Yi(a.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Ql(e,Yt.inputerror))}const Bh={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},RH=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],OH={allowEnterKey:void 0},UH=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],CT=a=>Object.prototype.hasOwnProperty.call(Bh,a),kT=a=>RH.indexOf(a)!==-1,BT=a=>OH[a],QH=a=>{CT(a)||co(`Unknown parameter "${a}"`)},HH=a=>{UH.includes(a)&&co(`The parameter "${a}" is incompatible with toasts`)},VH=a=>{const e=BT(a);e&&q6(a,e)},ST=a=>{a.backdrop===!1&&a.allowOutsideClick&&co('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),a.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(a.theme)&&co(`Invalid theme "${a.theme}"`);for(const e in a)QH(e),a.toast&&HH(e),VH(e)};function ET(a){const e=uo(),s=ra(),r=Ea.innerParams.get(this);if(!s||yu(s,r.hideClass.popup)){co("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const n=zH(a),i=Object.assign({},r,n);ST(i),e&&(e.dataset.swal2Theme=i.theme),iT(this,i),Ea.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,a),writable:!1,enumerable:!0}})}const zH=a=>{const e={};return Object.keys(a).forEach(s=>{if(kT(s)){const r=a;e[s]=r[s]}else co(`Invalid parameter to update: ${s}`)}),e};function FT(){var a;const e=Ea.domCache.get(this),s=Ea.innerParams.get(this);if(!s){DT(this);return}e.popup&&Hs.swalCloseEventFinishedCallback&&(Hs.swalCloseEventFinishedCallback(),delete Hs.swalCloseEventFinishedCallback),typeof s.didDestroy=="function"&&s.didDestroy(),(a=Hs.eventEmitter)===null||a===void 0||a.emit("didDestroy"),$H(this)}const $H=a=>{DT(a),delete a.params,delete Hs.keydownHandler,delete Hs.keydownTarget,delete Hs.currentInstance},DT=a=>{a.isAwaitingPromise?(L2(Ea,a),a.isAwaitingPromise=!0):(L2(fp,a),L2(Ea,a),delete a.isAwaitingPromise,delete a.disableButtons,delete a.enableButtons,delete a.getInput,delete a.disableInput,delete a.enableInput,delete a.hideLoading,delete a.disableLoading,delete a.showValidationMessage,delete a.resetValidationMessage,delete a.close,delete a.closePopup,delete a.closeModal,delete a.closeToast,delete a.rejectPromise,delete a.update,delete a._destroy)},L2=(a,e)=>{for(const s in a)a[s].delete(e)};var qH=Object.freeze({__proto__:null,_destroy:FT,close:kh,closeModal:kh,closePopup:kh,closeToast:kh,disableButtons:vT,disableInput:NT,disableLoading:Av,enableButtons:yT,enableInput:wT,getInput:gT,handleAwaitingPromise:p0,hideLoading:Av,rejectPromise:mT,resetValidationMessage:_T,showValidationMessage:jT,update:ET});const GH=(a,e,s)=>{a.toast?WH(a,e,s):(KH(e),XH(e),JH(a,e,s))},WH=(a,e,s)=>{e.popup.onclick=()=>{a&&(YH(a)||a.timer||a.input)||s(Ip.close)}},YH=a=>!!(a.showConfirmButton||a.showDenyButton||a.showCancelButton||a.showCloseButton);let fv=!1;const KH=a=>{a.popup.onmousedown=()=>{a.container.onmouseup=function(e){a.container.onmouseup=()=>{},e.target===a.container&&(fv=!0)}}},XH=a=>{a.container.onmousedown=e=>{e.target===a.container&&e.preventDefault(),a.popup.onmouseup=function(s){a.popup.onmouseup=()=>{},(s.target===a.popup||s.target instanceof HTMLElement&&a.popup.contains(s.target))&&(fv=!0)}}},JH=(a,e,s)=>{e.container.onclick=r=>{if(fv){fv=!1;return}r.target===e.container&&uw(a.allowOutsideClick)&&s(Ip.backdrop)}},ZH=a=>typeof a=="object"&&a!==null&&"jquery"in a,yB=a=>a instanceof Element||ZH(a),eV=a=>{const e={};return typeof a[0]=="object"&&!yB(a[0])?Object.assign(e,a[0]):["title","html","icon"].forEach((s,r)=>{const n=a[r];typeof n=="string"||yB(n)?e[s]=n:n!==void 0&&gA(`Unexpected type of ${s}! Expected "string" or "Element", got ${typeof n}`)}),e};function tV(...a){return new this(...a)}function sV(a){class e extends this{_main(r,n){return super._main(r,Object.assign({},a,n))}}return e}const rV=()=>Hs.timeout&&Hs.timeout.getTimerLeft(),TT=()=>{if(Hs.timeout)return h9(),Hs.timeout.stop()},PT=()=>{if(Hs.timeout){const a=Hs.timeout.start();return A5(a),a}},aV=()=>{const a=Hs.timeout;return a&&(a.running?TT():PT())},nV=a=>{if(Hs.timeout){const e=Hs.timeout.increase(a);return A5(e,!0),e}},iV=()=>!!(Hs.timeout&&Hs.timeout.isRunning());let vB=!1;const Rj={};function oV(a="data-swal-template"){Rj[a]=this,vB||(document.body.addEventListener("click",lV),vB=!0)}const lV=a=>{for(let e=a.target;e&&e!==document;e=e.parentNode)for(const s in Rj){const r=e.getAttribute&&e.getAttribute(s);if(r){Rj[s].fire({template:r});return}}};class cV{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,s){const r=this._getHandlersByEventName(e);r.includes(s)||r.push(s)}once(e,s){const r=(...n)=>{this.removeListener(e,r),s.apply(this,n)};this.on(e,r)}emit(e,...s){this._getHandlersByEventName(e).forEach(r=>{try{r.apply(this,s)}catch(n){console.error(n)}})}removeListener(e,s){const r=this._getHandlersByEventName(e),n=r.indexOf(s);n>-1&&r.splice(n,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}Hs.eventEmitter=new cV;const dV=(a,e)=>{Hs.eventEmitter&&Hs.eventEmitter.on(a,e)},uV=(a,e)=>{Hs.eventEmitter&&Hs.eventEmitter.once(a,e)},hV=(a,e)=>{if(Hs.eventEmitter){if(!a){Hs.eventEmitter.reset();return}e?Hs.eventEmitter.removeListener(a,e):Hs.eventEmitter.removeAllListeners(a)}};var mV=Object.freeze({__proto__:null,argsToParams:eV,bindClickHandler:oV,clickCancel:eH,clickConfirm:oT,clickDeny:Z9,enableLoading:pp,fire:tV,getActions:m0,getCancelButton:Tp,getCloseButton:d5,getConfirmButton:jd,getContainer:uo,getDenyButton:xA,getFocusableElements:u5,getFooter:Y6,getHtmlContainer:l5,getIcon:Dp,getIconContent:n9,getImage:W6,getInputLabel:i9,getLoader:Pp,getPopup:ra,getProgressSteps:c5,getTimerLeft:rV,getTimerProgressBar:mw,getTitle:G6,getValidationMessage:hw,increaseTimer:nV,isDeprecatedParameter:BT,isLoading:l9,isTimerRunning:iV,isUpdatableParameter:kT,isValidParameter:CT,isVisible:J9,mixin:sV,off:hV,on:dV,once:uV,resumeTimer:PT,showLoading:pp,stopTimer:TT,toggleTimer:aV});class AV{constructor(e,s){this.callback=e,this.remaining=s,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const s=this.running;return s&&this.stop(),this.remaining+=e,s&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const IT=["swal-title","swal-html","swal-footer"],fV=a=>{const e=typeof a.template=="string"?document.querySelector(a.template):a.template;if(!e)return{};const s=e.content;return NV(s),Object.assign(pV(s),gV(s),xV(s),bV(s),yV(s),vV(s),wV(s,IT))},pV=a=>{const e={};return Array.from(a.querySelectorAll("swal-param")).forEach(r=>{iA(r,["name","value"]);const n=r.getAttribute("name"),i=r.getAttribute("value");!n||!i||(n in Bh&&typeof Bh[n]=="boolean"?e[n]=i!=="false":n in Bh&&typeof Bh[n]=="object"?e[n]=JSON.parse(i):e[n]=i)}),e},gV=a=>{const e={};return Array.from(a.querySelectorAll("swal-function-param")).forEach(r=>{const n=r.getAttribute("name"),i=r.getAttribute("value");!n||!i||(e[n]=new Function(`return ${i}`)())}),e},xV=a=>{const e={};return Array.from(a.querySelectorAll("swal-button")).forEach(r=>{iA(r,["type","color","aria-label"]);const n=r.getAttribute("type");if(!(!n||!["confirm","cancel","deny"].includes(n))){if(e[`${n}ButtonText`]=r.innerHTML,e[`show${n5(n)}Button`]=!0,r.hasAttribute("color")){const i=r.getAttribute("color");i!==null&&(e[`${n}ButtonColor`]=i)}if(r.hasAttribute("aria-label")){const i=r.getAttribute("aria-label");i!==null&&(e[`${n}ButtonAriaLabel`]=i)}}}),e},bV=a=>{const e={},s=a.querySelector("swal-image");return s&&(iA(s,["src","width","height","alt"]),s.hasAttribute("src")&&(e.imageUrl=s.getAttribute("src")||void 0),s.hasAttribute("width")&&(e.imageWidth=s.getAttribute("width")||void 0),s.hasAttribute("height")&&(e.imageHeight=s.getAttribute("height")||void 0),s.hasAttribute("alt")&&(e.imageAlt=s.getAttribute("alt")||void 0)),e},yV=a=>{const e={},s=a.querySelector("swal-icon");return s&&(iA(s,["type","color"]),s.hasAttribute("type")&&(e.icon=s.getAttribute("type")),s.hasAttribute("color")&&(e.iconColor=s.getAttribute("color")),e.iconHtml=s.innerHTML),e},vV=a=>{const e={},s=a.querySelector("swal-input");s&&(iA(s,["type","label","placeholder","value"]),e.input=s.getAttribute("type")||"text",s.hasAttribute("label")&&(e.inputLabel=s.getAttribute("label")),s.hasAttribute("placeholder")&&(e.inputPlaceholder=s.getAttribute("placeholder")),s.hasAttribute("value")&&(e.inputValue=s.getAttribute("value")));const r=Array.from(a.querySelectorAll("swal-input-option"));return r.length&&(e.inputOptions={},r.forEach(n=>{iA(n,["value"]);const i=n.getAttribute("value");if(!i)return;const o=n.innerHTML;e.inputOptions[i]=o})),e},wV=(a,e)=>{const s={};for(const r in e){const n=e[r],i=a.querySelector(n);i&&(iA(i,[]),s[n.replace(/^swal-/,"")]=i.innerHTML.trim())}return s},NV=a=>{const e=IT.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(a.children).forEach(s=>{const r=s.tagName.toLowerCase();e.includes(r)||co(`Unrecognized element <${r}>`)})},iA=(a,e)=>{Array.from(a.attributes).forEach(s=>{e.indexOf(s.name)===-1&&co([`Unrecognized attribute "${s.name}" on <${a.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},LT=10,jV=a=>{var e,s;const r=uo(),n=ra();if(!r||!n)return;typeof a.willOpen=="function"&&a.willOpen(n),(e=Hs.eventEmitter)===null||e===void 0||e.emit("willOpen",n);const o=window.getComputedStyle(document.body).overflowY;if(kV(r,n,a),setTimeout(()=>{_V(r,n)},LT),h5()&&(CV(r,a.scrollbarPadding!==void 0?a.scrollbarPadding:!1,o),lH()),!Aw()&&!Hs.previousActiveElement&&(Hs.previousActiveElement=document.activeElement),typeof a.didOpen=="function"){const l=a.didOpen;setTimeout(()=>l(n))}(s=Hs.eventEmitter)===null||s===void 0||s.emit("didOpen",n)},pv=a=>{const e=ra();if(!e||a.target!==e)return;const s=uo();s&&(e.removeEventListener("animationend",pv),e.removeEventListener("transitionend",pv),s.style.overflowY="auto",Ql(s,Yt["no-transition"]))},_V=(a,e)=>{J6(e)?(a.style.overflowY="hidden",e.addEventListener("animationend",pv),e.addEventListener("transitionend",pv)):a.style.overflowY="auto"},CV=(a,e,s)=>{cH(),e&&s!=="hidden"&&pH(s),setTimeout(()=>{a.scrollTop=0})},kV=(a,e,s)=>{var r;(r=s.showClass)!==null&&r!==void 0&&r.backdrop&&ea(a,s.showClass.backdrop),s.animation?(e.style.setProperty("opacity","0","important"),xi(e,"grid"),setTimeout(()=>{var n;(n=s.showClass)!==null&&n!==void 0&&n.popup&&ea(e,s.showClass.popup),e.style.removeProperty("opacity")},LT)):xi(e,"grid"),ea([document.documentElement,document.body],Yt.shown),s.heightAuto&&s.backdrop&&!s.toast&&ea([document.documentElement,document.body],Yt["height-auto"])};var wB={email:(a,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(a)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(a,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(a)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function BV(a){a.inputValidator||(a.input==="email"&&(a.inputValidator=wB.email),a.input==="url"&&(a.inputValidator=wB.url))}function SV(a){(!a.target||typeof a.target=="string"&&!document.querySelector(a.target)||typeof a.target!="string"&&!a.target.appendChild)&&(co('Target parameter is not valid, defaulting to "body"'),a.target="body")}function EV(a){BV(a),a.showLoaderOnConfirm&&!a.preConfirm&&co(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),SV(a),typeof a.title=="string"&&(a.title=a.title.split(`
`).join("<br />")),y9(a)}let ld;var jb=new WeakMap;class In{constructor(...e){if(XQ(this,jb,Promise.resolve({isConfirmed:!1,isDenied:!1,isDismissed:!0})),typeof window>"u")return;ld=this;const s=Object.freeze(this.constructor.argsToParams(e));this.params=s,this.isAwaitingPromise=!1,JQ(jb,this,this._main(ld.params))}_main(e,s={}){if(ST(Object.assign({},s,e)),Hs.currentInstance){const i=fp.swalPromiseResolve.get(Hs.currentInstance),{isAwaitingPromise:o}=Hs.currentInstance;Hs.currentInstance._destroy(),o||i({isDismissed:!0}),h5()&&dT()}Hs.currentInstance=ld;const r=DV(e,s);EV(r),Object.freeze(r),Hs.timeout&&(Hs.timeout.stop(),delete Hs.timeout),clearTimeout(Hs.restoreFocusTimeout);const n=TV(ld);return iT(ld,r),Ea.innerParams.set(ld,r),FV(ld,n,r)}then(e){return hB(jb,this).then(e)}finally(e){return hB(jb,this).finally(e)}}const FV=(a,e,s)=>new Promise((r,n)=>{const i=o=>{a.close({isDismissed:!0,dismiss:o,isConfirmed:!1,isDenied:!1})};fp.swalPromiseResolve.set(a,r),fp.swalPromiseReject.set(a,n),e.confirmButton.onclick=()=>{TH(a)},e.denyButton.onclick=()=>{PH(a)},e.cancelButton.onclick=()=>{IH(a,i)},e.closeButton.onclick=()=>{i(Ip.close)},GH(s,e,i),tH(Hs,s,i),jH(a,s),jV(s),PV(Hs,s,i),IV(e,s),setTimeout(()=>{e.container.scrollTop=0})}),DV=(a,e)=>{const s=fV(a),r=Object.assign({},Bh,e,s,a);return r.showClass=Object.assign({},Bh.showClass,r.showClass),r.hideClass=Object.assign({},Bh.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},TV=a=>{const e={popup:ra(),container:uo(),actions:m0(),confirmButton:jd(),denyButton:xA(),cancelButton:Tp(),loader:Pp(),closeButton:d5(),validationMessage:hw(),progressSteps:c5()};return Ea.domCache.set(a,e),e},PV=(a,e,s)=>{const r=mw();Yi(r),e.timer&&(a.timeout=new AV(()=>{s("timer"),delete a.timeout},e.timer),e.timerProgressBar&&r&&(xi(r),ul(r,e,"timerProgressBar"),setTimeout(()=>{a.timeout&&a.timeout.running&&A5(e.timer)})))},IV=(a,e)=>{if(!e.toast){if(!uw(e.allowEnterKey)){q6("allowEnterKey"),RV();return}LV(a)||MV(a,e)||Mj(-1,1)}},LV=a=>{const e=Array.from(a.popup.querySelectorAll("[autofocus]"));for(const s of e)if(s instanceof HTMLElement&&Ro(s))return s.focus(),!0;return!1},MV=(a,e)=>e.focusDeny&&Ro(a.denyButton)?(a.denyButton.focus(),!0):e.focusCancel&&Ro(a.cancelButton)?(a.cancelButton.focus(),!0):e.focusConfirm&&Ro(a.confirmButton)?(a.confirmButton.focus(),!0):!1,RV=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};In.prototype.disableButtons=vT;In.prototype.enableButtons=yT;In.prototype.getInput=gT;In.prototype.disableInput=NT;In.prototype.enableInput=wT;In.prototype.hideLoading=Av;In.prototype.disableLoading=Av;In.prototype.showValidationMessage=jT;In.prototype.resetValidationMessage=_T;In.prototype.close=kh;In.prototype.closePopup=kh;In.prototype.closeModal=kh;In.prototype.closeToast=kh;In.prototype.rejectPromise=mT;In.prototype.update=ET;In.prototype._destroy=FT;Object.assign(In,mV);Object.keys(qH).forEach(a=>{In[a]=function(...e){if(ld&&ld[a])return ld[a](...e)}});In.DismissReason=Ip;In.version="11.26.18";const dt=In;dt.default=dt;typeof document<"u"&&(function(a,e){var s=a.createElement("style");if(a.getElementsByTagName("head")[0].appendChild(s),s.styleSheet)s.styleSheet.disabled||(s.styleSheet.cssText=e);else try{s.innerHTML=e}catch{s.innerText=e}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const MT="/backend/login/users.php",y5="/backend/login/otp-admin.php",OV=async({email:a,password:e})=>{try{const r=await(await fetch(`${MT}?action=login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:e}),credentials:"include"})).json();if(!r.success)return r;if(r.token){if(localStorage.setItem("auth_token",r.token),localStorage.setItem("email",a),r.first_name&&localStorage.setItem("first_name",r.first_name),r.last_name&&localStorage.setItem("last_name",r.last_name),r.full_name)localStorage.setItem("full_name",r.full_name),localStorage.setItem("display_name",r.full_name);else if(r.first_name&&r.last_name){const n=`${r.first_name} ${r.last_name}`;localStorage.setItem("full_name",n),localStorage.setItem("display_name",n)}r.user_id&&localStorage.setItem("user_id",r.user_id),localStorage.setItem("user_name",r.first_name||r.full_name||a.split("@")[0]),window.dispatchEvent(new Event("user-data-updated"))}if(r.isAdmin){const i=await(await fetch(`${y5}?action=send`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:a,purpose:"login"})})).json();return{...i,requireOTP:!0,department:i.department}}return{...r,requireOTP:!1}}catch(s){return console.error("Login error:",s),{success:!1,message:"Network error"}}},RT=async a=>{try{console.log(" Sending registration data:",a);const e=await fetch(`${MT}?action=register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),credentials:"include"});if(!e.ok)throw console.error("Registration HTTP error:",e.status,e.statusText),new Error(`HTTP error! status: ${e.status}`);const s=await e.json();if(console.log(" Registration response:",s),s.success&&s.token){if(localStorage.setItem("auth_token",s.token),localStorage.setItem("email",a.email),s.first_name&&localStorage.setItem("first_name",s.first_name),s.last_name&&localStorage.setItem("last_name",s.last_name),s.full_name)localStorage.setItem("full_name",s.full_name),localStorage.setItem("display_name",s.full_name);else if(a.firstName&&a.lastName){const r=`${a.firstName} ${a.lastName}`;localStorage.setItem("full_name",r),localStorage.setItem("display_name",r)}s.user_id&&localStorage.setItem("user_id",s.user_id),localStorage.setItem("user_name",s.first_name||a.firstName||a.email.split("@")[0]),window.dispatchEvent(new Event("user-data-updated"))}return s}catch(e){return console.error("Register error:",e),{success:!1,message:e.message||"Network error during registration"}}},jx=async(a,e="login")=>{try{return await(await fetch(`${y5}?action=send`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:a,purpose:e})})).json()}catch(s){return console.error("Send OTP error:",s),{success:!1,message:"Network error (send OTP)"}}},OT=async(a,e,s="login")=>{try{const n=await(await fetch(`${y5}?action=verify`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:a,otp:e,purpose:s})})).json();return n.success&&n.user_data&&(n.user_data.first_name&&localStorage.setItem("first_name",n.user_data.first_name),n.user_data.last_name&&localStorage.setItem("last_name",n.user_data.last_name),n.user_data.full_name&&(localStorage.setItem("full_name",n.user_data.full_name),localStorage.setItem("display_name",n.user_data.full_name)),window.dispatchEvent(new Event("user-data-updated"))),n}catch(r){return console.error("Verify OTP error:",r),{success:!1,message:"Network error (verify OTP)"}}};function UV(){const[a,e]=C.useState(null),[s,r]=C.useState(""),[n,i]=C.useState(""),[o,l]=C.useState(""),[c,u]=C.useState(""),[m,A]=C.useState(!1),[g,p]=C.useState(new Date),[v,b]=C.useState(!0),[y,w]=C.useState(!1),[B,j]=C.useState(!1),[E,S]=C.useState(!1),[T,M]=C.useState(!1),[D,P]=C.useState(["","","","","",""]),[Y,Q]=C.useState(""),[L,ae]=C.useState(""),[ne,V]=C.useState(!1),[O,X]=C.useState(0),[$,H]=C.useState(null),[te,K]=C.useState(null),[I,R]=C.useState(""),[G,se]=C.useState({firstName:"",lastName:"",middleName:"",suffix:"",birthdate:"",regEmail:"",mobile:"",address:"",houseNumber:"",street:"",barangay:"",regPassword:"",confirmPassword:""}),[le,ye]=C.useState(!1),[De,me]=C.useState(!1),[Te,we]=C.useState(!1),[st,ce]=C.useState(!1),[tt,Ae]=C.useState(!1),gt=ka();C.useEffect(()=>{const Se=setInterval(()=>{p(new Date)},1e3);return()=>clearInterval(Se)},[]),C.useEffect(()=>{if(O>0){const Se=setTimeout(()=>X(O-1),1e3);return()=>clearTimeout(Se)}},[O]),C.useEffect(()=>{let Se=window.scrollY;const Ve=()=>{const et=window.scrollY,vt=et>Se?"down":"up";vt!=="down"&&et>50?b(!0):vt==="down"&&et>50&&b(!1),Se=et>0?et:0};return window.addEventListener("scroll",Ve),()=>window.removeEventListener("scroll",Ve)},[]);const q=async Se=>{if(Se.preventDefault(),l(""),u(""),!s||!n){l("Please enter both username/email and password.");return}try{const Ve=await OV({email:s,password:n});if(Ve.success){u("Login successful! Sending OTP..."),H({username:s,token:Ve.token});const et=await jx(s,"login");if(!et.success){H(null),l(et.message||"Failed to send OTP. Please try again."),u("");return}K("login"),R(s),P(["","","","","",""]),Q(""),ae(""),M(!0),X(30),u("")}else l(Ve.message||"Invalid username/email or password.")}catch(Ve){console.error(Ve),l("An error occurred while logging in. Please try again.")}},Qt=()=>{console.log("Google login clicked")},yt=()=>S(!0),Oe=()=>{S(!1),se({firstName:"",lastName:"",middleName:"",suffix:"",birthdate:"",regEmail:"",mobile:"",address:"",houseNumber:"",street:"",barangay:"",regPassword:"",confirmPassword:""}),ye(!1),me(!1),we(!1),e(null)},ze=()=>w(!0),Le=()=>w(!1),oe=()=>j(!0),he=()=>j(!1),W=Se=>{const{name:Ve,value:et}=Se.target;se(vt=>({...vt,[Ve]:et}))},ve=Se=>{ye(Se.target.checked),se(Ve=>({...Ve,middleName:Se.target.checked?"N/A":""}))},Qe=async Se=>{if(Se.preventDefault(),!De||!Te){dt.fire({icon:"warning",title:"Agreement Required",text:"Please agree to both Terms of Service and Privacy Policy.",confirmButtonColor:"#4CAF50"});return}if(!G.firstName||!G.lastName||!G.regEmail||!G.regPassword){dt.fire({icon:"error",title:"Missing Fields",text:"Please fill in all required fields.",confirmButtonColor:"#4CAF50"});return}if(G.regPassword!==G.confirmPassword){dt.fire({icon:"error",title:"Password Mismatch",text:"Passwords do not match. Please try again.",confirmButtonColor:"#4CAF50"});return}try{const Ve=await jx(G.regEmail,"register");if(!Ve.success){dt.fire({icon:"error",title:"OTP Failed",text:Ve.message||"Failed to send OTP. Please try again.",confirmButtonColor:"#4CAF50"});return}K("register"),R(G.regEmail),P(["","","","","",""]),Q(""),ae(""),M(!0),X(30),e({email:G.regEmail,password:G.regPassword,firstName:G.firstName,lastName:G.lastName,middleName:le?"N/A":G.middleName,suffix:G.suffix,birthdate:G.birthdate,mobile_number:G.mobile,house_number:G.houseNumber,street:G.street,barangay:G.barangay,city_municipality:"Default City",province:"Default Province",region:"Default Region",zip_code:null})}catch(Ve){console.error(Ve),dt.fire({icon:"error",title:"Network Error",text:"An error occurred while sending OTP. Please try again.",confirmButtonColor:"#4CAF50"})}},Ze=(Se,Ve)=>{if(!/^\d?$/.test(Ve))return;const et=[...D];if(et[Se]=Ve,P(et),Ve&&Se<5){const vt=document.getElementById(`otp-${Se+1}`);vt&&vt.focus()}},J=(Se,Ve)=>{if(Ve.key==="Backspace"&&!D[Se]&&Se>0){const et=document.getElementById(`otp-${Se-1}`);et&&et.focus()}},He=Se=>{Se.preventDefault();const et=Se.clipboardData.getData("text").replace(/\D/g,"").split("").slice(0,6);if(et.length===6){const vt=[...D];et.forEach((Ye,Et)=>{vt[Et]=Ye}),P(vt);const Mt=document.getElementById("otp-5");Mt&&Mt.focus()}},xt=async Se=>{Se.preventDefault(),Q(""),ae("");const Ve=D.join("");if(Ve.length!==6){Q("Please enter the complete 6-digit OTP.");return}if(!te||!I){Q("No OTP request in progress. Please try again.");return}try{const et=await OT(I,Ve,te);if(console.log(" [OTP API Response]:",et),!et.success){Q(et.message||"Invalid OTP");return}if(ae("OTP verified successfully!"),te==="register"&&a){console.log(" Starting registration process with data:",a);const vt=await RT(a);if(console.log(" [Registration API Response]:",vt),!vt.success){Q(vt.message||"Registration failed after OTP verification");return}localStorage.setItem("auth_token",vt.token||et.token||"dummy_token"),localStorage.setItem("goserveph_role","user"),localStorage.setItem("goserveph_email",I),localStorage.setItem("email",I),vt.first_name&&localStorage.setItem("first_name",vt.first_name),vt.last_name&&localStorage.setItem("last_name",vt.last_name),vt.full_name&&(localStorage.setItem("full_name",vt.full_name),localStorage.setItem("display_name",vt.full_name)),vt.user_id&&localStorage.setItem("goserveph_user_id",vt.user_id),ae("Registration successful! Redirecting to dashboard..."),_e(),Z7(I,vt.full_name||a.firstName||""),setTimeout(()=>{gt("/user/dashboard")},1e3);return}if(te==="login"){if(console.log(" Saving department data:",et.department),localStorage.setItem("auth_token",et.token||"dummy_token"),localStorage.setItem("goserveph_role",et.role||"user"),localStorage.setItem("goserveph_email",I),localStorage.setItem("email",I),et.department)localStorage.setItem("goserveph_department",et.department),console.log(" Department saved:",et.department);else if(et.isAdmin){const vt=Xe(I);vt&&(localStorage.setItem("goserveph_department",vt),console.log(" Department assigned from email:",vt))}et.user_id&&localStorage.setItem("goserveph_user_id",et.user_id),et.name&&(localStorage.setItem("goserveph_name",et.name),sessionStorage.setItem("admin_name",et.name)),et.department&&sessionStorage.setItem("admin_department",et.department),console.log(" After login - localStorage:",{role:localStorage.getItem("goserveph_role"),department:localStorage.getItem("goserveph_department"),email:localStorage.getItem("goserveph_email")}),_e(),J7(I,et.role||"user"),setTimeout(()=>{et.role==="admin"?gt("/admin/dashboard"):gt("/user/dashboard")},300)}}catch(et){console.error(et),Q("Network error while verifying OTP")}};function Xe(Se){return{"superadmin@eplms.com":"super","businessadmin@eplms.com":"business","buildingadmin@eplms.com":"building","barangaystaff@eplms.com":"barangay","transportadmin@eplms.com":"transport","admin@eplms.com":"super"}[Se.toLowerCase()]||null}const Ct=async()=>{if(!(O>0||!I||!te)&&!(te==="register"&&!a?.email)){V(!0),Q(""),ae("Resending OTP...");try{const Se=await jx(I,te);Se.success?(ae("New OTP has been sent to your email."),P(["","","","","",""]),X(30)):Q(Se.message||"Failed to resend OTP")}catch{Q("Network error while resending OTP")}V(!1)}},_e=()=>{M(!1),P(["","","","","",""]),Q(""),ae(""),H(null),K(null),R(""),X(0),V(!1),e(null)};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 relative overflow-hidden",children:[t.jsx("div",{className:"fixed inset-0 z-0 bg-[url('/GovServePH.png')] bg-center bg-contain bg-no-repeat opacity-15"}),t.jsx("div",{className:"fixed inset-0 z-0",children:t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_80%,rgba(76,175,80,0.1)_0%,transparent_50%),radial-gradient(circle_at_80%_20%,rgba(74,144,226,0.1)_0%,transparent_50%),radial-gradient(circle_at_40%_40%,rgba(253,168,17,0.05)_0%,transparent_50%)] animate-pulse"})}),t.jsx("header",{className:`sticky top-0 z-50 bg-white shadow-sm border-b-4 border-[#FDA811] transition-transform duration-300 ${v?"translate-y-0":"-translate-y-full"}`,children:t.jsxs("div",{className:"container mx-auto px-6 py-3 flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:t.jsx("img",{src:"/GSM_logo.png",alt:"Logo",className:"w-10 h-10 object-contain"})}),t.jsxs("div",{className:"flex flex-col leading-tight",children:[t.jsxs("span",{className:"text-xl font-bold",children:[t.jsx("span",{className:"text-blue-700",children:"Go"}),t.jsx("span",{className:"text-green-600",children:"Serve"}),t.jsx("span",{className:"text-blue-700",children:"PH"})]}),t.jsx("span",{className:"text-sm text-gray-600",children:"Serbisyong Publiko, Abot-Kamay Mo."})]})]}),t.jsxs("div",{className:"text-right text-sm text-gray-800",children:[t.jsx("div",{className:"font-semibold",children:g.toLocaleTimeString()}),t.jsx("div",{children:g.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})}),t.jsxs("main",{className:"relative z-10 container mx-auto px-6 py-8 flex-1",children:[t.jsxs("button",{onClick:()=>gt(-1),className:"px-4 py-2 bg-[#4CAF50] text-white rounded-md hover:bg-[#45a049] transition-colors duration-300 border border-[#3d8b40] shadow-sm hover:shadow-md mr-2 flex items-center gap-2","aria-label":"Go back",children:[t.jsx(Vh,{className:"w-5 h-5"}),t.jsx("span",{children:"Back"})]}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center max-w-7xl mx-auto",children:[t.jsxs("div",{className:"text-center lg:text-left space-y-6",children:[t.jsx("h2",{className:"text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-600 via-green-600 to-blue-600 bg-clip-text text-transparent bg-size-600 animate-gradient",children:"Abot-Kamay mo ang Serbisyong Publiko!"}),t.jsx("p",{className:"text-lg text-gray-600 max-w-lg mx-auto lg:mx-0 leading-relaxed",children:"Access government services conveniently through our digital platform. Fast, secure, and reliable public service at your fingertips."})]}),t.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl p-8 max-w-md mx-auto w-full border border-white/20 hover:shadow-2xl transition-all duration-300 hover:translate-y-[-4px]",children:[t.jsxs("div",{className:"text-center mb-8 space-y-2",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Mag-login"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Punan ang mga kailangan impormasyon upang ma-access ang iyong account"})]}),t.jsxs("form",{className:"space-y-6",onSubmit:q,children:[t.jsx("div",{children:t.jsx("input",{type:"text",id:"username",name:"username",placeholder:"Ilagay ang iyong username o email",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 bg-white/80 backdrop-blur-sm",required:!0,value:s,onChange:Se=>r(Se.target.value)})}),t.jsx("div",{children:t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:m?"text":"password",id:"password",name:"password",placeholder:"Ilagay ang iyong password",className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 bg-white/80 backdrop-blur-sm",required:!0,value:n,onChange:Se=>i(Se.target.value)}),t.jsx("button",{type:"button",onClick:()=>A(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-green-600 transition-colors duration-200","aria-label":"Toggle password visibility",children:m?t.jsx(D2,{className:"w-5 h-5"}):t.jsx(ws,{className:"w-5 h-5"})})]})}),o&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:o}),c&&t.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg text-sm",children:c}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Tandaan ako"})]}),t.jsx("div",{className:"text-sm",children:t.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-800 transition-colors",children:"Nakalimutan ang password?"})})]}),t.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white py-3 px-6 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Mag-login"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t border-gray-300"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"px-2 bg-white text-gray-500",children:"O"})})]}),t.jsx("div",{children:t.jsxs("button",{type:"button",className:"w-full bg-white border border-gray-300 text-gray-700 py-3 px-6 rounded-lg font-semibold hover:shadow-lg transition-all duration-300 transform hover:scale-105 flex items-center justify-center space-x-2",onClick:Qt,children:[t.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})}),t.jsx("span",{children:"Magpatuloy gamit ang Google"})]})}),t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-gray-600 text-sm",children:["Wala pang account?",t.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-800 font-semibold ml-1 transition-colors",onClick:yt,children:"Mag-register dito"})]})})]}),t.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:t.jsxs("div",{className:"p-4 rounded-lg border bg-blue-50 border-blue-200",children:[t.jsx("h3",{className:"text-sm font-medium mb-2 text-blue-800",children:"Mga Paalala sa Seguridad:"}),t.jsxs("ul",{className:"text-xs space-y-1 text-blue-700",children:[t.jsx("li",{children:" Siguraduhing tama ang impormasyong ilalagay"}),t.jsx("li",{children:" Huwag ibahagi ang iyong password sa iba"}),t.jsx("li",{children:" Kung may problema, tumawag sa IT Department"}),t.jsx("li",{children:" Account ay maaaring ma-lock pagkatapos ng 5 failed attempts"})]})]})})]})]})]}),E&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-start justify-center pt-12 px-4 z-50 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[85vh] overflow-hidden border border-gray-100 animate-in",children:[t.jsxs("div",{className:"sticky top-0 w-full bg-gradient-to-r from-green-600 to-green-700 px-6 py-5 text-center z-10 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:t.jsx(aA,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("h2",{className:"text-lg md:text-xl font-bold text-white",children:"Create your Account"}),t.jsx("p",{className:"text-green-100 text-xs",children:"Fill in all required fields to register"})]})]}),t.jsx("button",{type:"button",onClick:Oe,className:"text-white/80 hover:text-white hover:bg-white/20 rounded-full p-1.5 transition-all duration-200",children:t.jsx(ls,{className:"w-5 h-5"})})]}),t.jsxs("form",{id:"registerForm",className:"space-y-5 p-6 overflow-y-auto max-h-[calc(85vh-80px)]",onSubmit:Qe,children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm mb-1 font-medium text-gray-700",children:["First Name",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"firstName",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",value:G.firstName,onChange:W})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm mb-1 font-medium text-gray-700",children:["Last Name",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"lastName",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",value:G.lastName,onChange:W})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm mb-1 font-medium text-gray-700",children:["Middle Name",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"middleName",name:"middleName",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed",value:G.middleName,onChange:W,disabled:le}),t.jsxs("label",{className:"inline-flex items-center mt-2 text-sm text-gray-600 cursor-pointer",children:[t.jsx("input",{type:"checkbox",id:"noMiddleName",className:"mr-2 rounded text-green-600 focus:ring-green-500",checked:le,onChange:ve}),"No middle name"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-1 font-medium text-gray-700",children:"Suffix"}),t.jsx("input",{type:"text",name:"suffix",placeholder:"Jr., Sr., III (optional)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",value:G.suffix,onChange:W})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm mb-1 font-medium text-gray-700",children:["Birthdate",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",name:"birthdate",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",value:G.birthdate,onChange:W})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm mb-1 font-medium text-gray-700",children:["Email Address",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"email",name:"regEmail",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",value:G.regEmail,onChange:W})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm mb-1 font-medium text-gray-700",children:["Mobile Number",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",name:"mobile",required:!0,placeholder:"09XXXXXXXXX",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",value:G.mobile,onChange:W})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm mb-1 font-medium text-gray-700",children:["Address",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"address",required:!0,placeholder:"Lot/Unit, Building, Subdivision",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",value:G.address,onChange:W})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm mb-1 font-medium text-gray-700",children:["House #",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"houseNumber",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",value:G.houseNumber,onChange:W})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm mb-1 font-medium text-gray-700",children:["Street",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"street",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",value:G.street,onChange:W})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm mb-1 font-medium text-gray-700",children:["Barangay",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"barangay",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",value:G.barangay,onChange:W})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm mb-1 font-medium text-gray-700",children:["Password",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:st?"text":"password",id:"regPassword",name:"regPassword",minLength:"10",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg pr-10 focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",value:G.regPassword,onChange:W}),t.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-green-600 transition-colors duration-200",onClick:()=>ce(!st),"aria-label":"Toggle password visibility",children:st?t.jsx(D2,{className:"w-4 h-4"}):t.jsx(ws,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm mb-1 font-medium text-gray-700",children:["Confirm Password",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:tt?"text":"password",id:"confirmPassword",name:"confirmPassword",minLength:"10",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg pr-10 focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",value:G.confirmPassword,onChange:W}),t.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-green-600 transition-colors duration-200",onClick:()=>Ae(!tt),"aria-label":"Toggle confirm password visibility",children:tt?t.jsx(D2,{className:"w-4 h-4"}):t.jsx(ws,{className:"w-4 h-4"})})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center text-sm",children:[t.jsxs("label",{className:"inline-flex items-center",children:[t.jsx("input",{type:"checkbox",id:"agreeTerms",className:"mr-2",required:!0,checked:De,onChange:Se=>me(Se.target.checked)}),t.jsx("span",{children:"I have read, understood, and agreed to the"})]}),t.jsx("button",{type:"button",className:"ml-2 text-green-600 hover:underline",onClick:ze,children:"Terms of Use"})]}),t.jsxs("div",{className:"flex items-center text-sm",children:[t.jsxs("label",{className:"inline-flex items-center",children:[t.jsx("input",{type:"checkbox",id:"agreePrivacy",className:"mr-2",required:!0,checked:Te,onChange:Se=>we(Se.target.checked)}),t.jsx("span",{children:"I have read, understood, and agreed to the"})]}),t.jsx("button",{type:"button",className:"ml-2 text-green-600 hover:underline",onClick:oe,children:"Data Privacy Policy"})]}),t.jsx("p",{className:"text-xs text-gray-600",children:"By clicking on the register button below, I hereby agree to both the Terms of Use and Data Privacy Policy"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-100",children:[t.jsx("button",{type:"button",className:"px-6 py-2.5 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium transition-all duration-200",onClick:Oe,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"px-6 py-2.5 rounded-lg bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-[1.02] flex items-center gap-2",children:[t.jsx(aA,{className:"w-4 h-4"}),"Register"]})]})]})]})}),y&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[80vh] overflow-y-auto border border-gray-100",children:[t.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 flex items-center justify-between z-10",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-9 h-9 bg-white/20 rounded-full flex items-center justify-center",children:t.jsx(Kt,{className:"w-5 h-5 text-white"})}),t.jsx("h3",{className:"text-lg font-bold text-white",children:"Terms of Service Agreement"})]}),t.jsx("button",{type:"button",className:"text-white/80 hover:text-white hover:bg-white/20 rounded-full p-1.5 transition-all duration-200",onClick:Le,children:t.jsx(ls,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"px-6 py-4 space-y-4 text-sm leading-6",children:[t.jsx("p",{children:t.jsx("strong",{children:"Welcome to GoServePH!"})}),t.jsx("p",{children:'This GoServePH Services Agreement ("Agreement") is a binding legal contract for the use of our software systemswhich handle data input, monitoring, processing, and analytics("Services") between GoServePH ("us," "our," or "we") and you, the registered user ("you" or "user").'}),t.jsx("p",{children:"This Agreement details the terms and conditions for using our Services. By accessing or using any GoServePH Services, you agree to these terms. If you don't understand any part of this Agreement, please contact us at info@goserveph.com."}),t.jsx("h4",{className:"font-semibold",children:"OVERVIEW OF THIS AGREEMENT"}),t.jsx("p",{children:"This document outlines the terms for your use of the GoServePH system:"}),t.jsxs("table",{className:"w-full text-left text-xs",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-1 pr-4",children:"Section"}),t.jsx("th",{className:"py-1",children:"Topic"})]})}),t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"py-1 pr-4",children:"Section A"}),t.jsx("td",{className:"py-1",children:"General Account Setup and Use"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-1 pr-4",children:"Section B"}),t.jsx("td",{className:"py-1",children:"Technology, Intellectual Property, and Licensing"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-1 pr-4",children:"Section C"}),t.jsx("td",{className:"py-1",children:"Payment Terms, Fees, and Billing"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-1 pr-4",children:"Section D"}),t.jsx("td",{className:"py-1",children:"Data Usage, Privacy, and Security"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-1 pr-4",children:"Section E"}),t.jsx("td",{className:"py-1",children:"Additional Legal Terms and Disclaimers"})]})]})]}),t.jsx("h4",{className:"font-semibold",children:"SECTION A: GENERAL TERMS"}),t.jsx("p",{children:t.jsx("strong",{children:"1. Your Account and Registration"})}),t.jsx("p",{children:"a. Account Creation: To use our Services, you must create an Account. Your representative (Representative) must provide us with required details, including your entity's name, address, contact person, email, phone number, relevant ID/tax number, and the nature of your business/activities."}),t.jsx("p",{children:"b. Review and Approval: We reserve the right to review and approve your application, which typically takes at least two (2) business days. We can deny or reject any application at our discretion."}),t.jsx("p",{children:"c. Eligibility: Only businesses, institutions, and other entities based in the Philippines are eligible to apply for a GoServePH Account."}),t.jsx("p",{children:"d. Representative Authority: You confirm that your Representative has the full authority to provide your information and legally bind your entity to this Agreement. We may ask for proof of this authority."}),t.jsx("p",{children:"e. Validation: We may require additional documentation at any time (e.g., business licenses, IDs) to verify your entity's ownership, control, and the information you provided."}),t.jsx("p",{children:t.jsx("strong",{children:"2. Services and Support"})}),t.jsx("p",{children:'We provide support for general account inquiries and issues that prevent the proper use of the system ("System Errors"). Support includes resources available through our in-app Ticketing System and website documentation ("Documentation"). For further questions, contact us at support@goserveph.com.'}),t.jsx("p",{children:t.jsx("strong",{children:"3. Service Rules and Restrictions"})}),t.jsx("p",{children:'a. Lawful Use: You must use the Services lawfully and comply with all applicable Philippine laws, rules, and regulations ("Laws") regarding your use of the Services and the transactions you facilitate ("Transactions").'}),t.jsx("p",{children:"b. Prohibited Activities: You may not use the Services to facilitate illegal transactions, or for personal/household use. Specifically, you must not, nor allow others to:"}),t.jsxs("ul",{className:"list-disc pl-5",children:[t.jsx("li",{children:"Access non-public systems or data."}),t.jsx("li",{children:"Copy, resell, or distribute the Services, Documentation, or system content."}),t.jsx("li",{children:"Use, transfer, or access data you do not own or have no documented rights to use."}),t.jsx("li",{children:"Act as a service agent for the Services."}),t.jsx("li",{children:"Transfer your rights under this Agreement."}),t.jsx("li",{children:"Bypass technical limitations or enable disabled features."}),t.jsx("li",{children:"Reverse engineer the Services (except where legally permitted)."}),t.jsx("li",{children:"Interfere with the normal operation of the Services or impose an unreasonably large load on the system."})]}),t.jsx("p",{children:t.jsx("strong",{children:"4. Electronic Notices and Consent"})}),t.jsx("p",{children:"a. Electronic Consent: By registering, you provide your electronic signature and consent to receive all notices and disclosures from us electronically (via our website, email, or text message), which has the same legal effect as a physical signature."}),t.jsx("p",{children:"b. Delivery: We are not liable for non-receipt of notices due to issues beyond our control (e.g., network outages, incorrect contact details, firewall restrictions). Notices posted or emailed are considered received within 24 hours."}),t.jsx("p",{children:"c. Text Messages: You authorize us to use text messages to verify your account control (like two-step verification) and provide critical updates. Standard carrier charges may apply."}),t.jsx("p",{children:"d. Withdrawing Consent: You can withdraw your consent to electronic notices only by terminating your Account."}),t.jsx("p",{children:t.jsx("strong",{children:"5. Termination"})}),t.jsx("p",{children:"a. Agreement Term: This Agreement starts upon registration and continues until terminated by you or us."}),t.jsx("p",{children:"b. Termination by You: You can terminate by emailing a closure request to info@goserveph.com. Your Account will be closed within 120 business days of receipt."}),t.jsx("p",{children:"c. Termination by Us: We may terminate this Agreement, suspend your Account, or close it at any time, for any reason, by providing you notice. Immediate suspension or termination may occur if:"}),t.jsxs("ul",{className:"list-disc pl-5",children:[t.jsx("li",{children:"You pose a significant fraud or credit risk."}),t.jsx("li",{children:"You use the Services in a prohibited manner or violate this Agreement."}),t.jsx("li",{children:"Law requires us to do so."})]}),t.jsx("p",{children:"d. Effect of Termination: Upon termination:"}),t.jsxs("ul",{className:"list-disc pl-5",children:[t.jsx("li",{children:"All licenses granted to you end."}),t.jsx("li",{children:"We may delete your data and information (though we have no obligation to do so)."}),t.jsx("li",{children:"We are not liable to you for any damages related to the termination, suspension, or data deletion."}),t.jsx("li",{children:"You remain liable for any outstanding fees, fines, or financial obligations incurred before termination."})]}),t.jsx("h4",{className:"font-semibold",children:"SECTION B: TECHNOLOGY"}),t.jsx("p",{children:t.jsx("strong",{children:"1. System Access and Updates"})}),t.jsx("p",{children:'We provide access to the web system and/or mobile application ("Application"). You must only use the Application as described in the Documentation. We will update the Application and Documentation periodically, which may add or remove features, and we will notify you of material changes.'}),t.jsx("p",{children:t.jsx("strong",{children:"2. Ownership of Intellectual Property (IP)"})}),t.jsx("p",{children:"a. Your Data: You retain ownership of all your master data, raw transactional data, and generated reports gathered from the system."}),t.jsx("p",{children:'b. GoServePH IP: We exclusively own all rights, titles, and interests in the patents, copyrights, trademarks, system designs, and documentation ("GoServePH IP"). All rights in GoServePH IP not expressly granted to you are reserved by us.'}),t.jsx("p",{children:'c. Ideas: If you submit comments or ideas for system improvements ("Ideas"), you agree that we are free to use these Ideas without any attribution or compensation to you.'}),t.jsx("p",{children:t.jsx("strong",{children:"3. License Coverage"})}),t.jsx("p",{children:"We grant you a non-exclusive and non-transferable license to electronically access and use the GoServePH IP only as described in this Agreement. We are not selling the IP to you, and you cannot sublicense it. We may revoke this license if you violate the Agreement."}),t.jsx("p",{children:t.jsx("strong",{children:"4. References to Our Relationship"})}),t.jsx("p",{children:"During the term of this Agreement, both you and we may publicly identify the other party as the service provider or client, respectively. If you object to us identifying you as a client, you must notify us at info@goserveph.com. Upon termination, both parties must remove all public references to the relationship."}),t.jsx("h4",{className:"font-semibold",children:"SECTION C: PAYMENT TERMS AND CONDITIONS"}),t.jsx("p",{children:t.jsx("strong",{children:"1. Service Fees"})}),t.jsx("p",{children:"We will charge the Fees for set-up, access, support, penalties, and other transactions as described on the GoServePH website. We may revise the Fees at any time, with at least 30 days' notice before the revisions apply to you."}),t.jsx("p",{children:t.jsx("strong",{children:"2. Payment Terms and Schedule"})}),t.jsx("p",{children:'a. Billing: Your monthly bill for the upcoming month is generated by the system on the 21st day of the current month and is due after 5 days. Billing is based on the number of registered users ("End-User") as of the 20th day.'}),t.jsx("p",{children:"b. Payment Method: All payments must be settled via our third-party Payment System Provider, PayPal. You agree to abide by all of PayPal's terms, and we are not responsible for any issues with their service."}),t.jsx("p",{children:t.jsx("strong",{children:"3. Taxes"})}),t.jsx("p",{children:"Fees exclude applicable taxes. You are solely responsible for remitting all taxes for your business to the appropriate Philippine tax and revenue authorities."}),t.jsx("p",{children:t.jsx("strong",{children:"4. Payment Processing"})}),t.jsx("p",{children:"We are not a bank and do not offer services regulated by the Bangko Sentral ng Pilipinas. We reserve the right to reject your application or terminate your Account if you are ineligible to use PayPal services."}),t.jsx("p",{children:t.jsx("strong",{children:"5. Processing Disputes and Refunds"})}),t.jsx("p",{children:"You must report disputes and refund requests by emailing us at billing@goserveph.com. Disputes will only be investigated if reported within 60 days from the billing date. If a refund is warranted, it will be issued as a credit memo for use on future bills."}),t.jsx("h4",{className:"font-semibold",children:"SECTION D: DATA USAGE, PRIVACY AND SECURITY"}),t.jsx("p",{children:t.jsx("strong",{children:"1. Data Usage Overview"})}),t.jsx("p",{children:"Data security is a top priority. This section outlines our obligations when handling information."}),t.jsx("p",{children:"'PERSONAL DATA' is information that relates to and can identify a person."}),t.jsx("p",{children:"'USER DATA' is information that describes your business, operations, products, or services."}),t.jsx("p",{children:"'GoServePH DATA' is transactional data over our infrastructure, fraud analysis info, aggregated data, and other information originating from the Services."}),t.jsx("p",{children:"'DATA' means all of the above."}),t.jsx("p",{children:"We use Data to provide Services, mitigate fraud, and improve our systems. We do not provide Personal Data to unaffiliated parties for marketing purposes."}),t.jsx("p",{children:t.jsx("strong",{children:"2. Data Protection and Privacy"})}),t.jsx("p",{children:"a. Confidentiality: You will protect all Data received via the Services and only use it in connection with this Agreement. Neither party may use Personal Data for marketing without express consent. We may disclose Data if required by legal instruments (e.g., subpoena)."}),t.jsx("p",{children:"b. Privacy Compliance: You affirm that you comply with all Laws governing the privacy and protection of the Data you provide to or access through the Services. You are responsible for obtaining all necessary consents from End-Users to allow us to collect, use, and disclose their Data."}),t.jsx("p",{children:"c. Data Processing Roles: You shall be the data controller, and we shall be the data intermediary. We will process the Personal Data only according to this Agreement and will implement appropriate measures to protect it."}),t.jsx("p",{children:"d. Data Mining: You may not mine the database or any part of it without our express consent."}),t.jsx("p",{children:t.jsx("strong",{children:"3. Security Controls"})}),t.jsx("p",{children:'We are responsible for protecting your Data using commercially reasonable administrative, technical, and physical security measures. However, no system is impenetrable. You agree that you are responsible for implementing your own firewall, anti-virus, anti-phishing, and other security measures ("Security Controls"). We may suspend your Account to maintain the integrity of the Services, and you waive the right to claim losses that result from such actions.'}),t.jsx("h4",{className:"font-semibold",children:"SECTION E: ADDITIONAL LEGAL TERMS"}),t.jsx("p",{children:t.jsx("strong",{children:"1. Right to Amend"})}),t.jsx("p",{children:"We can change or add to these terms at any time by posting the changes on our website. Your continued use of the Services constitutes your acceptance of the modified Agreement."}),t.jsx("p",{children:t.jsx("strong",{children:"2. Assignment"})}),t.jsx("p",{children:"You cannot assign this Agreement or your Account rights to anyone else without our prior written consent. We can assign this Agreement without your consent."}),t.jsx("p",{children:t.jsx("strong",{children:"3. Force Majeure"})}),t.jsx("p",{children:"Neither party will be liable for delays or non-performance caused by events beyond reasonable control, such as utility failures, acts of nature, or war. This does not excuse your obligation to pay fees."}),t.jsx("p",{children:t.jsx("strong",{children:"4. Representations and Warranties"})}),t.jsx("p",{children:"By agreeing, you warrant that:"}),t.jsxs("ul",{className:"list-disc pl-5",children:[t.jsx("li",{children:"You are eligible to use the Services and have the authority to enter this Agreement."}),t.jsx("li",{children:"All information you provide is accurate and complete."}),t.jsx("li",{children:"You will comply with all Laws."}),t.jsx("li",{children:"You will not use the Services for fraudulent or illegal purposes."})]}),t.jsx("p",{children:t.jsx("strong",{children:"5. No Warranties"})}),t.jsx("p",{children:'We provide the Services and GoServePH IP "AS IS" and "AS AVAILABLE," without any express, implied, or statutory warranties of title, merchantability, fitness for a particular purpose, or non-infringement.'}),t.jsx("p",{children:t.jsx("strong",{children:"6. Limitation of Liability"})}),t.jsx("p",{children:"We shall not be responsible or liable to you for any indirect, punitive, incidental, special, consequential, or exemplary damages resulting from your use or inability to use the Services, lost profits, personal injury, or property damage. We are not liable for damages arising from:"}),t.jsxs("ul",{className:"list-disc pl-5",children:[t.jsx("li",{children:"Hacking, tampering, or unauthorized access to your Account."}),t.jsx("li",{children:"Your failure to implement Security Controls."}),t.jsx("li",{children:"Use of the Services inconsistent with the Documentation."}),t.jsx("li",{children:"Bugs, viruses, or interruptions to the Services."})]}),t.jsx("p",{children:"This Agreement and all incorporated policies constitute the entire agreement between you and GoServePH."})]}),t.jsx("div",{className:"sticky bottom-0 bg-white border-t px-6 py-4 flex justify-end",children:t.jsx("button",{type:"button",className:"px-6 py-2.5 rounded-lg bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold transition-all duration-300 shadow-md hover:shadow-lg",onClick:Le,children:"I Understand"})})]})}),B&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[80vh] overflow-y-auto border border-gray-100",children:[t.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-green-600 to-green-700 px-6 py-4 flex items-center justify-between z-10",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-9 h-9 bg-white/20 rounded-full flex items-center justify-center",children:t.jsx(M6,{className:"w-5 h-5 text-white"})}),t.jsx("h3",{className:"text-lg font-bold text-white",children:"Data Privacy Policy"})]}),t.jsx("button",{type:"button",className:"text-white/80 hover:text-white hover:bg-white/20 rounded-full p-1.5 transition-all duration-200",onClick:he,children:t.jsx(ls,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"px-6 py-4 space-y-4 text-sm leading-6",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"GoServePH Data Privacy Policy"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Protecting the information you and your users handle through our system is our highest priority."})," This policy outlines how GoServePH manages, secures, and uses your data."]}),t.jsx("h4",{className:"font-semibold",children:"1. How We Define and Use Data"}),t.jsx("p",{children:"In this policy, we define the types of data that flow through the GoServePH system:"}),t.jsxs("table",{className:"w-full text-left text-xs",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-1 pr-4",children:"Term"}),t.jsx("th",{className:"py-1",children:"Definition"})]})}),t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"py-1 pr-4",children:"Personal Data"}),t.jsx("td",{className:"py-1",children:"Any information that can identify a specific person, whether directly or indirectly, shared or accessible through the Services."})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-1 pr-4",children:"User Data"}),t.jsx("td",{className:"py-1",children:"Information that describes your business operations, services, or internal activities."})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-1 pr-4",children:"GoServePH Data"}),t.jsx("td",{className:"py-1",children:"Details about transactions and activity on our platform, information used for fraud detection, aggregated data, and any non-personal information generated by our system."})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-1 pr-4",children:"DATA"}),t.jsx("td",{className:"py-1",children:"Used broadly to refer to all the above: Personal Data, User Data, and GoServePH Data."})]})]})]}),t.jsx("h4",{className:"font-semibold",children:"Our Commitment to Data Use"}),t.jsx("p",{children:"We analyze and manage data only for the following critical purposes:"}),t.jsxs("ul",{className:"list-disc pl-5",children:[t.jsx("li",{children:"To provide, maintain, and improve the GoServePH Services for you and all other users."}),t.jsx("li",{children:"To detect and mitigate fraud, financial loss, or other harm to you or other users."}),t.jsx("li",{children:"To develop and enhance our products, systems, and tools."})]}),t.jsx("p",{children:"We will not sell or share Personal Data with unaffiliated parties for their marketing purposes. By using our system, you consent to our use of your Data in this manner."}),t.jsx("h4",{className:"font-semibold",children:"2. Data Protection and Compliance"}),t.jsx("p",{children:t.jsx("strong",{children:"Confidentiality"})}),t.jsx("p",{children:"We commit to using Data only as permitted by our agreement or as specifically directed by you. You, in turn, must protect all Data you access through GoServePH and use it only in connection with our Services. Neither party may use Personal Data to market to third parties without explicit consent."}),t.jsx("p",{children:"We will only disclose Data when legally required to do so, such as through a subpoena, court order, or search warrant."}),t.jsx("p",{children:t.jsx("strong",{children:"Privacy Compliance and Responsibilities"})}),t.jsxs("p",{children:[t.jsx("em",{children:"Your Legal Duty:"})," You affirm that you are, and will remain, compliant with all applicable Philippine laws (including the Data Privacy Act of 2012) governing the collection, protection, and use of the Data you provide to us."]}),t.jsxs("p",{children:[t.jsx("em",{children:"Consent:"})," You are responsible for obtaining all necessary rights and consents from your End-Users to allow us to collect, use, and store their Personal Data."]}),t.jsxs("p",{children:[t.jsx("em",{children:"End-User Disclosure:"})," You must clearly inform your End-Users that GoServePH processes transactions for you and may receive their Personal Data as part of that process."]}),t.jsx("p",{children:t.jsx("strong",{children:"Data Processing Roles"})}),t.jsx("p",{children:"When we process Personal Data on your behalf, we operate under the following legal roles:"}),t.jsxs("ul",{className:"list-disc pl-5",children:[t.jsx("li",{children:"You are the Data Controller (you determine why and how the data is processed)."}),t.jsx("li",{children:"We are the Data Intermediary (we process data strictly according to your instructions)."})]}),t.jsx("p",{children:"As the Data Intermediary, we commit to:"}),t.jsxs("ul",{className:"list-disc pl-5",children:[t.jsx("li",{children:"Implementing appropriate security measures to protect the Personal Data we process."}),t.jsx("li",{children:"Not retaining Personal Data longer than necessary to fulfill the purposes set out in our agreement."})]}),t.jsx("p",{children:"You acknowledge that we rely entirely on your instructions. Therefore, we are not liable for any claims resulting from our actions that were based directly or indirectly on your instructions."}),t.jsx("p",{children:t.jsx("strong",{children:"Prohibited Activities"})}),t.jsx("p",{children:"You are strictly prohibited from data mining the GoServePH database or any portion of it without our express written permission."}),t.jsx("p",{children:t.jsx("strong",{children:"Breach Notification"})}),t.jsx("p",{children:'If we become aware of an unauthorized acquisition, disclosure, change, or loss of Personal Data on our systems (a "Breach"), we will notify you and provide sufficient information to help you mitigate any negative impact, consistent with our legal obligations.'}),t.jsx("h4",{className:"font-semibold",children:"3. Account Deactivation and Data Deletion"}),t.jsx("p",{children:t.jsx("strong",{children:"Initiating Deactivation"})}),t.jsx("p",{children:"If you wish to remove your personal information from our systems, you must go to your Edit Profile page and click the 'Deactivate Account' button. This action initiates the data deletion and account deactivation process."}),t.jsx("p",{children:t.jsx("strong",{children:"Data Retention"})}),t.jsx("p",{children:"Upon deactivation, all of your Personal Identifying Information will be deleted from our systems."}),t.jsxs("p",{children:[t.jsx("em",{children:"Important Note:"})," Due to the nature of our role as a Government Services Management System, and for legal, accounting, and audit purposes, we are required to retain some of your non-personal account activity history and transactional records. You will receive a confirmation email once your request has been fully processed."]}),t.jsx("h4",{className:"font-semibold",children:"4. Security Controls and Responsibilities"}),t.jsx("p",{children:t.jsx("strong",{children:"Our Security"})}),t.jsx("p",{children:"We are responsible for implementing commercially reasonable administrative, technical, and physical procedures to protect Data from unauthorized access, loss, or modification. We comply with all applicable Laws in handling Data."}),t.jsx("p",{children:t.jsx("strong",{children:"Your Security Controls"})}),t.jsx("p",{children:'You acknowledge that no security system is perfect. You agree to implement your own necessary security measures ("Security Controls"), which must include:'}),t.jsxs("ul",{className:"list-disc pl-5",children:[t.jsx("li",{children:"Firewall and anti-virus systems."}),t.jsx("li",{children:"Anti-phishing systems."}),t.jsx("li",{children:"End-User and device management policies."}),t.jsx("li",{children:"Data handling protocols."})]}),t.jsx("p",{children:"We reserve the right to suspend your Account or the Services if necessary to maintain system integrity and security, or to prevent harm. You waive any right to claim losses that result from a Breach or any action we take to prevent harm."})]}),t.jsx("div",{className:"sticky bottom-0 bg-white border-t px-6 py-4 flex justify-end",children:t.jsx("button",{type:"button",className:"px-6 py-2.5 rounded-lg bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold transition-all duration-300 shadow-md hover:shadow-lg",onClick:he,children:"I Understand"})})]})}),T&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full border border-gray-100 overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 px-6 py-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-9 h-9 bg-white/20 rounded-full flex items-center justify-center",children:t.jsx(Pr,{className:"w-5 h-5 text-white"})}),t.jsx("h3",{className:"text-lg font-bold text-white",children:"OTP Verification"})]}),t.jsx("button",{type:"button",className:"text-white/80 hover:text-white hover:bg-white/20 rounded-full p-1.5 transition-all duration-200",onClick:_e,children:t.jsx(ls,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"px-6 py-6 space-y-6",children:[t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx("div",{className:"w-16 h-16 bg-green-50 rounded-full flex items-center justify-center mx-auto border-2 border-green-200",children:t.jsx(cw,{className:"w-8 h-8 text-green-600"})}),t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Enter Verification Code"}),t.jsxs("p",{className:"text-gray-500 text-sm",children:["A 6-digit verification code has been sent to ",t.jsx("span",{className:"font-semibold text-gray-700",children:I})]})]}),t.jsxs("form",{onSubmit:xt,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"6-Digit OTP Code"}),t.jsx("div",{className:"flex justify-between space-x-2",children:D.map((Se,Ve)=>t.jsx("input",{id:`otp-${Ve}`,type:"text",inputMode:"numeric",maxLength:"1",value:Se,onChange:et=>Ze(Ve,et.target.value),onKeyDown:et=>J(Ve,et),onPaste:He,className:"w-12 h-12 text-center text-lg font-semibold border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",autoFocus:Ve===0},Ve))})]}),Y&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:Y}),L&&t.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg text-sm",children:L}),t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("button",{type:"button",onClick:Ct,disabled:O>0||ne,className:`text-sm font-medium ${O>0||ne?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-800 transition-colors"}`,children:ne?"Sending...":O>0?`Resend in ${O}s`:"Resend OTP"})}),t.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white py-3 px-6 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Verify OTP"})]}),t.jsxs("div",{className:"p-4 rounded-xl border bg-amber-50 border-amber-200",children:[t.jsxs("h5",{className:"text-sm font-semibold mb-2 text-amber-800 flex items-center",children:[t.jsx(Pr,{className:"w-4 h-4 mr-2 text-amber-600"}),"Security Notice"]}),t.jsxs("ul",{className:"text-xs space-y-1.5 text-amber-700",children:[t.jsxs("li",{className:"flex items-start gap-1.5",children:[t.jsx("span",{className:"mt-0.5 text-amber-500",children:""})," Never share your OTP with anyone"]}),t.jsxs("li",{className:"flex items-start gap-1.5",children:[t.jsx("span",{className:"mt-0.5 text-amber-500",children:""})," This OTP will expire in 10 minutes"]}),t.jsxs("li",{className:"flex items-start gap-1.5",children:[t.jsx("span",{className:"mt-0.5 text-amber-500",children:""})," Contact support if you didn't request this code"]})]})]})]})]})}),t.jsx(dw,{}),t.jsx("style",{children:`
        @keyframes gradient {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        .animate-gradient {
          background-size: 200% 200%;
          animation: gradient 6s ease infinite;
        }
      `})]})}function QV(){const[a,e]=C.useState(new Date),[s,r]=C.useState(!0),[n,i]=C.useState(!1),[o,l]=C.useState(!1),[c,u]=C.useState(!1),[m,A]=C.useState({firstName:"",lastName:"",middleName:"",suffix:"",birthdate:"",regEmail:"",mobile:"",address:"",houseNumber:"",street:"",barangay:"",regPassword:"",confirmPassword:""}),[g,p]=C.useState(!1),[v,b]=C.useState(!1),[y,w]=C.useState(!1),[B,j]=C.useState(null),[E,S]=C.useState(["","","","","",""]),[T,M]=C.useState(""),[D,P]=C.useState(""),[Y,Q]=C.useState(!1),[L,ae]=C.useState(0),[ne,V]=C.useState(""),[O,X]=C.useState({}),$=ka();C.useEffect(()=>{const tt=setInterval(()=>{e(new Date)},1e3);return()=>clearInterval(tt)},[]),C.useEffect(()=>{if(L>0){const tt=setTimeout(()=>ae(L-1),1e3);return()=>clearTimeout(tt)}},[L]),C.useEffect(()=>{let tt=window.scrollY;const Ae=()=>{const gt=window.scrollY,q=gt>tt?"down":"up";q!=="down"&&gt>50?r(!0):q==="down"&&gt>50&&r(!1),tt=gt>0?gt:0};return window.addEventListener("scroll",Ae),()=>window.removeEventListener("scroll",Ae)},[]);const H=tt=>{const{name:Ae,value:gt}=tt.target;if(O[Ae]&&X(q=>({...q,[Ae]:""})),Ae==="mobile"){const q=gt.replace(/\D/g,"");q.length<=10&&A(Qt=>({...Qt,[Ae]:q}))}else A(q=>({...q,[Ae]:gt}))},te=tt=>{p(tt.target.checked),A(Ae=>({...Ae,middleName:tt.target.checked?"N/A":""}))},K=()=>{const tt={};m.firstName.trim()||(tt.firstName="First name is required"),m.lastName.trim()||(tt.lastName="Last name is required"),!g&&!m.middleName.trim()&&(tt.middleName="Middle name is required");const Ae=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return m.regEmail.trim()?Ae.test(m.regEmail)||(tt.regEmail="Please enter a valid email address"):tt.regEmail="Email is required",m.mobile.trim()?/^\d{10}$/.test(m.mobile)||(tt.mobile="Mobile number must be 10 digits (e.g., 9123456789)"):tt.mobile="Mobile number is required",m.birthdate||(tt.birthdate="Birthdate is required"),m.address.trim()||(tt.address="Address is required"),m.houseNumber.trim()||(tt.houseNumber="House number is required"),m.street.trim()||(tt.street="Street is required"),m.barangay.trim()||(tt.barangay="Barangay is required"),m.regPassword?m.regPassword.length<10&&(tt.regPassword="Password must be at least 10 characters"):tt.regPassword="Password is required",m.confirmPassword?m.regPassword!==m.confirmPassword&&(tt.confirmPassword="Passwords do not match"):tt.confirmPassword="Please confirm your password",v||(tt.agreeTerms="You must agree to the Terms of Service"),y||(tt.agreePrivacy="You must agree to the Privacy Policy"),X(tt),Object.keys(tt).length===0},I=async tt=>{if(tt.preventDefault(),!K()){const Ae=Object.keys(O)[0];Ae&&document.getElementById(Ae)?.scrollIntoView({behavior:"smooth",block:"center"});return}if(!v||!y){alert("Please agree to both Terms of Service and Privacy Policy");return}try{const Ae=await jx(m.regEmail,"register");if(!Ae.success){alert(Ae.message||"Failed to send OTP");return}V(m.regEmail),S(["","","","","",""]),M(""),P(""),u(!0),ae(30),j({email:m.regEmail,password:m.regPassword,firstName:m.firstName,lastName:m.lastName,middleName:g?"N/A":m.middleName,suffix:m.suffix||"",birthdate:m.birthdate,mobile_number:m.mobile,house_number:m.houseNumber,street:m.street,barangay:m.barangay,city_municipality:"Default City",province:"Default Province",region:"Default Region",zip_code:null})}catch(Ae){console.error(Ae),alert("An error occurred while sending OTP")}},R=(tt,Ae)=>{if(!/^\d?$/.test(Ae))return;const gt=[...E];if(gt[tt]=Ae,S(gt),Ae&&tt<5){const q=document.getElementById(`otp-${tt+1}`);q&&q.focus()}},G=(tt,Ae)=>{if(Ae.key==="Backspace"&&!E[tt]&&tt>0){const gt=document.getElementById(`otp-${tt-1}`);gt&&gt.focus()}},se=tt=>{tt.preventDefault();const gt=tt.clipboardData.getData("text").replace(/\D/g,"").split("").slice(0,6);if(gt.length===6){const q=[...E];gt.forEach((yt,Oe)=>{q[Oe]=yt}),S(q);const Qt=document.getElementById("otp-5");Qt&&Qt.focus()}},le=async tt=>{tt.preventDefault(),M(""),P("");const Ae=E.join("");if(Ae.length!==6){M("Please enter the complete 6-digit OTP.");return}if(!ne){M("No OTP request in progress. Please try again.");return}try{const gt=await OT(ne,Ae,"register");if(!gt.success){M(gt.message||"Invalid OTP");return}if(P("OTP verified successfully! Completing registration..."),B){console.log("Registration data:",B);const q=await RT(B);console.log("Registration response:",q),q.success?q.token?(localStorage.setItem("auth_token",q.token),localStorage.setItem("email",B.email),localStorage.setItem("goserveph_role","user"),localStorage.setItem("goserveph_user_id",q.user_id),localStorage.setItem("goserveph_email",B.email),B.firstName&&localStorage.setItem("goserveph_user_name",`${B.firstName} ${B.lastName}`),sessionStorage.setItem("user_id",q.user_id),sessionStorage.setItem("user_email",B.email),sessionStorage.setItem("role","user"),P("Registration completed successfully! Redirecting to dashboard..."),setTimeout(()=>{De(),me(),$("/user/dashboard")},500)):M("No token received from registration. Please try logging in manually."):M(q.message||"Registration failed after OTP verification")}else M("Registration data not found. Please try again.")}catch(gt){console.error("Registration error:",gt),M("Network error while verifying OTP")}},ye=async()=>{if(!(L>0||!ne)){Q(!0),M(""),P("Resending OTP...");try{const tt=await jx(ne,"register");tt.success?(P("New OTP has been sent to your email."),S(["","","","","",""]),ae(30)):M(tt.message||"Failed to resend OTP")}catch{M("Network error while resending OTP")}Q(!1)}},De=()=>{u(!1),S(["","","","","",""]),M(""),P(""),V(""),ae(0),Q(!1),j(null)},me=()=>{A({firstName:"",lastName:"",middleName:"",suffix:"",birthdate:"",regEmail:"",mobile:"",address:"",houseNumber:"",street:"",barangay:"",regPassword:"",confirmPassword:""}),p(!1),b(!1),w(!1),X({})},Te=()=>i(!0),we=()=>i(!1),st=()=>l(!0),ce=()=>l(!1);return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 relative overflow-hidden",children:[t.jsx("div",{className:"fixed inset-0 z-0 bg-[url('/GovServePH.png')] bg-center bg-contain bg-no-repeat opacity-15"}),t.jsx("div",{className:"fixed inset-0 z-0",children:t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_80%,rgba(76,175,80,0.1)_0%,transparent_50%),radial-gradient(circle_at_80%_20%,rgba(74,144,226,0.1)_0%,transparent_50%),radial-gradient(circle_at_40%_40%,rgba(253,168,17,0.05)_0%,transparent_50%)] animate-pulse"})}),t.jsx("header",{className:`sticky top-0 z-50 bg-white shadow-sm border-b-4 border-[#FDA811] transition-transform duration-300 ${s?"translate-y-0":"-translate-y-full"}`,children:t.jsxs("div",{className:"container mx-auto px-6 py-3 flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:t.jsx("img",{src:"/GSM_logo.png",alt:"Logo",className:"w-10 h-10 object-contain"})}),t.jsxs("div",{className:"flex flex-col leading-tight",children:[t.jsxs("span",{className:"text-xl font-bold",children:[t.jsx("span",{className:"text-blue-700",children:"Go"}),t.jsx("span",{className:"text-green-600",children:"Serve"}),t.jsx("span",{className:"text-blue-700",children:"PH"})]}),t.jsx("span",{className:"text-sm text-gray-600",children:"Serbisyong Publiko, Abot-Kamay Mo."})]})]}),t.jsxs("div",{className:"text-right text-sm text-gray-800",children:[t.jsx("div",{className:"font-semibold",children:a.toLocaleTimeString()}),t.jsx("div",{children:a.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})}),t.jsx("main",{className:"relative z-10 container mx-auto px-4 py-8 flex-1",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create your GoServePH Account"}),t.jsx("p",{className:"text-gray-600",children:"Fill in all required information to register for your account"})]}),t.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl p-6 md:p-8 border border-white/20",children:[t.jsxs("form",{id:"registerForm",className:"space-y-6",onSubmit:I,children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 pb-2 border-b border-gray-200",children:"Personal Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",children:["First Name",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"firstName",name:"firstName",required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 ${O.firstName?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-green-500"}`,value:m.firstName,onChange:H,placeholder:"Enter your first name"}),O.firstName&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:O.firstName})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Last Name",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"lastName",name:"lastName",required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 ${O.lastName?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-green-500"}`,value:m.lastName,onChange:H,placeholder:"Enter your last name"}),O.lastName&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:O.lastName})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Middle Name",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"middleName",name:"middleName",required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 ${O.middleName?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-green-500"}`,value:m.middleName,onChange:H,disabled:g,placeholder:"Enter your middle name"}),t.jsxs("label",{className:"inline-flex items-center mt-2 text-sm",children:[t.jsx("input",{type:"checkbox",id:"noMiddleName",className:"mr-2",checked:g,onChange:te}),"No middle name"]}),O.middleName&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:O.middleName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Suffix"}),t.jsx("input",{type:"text",name:"suffix",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",value:m.suffix,onChange:H,placeholder:"Jr., Sr., III (optional)"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Birthdate",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",id:"birthdate",name:"birthdate",required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 ${O.birthdate?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-green-500"}`,value:m.birthdate,onChange:H}),O.birthdate&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:O.birthdate})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 pb-2 border-b border-gray-200",children:"Contact Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Email Address",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"email",id:"regEmail",name:"regEmail",required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 ${O.regEmail?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-green-500"}`,value:m.regEmail,onChange:H,placeholder:"your.email@example.com"}),O.regEmail&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:O.regEmail})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Mobile Number",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0 px-3 py-3 bg-gray-50 border border-gray-300 border-r-0 rounded-l-lg text-gray-600 text-sm h-[52px] flex items-center",children:"+63"}),t.jsx("input",{type:"tel",id:"mobile",name:"mobile",required:!0,maxLength:"10",className:`w-full px-4 py-3 border border-gray-300 rounded-r-lg focus:ring-2 focus:border-transparent transition-all duration-200 h-[52px] ${O.mobile?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-green-500"}`,value:m.mobile,onChange:H,placeholder:"9123456789"})]}),t.jsxs("div",{className:"flex justify-between mt-1",children:[O.mobile?t.jsx("p",{className:"text-xs text-red-600",children:O.mobile}):t.jsx("p",{className:"text-xs text-gray-500",children:"Format: 9XXXXXXXXX (10 digits)"}),t.jsxs("p",{className:"text-xs text-gray-500",children:[m.mobile.length,"/10 digits"]})]})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 pb-2 border-b border-gray-200",children:"Address Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",children:["House #",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"houseNumber",name:"houseNumber",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 ${O.houseNumber?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-green-500"}`,value:m.houseNumber,onChange:H,placeholder:"123"}),O.houseNumber&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:O.houseNumber})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Street",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"street",name:"street",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 ${O.street?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-green-500"}`,value:m.street,onChange:H,placeholder:"Main Street"}),O.street&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:O.street})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Barangay",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"barangay",name:"barangay",required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 ${O.barangay?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-green-500"}`,value:m.barangay,onChange:H,placeholder:"Enter your barangay"}),O.barangay&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:O.barangay})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Full Address",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",id:"address",name:"address",required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 ${O.address?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-green-500"}`,value:m.address,onChange:H,placeholder:"Lot/Unit, Building, Subdivision, etc."}),O.address&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:O.address})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 pb-2 border-b border-gray-200",children:"Security Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Password",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"password",id:"regPassword",name:"regPassword",minLength:"10",required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 pr-12 ${O.regPassword?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-green-500"}`,value:m.regPassword,onChange:H,placeholder:"At least 10 characters"}),t.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-blue-600 transition-colors",onClick:()=>{const tt=document.getElementById("regPassword");tt.type=tt.type==="password"?"text":"password"},children:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268-2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),O.regPassword&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:O.regPassword}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Minimum 10 characters with letters and numbers"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Confirm Password",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",minLength:"10",required:!0,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 pr-12 ${O.confirmPassword?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-green-500"}`,value:m.confirmPassword,onChange:H,placeholder:"Re-enter your password"}),t.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-blue-600 transition-colors",onClick:()=>{const tt=document.getElementById("confirmPassword");tt.type=tt.type==="password"?"text":"password"},children:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268-2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),O.confirmPassword&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:O.confirmPassword})]})]})]}),t.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx("input",{type:"checkbox",id:"agreeTerms",className:"mt-1 mr-3 h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded",required:!0,checked:v,onChange:tt=>{b(tt.target.checked),O.agreeTerms&&X(Ae=>({...Ae,agreeTerms:""}))}}),t.jsxs("label",{htmlFor:"agreeTerms",className:"text-sm",children:["I have read, understood, and agreed to the"," ",t.jsx("button",{type:"button",className:"text-green-600 hover:underline font-medium",onClick:Te,children:"Terms of Use"})]})]}),O.agreeTerms&&t.jsx("p",{className:"ml-7 text-xs text-red-600",children:O.agreeTerms}),t.jsxs("div",{className:"flex items-start",children:[t.jsx("input",{type:"checkbox",id:"agreePrivacy",className:"mt-1 mr-3 h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded",required:!0,checked:y,onChange:tt=>{w(tt.target.checked),O.agreePrivacy&&X(Ae=>({...Ae,agreePrivacy:""}))}}),t.jsxs("label",{htmlFor:"agreePrivacy",className:"text-sm",children:["I have read, understood, and agreed to the"," ",t.jsx("button",{type:"button",className:"text-green-600 hover:underline font-medium",onClick:st,children:"Data Privacy Policy"})]})]}),O.agreePrivacy&&t.jsx("p",{className:"ml-7 text-xs text-red-600",children:O.agreePrivacy}),t.jsx("p",{className:"text-xs text-gray-600 mt-2 pl-7",children:"By clicking on the register button below, I hereby agree to both the Terms of Use and Data Privacy Policy"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 pt-4",children:[t.jsx(Yf,{to:"/login",className:"w-full sm:w-auto text-center text-blue-600 hover:text-blue-800 font-medium transition-colors py-2 px-4 rounded-lg border border-gray-300 hover:border-blue-300",children:" Back to Login"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-gradient-to-r from-green-600 to-green-700 hover:from-orange-500 hover:to-orange-600 text-white py-3 px-8 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Register Account"})]})]}),t.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:t.jsxs("div",{className:"p-4 rounded-lg border bg-blue-50 border-blue-200",children:[t.jsx("h3",{className:"text-sm font-medium mb-2 text-blue-800",children:"Registration Guidelines:"}),t.jsxs("ul",{className:"text-xs space-y-1 text-blue-700",children:[t.jsx("li",{children:" All fields marked with * are required"}),t.jsx("li",{children:" Password must be at least 10 characters long"}),t.jsx("li",{children:" Mobile number must be 10 digits (e.g., 9123456789)"}),t.jsx("li",{children:" A verification OTP will be sent to your email"}),t.jsx("li",{children:" Ensure your email address is correct and accessible"}),t.jsx("li",{children:" Your mobile number will be used for important notifications"})]})]})})]})]})}),n&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[80vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"GoServePH Terms of Service Agreement"}),t.jsx("button",{type:"button",className:"text-gray-500 hover:text-gray-700 transition-colors",onClick:we,children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"px-6 py-4 space-y-4 text-sm leading-6",children:[t.jsx("p",{children:t.jsx("strong",{children:"Welcome to GoServePH!"})}),t.jsx("p",{children:'This GoServePH Services Agreement ("Agreement") is a binding legal contract for the use of our software systemswhich handle data input, monitoring, processing, and analytics("Services") between GoServePH ("us," "our," or "we") and you, the registered user ("you" or "user").'}),t.jsx("p",{children:"This Agreement details the terms and conditions for using our Services. By accessing or using any GoServePH Services, you agree to these terms. If you don't understand any part of this Agreement, please contact us at info@goserveph.com."}),t.jsx("h4",{className:"font-semibold",children:"OVERVIEW OF THIS AGREEMENT"}),t.jsx("p",{children:"This document outlines the terms for your use of the GoServePH system:"}),t.jsxs("table",{className:"w-full text-left text-xs",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-1 pr-4",children:"Section"}),t.jsx("th",{className:"py-1",children:"Topic"})]})}),t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{className:"py-1 pr-4",children:"Section A"}),t.jsx("td",{className:"py-1",children:"General Account Setup and Use"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-1 pr-4",children:"Section B"}),t.jsx("td",{className:"py-1",children:"Technology, Intellectual Property, and Licensing"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-1 pr-4",children:"Section C"}),t.jsx("td",{className:"py-1",children:"Payment Terms, Fees, and Billing"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-1 pr-4",children:"Section D"}),t.jsx("td",{className:"py-1",children:"Data Usage, Privacy, and Security"})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"py-1 pr-4",children:"Section E"}),t.jsx("td",{className:"py-1",children:"Additional Legal Terms and Disputes"})]})]})]}),t.jsx("p",{children:"By proceeding with registration, you acknowledge that you have read and agreed to these terms."})]}),t.jsx("div",{className:"border-t px-6 py-3 flex justify-end",children:t.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-orange-500 transition-colors",onClick:we,children:"Close"})})]})}),o&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[80vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"GoServePH Data Privacy Policy"}),t.jsx("button",{type:"button",className:"text-gray-500 hover:text-gray-700 transition-colors",onClick:ce,children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"px-6 py-4 space-y-4 text-sm leading-6",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"GoServePH Data Privacy Policy"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Protecting the information you and your users handle through our system is our highest priority."})," This policy outlines how GoServePH manages, secures, and uses your data."]}),t.jsx("p",{children:"We collect personal information such as your name, email address, mobile number, and address to provide you with our services. Your data is stored securely and used only for the purposes of account management, service delivery, and communication related to your use of GoServePH."}),t.jsx("p",{children:"We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction."}),t.jsx("p",{children:"By registering, you consent to the collection and use of your information as described in this policy."})]}),t.jsx("div",{className:"border-t px-6 py-3 flex justify-end",children:t.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-orange-500 transition-colors",onClick:ce,children:"Close"})})]})}),c&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[t.jsxs("div",{className:"px-6 py-4 border-b flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Email Verification"}),t.jsx("button",{type:"button",className:"text-gray-500 hover:text-gray-700 transition-colors",onClick:De,children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"px-6 py-6 space-y-6",children:[t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:t.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Verify Your Email"}),t.jsxs("p",{className:"text-gray-600 text-sm",children:["A 6-digit verification code has been sent to:",t.jsx("br",{}),t.jsx("span",{className:"font-medium",children:ne})]})]}),t.jsxs("form",{onSubmit:le,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"6-Digit Verification Code"}),t.jsx("div",{className:"flex justify-between space-x-2",children:E.map((tt,Ae)=>t.jsx("input",{id:`otp-${Ae}`,type:"text",inputMode:"numeric",maxLength:"1",value:tt,onChange:gt=>R(Ae,gt.target.value),onKeyDown:gt=>G(Ae,gt),onPaste:se,className:"w-12 h-12 text-center text-lg font-semibold border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",autoFocus:Ae===0},Ae))})]}),T&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:T}),D&&t.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg text-sm",children:D}),t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("button",{type:"button",onClick:ye,disabled:L>0||Y,className:`text-sm font-medium ${L>0||Y?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-800 transition-colors"}`,children:Y?"Sending...":L>0?`Resend in ${L}s`:"Resend Code"})}),t.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-orange-500 hover:to-orange-600 text-white py-3 px-6 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Verify & Complete Registration"})]})]})]})}),t.jsx(dw,{}),t.jsx("style",{children:`
        @keyframes gradient {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        .animate-gradient {
          background-size: 200% 200%;
          animation: gradient 6s ease infinite;
        }
      `})]})}const Vn={primary:"#4A90E2",accent:"#FDA811",success:"#4CAF50",danger:"#E53935"};function HV({business_permit_id:a}){const e=ka(),s=[{id:"NEW",title:"NEW",description:"Apply for a new business permit",color:"bg-green-500 hover:bg-green-600"},{id:"RENEWAL",title:"RENEWAL",description:"Renew your existing business permit",color:"bg-blue-500 hover:bg-blue-600"},{id:"SPECIAL",title:"SPECIAL",description:"Apply for special business permit or exemption",color:"bg-purple-500 hover:bg-purple-600"},{id:"LIQUOR_PERMIT",title:"LIQUOR PERMIT",description:"Apply for liquor license and related permits",color:"bg-red-500 hover:bg-red-600"},{id:"AMENDMENT",title:"AMENDMENT",description:"Make changes to your existing business permit",color:"bg-yellow-500 hover:bg-yellow-600"}],r=async l=>{try{const c=await fetch("/backend/barangay_permit/admin_fetch.php");if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const u=await c.json();if(u.success&&Array.isArray(u.data)){const m=u.data.find(A=>String(A.permit_id)===String(l)&&A.status==="approved");return m?{exists:!0,permit_id:m.permit_id,permit:m}:{exists:!1}}return{exists:!1}}catch(c){return console.error("Error verifying Barangay Permit:",c),{exists:!1,error:!0}}},n=async l=>{try{const c=await fetch("/backend/business_permit/admin_fetch.php");if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const u=await c.json();if(u.success&&Array.isArray(u.data)){const m=u.data.find(A=>String(A.applicant_id).trim()===String(l).trim());return m?{exists:!0,applicant_id:m.applicant_id,application:m}:{exists:!1}}return{exists:!1}}catch(c){return console.error("Error verifying Applicant ID:",c),{exists:!1,error:!0}}},i=l=>{const c=s.find(u=>u.id===l);l==="NEW"?dt.fire({title:"Do you have an existing Barangay Permit?",html:`
          <div style="text-align: center; padding: 10px 0;">
            <p style="margin-bottom: 10px;">Before applying for a business permit, we need to check if you already have a valid Barangay Permit.</p>
            <p style="font-size: 0.9rem; color: #666;">If you don't have one, you will be redirected to the Barangay Permit application page.</p>
          </div>
        `,icon:"question",showCancelButton:!0,showDenyButton:!0,confirmButtonColor:Vn.success,cancelButtonColor:"#9CA3AF",denyButtonColor:Vn.primary,confirmButtonText:"Yes, I have one",cancelButtonText:"No",denyButtonText:"Redirect me to apply",customClass:{popup:"swal-wide",title:"swal-title-center",htmlContainer:"swal-text-center"}}).then(async u=>{if(u.isConfirmed){const{value:m}=await dt.fire({title:"Enter Barangay Permit ID",html:`
              <div style="text-align: center; padding: 10px 0;">
                <p style="margin-bottom: 15px; font-size: 0.95rem;">Please enter your Barangay Permit ID to verify your permit.</p>
              </div>
            `,input:"text",inputPlaceholder:"e.g., 2041",showCancelButton:!0,confirmButtonColor:Vn.success,cancelButtonColor:"#9CA3AF",confirmButtonText:"Verify",cancelButtonText:"Cancel",customClass:{popup:"swal-wide",title:"swal-title-center",htmlContainer:"swal-text-center"},inputValidator:A=>{if(!A)return"Please enter your Barangay Permit ID"}});if(m){dt.fire({title:"Verifying...",html:'<p style="text-align: center;">Checking your Barangay Permit ID...</p>',allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{dt.showLoading()}});const A=await r(m);A.exists?dt.fire({title:"Permit Verified!",html:`
                  <div style="text-align: center; padding: 10px 0;">
                    <p style="margin-bottom: 10px; color: ${Vn.success};"> Your Barangay Permit is valid and approved.</p>
                    <hr style="margin: 15px 0; border: none; border-top: 1px solid #ddd;">
                    <p style="margin-bottom: 10px;">You have selected: <strong style="color: ${Vn.primary}">${c?.title}</strong></p>
                    <p style="font-size: 0.9rem; color: #666;">${c?.description}</p>
                  </div>
                `,icon:"success",showCancelButton:!0,confirmButtonColor:Vn.success,cancelButtonColor:"#9CA3AF",confirmButtonText:"Continue",cancelButtonText:"Cancel",customClass:{popup:"swal-wide",title:"swal-title-center",htmlContainer:"swal-text-center"}}).then(g=>{g.isConfirmed&&e("/user/business/new",{state:{application_type:l,barangay_permit_id:A.permit_id}})}):dt.fire({title:"Permit Not Found",html:`
                  <div style="text-align: center; padding: 10px 0;">
                    <p style="margin-bottom: 10px; color: ${Vn.danger};">There is no ID existing or your permit is not approved yet.</p>
                    <p style="font-size: 0.9rem; color: #666;">You need to apply for a Barangay Permit first before proceeding with a Business Permit application.</p>
                  </div>
                `,icon:"error",showDenyButton:!0,showCancelButton:!1,showConfirmButton:!1,denyButtonColor:Vn.primary,denyButtonText:"Apply for Barangay Permit",customClass:{popup:"swal-wide",title:"swal-title-center",htmlContainer:"swal-text-center"}}).then(g=>{g.isDenied&&e("/user/barangay/new")})}}else u.isDenied&&e("/user/barangay/new")}):dt.fire({title:"Do you have an existing Business Permit?",html:`
          <div style="text-align: center; padding: 10px 0;">
            <p style="margin-bottom: 10px;">To proceed with <strong>${c?.title}</strong>, we need to verify your existing Business Permit.</p>
            <p style="font-size: 0.9rem; color: #666;">${c?.description}</p>
          </div>
        `,icon:"question",showCancelButton:!0,confirmButtonColor:Vn.success,cancelButtonColor:"#9CA3AF",confirmButtonText:"Yes, I have one",cancelButtonText:"No",customClass:{popup:"swal-wide",title:"swal-title-center",htmlContainer:"swal-text-center"}}).then(async u=>{if(u.isConfirmed){const{value:m}=await dt.fire({title:"Enter Business Permit Applicant ID",html:`
              <div style="text-align: center; padding: 10px 0;">
                <p style="margin-bottom: 15px; font-size: 0.95rem;">Please enter your Business Permit Applicant ID to verify your existing application.</p>
              </div>
            `,input:"text",inputPlaceholder:"e.g., BUS-2026-1234",showCancelButton:!0,confirmButtonColor:Vn.success,cancelButtonColor:"#9CA3AF",confirmButtonText:"Verify",cancelButtonText:"Cancel",customClass:{popup:"swal-wide",title:"swal-title-center",htmlContainer:"swal-text-center"},inputValidator:A=>{if(!A)return"Please enter your Applicant ID"}});if(m){dt.fire({title:"Verifying...",html:'<p style="text-align: center;">Checking your Applicant ID...</p>',allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>{dt.showLoading()}});const A=await n(m);A.exists?dt.fire({title:"Verification Complete!",html:`
                  <div style="text-align: center; padding: 10px 0;">
                    <p style="margin-bottom: 10px; color: ${Vn.success};"> Your Business Permit Applicant ID is verified.</p>
                    <hr style="margin: 15px 0; border: none; border-top: 1px solid #ddd;">
                    <p style="margin-bottom: 10px;">You have selected: <strong style="color: ${Vn.primary}">${c?.title}</strong></p>
                    <p style="font-size: 0.9rem; color: #666;">${c?.description}</p>
                  </div>
                `,icon:"success",showCancelButton:!0,confirmButtonColor:Vn.success,cancelButtonColor:"#9CA3AF",confirmButtonText:"Continue",cancelButtonText:"Cancel",customClass:{popup:"swal-wide",title:"swal-title-center",htmlContainer:"swal-text-center"}}).then(g=>{g.isConfirmed&&e({RENEWAL:"/user/business/renewal",SPECIAL:"/user/business/special",LIQUOR_PERMIT:"/user/business/liquor",AMENDMENT:"/user/business/amendment"}[l],{state:{application_type:l,applicant_id:A.applicant_id}})}):dt.fire({title:"Applicant ID Not Found",html:`
                  <div style="text-align: center; padding: 10px 0;">
                    <p style="margin-bottom: 10px; color: ${Vn.danger};">The Applicant ID you entered does not exist in our records.</p>
                    <p style="font-size: 0.9rem; color: #666;">Please check your Applicant ID and try again.</p>
                  </div>
                `,icon:"error",confirmButtonColor:Vn.primary,confirmButtonText:"OK",customClass:{popup:"swal-wide",title:"swal-title-center",htmlContainer:"swal-text-center"}})}}})},o=()=>{dt.fire({title:"Go Back to Dashboard?",text:"Are you sure you want to return to the dashboard?",icon:"question",showCancelButton:!0,confirmButtonColor:Vn.success,cancelButtonColor:Vn.danger,confirmButtonText:"Yes, Go Back",cancelButtonText:"Cancel",customClass:{title:"swal-title-center",htmlContainer:"swal-text-center"}}).then(l=>{l.isConfirmed&&dt.fire({title:"Redirecting...",html:'<p style="text-align: center;">Returning to dashboard...</p>',timer:2e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1,customClass:{title:"swal-title-center",htmlContainer:"swal-text-center"},didOpen:()=>{dt.showLoading()},willClose:()=>{e("/user/dashboard")}})})};return t.jsxs("div",{className:"mx-1 mt-1 p-6 dark:bg-slate-900 bg-white dark:text-slate-300 rounded-lg min-h-screen",children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-8 text-center",children:"Business Permit Types"}),t.jsx("p",{className:"mb-6 text-center",children:"Please select the type of business permit you need to apply for"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full mt-6",children:s.map(l=>t.jsxs("div",{onClick:()=>i(l.id),className:"cursor-pointer rounded-lg border border-transparent px-5 py-4 transition-colors hover:border-blue-300 hover:bg-blue-100 shadow-lg shadow-blue-200/50 hover:shadow-blue-300/50 flex flex-col justify-between h-full",children:[t.jsxs("h2",{className:"mb-3 text-2xl font-semibold flex items-center justify-between",children:[l.title,t.jsx(sA,{className:"ml-2 w-5 h-5 transition-transform group-hover:translate-x-1 motion-reduce:transform-none"})]}),t.jsx("p",{className:"m-0 max-w-[30ch] text-sm opacity-70",children:l.description})]},l.id))}),t.jsx("div",{className:"mt-8 text-center",children:t.jsxs("button",{onClick:o,style:{backgroundColor:Vn.success,color:"#fff"},onMouseEnter:l=>l.currentTarget.style.backgroundColor=Vn.accent,onMouseLeave:l=>l.currentTarget.style.backgroundColor=Vn.success,className:"inline-flex items-center gap-2 font-semibold py-2 px-4 rounded-lg transition-colors",children:[t.jsx(Vh,{size:18}),"Back to Dashboard"]})})]})}var M2={exports:{}},NB;function VV(){return NB||(NB=1,(function(a){var e=(function(s){var r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(H,te,K){H[te]=K.value},o,l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",m=l.toStringTag||"@@toStringTag";function A(H,te,K){return Object.defineProperty(H,te,{value:K,enumerable:!0,configurable:!0,writable:!0}),H[te]}try{A({},"")}catch{A=function(te,K,I){return te[K]=I}}function g(H,te,K,I){var R=te&&te.prototype instanceof j?te:j,G=Object.create(R.prototype),se=new O(I||[]);return i(G,"_invoke",{value:L(H,K,se)}),G}s.wrap=g;function p(H,te,K){try{return{type:"normal",arg:H.call(te,K)}}catch(I){return{type:"throw",arg:I}}}var v="suspendedStart",b="suspendedYield",y="executing",w="completed",B={};function j(){}function E(){}function S(){}var T={};A(T,c,function(){return this});var M=Object.getPrototypeOf,D=M&&M(M(X([])));D&&D!==r&&n.call(D,c)&&(T=D);var P=S.prototype=j.prototype=Object.create(T);E.prototype=S,i(P,"constructor",{value:S,configurable:!0}),i(S,"constructor",{value:E,configurable:!0}),E.displayName=A(S,m,"GeneratorFunction");function Y(H){["next","throw","return"].forEach(function(te){A(H,te,function(K){return this._invoke(te,K)})})}s.isGeneratorFunction=function(H){var te=typeof H=="function"&&H.constructor;return te?te===E||(te.displayName||te.name)==="GeneratorFunction":!1},s.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,S):(H.__proto__=S,A(H,m,"GeneratorFunction")),H.prototype=Object.create(P),H},s.awrap=function(H){return{__await:H}};function Q(H,te){function K(G,se,le,ye){var De=p(H[G],H,se);if(De.type==="throw")ye(De.arg);else{var me=De.arg,Te=me.value;return Te&&typeof Te=="object"&&n.call(Te,"__await")?te.resolve(Te.__await).then(function(we){K("next",we,le,ye)},function(we){K("throw",we,le,ye)}):te.resolve(Te).then(function(we){me.value=we,le(me)},function(we){return K("throw",we,le,ye)})}}var I;function R(G,se){function le(){return new te(function(ye,De){K(G,se,ye,De)})}return I=I?I.then(le,le):le()}i(this,"_invoke",{value:R})}Y(Q.prototype),A(Q.prototype,u,function(){return this}),s.AsyncIterator=Q,s.async=function(H,te,K,I,R){R===void 0&&(R=Promise);var G=new Q(g(H,te,K,I),R);return s.isGeneratorFunction(te)?G:G.next().then(function(se){return se.done?se.value:G.next()})};function L(H,te,K){var I=v;return function(G,se){if(I===y)throw new Error("Generator is already running");if(I===w){if(G==="throw")throw se;return $()}for(K.method=G,K.arg=se;;){var le=K.delegate;if(le){var ye=ae(le,K);if(ye){if(ye===B)continue;return ye}}if(K.method==="next")K.sent=K._sent=K.arg;else if(K.method==="throw"){if(I===v)throw I=w,K.arg;K.dispatchException(K.arg)}else K.method==="return"&&K.abrupt("return",K.arg);I=y;var De=p(H,te,K);if(De.type==="normal"){if(I=K.done?w:b,De.arg===B)continue;return{value:De.arg,done:K.done}}else De.type==="throw"&&(I=w,K.method="throw",K.arg=De.arg)}}}function ae(H,te){var K=te.method,I=H.iterator[K];if(I===o)return te.delegate=null,K==="throw"&&H.iterator.return&&(te.method="return",te.arg=o,ae(H,te),te.method==="throw")||K!=="return"&&(te.method="throw",te.arg=new TypeError("The iterator does not provide a '"+K+"' method")),B;var R=p(I,H.iterator,te.arg);if(R.type==="throw")return te.method="throw",te.arg=R.arg,te.delegate=null,B;var G=R.arg;if(!G)return te.method="throw",te.arg=new TypeError("iterator result is not an object"),te.delegate=null,B;if(G.done)te[H.resultName]=G.value,te.next=H.nextLoc,te.method!=="return"&&(te.method="next",te.arg=o);else return G;return te.delegate=null,B}Y(P),A(P,m,"Generator"),A(P,c,function(){return this}),A(P,"toString",function(){return"[object Generator]"});function ne(H){var te={tryLoc:H[0]};1 in H&&(te.catchLoc=H[1]),2 in H&&(te.finallyLoc=H[2],te.afterLoc=H[3]),this.tryEntries.push(te)}function V(H){var te=H.completion||{};te.type="normal",delete te.arg,H.completion=te}function O(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(ne,this),this.reset(!0)}s.keys=function(H){var te=Object(H),K=[];for(var I in te)K.push(I);return K.reverse(),function R(){for(;K.length;){var G=K.pop();if(G in te)return R.value=G,R.done=!1,R}return R.done=!0,R}};function X(H){if(H){var te=H[c];if(te)return te.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var K=-1,I=function R(){for(;++K<H.length;)if(n.call(H,K))return R.value=H[K],R.done=!1,R;return R.value=o,R.done=!0,R};return I.next=I}}return{next:$}}s.values=X;function $(){return{value:o,done:!0}}return O.prototype={constructor:O,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(V),!H)for(var te in this)te.charAt(0)==="t"&&n.call(this,te)&&!isNaN(+te.slice(1))&&(this[te]=o)},stop:function(){this.done=!0;var H=this.tryEntries[0],te=H.completion;if(te.type==="throw")throw te.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var te=this;function K(ye,De){return G.type="throw",G.arg=H,te.next=ye,De&&(te.method="next",te.arg=o),!!De}for(var I=this.tryEntries.length-1;I>=0;--I){var R=this.tryEntries[I],G=R.completion;if(R.tryLoc==="root")return K("end");if(R.tryLoc<=this.prev){var se=n.call(R,"catchLoc"),le=n.call(R,"finallyLoc");if(se&&le){if(this.prev<R.catchLoc)return K(R.catchLoc,!0);if(this.prev<R.finallyLoc)return K(R.finallyLoc)}else if(se){if(this.prev<R.catchLoc)return K(R.catchLoc,!0)}else if(le){if(this.prev<R.finallyLoc)return K(R.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(H,te){for(var K=this.tryEntries.length-1;K>=0;--K){var I=this.tryEntries[K];if(I.tryLoc<=this.prev&&n.call(I,"finallyLoc")&&this.prev<I.finallyLoc){var R=I;break}}R&&(H==="break"||H==="continue")&&R.tryLoc<=te&&te<=R.finallyLoc&&(R=null);var G=R?R.completion:{};return G.type=H,G.arg=te,R?(this.method="next",this.next=R.finallyLoc,B):this.complete(G)},complete:function(H,te){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&te&&(this.next=te),B},finish:function(H){for(var te=this.tryEntries.length-1;te>=0;--te){var K=this.tryEntries[te];if(K.finallyLoc===H)return this.complete(K.completion,K.afterLoc),V(K),B}},catch:function(H){for(var te=this.tryEntries.length-1;te>=0;--te){var K=this.tryEntries[te];if(K.tryLoc===H){var I=K.completion;if(I.type==="throw"){var R=I.arg;V(K)}return R}}throw new Error("illegal catch attempt")},delegateYield:function(H,te,K){return this.delegate={iterator:X(H),resultName:te,nextLoc:K},this.method==="next"&&(this.arg=o),B}},s})(a.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(M2)),M2.exports}var R2,jB;function v5(){return jB||(jB=1,R2=(a,e)=>`${a}-${e}-${Math.random().toString(16).slice(3,8)}`),R2}var O2,_B;function UT(){if(_B)return O2;_B=1;const a=v5();let e=0;return O2=({id:s,action:r,payload:n={}})=>{let i=s;return typeof i>"u"&&(i=a("Job",e),e+=1),{id:i,action:r,payload:n}},O2}var Lg={},CB;function w5(){if(CB)return Lg;CB=1;let a=!1;return Lg.logging=a,Lg.setLogging=e=>{a=e},Lg.log=(...e)=>a?console.log.apply(this,e):null,Lg}var U2,kB;function zV(){if(kB)return U2;kB=1;const a=UT(),{log:e}=w5(),s=v5();let r=0;return U2=()=>{const n=s("Scheduler",r),i={},o={};let l=[];r+=1;const c=()=>l.length,u=()=>Object.keys(i).length,m=()=>{if(l.length!==0){const b=Object.keys(i);for(let y=0;y<b.length;y+=1)if(typeof o[b[y]]>"u"){l[0](i[b[y]]);break}}},A=(b,y)=>new Promise((w,B)=>{const j=a({action:b,payload:y});l.push(async E=>{l.shift(),o[E.id]=j;try{w(await E[b].apply(this,[...y,j.id]))}catch(S){B(S)}finally{delete o[E.id],m()}}),e(`[${n}]: Add ${j.id} to JobQueue`),e(`[${n}]: JobQueue length=${l.length}`),m()});return{addWorker:b=>(i[b.id]=b,e(`[${n}]: Add ${b.id}`),e(`[${n}]: Number of workers=${u()}`),m(),b.id),addJob:async(b,...y)=>{if(u()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return A(b,y)},terminate:async()=>{Object.keys(i).forEach(async b=>{await i[b].terminate()}),l=[]},getQueueLen:c,getNumWorkers:u}},U2}function $V(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Q2,BB;function qV(){return BB||(BB=1,Q2=a=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof $V=="function"&&(e.type="node"),typeof a>"u"?e:e[a]}),Q2}var H2,SB;function GV(){if(SB)return H2;SB=1;const e=qV()("type")==="browser"?s=>new URL(s,window.location.href).href:s=>s;return H2=s=>{const r={...s};return["corePath","workerPath","langPath"].forEach(n=>{s[n]&&(r[n]=e(r[n]))}),r},H2}var V2,EB;function QT(){return EB||(EB=1,V2={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),V2}const WV="7.0.0",YV={version:WV};var z2,FB;function KV(){return FB||(FB=1,z2={workerBlobURL:!0,logger:()=>{}}),z2}var $2,DB;function XV(){if(DB)return $2;DB=1;const a=YV.version;return $2={...KV(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${a}/dist/worker.min.js`},$2}var q2,TB;function JV(){return TB||(TB=1,q2=({workerPath:a,workerBlobURL:e})=>{let s;if(Blob&&URL&&e){const r=new Blob([`importScripts("${a}");`],{type:"application/javascript"});s=new Worker(URL.createObjectURL(r))}else s=new Worker(a);return s}),q2}var G2,PB;function ZV(){return PB||(PB=1,G2=a=>{a.terminate()}),G2}var W2,IB;function ez(){return IB||(IB=1,W2=(a,e)=>{a.onmessage=({data:s})=>{e(s)}}),W2}var Y2,LB;function tz(){return LB||(LB=1,Y2=async(a,e)=>{a.postMessage(e)}),Y2}var K2,MB;function sz(){if(MB)return K2;MB=1;const a=s=>new Promise((r,n)=>{const i=new FileReader;i.onload=()=>{r(i.result)},i.onerror=({target:{error:{code:o}}})=>{n(Error(`File could not be read! Code=${o}`))},i.readAsArrayBuffer(s)}),e=async s=>{let r=s;if(typeof s>"u")return"undefined";if(typeof s=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(s)?r=atob(s.split(",")[1]).split("").map(n=>n.charCodeAt(0)):r=await(await fetch(s)).arrayBuffer();else if(typeof HTMLElement<"u"&&s instanceof HTMLElement)s.tagName==="IMG"&&(r=await e(s.src)),s.tagName==="VIDEO"&&(r=await e(s.poster)),s.tagName==="CANVAS"&&await new Promise(n=>{s.toBlob(async i=>{r=await a(i),n()})});else if(typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas){const n=await s.convertToBlob();r=await a(n)}else(s instanceof File||s instanceof Blob)&&(r=await a(s));return new Uint8Array(r)};return K2=e,K2}var X2,RB;function rz(){if(RB)return X2;RB=1;const a=XV(),e=JV(),s=ZV(),r=ez(),n=tz(),i=sz();return X2={defaultOptions:a,spawnWorker:e,terminateWorker:s,onMessage:r,send:n,loadImage:i},X2}var J2,OB;function HT(){if(OB)return J2;OB=1;const a=GV(),e=UT(),{log:s}=w5(),r=v5(),n=QT(),{defaultOptions:i,spawnWorker:o,terminateWorker:l,onMessage:c,loadImage:u,send:m}=rz();let A=0;return J2=async(g="eng",p=n.LSTM_ONLY,v={},b={})=>{const y=r("Worker",A),{logger:w,errorHandler:B,...j}=a({...i,...v}),E={},S=typeof g=="string"?g.split("+"):g;let T=p,M=b;const D=[n.DEFAULT,n.LSTM_ONLY].includes(p)&&!j.legacyCore;let P,Y;const Q=new Promise((me,Te)=>{Y=me,P=Te}),L=me=>{P(me.message)};let ae=o(j);ae.onerror=L,A+=1;const ne=({id:me,action:Te,payload:we})=>new Promise((st,ce)=>{s(`[${y}]: Start ${me}, action=${Te}`);const tt=`${Te}-${me}`;E[tt]={resolve:st,reject:ce},m(ae,{workerId:y,jobId:me,action:Te,payload:we})}),V=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),O=me=>ne(e({id:me,action:"load",payload:{options:{lstmOnly:D,corePath:j.corePath,logging:j.logging}}})),X=(me,Te,we)=>ne(e({id:we,action:"FS",payload:{method:"writeFile",args:[me,Te]}})),$=(me,Te)=>ne(e({id:Te,action:"FS",payload:{method:"readFile",args:[me,{encoding:"utf8"}]}})),H=(me,Te)=>ne(e({id:Te,action:"FS",payload:{method:"unlink",args:[me]}})),te=(me,Te,we)=>ne(e({id:we,action:"FS",payload:{method:me,args:Te}})),K=(me,Te)=>ne(e({id:Te,action:"loadLanguage",payload:{langs:me,options:{langPath:j.langPath,dataPath:j.dataPath,cachePath:j.cachePath,cacheMethod:j.cacheMethod,gzip:j.gzip,lstmOnly:[n.DEFAULT,n.LSTM_ONLY].includes(T)&&!j.legacyLang}}})),I=(me,Te,we,st)=>ne(e({id:st,action:"initialize",payload:{langs:me,oem:Te,config:we}})),R=(me="eng",Te,we,st)=>{if(D&&[n.TESSERACT_ONLY,n.TESSERACT_LSTM_COMBINED].includes(Te))throw Error("Legacy model requested but code missing.");const ce=Te||T;T=ce;const tt=we||M;M=tt;const gt=(typeof me=="string"?me.split("+"):me).filter(q=>!S.includes(q));return S.push(...gt),gt.length>0?K(gt,st).then(()=>I(me,ce,tt,st)):I(me,ce,tt,st)},G=(me={},Te)=>ne(e({id:Te,action:"setParameters",payload:{params:me}})),se=async(me,Te={},we={text:!0},st)=>ne(e({id:st,action:"recognize",payload:{image:await u(me),options:Te,output:we}})),le=async(me,Te)=>{if(D)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return ne(e({id:Te,action:"detect",payload:{image:await u(me)}}))},ye=async()=>(ae!==null&&(l(ae),ae=null),Promise.resolve());c(ae,({workerId:me,jobId:Te,status:we,action:st,data:ce})=>{const tt=`${st}-${Te}`;if(we==="resolve")s(`[${me}]: Complete ${Te}`),E[tt].resolve({jobId:Te,data:ce}),delete E[tt];else if(we==="reject")if(E[tt].reject(ce),delete E[tt],st==="load"&&P(ce),B)B(ce);else throw Error(ce);else we==="progress"&&w({...ce,userJobId:Te})});const De={id:y,worker:ae,load:V,writeText:X,readText:$,removeFile:H,FS:te,reinitialize:R,setParameters:G,recognize:se,detect:le,terminate:ye};return O().then(()=>K(g)).then(()=>I(g,p,b)).then(()=>Y(De)).catch(()=>{}),Q},J2}var Z2,UB;function az(){if(UB)return Z2;UB=1;const a=HT();return Z2={recognize:async(r,n,i)=>{const o=await a(n,1,i);return o.recognize(r).finally(async()=>{await o.terminate()})},detect:async(r,n)=>{const i=await a("osd",0,n);return i.detect(r).finally(async()=>{await i.terminate()})}},Z2}var eN,QB;function nz(){return QB||(QB=1,eN={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),eN}var tN,HB;function iz(){return HB||(HB=1,tN={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),tN}var sN,VB;function oz(){if(VB)return sN;VB=1,VV();const a=zV(),e=HT(),s=az(),r=nz(),n=QT(),i=iz(),{setLogging:o}=w5();return sN={languages:r,OEM:n,PSM:i,createScheduler:a,createWorker:e,setLogging:o,...s},sN}var bA=oz();const ao=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Oj=[.001,0,0,.001,0,0],rN=1.35,el={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Nh={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ox="pdfjs_internal_editor_",dr={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Tr={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},lz={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Uj={TRIANGLES:1,LATTICE:2},ai={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Qy={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},$n={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},If={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},pw={ERRORS:0,WARNINGS:1,INFOS:5},Ux={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Mg={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},cz={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let gw=pw.WARNINGS;function dz(a){Number.isInteger(a)&&(gw=a)}function uz(){return gw}function xw(a){gw>=pw.INFOS&&console.info(`Info: ${a}`)}function rr(a){gw>=pw.WARNINGS&&console.warn(`Warning: ${a}`)}function ta(a){throw new Error(a)}function Zr(a,e){a||ta(e)}function hz(a){switch(a?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function VT(a,e=null,s=null){if(!a)return null;if(s&&typeof a=="string"&&(s.addDefaultProtocol&&a.startsWith("www.")&&a.match(/\./g)?.length>=2&&(a=`http://${a}`),s.tryConvertEncoding))try{a=xz(a)}catch{}const r=e?URL.parse(a,e):URL.parse(a);return hz(r)?r:null}function zT(a,e,s=!1){const r=URL.parse(a);return r?(r.hash=e,r.href):s&&VT(a,"http://example.com")?a.split("#",1)[0]+`${e?`#${e}`:""}`:""}function ar(a,e,s,r=!1){return Object.defineProperty(a,e,{value:s,enumerable:!r,configurable:!0,writable:!1}),s}const yA=(function(){function e(s,r){this.message=s,this.name=r}return e.prototype=new Error,e.constructor=e,e})();class zB extends yA{constructor(e,s){super(e,"PasswordException"),this.code=s}}class aN extends yA{constructor(e,s){super(e,"UnknownErrorException"),this.details=s}}class Qj extends yA{constructor(e){super(e,"InvalidPDFException")}}class gv extends yA{constructor(e,s,r){super(e,"ResponseException"),this.status=s,this.missing=r}}class mz extends yA{constructor(e){super(e,"FormatError")}}class zh extends yA{constructor(e){super(e,"AbortException")}}function Az(a){(typeof a!="object"||a?.length===void 0)&&ta("Invalid argument for bytesToString");const e=a.length,s=8192;if(e<s)return String.fromCharCode.apply(null,a);const r=[];for(let n=0;n<e;n+=s){const i=Math.min(n+s,e),o=a.subarray(n,i);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function bw(a){typeof a!="string"&&ta("Invalid argument for stringToBytes");const e=a.length,s=new Uint8Array(e);for(let r=0;r<e;++r)s[r]=a.charCodeAt(r)&255;return s}function fz(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}function pz(){const a=new Uint8Array(4);return a[0]=1,new Uint32Array(a.buffer,0,1)[0]===1}function gz(){try{return new Function(""),!0}catch{return!1}}class oi{static get isLittleEndian(){return ar(this,"isLittleEndian",pz())}static get isEvalSupported(){return ar(this,"isEvalSupported",gz())}static get isOffscreenCanvasSupported(){return ar(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ar(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return ar(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return ar(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:s}=navigator;return ar(this,"platform",{isAndroid:s.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:s.includes("Firefox")})}static get isCSSRoundSupported(){return ar(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const nN=Array.from(Array(256).keys(),a=>a.toString(16).padStart(2,"0"));class ks{static makeHexColor(e,s,r){return`#${nN[e]}${nN[s]}${nN[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,s){let r;e[0]?(e[0]<0&&(r=s[0],s[0]=s[2],s[2]=r),s[0]*=e[0],s[2]*=e[0],e[3]<0&&(r=s[1],s[1]=s[3],s[3]=r),s[1]*=e[3],s[3]*=e[3]):(r=s[0],s[0]=s[1],s[1]=r,r=s[2],s[2]=s[3],s[3]=r,e[1]<0&&(r=s[1],s[1]=s[3],s[3]=r),s[1]*=e[1],s[3]*=e[1],e[2]<0&&(r=s[0],s[0]=s[2],s[2]=r),s[0]*=e[2],s[2]*=e[2]),s[0]+=e[4],s[1]+=e[5],s[2]+=e[4],s[3]+=e[5]}static transform(e,s){return[e[0]*s[0]+e[2]*s[1],e[1]*s[0]+e[3]*s[1],e[0]*s[2]+e[2]*s[3],e[1]*s[2]+e[3]*s[3],e[0]*s[4]+e[2]*s[5]+e[4],e[1]*s[4]+e[3]*s[5]+e[5]]}static multiplyByDOMMatrix(e,s){return[e[0]*s.a+e[2]*s.b,e[1]*s.a+e[3]*s.b,e[0]*s.c+e[2]*s.d,e[1]*s.c+e[3]*s.d,e[0]*s.e+e[2]*s.f+e[4],e[1]*s.e+e[3]*s.f+e[5]]}static applyTransform(e,s,r=0){const n=e[r],i=e[r+1];e[r]=n*s[0]+i*s[2]+s[4],e[r+1]=n*s[1]+i*s[3]+s[5]}static applyTransformToBezier(e,s,r=0){const n=s[0],i=s[1],o=s[2],l=s[3],c=s[4],u=s[5];for(let m=0;m<6;m+=2){const A=e[r+m],g=e[r+m+1];e[r+m]=A*n+g*o+c,e[r+m+1]=A*i+g*l+u}}static applyInverseTransform(e,s){const r=e[0],n=e[1],i=s[0]*s[3]-s[1]*s[2];e[0]=(r*s[3]-n*s[2]+s[2]*s[5]-s[4]*s[3])/i,e[1]=(-r*s[1]+n*s[0]+s[4]*s[1]-s[5]*s[0])/i}static axialAlignedBoundingBox(e,s,r){const n=s[0],i=s[1],o=s[2],l=s[3],c=s[4],u=s[5],m=e[0],A=e[1],g=e[2],p=e[3];let v=n*m+c,b=v,y=n*g+c,w=y,B=l*A+u,j=B,E=l*p+u,S=E;if(i!==0||o!==0){const T=i*m,M=i*g,D=o*A,P=o*p;v+=D,w+=D,y+=P,b+=P,B+=T,S+=T,E+=M,j+=M}r[0]=Math.min(r[0],v,y,b,w),r[1]=Math.min(r[1],B,E,j,S),r[2]=Math.max(r[2],v,y,b,w),r[3]=Math.max(r[3],B,E,j,S)}static inverseTransform(e){const s=e[0]*e[3]-e[1]*e[2];return[e[3]/s,-e[1]/s,-e[2]/s,e[0]/s,(e[2]*e[5]-e[4]*e[3])/s,(e[4]*e[1]-e[5]*e[0])/s]}static singularValueDecompose2dScale(e,s){const r=e[0],n=e[1],i=e[2],o=e[3],l=r**2+n**2,c=r*i+n*o,u=i**2+o**2,m=(l+u)/2,A=Math.sqrt(m**2-(l*u-c**2));s[0]=Math.sqrt(m+A||1),s[1]=Math.sqrt(m-A||1)}static normalizeRect(e){const s=e.slice(0);return e[0]>e[2]&&(s[0]=e[2],s[2]=e[0]),e[1]>e[3]&&(s[1]=e[3],s[3]=e[1]),s}static intersect(e,s){const r=Math.max(Math.min(e[0],e[2]),Math.min(s[0],s[2])),n=Math.min(Math.max(e[0],e[2]),Math.max(s[0],s[2]));if(r>n)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(s[1],s[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(s[1],s[3]));return i>o?null:[r,i,n,o]}static pointBoundingBox(e,s,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],s),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],s)}static rectBoundingBox(e,s,r,n,i){i[0]=Math.min(i[0],e,r),i[1]=Math.min(i[1],s,n),i[2]=Math.max(i[2],e,r),i[3]=Math.max(i[3],s,n)}static#e(e,s,r,n,i,o,l,c,u,m){if(u<=0||u>=1)return;const A=1-u,g=u*u,p=g*u,v=A*(A*(A*e+3*u*s)+3*g*r)+p*n,b=A*(A*(A*i+3*u*o)+3*g*l)+p*c;m[0]=Math.min(m[0],v),m[1]=Math.min(m[1],b),m[2]=Math.max(m[2],v),m[3]=Math.max(m[3],b)}static#t(e,s,r,n,i,o,l,c,u,m,A,g){if(Math.abs(u)<1e-12){Math.abs(m)>=1e-12&&this.#e(e,s,r,n,i,o,l,c,-A/m,g);return}const p=m**2-4*A*u;if(p<0)return;const v=Math.sqrt(p),b=2*u;this.#e(e,s,r,n,i,o,l,c,(-m+v)/b,g),this.#e(e,s,r,n,i,o,l,c,(-m-v)/b,g)}static bezierBoundingBox(e,s,r,n,i,o,l,c,u){u[0]=Math.min(u[0],e,l),u[1]=Math.min(u[1],s,c),u[2]=Math.max(u[2],e,l),u[3]=Math.max(u[3],s,c),this.#t(e,r,i,l,s,n,o,c,3*(-e+3*(r-i)+l),6*(e-2*r+i),3*(r-e),u),this.#t(e,r,i,l,s,n,o,c,3*(-s+3*(n-o)+c),6*(s-2*n+o),3*(n-s),u)}}function xz(a){return decodeURIComponent(escape(a))}let iN=null,$B=null;function bz(a){return iN||(iN=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,$B=new Map([["","t"]])),a.replaceAll(iN,(e,s,r)=>s?s.normalize("NFKC"):$B.get(r))}function $T(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const a=new Uint8Array(32);return crypto.getRandomValues(a),Az(a)}const zf="pdfjs_internal_id_";function yz(a,e,s){if(!Array.isArray(s)||s.length<2)return!1;const[r,n,...i]=s;if(!a(r)&&!Number.isInteger(r)||!e(n))return!1;const o=i.length;let l=!0;switch(n.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of i)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Bi(a,e,s){return Math.min(Math.max(a,e),s)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(a){return a.reduce((e,s)=>e+s,0)});class Qx{static textContent(e){const s=[],r={items:s,styles:Object.create(null)};function n(i){if(!i)return;let o=null;const l=i.name;if(l==="#text")o=i.value;else if(Qx.shouldBuildText(l))i?.attributes?.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&s.push({str:o}),!!i.children)for(const c of i.children)n(c)}return n(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class qT{static setupStorage(e,s,r,n,i){const o=n.getValue(s,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",l=>{n.setValue(s,{value:l.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",l=>{n.setValue(s,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",l=>{n.setValue(s,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of r.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;n.setValue(s,{value:u})});break}}static setAttributes({html:e,element:s,storage:r=null,intent:n,linkService:i}){const{attributes:o}=s,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${n}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}l&&i.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,s,r)}static render(e){const s=e.annotationStorage,r=e.linkService,n=e.xfaHtml,i=e.intent||"display",o=document.createElement(n.name);n.attributes&&this.setAttributes({html:o,element:n,intent:i,linkService:r});const l=i!=="richText",c=e.div;if(c.append(o),e.viewport){const A=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=A}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(n.children.length===0){if(n.value){const A=document.createTextNode(n.value);o.append(A),l&&Qx.shouldBuildText(n.name)&&u.push(A)}return{textDivs:u}}const m=[[n,-1,o]];for(;m.length>0;){const[A,g,p]=m.at(-1);if(g+1===A.children.length){m.pop();continue}const v=A.children[++m.at(-1)[1]];if(v===null)continue;const{name:b}=v;if(b==="#text"){const w=document.createTextNode(v.value);u.push(w),p.append(w);continue}const y=v?.attributes?.xmlns?document.createElementNS(v.attributes.xmlns,b):document.createElement(b);if(p.append(y),v.attributes&&this.setAttributes({html:y,element:v,storage:s,intent:i,linkService:r}),v.children?.length>0)m.push([v,-1,y]);else if(v.value){const w=document.createTextNode(v.value);l&&Qx.shouldBuildText(b)&&u.push(w),y.append(w)}}for(const A of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const s=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=s,e.div.hidden=!1}}const lu="http://www.w3.org/2000/svg";class gp{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function g0(a,e="text"){if(cx(a,document.baseURI)){const s=await fetch(a);if(!s.ok)throw new Error(s.statusText);switch(e){case"arraybuffer":return s.arrayBuffer();case"blob":return s.blob();case"json":return s.json()}return s.text()}return new Promise((s,r)=>{const n=new XMLHttpRequest;n.open("GET",a,!0),n.responseType=e,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(e){case"arraybuffer":case"blob":case"json":s(n.response);return}s(n.responseText);return}r(new Error(n.statusText))}},n.send(null)})}class x0{constructor({viewBox:e,userUnit:s,scale:r,rotation:n,offsetX:i=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=s,this.scale=r,this.rotation=n,this.offsetX=i,this.offsetY=o,r*=s;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let m,A,g,p;switch(n%=360,n<0&&(n+=360),n){case 180:m=-1,A=0,g=0,p=1;break;case 90:m=0,A=1,g=1,p=0;break;case 270:m=0,A=-1,g=-1,p=0;break;case 0:m=1,A=0,g=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(g=-g,p=-p);let v,b,y,w;m===0?(v=Math.abs(u-e[1])*r+i,b=Math.abs(c-e[0])*r+o,y=(e[3]-e[1])*r,w=(e[2]-e[0])*r):(v=Math.abs(c-e[0])*r+i,b=Math.abs(u-e[1])*r+o,y=(e[2]-e[0])*r,w=(e[3]-e[1])*r),this.transform=[m*r,A*r,g*r,p*r,v-m*r*c-g*r*u,b-A*r*c-p*r*u],this.width=y,this.height=w}get rawDims(){const e=this.viewBox;return ar(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:s=this.rotation,offsetX:r=this.offsetX,offsetY:n=this.offsetY,dontFlip:i=!1}={}){return new x0({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:s,offsetX:r,offsetY:n,dontFlip:i})}convertToViewportPoint(e,s){const r=[e,s];return ks.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const s=[e[0],e[1]];ks.applyTransform(s,this.transform);const r=[e[2],e[3]];return ks.applyTransform(r,this.transform),[s[0],s[1],r[0],r[1]]}convertToPdfPoint(e,s){const r=[e,s];return ks.applyInverseTransform(r,this.transform),r}}class N5 extends yA{constructor(e,s=0){super(e,"RenderingCancelledException"),this.extraDelay=s}}function yw(a){const e=a.length;let s=0;for(;s<e&&a[s].trim()==="";)s++;return a.substring(s,s+5).toLowerCase()==="data:"}function j5(a){return typeof a=="string"&&/\.pdf$/i.test(a)}function vz(a){return[a]=a.split(/[#?]/,1),a.substring(a.lastIndexOf("/")+1)}function wz(a,e="document.pdf"){if(typeof a!="string")return e;if(yw(a))return rr('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(a);if(!r)return e;const n=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},i=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(i.test(o))return n(o);if(r.searchParams.size>0){const l=Array.from(r.searchParams.values()).reverse();for(const u of l)if(i.test(u))return n(u);const c=Array.from(r.searchParams.keys()).reverse();for(const u of c)if(i.test(u))return n(u)}if(r.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(c)return n(c[0])}return e}class qB{started=Object.create(null);times=[];time(e){e in this.started&&rr(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||rr(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let s=0;for(const{name:r}of this.times)s=Math.max(r.length,s);for(const{name:r,start:n,end:i}of this.times)e.push(`${r.padEnd(s)} ${i-n}ms
`);return e.join("")}}function cx(a,e){const s=e?URL.parse(a,e):URL.parse(a);return s?.protocol==="http:"||s?.protocol==="https:"}function Hl(a){a.preventDefault()}function xn(a){a.preventDefault(),a.stopPropagation()}function Nz(a){console.log("Deprecated API usage: "+a)}class Hj{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const s=this.#e.exec(e);if(!s)return null;const r=parseInt(s[1],10);let n=parseInt(s[2],10);n=n>=1&&n<=12?n-1:0;let i=parseInt(s[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(s[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(s[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(s[6],10);c=c>=0&&c<=59?c:0;const u=s[7]||"Z";let m=parseInt(s[8],10);m=m>=0&&m<=23?m:0;let A=parseInt(s[9],10)||0;return A=A>=0&&A<=59?A:0,u==="-"?(o+=m,l+=A):u==="+"&&(o-=m,l-=A),new Date(Date.UTC(r,n,i,o,l,c))}}function jz(a,{scale:e=1,rotation:s=0}){const{width:r,height:n}=a.attributes.style,i=[0,0,parseInt(r),parseInt(n)];return new x0({viewBox:i,userUnit:1,scale:e,rotation:s})}function b0(a){if(a.startsWith("#")){const e=parseInt(a.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(e=>parseInt(e)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(rr(`Not a valid color format: "${a}"`),[0,0,0])}function _z(a){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const s of a.keys()){e.style.color=s;const r=window.getComputedStyle(e).color;a.set(s,b0(r))}e.remove()}function sn(a){const{a:e,b:s,c:r,d:n,e:i,f:o}=a.getTransform();return[e,s,r,n,i,o]}function Zc(a){const{a:e,b:s,c:r,d:n,e:i,f:o}=a.getTransform().invertSelf();return[e,s,r,n,i,o]}function oA(a,e,s=!1,r=!0){if(e instanceof x0){const{pageWidth:n,pageHeight:i}=e.rawDims,{style:o}=a,l=oi.isCSSRoundSupported,c=`var(--total-scale-factor) * ${n}px`,u=`var(--total-scale-factor) * ${i}px`,m=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,A=l?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!s||e.rotation%180===0?(o.width=m,o.height=A):(o.width=A,o.height=m)}r&&a.setAttribute("data-main-rotation",e.rotation)}class _d{constructor(){const{pixelRatio:e}=_d;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,s,r,n,i=-1){let o=1/0,l=1/0,c=1/0;r=_d.capPixels(r,i),r>0&&(o=Math.sqrt(r/(e*s))),n!==-1&&(l=n/e,c=n/s);const u=Math.min(o,l,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,s){if(s>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+s/100));return e>0?Math.min(e,r):r}return e}}const Vj=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Cz{static get isDarkMode(){return ar(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class kz{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:s}=e;s.width=s.height="0",s.display="none",s.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),ar(this,"commentForegroundColor",b0(r))}}function Bz(a,e,s,r){r=Math.min(Math.max(r??1,0),1);const n=255*(1-r);return a=Math.round(a*r+n),e=Math.round(e*r+n),s=Math.round(s*r+n),[a,e,s]}function GB(a,e){const s=a[0]/255,r=a[1]/255,n=a[2]/255,i=Math.max(s,r,n),o=Math.min(s,r,n),l=(i+o)/2;if(i===o)e[0]=e[1]=0;else{const c=i-o;switch(e[1]=l<.5?c/(i+o):c/(2-i-o),i){case s:e[0]=((r-n)/c+(r<n?6:0))*60;break;case r:e[0]=((n-s)/c+2)*60;break;case n:e[0]=((s-r)/c+4)*60;break}}e[2]=l}function zj(a,e){const s=a[0],r=a[1],n=a[2],i=(1-Math.abs(2*n-1))*r,o=i*(1-Math.abs(s/60%2-1)),l=n-i/2;switch(Math.floor(s/60)){case 0:e[0]=i+l,e[1]=o+l,e[2]=l;break;case 1:e[0]=o+l,e[1]=i+l,e[2]=l;break;case 2:e[0]=l,e[1]=i+l,e[2]=o+l;break;case 3:e[0]=l,e[1]=o+l,e[2]=i+l;break;case 4:e[0]=o+l,e[1]=l,e[2]=i+l;break;case 5:case 6:e[0]=i+l,e[1]=l,e[2]=o+l;break}}function WB(a){return a<=.03928?a/12.92:((a+.055)/1.055)**2.4}function YB(a,e,s){zj(a,s),s.map(WB);const r=.2126*s[0]+.7152*s[1]+.0722*s[2];zj(e,s),s.map(WB);const n=.2126*s[0]+.7152*s[1]+.0722*s[2];return r>n?(r+.05)/(n+.05):(n+.05)/(r+.05)}const KB=new Map;function Sz(a,e){const s=a[0]+a[1]*256+a[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=KB.get(s);if(r)return r;const n=new Float32Array(9),i=n.subarray(0,3),o=n.subarray(3,6);GB(a,o);const l=n.subarray(6,9);GB(e,l);const c=l[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),YB(o,l,i)<u){let m,A;c?(m=o[2],A=1):(m=0,A=o[2]);const g=.005;for(;A-m>g;){const p=o[2]=(m+A)/2;c===YB(o,l,i)<u?m=p:A=p}o[2]=c?A:m}return zj(o,i),r=ks.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),KB.set(s,r),r}function GT({html:a,dir:e,className:s},r){const n=document.createDocumentFragment();if(typeof a=="string"){const i=document.createElement("p");i.dir=e||"auto";const o=a.split(/(?:\r\n?|\n)/);for(let l=0,c=o.length;l<c;++l){const u=o[l];i.append(document.createTextNode(u)),l<c-1&&i.append(document.createElement("br"))}n.append(i)}else qT.render({xfaHtml:a,div:n,intent:"richText"});n.firstElementChild.classList.add("richText",s),r.append(n)}function WT(a){const e=new Path2D;if(!a)return e;for(let s=0,r=a.length;s<r;)switch(a[s++]){case Mg.moveTo:e.moveTo(a[s++],a[s++]);break;case Mg.lineTo:e.lineTo(a[s++],a[s++]);break;case Mg.curveTo:e.bezierCurveTo(a[s++],a[s++],a[s++],a[s++],a[s++],a[s++]);break;case Mg.quadraticCurveTo:e.quadraticCurveTo(a[s++],a[s++],a[s++],a[s++]);break;case Mg.closePath:e.closePath();break;default:rr(`Unrecognized drawing path operator: ${a[s-1]}`);break}return e}class Xr{static#e=null;static#t=null;static#r=null;static#s=0;static#n=[];get pagesNumber(){return Xr.#s}set pagesNumber(e){Xr.#s!==e&&(Xr.#s=e,e===0&&(Xr.#t=null,Xr.#e=null))}addListener(e){Xr.#n.push(e)}removeListener(e){const s=Xr.#n.indexOf(e);s>=0&&Xr.#n.splice(s,1)}#i(){for(const e of Xr.#n)e()}#a(e){if(Xr.#t)return;const s=Xr.#s,r=new Uint32Array(3*s),n=Xr.#t=r.subarray(0,s),i=Xr.#e=r.subarray(s,2*s);if(e)for(let o=0;o<s;o++)n[o]=i[o]=o+1;Xr.#r=r.subarray(2*s)}movePages(e,s,r){this.#a(!0);const n=Xr.#t,i=Xr.#e;Xr.#r.set(i);const o=s.length,l=new Uint32Array(o);let c=0;for(let p=0;p<o;p++){const v=s[p]-1;l[p]=n[v],v<r&&(c+=1)}const u=Xr.#s;let m=r-c;const A=u-o;m=Bi(m,0,A);for(let p=0,v=0;p<u;p++)e.has(p+1)||(n[v++]=n[p]);n.copyWithin(m+o,m,A),n.set(l,m);let g=!1;for(let p=0,v=u;p<v;p++){const b=n[p];g||=b!==p+1,i[b-1]=p+1}this.#i(),g||(this.pagesNumber=0)}hasBeenAltered(){return Xr.#t!==null}getPageMappingForSaving(){return{pageIndices:Xr.#e?Xr.#e.map(e=>e-1):null}}getPrevPageNumber(e){return Xr.#r[Xr.#t[e-1]-1]}getPageNumber(e){return Xr.#e?.[e-1]??e}getPageId(e){return Xr.#t?.[e-1]??e}static get instance(){return ar(this,"instance",new Xr)}getMapping(){return Xr.#t.subarray(0,this.pagesNumber)}}class _x{#e=null;#t=null;#r;#s=null;#n=null;#i=null;#a=null;#o=null;static#c=null;constructor(e){this.#r=e,_x.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const s=this.#r._uiManager._signal;s instanceof AbortSignal&&!s.aborted&&(e.addEventListener("contextmenu",Hl,{signal:s}),e.addEventListener("pointerdown",_x.#l,{signal:s}));const r=this.#s=document.createElement("div");r.className="buttons",e.append(r);const n=this.#r.toolbarPosition;if(n){const{style:i}=e,o=this.#r._uiManager.direction==="ltr"?1-n[0]:n[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#r._focusEventsAllowed=!1,xn(e)}#u(e){this.#r._focusEventsAllowed=!0,xn(e)}#m(e){const s=this.#r._uiManager._signal;return!(s instanceof AbortSignal)||s.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:s}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:s}),e.addEventListener("contextmenu",Hl,{signal:s}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#n?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:s}=this.#r,r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",_x.#c[e]),this.#m(r)&&r.addEventListener("click",n=>{s.delete()},{signal:s._signal}),this.#s.append(r)}get#p(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const s=await e.render();this.#m(s),this.#s.append(s,this.#p),this.#n=e}addComment(e,s=null){if(this.#i)return;const r=e.renderForToolbar();if(!r)return;this.#m(r);const n=this.#a=this.#p;s?(this.#s.insertBefore(r,s),this.#s.insertBefore(n,s)):this.#s.append(r,n),this.#i=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const s=e.renderButton();this.#m(s),this.#s.append(s,this.#p)}async addEditSignatureButton(e){const s=this.#o=await e.renderEditButton(this.#r);this.#m(s),this.#s.append(s,this.#p)}removeButton(e){e==="comment"&&(this.#i?.removeToolbarCommentButton(),this.#i=null,this.#a?.remove(),this.#a=null)}async addButton(e,s){switch(e){case"colorPicker":s&&this.addColorPicker(s);break;case"altText":s&&await this.addAltText(s);break;case"editSignature":s&&await this.addEditSignatureButton(s);break;case"delete":this.addDeleteButton();break;case"comment":s&&this.addComment(s);break}}async addButtonBefore(e,s,r){if(!s&&e==="comment")return;const n=this.#s.querySelector(r);n&&e==="comment"&&this.addComment(s,n)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class Ez{#e=null;#t=null;#r;constructor(e){this.#r=e}#s(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const s=this.#r._signal;s instanceof AbortSignal&&!s.aborted&&e.addEventListener("contextmenu",Hl,{signal:s});const r=this.#e=document.createElement("div");return r.className="buttons",e.append(r),this.#r.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#r.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#r.highlightSelection("floating_button")}),e}#n(e,s){let r=0,n=0;for(const i of e){const o=i.y+i.height;if(o<r)continue;const l=i.x+(s?i.width:0);if(o>r){n=l,r=o;continue}s?l>n&&(n=l):l<n&&(n=l)}return[s?1-n:n,r]}show(e,s,r){const[n,i]=this.#n(s,r),{style:o}=this.#t||=this.#s();e.append(this.#t),o.insetInlineEnd=`${100*n}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(e,s,r,n){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",s);const o=document.createElement("span");i.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",r);const l=this.#r._signal;l instanceof AbortSignal&&!l.aborted&&(i.addEventListener("contextmenu",Hl,{signal:l}),i.addEventListener("click",n,{signal:l})),this.#e.append(i)}}function YT(a,e,s){for(const r of s)e.addEventListener(r,a[r].bind(a))}class Jr{static#e=NaN;static#t=null;static#r=NaN;static#s=null;static initializeAndAddPointerId(e){(Jr.#t||=new Set).add(e)}static setPointer(e,s){Jr.#e||=s,Jr.#s??=e}static setTimeStamp(e){Jr.#r=e}static isSamePointerId(e){return Jr.#e===e}static isSamePointerIdOrRemove(e){return Jr.#e===e?!0:(Jr.#t?.delete(e),!1)}static isSamePointerType(e){return Jr.#s===e}static isInitializedAndDifferentPointerType(e){return Jr.#s!==null&&!Jr.isSamePointerType(e)}static isSameTimeStamp(e){return Jr.#r===e}static isUsingMultiplePointers(){return Jr.#t?.size>=1}static clearPointerType(){Jr.#s=null}static clearPointerIds(){Jr.#e=NaN,Jr.#t=null}static clearTimeStamp(){Jr.#r=NaN}}class Fz{#e=0;get id(){return`${Ox}${this.#e++}`}}class _5{#e=$T();#t=0;#r=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=e;const i=n.decode().then(()=>(r.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return ar(this,"_isSVGFittingCanvas",i)}async#s(e,s){this.#r||=new Map;let r=this.#r.get(e);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let n;if(typeof s=="string"?(r.url=s,n=await g0(s,"blob")):s instanceof File?n=r.file=s:s instanceof Blob&&(n=s),n.type==="image/svg+xml"){const i=_5._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((u,m)=>{l.onload=()=>{r.bitmap=l,r.isSvg=!0,u()},o.onload=async()=>{const A=r.svgUrl=o.result;l.src=await i?`${A}#svgView(preserveAspectRatio(none))`:A},l.onerror=o.onerror=m});o.readAsDataURL(n),await c}else r.bitmap=await createImageBitmap(n);r.refCounter=1}catch(n){rr(n),r=null}return this.#r.set(e,r),r&&this.#r.set(r.id,r),r}async getFromFile(e){const{lastModified:s,name:r,size:n,type:i}=e;return this.#s(`${s}_${r}_${n}_${i}`,e)}async getFromUrl(e){return this.#s(e,e)}async getFromBlob(e,s){const r=await s;return this.#s(e,r)}async getFromId(e){this.#r||=new Map;const s=this.#r.get(e);if(!s)return null;if(s.bitmap)return s.refCounter+=1,s;if(s.file)return this.getFromFile(s.file);if(s.blobPromise){const{blobPromise:r}=s;return delete s.blobPromise,this.getFromBlob(s.id,r)}return this.getFromUrl(s.url)}getFromCanvas(e,s){this.#r||=new Map;let r=this.#r.get(e);if(r?.bitmap)return r.refCounter+=1,r;const n=new OffscreenCanvas(s.width,s.height);return n.getContext("2d").drawImage(s,0,0),r={bitmap:n.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#r.set(e,r),this.#r.set(r.id,r),r}getSvgUrl(e){const s=this.#r.get(e);return s?.isSvg?s.svgUrl:null}deleteId(e){this.#r||=new Map;const s=this.#r.get(e);if(!s||(s.refCounter-=1,s.refCounter!==0))return;const{bitmap:r}=s;if(!s.url&&!s.file){const n=new OffscreenCanvas(r.width,r.height);n.getContext("bitmaprenderer").transferFromImageBitmap(r),s.blobPromise=n.convertToBlob()}r.close?.(),s.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class Dz{#e=[];#t=!1;#r;#s=-1;constructor(e=128){this.#r=e}add({cmd:e,undo:s,post:r,mustExec:n,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(n&&e(),this.#t)return;const c={cmd:e,undo:s,post:r,type:i};if(this.#s===-1){this.#e.length>0&&(this.#e.length=0),this.#s=0,this.#e.push(c);return}if(o&&this.#e[this.#s].type===i){l&&(c.undo=this.#e[this.#s].undo),this.#e[this.#s]=c;return}const u=this.#s+1;u===this.#r?this.#e.splice(0,1):(this.#s=u,u<this.#e.length&&this.#e.splice(u)),this.#e.push(c)}undo(){if(this.#s===-1)return;this.#t=!0;const{undo:e,post:s}=this.#e[this.#s];e(),s?.(),this.#t=!1,this.#s-=1}redo(){if(this.#s<this.#e.length-1){this.#s+=1,this.#t=!0;const{cmd:e,post:s}=this.#e[this.#s];e(),s?.(),this.#t=!1}}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#e.length-1}cleanType(e){if(this.#s!==-1){for(let s=this.#s;s>=0;s--)if(this.#e[s].type!==e){this.#e.splice(s+1,this.#s-s),this.#s=s;return}this.#e.length=0,this.#s=-1}}destroy(){this.#e=null}}class y0{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:s}=oi.platform;for(const[r,n,i={}]of e)for(const o of r){const l=o.startsWith("mac+");s&&l?(this.callbacks.set(o.slice(4),{callback:n,options:i}),this.allKeys.add(o.split("+").at(-1))):!s&&!l&&(this.callbacks.set(o,{callback:n,options:i}),this.allKeys.add(o.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const s=this.buffer.join("+");return this.buffer.length=0,s}exec(e,s){if(!this.allKeys.has(s.key))return;const r=this.callbacks.get(this.#e(s));if(!r)return;const{callback:n,options:{bubbles:i=!1,args:o=[],checker:l=null}}=r;l&&!l(e,s)||(n.bind(e,...o,s)(),i||xn(s))}}class C5{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return _z(e),ar(this,"_colors",e)}convert(e){const s=b0(e);if(!window.matchMedia("(forced-colors: active)").matches)return s;for(const[r,n]of this._colors)if(n.every((i,o)=>i===s[o]))return C5._colorsMapping.get(r);return s}getHexCode(e){const s=this._colors.get(e);return s?ks.makeHexColor(...s):e}}class $h{#e=new AbortController;#t=null;#r=null;#s=new Map;#n=new Map;#i=null;#a=null;#o=null;#c=new Dz;#l=null;#h=null;#u=null;#m=0;#p=new Set;#f=null;#d=null;#A=new Set;_editorUndoBar=null;#g=!1;#b=!1;#x=!1;#_=null;#N=null;#v=null;#k=null;#y=!1;#j=null;#E=new Fz;#B=!1;#S=!1;#M=!1;#D=null;#P=null;#R=null;#I=null;#z=null;#C=dr.NONE;#w=new Set;#T=null;#O=null;#Q=null;#G=null;#q=null;#W={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#L=null;#$=null;#J=null;#Z=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=$h.prototype,s=o=>o.#$.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},n=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return ar(this,"_keyboardManager",new y0([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#$.contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#$.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:s}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:s}]]))}constructor(e,s,r,n,i,o,l,c,u,m,A,g,p,v,b,y){const w=this._signal=this.#e.signal;this.#$=e,this.#J=s,this.#Z=r,this.#i=n,this.#l=i,this.#O=o,this.#q=c,this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:w}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),l._on("setpreference",this.onSetPreference.bind(this),{signal:w}),l._on("switchannotationeditorparams",B=>this.updateParams(B.type,B.value),{signal:w}),l._on("pagesedited",this.onPagesEdited.bind(this),{signal:w}),window.addEventListener("pointerdown",()=>{this.#S=!0},{capture:!0,signal:w}),window.addEventListener("pointerup",()=>{this.#S=!1},{capture:!0,signal:w}),this.#ie(),this.#he(),this.#te(),this.#a=c.annotationStorage,this.#_=c.filterFactory,this.#Q=u,this.#k=m||null,this.#g=A,this.#b=g,this.#x=p,this.#z=v||null,this.viewParameters={realScale:gp.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=b||null,this._supportsPinchToZoom=y!==!1,i?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#n.values())e.destroy();this.#n.clear(),this.#s.clear(),this.#A.clear(),this.#I?.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#i?.destroy(),this.#l?.destroy(),this.#O?.destroy(),this.#j?.hide(),this.#j=null,this.#R?.destroy(),this.#R=null,this.#r=null,this.#N&&(clearTimeout(this.#N),this.#N=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#z}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#x}get hcmFilter(){return ar(this,"hcmFilter",this.#Q?this.#_.addHCMFilter(this.#Q.foreground,this.#Q.background):"none")}get direction(){return ar(this,"direction",getComputedStyle(this.#$).direction)}get _highlightColors(){return ar(this,"_highlightColors",this.#k?new Map(this.#k.split(",").map(e=>(e=e.split("=").map(s=>s.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return ar(this,"highlightColors",null);const s=new Map,r=!!this.#Q;for(const[n,i]of e){const o=n.endsWith("_HCM");if(r&&o){s.set(n.replace("_HCM",""),i);continue}!r&&!o&&s.set(n,i)}return ar(this,"highlightColors",s)}get highlightColorNames(){return ar(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const s=this.highlightColorNames.get(e);return this._highlightColors.get(s)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=e}setMainHighlightColorPicker(e){this.#R=e}editAltText(e,s=!1){this.#i?.editAltText(this,e,s)}hasCommentManager(){return!!this.#l}editComment(e,s,r,n){this.#l?.showDialog(this,e,s,r,n)}selectComment(e,s){this.#n.get(e)?.getEditorByUID(s)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}deleteComment(e,s){const r=()=>{e.comment=s},n=()=>{this._editorUndoBar?.show(r,"comment"),this.toggleComment(null),e.comment=null};this.addCommands({cmd:n,undo:r,mustExec:!0})}toggleComment(e,s,r=void 0){this.#l?.toggleCommentPopup(e,s,r)}makeCommentColor(e,s){return e&&this.#l?.makeCommentColor(e,s)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#n.has(e-1))return;const{resolve:s,promise:r}=Promise.withResolvers(),n=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",n),s())};this._eventBus.on("editorsrendered",n),await r}getSignature(e){this.#O?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#O}switchToMode(e,s){this._eventBus.on("annotationeditormodechanged",s,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,s){this._eventBus.dispatch("setpreference",{source:this,name:e,value:s})}onSetPreference({name:e,value:s}){e==="enableNewAltTextWhenAddingImage"&&(this.#x=s)}onPagesEdited({pagesMapper:e}){for(const n of this.#s.values())n.updatePageIndex(e.getPrevPageNumber(n.pageIndex+1)-1);const s=this.#n,r=this.#n=new Map;for(const[n,i]of s){const o=e.getPrevPageNumber(n+1)-1;if(o===-1){i.destroy();continue}r.set(o,i),i.updatePageIndex(o)}}onPageChanging({pageNumber:e}){this.#m=e-1}focusMainContainer(){this.#$.focus()}findParent(e,s){for(const r of this.#n.values()){const{x:n,y:i,width:o,height:l}=r.div.getBoundingClientRect();if(e>=n&&e<=n+o&&s>=i&&s<=i+l)return r}return null}disableUserSelect(e=!1){this.#J.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#A.add(e)}removeShouldRescale(e){this.#A.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*gp.PDF_TO_CSS_UNITS;for(const s of this.#A)s.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#X({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:s}=this;if(s.hasTextLayer(e))return s;for(const r of this.#n.values())if(r.hasTextLayer(e))return r;return null}highlightSelection(e="",s=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:o,focusOffset:l}=r,c=r.toString(),m=this.#X(r).closest(".textLayer"),A=this.getSelectionBoxes(m);if(!A)return;r.empty();const g=this.#ee(m),p=this.#C===dr.NONE,v=()=>{const b=g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:A,anchorNode:n,anchorOffset:i,focusNode:o,focusOffset:l,text:c});p&&this.showAllEditors("highlight",!0,!0),s&&b?.editComment()};if(p){this.switchToMode(dr.HIGHLIGHT,v);return}v()}commentSelection(e=""){this.highlightSelection(e,!0)}#ae(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=this.#X(e).closest(".textLayer"),n=this.getSelectionBoxes(r);n&&(this.#j||=new Ez(this),this.#j.show(r,n,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#a)return null;const s=`${Ox}${e}`,r=this.#a.getRawValue(s);return r&&this.#a.remove(s),r}addToAnnotationStorage(e){!e.isEmpty()&&this.#a&&!this.#a.has(e.id)&&this.#a.setValue(e.id,e)}a11yAlert(e,s=null){const r=this.#Z;r&&(r.setAttribute("data-l10n-id",e),s?r.setAttribute("data-l10n-args",JSON.stringify(s)):r.removeAttribute("data-l10n-args"))}#ne(){const e=document.getSelection();if(!e||e.isCollapsed){this.#T&&(this.#j?.hide(),this.#T=null,this.#F({hasSelectedText:!1}));return}const{anchorNode:s}=e;if(s===this.#T)return;const n=this.#X(e).closest(".textLayer");if(!n){this.#T&&(this.#j?.hide(),this.#T=null,this.#F({hasSelectedText:!1}));return}if(this.#j?.hide(),this.#T=s,this.#F({hasSelectedText:!0}),!(this.#C!==dr.HIGHLIGHT&&this.#C!==dr.NONE)&&(this.#C===dr.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#y=this.isShiftKeyDown,!this.isShiftKeyDown)){const i=this.#C===dr.HIGHLIGHT?this.#ee(n):null;if(i?.toggleDrawing(),this.#S){const o=new AbortController,l=this.combinedSignal(o),c=u=>{u.type==="pointerup"&&u.button!==0||(o.abort(),i?.toggleDrawing(!0),u.type==="pointerup"&&this.#Y("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}else i?.toggleDrawing(!0),this.#Y("main_toolbar")}}#Y(e=""){this.#C===dr.HIGHLIGHT?this.highlightSelection(e):this.#g&&this.#ae()}#ie(){document.addEventListener("selectionchange",this.#ne.bind(this),{signal:this._signal})}#oe(){if(this.#v)return;this.#v=new AbortController;const e=this.combinedSignal(this.#v);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#le(){this.#v?.abort(),this.#v=null}blur(){if(this.isShiftKeyDown=!1,this.#y&&(this.#y=!1,this.#Y("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const s of this.#w)if(s.div.contains(e)){this.#P=[s,e],s._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[e,s]=this.#P;this.#P=null,s.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),s.focus()}#te(){if(this.#D)return;this.#D=new AbortController;const e=this.combinedSignal(this.#D);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ce(){this.#D?.abort(),this.#D=null}#de(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#ue(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.setEditingState(!0)}removeEditListeners(){this.#ce(),this.setEditingState(!1)}dragOver(e){for(const{type:s}of e.dataTransfer.items)for(const r of this.#d)if(r.isHandlingMimeForPasting(s)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const s of e.dataTransfer.items)for(const r of this.#d)if(r.isHandlingMimeForPasting(s.type)){r.paste(s,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const s=[];for(const r of this.#w){const n=r.serialize(!0);n&&s.push(n)}s.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(s))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:s}=e;for(const i of s.items)for(const o of this.#d)if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let r=s.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){rr(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const n=this.currentLayer;try{const i=[];for(const c of r){const u=await n.deserialize(c);if(!u)return;i.push(u)}const o=()=>{for(const c of i)this.#se(c);this.#re(i)},l=()=>{for(const c of i)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(i){rr(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==dr.NONE&&!this.isEditorHandlingKeyboard&&$h._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#y&&(this.#y=!1,this.#Y("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#F(e){Object.entries(e).some(([r,n])=>this.#W[r]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#W,e)}),this.#C===dr.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#V([[Tr.HIGHLIGHT_FREE,!0]]))}#V(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#oe(),this.#de(),this.#F({isEditing:this.#C!==dr.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#le(),this.#ue(),this.#F({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#d){this.#d=e;for(const s of this.#d)this.#V(s.defaultPropertiesToUpdate)}}getId(){return this.#E.id}get currentLayer(){return this.#n.get(this.#m)}getLayer(e){return this.#n.get(e)}get currentPageIndex(){return this.#m}addLayer(e){this.#n.set(e.pageIndex,e),this.#B?e.enable():e.disable()}removeLayer(e){this.#n.delete(e.pageIndex)}async updateMode(e,s=null,r=!1,n=!1,i=!1,o=!1){if(this.#C!==e&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#C===dr.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=e,e===dr.NONE){this.setEditingState(!1),this.#Ae();for(const l of this.#s.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const l of this.#s.values())l.addStandaloneCommentButton();e===dr.SIGNATURE&&await this.#O?.loadSignatures(),r&&Jr.clearPointerType(),this.setEditingState(!0),await this.#me(),this.unselectAll();for(const l of this.#n.values())l.updateMode(e);if(e===dr.POPUP){this.#r||=await this.#q.getAnnotationsByType(new Set(this.#d.map(u=>u._editorType)));const l=new Set,c=[];for(const u of this.#s.values()){const{annotationElementId:m,hasComment:A,deleted:g}=u;m&&l.add(m),A&&!g&&c.push(u.getData())}for(const u of this.#r){const{id:m,popupRef:A,contentsObj:g}=u;A&&g?.str&&!l.has(m)&&!this.#p.has(m)&&c.push(u)}this.#l?.showSidebar(c)}if(!s){n&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const l of this.#s.values())l.uid===s?(this.setSelected(l),o?l.editComment():i?l.enterInEditMode():l.focus()):l.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,s){if(this.#d){switch(e){case Tr.CREATE:this.currentLayer.addNewEditor(s);return;case Tr.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#G||=new Map).set(e,s),this.showAllEditors("highlight",s);break}if(this.hasSelection)for(const r of this.#w)r.updateParams(e,s);else for(const r of this.#d)r.updateDefaultParams(e,s)}}showAllEditors(e,s,r=!1){for(const i of this.#s.values())i.editorType===e&&i.show(s);(this.#G?.get(Tr.HIGHLIGHT_SHOW_ALL)??!0)!==s&&this.#V([[Tr.HIGHLIGHT_SHOW_ALL,s]])}enableWaiting(e=!1){if(this.#M!==e){this.#M=e;for(const s of this.#n.values())e?s.disableClick():s.enableClick(),s.div.classList.toggle("waiting",e)}}async#me(){if(!this.#B){this.#B=!0;const e=[];for(const s of this.#n.values())e.push(s.enable());await Promise.all(e);for(const s of this.#s.values())s.enable()}}#Ae(){if(this.unselectAll(),this.#B){this.#B=!1;for(const e of this.#n.values())e.disable();for(const e of this.#s.values())e.disable()}}*getEditors(e){for(const s of this.#s.values())s.pageIndex===e&&(yield s)}getEditor(e){return this.#s.get(e)}addEditor(e){this.#s.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#N&&clearTimeout(this.#N),this.#N=setTimeout(()=>{this.focusMainContainer(),this.#N=null},0)),this.#s.delete(e.id),e.annotationElementId&&this.#I?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#p.has(e.annotationElementId))&&this.#a?.remove(e.id)}addDeletedAnnotationElement(e){this.#p.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#p.has(e)}removeDeletedAnnotationElement(e){this.#p.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#se(e){const s=this.#n.get(e.pageIndex);s?s.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#V(e.propertiesToUpdate))}get#fe(){let e=null;for(e of this.#w);return e}updateUI(e){this.#fe===e&&this.#V(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#V(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#F({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#F({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),this.#u?.commitOrRemove();for(const s of this.#w)s!==e&&s.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#F({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#F({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#F({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#F({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#c.add(e),this.#F({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#c.cleanType(e)}#K(){if(this.#s.size===0)return!0;if(this.#s.size===1)for(const e of this.#s.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const s=e?[e]:[...this.#w],r=()=>{this._editorUndoBar?.show(n,s.length===1?s[0].editorType:s.length);for(const i of s)i.remove()},n=()=>{for(const i of s)this.#se(i)};this.addCommands({cmd:r,undo:n,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#re(e){for(const s of this.#w)s.unselect();this.#w.clear();for(const s of e)s.isEmpty()||(this.#w.add(s),s.select());this.#F({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#re(this.#s.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#C!==dr.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#F({hasSelectedEditor:!1})}}translateSelectedEditors(e,s,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=e,this.#H[1]+=s;const[n,i]=this.#H,o=[...this.#w],l=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const c of o)this.#s.has(c.id)&&(c.translateInPage(n,i),c.translationDone())},undo:()=>{for(const c of o)this.#s.has(c.id)&&(c.translateInPage(-n,-i),c.translationDone())},mustExec:!1})},l);for(const c of o)c.translateInPage(e,s),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const e of this.#w)this.#f.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const e=this.#f;this.#f=null;let s=!1;for(const[{x:n,y:i,pageIndex:o},l]of e)l.newX=n,l.newY=i,l.newPageIndex=o,s||=n!==l.savedX||i!==l.savedY||o!==l.savedPageIndex;if(!s)return!1;const r=(n,i,o,l)=>{if(this.#s.has(n.id)){const c=this.#n.get(l);c?n._setParentAndPosition(c,i,o):(n.pageIndex=l,n.x=i,n.y=o)}};return this.addCommands({cmd:()=>{for(const[n,{newX:i,newY:o,newPageIndex:l}]of e)r(n,i,o,l)},undo:()=>{for(const[n,{savedX:i,savedY:o,savedPageIndex:l}]of e)r(n,i,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,s){if(this.#f)for(const r of this.#f.keys())r.drag(e,s)}rebuild(e){if(e.parent===null){const s=this.getLayer(e.pageIndex);s?(s.changeParent(e),s.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#C}isEditingMode(){return this.#C!==dr.NONE}get imageManager(){return ar(this,"imageManager",new _5)}getSelectionBoxes(e){if(!e)return null;const s=document.getSelection();for(let u=0,m=s.rangeCount;u<m;u++)if(!e.contains(s.getRangeAt(u).commonAncestorContainer))return null;const{x:r,y:n,width:i,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(u,m,A,g)=>({x:(m-n)/o,y:1-(u+A-r)/i,width:g/o,height:A/i});break;case"180":l=(u,m,A,g)=>({x:1-(u+A-r)/i,y:1-(m+g-n)/o,width:A/i,height:g/o});break;case"270":l=(u,m,A,g)=>({x:1-(m+g-n)/o,y:(u-r)/i,width:g/o,height:A/i});break;default:l=(u,m,A,g)=>({x:(u-r)/i,y:(m-n)/o,width:A/i,height:g/o});break}const c=[];for(let u=0,m=s.rangeCount;u<m;u++){const A=s.getRangeAt(u);if(!A.collapsed)for(const{x:g,y:p,width:v,height:b}of A.getClientRects())v===0||b===0||c.push(l(g,p,v,b))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:s}){(this.#o||=new Map).set(e,s)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const s=this.#o?.get(e.data.id);if(!s)return;const r=this.#a.getRawValue(s);r&&(this.#C===dr.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,s,r){const n=this.#I?.get(e);n&&(n.setCanvas(s,r),this.#I.delete(e))}addMissingCanvas(e,s){(this.#I||=new Map).set(e,s)}}class cd{#e=null;#t=!1;#r=null;#s=null;#n=null;#i=null;#a=!1;#o=null;#c=null;#l=null;#h=null;#u=!1;static#m=null;static _l10n=null;constructor(e){this.#c=e,this.#u=e._uiManager.useNewAltTextFlow,cd.#m||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){cd._l10n??=e}async render(){const e=this.#r=document.createElement("button");e.className="altText",e.tabIndex="0";const s=this.#s=document.createElement("span");e.append(s),this.#u?(e.classList.add("new"),e.setAttribute("data-l10n-id",cd.#m.missing),s.setAttribute("data-l10n-id",cd.#m["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),s.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=this.#c._uiManager._signal;e.addEventListener("contextmenu",Hl,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const n=i=>{i.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#u&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return e.addEventListener("click",n,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(this.#a=!0,n(i))},{signal:r}),await this.#f(),e}get#p(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#r&&(this.#r.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#u?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#u?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await cd._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#f())}toggleAltTextBadge(e=!1){if(!this.#u||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const s=this.#o=document.createElement("div");s.className="noAltTextBadge",this.#c.div.append(s)}this.#o.classList.toggle("hidden",!e)}serialize(e){let s=this.#e;return!e&&this.#l===s&&(s=this.#h),{altText:s,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:s,guessedText:r,textWithDisclaimer:n,cancel:i=!1}){r&&(this.#l=r,this.#h=n),!(this.#e===e&&this.#t===s)&&(i||(this.#e=e,this.#t=s),this.#f())}toggle(e=!1){this.#r&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#r.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#r?.remove(),this.#r=null,this.#s=null,this.#n=null,this.#o?.remove(),this.#o=null}async#f(){const e=this.#r;if(!e)return;if(this.#u){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",cd.#m[this.#p]),this.#s?.setAttribute("data-l10n-id",cd.#m[`${this.#p}-label`]),!this.#e){this.#n?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#n?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let s=this.#n;if(!s){this.#n=s=document.createElement("span"),s.className="tooltip",s.setAttribute("role","tooltip"),s.id=`alt-text-tooltip-${this.#c.id}`;const n=100,i=this.#c._uiManager._signal;i.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#n.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},n)},{signal:i}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#n?.classList.remove("show")},{signal:i})}this.#t?s.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(s.removeAttribute("data-l10n-id"),s.textContent=this.#e),s.parentNode||e.append(s),this.#c.getElementForAltText()?.setAttribute("aria-describedby",s.id)}}class _b{#e=null;#t=null;#r=!1;#s=null;#n=null;#i=null;#a=null;#o=null;#c=!1;#l=null;constructor(e){this.#s=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const s=this.#s.commentButtonPosition;if(s){const{style:r}=e;r.insetInlineEnd=`calc(${100*(this.#s._uiManager.direction==="ltr"?1-s[0]:s[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*s[1]}% - var(--comment-button-dim))`;const n=this.#s.commentButtonColor;n&&(r.backgroundColor=n)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#s.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#s._uiManager.updatePopupColor(this.#s)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#s.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:s,height:r}=this.#e.getBoundingClientRect(),{x:n,y:i,width:o,height:l}=this.#s.parent.boundingClientRect;return[(e-n)/o,(s+r-i)/l]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:s}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=s)}#h(e,s){if(!this.#s._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",s?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#s._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const r=this.#s._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",Hl,{signal:r}),s&&(e.addEventListener("focusin",i=>{this.#s._focusEventsAllowed=!1,xn(i)},{capture:!0,signal:r}),e.addEventListener("focusout",i=>{this.#s._focusEventsAllowed=!0,xn(i)},{capture:!0,signal:r})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const n=i=>{i.preventDefault(),e===this.#t?this.edit():this.#s.toggleComment(!0)};return e.addEventListener("click",n,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(this.#r=!0,n(i))},{signal:r}),e.addEventListener("pointerenter",()=>{this.#s.toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{this.#s.toggleComment(!1,!1)},{signal:r}),e}edit(e){const s=this.commentPopupPositionInLayer;let r,n;if(s)[r,n]=s;else{[r,n]=this.#s.commentButtonPosition;const{width:m,height:A,x:g,y:p}=this.#s;r=g+r*m,n=p+n*A}const i=this.#s.parent.boundingClientRect,{x:o,y:l,width:c,height:u}=i;this.#s._uiManager.editComment(this.#s,o+r*c,l+n*u,{...e,parentDimensions:i})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#r}),this.#r=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#n}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#i,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#a&&(this.#i=null),e===null){this.#a="",this.#c=!0;return}this.#a=e,this.#o=new Date,this.#c=!1}restoreData({text:e,richText:s,date:r}){this.#a=e,this.#i=s,this.#o=r,this.#c=!1}setInitialText(e,s=null){this.#n=e,this.data=e,this.#o=null,this.#i=s}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#a="",this.#i=null,this.#o=null,this.#s=null,this.#r=!1,this.#c=!1}}class vw{#e;#t=!1;#r=null;#s;#n;#i;#a;#o=null;#c;#l=null;#h;#u=null;constructor({container:e,isPinchingDisabled:s=null,isPinchingStopped:r=null,onPinchStart:n=null,onPinching:i=null,onPinchEnd:o=null,signal:l}){this.#e=e,this.#r=r,this.#s=s,this.#n=n,this.#i=i,this.#a=o,this.#h=new AbortController,this.#c=AbortSignal.any([l,this.#h.signal]),e.addEventListener("touchstart",this.#m.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/_d.pixelRatio}#m(e){if(this.#s?.())return;if(e.touches.length===1){if(this.#o)return;const n=this.#o=new AbortController,i=AbortSignal.any([this.#c,n.signal]),o=this.#e,l={capture:!0,signal:i,passive:!1},c=u=>{u.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};o.addEventListener("pointerdown",u=>{u.pointerType==="touch"&&(xn(u),c(u))},l),o.addEventListener("pointerup",c,l),o.addEventListener("pointercancel",c,l);return}if(!this.#u){this.#u=new AbortController;const n=AbortSignal.any([this.#c,this.#u.signal]),i=this.#e,o={signal:n,capture:!1,passive:!1};i.addEventListener("touchmove",this.#p.bind(this),o);const l=this.#f.bind(this);i.addEventListener("touchend",l,o),i.addEventListener("touchcancel",l,o),o.capture=!0,i.addEventListener("pointerdown",xn,o),i.addEventListener("pointermove",xn,o),i.addEventListener("pointercancel",xn,o),i.addEventListener("pointerup",xn,o),this.#n?.()}if(xn(e),e.touches.length!==2||this.#r?.()){this.#l=null;return}let[s,r]=e.touches;s.identifier>r.identifier&&([s,r]=[r,s]),this.#l={touch0X:s.screenX,touch0Y:s.screenY,touch1X:r.screenX,touch1Y:r.screenY}}#p(e){if(!this.#l||e.touches.length!==2)return;xn(e);let[s,r]=e.touches;s.identifier>r.identifier&&([s,r]=[r,s]);const{screenX:n,screenY:i}=s,{screenX:o,screenY:l}=r,c=this.#l,{touch0X:u,touch0Y:m,touch1X:A,touch1Y:g}=c,p=A-u,v=g-m,b=o-n,y=l-i,w=Math.hypot(b,y)||1,B=Math.hypot(p,v)||1;if(!this.#t&&Math.abs(B-w)<=vw.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=n,c.touch0Y=i,c.touch1X=o,c.touch1Y=l,!this.#t){this.#t=!0;return}const j=[(n+o)/2,(i+l)/2];this.#i?.(j,B,w)}#f(e){e.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#a?.()),this.#l&&(xn(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class qs{#e=null;#t=null;#r=null;#s=null;#n=null;#i=!1;#a=null;#o="";#c=null;#l=null;#h=null;#u=null;#m=null;#p="";#f=!1;#d=null;#A=!1;#g=!1;#b=!1;#x=null;#_=0;#N=0;#v=null;#k=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#y=!1;#j=qs._zIndex++;static _borderLineWidth=-1;static _colorManager=new C5;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=qs.prototype._resizeWithKeyboard,s=$h.TRANSLATE_SMALL,r=$h.TRANSLATE_BIG;return ar(this,"_resizerKeyboardManager",new y0([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-s,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[s,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-s]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,s]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],qs.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:s,rawDims:{pageWidth:r,pageHeight:n,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=s,this.pageRotation=(360+s-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,n],this.pageTranslation=[i,o];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(e){this.pageIndex=e}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ar(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const s=new Tz({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});s.annotationElementId=e.annotationElementId,s.deleted=!0,s._uiManager.addToAnnotationStorage(s)}static initialize(e,s){if(qs._l10n??=e,qs._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),qs._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);qs._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,s){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,s){ta("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#y}set _isDraggable(e){this.#y=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,s]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*s/(e*2),this.y+=this.width*e/(s*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*s/(e*2),this.y-=this.width*e/(s*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#j}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#L(),this.#u?.remove(),this.#u=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,s,r,n){const[i,o]=this.parentDimensions;[r,n]=this.screenToPageTranslation(r,n),this.x=(e+r)/i,this.y=(s+n)/o,this.fixAndSetPosition()}_moveAfterPaste(e,s){const[r,n]=this.parentDimensions;this.setAt(e*r,s*n,this.width*r,this.height*n),this._onTranslated()}#E([e,s],r,n){[r,n]=this.screenToPageTranslation(r,n),this.x+=r/e,this.y+=n/s,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,s){this.#E(this.parentDimensions,e,s)}translateInPage(e,s){this.#d||=[this.x,this.y,this.width,this.height],this.#E(this.pageDimensions,e,s),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,s){this.#d||=[this.x,this.y,this.width,this.height];const{div:r,parentDimensions:[n,i]}=this;if(this.x+=e/n,this.y+=s/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:A,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,A,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,u]=this.getBaseTranslation();o+=c,l+=u;const{style:m}=r;m.left=`${(100*o).toFixed(2)}%`,m.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),r.scrollIntoView({block:"nearest"})}_onTranslating(e,s){}_onTranslated(e,s){}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}get _hasBeenResized(){return!!this.#d&&(this.#d[2]!==this.width||this.#d[3]!==this.height)}getBaseTranslation(){const[e,s]=this.parentDimensions,{_borderLineWidth:r}=qs,n=r/e,i=r/s;switch(this.rotation){case 90:return[-n,i];case 180:return[n,i];case 270:return[n,-i];default:return[-n,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:s},pageDimensions:[r,n]}=this;let{x:i,y:o,width:l,height:c}=this;if(l*=r,c*=n,i*=r,o*=n,this._mustFixPosition)switch(e){case 0:i=Bi(i,0,r-l),o=Bi(o,0,n-c);break;case 90:i=Bi(i,0,r-c),o=Bi(o,l,n);break;case 180:i=Bi(i,l,r),o=Bi(o,c,n);break;case 270:i=Bi(i,c,r),o=Bi(o,0,n-l);break}this.x=i/=r,this.y=o/=n;const[u,m]=this.getBaseTranslation();i+=u,o+=m,s.left=`${(100*i).toFixed(2)}%`,s.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#B(e,s,r){switch(r){case 90:return[s,-e];case 180:return[-e,-s];case 270:return[-s,e];default:return[e,s]}}screenToPageTranslation(e,s){return qs.#B(e,s,this.parentRotation)}pageTranslationToScreen(e,s){return qs.#B(e,s,360-this.parentRotation)}#S(e){switch(e){case 90:{const[s,r]=this.pageDimensions;return[0,-s/r,r/s,0]}case 180:return[-1,0,0,-1];case 270:{const[s,r]=this.pageDimensions;return[0,s/r,-r/s,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[s,r]}=this;return[s*e,r*e]}setDims(){const{div:{style:e},width:s,height:r}=this;e.width=`${(100*s).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#M(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],s=this._uiManager._signal;for(const r of e){const n=document.createElement("div");this.#c.append(n),n.classList.add("resizer",r),n.setAttribute("data-resizer-name",r),n.addEventListener("pointerdown",this.#D.bind(this,r),{signal:s}),n.addEventListener("contextmenu",Hl,{signal:s}),n.tabIndex=-1}this.div.prepend(this.#c)}#D(e,s){s.preventDefault();const{isMac:r}=oi.platform;if(s.button!==0||s.ctrlKey&&r)return;this.#r?.toggle(!1);const n=this._isDraggable;this._isDraggable=!1,this.#l=[s.screenX,s.screenY];const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#I.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",xn,{passive:!1,signal:o}),window.addEventListener("contextmenu",Hl,{signal:o}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(s.target).cursor;const u=()=>{i.abort(),this.parent.togglePointerEvents(!0),this.#r?.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=l,this.div.style.cursor=c,this.#R()};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})}#P(e,s,r,n){this.width=r,this.height=n,this.x=e,this.y=s,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#R(){if(!this.#h)return;const{savedX:e,savedY:s,savedWidth:r,savedHeight:n}=this.#h;this.#h=null;const i=this.x,o=this.y,l=this.width,c=this.height;i===e&&o===s&&l===r&&c===n||this.addCommands({cmd:this.#P.bind(this,i,o,l,c),undo:this.#P.bind(this,e,s,r,n),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#I(e,s){const[r,n]=this.parentDimensions,i=this.x,o=this.y,l=this.width,c=this.height,u=qs.MIN_SIZE/r,m=qs.MIN_SIZE/n,A=this.#S(this.rotation),g=(O,X)=>[A[0]*O+A[2]*X,A[1]*O+A[3]*X],p=this.#S(360-this.rotation),v=(O,X)=>[p[0]*O+p[2]*X,p[1]*O+p[3]*X];let b,y,w=!1,B=!1;switch(e){case"topLeft":w=!0,b=(O,X)=>[0,0],y=(O,X)=>[O,X];break;case"topMiddle":b=(O,X)=>[O/2,0],y=(O,X)=>[O/2,X];break;case"topRight":w=!0,b=(O,X)=>[O,0],y=(O,X)=>[0,X];break;case"middleRight":B=!0,b=(O,X)=>[O,X/2],y=(O,X)=>[0,X/2];break;case"bottomRight":w=!0,b=(O,X)=>[O,X],y=(O,X)=>[0,0];break;case"bottomMiddle":b=(O,X)=>[O/2,X],y=(O,X)=>[O/2,0];break;case"bottomLeft":w=!0,b=(O,X)=>[0,X],y=(O,X)=>[O,0];break;case"middleLeft":B=!0,b=(O,X)=>[0,X/2],y=(O,X)=>[O,X/2];break}const j=b(l,c),E=y(l,c);let S=g(...E);const T=qs._round(i+S[0]),M=qs._round(o+S[1]);let D=1,P=1,Y,Q;if(s.fromKeyboard)({deltaX:Y,deltaY:Q}=s);else{const{screenX:O,screenY:X}=s,[$,H]=this.#l;[Y,Q]=this.screenToPageTranslation(O-$,X-H),this.#l[0]=O,this.#l[1]=X}if([Y,Q]=v(Y/r,Q/n),w){const O=Math.hypot(l,c);D=P=Math.max(Math.min(Math.hypot(E[0]-j[0]-Y,E[1]-j[1]-Q)/O,1/l,1/c),u/l,m/c)}else B?D=Bi(Math.abs(E[0]-j[0]-Y),u,1)/l:P=Bi(Math.abs(E[1]-j[1]-Q),m,1)/c;const L=qs._round(l*D),ae=qs._round(c*P);S=g(...y(L,ae));const ne=T-S[0],V=M-S[1];this.#d||=[this.x,this.y,this.width,this.height],this.width=L,this.height=ae,this.x=ne,this.y=V,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#r?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#g)return this._editToolbar;this._editToolbar=new _x(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[s,r]of e)await this._editToolbar.addButton(s,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#r?.destroy()}addContainer(e){const s=this._editToolbar?.div;s?s.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#r||(cd.initialize(qs._l10n),this.#r=new cd(this),this.#e&&(this.#r.data=this.#e,this.#e=null)),this.#r}get altTextData(){return this.#r?.data}set altTextData(e){this.#r&&(this.#r.data=e)}get guessedAltText(){return this.#r?.guessedText}async setGuessedAltText(e){await this.#r?.setGuessedText(e)}serializeAltText(e){return this.#r?.serialize(e)}hasAltText(){return!!this.#r&&!this.#r.isEmpty()}hasAltTextData(){return this.#r?.hasData()??!1}focusCommentButton(){this.#s?.focusButton()}addCommentButton(){return this.canAddComment?this.#s||=new _b(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#n){this._uiManager.isEditingMode()&&this.#n.classList.remove("hidden");return}this.hasComment&&(this.#n=this.#s.renderForStandalone(),this.div.append(this.#n))}}removeStandaloneCommentButton(){this.#s.removeStandaloneCommentButton(),this.#n=null}hideStandaloneCommentButton(){this.#n?.classList.add("hidden")}get comment(){if(!this.#s)return null;const{data:{richText:e,text:s,date:r,deleted:n}}=this.#s;return{text:s,richText:e,date:r,deleted:n,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#s||=new _b(this),typeof e=="object"&&e!==null?this.#s.restoreData(e):this.#s.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:s,richText:r}){if(!s||(this.#s||=new _b(this),this.#s.setInitialText(e,r),!this.annotationElementId))return;const n=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);n&&this.updateFromAnnotationLayer(n)}get hasEditedComment(){return this.#s?.hasBeenEdited()}get hasDeletedComment(){return this.#s?.isDeleted()}get hasComment(){return!!this.#s&&!this.#s.isEmpty()&&!this.#s.isDeleted()}async editComment(e){this.#s||=new _b(this),this.#s.edit(e)}toggleComment(e,s=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,s)}setSelectedCommentButton(e){this.#s.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,n]=e.rect,[i]=this.pageDimensions,[o]=this.pageTranslation,l=o+i+1,c=n-100,u=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,u,n]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:s}}){this.#s.data=s?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#i?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#Q();const[s,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/s).toFixed(2)}%`,e.style.maxHeight=`${(100*s/r).toFixed(2)}%`);const[n,i]=this.getInitialTranslation();return this.translate(n,i),YT(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#k||=new vw({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#z.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#z(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#r?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(e,s,r){let i=.7*(r/s)+1-.7;if(i===1)return;const o=this.#S(this.rotation),l=(T,M)=>[o[0]*T+o[2]*M,o[1]*T+o[3]*M],[c,u]=this.parentDimensions,m=this.x,A=this.y,g=this.width,p=this.height,v=qs.MIN_SIZE/c,b=qs.MIN_SIZE/u;i=Math.max(Math.min(i,1/g,1/p),v/g,b/p);const y=qs._round(g*i),w=qs._round(p*i);if(y===g&&w===p)return;this.#d||=[m,A,g,p];const B=l(g/2,p/2),j=qs._round(m+B[0]),E=qs._round(A+B[1]),S=l(y/2,w/2);this.x=j-S[0],this.y=E-S[1],this.width=y,this.height=w,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#r?.toggle(!0),this.parent.togglePointerEvents(!0),this.#R()}pointerdown(e){const{isMac:s}=oi.platform;if(e.button!==0||e.ctrlKey&&s){e.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#O(e);return}this.#T(e)}#T(e){const{isMac:s}=oi.platform;e.ctrlKey&&!s||e.shiftKey||e.metaKey&&s?this.parent.toggleSelected(this):this.parent.setSelected(this)}#O(e){const{isSelected:s}=this;this._uiManager.setUpDragSession();let r=!1;const n=new AbortController,i=this._uiManager.combinedSignal(n),o={capture:!0,passive:!1,signal:i},l=u=>{n.abort(),this.#a=null,this.#f=!1,this._uiManager.endDragSession()||this.#T(u),r&&this._onStopDragging()};s&&(this.#_=e.clientX,this.#N=e.clientY,this.#a=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",u=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:A,pointerId:g}=u;if(g!==this.#a){xn(u);return}const[p,v]=this.screenToPageTranslation(m-this.#_,A-this.#N);this.#_=m,this.#N=A,this._uiManager.dragSelectedEditors(p,v)},o),window.addEventListener("touchmove",xn,o),window.addEventListener("pointerdown",u=>{u.pointerType===this.#o&&(this.#k||u.isPrimary)&&l(u),xn(u)},o));const c=u=>{if(!this.#a||this.#a===u.pointerId){l(u);return}xn(u)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.#x=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,s,r){e.changeParent(this),this.x=s,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,s,r=this.rotation){const n=this.parentScale,[i,o]=this.pageDimensions,[l,c]=this.pageTranslation,u=e/n,m=s/n,A=this.x*i,g=this.y*o,p=this.width*i,v=this.height*o;switch(r){case 0:return[A+u+l,o-g-m-v+c,A+u+p+l,o-g-m+c];case 90:return[A+m+l,o-g+u+c,A+m+v+l,o-g+u+p+c];case 180:return[A-u-p+l,o-g+m+c,A-u+l,o-g+m+v+c];case 270:return[A-m-v+l,o-g-u-p+c,A-m+l,o-g-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,s){const[r,n,i,o]=e,l=i-r,c=o-n;switch(this.rotation){case 0:return[r,s-o,l,c];case 90:return[r,s-n,c,l];case 180:return[i,s-n,l,c];case 270:return[i,s-o,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&qs._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#s?.onUpdatedColor()}getData(){const{comment:{text:e,color:s,date:r,opacity:n,deleted:i,richText:o},uid:l,pageIndex:c,creationDate:u,modificationDate:m}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:u,modificationDate:r||m,popupRef:!i,color:s,opacity:n}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#g=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#g=!1,!0):!1}isInEditMode(){return this.#g}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:s,bottom:r,right:n}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return s<o&&n>0&&e<i&&r>0}#Q(){if(this.#m||!this.div)return;this.#m=new AbortController;const e=this._uiManager.combinedSignal(this.#m);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#Q()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,s=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,s,r){const n=new this.prototype.constructor({parent:s,id:s.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});n.rotation=e.rotation,n.#e=e.accessibilityData,n._isCopy=e.isCopy||!1;const[i,o]=n.pageDimensions,[l,c,u,m]=n.getRectInCurrentCoords(e.rect,o);return n.x=l/i,n.y=c/o,n.width=u/i,n.height=m/o,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#m?.abort(),this.#m=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#x&&(clearTimeout(this.#x),this.#x=null),this.#L(),this.removeEditToolbar(),this.#v){for(const e of this.#v.values())clearTimeout(e);this.#v=null}this.parent=null,this.#k?.destroy(),this.#k=null,this.#u?.remove(),this.#u=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#M(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,s]}=this,[r,n,i,o]=this.getPDFRect();return[qs._round(r+(i-r)*e),qs._round(n+(o-n)*(1-s))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#s.commentPopupPositionInLayer}set commentPopupPosition(e){this.#s.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#s.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#s.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#s?.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const s=this.#c.children;if(!this.#t){this.#t=Array.from(s);const o=this.#G.bind(this),l=this.#q.bind(this),c=this._uiManager._signal;for(const u of this.#t){const m=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",this.#W.bind(this,m),{signal:c}),u.setAttribute("data-l10n-id",qs._l10nResizer[m])}}const r=this.#t[0];let n=0;for(const o of s){if(o===r)break;n++}const i=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(i!==n){if(i<n)for(let l=0;l<n-i;l++)this.#c.append(this.#c.firstElementChild);else if(i>n)for(let l=0;l<i-n;l++)this.#c.firstElementChild.before(this.#c.lastElementChild);let o=0;for(const l of s){const u=this.#t[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",qs._l10nResizer[u])}}this.#H(0),this.#b=!0,this.#c.firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#G(e){qs._resizerKeyboardManager.exec(this,e)}#q(e){this.#b&&e.relatedTarget?.parentNode!==this.#c&&this.#L()}#W(e){this.#p=this.#b?e:""}#H(e){if(this.#t)for(const s of this.#t)s.tabIndex=e}_resizeWithKeyboard(e,s){this.#b&&this.#I(this.#p,{deltaX:e,deltaY:s,fromKeyboard:!0})}#L(){this.#b=!1,this.#H(-1),this.#R()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#r?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#r?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,s){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#A}set isEditing(e){this.#A=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,s=!1){if(s){this.#v||=new Map;const{action:r}=e;let n=this.#v.get(r);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),this.#v.delete(r),this.#v.size===0&&(this.#v=null)},qs._telemetryTimeout),this.#v.set(r,n);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}updateFakeAnnotationElement(e){if(!this.#u&&!this.deleted){this.#u=e.addFakeAnnotation(this);return}if(this.deleted){this.#u.remove(),this.#u=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#u.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let s=e.container.querySelector(".annotationContent");if(!s)s=document.createElement("div"),s.classList.add("annotationContent",this.editorType),e.container.prepend(s);else if(s.nodeName==="CANVAS"){const r=s;s=document.createElement("div"),s.classList.add("annotationContent",this.editorType),r.before(s)}return s}resetAnnotationElement(e){const{firstElementChild:s}=e.container;s?.nodeName==="DIV"&&s.classList.contains("annotationContent")&&s.remove()}}class Tz extends qs{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const XB=3285377520,Fl=4294901760,ed=65535;class KT{constructor(e){this.h1=e?e&4294967295:XB,this.h2=e?e&4294967295:XB}update(e){let s,r;if(typeof e=="string"){s=new Uint8Array(e.length*2),r=0;for(let b=0,y=e.length;b<y;b++){const w=e.charCodeAt(b);w<=255?s[r++]=w:(s[r++]=w>>>8,s[r++]=w&255)}}else if(ArrayBuffer.isView(e))s=e.slice(),r=s.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=r>>2,i=r-n*4,o=new Uint32Array(s.buffer,0,n);let l=0,c=0,u=this.h1,m=this.h2;const A=3432918353,g=461845907,p=A&ed,v=g&ed;for(let b=0;b<n;b++)b&1?(l=o[b],l=l*A&Fl|l*p&ed,l=l<<15|l>>>17,l=l*g&Fl|l*v&ed,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[b],c=c*A&Fl|c*p&ed,c=c<<15|c>>>17,c=c*g&Fl|c*v&ed,m^=c,m=m<<13|m>>>19,m=m*5+3864292196);switch(l=0,i){case 3:l^=s[n*4+2]<<16;case 2:l^=s[n*4+1]<<8;case 1:l^=s[n*4],l=l*A&Fl|l*p&ed,l=l<<15|l>>>17,l=l*g&Fl|l*v&ed,n&1?u^=l:m^=l}this.h1=u,this.h2=m}hexdigest(){let e=this.h1,s=this.h2;return e^=s>>>1,e=e*3981806797&Fl|e*36045&ed,s=s*4283543511&Fl|((s<<16|e>>>16)*2950163797&Fl)>>>16,e^=s>>>1,e=e*444984403&Fl|e*60499&ed,s=s*3301882366&Fl|((s<<16|e>>>16)*3120437893&Fl)>>>16,e^=s>>>1,(e>>>0).toString(16).padStart(8,"0")+(s>>>0).toString(16).padStart(8,"0")}}const $j=Object.freeze({map:null,hash:"",transfer:void 0});class k5{#e=!1;#t=null;#r=null;#s=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,s){const r=this.#s.get(e);return r===void 0?s:Object.assign(s,r)}getRawValue(e){return this.#s.get(e)}remove(e){const s=this.#s.get(e);if(s!==void 0&&(s instanceof qs&&this.#r.delete(s.annotationElementId),this.#s.delete(e),this.#s.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of this.#s.values())if(r instanceof qs)return;this.onAnnotationEditor(null)}}setValue(e,s){const r=this.#s.get(e);let n=!1;if(r!==void 0)for(const[i,o]of Object.entries(s))r[i]!==o&&(n=!0,r[i]=o);else n=!0,this.#s.set(e,s);n&&this.#n(),s instanceof qs&&((this.#r||=new Map).set(s.annotationElementId,s),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(s.constructor._type))}has(e){return this.#s.has(e)}get size(){return this.#s.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new XT(this)}get serializable(){if(this.#s.size===0)return $j;const e=new Map,s=new KT,r=[],n=Object.create(null);let i=!1;for(const[o,l]of this.#s){const c=l instanceof qs?l.serialize(!1,n):l;l.page&&(l.pageIndex=l.page._pageIndex,delete l.page),c&&(e.set(o,c),s.update(`${o}:${JSON.stringify(c)}`),i||=!!c.bitmap)}if(i)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:s.hexdigest(),transfer:r}:$j}get editorStats(){let e=null;const s=new Map;let r=0,n=0;for(const i of this.#s.values()){if(!(i instanceof qs)){i.popup&&(i.popup.deleted?n+=1:r+=1);continue}i.isCommentDeleted?n+=1:i.hasEditedComment&&(r+=1);const o=i.telemetryFinalData;if(!o)continue;const{type:l}=o;s.has(l)||s.set(l,Object.getPrototypeOf(i).constructor),e||=Object.create(null);const c=e[l]||=new Map;for(const[u,m]of Object.entries(o)){if(u==="type")continue;let A=c.get(u);A||(A=new Map,c.set(u,A));const g=A.get(m)??0;A.set(m,g+1)}}if((n>0||r>0)&&(e||=Object.create(null),e.comments={deleted:n,edited:r}),!e)return null;for(const[i,o]of s)e[i]=o.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,s){const r=this.#r?.get(e);return r?(r.updateFromAnnotationLayer(s),!0):!1}getEditor(e){return this.#r?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#r)for(const s of this.#r.values())s.serialize()&&e.push(s.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#s.entries()}}class XT extends k5{#e;constructor(e){super();const{map:s,hash:r,transfer:n}=e.serializable,i=structuredClone(s,n?{transfer:n}:null);this.#e={map:i,hash:r,transfer:n}}get print(){ta("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return ar(this,"modifiedIds",{ids:new Set,hash:""})}}class Pz{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:s=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const s=this.styleElement.sheet;s.insertRule(e,s.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:s,_inspectFont:r}){if(!(!e||this.#e.has(e.loadedName))){if(Zr(!s,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:i,style:o}=e,l=new FontFace(n,i,o);this.addNativeFontFace(l);try{await l.load(),this.#e.add(n),r?.(e)}catch{rr(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}ta("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(n){throw rr(`Failed to load font '${r.family}': '${n}'.`),e.disableFontFace=!0,n}}return}const s=e.createFontFaceRule();if(s){if(this.insertRule(s),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const n=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return ar(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return ar(this,"isSyncFontLoadingSupported",ao||oi.platform.isFirefox)}_queueLoadingCallback(e){function s(){for(Zr(!n.done,"completeRequest() cannot be called twice."),n.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,n={done:!1,complete:s,callback:e};return r.push(n),n}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ar(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,s){function r(E,S){return E.charCodeAt(S)<<24|E.charCodeAt(S+1)<<16|E.charCodeAt(S+2)<<8|E.charCodeAt(S+3)&255}function n(E,S,T,M){const D=E.substring(0,S),P=E.substring(S+T);return D+M+P}let i,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function m(E,S){if(++u>30){rr("Load test font never loaded."),S();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){S();return}setTimeout(m.bind(null,E,S))}const A=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=n(g,976,A.length,A);const v=16,b=1482184792;let y=r(g,v);for(i=0,o=A.length-3;i<o;i+=4)y=y-b+r(A,i)|0;i<A.length&&(y=y-b+r(A+"XXX",i)|0),g=n(g,v,4,fz(y));const w=`url(data:font/opentype;base64,${btoa(g)});`,B=`@font-face {font-family:"${A}";src:${w}}`;this.insertRule(B);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const E of[e.loadedName,A]){const S=this._document.createElement("span");S.textContent="Hi",S.style.fontFamily=E,j.append(S)}this._document.body.append(j),m(A,()=>{j.remove(),s.complete()})}}class Iz{#e;constructor(e,s=null,r,n){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=s,r&&Object.assign(this,r),n&&(this.charProcOperatorList=n)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let s;if(!this.cssFontInfo)s=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this._inspectFont?.(this,e),s}getPathGenerator(e,s){if(this.compiledGlyphs[s]!==void 0)return this.compiledGlyphs[s];const r=this.loadedName+"_path_"+s;let n;try{n=e.get(r)}catch(o){rr(`getPathGenerator - ignoring character: "${o}".`)}const i=WT(n?.path);return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[s]=i}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}set disableFontFace(e){ar(this,"disableFontFace",!!e)}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}set bbox(e){ar(this,"bbox",e)}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}class Jf{#e;#t;#r;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const s=new TextEncoder,r={};let n=0;for(const u of Jf.strings){const m=s.encode(e[u]);r[u]=m,n+=4+m.length}const i=new ArrayBuffer(n),o=new Uint8Array(i),l=new DataView(i);let c=0;for(const u of Jf.strings){const m=r[u],A=m.length;l.setUint32(c,A),o.set(m,c+4),c+=4+A}return Zr(c===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#r=new TextDecoder}#s(e){Zr(e<Jf.strings.length,"Invalid string index");let s=0;for(let n=0;n<e;n++)s+=this.#t.getUint32(s)+4;const r=this.#t.getUint32(s);return this.#r.decode(new Uint8Array(this.#e,s+4,r))}get fontFamily(){return this.#s(0)}get fontWeight(){return this.#s(1)}get italicAngle(){return this.#s(2)}}class Zf{#e;#t;#r;static strings=["css","loadedName","baseFontName","src"];static write(e){const s=new TextEncoder,r={};let n=0;for(const g of Zf.strings){const p=s.encode(e[g]);r[g]=p,n+=4+p.length}n+=4;let i,o,l=1+n;e.style&&(i=s.encode(e.style.style),o=s.encode(e.style.weight),l+=4+i.length+4+o.length);const c=new ArrayBuffer(l),u=new Uint8Array(c),m=new DataView(c);let A=0;m.setUint8(A++,e.guessFallback?1:0),m.setUint32(A,0),A+=4,n=0;for(const g of Zf.strings){const p=r[g],v=p.length;n+=4+v,m.setUint32(A,v),u.set(p,A+4),A+=4+v}return m.setUint32(A-n-4,n),e.style&&(m.setUint32(A,i.length),u.set(i,A+4),A+=4+i.length,m.setUint32(A,o.length),u.set(o,A+4),A+=4+o.length),Zr(A<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(A)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#r=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#s(e){Zr(e<Zf.strings.length,"Invalid string index");let s=5;for(let n=0;n<e;n++)s+=this.#t.getUint32(s)+4;const r=this.#t.getUint32(s);return this.#r.decode(new Uint8Array(this.#e,s+4,r))}get css(){return this.#s(0)}get loadedName(){return this.#s(1)}get baseFontName(){return this.#s(2)}get src(){return this.#s(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const s=this.#t.getUint32(e),r=this.#r.decode(new Uint8Array(this.#e,e+4,s));e+=4+s;const n=this.#t.getUint32(e),i=this.#r.decode(new Uint8Array(this.#e,e+4,n));return{style:r,weight:i}}}class va{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#r=this.#t+1+8;static#s=this.#r+1+48;static#n=this.#s+1+6;#i;#a;#o;constructor({data:e,extra:s}){this.#i=e,this.#a=new TextDecoder,this.#o=new DataView(this.#i),s&&Object.assign(this,s)}#c(e){Zr(e<va.bools.length,"Invalid boolean index");const s=Math.floor(e/4),r=e*2%8,n=this.#o.getUint8(s)>>r&3;return n===0?void 0:n===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return Zr(e<va.numbers.length,"Invalid number index"),this.#o.getFloat64(va.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=va.#t;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let n=0;n<4;n++)r.push(this.#o.getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=va.#r;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let n=0;n<6;n++)r.push(this.#o.getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=va.#s;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let n=0;n<3;n++)r.push(this.#o.getInt16(e,!0)),e+=2;return r}#h(e){Zr(e<va.strings.length,"Invalid string index");let s=va.#n+4;for(let i=0;i<e;i++)s+=this.#o.getUint32(s)+4;const r=this.#o.getUint32(s),n=new Uint8Array(r);return n.set(new Uint8Array(this.#i,s+4,r)),this.#a.decode(n)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=va.#n;const s=this.#o.getUint32(e);e+=4+s;const r=this.#o.getUint32(e);e+=4+r;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);if(i!==0)return new Uint8Array(this.#i,e+4,i)}clearData(){let e=va.#n;const s=this.#o.getUint32(e);e+=4+s;const r=this.#o.getUint32(e);e+=4+r;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);new Uint8Array(this.#i,e+4,i).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=va.#n;const s=this.#o.getUint32(e);e+=4+s;const r=this.#o.getUint32(e);e+=4+r;const n=this.#o.getUint32(e);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(this.#i,e+4,n)),new Jf(i.buffer)}get systemFontInfo(){let e=va.#n;const s=this.#o.getUint32(e);e+=4+s;const r=this.#o.getUint32(e);if(r===0)return null;const n=new Uint8Array(r);return n.set(new Uint8Array(this.#i,e+4,r)),new Zf(n.buffer)}static write(e){const s=e.systemFontInfo?Zf.write(e.systemFontInfo):null,r=e.cssFontInfo?Jf.write(e.cssFontInfo):null,n=new TextEncoder,i={};let o=0;for(const b of va.strings)i[b]=n.encode(e[b]),o+=4+i[b].length;const l=va.#n+4+o+4+(s?s.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(l),u=new Uint8Array(c),m=new DataView(c);let A=0;const g=va.bools.length;let p=0,v=0;for(let b=0;b<g;b++){const y=e[va.bools[b]];p|=(y===void 0?0:y?2:1)<<v,v+=2,(v===8||b===g-1)&&(m.setUint8(A++,p),p=0,v=0)}Zr(A===va.#e,"FontInfo.write: Boolean properties offset mismatch");for(const b of va.numbers)m.setFloat64(A,e[b]),A+=8;if(Zr(A===va.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){m.setUint8(A++,4);for(const b of e.bbox)m.setInt16(A,b,!0),A+=2}else m.setUint8(A++,0),A+=8;if(Zr(A===va.#r,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){m.setUint8(A++,6);for(const b of e.fontMatrix)m.setFloat64(A,b,!0),A+=8}else m.setUint8(A++,0),A+=48;if(Zr(A===va.#s,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){m.setUint8(A++,1);for(const b of e.defaultVMetrics)m.setInt16(A,b,!0),A+=2}else m.setUint8(A++,0),A+=6;Zr(A===va.#n,"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(va.#n,0),A+=4;for(const b of va.strings){const y=i[b],w=y.length;m.setUint32(A,w),u.set(y,A+4),A+=4+w}if(m.setUint32(va.#n,A-va.#n-4),!s)m.setUint32(A,0),A+=4;else{const b=s.byteLength;m.setUint32(A,b),Zr(A+4+b<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(s),A+4),A+=4+b}if(!r)m.setUint32(A,0),A+=4;else{const b=r.byteLength;m.setUint32(A,b),Zr(A+4+b<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(r),A+4),A+=4+b}return e.data===void 0?(m.setUint32(A,0),A+=4):(m.setUint32(A,e.data.length),u.set(e.data,A+4),A+=4+e.data.length),Zr(A<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(A)}}class fi{static#e=0;static#t=1;static#r=2;static#s=3;static#n=4;static#i=8;static#a=12;static#o=16;constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let s,r=null,n=[],i=[],o=[],l=[],c=null,u=null;switch(e[0]){case"RadialAxial":s=e[1]==="axial"?1:2,r=e[2],o=e[3],s===1?n.push(...e[4],...e[5]):n.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":s=3,c=e[1],n=e[2],i=e[3],l=e[4]||[],r=e[6],u=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const m=Math.floor(n.length/2),A=Math.floor(i.length/3),g=o.length,p=l.length;let v=0;for(const S of l)v+=1,v=Math.ceil(v/4)*4,v+=4+S.coords.length*4,v+=4+S.colors.length*4,S.verticesPerRow!==void 0&&(v+=4);const b=20+m*8+A*3+g*8+(r?16:0)+(u?3:0)+v,y=new ArrayBuffer(b),w=new DataView(y),B=new Uint8Array(y);w.setUint8(fi.#e,s),w.setUint8(fi.#t,r?1:0),w.setUint8(fi.#r,u?1:0),w.setUint8(fi.#s,c),w.setUint32(fi.#n,m,!0),w.setUint32(fi.#i,A,!0),w.setUint32(fi.#a,g,!0),w.setUint32(fi.#o,p,!0);let j=20;new Float32Array(y,j,m*2).set(n),j+=m*8,B.set(i,j),j+=A*3;for(const[S,T]of o)w.setFloat32(j,S,!0),j+=4,w.setUint32(j,parseInt(T.slice(1),16),!0),j+=4;if(r)for(const S of r)w.setFloat32(j,S,!0),j+=4;u&&(B.set(u,j),j+=3);for(let S=0;S<l.length;S++){const T=l[S];w.setUint8(j,T.type),j+=1,j=Math.ceil(j/4)*4,w.setUint32(j,T.coords.length,!0),j+=4,new Int32Array(y,j,T.coords.length).set(T.coords),j+=T.coords.length*4,w.setUint32(j,T.colors.length,!0),j+=4,new Int32Array(y,j,T.colors.length).set(T.colors),j+=T.colors.length*4,T.verticesPerRow!==void 0&&(w.setUint32(j,T.verticesPerRow,!0),j+=4)}return y}getIR(){const e=this.view,s=this.data[fi.#e],r=!!this.data[fi.#t],n=!!this.data[fi.#r],i=e.getUint32(fi.#n,!0),o=e.getUint32(fi.#i,!0),l=e.getUint32(fi.#a,!0),c=e.getUint32(fi.#o,!0);let u=20;const m=new Float32Array(this.buffer,u,i*2);u+=i*8;const A=new Uint8Array(this.buffer,u,o*3);u+=o*3;const g=[];for(let y=0;y<l;++y){const w=e.getFloat32(u,!0);u+=4;const B=e.getUint32(u,!0);u+=4,g.push([w,`#${B.toString(16).padStart(6,"0")}`])}let p=null;if(r){p=[];for(let y=0;y<4;++y)p.push(e.getFloat32(u,!0)),u+=4}let v=null;n&&(v=new Uint8Array(this.buffer,u,3),u+=3);const b=[];for(let y=0;y<c;++y){const w=e.getUint8(u);u+=1,u=Math.ceil(u/4)*4;const B=e.getUint32(u,!0);u+=4;const j=new Int32Array(this.buffer,u,B);u+=B*4;const E=e.getUint32(u,!0);u+=4;const S=new Int32Array(this.buffer,u,E);u+=E*4;const T={type:w,coords:j,colors:S};w===Uj.LATTICE&&(T.verticesPerRow=e.getUint32(u,!0),u+=4),b.push(T)}if(s===1)return["RadialAxial","axial",p,g,Array.from(m.slice(0,2)),Array.from(m.slice(2,4)),null,null];if(s===2)return["RadialAxial","radial",p,g,[m[0],m[1]],[m[3],m[4]],m[2],m[5]];if(s===3){const y=this.data[fi.#s];let w=null;if(m.length>0){let B=m[0],j=m[0],E=m[1],S=m[1];for(let T=0;T<m.length;T+=2){const M=m[T],D=m[T+1];B=B>M?M:B,E=E>D?D:E,j=j<M?M:j,S=S<D?D:S}w=[B,E,j,S]}return["Mesh",y,m,A,b,w,p,v]}throw new Error(`Unsupported pattern kind: ${s}`)}}class Lz{static write(e){let s,r;return oi.isFloat16ArraySupported?(r=new ArrayBuffer(e.length*2),s=new Float16Array(r)):(r=new ArrayBuffer(e.length*4),s=new Float32Array(r)),s.set(e),r}#e;constructor(e){this.#e=e}get path(){return oi.isFloat16ArraySupported?new Float16Array(this.#e):new Float32Array(this.#e)}}function Mz(a){if(a instanceof URL)return a.href;if(typeof a=="string"){if(ao)return a;const e=URL.parse(a,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Rz(a){if(ao&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return bw(a);if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="object"&&!isNaN(a?.length))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Cb(a){if(typeof a!="string")return null;if(a.endsWith("/"))return a;throw new Error(`Invalid factory url: "${a}" must include trailing slash.`)}const qj=a=>typeof a=="object"&&Number.isInteger(a?.num)&&a.num>=0&&Number.isInteger(a?.gen)&&a.gen>=0,Oz=a=>typeof a=="object"&&typeof a?.name=="string",Uz=yz.bind(null,qj,Oz);class Qz{#e=new Map;#t=Promise.resolve();postMessage(e,s){const r={data:structuredClone(e,s?{transfer:s}:null)};this.#t.then(()=>{for(const[n]of this.#e)n.call(this,r)})}addEventListener(e,s,r=null){let n=null;if(r?.signal instanceof AbortSignal){const{signal:i}=r;if(i.aborted){rr("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,s);n=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}this.#e.set(s,n)}removeEventListener(e,s){this.#e.get(s)?.(),this.#e.delete(s)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const kb={DATA:1,ERROR:2},zn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function JB(){}function To(a){if(a instanceof zh||a instanceof Qj||a instanceof zB||a instanceof gv||a instanceof aN)return a;switch(a instanceof Error||typeof a=="object"&&a!==null||ta('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new zh(a.message);case"InvalidPDFException":return new Qj(a.message);case"PasswordException":return new zB(a.message,a.code);case"ResponseException":return new gv(a.message,a.status,a.missing);case"UnknownErrorException":return new aN(a.message,a.details)}return new aN(a.message,a.toString())}class dx{#e=new AbortController;constructor(e,s,r){this.sourceName=e,this.targetName=s,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#s(e);return}if(e.callback){const r=e.callbackId,n=this.callbackCapabilities[r];if(!n)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===kb.DATA)n.resolve(e.data);else if(e.callback===kb.ERROR)n.reject(To(e.reason));else throw new Error("Unexpected callback case");return}const s=this.actionHandler[e.action];if(!s)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,n=e.sourceName,i=this.comObj;Promise.try(s,e.data).then(function(o){i.postMessage({sourceName:r,targetName:n,callback:kb.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:r,targetName:n,callback:kb.ERROR,callbackId:e.callbackId,reason:To(o)})});return}if(e.streamId){this.#r(e);return}s(e.data)}on(e,s){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=s}send(e,s,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:s},r)}sendWithPromise(e,s,r){const n=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[n]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:s},r)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,s,r,n){const i=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const m=Promise.withResolvers();return this.streamControllers[i]={controller:u,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:i,data:s,desiredSize:u.desiredSize},n),m.promise},pull:u=>{const m=Promise.withResolvers();return this.streamControllers[i].pullCall=m,c.postMessage({sourceName:o,targetName:l,stream:zn.PULL,streamId:i,desiredSize:u.desiredSize}),m.promise},cancel:u=>{Zr(u instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[i].cancelCall=m,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:zn.CANCEL,streamId:i,reason:To(u)}),m.promise}},r)}#r(e){const s=e.streamId,r=this.sourceName,n=e.sourceName,i=this.comObj,o=this,l=this.actionHandler[e.action],c={enqueue(u,m=1,A){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=m,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:n,stream:zn.ENQUEUE,streamId:s,chunk:u},A)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:n,stream:zn.CLOSE,streamId:s}),delete o.streamSinks[s])},error(u){Zr(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:n,stream:zn.ERROR,streamId:s,reason:To(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[s]=c,Promise.try(l,e.data,c).then(function(){i.postMessage({sourceName:r,targetName:n,stream:zn.START_COMPLETE,streamId:s,success:!0})},function(u){i.postMessage({sourceName:r,targetName:n,stream:zn.START_COMPLETE,streamId:s,reason:To(u)})})}#s(e){const s=e.streamId,r=this.sourceName,n=e.sourceName,i=this.comObj,o=this.streamControllers[s],l=this.streamSinks[s];switch(e.stream){case zn.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(To(e.reason));break;case zn.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(To(e.reason));break;case zn.PULL:if(!l){i.postMessage({sourceName:r,targetName:n,stream:zn.PULL_COMPLETE,streamId:s,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||JB).then(function(){i.postMessage({sourceName:r,targetName:n,stream:zn.PULL_COMPLETE,streamId:s,success:!0})},function(u){i.postMessage({sourceName:r,targetName:n,stream:zn.PULL_COMPLETE,streamId:s,reason:To(u)})});break;case zn.ENQUEUE:if(Zr(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case zn.CLOSE:if(Zr(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#n(o,s);break;case zn.ERROR:Zr(o,"error should have stream controller"),o.controller.error(To(e.reason)),this.#n(o,s);break;case zn.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(To(e.reason)),this.#n(o,s);break;case zn.CANCEL:if(!l)break;const c=To(e.reason);Promise.try(l.onCancel||JB,c).then(function(){i.postMessage({sourceName:r,targetName:n,stream:zn.CANCEL_COMPLETE,streamId:s,success:!0})},function(u){i.postMessage({sourceName:r,targetName:n,stream:zn.CANCEL_COMPLETE,streamId:s,reason:To(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[s];break;default:throw new Error("Unexpected stream case")}}async#n(e,s){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[s]}destroy(){this.#e?.abort(),this.#e=null}}class JT{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,s){if(e<=0||s<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,s);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,s,r){if(!e.canvas)throw new Error("Canvas is not specified");if(s<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=s,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,s){ta("Abstract method `_createCanvas` called.")}}class Hz extends JT{constructor({ownerDocument:e=globalThis.document,enableHWA:s=!1}){super({enableHWA:s}),this._document=e}_createCanvas(e,s){const r=this._document.createElement("canvas");return r.width=e,r.height=s,r}}class ZT{constructor({baseUrl:e=null,isCompressed:s=!0}){this.baseUrl=e,this.isCompressed=s}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const s=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(s).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${s}`)})}async _fetch(e){ta("Abstract method `_fetch` called.")}}class ZB extends ZT{async _fetch(e){const s=await g0(e,this.isCompressed?"arraybuffer":"text");return s instanceof ArrayBuffer?new Uint8Array(s):bw(s)}}class eP{addFilter(e){return"none"}addHCMFilter(e,s){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,s,r,n,i){return"none"}destroy(e=!1){}}class Vz extends eP{#e;#t;#r;#s;#n;#i;#a=0;constructor({docId:e,ownerDocument:s=globalThis.document}){super(),this.#s=e,this.#n=s}get#o(){return this.#t||=new Map}get#c(){return this.#i||=new Map}get#l(){if(!this.#r){const e=this.#n.createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=this.#n.createElementNS(lu,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#r=this.#n.createElementNS(lu,"defs"),e.append(r),r.append(this.#r),this.#n.body.append(e)}return this.#r}#h(e){if(e.length===1){const c=e[0],u=new Array(256);for(let A=0;A<256;A++)u[A]=c[A]/255;const m=u.join(",");return[m,m,m]}const[s,r,n]=e,i=new Array(256),o=new Array(256),l=new Array(256);for(let c=0;c<256;c++)i[c]=s[c]/255,o[c]=r[c]/255,l[c]=n[c]/255;return[i.join(","),o.join(","),l.join(",")]}#u(e){if(this.#e===void 0){this.#e="";const s=this.#n.URL;s!==this.#n.baseURI&&(yw(s)?rr('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=zT(s,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let s=this.#o.get(e);if(s)return s;const[r,n,i]=this.#h(e),o=e.length===1?r:`${r}${n}${i}`;if(s=this.#o.get(o),s)return this.#o.set(e,s),s;const l=`g_${this.#s}_transfer_map_${this.#a++}`,c=this.#u(l);this.#o.set(e,c),this.#o.set(o,c);const u=this.#f(l);return this.#A(r,n,i,u),c}addHCMFilter(e,s){const r=`${e}-${s}`,n="base";let i=this.#c.get(n);if(i?.key===r||(i?(i.filter?.remove(),i.key=r,i.url="none",i.filter=null):(i={key:r,url:"none",filter:null},this.#c.set(n,i)),!e||!s))return i.url;const o=this.#b(e);e=ks.makeHexColor(...o);const l=this.#b(s);if(s=ks.makeHexColor(...l),this.#l.style.color="",e==="#000000"&&s==="#ffffff"||e===s)return i.url;const c=new Array(256);for(let p=0;p<=255;p++){const v=p/255;c[p]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}const u=c.join(","),m=`g_${this.#s}_hcm_filter`,A=i.filter=this.#f(m);this.#A(u,u,u,A),this.#p(A);const g=(p,v)=>{const b=o[p]/255,y=l[p]/255,w=new Array(v+1);for(let B=0;B<=v;B++)w[B]=b+B/v*(y-b);return w.join(",")};return this.#A(g(0,5),g(1,5),g(2,5),A),i.url=this.#u(m),i.url}addAlphaFilter(e){let s=this.#o.get(e);if(s)return s;const[r]=this.#h([e]),n=`alpha_${r}`;if(s=this.#o.get(n),s)return this.#o.set(e,s),s;const i=`g_${this.#s}_alpha_map_${this.#a++}`,o=this.#u(i);this.#o.set(e,o),this.#o.set(n,o);const l=this.#f(i);return this.#g(r,l),o}addLuminosityFilter(e){let s=this.#o.get(e||"luminosity");if(s)return s;let r,n;if(e?([r]=this.#h([e]),n=`luminosity_${r}`):n="luminosity",s=this.#o.get(n),s)return this.#o.set(e,s),s;const i=`g_${this.#s}_luminosity_map_${this.#a++}`,o=this.#u(i);this.#o.set(e,o),this.#o.set(n,o);const l=this.#f(i);return this.#m(l),e&&this.#g(r,l),o}addHighlightHCMFilter(e,s,r,n,i){const o=`${s}-${r}-${n}-${i}`;let l=this.#c.get(e);if(l?.key===o||(l?(l.filter?.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},this.#c.set(e,l)),!s||!r))return l.url;const[c,u]=[s,r].map(this.#b.bind(this));let m=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),A=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,p]=[n,i].map(this.#b.bind(this));A<m&&([m,A,g,p]=[A,m,p,g]),this.#l.style.color="";const v=(w,B,j)=>{const E=new Array(256),S=(A-m)/j,T=w/255,M=(B-w)/(255*j);let D=0;for(let P=0;P<=j;P++){const Y=Math.round(m+P*S),Q=T+P*M;for(let L=D;L<=Y;L++)E[L]=Q;D=Y+1}for(let P=D;P<256;P++)E[P]=E[D-1];return E.join(",")},b=`g_${this.#s}_hcm_${e}_filter`,y=l.filter=this.#f(b);return this.#p(y),this.#A(v(g[0],p[0],5),v(g[1],p[1],5),v(g[2],p[2],5),y),l.url=this.#u(b),l.url}destroy(e=!1){e&&this.#i?.size||(this.#r?.parentNode.parentNode.remove(),this.#r=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#a=0)}#m(e){const s=this.#n.createElementNS(lu,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)}#p(e){const s=this.#n.createElementNS(lu,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)}#f(e){const s=this.#n.createElementNS(lu,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),this.#l.append(s),s}#d(e,s,r){const n=this.#n.createElementNS(lu,s);n.setAttribute("type","discrete"),n.setAttribute("tableValues",r),e.append(n)}#A(e,s,r,n){const i=this.#n.createElementNS(lu,"feComponentTransfer");n.append(i),this.#d(i,"feFuncR",e),this.#d(i,"feFuncG",s),this.#d(i,"feFuncB",r)}#g(e,s){const r=this.#n.createElementNS(lu,"feComponentTransfer");s.append(r),this.#d(r,"feFuncA",e)}#b(e){return this.#l.style.color=e,b0(getComputedStyle(this.#l).getPropertyValue("color"))}}class tP{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const s=`${this.baseUrl}${e}`;return this._fetch(s).catch(r=>{throw new Error(`Unable to load font data at: ${s}`)})}async _fetch(e){ta("Abstract method `_fetch` called.")}}class eS extends tP{async _fetch(e){const s=await g0(e,"arraybuffer");return new Uint8Array(s)}}class sP{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const s=`${this.baseUrl}${e}`;return this._fetch(s).catch(r=>{throw new Error(`Unable to load wasm data at: ${s}`)})}async _fetch(e){ta("Abstract method `_fetch` called.")}}class tS extends sP{async _fetch(e){const s=await g0(e,"arraybuffer");return new Uint8Array(s)}}ao&&rr("Please use the `legacy` build in Node.js environments.");async function B5(a){const s=await process.getBuiltinModule("fs").promises.readFile(a);return new Uint8Array(s)}class zz extends eP{}class $z extends JT{_createCanvas(e,s){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,s)}}class qz extends ZT{async _fetch(e){return B5(e)}}class Gz extends tP{async _fetch(e){return B5(e)}}class Wz extends sP{async _fetch(e){return B5(e)}}const pf="__forcedDependency",{floor:sS,ceil:rS}=Math;function Bb(a,e,s,r,n,i){a[e*4+0]=Math.min(a[e*4+0],s),a[e*4+1]=Math.min(a[e*4+1],r),a[e*4+2]=Math.max(a[e*4+2],n),a[e*4+3]=Math.max(a[e*4+3],i)}const Gj=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class Yz{#e;#t;constructor(e,s){this.#e=e,this.#t=s}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===Gj}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const Sb=(a,e)=>{if(!a)return;let s=a.get(e);return s||(s={dependencies:new Set,isRenderingOperation:!1},a.set(e,s)),s};class Kz{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[pf]:[]};#r=new Map;#s=[];#n=[];#i=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#u=new Map;#m;#p;#f;#d;#A;constructor(e,s,r=!1){this.#m=e.width,this.#p=e.height,this.#g(s),r&&(this.#A=new Map)}growOperationsCount(e){e>=this.#d.length&&this.#g(e,this.#d)}#g(e,s){const r=new ArrayBuffer(e*4);this.#f=new Uint8ClampedArray(r),this.#d=new Uint32Array(r),s&&s.length>0?(this.#d.set(s),this.#d.fill(Gj,s.length)):this.#d.fill(Gj)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[pf]:{__proto__:this.#t[pf]}},this.#a={__proto__:this.#a},this.#s.push(e),this}restore(e){const s=Object.getPrototypeOf(this.#e);if(s===null)return this;this.#e=s,this.#t=Object.getPrototypeOf(this.#t),this.#a=Object.getPrototypeOf(this.#a);const r=this.#s.pop();return r!==void 0&&(Sb(this.#A,e)?.dependencies.add(r),this.#d[e]=this.#d[r]),this}recordOpenMarker(e){return this.#s.push(e),this}getOpenMarker(){return this.#s.length===0?null:this.#s.at(-1)}recordCloseMarker(e){const s=this.#s.pop();return s!==void 0&&(Sb(this.#A,e)?.dependencies.add(s),this.#d[e]=this.#d[s]),this}beginMarkedContent(e){return this.#n.push(e),this}endMarkedContent(e){const s=this.#n.pop();return s!==void 0&&(Sb(this.#A,e)?.dependencies.add(s),this.#d[e]=this.#d[s]),this}pushBaseTransform(e){return this.#i.push(ks.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(e,s){return this.#e[e]=s,this}recordIncrementalData(e,s){return this.#t[e].push(s),this}resetIncrementalData(e,s){return this.#t[e].length=0,this}recordNamedData(e,s){return this.#r.set(e,s),this}recordSimpleDataFromNamed(e,s,r){this.#e[e]=this.#r.get(s)??r}recordFutureForcedDependency(e,s){return this.recordIncrementalData(pf,s),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const s of e)s in this.#e&&this.recordFutureForcedDependency(s,this.#e[s]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(pf,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,s,r,n,i,o){const l=ks.multiplyByDOMMatrix(this.#i.at(-1),s.getTransform()),c=[1/0,1/0,-1/0,-1/0];ks.axialAlignedBoundingBox([r,i,n,o],l,c);const u=ks.intersect(this.#a,c);return u?(this.#a[0]=u[0],this.#a[1]=u[1],this.#a[2]=u[2],this.#a[3]=u[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(e,s,r,n,i,o){const l=this.#a;if(l[0]===1/0)return this;const c=ks.multiplyByDOMMatrix(this.#i.at(-1),s.getTransform());if(l[0]===-1/0)return ks.axialAlignedBoundingBox([r,i,n,o],c,this.#o),this;const u=[1/0,1/0,-1/0,-1/0];return ks.axialAlignedBoundingBox([r,i,n,o],c,u),this.#o[0]=Math.min(this.#o[0],Math.max(u[0],l[0])),this.#o[1]=Math.min(this.#o[1],Math.max(u[1],l[1])),this.#o[2]=Math.max(this.#o[2],Math.min(u[2],l[2])),this.#o[3]=Math.max(this.#o[3],Math.min(u[3],l[3])),this}recordCharacterBBox(e,s,r,n=1,i=0,o=0,l){const c=r.bbox;let u,m;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&this.#u.get(r),u!==!1&&(m=[0,0,0,0],ks.axialAlignedBoundingBox(c,r.fontMatrix,m),(n!==1||i!==0||o!==0)&&ks.scaleMinMax([n,0,0,-n,i,o],m),u)))return this.recordBBox(e,s,m[0],m[2],m[1],m[3]);if(!l)return this.recordFullPageBBox(e);const A=l();return c&&m&&u===void 0&&(u=m[0]<=i-A.actualBoundingBoxLeft&&m[2]>=i+A.actualBoundingBoxRight&&m[1]<=o-A.actualBoundingBoxAscent&&m[3]>=o+A.actualBoundingBoxDescent,this.#u.set(r,u),u)?this.recordBBox(e,s,m[0],m[2],m[1],m[3]):this.recordBBox(e,s,i-A.actualBoundingBoxLeft,i+A.actualBoundingBoxRight,o-A.actualBoundingBoxAscent,o+A.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#m,this.#a[2]),this.#o[3]=Math.min(this.#p,this.#a[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,s){const r=this.#l,n=this.#e,i=this.#t;for(const o of s)o in this.#e?r.add(n[o]):o in i&&i[o].forEach(r.add,r);return this}recordNamedDependency(e,s){return this.#r.has(s)&&this.#l.add(this.#r.get(s)),this}recordOperation(e,s=!1){if(this.recordDependencies(e,[pf]),this.#A){const r=Sb(this.#A,e),{dependencies:n}=r;this.#l.forEach(n.add,n),this.#s.forEach(n.add,n),this.#n.forEach(n.add,n),n.delete(e),r.isRenderingOperation=!0}if(this.#c===e){const r=sS(this.#o[0]*256/this.#m),n=sS(this.#o[1]*256/this.#p),i=rS(this.#o[2]*256/this.#m),o=rS(this.#o[3]*256/this.#p);Bb(this.#f,e,r,n,i,o);for(const l of this.#l)l!==e&&Bb(this.#f,l,r,n,i,o);for(const l of this.#s)l!==e&&Bb(this.#f,l,r,n,i,o);for(const l of this.#n)l!==e&&Bb(this.#f,l,r,n,i,o);s||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,s=!1){const r=Array.from(this.#l);this.recordOperation(e,s),this.recordIncrementalData("sameLineText",e);for(const n of r)this.recordIncrementalData("sameLineText",n);return this}bboxToClipBoxDropOperation(e,s=!1){return this.#c===e&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),s||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const s=this.#h.get(e);return this.#h.delete(e),s}_pushPendingDependencies(e){for(const s of e)this.#l.add(s)}take(){return this.#u.clear(),new Yz(this.#d,this.#f)}takeDebugMetadata(){return this.#A}}class xv{#e;#t;#r;#s=0;#n=0;constructor(e,s,r){if(e instanceof xv&&e.#r===!!r)return e;this.#e=e,this.#t=s,this.#r=!!r}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#n++,this.#e.save(this.#t),this}restore(e){return this.#n>0&&(this.#e.restore(this.#t),this.#n--),this}recordOpenMarker(e){return this.#s++,this}getOpenMarker(){return this.#s>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#s--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,s){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,s){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,s){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,s){return this}recordSimpleDataFromNamed(e,s,r){return this.#e.recordSimpleDataFromNamed(e,s,this.#t),this}recordFutureForcedDependency(e,s){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#r||this.#e.resetBBox(this.#t),this}recordClipBox(e,s,r,n,i,o){return this.#r||this.#e.recordClipBox(this.#t,s,r,n,i,o),this}recordBBox(e,s,r,n,i,o){return this.#r||this.#e.recordBBox(this.#t,s,r,n,i,o),this}recordCharacterBBox(e,s,r,n,i,o,l){return this.#r||this.#e.recordCharacterBBox(this.#t,s,r,n,i,o,l),this}recordFullPageBBox(e){return this.#r||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,s){return this.#e.recordDependencies(this.#t,s),this}recordNamedDependency(e,s){return this.#e.recordNamedDependency(this.#t,s),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#r||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Dl={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ei={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Wj(a,e){if(!e)return;const s=e[2]-e[0],r=e[3]-e[1],n=new Path2D;n.rect(e[0],e[1],s,r),a.clip(n)}class S5{isModifyingCurrentTransform(){return!1}getPattern(){ta("Abstract method `getPattern` called.")}}class Xz extends S5{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,s=null){let r,n=this._p0,i=this._p1;if(s&&(n=n.slice(),i=i.slice(),ks.applyTransform(n,s),ks.applyTransform(i,s)),this._type==="axial")r=e.createLinearGradient(n[0],n[1],i[0],i[1]);else if(this._type==="radial"){let o=this._r0,l=this._r1;if(s){const c=new Float32Array(2);ks.singularValueDecompose2dScale(s,c),o*=c[0],l*=c[0]}r=e.createRadialGradient(n[0],n[1],o,i[0],i[1],l)}for(const o of this._colorStops)r.addColorStop(o[0],o[1]);return r}getPattern(e,s,r,n){let i;if(n===Ei.STROKE||n===Ei.FILL){if(this.isOriginBased()){let g=ks.transform(r,s.baseTransform);this.matrix&&(g=ks.transform(g,this.matrix));const p=.001,v=Math.hypot(g[0],g[1]),b=Math.hypot(g[2],g[3]),y=(g[0]*g[2]+g[1]*g[3])/(v*b);if(Math.abs(y)<p)if(this.isRadial()){if(Math.abs(v-b)<p)return this._createGradient(e,g)}else return this._createGradient(e,g)}const o=s.current.getClippedPathBoundingBox(n,sn(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=s.cachedCanvases.getCanvas("pattern",l,c),m=u.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-o[0],-o[1]),r=ks.transform(r,[1,0,0,1,o[0],o[1]]),m.transform(...s.baseTransform),this.matrix&&m.transform(...this.matrix),Wj(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),i=e.createPattern(u.canvas,"no-repeat");const A=new DOMMatrix(r);i.setTransform(A)}else Wj(e,this._bbox),i=this._createGradient(e);return i}}function oN(a,e,s,r,n,i,o,l){const c=e.coords,u=e.colors,m=a.data,A=a.width*4;let g;c[s+1]>c[r+1]&&(g=s,s=r,r=g,g=i,i=o,o=g),c[r+1]>c[n+1]&&(g=r,r=n,n=g,g=o,o=l,l=g),c[s+1]>c[r+1]&&(g=s,s=r,r=g,g=i,i=o,o=g);const p=(c[s]+e.offsetX)*e.scaleX,v=(c[s+1]+e.offsetY)*e.scaleY,b=(c[r]+e.offsetX)*e.scaleX,y=(c[r+1]+e.offsetY)*e.scaleY,w=(c[n]+e.offsetX)*e.scaleX,B=(c[n+1]+e.offsetY)*e.scaleY;if(v>=B)return;const j=u[i],E=u[i+1],S=u[i+2],T=u[o],M=u[o+1],D=u[o+2],P=u[l],Y=u[l+1],Q=u[l+2],L=Math.round(v),ae=Math.round(B);let ne,V,O,X,$,H,te,K;for(let I=L;I<=ae;I++){if(I<y){const ye=I<v?0:(v-I)/(v-y);ne=p-(p-b)*ye,V=j-(j-T)*ye,O=E-(E-M)*ye,X=S-(S-D)*ye}else{let ye;I>B?ye=1:y===B?ye=0:ye=(y-I)/(y-B),ne=b-(b-w)*ye,V=T-(T-P)*ye,O=M-(M-Y)*ye,X=D-(D-Q)*ye}let R;I<v?R=0:I>B?R=1:R=(v-I)/(v-B),$=p-(p-w)*R,H=j-(j-P)*R,te=E-(E-Y)*R,K=S-(S-Q)*R;const G=Math.round(Math.min(ne,$)),se=Math.round(Math.max(ne,$));let le=A*I+G*4;for(let ye=G;ye<=se;ye++)R=(ne-ye)/(ne-$),R<0?R=0:R>1&&(R=1),m[le++]=V-(V-H)*R|0,m[le++]=O-(O-te)*R|0,m[le++]=X-(X-K)*R|0,m[le++]=255}}function Jz(a,e,s){const r=e.coords,n=e.colors;let i,o;switch(e.type){case Uj.LATTICE:const l=e.verticesPerRow,c=Math.floor(r.length/l)-1,u=l-1;for(i=0;i<c;i++){let m=i*l;for(let A=0;A<u;A++,m++)oN(a,s,r[m],r[m+1],r[m+l],n[m],n[m+1],n[m+l]),oN(a,s,r[m+l+1],r[m+1],r[m+l],n[m+l+1],n[m+1],n[m+l])}break;case Uj.TRIANGLES:for(i=0,o=r.length;i<o;i+=3)oN(a,s,r[i],r[i+1],r[i+2],n[i],n[i+1],n[i+2]);break;default:throw new Error("illegal figure")}}class Zz extends S5{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,s,r){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,m=Math.ceil(this._bounds[3])-c,A=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(m*e[1]*1.1)),3e3),p=u/A,v=m/g,b={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/v},y=A+4,w=g+4,B=r.getCanvas("mesh",y,w),j=B.context,E=j.createImageData(A,g);if(s){const T=E.data;for(let M=0,D=T.length;M<D;M+=4)T[M]=s[0],T[M+1]=s[1],T[M+2]=s[2],T[M+3]=255}for(const T of this._figures)Jz(E,T,b);return j.putImageData(E,2,2),{canvas:B.canvas,offsetX:l-2*p,offsetY:c-2*v,scaleX:p,scaleY:v}}isModifyingCurrentTransform(){return!0}getPattern(e,s,r,n){Wj(e,this._bbox);const i=new Float32Array(2);if(n===Ei.SHADING)ks.singularValueDecompose2dScale(sn(e),i);else if(this.matrix){ks.singularValueDecompose2dScale(this.matrix,i);const[l,c]=i;ks.singularValueDecompose2dScale(s.baseTransform,i),i[0]*=l,i[1]*=c}else ks.singularValueDecompose2dScale(s.baseTransform,i);const o=this._createMeshCanvas(i,n===Ei.SHADING?null:this._background,s.cachedCanvases);return n!==Ei.SHADING&&(e.setTransform(...s.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class e$ extends S5{getPattern(){return"hotpink"}}function t$(a){switch(a[0]){case"RadialAxial":return new Xz(a);case"Mesh":return new Zz(a);case"Dummy":return new e$}throw new Error(`Unknown IR type: ${a[0]}`)}const aS={COLORED:1,UNCOLORED:2};class E5{static MAX_PATTERN_SIZE=3e3;constructor(e,s,r,n){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=s,this.canvasGraphicsFactory=r,this.baseTransform=n}createPatternCanvas(e,s){const{bbox:r,operatorList:n,paintType:i,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:m}=this;u=Math.abs(u),m=Math.abs(m),xw("TilingType: "+o);const A=r[0],g=r[1],p=r[2],v=r[3],b=p-A,y=v-g,w=new Float32Array(2);ks.singularValueDecompose2dScale(this.matrix,w);const[B,j]=w;ks.singularValueDecompose2dScale(this.baseTransform,w);const E=B*w[0],S=j*w[1];let T=b,M=y,D=!1,P=!1;const Y=Math.ceil(u*E),Q=Math.ceil(m*S),L=Math.ceil(b*E),ae=Math.ceil(y*S);Y>=L?T=u:D=!0,Q>=ae?M=m:P=!0;const ne=this.getSizeAndScale(T,this.ctx.canvas.width,E),V=this.getSizeAndScale(M,this.ctx.canvas.height,S),O=e.cachedCanvases.getCanvas("pattern",ne.size,V.size),X=O.context,$=c.createCanvasGraphics(X,s);if($.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext($,i,l),X.translate(-ne.scale*A,-V.scale*g),$.transform(0,ne.scale,0,0,V.scale,0,0),X.save(),$.dependencyTracker?.save(),this.clipBbox($,A,g,p,v),$.baseTransform=sn($.ctx),$.executeOperatorList(n),$.endDrawing(),$.dependencyTracker?.restore(),X.restore(),D||P){const H=O.canvas;D&&(T=u),P&&(M=m);const te=this.getSizeAndScale(T,this.ctx.canvas.width,E),K=this.getSizeAndScale(M,this.ctx.canvas.height,S),I=te.size,R=K.size,G=e.cachedCanvases.getCanvas("pattern-workaround",I,R),se=G.context,le=D?Math.floor(b/u):0,ye=P?Math.floor(y/m):0;for(let De=0;De<=le;De++)for(let me=0;me<=ye;me++)se.drawImage(H,I*De,R*me,I,R,0,0,I,R);return{canvas:G.canvas,scaleX:te.scale,scaleY:K.scale,offsetX:A,offsetY:g}}return{canvas:O.canvas,scaleX:ne.scale,scaleY:V.scale,offsetX:A,offsetY:g}}getSizeAndScale(e,s,r){const n=Math.max(E5.MAX_PATTERN_SIZE,s);let i=Math.ceil(e*r);return i>=n?i=n:r=i/e,{scale:r,size:i}}clipBbox(e,s,r,n,i){const o=n-s,l=i-r;e.ctx.rect(s,r,o,l),ks.axialAlignedBoundingBox([s,r,n,i],sn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,s,r){const n=e.ctx,i=e.current;switch(s){case aS.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;n.fillStyle=i.fillColor=o,n.strokeStyle=i.strokeColor=l;break;case aS.UNCOLORED:n.fillStyle=n.strokeStyle=r,i.fillColor=i.strokeColor=r;break;default:throw new mz(`Unsupported paint type: ${s}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,s,r,n,i){let o=r;n!==Ei.SHADING&&(o=ks.transform(o,s.baseTransform),this.matrix&&(o=ks.transform(o,this.matrix)));const l=this.createPatternCanvas(s,i);let c=new DOMMatrix(o);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const u=e.createPattern(l.canvas,"repeat");return u.setTransform(c),u}}function s$({src:a,srcPos:e=0,dest:s,width:r,height:n,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const l=oi.isLittleEndian?4278190080:255,[c,u]=o?[i,l]:[l,i],m=r>>3,A=r&7,g=a.length;s=new Uint32Array(s.buffer);let p=0;for(let v=0;v<n;v++){for(const y=e+m;e<y;e++){const w=e<g?a[e]:255;s[p++]=w&128?u:c,s[p++]=w&64?u:c,s[p++]=w&32?u:c,s[p++]=w&16?u:c,s[p++]=w&8?u:c,s[p++]=w&4?u:c,s[p++]=w&2?u:c,s[p++]=w&1?u:c}if(A===0)continue;const b=e<g?a[e++]:255;for(let y=0;y<A;y++)s[p++]=b&1<<7-y?u:c}return{srcPos:e,destPos:p}}const nS=16,iS=100,r$=15,oS=10,Po=16,lN=new DOMMatrix,al=new Float32Array(2),$f=new Float32Array([1/0,1/0,-1/0,-1/0]);function a$(a,e){if(a._removeMirroring)throw new Error("Context is already forwarding operations.");a.__originalSave=a.save,a.__originalRestore=a.restore,a.__originalRotate=a.rotate,a.__originalScale=a.scale,a.__originalTranslate=a.translate,a.__originalTransform=a.transform,a.__originalSetTransform=a.setTransform,a.__originalResetTransform=a.resetTransform,a.__originalClip=a.clip,a.__originalMoveTo=a.moveTo,a.__originalLineTo=a.lineTo,a.__originalBezierCurveTo=a.bezierCurveTo,a.__originalRect=a.rect,a.__originalClosePath=a.closePath,a.__originalBeginPath=a.beginPath,a._removeMirroring=()=>{a.save=a.__originalSave,a.restore=a.__originalRestore,a.rotate=a.__originalRotate,a.scale=a.__originalScale,a.translate=a.__originalTranslate,a.transform=a.__originalTransform,a.setTransform=a.__originalSetTransform,a.resetTransform=a.__originalResetTransform,a.clip=a.__originalClip,a.moveTo=a.__originalMoveTo,a.lineTo=a.__originalLineTo,a.bezierCurveTo=a.__originalBezierCurveTo,a.rect=a.__originalRect,a.closePath=a.__originalClosePath,a.beginPath=a.__originalBeginPath,delete a._removeMirroring},a.save=function(){e.save(),this.__originalSave()},a.restore=function(){e.restore(),this.__originalRestore()},a.translate=function(s,r){e.translate(s,r),this.__originalTranslate(s,r)},a.scale=function(s,r){e.scale(s,r),this.__originalScale(s,r)},a.transform=function(s,r,n,i,o,l){e.transform(s,r,n,i,o,l),this.__originalTransform(s,r,n,i,o,l)},a.setTransform=function(s,r,n,i,o,l){e.setTransform(s,r,n,i,o,l),this.__originalSetTransform(s,r,n,i,o,l)},a.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},a.rotate=function(s){e.rotate(s),this.__originalRotate(s)},a.clip=function(s){e.clip(s),this.__originalClip(s)},a.moveTo=function(s,r){e.moveTo(s,r),this.__originalMoveTo(s,r)},a.lineTo=function(s,r){e.lineTo(s,r),this.__originalLineTo(s,r)},a.bezierCurveTo=function(s,r,n,i,o,l){e.bezierCurveTo(s,r,n,i,o,l),this.__originalBezierCurveTo(s,r,n,i,o,l)},a.rect=function(s,r,n,i){e.rect(s,r,n,i),this.__originalRect(s,r,n,i)},a.closePath=function(){e.closePath(),this.__originalClosePath()},a.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class n${constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,s,r){let n;return this.cache[e]!==void 0?(n=this.cache[e],this.canvasFactory.reset(n,s,r)):(n=this.canvasFactory.create(s,r),this.cache[e]=n),n}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const s=this.cache[e];this.canvasFactory.destroy(s),delete this.cache[e]}}}function Eb(a,e,s,r,n,i,o,l,c,u){const[m,A,g,p,v,b]=sn(a);if(A===0&&g===0){const B=o*m+v,j=Math.round(B),E=l*p+b,S=Math.round(E),T=(o+c)*m+v,M=Math.abs(Math.round(T)-j)||1,D=(l+u)*p+b,P=Math.abs(Math.round(D)-S)||1;return a.setTransform(Math.sign(m),0,0,Math.sign(p),j,S),a.drawImage(e,s,r,n,i,0,0,M,P),a.setTransform(m,A,g,p,v,b),[M,P]}if(m===0&&p===0){const B=l*g+v,j=Math.round(B),E=o*A+b,S=Math.round(E),T=(l+u)*g+v,M=Math.abs(Math.round(T)-j)||1,D=(o+c)*A+b,P=Math.abs(Math.round(D)-S)||1;return a.setTransform(0,Math.sign(A),Math.sign(g),0,j,S),a.drawImage(e,s,r,n,i,0,0,P,M),a.setTransform(m,A,g,p,v,b),[P,M]}a.drawImage(e,s,r,n,i,o,l,c,u);const y=Math.hypot(m,A),w=Math.hypot(g,p);return[y*c,w*u]}class lS{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Oj;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ai.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,s,r){r?.(this),this.clipBox=new Float32Array([0,0,e,s]),this.minMax=$f.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Ei.FILL,s=null){const r=this.minMax.slice();if(e===Ei.STROKE){s||ta("Stroke bounding box must include transform."),ks.singularValueDecompose2dScale(s,al);const n=al[0]*this.lineWidth/2,i=al[1]*this.lineWidth/2;r[0]-=n,r[1]-=i,r[2]+=n,r[3]+=i}return r}updateClipFromPath(){const e=ks.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set($f,0)}getClippedPathBoundingBox(e=Ei.FILL,s=null){return ks.intersect(this.clipBox,this.getPathBoundingBox(e,s))}}function cS(a,e){if(e instanceof ImageData){a.putImageData(e,0,0);return}const s=e.height,r=e.width,n=s%Po,i=(s-n)/Po,o=n===0?i:i+1,l=a.createImageData(r,Po);let c=0,u;const m=e.data,A=l.data;let g,p,v,b;if(e.kind===Qy.GRAYSCALE_1BPP){const y=m.byteLength,w=new Uint32Array(A.buffer,0,A.byteLength>>2),B=w.length,j=r+7>>3,E=4294967295,S=oi.isLittleEndian?4278190080:255;for(g=0;g<o;g++){for(v=g<i?Po:n,u=0,p=0;p<v;p++){const T=y-c;let M=0;const D=T>j?r:T*8-7,P=D&-8;let Y=0,Q=0;for(;M<P;M+=8)Q=m[c++],w[u++]=Q&128?E:S,w[u++]=Q&64?E:S,w[u++]=Q&32?E:S,w[u++]=Q&16?E:S,w[u++]=Q&8?E:S,w[u++]=Q&4?E:S,w[u++]=Q&2?E:S,w[u++]=Q&1?E:S;for(;M<D;M++)Y===0&&(Q=m[c++],Y=128),w[u++]=Q&Y?E:S,Y>>=1}for(;u<B;)w[u++]=0;a.putImageData(l,0,g*Po)}}else if(e.kind===Qy.RGBA_32BPP){for(p=0,b=r*Po*4,g=0;g<i;g++)A.set(m.subarray(c,c+b)),c+=b,a.putImageData(l,0,p),p+=Po;g<o&&(b=r*n*4,A.set(m.subarray(c,c+b)),a.putImageData(l,0,p))}else if(e.kind===Qy.RGB_24BPP)for(v=Po,b=r*v,g=0;g<o;g++){for(g>=i&&(v=n,b=r*v),u=0,p=b;p--;)A[u++]=m[c++],A[u++]=m[c++],A[u++]=m[c++],A[u++]=255;a.putImageData(l,0,g*Po)}else throw new Error(`bad image kind: ${e.kind}`)}function dS(a,e){if(e.bitmap){a.drawImage(e.bitmap,0,0);return}const s=e.height,r=e.width,n=s%Po,i=(s-n)/Po,o=n===0?i:i+1,l=a.createImageData(r,Po);let c=0;const u=e.data,m=l.data;for(let A=0;A<o;A++){const g=A<i?Po:n;({srcPos:c}=s$({src:u,srcPos:c,dest:m,width:r,height:g,nonBlackColor:0})),a.putImageData(l,0,A*Po)}}function Rg(a,e){const s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of s)a[r]!==void 0&&(e[r]=a[r]);a.setLineDash!==void 0&&(e.setLineDash(a.getLineDash()),e.lineDashOffset=a.lineDashOffset)}function Fb(a){a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",a.setLineDash!==void 0&&(a.setLineDash([]),a.lineDashOffset=0);const{filter:e}=a;e!=="none"&&e!==""&&(a.filter="none")}function uS(a,e){if(e)return!0;ks.singularValueDecompose2dScale(a,al);const s=Math.fround(_d.pixelRatio*gp.PDF_TO_CSS_UNITS);return al[0]<=s&&al[1]<=s}const i$=["butt","round","square"],o$=["miter","round","bevel"],l$={},hS={};class ep{constructor(e,s,r,n,i,{optionalContentConfig:o,markedContentStack:l=null},c,u,m){this.ctx=e,this.current=new lS(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=s,this.objs=r,this.canvasFactory=n,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new n$(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(e,s,r=null){return typeof s=="string"?(this.dependencyTracker?.recordNamedDependency(e,s),s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s)):r}beginDrawing({transform:e,viewport:s,transparency:r=!1,background:n=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=l,r){const c=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...sn(this.compositeCtx))}this.ctx.save(),Fb(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...s.transform),this.viewportScale=s.scale,this.baseTransform=sn(this.ctx)}executeOperatorList(e,s,r,n,i){const o=e.argsArray,l=e.fnArray;let c=s||0;const u=o.length;if(u===c)return c;const m=u-c>oS&&typeof r=="function",A=m?Date.now()+r$:0;let g=0;const p=this.commonObjs,v=this.objs;let b,y;for(;;){if(n!==void 0&&c===n.nextBreakPoint)return n.breakIt(c,r),c;if(!i||i(c))if(b=l[c],y=o[c]??null,b!==Ux.dependency)y===null?this[b](c):this[b](c,...y);else for(const w of y){this.dependencyTracker?.recordNamedData(w,c);const B=w.startsWith("g_")?p:v;if(!B.has(w))return B.get(w,r),c}if(c++,c===u)return c;if(m&&++g>oS){if(Date.now()>A)return r(),c;g=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const s of e.values())typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&(s.width=s.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const s=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=s}}}_scaleImage(e,s){const r=e.width??e.displayWidth,n=e.height??e.displayHeight;let i=Math.max(Math.hypot(s[0],s[1]),1),o=Math.max(Math.hypot(s[2],s[3]),1),l=r,c=n,u="prescale1",m,A;for(;i>2&&l>1||o>2&&c>1;){let g=l,p=c;i>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/g),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),m=this.cachedCanvases.getCanvas(u,g,p),A=m.context,A.clearRect(0,0,g,p),A.drawImage(e,0,0,l,c,0,0,g,p),e=m.canvas,l=g,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e,s){const r=this.ctx,{width:n,height:i}=s,o=this.current.fillColor,l=this.current.patternFill,c=sn(r);let u,m,A,g;if((s.bitmap||s.data)&&s.count>1){const Y=s.bitmap||s.data.buffer;m=JSON.stringify(l?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(Y),u||(u=new Map,this._cachedBitmapsMap.set(Y,u));const Q=u.get(m);if(Q&&!l){const L=Math.round(Math.min(c[0],c[2])+c[4]),ae=Math.round(Math.min(c[1],c[3])+c[5]);return this.dependencyTracker?.recordDependencies(e,Dl.transformAndFill),{canvas:Q,offsetX:L,offsetY:ae}}A=Q}A||(g=this.cachedCanvases.getCanvas("maskCanvas",n,i),dS(g.context,s));let p=ks.transform(c,[1/n,0,0,-1/i,0,0]);p=ks.transform(p,[1,0,0,1,0,-i]);const v=$f.slice();ks.axialAlignedBoundingBox([0,0,n,i],p,v);const[b,y,w,B]=v,j=Math.round(w-b)||1,E=Math.round(B-y)||1,S=this.cachedCanvases.getCanvas("fillCanvas",j,E),T=S.context,M=b,D=y;T.translate(-M,-D),T.transform(...p),A||(A=this._scaleImage(g.canvas,Zc(T)),A=A.img,u&&l&&u.set(m,A)),T.imageSmoothingEnabled=uS(sn(T),s.interpolate),Eb(T,A,0,0,A.width,A.height,0,0,n,i),T.globalCompositeOperation="source-in";const P=ks.transform(Zc(T),[1,0,0,1,-M,-D]);return T.fillStyle=l?o.getPattern(r,this,P,Ei.FILL,e):o,T.fillRect(0,0,n,i),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(m,S.canvas)),this.dependencyTracker?.recordDependencies(e,Dl.transformAndFill),{canvas:S.canvas,offsetX:Math.round(M),offsetY:Math.round(D)}}setLineWidth(e,s){this.dependencyTracker?.recordSimpleData("lineWidth",e),s!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(e,s){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=i$[s]}setLineJoin(e,s){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=o$[s]}setMiterLimit(e,s){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=s}setDash(e,s,r){this.dependencyTracker?.recordSimpleData("dash",e);const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(s),n.lineDashOffset=r)}setRenderingIntent(e,s){}setFlatness(e,s){}setGState(e,s){for(const[r,n]of s)switch(r){case"LW":this.setLineWidth(e,n);break;case"LC":this.setLineCap(e,n);break;case"LJ":this.setLineJoin(e,n);break;case"ML":this.setMiterLimit(e,n);break;case"D":this.setDash(e,n[0],n[1]);break;case"RI":this.setRenderingIntent(e,n);break;case"FL":this.setFlatness(e,n);break;case"Font":this.setFont(e,n[0],n[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=n;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=n;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const s=this.ctx.canvas.width,r=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,s,r);this.suspendedCtx=this.ctx;const o=this.ctx=i.context;o.setTransform(this.suspendedCtx.getTransform()),Rg(this.suspendedCtx,o),a$(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Rg(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const s=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,s,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,s,r,n){const i=n[0],o=n[1],l=n[2]-i,c=n[3]-o;l===0||c===0||(this.genericComposeSMask(s.context,r,l,c,s.subtype,s.backdrop,s.transferMap,i,o,s.offsetX,s.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,s,r,n,i,o,l,c,u,m,A){let g=e.canvas,p=c-m,v=u-A;if(o)if(p<0||v<0||p+r>g.width||v+n>g.height){const y=this.cachedCanvases.getCanvas("maskExtension",r,n),w=y.context;w.drawImage(g,-p,-v),w.globalCompositeOperation="destination-atop",w.fillStyle=o,w.fillRect(0,0,r,n),w.globalCompositeOperation="source-over",g=y.canvas,p=v=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(p,v,r,n),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(p,v,r,n),e.restore()}s.save(),s.globalAlpha=1,s.setTransform(1,0,0,1,0,0),i==="Alpha"&&l?s.filter=this.filterFactory.addAlphaFilter(l):i==="Luminosity"&&(s.filter=this.filterFactory.addLuminosityFilter(l));const b=new Path2D;b.rect(c,u,r,n),s.clip(b),s.globalCompositeOperation="destination-in",s.drawImage(g,p,v,r,n,c,u,r,n),s.restore()}save(e){this.inSMaskMode&&Rg(this.ctx,this.suspendedCtx),this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Rg(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,s,r,n,i,o,l){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(s,r,n,i,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,s,r,n){let[i]=r;if(!n){i||=r[0]=new Path2D,this[s](e,i);return}if(this.dependencyTracker!==null){const o=s===Ux.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,n[0]-o,n[2]+o,n[1]-o,n[3]+o).recordDependencies(e,["transform"])}i instanceof Path2D||(i=r[0]=WT(i)),ks.axialAlignedBoundingBox(n,sn(this.ctx),this.current.minMax),this[s](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,s,r=!0){const n=this.ctx,i=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&i?.getPattern){const o=i.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=i.getPattern(n,this,Zc(n),Ei.STROKE,e),o){const l=new Path2D;l.addPath(s,n.getTransform().invertSelf().multiplySelf(o)),s=l}this.rescaleAndStroke(s,!1),n.restore()}else this.rescaleAndStroke(s,!0);this.dependencyTracker?.recordDependencies(e,Dl.stroke),r&&this.consumePath(e,s,this.current.getClippedPathBoundingBox(Ei.STROKE,sn(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(e,s){this.stroke(e,s)}fill(e,s,r=!0){const n=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const u=i.isModifyingCurrentTransform()?n.getTransform():null;if(this.dependencyTracker?.save(e),n.save(),n.fillStyle=i.getPattern(n,this,Zc(n),Ei.FILL,e),u){const m=new Path2D;m.addPath(s,n.getTransform().invertSelf().multiplySelf(u)),s=m}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(n.fill(s,"evenodd"),this.pendingEOFill=!1):n.fill(s)),this.dependencyTracker?.recordDependencies(e,Dl.fill),l&&(n.restore(),this.dependencyTracker?.restore(e)),r&&this.consumePath(e,s,c)}eoFill(e,s){this.pendingEOFill=!0,this.fill(e,s)}fillStroke(e,s){this.fill(e,s,!1),this.stroke(e,s,!1),this.consumePath(e,s)}eoFillStroke(e,s){this.pendingEOFill=!0,this.fillStroke(e,s)}closeFillStroke(e,s){this.fillStroke(e,s)}closeEOFillStroke(e,s){this.pendingEOFill=!0,this.fillStroke(e,s)}endPath(e,s){this.consumePath(e,s)}rawFillPath(e,s){this.ctx.fill(s),this.dependencyTracker?.recordDependencies(e,Dl.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=l$}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=hS}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const s=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:n}=this;s!==void 0&&n.recordFutureForcedDependency("textClip",n.getOpenMarker()).recordFutureForcedDependency("textClip",e),n.recordCloseMarker(e)}if(s!==void 0){const n=new Path2D,i=r.getTransform().invertSelf();for(const{transform:o,x:l,y:c,fontSize:u,path:m}of s)m&&n.addPath(m,new DOMMatrix(o).preMultiplySelf(i).translate(l,c).scale(u,-u));r.clip(n)}delete this.pendingTextPaths}setCharSpacing(e,s){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=s}setWordSpacing(e,s){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=s}setHScale(e,s){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=s/100}setLeading(e,s){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-s}setFont(e,s,r){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",s,e);const n=this.commonObjs.get(s),i=this.current;if(!n)throw new Error(`Can't find font for ${s}`);if(i.fontMatrix=n.fontMatrix||Oj,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&rr("Invalid font matrix for font "+s),r<0?(r=-r,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=r,n.isType3Font)return;const o=n.loadedName||"sans-serif",l=n.systemFontInfo?.css||`"${o}", ${n.fallbackName}`;let c="normal";n.black?c="900":n.bold&&(c="bold");const u=n.italic?"italic":"normal";let m=r;r<nS?m=nS:r>iS&&(m=iS),this.current.fontSizeScale=r/m,this.ctx.font=`${u} ${c} ${m}px ${l}`}setTextRenderingMode(e,s){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=s}setTextRise(e,s){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=s}moveText(e,s,r){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,s,r){this.setLeading(e,-r),this.moveText(e,s,r)}setTextMatrix(e,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=s,r.textMatrixScale=Math.hypot(s[0],s[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#r(e,s,r){const n=new Path2D;return n.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(s)),n}paintChar(e,s,r,n,i,o){const l=this.ctx,c=this.current,u=c.font,m=c.textRenderingMode,A=c.fontSize/c.fontSizeScale,g=m&ai.FILL_STROKE_MASK,p=!!(m&ai.ADD_TO_PATH_FLAG),v=c.patternFill&&!u.missingFile,b=c.patternStroke&&!u.missingFile;let y;if((u.disableFontFace||p||v||b)&&!u.missingFile&&(y=u.getPathGenerator(this.commonObjs,s)),y&&(u.disableFontFace||v||b)){l.save(),l.translate(r,n),l.scale(A,-A),this.dependencyTracker?.recordCharacterBBox(e,l,u);let w;if(g===ai.FILL||g===ai.FILL_STROKE)if(i){w=l.getTransform(),l.setTransform(...i);const B=this.#r(y,w,i);l.fill(B)}else l.fill(y);if(g===ai.STROKE||g===ai.FILL_STROKE)if(o){w||=l.getTransform(),l.setTransform(...o);const{a:B,b:j,c:E,d:S}=w,T=ks.inverseTransform(o),M=ks.transform([B,j,E,S,0,0],T);ks.singularValueDecompose2dScale(M,al),l.lineWidth*=Math.max(al[0],al[1])/A,l.stroke(this.#r(y,w,o))}else l.lineWidth/=A,l.stroke(y);l.restore()}else(g===ai.FILL||g===ai.FILL_STROKE)&&(l.fillText(s,r,n),this.dependencyTracker?.recordCharacterBBox(e,l,u,A,r,n,()=>l.measureText(s))),(g===ai.STROKE||g===ai.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,l,u,A,r,n,()=>l.measureText(s)).recordDependencies(e,Dl.stroke),l.strokeText(s,r,n));p&&((this.pendingTextPaths||=[]).push({transform:sn(l),x:r,y:n,fontSize:A,path:y}),this.dependencyTracker?.recordCharacterBBox(e,l,u,A,r,n))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const s=e.getImageData(0,0,10,10).data;let r=!1;for(let n=3;n<s.length;n+=4)if(s[n]>0&&s[n]<255){r=!0;break}return ar(this,"isFontSubpixelAAEnabled",r)}showText(e,s){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Dl.showText).resetBBox(e),this.current.textRenderingMode&ai.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,n=r.font;if(n.isType3Font){this.showType3Text(e,s),this.dependencyTracker?.recordShowTextOperation(e);return}const i=r.fontSize;if(i===0){this.dependencyTracker?.recordOperation(e);return}const o=this.ctx,l=r.fontSizeScale,c=r.charSpacing,u=r.wordSpacing,m=r.fontDirection,A=r.textHScale*m,g=s.length,p=n.vertical,v=p?1:-1,b=n.defaultVMetrics,y=i*r.fontMatrix[0],w=r.textRenderingMode===ai.FILL&&!n.disableFontFace&&!r.patternFill;o.save(),r.textMatrix&&o.transform(...r.textMatrix),o.translate(r.x,r.y+r.textRise),m>0?o.scale(A,-1):o.scale(A,1);let B,j;const E=r.textRenderingMode&ai.FILL_STROKE_MASK,S=E===ai.FILL||E===ai.FILL_STROKE,T=E===ai.STROKE||E===ai.FILL_STROKE;if(S&&r.patternFill){o.save();const Q=r.fillColor.getPattern(o,this,Zc(o),Ei.FILL,e);B=sn(o),o.restore(),o.fillStyle=Q}if(T&&r.patternStroke){o.save();const Q=r.strokeColor.getPattern(o,this,Zc(o),Ei.STROKE,e);j=sn(o),o.restore(),o.strokeStyle=Q}let M=r.lineWidth;const D=r.textMatrixScale;if(D===0||M===0?T&&(M=this.getSinglePixelWidth()):M/=D,l!==1&&(o.scale(l,l),M/=l),o.lineWidth=M,n.isInvalidPDFjsFont){const Q=[];let L=0;for(const ne of s)Q.push(ne.unicode),L+=ne.width;const ae=Q.join("");if(o.fillText(ae,0,0),this.dependencyTracker!==null){const ne=o.measureText(ae);this.dependencyTracker.recordBBox(e,this.ctx,-ne.actualBoundingBoxLeft,ne.actualBoundingBoxRight,-ne.actualBoundingBoxAscent,ne.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=L*y*A,o.restore(),this.compose();return}let P=0,Y;for(Y=0;Y<g;++Y){const Q=s[Y];if(typeof Q=="number"){P+=v*Q*i/1e3;continue}let L=!1;const ae=(Q.isSpace?u:0)+c,ne=Q.fontChar,V=Q.accent;let O,X,$=Q.width;if(p){const K=Q.vmetric||b,I=-(Q.vmetric?K[1]:$*.5)*y,R=K[2]*y;$=K?-K[0]:$,O=I/l,X=(P+R)/l}else O=P/l,X=0;let H;if(n.remeasure&&$>0){H=o.measureText(ne);const K=H.width*1e3/i*l;if($<K&&this.isFontSubpixelAAEnabled){const I=$/K;L=!0,o.save(),o.scale(I,1),O/=I}else $!==K&&(O+=($-K)/2e3*i/l)}if(this.contentVisible&&(Q.isInFont||n.missingFile)){if(w&&!V)o.fillText(ne,O,X),this.dependencyTracker?.recordCharacterBBox(e,o,H?{bbox:null}:n,i/l,O,X,()=>H??o.measureText(ne));else if(this.paintChar(e,ne,O,X,B,j),V){const K=O+i*V.offset.x/l,I=X-i*V.offset.y/l;this.paintChar(e,V.fontChar,K,I,B,j)}}const te=p?$*y-ae*m:$*y+ae*m;P+=te,L&&o.restore()}p?r.y-=P:r.x+=P*A,o.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,s){const r=this.ctx,n=this.current,i=n.font,o=n.fontSize,l=n.fontDirection,c=i.vertical?1:-1,u=n.charSpacing,m=n.wordSpacing,A=n.textHScale*l,g=n.fontMatrix||Oj,p=s.length,v=n.textRenderingMode===ai.INVISIBLE;let b,y,w,B;if(v||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),n.textMatrix&&r.transform(...n.textMatrix),r.translate(n.x,n.y+n.textRise),r.scale(A,l);const j=this.dependencyTracker;for(this.dependencyTracker=j?new xv(j,e):null,b=0;b<p;++b){if(y=s[b],typeof y=="number"){B=c*y*o/1e3,this.ctx.translate(B,0),n.x+=B*A;continue}const E=(y.isSpace?m:0)+u,S=i.charProcOperatorList[y.operatorListId];S?this.contentVisible&&(this.save(),r.scale(o,o),r.transform(...g),this.executeOperatorList(S),this.restore()):rr(`Type3 character "${y.operatorListId}" is not available.`);const T=[y.width,0];ks.applyTransform(T,g),w=T[0]*o+E,r.translate(w,0),n.x+=w*A}r.restore(),j&&(this.dependencyTracker=j)}setCharWidth(e,s,r){}setCharWidthAndBounds(e,s,r,n,i,o,l){const c=new Path2D;c.rect(n,i,o-n,l-i),this.ctx.clip(c),this.dependencyTracker?.recordBBox(e,this.ctx,n,o,i,l).recordClipBox(e,this.ctx,n,o,i,l),this.endPath(e)}getColorN_Pattern(e,s){let r;if(s[0]==="TilingPattern"){const n=this.baseTransform||sn(this.ctx),i={createCanvasGraphics:(o,l)=>new ep(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new xv(this.dependencyTracker,l,!0):null)};r=new E5(s,this.ctx,i,n)}else r=this._getPattern(e,s[1],s[2]);return r}setStrokeColorN(e,...s){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,s),this.current.patternStroke=!0}setFillColorN(e,...s){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,s),this.current.patternFill=!0}setStrokeRGBColor(e,s){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=s,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,s){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=s,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,s,r=null){let n;return this.cachedPatterns.has(s)?n=this.cachedPatterns.get(s):(n=t$(this.getObject(e,s)),this.cachedPatterns.set(s,n)),r&&(n.matrix=r),n}shadingFill(e,s){if(!this.contentVisible)return;const r=this.ctx;this.save(e);const n=this._getPattern(e,s);r.fillStyle=n.getPattern(r,this,Zc(r),Ei.SHADING,e);const i=Zc(r);if(i){const{width:o,height:l}=r.canvas,c=$f.slice();ks.axialAlignedBoundingBox([0,0,o,l],i,c);const[u,m,A,g]=c;this.ctx.fillRect(u,m,A-u,g-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Dl.transform).recordDependencies(e,Dl.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){ta("Should not call beginInlineImage")}beginImageData(){ta("Should not call beginImageData")}paintFormXObjectBegin(e,s,r){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),s&&this.transform(e,...s),this.baseTransform=sn(this.ctx),r)){ks.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[n,i,o,l]=r,c=new Path2D;c.rect(n,i,o-n,l-i),this.ctx.clip(c),this.dependencyTracker?.recordClipBox(e,this.ctx,n,o,i,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,s){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;s.isolated||xw("TODO: Support non-isolated groups."),s.knockout&&rr("Knockout groups not supported.");const n=sn(r);if(s.matrix&&r.transform(...s.matrix),!s.bbox)throw new Error("Bounding box is required.");let i=$f.slice();ks.axialAlignedBoundingBox(s.bbox,sn(r),i);const o=[0,0,r.canvas.width,r.canvas.height];i=ks.intersect(i,o)||[0,0,0,0];const l=Math.floor(i[0]),c=Math.floor(i[1]),u=Math.max(Math.ceil(i[2])-l,1),m=Math.max(Math.ceil(i[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,m]);let A="groupAt"+this.groupLevel;s.smask&&(A+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(A,u,m),p=g.context;p.translate(-l,-c),p.transform(...n);let v=new Path2D;const[b,y,w,B]=s.bbox;if(v.rect(b,y,w-b,B-y),s.matrix){const j=new Path2D;j.addPath(v,new DOMMatrix(s.matrix)),v=j}p.clip(v),s.smask&&this.smaskStack.push({canvas:g.canvas,context:p,offsetX:l,offsetY:c,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}),(!s.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(l,c),r.save()),Rg(r,p),this.ctx=p,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,s){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),s.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const i=sn(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...i);const o=$f.slice();ks.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],i,o),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,s,r,n,i,o){if(this.#e(),Fb(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const l=r[2]-r[0],c=r[3]-r[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=r[0],n[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=l,r[3]=c,ks.singularValueDecompose2dScale(sn(this.ctx),al);const{viewportScale:u}=this,m=Math.ceil(l*this.outputScaleX*u),A=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(m,A);const{canvas:g,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(s,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(al[0],0,0,-al[1],0,c*al[1]),Fb(this.ctx)}else{Fb(this.ctx),this.endPath(e);const u=new Path2D;u.rect(r[0],r[1],l,c),this.ctx.clip(u)}}this.current=new lS(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...n),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,s){if(!this.contentVisible)return;const r=s.count;s=this.getObject(e,s.data,s),s.count=r;const n=this.ctx,i=this._createMaskCanvas(e,s),o=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,i.offsetX,i.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+o.width,i.offsetY,i.offsetY+o.height).recordOperation(e),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,s,r,n=0,i=0,o,l){if(!this.contentVisible)return;s=this.getObject(e,s.data,s);const c=this.ctx;c.save();const u=sn(c);c.transform(r,n,i,o,0,0);const m=this._createMaskCanvas(e,s);c.setTransform(1,0,0,1,m.offsetX-u[4],m.offsetY-u[5]),this.dependencyTracker?.resetBBox(e);for(let A=0,g=l.length;A<g;A+=2){const p=ks.transform(u,[r,n,i,o,l[A],l[A+1]]);c.drawImage(m.canvas,p[4],p[5]),this.dependencyTracker?.recordBBox(e,this.ctx,p[4],p[4]+m.canvas.width,p[5],p[5]+m.canvas.height)}c.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,s){if(!this.contentVisible)return;const r=this.ctx,n=this.current.fillColor,i=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,Dl.transformAndFill);for(const o of s){const{data:l,width:c,height:u,transform:m}=o,A=this.cachedCanvases.getCanvas("maskCanvas",c,u),g=A.context;g.save();const p=this.getObject(e,l,o);dS(g,p),g.globalCompositeOperation="source-in",g.fillStyle=i?n.getPattern(g,this,Zc(r),Ei.FILL,e):n,g.fillRect(0,0,c,u),g.restore(),r.save(),r.transform(...m),r.scale(1,-1),Eb(r,A.canvas,0,0,c,u,0,-1,1,1),this.dependencyTracker?.recordBBox(e,r,0,c,0,u),r.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,s){if(!this.contentVisible)return;const r=this.getObject(e,s);if(!r){rr("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,s,r,n,i){if(!this.contentVisible)return;const o=this.getObject(e,s);if(!o){rr("Dependent image isn't ready yet");return}const l=o.width,c=o.height,u=[];for(let m=0,A=i.length;m<A;m+=2)u.push({transform:[r,0,0,n,i[m],i[m+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(e,o,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:s,width:r,height:n}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,n),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(s,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e,s){if(!this.contentVisible)return;const r=s.width,n=s.height,i=this.ctx;this.save(e);const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none"),i.scale(1/r,-1/n);let l;if(s.bitmap)l=this.applyTransferMapsToBitmap(s);else if(typeof HTMLElement=="function"&&s instanceof HTMLElement||!s.data)l=s;else{const m=this.cachedCanvases.getCanvas("inlineImage",r,n).context;cS(m,s),l=this.applyTransferMapsToCanvas(m)}const c=this._scaleImage(l,Zc(i));i.imageSmoothingEnabled=uS(sn(i),s.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,i,0,r,-n,0).recordDependencies(e,Dl.imageXObject).recordOperation(e),Eb(i,c.img,0,0,c.paintWidth,c.paintHeight,0,-n,r,n),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,s,r){if(!this.contentVisible)return;const n=this.ctx;let i;if(s.bitmap)i=s.bitmap;else{const o=s.width,l=s.height,u=this.cachedCanvases.getCanvas("inlineImage",o,l).context;cS(u,s),i=this.applyTransferMapsToCanvas(u)}this.dependencyTracker?.resetBBox(e);for(const o of r)n.save(),n.transform(...o.transform),n.scale(1,-1),Eb(n,i,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,n,0,1,-1,0),n.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Dl.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,s){}markPointProps(e,s,r){}beginMarkedContent(e,s){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,s,r){this.dependencyTracker?.beginMarkedContent(e),s==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,s,r){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const i=this.ctx;this.pendingClip?(n||(this.pendingClip===hS?i.clip(s,"evenodd"):i.clip(s)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=sn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const s=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),n=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,n)/s}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:s,b:r,c:n,d:i}=this.ctx.getTransform();let o,l;if(r===0&&n===0){const c=Math.abs(s),u=Math.abs(i);if(c===u)if(e===0)o=l=1/c;else{const m=c*e;o=l=m<1?1/m:1}else if(e===0)o=1/c,l=1/u;else{const m=c*e,A=u*e;o=m<1?1/m:1,l=A<1?1/A:1}}else{const c=Math.abs(s*i-r*n),u=Math.hypot(s,r),m=Math.hypot(n,i);if(e===0)o=m/c,l=u/c;else{const A=e*c;o=m>A?m/A:1,l=u>A?u/A:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,s){const{ctx:r,current:{lineWidth:n}}=this,[i,o]=this.getScaleForStroking();if(i===o){r.lineWidth=(n||1)*i,r.stroke(e);return}const l=r.getLineDash();s&&r.save(),r.scale(i,o),lN.a=1/i,lN.d=1/o;const c=new Path2D;if(c.addPath(e,lN),l.length>0){const u=Math.max(i,o);r.setLineDash(l.map(m=>m/u)),r.lineDashOffset/=u}r.lineWidth=n||1,r.stroke(c),s&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const a in Ux)ep.prototype[a]!==void 0&&(ep.prototype[Ux[a]]=ep.prototype[a]);class vd{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class c${#e;#t;constructor({parsedData:e,rawData:s}){this.#e=e,this.#t=s}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const Lf=Symbol("INTERNAL");class d${#e=!1;#t=!1;#r=!1;#s=!0;constructor(e,{name:s,intent:r,usage:n,rbGroups:i}){this.#e=!!(e&el.DISPLAY),this.#t=!!(e&el.PRINT),this.name=s,this.intent=r,this.usage=n,this.rbGroups=i}get visible(){if(this.#r)return this.#s;if(!this.#s)return!1;const{print:e,view:s}=this.usage;return this.#e?s?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,s,r=!1){e!==Lf&&ta("Internal method `_setVisible` called."),this.#r=r,this.#s=s}}class u${#e=null;#t=new Map;#r=null;#s=null;constructor(e,s=el.DISPLAY){if(this.renderingIntent=s,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#s=e.order;for(const r of e.groups)this.#t.set(r.id,new d$(s,r));if(e.baseState==="OFF")for(const r of this.#t.values())r._setVisible(Lf,!1);for(const r of e.on)this.#t.get(r)._setVisible(Lf,!0);for(const r of e.off)this.#t.get(r)._setVisible(Lf,!1);this.#r=this.getHash()}}#n(e){const s=e.length;if(s<2)return!0;const r=e[0];for(let n=1;n<s;n++){const i=e[n];let o;if(Array.isArray(i))o=this.#n(i);else if(this.#t.has(i))o=this.#t.get(i).visible;else return rr(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return xw("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(rr(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#n(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const s of e.ids){if(!this.#t.has(s))return rr(`Optional content group not found: ${s}`),!0;if(this.#t.get(s).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const s of e.ids){if(!this.#t.has(s))return rr(`Optional content group not found: ${s}`),!0;if(!this.#t.get(s).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const s of e.ids){if(!this.#t.has(s))return rr(`Optional content group not found: ${s}`),!0;if(!this.#t.get(s).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const s of e.ids){if(!this.#t.has(s))return rr(`Optional content group not found: ${s}`),!0;if(this.#t.get(s).visible)return!1}return!0}return rr(`Unknown optional content policy ${e.policy}.`),!0}return rr(`Unknown group type ${e.type}.`),!0}setVisibility(e,s=!0,r=!0){const n=this.#t.get(e);if(!n){rr(`Optional content group not found: ${e}`);return}if(r&&s&&n.rbGroups.length)for(const i of n.rbGroups)for(const o of i)o!==e&&this.#t.get(o)?._setVisible(Lf,!1,!0);n._setVisible(Lf,!!s,!0),this.#e=null}setOCGState({state:e,preserveRB:s}){let r;for(const n of e){switch(n){case"ON":case"OFF":case"Toggle":r=n;continue}const i=this.#t.get(n);if(i)switch(r){case"ON":this.setVisibility(n,!0,s);break;case"OFF":this.setVisibility(n,!1,s);break;case"Toggle":this.setVisibility(n,!i.visible,s);break}}this.#e=null}get hasInitialVisibility(){return this.#r===null||this.getHash()===this.#r}getOrder(){return this.#t.size?this.#s?this.#s.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new KT;for(const[s,r]of this.#t)e.update(`${s}:${r.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class ww{#e=null;#t=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(e,s,r){this._source=e,this.#e=s,this.#t=r}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return Zr(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#e(this)}getRangeReader(e,s){if(s<=this._progressiveDataLength)return null;const r=new this.#t(this,e,s);return this._rangeReaders.add(r),r}cancelAllRequests(e){this._fullReader?.cancel(e);for(const s of new Set(this._rangeReaders))s.cancel(e)}}class Nw{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(e){this._stream=e}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){ta("Abstract method `read` called")}cancel(e){ta("Abstract method `cancel` called")}}class jw{_stream=null;constructor(e,s,r){this._stream=e}async read(){ta("Abstract method `read` called")}cancel(e){ta("Abstract method `cancel` called")}}function mS(a){return a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer}class h$ extends ww{_progressiveDone=!1;_queuedChunks=[];constructor(e){super(e,m$,A$);const{pdfDataRangeTransport:s}=e,{initialData:r,progressiveDone:n}=s;if(r?.length>0){const i=mS(r);this._queuedChunks.push(i)}this._progressiveDone=n,s.addRangeListener((i,o)=>{this.#e(i,o)}),s.addProgressListener((i,o)=>{o!==void 0&&this._fullReader?.onProgress?.({loaded:i,total:o})}),s.addProgressiveReadListener(i=>{this.#e(void 0,i)}),s.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),s.transportReady()}#e(e,s){const r=mS(s);if(e===void 0)this._fullReader?this._fullReader._enqueue(r):this._queuedChunks.push(r);else{const n=this._rangeReaders.keys().find(i=>i._begin===e);Zr(n,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),n._enqueue(r)}}getFullReader(){const e=super.getFullReader();return this._queuedChunks=null,e}getRangeReader(e,s){const r=super.getRangeReader(e,s);return r&&(r.onDone=()=>this._rangeReaders.delete(r),this._source.pdfDataRangeTransport.requestDataRange(e,s)),r}cancelAllRequests(e){super.cancelAllRequests(e),this._source.pdfDataRangeTransport.abort()}}class m$ extends Nw{_done=!1;_queuedChunks=null;_requests=[];constructor(e){super(e);const{pdfDataRangeTransport:s,disableRange:r,disableStream:n}=e._source,{length:i,contentDispositionFilename:o}=s;this._queuedChunks=e._queuedChunks||[];for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._done=e._progressiveDone,this._contentLength=i,this._isStreamingSupported=!n,this._isRangeSupported=!r,j5(o)&&(this._filename=o),this._headersCapability.resolve()}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class A$ extends jw{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(e,s,r){super(e,s,r),this._begin=s}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function f$(a){let e=!0,s=r("filename\\*","i").exec(a);if(s){s=s[1];let m=l(s);return m=unescape(m),m=c(m),m=u(m),i(m)}if(s=o(a),s){const m=u(s);return i(m)}if(s=r("filename","i").exec(a),s){s=s[1];let m=l(s);return m=u(m),i(m)}function r(m,A){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',A)}function n(m,A){if(m){if(!/^[\x00-\xFF]+$/.test(A))return A;try{const g=new TextDecoder(m,{fatal:!0}),p=bw(A);A=g.decode(p),e=!1}catch{}}return A}function i(m){return e&&/[\x80-\xff]/.test(m)&&(m=n("utf-8",m),e&&(m=n("iso-8859-1",m))),m}function o(m){const A=[];let g;const p=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=p.exec(m))!==null;){let[,b,y,w]=g;if(b=parseInt(b,10),b in A){if(b===0)break;continue}A[b]=[y,w]}const v=[];for(let b=0;b<A.length&&b in A;++b){let[y,w]=A[b];w=l(w),y&&(w=unescape(w),b===0&&(w=c(w))),v.push(w)}return v.join("")}function l(m){if(m.startsWith('"')){const A=m.slice(1).split('\\"');for(let g=0;g<A.length;++g){const p=A[g].indexOf('"');p!==-1&&(A[g]=A[g].slice(0,p),A.length=g+1),A[g]=A[g].replaceAll(/\\(.)/g,"$1")}m=A.join('"')}return m}function c(m){const A=m.indexOf("'");if(A===-1)return m;const g=m.slice(0,A),v=m.slice(A+1).replace(/^[^']*'/,"");return n(g,v)}function u(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(A,g,p,v){if(p==="q"||p==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,y){return String.fromCharCode(parseInt(y,16))}),n(g,v);try{v=atob(v)}catch{}return n(g,v)})}return""}function rP(a,e){const s=new Headers;if(!a||!e||typeof e!="object")return s;for(const r in e){const n=e[r];n!==void 0&&s.append(r,n)}return s}function _w(a){return URL.parse(a)?.origin??null}function aP({responseHeaders:a,isHttp:e,rangeChunkSize:s,disableRange:r}){const n={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(a.get("Content-Length"),10);return!Number.isInteger(i)||(n.suggestedLength=i,i<=2*s)||r||!e||a.get("Accept-Ranges")!=="bytes"||(a.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function nP(a){const e=a.get("Content-Disposition");if(e){let s=f$(e);if(s.includes("%"))try{s=decodeURIComponent(s)}catch{}if(j5(s))return s}return null}function Cw(a,e){return new gv(`Unexpected server response (${a}) while retrieving PDF "${e}".`,a,a===404||a===0&&e.startsWith("file:"))}function iP(a,e){if(a!==e)throw new Error(`Expected range response-origin "${a}" to match "${e}".`)}function oP(a,e,s,r){return fetch(a,{method:"GET",headers:e,signal:r.signal,mode:"cors",credentials:s?"include":"same-origin",redirect:"follow"})}function lP(a,e){if(a!==200&&a!==206)throw Cw(a,e)}function cP(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(rr(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class p$ extends ww{_responseOrigin=null;constructor(e){super(e,g$,x$),this.isHttp=/^https?:/i.test(e.url),this.headers=rP(this.isHttp,e.httpHeaders)}}class g$ extends Nw{_abortController=new AbortController;_reader=null;constructor(e){super(e);const{disableRange:s,disableStream:r,length:n,rangeChunkSize:i,url:o,withCredentials:l}=e._source;this._contentLength=n,this._isStreamingSupported=!r,this._isRangeSupported=!s;const c=new Headers(e.headers);oP(o,c,l,this._abortController).then(u=>{e._responseOrigin=_w(u.url),lP(u.status,o),this._reader=u.body.getReader();const m=u.headers,{allowRangeRequests:A,suggestedLength:g}=aP({responseHeaders:m,isHttp:e.isHttp,rangeChunkSize:i,disableRange:s});this._isRangeSupported=A,this._contentLength=g||this._contentLength,this._filename=nP(m),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new zh("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:e,done:s}=await this._reader.read();return s?{value:e,done:s}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:cP(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class x$ extends jw{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(e,s,r){super(e,s,r);const{url:n,withCredentials:i}=e._source,o=new Headers(e.headers);o.append("Range",`bytes=${s}-${r-1}`),oP(n,o,i,this._abortController).then(l=>{const c=_w(l.url);iP(c,e._responseOrigin),lP(l.status,n),this._reader=l.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:e,done:s}=await this._reader.read();return s?{value:e,done:s}:{value:cP(e),done:!1}}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const cN=200,AS=206;function b$(a){return typeof a!="string"?a:bw(a).buffer}class y$ extends ww{#e=new WeakMap;_responseOrigin=null;constructor(e){super(e,v$,w$),this.url=e.url,this.isHttp=/^https?:/i.test(this.url),this.headers=rP(this.isHttp,e.httpHeaders)}_request(e){const s=new XMLHttpRequest,r={validateStatus:null,onHeadersReceived:e.onHeadersReceived,onDone:e.onDone,onError:e.onError,onProgress:e.onProgress};this.#e.set(s,r),s.open("GET",this.url),s.withCredentials=this._source.withCredentials;for(const[n,i]of this.headers)s.setRequestHeader(n,i);return this.isHttp&&"begin"in e&&"end"in e?(s.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.validateStatus=n=>n===AS||n===cN):r.validateStatus=n=>n===cN,s.responseType="arraybuffer",Zr(e.onError,"Expected `onError` callback to be provided."),s.onerror=()=>e.onError(s.status),s.onreadystatechange=this.#r.bind(this,s),s.onprogress=this.#t.bind(this,s),s.send(null),s}#t(e,s){this.#e.get(e)?.onProgress?.(s)}#r(e,s){const r=this.#e.get(e);if(!r||(e.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),e.readyState!==4)||!this.#e.has(e))return;if(this.#e.delete(e),e.status===0&&this.isHttp){r.onError(e.status);return}const n=e.status||cN;if(!r.validateStatus(n)){r.onError(e.status);return}const i=b$(e.response);if(n===AS){const o=e.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(o)?r.onDone(i):(rr('Missing or invalid "Content-Range" header.'),r.onError(0))}else i?r.onDone(i):r.onError(e.status)}_abortRequest(e){this.#e.has(e)&&(this.#e.delete(e),e.abort())}getRangeReader(e,s){const r=super.getRangeReader(e,s);return r&&(r.onClosed=()=>this._rangeReaders.delete(r)),r}}class v$ extends Nw{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(e){super(e);const{length:s}=e._source;this._contentLength=s,this._fullRequestXhr=e._request({onHeadersReceived:this.#e.bind(this),onDone:this.#t.bind(this),onError:this.#r.bind(this),onProgress:this.#s.bind(this)})}#e(){const e=this._stream,{disableRange:s,rangeChunkSize:r}=e._source,n=this._fullRequestXhr;e._responseOrigin=_w(n.responseURL);const i=n.getAllResponseHeaders(),o=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[m,...A]=u.split(": ");return[m,A.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:c}=aP({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:r,disableRange:s});l&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=nP(o),this._isRangeSupported&&e._abortRequest(n),this._headersCapability.resolve()}#t(e){if(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._cachedChunks.push(e),this._done=!0,!(this._cachedChunks.length>0)){for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}}#r(e){this._storedError=Cw(e,this._stream.url),this._headersCapability.reject(this._storedError);for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#s(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class w$ extends jw{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(e,s,r){super(e,s,r),this._requestXhr=e._request({begin:s,end:r,onHeadersReceived:this.#e.bind(this),onDone:this.#t.bind(this),onError:this.#r.bind(this),onProgress:null})}#e(){const e=_w(this._requestXhr?.responseURL);try{iP(e,this._stream._responseOrigin)}catch(s){this._storedError=s,this.#r(0)}}#t(e){this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#r(e){this._storedError??=Cw(e,this._stream.url);for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const N$=/^[a-z][a-z0-9\-+.]+:/i;function j$(a){if(N$.test(a))return new URL(a);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(a))}function dP(a){const{Readable:e}=process.getBuiltinModule("stream");return typeof e.toWeb=="function"?e.toWeb(a):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(a)}function uP(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(rr(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class _$ extends ww{constructor(e){super(e,C$,k$),this.url=j$(e.url),Zr(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class C$ extends Nw{_reader=null;constructor(e){super(e);const{disableRange:s,disableStream:r,length:n,rangeChunkSize:i}=e._source;this._contentLength=n,this._isStreamingSupported=!r,this._isRangeSupported=!s;const o=e.url,l=process.getBuiltinModule("fs");l.promises.lstat(o).then(c=>{const u=l.createReadStream(o),m=dP(u);this._reader=m.getReader();const{size:A}=c;A<=2*i&&(this._isRangeSupported=!1),this._contentLength=A,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new zh("Streaming is disabled.")),this._headersCapability.resolve()}).catch(c=>{c.code==="ENOENT"&&(c=Cw(0,o.href)),this._headersCapability.reject(c)})}async read(){await this._headersCapability.promise;const{value:e,done:s}=await this._reader.read();return s?{value:e,done:s}:(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:uP(e),done:!1})}cancel(e){this._reader?.cancel(e)}}class k$ extends jw{_readCapability=Promise.withResolvers();_reader=null;constructor(e,s,r){super(e,s,r);const n=e.url,i=process.getBuiltinModule("fs");try{const o=i.createReadStream(n,{start:s,end:r-1}),l=dP(o);this._reader=l.getReader(),this._readCapability.resolve()}catch(o){this._readCapability.reject(o)}}async read(){await this._readCapability.promise;const{value:e,done:s}=await this._reader.read();return s?{value:e,done:s}:{value:uP(e),done:!1}}cancel(e){this._reader?.cancel(e)}}const Og=Symbol("INITIAL_DATA");class hP{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Og}}get(e,s=null){if(s){const n=this.#t(e);return n.promise.then(()=>s(n.data)),null}const r=this.#e[e];if(!r||r.data===Og)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const s=this.#e[e];return!!s&&s.data!==Og}delete(e){const s=this.#e[e];return!s||s.data===Og?!1:(delete this.#e[e],!0)}resolve(e,s=null){const r=this.#t(e);r.data=s,r.resolve()}clear(){for(const e in this.#e){const{data:s}=this.#e[e];s?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:s}=this.#e[e];s!==Og&&(yield[e,s])}}}const B$=1e5,fS=30;class tl{#e=Promise.withResolvers();#t=null;#r=!1;#s=!!globalThis.FontInspector?.enabled;#n=null;#i=null;#a=0;#o=0;#c=null;#l=null;#h=0;#u=0;#m=Object.create(null);#p=[];#f=null;#d=[];#A=new WeakMap;#g=null;static#b=new Map;static#x=new Map;static#_=new WeakMap;static#N=null;static#v=new Set;constructor({textContentSource:e,container:s,viewport:r}){if(e instanceof ReadableStream)this.#f=e;else if(typeof e=="object")this.#f=new ReadableStream({start(c){c.enqueue(e),c.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=s,this.#u=r.scale*_d.pixelRatio,this.#h=r.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:n,pageHeight:i,pageX:o,pageY:l}=r.rawDims;this.#g=[1,0,0,-1,-o,l+i],this.#o=n,this.#a=i,tl.#S(),s.style.setProperty("--min-font-size",tl.#N),oA(s,r),this.#e.promise.finally(()=>{tl.#v.delete(this),this.#i=null,this.#m=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:s}=oi.platform;return ar(this,"fontFamilyMap",new Map([["sans-serif",`${e&&s?"Calibri, ":""}sans-serif`],["monospace",`${e&&s?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:s,done:r})=>{if(r){this.#e.resolve();return}this.#n??=s.lang,Object.assign(this.#m,s.styles),this.#k(s.items),e()},this.#e.reject)};return this.#c=this.#f.getReader(),tl.#v.add(this),e(),this.#e.promise}update({viewport:e,onBefore:s=null}){const r=e.scale*_d.pixelRatio,n=e.rotation;if(n!==this.#h&&(s?.(),this.#h=n,oA(this.#l,{rotation:n})),r!==this.#u){s?.(),this.#u=r;const i={div:null,properties:null,ctx:tl.#E(this.#n)};for(const o of this.#d)i.properties=this.#A.get(o),i.div=o,this.#j(i)}}cancel(){const e=new zh("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#d}get textContentItemsStr(){return this.#p}#k(e){if(this.#r)return;this.#i.ctx??=tl.#E(this.#n);const s=this.#d,r=this.#p;for(const n of e){if(s.length>B$){rr("Ignoring additional textDivs for performance reasons."),this.#r=!0;return}if(n.str===void 0){if(n.type==="beginMarkedContentProps"||n.type==="beginMarkedContent"){const i=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),n.id&&this.#t.setAttribute("id",`${n.id}`),n.tag==="Artifact"&&(this.#t.ariaHidden=!0),i.append(this.#t)}else n.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}r.push(n.str),this.#y(n)}}#y(e){const s=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#d.push(s);const n=ks.transform(this.#g,e.transform);let i=Math.atan2(n[1],n[0]);const o=this.#m[e.fontName];o.vertical&&(i+=Math.PI/2);let l=this.#s&&o.fontSubstitution||o.fontFamily;l=tl.fontFamilyMap.get(l)||l;const c=Math.hypot(n[2],n[3]),u=c*tl.#M(l,o,this.#n);let m,A;i===0?(m=n[4],A=n[5]-u):(m=n[4]+u*Math.sin(i),A=n[5]-u*Math.cos(i));const g=s.style;g.left=`${(100*m/this.#o).toFixed(2)}%`,g.top=`${(100*A/this.#a).toFixed(2)}%`,g.setProperty("--font-height",`${c.toFixed(2)}px`),g.fontFamily=l,r.fontSize=c,s.setAttribute("role","presentation"),s.textContent=e.str,s.dir=e.dir,this.#s&&(s.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const v=Math.abs(e.transform[0]),b=Math.abs(e.transform[3]);v!==b&&Math.max(v,b)/Math.min(v,b)>1.5&&(p=!0)}if(p&&(r.canvasWidth=o.vertical?e.height:e.width),this.#A.set(s,r),this.#i.div=s,this.#i.properties=r,this.#j(this.#i),r.hasText&&this.#t.append(s),r.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),this.#t.append(v)}}#j(e){const{div:s,properties:r,ctx:n}=e,{style:i}=s;if(r.canvasWidth!==0&&r.hasText){const{fontFamily:o}=i,{canvasWidth:l,fontSize:c}=r;tl.#B(n,c*this.#u,o);const{width:u}=n.measureText(s.textContent);u>0&&i.setProperty("--scale-x",l*this.#u/u)}r.angle!==0&&i.setProperty("--rotate",`${r.angle}deg`)}static cleanup(){if(!(this.#v.size>0)){this.#b.clear();for(const{canvas:e}of this.#x.values())e.remove();this.#x.clear()}}static#E(e=null){let s=this.#x.get(e||="");if(!s){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),s=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#x.set(e,s),this.#_.set(s,{size:0,family:""})}return s}static#B(e,s,r){const n=this.#_.get(e);s===n.size&&r===n.family||(e.font=`${s}px ${r}`,n.size=s,n.family=r)}static#S(){if(this.#N!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#N=e.getBoundingClientRect().height,e.remove()}static#M(e,s,r){const n=this.#b.get(e);if(n)return n;const i=this.#E(r);i.canvas.width=i.canvas.height=fS,this.#B(i,fS,e);const o=i.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let u=.8;return l?u=l/(l+c):(oi.platform.isFirefox&&rr("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),s.ascent?u=s.ascent:s.descent&&(u=1+s.descent)),this.#b.set(e,u),u}}const S$=100;function Lp(a={}){typeof a=="string"||a instanceof URL?a={url:a}:(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a});const e=new F5,{docId:s}=e,r=a.url?Mz(a.url):null,n=a.data?Rz(a.data):null,i=a.httpHeaders||null,o=a.withCredentials===!0,l=a.password??null,c=a.range instanceof mP?a.range:null,u=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:2**16;let m=a.worker instanceof Hx?a.worker:null;const A=a.verbosity,g=typeof a.docBaseUrl=="string"&&!yw(a.docBaseUrl)?a.docBaseUrl:null,p=Cb(a.cMapUrl),v=a.cMapPacked!==!1,b=a.CMapReaderFactory||(ao?qz:ZB),y=Cb(a.iccUrl),w=Cb(a.standardFontDataUrl),B=a.StandardFontDataFactory||(ao?Gz:eS),j=Cb(a.wasmUrl),E=a.WasmFactory||(ao?Wz:tS),S=a.stopAtErrors!==!0,T=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,M=a.isEvalSupported!==!1,D=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!ao,P=typeof a.isImageDecoderSupported=="boolean"?a.isImageDecoderSupported:!ao&&(oi.platform.isFirefox||!globalThis.chrome),Y=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,Q=typeof a.disableFontFace=="boolean"?a.disableFontFace:ao,L=a.fontExtraProperties===!0,ae=a.enableXfa===!0,ne=a.ownerDocument||globalThis.document,V=a.disableRange===!0,O=a.disableStream===!0,X=a.disableAutoFetch===!0,$=a.pdfBug===!0,H=a.CanvasFactory||(ao?$z:Hz),te=a.FilterFactory||(ao?zz:Vz),K=a.enableHWA===!0,I=a.useWasm!==!1,R=c?c.length:a.length??NaN,G=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!ao&&!Q,se=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:!!(b===ZB&&B===eS&&E===tS&&p&&w&&j&&cx(p,document.baseURI)&&cx(w,document.baseURI)&&cx(j,document.baseURI)),le=null;dz(A);const ye={canvasFactory:new H({ownerDocument:ne,enableHWA:K}),filterFactory:new te({docId:s,ownerDocument:ne}),cMapReaderFactory:se?null:new b({baseUrl:p,isCompressed:v}),standardFontDataFactory:se?null:new B({baseUrl:w}),wasmFactory:se?null:new E({baseUrl:j})};m||(m=Hx.create({verbosity:A,port:vd.workerPort}),e._worker=m);const De={docId:s,apiVersion:"5.4.624",data:n,password:l,disableAutoFetch:X,rangeChunkSize:u,length:R,docBaseUrl:g,enableXfa:ae,evaluatorOptions:{maxImageSize:T,disableFontFace:Q,ignoreErrors:S,isEvalSupported:M,isOffscreenCanvasSupported:D,isImageDecoderSupported:P,canvasMaxAreaInBytes:Y,fontExtraProperties:L,useSystemFonts:G,useWasm:I,useWorkerFetch:se,cMapUrl:p,iccUrl:y,standardFontDataUrl:w,wasmUrl:j}},me={ownerDocument:ne,pdfBug:$,styleElement:le,enableHWA:K,loadingParams:{disableAutoFetch:X,enableXfa:ae}};return m.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Te=m.messageHandler.sendWithPromise("GetDocRequest",De,n?[n.buffer]:null);let we;if(c)we=new h$({pdfDataRangeTransport:c,disableRange:V,disableStream:O});else if(!n){if(!r)throw new Error("getDocument - no `url` parameter provided.");const st=cx(r)?p$:ao?_$:y$;we=new st({url:r,length:R,httpHeaders:i,withCredentials:o,rangeChunkSize:u,disableRange:V,disableStream:O})}return Te.then(st=>{if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ce=new dx(s,st,m.port),tt=new D$(ce,e,we,me,ye);e._transport=tt,ce.send("Ready",null)})}).catch(e._capability.reject),e}class F5{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${F5.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class mP{#e=Promise.withResolvers();#t=[];#r=[];#s=[];#n=[];constructor(e,s,r=!1,n=null){this.length=e,this.initialData=s,this.progressiveDone=r,this.contentDispositionFilename=n}addRangeListener(e){this.#n.push(e)}addProgressListener(e){this.#s.push(e)}addProgressiveReadListener(e){this.#r.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,s){for(const r of this.#n)r(e,s)}onDataProgress(e,s){this.#e.promise.then(()=>{for(const r of this.#s)r(e,s)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const s of this.#r)s(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,s){ta("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class E${constructor(e,s){this._pdfInfo=e,this._transport=s}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ar(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,s){return this._transport.getAnnotationsByType(e,s)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:s}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(s)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class F${#e=!1;#t=Xr.instance;constructor(e,s,r,n=!1){this._pageIndex=e,this._pageInfo=s,this._transport=r,this._stats=n?new qB:null,this._pdfBug=n,this.commonObjs=r.commonObjs,this.objs=new hP,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(e){this._pageIndex=e-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:s=this.rotate,offsetX:r=0,offsetY:n=0,dontFlip:i=!1}={}){return new x0({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:s,offsetX:r,offsetY:n,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:s}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,s)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ar(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:s=e.canvas,viewport:r,intent:n="display",annotationMode:i=Nh.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:m=null,printAnnotationStorage:A=null,isEditing:g=!1,recordOperations:p=!1,operationsFilter:v=null}){this._stats?.time("Overall");const b=this._transport.getRenderingIntent(n,i,A,g),{renderingIntent:y,cacheKey:w}=b;this.#e=!1,c||=this._transport.getOptionalContentConfig(y);let B=this._intentStates.get(w);B||(B=Object.create(null),this._intentStates.set(w,B)),B.streamReaderCancelTimeout&&(clearTimeout(B.streamReaderCancelTimeout),B.streamReaderCancelTimeout=null);const j=!!(y&el.PRINT);B.displayReadyCapability||(B.displayReadyCapability=Promise.withResolvers(),B.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(b));const E=!!(this._pdfBug&&globalThis.StepperManager?.enabled),S=!this.recordedBBoxes&&(p||E),T=P=>{if(B.renderTasks.delete(M),S){const Y=M.gfx?.dependencyTracker.take();Y&&(M.stepper&&M.stepper.setOperatorBBoxes(Y,M.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=Y))}j&&(this.#e=!0),this.#r(),P?(M.capability.reject(P),this._abortOperatorList({intentState:B,reason:P instanceof Error?P:new Error(P)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new qf({callback:T,params:{canvas:s,canvasContext:e,dependencyTracker:S?new Kz(s,B.operatorList.length,E):null,viewport:r,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:B.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!j,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:v});(B.renderTasks||=new Set).add(M);const D=M.task;return Promise.all([B.displayReadyCapability.promise,c]).then(([P,Y])=>{if(this.destroyed){T();return}if(this._stats?.time("Rendering"),!(Y.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:P,optionalContentConfig:Y}),M.operatorListChanged()}).catch(T),D}getOperatorList({intent:e="display",annotationMode:s=Nh.ENABLE,printAnnotationStorage:r=null,isEditing:n=!1}={}){function i(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,s,r,n,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:s=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#t.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:s===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>Qx.textContent(r));const s=this.streamTextContent(e);return new Promise(function(r,n){function i(){o.read().then(function({value:c,done:u}){if(u){r(l);return}l.lang??=c.lang,Object.assign(l.styles,c.styles),l.items.push(...c.items),i()},n)}const o=s.getReader(),l={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const s of this._intentStates.values())if(this._abortOperatorList({intentState:s,reason:new Error("Page was destroyed."),force:!0}),!s.opListReadCapability)for(const r of s.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const s=this.#r();return e&&s&&(this._stats&&=new qB),s}#r(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:s}of this._intentStates.values())if(e.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,s){const r=this._intentStates.get(s);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,s){for(let r=0,n=e.length;r<n;r++)s.operatorList.fnArray.push(e.fnArray[r]),s.operatorList.argsArray.push(e.argsArray[r]);s.operatorList.lastChunk=e.lastChunk,s.operatorList.separateAnnots=e.separateAnnots;for(const r of s.renderTasks)r.operatorListChanged();e.lastChunk&&this.#r()}_pumpOperatorList({renderingIntent:e,cacheKey:s,annotationStorageSerializable:r,modifiedIds:n}){const{map:i,transfer:o}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#t.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:e,cacheKey:s,annotationStorage:i,modifiedIds:n},o).getReader(),u=this._intentStates.get(s);u.streamReader=c;const m=()=>{c.read().then(({value:A,done:g})=>{if(g){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(A,u),m())},A=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const g of u.renderTasks)g.operatorListChanged();this.#r()}if(u.displayReadyCapability)u.displayReadyCapability.reject(A);else if(u.opListReadCapability)u.opListReadCapability.reject(A);else throw A}})};m()}_abortOperatorList({intentState:e,reason:s,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(s instanceof N5){let n=S$;s.extraDelay>0&&s.extraDelay<1e3&&(n+=s.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:s,force:!0})},n);return}}if(e.streamReader.cancel(new zh(s.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[n,i]of this._intentStates)if(i===e){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}var jh,yc,Au,qm,sw,Gm,Wm,lo,Hy,AP,fP,ux,up,Vy;const Ga=class Ga{constructor({name:e=null,port:s=null,verbosity:r=uz()}={}){Xc(this,lo);Xc(this,jh,Promise.withResolvers());Xc(this,yc,null);Xc(this,Au,null);Xc(this,qm,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,s){if(za(Ga,Wm).has(s))throw new Error("Cannot use more than one PDFWorker per port.");za(Ga,Wm).set(s,this),Jc(this,lo,AP).call(this,s)}else Jc(this,lo,fP).call(this)}get promise(){return za(this,jh).promise}get port(){return za(this,Au)}get messageHandler(){return za(this,yc)}destroy(){this.destroyed=!0,za(this,qm)?.terminate(),Eo(this,qm,null),za(Ga,Wm).delete(za(this,Au)),Eo(this,Au,null),za(this,yc)?.destroy(),Eo(this,yc,null)}static create(e){const s=za(this,Wm).get(e?.port);if(s){if(s._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return s}return new Ga(e)}static get workerSrc(){if(vd.workerSrc)return vd.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ar(this,"_setupFakeWorkerGlobal",(async()=>za(this,up,Vy)?za(this,up,Vy):(await import(this.workerSrc)).WorkerMessageHandler)())}};jh=new WeakMap,yc=new WeakMap,Au=new WeakMap,qm=new WeakMap,sw=new WeakMap,Gm=new WeakMap,Wm=new WeakMap,lo=new WeakSet,Hy=function(){za(this,jh).resolve(),za(this,yc).send("configure",{verbosity:this.verbosity})},AP=function(e){Eo(this,Au,e),Eo(this,yc,new dx("main","worker",e)),za(this,yc).on("ready",()=>{}),Jc(this,lo,Hy).call(this)},fP=function(){if(za(Ga,Gm)||za(Ga,up,Vy)){Jc(this,lo,ux).call(this);return}let{workerSrc:e}=Ga;try{Ga._isSameOrigin(window.location,e)||(e=Ga._createCDNWrapper(new URL(e,window.location).href));const s=new Worker(e,{type:"module"}),r=new dx("main","worker",s),n=()=>{i.abort(),r.destroy(),s.terminate(),this.destroyed?za(this,jh).reject(new Error("Worker was destroyed")):Jc(this,lo,ux).call(this)},i=new AbortController;s.addEventListener("error",()=>{za(this,qm)||n()},{signal:i.signal}),r.on("test",l=>{if(i.abort(),this.destroyed||!l){n();return}Eo(this,yc,r),Eo(this,Au,s),Eo(this,qm,s),Jc(this,lo,Hy).call(this)}),r.on("ready",l=>{if(i.abort(),this.destroyed){n();return}try{o()}catch{Jc(this,lo,ux).call(this)}});const o=()=>{const l=new Uint8Array;r.send("test",l,[l.buffer])};o();return}catch{xw("The worker has been disabled.")}Jc(this,lo,ux).call(this)},ux=function(){za(Ga,Gm)||(rr("Setting up fake worker."),Eo(Ga,Gm,!0)),Ga._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){za(this,jh).reject(new Error("Worker was destroyed"));return}const s=new Qz;Eo(this,Au,s);const r=`fake${Hk(Ga,sw)._++}`,n=new dx(r+"_worker",r,s);e.setup(n,s),Eo(this,yc,new dx(r,r+"_worker",s)),Jc(this,lo,Hy).call(this)}).catch(e=>{za(this,jh).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},up=new WeakSet,Vy=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Xc(Ga,up),Xc(Ga,sw,0),Xc(Ga,Gm,!1),Xc(Ga,Wm,new WeakMap),ao&&(Eo(Ga,Gm,!0),vd.workerSrc||="./pdf.worker.mjs"),Ga._isSameOrigin=(e,s)=>{const r=URL.parse(e);if(!r?.origin||r.origin==="null")return!1;const n=new URL(s,r);return r.origin===n.origin},Ga._createCDNWrapper=e=>{const s=`await import("${e}");`;return URL.createObjectURL(new Blob([s],{type:"text/javascript"}))},Ga.fromPort=e=>{if(Nz("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Ga.create(e)};let Hx=Ga;class D${downloadInfoCapability=Promise.withResolvers();#e=null;#t=new Map;#r=null;#s=new Map;#n=new Map;#i=new Map;#a=null;#o=Xr.instance;constructor(e,s,r,n,i){this.messageHandler=e,this.loadingTask=s,this.#r=r,this.commonObjs=new hP,this.fontLoader=new Pz({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.enableHWA=n.enableHWA,this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#c.bind(this))}#c(){const e=new Map,s=new Map;for(let r=0,n=this.#o.pagesNumber;r<n;r++){const i=this.#o.getPrevPageNumber(r+1)-1,o=this.#s.get(i);o&&e.set(r,o);const l=this.#n.get(i);l&&s.set(r,l)}this.#s=e,this.#n=s}#l(e,s=null){const r=this.#t.get(e);if(r)return r;const n=this.messageHandler.sendWithPromise(e,s);return this.#t.set(e,n),n}#h({loaded:e,total:s}){this.loadingTask.onProgress?.({loaded:e,total:s,percent:Bi(Math.round(e/s*100),0,100)})}get annotationStorage(){return ar(this,"annotationStorage",new k5)}getRenderingIntent(e,s=Nh.ENABLE,r=null,n=!1,i=!1){let o=el.DISPLAY,l=$j;switch(e){case"any":o=el.ANY;break;case"display":break;case"print":o=el.PRINT;break;default:rr(`getRenderingIntent - invalid intent: ${e}`)}const c=o&el.PRINT&&r instanceof XT?r:this.annotationStorage;switch(s){case Nh.DISABLE:o+=el.ANNOTATIONS_DISABLE;break;case Nh.ENABLE:break;case Nh.ENABLE_FORMS:o+=el.ANNOTATIONS_FORMS;break;case Nh.ENABLE_STORAGE:o+=el.ANNOTATIONS_STORAGE,l=c.serializable;break;default:rr(`getRenderingIntent - invalid annotationMode: ${s}`)}n&&(o+=el.IS_EDITING),i&&(o+=el.OPLIST);const{ids:u,hash:m}=c.modifiedIds,A=[o,l.hash,m];return{renderingIntent:o,cacheKey:A.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#s.values())e.push(r._destroy());this.#s.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const s=this.messageHandler.sendWithPromise("Terminate",null);return e.push(s),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),tl.cleanup(),this.#r?.cancelAllRequests(new zh("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:s}=this;e.on("GetReader",(r,n)=>{Zr(this.#r,"GetReader - no `BasePDFStream` instance available."),this.#e=this.#r.getFullReader(),this.#e.onProgress=i=>this.#h(i),n.onPull=()=>{this.#e.read().then(function({value:i,done:o}){if(o){n.close();return}Zr(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{n.error(i)})},n.onCancel=i=>{this.#e.cancel(i),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{await this.#e.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:o}=this.#e;return n&&i&&(this.#e.onProgress=null),{isStreamingSupported:n,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(r,n)=>{Zr(this.#r,"GetRangeReader - no `BasePDFStream` instance available.");const i=this.#r.getRangeReader(r.begin,r.end);if(!i){n.close();return}n.onPull=()=>{i.read().then(function({value:o,done:l}){if(l){n.close();return}Zr(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{n.error(o)})},n.onCancel=o=>{i.cancel(o),n.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:r})=>{this.#o.pagesNumber=r.numPages,this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,s._capability.resolve(new E$(r,this))}),e.on("DocException",r=>{s._capability.reject(To(r))}),e.on("PasswordRequest",r=>{this.#a=Promise.withResolvers();try{if(!s.onPassword)throw To(r);const n=i=>{i instanceof Error?this.#a.reject(i):this.#a.resolve({password:i})};s.onPassword(n,r.code)}catch(n){this.#a.reject(n)}return this.#a.promise}),e.on("DataLoaded",r=>{this.#h({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#s.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,n,i])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(n){case"Font":if("error"in i){const A=i.error;rr(`Error during font loading: ${A}`),this.commonObjs.resolve(r,A);break}const o=new va(i),l=this._params.pdfBug&&globalThis.FontInspector?.enabled?(A,g)=>globalThis.FontInspector.fontAdded(A,g):null,c=new Iz(o,l,i.extra,i.charProcOperatorList);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(r,c)});break;case"CopyLocalImage":const{imageRef:u}=i;Zr(u,"The imageRef must be defined.");for(const A of this.#s.values())for(const[,g]of A.objs)if(g?.ref===u)return g.dataLen?(this.commonObjs.resolve(r,structuredClone(g)),g.dataLen):null;break;case"FontPath":this.commonObjs.resolve(r,new Lz(i));break;case"Image":this.commonObjs.resolve(r,i);break;case"Pattern":const m=new fi(i);this.commonObjs.resolve(r,m.getIR());break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),e.on("obj",([r,n,i,o])=>{if(this.destroyed)return;const l=this.#s.get(n);if(!l.objs.has(r)){if(l._intentStates.size===0){o?.bitmap?.close();return}switch(i){case"Image":case"Pattern":l.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{this.destroyed||this.#h(r)}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const n=this[r.type];if(!n)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return n.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&rr("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:s}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this.#e?.filename??null},s).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const s=e-1,r=this.#o.getPageId(e)-1,n=this.#n.get(s);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#i.set(o.refStr,r);const l=new F$(s,o,this,this._params.pdfBug);return this.#s.set(s,l),l});return this.#n.set(s,i),i}async getPageIndex(e){if(!qj(e))throw new Error("Invalid pageIndex request.");const s=await this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen});return this.#o.getPageNumber(s+1)-1}getAnnotations(e,s){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(e+1)-1,intent:s})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,s){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:s})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(e+1)-1})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(e+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#l("GetOptionalContentConfig").then(s=>new u$(s,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",s=this.#t.get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,null).then(n=>({info:n[0],metadata:n[1]?new c$(n[1]):null,contentDispositionFilename:this.#e?.filename??null,contentLength:this.#e?.contentLength??null,hasStructTree:n[2]}));return this.#t.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const s of this.#s.values())if(!s.cleanup())throw new Error(`startCleanup: Page ${s.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),tl.cleanup()}}cachedPageNumber(e){if(!qj(e))return null;const s=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`,r=this.#i.get(s);return r>=0?this.#o.getPageNumber(r+1):null}}class T${_internalRenderTask=null;onContinue=null;onError=null;constructor(e){this._internalRenderTask=e}get promise(){return this._internalRenderTask.capability.promise}cancel(e=0){this._internalRenderTask.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this._internalRenderTask.operatorList;if(!e)return!1;const{annotationCanvasMap:s}=this._internalRenderTask;return e.form||e.canvas&&s?.size>0}}class qf{#e=null;static#t=new WeakSet;constructor({callback:e,params:s,objs:r,commonObjs:n,annotationCanvasMap:i,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:m=!1,pdfBug:A=!1,pageColors:g=null,enableHWA:p=!1,operationsFilter:v=null}){this.callback=e,this.params=s,this.objs=r,this.commonObjs=n,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=A,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new T$(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=s.canvas,this._canvasContext=s.canvas?null:s.canvasContext,this._enableHWA=p,this._dependencyTracker=s.dependencyTracker,this._operationsFilter=v}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:s}){if(this.cancelled)return;if(this._canvas){if(qf.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");qf.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:n,background:i,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ep(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:n,viewport:r,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,s=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),qf.#t.delete(this._canvas),e||=new N5(`Rendering cancelled, page ${this._pageIndex+1}`,s),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),qf.#t.delete(this._canvas),this.callback())))}}const P$="5.4.624",I$="384c6208b";class Pl{#e=null;#t=null;#r;#s=null;#n=!1;#i=!1;#a=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return ar(this,"_keyboardManager",new y0([[["Escape","mac+Escape"],Pl.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Pl.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Pl.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Pl.prototype._moveToPrevious],[["Home","mac+Home"],Pl.prototype._moveToBeginning],[["End","mac+End"],Pl.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:s=null}){e?(this.#i=!1,this.#a=e):this.#i=!0,this.#l=e?._uiManager||s,this.#o=this.#l._eventBus,this.#r=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Pl.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#a&&(e.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const s=this.#l._signal;e.addEventListener("click",this.#f.bind(this),{signal:s}),e.addEventListener("keydown",this.#p.bind(this),{signal:s});const r=this.#t=document.createElement("span");return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=this.#r,e.append(r),e}renderMainDropdown(){const e=this.#s=this.#u();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#u(){const e=document.createElement("div"),s=this.#l._signal;e.addEventListener("contextmenu",Hl,{signal:s}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(e.id=`${this.#a.id}_colorpicker_dropdown`);for(const[r,n]of this.#l.highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",n),i.title=r,i.setAttribute("data-l10n-id",Pl.#h[r]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=n,i.ariaSelected=n===this.#r,i.addEventListener("click",this.#m.bind(this,n),{signal:s}),e.append(i)}return e.addEventListener("keydown",this.#p.bind(this),{signal:s}),e}#m(e,s){s.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Tr.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#f(e);return}const s=e.target.getAttribute("data-color");s&&this.#m(s,e)}_moveToNext(e){if(!this.#A){this.#f(e);return}if(e.target===this.#e){this.#s.firstElementChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#s?.firstElementChild||e.target===this.#e){this.#A&&this._hideDropdownFromKeyboard();return}this.#A||this.#f(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#A){this.#f(e);return}this.#s.firstElementChild?.focus()}_moveToEnd(e){if(!this.#A){this.#f(e);return}this.#s.lastElementChild?.focus()}#p(e){Pl._keyboardManager.exec(this,e)}#f(e){if(this.#A){this.hideDropdown();return}if(this.#n=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#d.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#s){this.#s.classList.remove("hidden");return}const s=this.#s=this.#u();this.#e.append(s)}#d(e){this.#s?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#A(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#A){this.#a?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#n})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#s)return;const s=this.#l.highlightColors.values();for(const r of this.#s.children)r.ariaSelected=s.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#s?.remove(),this.#s=null}}class Vx{#e=null;#t=null;#r=null;static#s=null;constructor(e){this.#t=e,this.#r=e._uiManager,Vx.#s||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:s,color:r}=this.#t,n=this.#e=document.createElement("input");return n.type="color",n.value=r||"#000000",n.className="basicColorPicker",n.tabIndex=0,n.setAttribute("data-l10n-id",Vx.#s[e]),n.addEventListener("input",()=>{this.#r.updateParams(s,n.value)},{signal:this.#r._signal}),n}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function pS(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function Ug(a){return Math.max(0,Math.min(255,255*a))}class gS{static CMYK_G([e,s,r,n]){return["G",1-Math.min(1,.3*e+.59*r+.11*s+n)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Ug(e),[e,e,e]}static G_HTML([e]){const s=pS(e);return`#${s}${s}${s}`}static RGB_G([e,s,r]){return["G",.3*e+.59*s+.11*r]}static RGB_rgb(e){return e.map(Ug)}static RGB_HTML(e){return`#${e.map(pS).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,s,r,n]){return["RGB",1-Math.min(1,e+n),1-Math.min(1,r+n),1-Math.min(1,s+n)]}static CMYK_rgb([e,s,r,n]){return[Ug(1-Math.min(1,e+n)),Ug(1-Math.min(1,r+n)),Ug(1-Math.min(1,s+n))]}static CMYK_HTML(e){const s=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(s)}static RGB_CMYK([e,s,r]){const n=1-e,i=1-s,o=1-r,l=Math.min(n,i,o);return["CMYK",n,i,o,l]}}class L${create(e,s,r=!1){if(e<=0||s<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),r||(n.setAttribute("width",`${e}px`),n.setAttribute("height",`${s}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${e} ${s}`),n}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ta("Abstract method `_createSVG` called.")}}class bv extends L${_createSVG(e){return document.createElementNS(lu,e)}}const M$=9,lA=new WeakSet,R$=new Date().getTimezoneOffset()*60*1e3;class dN{static create(e){switch(e.data.annotationType){case $n.LINK:return new D5(e);case $n.TEXT:return new U$(e);case $n.WIDGET:switch(e.data.fieldType){case"Tx":return new Q$(e);case"Btn":return e.data.radioButton?new pP(e):e.data.checkBox?new V$(e):new z$(e);case"Ch":return new $$(e);case"Sig":return new H$(e)}return new vA(e);case $n.POPUP:return new Yj(e);case $n.FREETEXT:return new gP(e);case $n.LINE:return new G$(e);case $n.SQUARE:return new W$(e);case $n.CIRCLE:return new Y$(e);case $n.POLYLINE:return new xP(e);case $n.CARET:return new X$(e);case $n.INK:return new T5(e);case $n.POLYGON:return new K$(e);case $n.HIGHLIGHT:return new bP(e);case $n.UNDERLINE:return new J$(e);case $n.SQUIGGLY:return new Z$(e);case $n.STRIKEOUT:return new eq(e);case $n.STAMP:return new yP(e);case $n.FILEATTACHMENT:return new tq(e);default:return new ln(e)}}}class ln{#e=null;#t=!1;#r=null;constructor(e,{isRenderable:s=!1,ignoreBorder:r=!1,createQuadrilaterals:n=!1}={}){this.isRenderable=s,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,s&&(this.contentElement=this.container=this._createContainer(r)),n&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:s}){return!!(e?.str||s?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ln._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,s=this.annotationStorage?.getEditor(e.id);return s?s.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:s,inkLists:r,rect:n}=this.data;let i=-1/0,o=-1/0;if(s?.length>=8){for(let l=0;l<s.length;l+=8)s[l+1]>o?(o=s[l+1],i=s[l+2]):s[l+1]===o&&(i=Math.max(i,s[l+2]));return[i,o]}if(r?.length>=1){for(const l of r)for(let c=0,u=l.length;c<u;c+=2)l[c+1]>o?(o=l[c+1],i=l[c]):l[c+1]===o&&(i=Math.max(i,l[c]));if(i!==1/0)return[i,o]}return n?[n[2],n[3]]:null}_normalizePoint(e){const{page:{view:s},viewport:{rawDims:{pageWidth:r,pageHeight:n,pageX:i,pageY:o}}}=this.parent;return e[1]=s[3]-e[1]+s[1],e[0]=100*(e[0]-i)/r,e[1]=100*(e[1]-o)/n,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Ox}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:s}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(s.id,{popup:r})||this.annotationStorage.setValue(`${Ox}${s.id}`,{id:s.id,annotationType:s.annotationType,page:this.parent.page,popup:r,popupRef:s.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#r?.popup||this.popup)?.remove(),this.#r=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:s,popup:r}=e;s&&this.#s(s);let n=this.#r?.popup||this.popup;!n&&r?.text&&(this._createPopup(r),n=this.#r.popup),n&&(n.updateEdited(e),r?.deleted&&(n.remove(),this.#r=null,this.popup=null))}resetEdited(){this.#e&&(this.#s(this.#e.rect),this.#r?.popup.resetEdited(),this.#e=null)}#s(e){const{container:{style:s},data:{rect:r,rotation:n},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:l,pageY:c}}}}=this;r?.splice(0,4,...e),s.left=`${100*(e[0]-l)/i}%`,s.top=`${100*(o-e[3]+c)/o}%`,n===0?(s.width=`${100*(e[2]-e[0])/i}%`,s.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(n)}_createContainer(e){const{data:s,parent:{page:r,viewport:n}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",s.id),!(this instanceof vA)&&!(this instanceof D5)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,s.alternativeText&&(i.title=s.alternativeText),s.noRotate&&i.classList.add("norotate"),!s.rect||this instanceof Yj){const{rotation:b}=s;return!s.hasOwnCanvas&&b!==0&&this.setRotation(b,i),i}const{width:l,height:c}=this;if(!e&&s.borderStyle.width>0){o.borderWidth=`${s.borderStyle.width}px`;const b=s.borderStyle.horizontalCornerRadius,y=s.borderStyle.verticalCornerRadius;if(b>0||y>0){const B=`calc(${b}px * var(--total-scale-factor)) / calc(${y}px * var(--total-scale-factor))`;o.borderRadius=B}else if(this instanceof pP){const B=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=B}switch(s.borderStyle.style){case If.SOLID:o.borderStyle="solid";break;case If.DASHED:o.borderStyle="dashed";break;case If.BEVELED:rr("Unimplemented border style: beveled");break;case If.INSET:rr("Unimplemented border style: inset");break;case If.UNDERLINE:o.borderBottomStyle="solid";break}const w=s.borderColor||null;w?(this.#t=!0,o.borderColor=ks.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):o.borderWidth=0}const u=ks.normalizeRect([s.rect[0],r.view[3]-s.rect[1]+r.view[1],s.rect[2],r.view[3]-s.rect[3]+r.view[1]]),{pageWidth:m,pageHeight:A,pageX:g,pageY:p}=n.rawDims;o.left=`${100*(u[0]-g)/m}%`,o.top=`${100*(u[1]-p)/A}%`;const{rotation:v}=s;return s.hasOwnCanvas||v===0?(o.width=`${100*l/m}%`,o.height=`${100*c/A}%`):this.setRotation(v,i),i}setRotation(e,s=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:n}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),s.style.width=`${100*i/r}%`,s.style.height=`${100*o/n}%`,s.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(s,r,n)=>{const i=n.detail[s],o=i[0],l=i.slice(1);n.target.style[r]=gS[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[r]:gS[`${o}_rgb`](l)})};return ar(this,"_commonActions",{display:s=>{const{display:r}=s.detail,n=r%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:r===1||r===2})},print:s=>{this.annotationStorage.setValue(this.data.id,{noPrint:!s.detail.print})},hidden:s=>{const{hidden:r}=s.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:s=>{setTimeout(()=>s.target.focus({preventScroll:!1}),0)},userName:s=>{s.target.title=s.detail.userName},readonly:s=>{s.target.disabled=s.detail.readonly},required:s=>{this._setRequired(s.target,s.detail.required)},bgColor:s=>{e("bgColor","backgroundColor",s)},fillColor:s=>{e("fillColor","backgroundColor",s)},fgColor:s=>{e("fgColor","color",s)},textColor:s=>{e("textColor","color",s)},borderColor:s=>{e("borderColor","borderColor",s)},strokeColor:s=>{e("strokeColor","borderColor",s)},rotation:s=>{const r=s.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,s){const r=this._commonActions;for(const n of Object.keys(s.detail))(e[n]||r[n])?.(s)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const s=this.annotationStorage.getRawValue(this.data.id);if(!s)return;const r=this._commonActions;for(const[n,i]of Object.entries(s)){const o=r[n];if(o){const l={detail:{[n]:i},target:e};o(l),delete s[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[s,r,n,i]=this.data.rect.map(b=>Math.fround(b));if(e.length===8){const[b,y,w,B]=e.subarray(2,6);if(n===b&&i===y&&s===w&&r===B)return}const{style:o}=this.container;let l;if(this.#t){const{borderColor:b,borderWidth:y}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${y}">`],this.container.classList.add("hasBorder")}const c=n-s,u=i-r,{svgFactory:m}=this,A=m.createElement("svg");A.classList.add("quadrilateralsContainer"),A.setAttribute("width",0),A.setAttribute("height",0),A.role="none";const g=m.createElement("defs");A.append(g);const p=m.createElement("clipPath"),v=`clippath_${this.data.id}`;p.setAttribute("id",v),p.setAttribute("clipPathUnits","objectBoundingBox"),g.append(p);for(let b=2,y=e.length;b<y;b+=8){const w=e[b],B=e[b+1],j=e[b+2],E=e[b+3],S=m.createElement("rect"),T=(j-s)/c,M=(i-B)/u,D=(w-j)/c,P=(B-E)/u;S.setAttribute("x",T),S.setAttribute("y",M),S.setAttribute("width",D),S.setAttribute("height",P),p.append(S),l?.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${M}" width="${D}" height="${P}"/>`)}this.#t&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(A),this.container.style.clipPath=`url(#${v})`}_createPopup(e=null){const{data:s}=this;let r,n;e?(r={str:e.text},n=e.date):(r=s.contentsObj,n=s.modificationDate),this.#r=new Yj({data:{color:s.color,titleObj:s.titleObj,modificationDate:n,contentsObj:r,richText:s.richText,parentRect:s.rect,borderStyle:0,id:`popup_${s.id}`,rotation:s.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#r||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#r}render(){ta("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,s=null){const r=[];if(this._fieldObjects){const n=this._fieldObjects[e];if(n)for(const{page:i,id:o,exportValues:l}of n){if(i===-1||o===s)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!lA.has(u)){rr(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:c,domElement:u})}return r}for(const n of document.getElementsByName(e)){const{exportValue:i}=n,o=n.getAttribute("data-element-id");o!==s&&lA.has(n)&&r.push({id:o,exportValue:i,domElement:n})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const s of e)s.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:s}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:s,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class O$ extends ln{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class D5 extends ln{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!s?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let n=!1;return e.url?(s.addLinkAttributes(r,e.url,e.newWindow),n=!0):e.action?(this._bindNamedAction(r,e.action,e.overlaidText),n=!0):e.attachment?(this.#t(r,e.attachment,e.overlaidText,e.attachmentDest),n=!0):e.setOCGState?(this.#r(r,e.setOCGState,e.overlaidText),n=!0):e.dest?(this._bindLink(r,e.dest,e.overlaidText),n=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),n=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(r,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&(this.contentElement=r,this.container.append(r)),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,s,r=""){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&this.#e(),r&&(e.title=r)}_bindNamedAction(e,s,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),r&&(e.title=r),this.#e()}#t(e,s,r="",n=null){e.href=this.linkService.getAnchorUrl(""),s.description?e.title=s.description:r&&(e.title=r),e.onclick=()=>(this.downloadManager?.openOrDownloadData(s.content,s.filename,n),!1),this.#e()}#r(e,s,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),r&&(e.title=r),this.#e()}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(s.actions)){const i=r.get(n);i&&(e[i]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:n}}),!1))}s.overlaidText&&(e.title=s.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,s){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){rr('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{r?.();const{fields:n,refs:i,include:o}=s,l=[];if(n.length!==0||i.length!==0){const m=new Set(i);for(const A of n){const g=this._fieldObjects[A]||[];for(const{id:p}of g)m.add(p)}for(const A of Object.values(this._fieldObjects))for(const g of A)m.has(g.id)===o&&l.push(g)}else for(const m of Object.values(this._fieldObjects))l.push(...m);const c=this.annotationStorage,u=[];for(const m of l){const{id:A}=m;switch(u.push(A),m.type){case"text":{const p=m.defaultValue||"";c.setValue(A,{value:p});break}case"checkbox":case"radiobutton":{const p=m.defaultValue===m.exportValues;c.setValue(A,{value:p});break}case"combobox":case"listbox":{const p=m.defaultValue||"";c.setValue(A,{value:p});break}default:continue}const g=document.querySelector(`[data-element-id="${A}"]`);if(g){if(!lA.has(g)){rr(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}}),!1}}}class U$ extends ln{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class vA extends ln{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return oi.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,s,r,n,i){r.includes("mouse")?e.addEventListener(r,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{if(r==="blur"){if(!s.focused||!o.relatedTarget)return;s.focused=!1}else if(r==="focus"){if(s.focused)return;s.focused=!0}i&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:i(o)}})})}_setEventListeners(e,s,r,n){for(const[i,o]of r)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(s||={focused:!1}),this._setEventListener(e,s,i,o,n),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,s,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,s,"focus","Focus",null))}_setBackgroundColor(e){const s=this.data.backgroundColor||null;e.style.backgroundColor=s===null?"transparent":ks.makeHexColor(s[0],s[1],s[2])}_setTextStyle(e){const s=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||M$,i=e.style;let o;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),m=Math.round(u/(rN*n))||1,A=u/m;o=Math.min(n,c(A/rN))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(n,c(u/rN))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=ks.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=s[this.data.textAlignment])}_setRequired(e,s){s?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",s)}}class Q$ extends vA{constructor(e){const s=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:s})}setPropertyOnSiblings(e,s,r,n){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[s]=r),i.setValue(o.id,{[n]:r})}render(){const e=this.annotationStorage,s=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const n=e.getValue(s,{value:this.data.fieldValue});let i=n.value||"";const o=e.getValue(s,{charLimit:this.data.maxLen}).charLimit;o&&i.length>o&&(i=i.slice(0,o));let l=n.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:i,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=l??i,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",l??i),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),lA.add(r),this.contentElement=r,r.setAttribute("data-element-id",s),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:u,datetimeType:m,timeStep:A}=this.data,g=!!m&&this.enableScripting;u&&(r.title=u),this._setRequired(r,this.data.required),o&&(r.maxLength=o),r.addEventListener("input",v=>{e.setValue(s,{value:v.target.value}),this.setPropertyOnSiblings(r,"value",v.target.value,"value"),c.formattedValue=null}),r.addEventListener("resetform",v=>{const b=this.data.defaultFieldValue??"";r.value=c.userValue=b,c.formattedValue=null});let p=v=>{const{formattedValue:b}=c;b!=null&&(v.target.value=b),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",b=>{if(c.focused)return;const{target:y}=b;if(g&&(y.type=m,A&&(y.step=A)),c.userValue){const w=c.userValue;if(g)if(m==="time"){const B=new Date(w),j=[B.getHours(),B.getMinutes(),B.getSeconds()];y.value=j.map(E=>E.toString().padStart(2,"0")).join(":")}else y.value=new Date(w-R$).toISOString().split(m==="date"?"T":".",1)[0];else y.value=w}c.lastCommittedValue=y.value,c.commitKey=1,this.data.actions?.Focus||(c.focused=!0)}),r.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);const y={value(w){c.userValue=w.detail.value??"",g||e.setValue(s,{value:c.userValue.toString()}),w.target.value=c.userValue},formattedValue(w){const{formattedValue:B}=w.detail;c.formattedValue=B,B!=null&&w.target!==document.activeElement&&(w.target.value=B);const j={formattedValue:B};g&&(j.value=B),e.setValue(s,j)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{const{charLimit:B}=w.detail,{target:j}=w;if(B===0){j.removeAttribute("maxLength");return}j.setAttribute("maxLength",B);let E=c.userValue;!E||E.length<=B||(E=E.slice(0,B),j.value=c.userValue=E,e.setValue(s,{value:E}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:j.selectionStart,selEnd:j.selectionEnd}}))}};this._dispatchEventFromSandbox(y,b)}),r.addEventListener("keydown",b=>{c.commitKey=1;let y=-1;if(b.key==="Escape"?y=0:b.key==="Enter"&&!this.data.multiLine?y=2:b.key==="Tab"&&(c.commitKey=3),y===-1)return;const{value:w}=b.target;c.lastCommittedValue!==w&&(c.lastCommittedValue=w,c.userValue=w,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:w,willCommit:!0,commitKey:y,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});const v=p;p=null,r.addEventListener("blur",b=>{if(!c.focused||!b.relatedTarget)return;this.data.actions?.Blur||(c.focused=!1);const{target:y}=b;let{value:w}=y;if(g){if(w&&m==="time"){const B=w.split(":").map(j=>parseInt(j,10));w=new Date(2e3,0,1,B[0],B[1],B[2]||0).valueOf(),y.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();y.type="text"}c.userValue=w,c.lastCommittedValue!==w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:w,willCommit:!0,commitKey:c.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}),v(b)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",b=>{c.lastCommittedValue=null;const{data:y,target:w}=b,{value:B,selectionStart:j,selectionEnd:E}=w;let S=j,T=E;switch(b.inputType){case"deleteWordBackward":{const M=B.substring(0,j).match(/\w*[^\w]*$/);M&&(S-=M[0].length);break}case"deleteWordForward":{const M=B.substring(j).match(/^[^\w]*\w*/);M&&(T+=M[0].length);break}case"deleteContentBackward":j===E&&(S-=1);break;case"deleteContentForward":j===E&&(T+=1);break}b.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:B,change:y||"",willCommit:!1,selStart:S,selEnd:T}})}),this._setEventListeners(r,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(p&&r.addEventListener("blur",p),this.data.comb){const b=(this.data.rect[2]-this.data.rect[0])/o;r.classList.add("comb"),r.style.letterSpacing=`calc(${b}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class H$ extends vA{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class V$ extends vA{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,s=this.data,r=s.id;let n=e.getValue(r,{value:s.exportValue===s.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",e.setValue(r,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return lA.add(i),i.setAttribute("data-element-id",r),i.disabled=s.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=s.fieldName,n&&i.setAttribute("checked",!0),i.setAttribute("exportValue",s.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,r)){const m=c&&u.exportValue===s.exportValue;u.domElement&&(u.domElement.checked=m),e.setValue(u.id,{value:m})}e.setValue(r,{value:c})}),i.addEventListener("resetform",o=>{const l=s.defaultFieldValue||"Off";o.target.checked=l===s.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(r,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class pP extends vA{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,s=this.data,r=s.id;let n=e.getValue(r,{value:s.fieldValue===s.buttonValue}).value;if(typeof n=="string"&&(n=n!==s.buttonValue,e.setValue(r,{value:n})),n)for(const o of this._getElementsByName(s.fieldName,r))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(lA.add(i),i.setAttribute("data-element-id",r),i.disabled=s.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=s.fieldName,n&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,r))e.setValue(u.id,{value:!1});e.setValue(r,{value:c})}),i.addEventListener("resetform",o=>{const l=s.defaultFieldValue;o.target.checked=l!=null&&l===s.buttonValue}),this.enableScripting&&this.hasJSActions){const o=s.buttonValue;i.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const m=o===u.detail.value;for(const A of this._getElementsByName(u.target.name)){const g=m&&A.id===r;A.domElement&&(A.domElement.checked=g),e.setValue(A.id,{value:g})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class z$ extends D5{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const s=e.lastChild;return this.enableScripting&&this.hasJSActions&&s&&(this._setDefaultPropertiesFromJS(s),s.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class $$ extends vA{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,s=this.data.id,r=e.getValue(s,{value:this.data.fieldValue}),n=document.createElement("select");lA.add(n),n.setAttribute("data-element-id",s),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",m=>{const A=this.data.defaultFieldValue;for(const g of n.options)g.selected=g.value===A});for(const m of this.data.options){const A=document.createElement("option");A.textContent=m.displayValue,A.value=m.exportValue,r.value.includes(m.exportValue)&&(A.setAttribute("selected",!0),i=!1),n.append(A)}let o=null;if(i){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),n.prepend(m),o=()=>{m.remove(),n.removeEventListener("input",o),o=null},n.addEventListener("input",o)}const l=m=>{const A=m?"value":"textContent",{options:g,multiple:p}=n;return p?Array.prototype.filter.call(g,v=>v.selected).map(v=>v[A]):g.selectedIndex===-1?null:g[g.selectedIndex][A]};let c=l(!1);const u=m=>{const A=m.target.options;return Array.prototype.map.call(A,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",m=>{const A={value(g){o?.();const p=g.detail.value,v=new Set(Array.isArray(p)?p:[p]);for(const b of n.options)b.selected=v.has(b.value);e.setValue(s,{value:l(!0)}),c=l(!1)},multipleSelection(g){n.multiple=!0},remove(g){const p=n.options,v=g.detail.remove;p[v].selected=!1,n.remove(v),p.length>0&&Array.prototype.findIndex.call(p,y=>y.selected)===-1&&(p[0].selected=!0),e.setValue(s,{value:l(!0),items:u(g)}),c=l(!1)},clear(g){for(;n.length!==0;)n.remove(0);e.setValue(s,{value:null,items:[]}),c=l(!1)},insert(g){const{index:p,displayValue:v,exportValue:b}=g.detail.insert,y=n.children[p],w=document.createElement("option");w.textContent=v,w.value=b,y?y.before(w):n.append(w),e.setValue(s,{value:l(!0),items:u(g)}),c=l(!1)},items(g){const{items:p}=g.detail;for(;n.length!==0;)n.remove(0);for(const v of p){const{displayValue:b,exportValue:y}=v,w=document.createElement("option");w.textContent=b,w.value=y,n.append(w)}n.options.length>0&&(n.options[0].selected=!0),e.setValue(s,{value:l(!0),items:u(g)}),c=l(!1)},indices(g){const p=new Set(g.detail.indices);for(const v of g.target.options)v.selected=p.has(v.index);e.setValue(s,{value:l(!0)}),c=l(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(A,m)}),n.addEventListener("input",m=>{const A=l(!0),g=l(!1);e.setValue(s,{value:A}),m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:c,change:g,changeEx:A,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):n.addEventListener("input",function(m){e.setValue(s,{value:l(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Yj extends ln{constructor(e){const{data:s,elements:r,parent:n}=e,i=!!n._commentManager;if(super(e,{isRenderable:!i&&ln._hasPopupData(s)}),this.elements=r,i&&ln._hasPopupData(s)){const o=this.popup=this.#e();for(const l of r)l.popup=o}else this.popup=null}#e(){return new q$({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const s=this.popup=this.#e(),r=[];for(const n of this.elements)n.popup=s,n.container.ariaHasPopup="dialog",r.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(n=>`${zf}${n}`).join(",")),this.container}}class q${#e=null;#t=this.#z.bind(this);#r=this.#O.bind(this);#s=this.#T.bind(this);#n=this.#w.bind(this);#i=null;#a=null;#o=null;#c=null;#l=null;#h=null;#u=null;#m=!1;#p=null;#f=null;#d=null;#A=null;#g=null;#b=null;#x=null;#_=null;#N=null;#v=null;#k=!1;#y=null;#j=null;constructor({container:e,color:s,elements:r,titleObj:n,modificationDate:i,contentsObj:o,richText:l,parent:c,rect:u,parentRect:m,open:A,commentManager:g=null}){this.#a=e,this.#N=n,this.#o=o,this.#_=l,this.#h=c,this.#i=s,this.#x=u,this.#u=m,this.#l=r,this.#e=g,this.#y=r[0],this.#c=Hj.toDateObject(i),this.trigger=r.flatMap(p=>p.getElementsToTriggerPopup()),g||(this.#E(),this.#a.hidden=!0,A&&this.#w())}#E(){if(this.#f)return;this.#f=new AbortController;const{signal:e}=this.#f;for(const s of this.trigger)s.addEventListener("click",this.#n,{signal:e}),s.addEventListener("pointerenter",this.#s,{signal:e}),s.addEventListener("pointerleave",this.#r,{signal:e}),s.classList.add("popupTriggerArea");for(const s of this.#l)s.container?.addEventListener("keydown",this.#t,{signal:e})}#B(){const e=this.#l.find(s=>s.hasCommentButton);e&&(this.#g=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#A){this.#A.parentNode||this.#y.container.after(this.#A);return}if(this.#g||this.#B(),!this.#g)return;const{signal:e}=this.#f=new AbortController,s=this.#y.hasOwnCommentButton,r=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!s)},n=()=>{this.#e.toggleCommentPopup(this,!1,!0,!s)},i=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(s){this.#A=this.#y.container;for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",this.#t,{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",n,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=this.#A=document.createElement("button");o.className="annotationCommentButton";const l=this.#y.container;o.style.zIndex=l.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#M(),this.#S(),o.addEventListener("keydown",this.#t,{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",n,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),l.after(o)}}#S(){if(this.#y.extraPopupElement&&!this.#y.editor)return;this.#A||this.renderCommentButton();const[e,s]=this.#g,{style:r}=this.#A;r.left=`calc(${e}%)`,r.top=`calc(${s}% - var(--comment-button-dim))`}#M(){this.#y.extraPopupElement||(this.#A||this.renderCommentButton(),this.#A.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:s}=this.#y.commentData;return e?this.#h._commentManager.makeCommentColor(e,s):null}focusCommentButton(){setTimeout(()=>{this.#A?.focus()},0)}getData(){const{richText:e,color:s,opacity:r,creationDate:n,modificationDate:i}=this.#y.commentData;return{contentsObj:{str:this.comment},richText:e,color:s,opacity:r,creationDate:n,modificationDate:i}}get elementBeforePopup(){return this.#A}get comment(){return this.#j||=this.#y.commentText,this.#j}set comment(e){e!==this.comment&&(this.#y.commentText=this.#j=e)}focus(){this.#y.container?.focus()}get parentBoundingClientRect(){return this.#y.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:s}){this.#A&&(this.#A.classList.toggle("selected",e),this.#A.ariaExpanded=s)}setSelectedCommentButton(e){this.#A.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:e,y:s,height:r}=this.#A.getBoundingClientRect(),{x:n,y:i,width:o,height:l}=this.#y.layer.getBoundingClientRect();return[(e-n)/o,(s+r-i)/l]}set commentPopupPosition(e){this.#b=e}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#g}get commentButtonWidth(){return this.#A.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[s,r]=this.#b||this.commentButtonPosition.map(u=>u/100),n=this.parentBoundingClientRect,{x:i,y:o,width:l,height:c}=n;this.#e.showDialog(null,this,i+s*l,o+r*c,{...e,parentDimensions:n})}render(){if(this.#p)return;const e=this.#p=document.createElement("div");if(e.className="popup",this.#i){const r=e.style.outlineColor=ks.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const s=document.createElement("span");if(s.className="header",this.#N?.str){const r=document.createElement("span");r.className="title",s.append(r),{dir:r.dir,str:r.textContent}=this.#N}if(e.append(s),this.#c){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),r.dateTime=this.#c.toISOString(),s.append(r)}GT({html:this.#D||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#a.append(e)}get#D(){const e=this.#_,s=this.#o;return e?.str&&(!s?.str||s.str===e.str)&&this.#_.html||null}get#P(){return this.#D?.attributes?.style?.fontSize||0}get#R(){return this.#D?.attributes?.style?.color||null}#I(e){const s=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:s}]}},n={style:{color:this.#R,fontSize:this.#P?`calc(${this.#P}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))s.push({name:"span",value:i,attributes:n});return r}#z(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#m)&&this.#w()}updateEdited({rect:e,popup:s,deleted:r}){if(this.#e){r?(this.remove(),this.#j=null):s&&(s.deleted?this.remove():(this.#M(),this.#j=s.text)),e&&(this.#g=null,this.#B(),this.#S());return}if(r||s?.deleted){this.remove();return}this.#E(),this.#v||={contentsObj:this.#o,richText:this.#_},e&&(this.#d=null),s&&s.text&&(this.#_=this.#I(s.text),this.#c=Hj.toDateObject(s.date),this.#o=null),this.#p?.remove(),this.#p=null}resetEdited(){this.#v&&({contentsObj:this.#o,richText:this.#_}=this.#v,this.#v=null,this.#p?.remove(),this.#p=null,this.#d=null)}remove(){if(this.#f?.abort(),this.#f=null,this.#p?.remove(),this.#p=null,this.#k=!1,this.#m=!1,this.#A?.remove(),this.#A=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#C(){if(this.#d!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:n,pageY:i}}}=this.#h;let o=!!this.#u,l=o?this.#u:this.#x;for(const v of this.#l)if(!l||ks.intersect(v.data.rect,l)!==null){l=v.data.rect,o=!0;break}const c=ks.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),m=o?l[2]-l[0]+5:0,A=c[0]+m,g=c[1];this.#d=[100*(A-n)/s,100*(g-i)/r];const{style:p}=this.#a;p.left=`${this.#d[0]}%`,p.top=`${this.#d[1]}%`}#w(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#m=!this.#m,this.#m?(this.#T(),this.#a.addEventListener("click",this.#n),this.#a.addEventListener("keydown",this.#t)):(this.#O(),this.#a.removeEventListener("click",this.#n),this.#a.removeEventListener("keydown",this.#t))}#T(){this.#p||this.render(),this.isVisible?this.#m&&this.#a.classList.add("focused"):(this.#C(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#O(){this.#a.classList.remove("focused"),!(this.#m||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#k=this.isVisible,this.#k&&(this.#a.hidden=!0)}maybeShow(){this.#e||(this.#E(),this.#k&&(this.#p||this.#T(),this.#k=!1,this.#a.hidden=!1))}get isVisible(){return this.#e?!1:this.#a.hidden===!1}}class gP extends ln{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=dr.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const s of this.textContent){const r=document.createElement("span");r.textContent=s,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class G$ extends ln{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:s,height:r}=this,n=this.svgFactory.create(s,r,!0),i=this.#e=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),n.append(i),this.container.append(n),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class W$ extends ln{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:s,height:r}=this,n=this.svgFactory.create(s,r,!0),i=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",i/2),o.setAttribute("y",i/2),o.setAttribute("width",s-i),o.setAttribute("height",r-i),o.setAttribute("stroke-width",i||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),n.append(o),this.container.append(n),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Y$ extends ln{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:s,height:r}=this,n=this.svgFactory.create(s,r,!0),i=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",s/2),o.setAttribute("cy",r/2),o.setAttribute("rx",s/2-i/2),o.setAttribute("ry",r/2-i/2),o.setAttribute("stroke-width",i||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),n.append(o),this.container.append(n),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class xP extends ln{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:r,popupRef:n},width:i,height:o}=this;if(!s)return this.container;const l=this.svgFactory.create(i,o,!0);let c=[];for(let m=0,A=s.length;m<A;m+=2){const g=s[m]-e[0],p=e[3]-s[m+1];c.push(`${g},${p}`)}c=c.join(" ");const u=this.#e=this.svgFactory.createElement(this.svgElementName);return u.setAttribute("points",c),u.setAttribute("stroke-width",r.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class K$ extends xP{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class X$ extends ln{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class T5 extends ln{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?dr.HIGHLIGHT:dr.INK}#r(e,s){switch(e){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:s,inkLists:r,borderStyle:n,popupRef:i}}=this,{transform:o,width:l,height:c}=this.#r(s,e),u=this.svgFactory.create(l,c,!0),m=this.#e=this.svgFactory.createElement("svg:g");u.append(m),m.setAttribute("stroke-width",n.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",o);for(let A=0,g=r.length;A<g;A++){const p=this.svgFactory.createElement(this.svgElementName);this.#t.push(p),p.setAttribute("points",r[A].join(",")),m.append(p)}return!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:s,points:r,rect:n}=e,i=this.#e;if(s>=0&&i.setAttribute("stroke-width",s||1),r)for(let o=0,l=this.#t.length;o<l;o++)this.#t[o].setAttribute("points",r[o].join(","));if(n){const{transform:o,width:l,height:c}=this.#r(this.data.rotation,n);i.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),i.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class bP extends ln{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=dr.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:s}}=this;if(!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class J$ extends ln{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:s}}=this;if(!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Z$ extends ln{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:s}}=this;if(!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class eq extends ln{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:s}}=this;if(!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class yP extends ln{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=dr.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class tq extends ln{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:s}=this.data;this.filename=s.filename,this.content=s.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;const{isMac:n}=oi.platform;return e.addEventListener("keydown",i=>{i.key==="Enter"&&(n?i.metaKey:i.ctrlKey)&&this.#t()}),!s.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class P5{#e=null;#t=null;#r=null;#s=new Map;#n=null;#i=null;#a=[];#o=!1;constructor({div:e,accessibilityManager:s,annotationCanvasMap:r,annotationEditorUIManager:n,page:i,viewport:o,structTreeLayer:l,commentManager:c,linkService:u,annotationStorage:m}){this.div=e,this.#e=s,this.#t=r,this.#n=l||null,this.#i=u||null,this.#r=m||new k5,this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=n,this._commentManager=c||null}hasEditableAnnotations(){return this.#s.size>0}async render(e){const{annotations:s}=e,r=this.div;oA(r,this.viewport);const n=new Map,i=[],o={data:null,layer:r,linkService:this.#i,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new bv,annotationStorage:this.#r,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of s){if(l.noHTML)continue;const c=l.annotationType===$n.POPUP;if(c){const A=n.get(l.id);if(!A)continue;if(!this._commentManager){i.push(l);continue}o.elements=A}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const u=dN.create(o);if(!u.isRenderable)continue;if(!c&&(this.#a.push(u),l.popupRef)){const A=n.get(l.popupRef);A?A.push(u):n.set(l.popupRef,[u])}const m=u.render();l.hidden&&(m.style.visibility="hidden"),u._isEditable&&(this.#s.set(u.data.id,u),this._annotationEditorUIManager?.renderAnnotationElement(u))}await this.#c();for(const l of i){const c=o.elements=n.get(l.id);o.data=l;const u=dN.create(o);if(!u.isRenderable)continue;const m=u.render();u.contentElement.id=`${zf}${l.id}`,l.hidden&&(m.style.visibility="hidden"),c.at(-1).container.after(m)}this.#l()}async#c(){if(this.#a.length===0)return;this.div.replaceChildren();const e=[];if(!this.#o){this.#o=!0;for(const{contentElement:r,data:{id:n}}of this.#a){const i=r.id=`${zf}${n}`;e.push(this.#n?.getAriaAttributes(i).then(o=>{if(o)for(const[l,c]of o)r.setAttribute(l,c)}))}}this.#a.sort(({data:{rect:[r,n,i,o]}},{data:{rect:[l,c,u,m]}})=>{if(r===i&&n===o)return 1;if(l===u&&c===m)return-1;const A=o,g=n,p=(n+o)/2,v=m,b=c,y=(c+m)/2;if(p>=v&&y<=g)return-1;if(y>=A&&p<=b)return 1;const w=(r+i)/2,B=(l+u)/2;return w-B});const s=document.createDocumentFragment();for(const r of this.#a)s.append(r.container),this._commentManager?(r.extraPopupElement?.popup||r.popup)?.renderCommentButton():r.extraPopupElement&&s.append(r.extraPopupElement.render());if(this.div.append(s),await Promise.all(e),this.#e)for(const r of this.#a)this.#e.addPointerInTextLayer(r.contentElement,!1)}async addLinkAnnotations(e){const s={data:null,layer:this.div,linkService:this.#i,svgFactory:new bv,parent:this};for(const r of e){r.borderStyle||=P5._defaultBorderStyle,s.data=r;const n=dN.create(s);n.isRenderable&&(n.render(),n.contentElement.id=`${zf}${r.id}`,this.#a.push(n))}await this.#c()}update({viewport:e}){const s=this.div;this.viewport=e,oA(s,{rotation:e.rotation}),this.#l(),s.hidden=!1}#l(){if(!this.#t)return;const e=this.div;for(const[s,r]of this.#t){const n=e.querySelector(`[data-annotation-id="${s}"]`);if(!n)continue;r.className="annotationContent";const{firstChild:i}=n;i?i.nodeName==="CANVAS"?i.replaceWith(r):i.classList.contains("annotationContent")?i.after(r):i.before(r):n.append(r);const o=this.#s.get(s);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(s,n.id,r),o._hasNoCanvas=!1):o.canvas=r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#s.values())}getEditableAnnotation(e){return this.#s.get(e)}addFakeAnnotation(e){const{div:s}=this,{id:r,rotation:n}=e,i=new O$({data:{id:r,rect:e.getPDFRect(),rotation:n},editor:e,layer:s,parent:this,enableComment:!!this._commentManager,linkService:this.#i,annotationStorage:this.#r});return i.render(),i.contentElement.id=`${zf}${r}`,i.createOrUpdatePopup(),this.#a.push(i),i}removeAnnotation(e){const s=this.#a.findIndex(n=>n.data.id===e);if(s<0)return;const[r]=this.#a.splice(s,1);this.#e?.removePointerInTextLayer(r.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const s of e)s.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return ar(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:If.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Db=/\r\n?|\n/g;class pi extends qs{#e="";#t=`${this.id}-editor`;#r=null;#s;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=pi.prototype,s=i=>i.isEmpty(),r=$h.TRANSLATE_SMALL,n=$h.TRANSLATE_BIG;return ar(this,"_keyboardManager",new y0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[n,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,n],checker:s}]]))}static _type="freetext";static _editorType=dr.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||pi._defaultColor||qs._defaultLineColor,this.#s=e.fontSize||pi._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(e,s){qs.initialize(e,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case Tr.FREETEXT_SIZE:pi._defaultFontSize=s;break;case Tr.FREETEXT_COLOR:pi._defaultColor=s;break}}updateParams(e,s){switch(e){case Tr.FREETEXT_SIZE:this.#n(s);break;case Tr.FREETEXT_COLOR:this.#i(s);break}}static get defaultPropertiesToUpdate(){return[[Tr.FREETEXT_SIZE,pi._defaultFontSize],[Tr.FREETEXT_COLOR,pi._defaultColor||qs._defaultLineColor]]}get propertiesToUpdate(){return[[Tr.FREETEXT_SIZE,this.#s],[Tr.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Vx(this),[["colorPicker",this._colorPicker]]}get colorType(){return Tr.FREETEXT_COLOR}#n(e){const s=n=>{this.editorDiv.style.fontSize=`calc(${n}px * var(--total-scale-factor))`,this.translate(0,-(n-this.#s)*this.parentScale),this.#s=n,this.#o()},r=this.#s;this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Tr.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#i(e){const s=n=>{this.color=n,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Tr.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-pi._internalPadding*e,-(pi._internalPadding+this.#s)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;const e=this._uiManager.combinedSignal(this.#r);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const e=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)s?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(pi.#c(r)),s=r);return e.join(`
`)}#o(){const[e,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:n,div:i}=this,o=i.style.display,l=i.classList.contains("hidden");i.classList.remove("hidden"),i.style.display="hidden",n.div.append(this.div),r=i.getBoundingClientRect(),i.remove(),i.style.display=o,i.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/s):(this.width=r.height/e,this.height=r.width/s),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,s=this.#e=this.#a().trimEnd();if(e===s)return;const r=n=>{if(this.#e=n,!n){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){pi._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,s;(this._isCopy||this.annotationElementId)&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#s}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,m]=this.pageDimensions,[A,g]=this.pageTranslation;let p,v;switch(this.rotation){case 0:p=e+(o[0]-A)/u,v=s+this.height-(o[1]-g)/m;break;case 90:p=e+(o[0]-A)/u,v=s-(o[1]-g)/m,[l,c]=[c,-l];break;case 180:p=e-this.width+(o[0]-A)/u,v=s-(o[1]-g)/m,[l,c]=[-l,-c];break;case 270:p=e+(o[0]-A-this.height*m)/u,v=s+(o[1]-g-this.width*u)/m,[l,c]=[-c,l];break}this.setAt(p*n,v*i,l,c)}else this._moveAfterPaste(e,s);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Db,"")}editorDivPaste(e){const s=e.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const n=pi.#u(s.getData("text")||"").replaceAll(Db,`
`);if(!n)return;const i=window.getSelection();if(!i.rangeCount)return;this.editorDiv.normalize(),i.deleteFromDocument();const o=i.getRangeAt(0);if(!n.includes(`
`)){o.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),i.collapseToStart();return}const{startContainer:l,startOffset:c}=o,u=[],m=[];if(l.nodeType===Node.TEXT_NODE){const p=l.parentElement;if(m.push(l.nodeValue.slice(c).replaceAll(Db,"")),p!==this.editorDiv){let v=u;for(const b of this.editorDiv.childNodes){if(b===p){v=m;continue}v.push(pi.#c(b))}}u.push(l.nodeValue.slice(0,c).replaceAll(Db,""))}else if(l===this.editorDiv){let p=u,v=0;for(const b of this.editorDiv.childNodes)v++===c&&(p=m),p.push(pi.#c(b))}this.#e=`${u.join(`
`)}${n}${m.join(`
`)}`,this.#l();const A=new Range;let g=Math.sumPrecise(u.map(p=>p.length));for(const{firstChild:p}of this.editorDiv.childNodes)if(p.nodeType===Node.TEXT_NODE){const v=p.nodeValue.length;if(g<=v){A.setStart(p,g),A.setEnd(p,g);break}g-=v}i.removeAllRanges(),i.addRange(A)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}}#h(){return this.#e.replaceAll(""," ")}static#u(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=pi._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,s,r){let n=null;if(e instanceof gP){const{data:{defaultAppearanceData:{fontSize:o,fontColor:l},rect:c,rotation:u,id:m,popupRef:A,richText:g,contentsObj:p,creationDate:v,modificationDate:b},textContent:y,textPosition:w,parent:{page:{pageNumber:B}}}=e;if(!y||y.length===0)return null;n=e={annotationType:dr.FREETEXT,color:Array.from(l),fontSize:o,value:y.join(`
`),position:w,pageIndex:B-1,rect:c.slice(0),rotation:u,annotationElementId:m,id:m,deleted:!1,popupRef:A,comment:p?.str||null,richText:g,creationDate:v,modificationDate:b}}const i=await super.deserialize(e,s,r);return i.#s=e.fontSize,i.color=ks.makeHexColor(...e.color),i.#e=pi.#u(e.value),i._initialData=n,e.comment&&i.setCommentData(e),i}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=qs._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(e),{color:s,fontSize:this.#s,value:this.#h()});return this.addComment(r),e?(r.isCopy=!0,r):this.annotationElementId&&!this.#m(r)?null:(r.id=this.annotationElementId,r)}#m(e){const{value:s,fontSize:r,color:n,pageIndex:i}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==s||e.fontSize!==r||e.color.some((o,l)=>o!==n[l])||e.pageIndex!==i}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(!s)return null;const{style:r}=s;r.fontSize=`calc(${this.#s}px * var(--total-scale-factor))`,r.color=this.color,s.replaceChildren();for(const n of this.#e.split(`
`)){const i=document.createElement("div");i.append(n?document.createTextNode(n):document.createElement("br")),s.append(i)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Ds{static PRECISION=1e-4;toSVGPath(){ta("Abstract method `toSVGPath` must be implemented.")}get box(){ta("Abstract getter `box` must be implemented.")}serialize(e,s){ta("Abstract method `serialize` must be implemented.")}static _rescale(e,s,r,n,i,o){o||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)o[l]=s+e[l]*n,o[l+1]=r+e[l+1]*i;return o}static _rescaleAndSwap(e,s,r,n,i,o){o||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)o[l]=s+e[l+1]*n,o[l+1]=r+e[l]*i;return o}static _translate(e,s,r,n){n||=new Float32Array(e.length);for(let i=0,o=e.length;i<o;i+=2)n[i]=s+e[i],n[i+1]=r+e[i+1];return n}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,s,r,n,i){switch(i){case 90:return[1-s/r,e/n];case 180:return[1-e/r,1-s/n];case 270:return[s/r,1-e/n];default:return[e/r,s/n]}}static _normalizePagePoint(e,s,r){switch(r){case 90:return[1-s,e];case 180:return[1-e,1-s];case 270:return[s,1-e];default:return[e,s]}}static createBezierPoints(e,s,r,n,i,o){return[(e+5*r)/6,(s+5*n)/6,(5*r+i)/6,(5*n+o)/6,(r+i)/2,(n+o)/2]}}class Qm{#e;#t=[];#r;#s;#n=[];#i=new Float32Array(18);#a;#o;#c;#l;#h;#u;#m=[];static#p=8;static#f=2;static#d=Qm.#p+Qm.#f;constructor({x:e,y:s},r,n,i,o,l=0){this.#e=r,this.#u=i*n,this.#s=o,this.#i.set([NaN,NaN,NaN,NaN,e,s],6),this.#r=l,this.#l=Qm.#p*n,this.#c=Qm.#d*n,this.#h=n,this.#m.push(e,s)}isEmpty(){return isNaN(this.#i[8])}#A(){const e=this.#i.subarray(4,6),s=this.#i.subarray(16,18),[r,n,i,o]=this.#e;return[(this.#a+(e[0]-s[0])/2-r)/i,(this.#o+(e[1]-s[1])/2-n)/o,(this.#a+(s[0]-e[0])/2-r)/i,(this.#o+(s[1]-e[1])/2-n)/o]}add({x:e,y:s}){this.#a=e,this.#o=s;const[r,n,i,o]=this.#e;let[l,c,u,m]=this.#i.subarray(8,12);const A=e-u,g=s-m,p=Math.hypot(A,g);if(p<this.#c)return!1;const v=p-this.#l,b=v/p,y=b*A,w=b*g;let B=l,j=c;l=u,c=m,u+=y,m+=w,this.#m?.push(e,s);const E=-w/v,S=y/v,T=E*this.#u,M=S*this.#u;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([u+T,m+M],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([u-T,m-M],16),isNaN(this.#i[6])?(this.#n.length===0&&(this.#i.set([l+T,c+M],2),this.#n.push(NaN,NaN,NaN,NaN,(l+T-r)/i,(c+M-n)/o),this.#i.set([l-T,c-M],14),this.#t.push(NaN,NaN,NaN,NaN,(l-T-r)/i,(c-M-n)/o)),this.#i.set([B,j,l,c,u,m],6),!this.isEmpty()):(this.#i.set([B,j,l,c,u,m],6),Math.abs(Math.atan2(j-c,B-l)-Math.atan2(w,y))<Math.PI/2?([l,c,u,m]=this.#i.subarray(2,6),this.#n.push(NaN,NaN,NaN,NaN,((l+u)/2-r)/i,((c+m)/2-n)/o),[l,c,B,j]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((B+l)/2-r)/i,((j+c)/2-n)/o),!0):([B,j,l,c,u,m]=this.#i.subarray(0,6),this.#n.push(((B+5*l)/6-r)/i,((j+5*c)/6-n)/o,((5*l+u)/6-r)/i,((5*c+m)/6-n)/o,((l+u)/2-r)/i,((c+m)/2-n)/o),[u,m,l,c,B,j]=this.#i.subarray(12,18),this.#t.push(((B+5*l)/6-r)/i,((j+5*c)/6-n)/o,((5*l+u)/6-r)/i,((5*c+m)/6-n)/o,((l+u)/2-r)/i,((c+m)/2-n)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#n,s=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#g();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let n=6;n<e.length;n+=6)isNaN(e[n])?r.push(`L${e[n+4]} ${e[n+5]}`):r.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);this.#x(r);for(let n=s.length-6;n>=6;n-=6)isNaN(s[n])?r.push(`L${s[n+4]} ${s[n+5]}`):r.push(`C${s[n]} ${s[n+1]} ${s[n+2]} ${s[n+3]} ${s[n+4]} ${s[n+5]}`);return this.#b(r),r.join(" ")}#g(){const[e,s,r,n]=this.#e,[i,o,l,c]=this.#A();return`M${(this.#i[2]-e)/r} ${(this.#i[3]-s)/n} L${(this.#i[4]-e)/r} ${(this.#i[5]-s)/n} L${i} ${o} L${l} ${c} L${(this.#i[16]-e)/r} ${(this.#i[17]-s)/n} L${(this.#i[14]-e)/r} ${(this.#i[15]-s)/n} Z`}#b(e){const s=this.#t;e.push(`L${s[4]} ${s[5]} Z`)}#x(e){const[s,r,n,i]=this.#e,o=this.#i.subarray(4,6),l=this.#i.subarray(16,18),[c,u,m,A]=this.#A();e.push(`L${(o[0]-s)/n} ${(o[1]-r)/i} L${c} ${u} L${m} ${A} L${(l[0]-s)/n} ${(l[1]-r)/i}`)}newFreeDrawOutline(e,s,r,n,i,o){return new vP(e,s,r,n,i,o)}getOutlines(){const e=this.#n,s=this.#t,r=this.#i,[n,i,o,l]=this.#e,c=new Float32Array((this.#m?.length??0)+2);for(let A=0,g=c.length-2;A<g;A+=2)c[A]=(this.#m[A]-n)/o,c[A+1]=(this.#m[A+1]-i)/l;if(c[c.length-2]=(this.#a-n)/o,c[c.length-1]=(this.#o-i)/l,isNaN(r[6])&&!this.isEmpty())return this.#_(c);const u=new Float32Array(this.#n.length+24+this.#t.length);let m=e.length;for(let A=0;A<m;A+=2){if(isNaN(e[A])){u[A]=u[A+1]=NaN;continue}u[A]=e[A],u[A+1]=e[A+1]}m=this.#v(u,m);for(let A=s.length-6;A>=6;A-=6)for(let g=0;g<6;g+=2){if(isNaN(s[A+g])){u[m]=u[m+1]=NaN,m+=2;continue}u[m]=s[A+g],u[m+1]=s[A+g+1],m+=2}return this.#N(u,m),this.newFreeDrawOutline(u,c,this.#e,this.#h,this.#r,this.#s)}#_(e){const s=this.#i,[r,n,i,o]=this.#e,[l,c,u,m]=this.#A(),A=new Float32Array(36);return A.set([NaN,NaN,NaN,NaN,(s[2]-r)/i,(s[3]-n)/o,NaN,NaN,NaN,NaN,(s[4]-r)/i,(s[5]-n)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,m,NaN,NaN,NaN,NaN,(s[16]-r)/i,(s[17]-n)/o,NaN,NaN,NaN,NaN,(s[14]-r)/i,(s[15]-n)/o],0),this.newFreeDrawOutline(A,e,this.#e,this.#h,this.#r,this.#s)}#N(e,s){const r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],s),s+=6}#v(e,s){const r=this.#i.subarray(4,6),n=this.#i.subarray(16,18),[i,o,l,c]=this.#e,[u,m,A,g]=this.#A();return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/l,(r[1]-o)/c,NaN,NaN,NaN,NaN,u,m,NaN,NaN,NaN,NaN,A,g,NaN,NaN,NaN,NaN,(n[0]-i)/l,(n[1]-o)/c],s),s+=24}}class vP extends Ds{#e;#t=new Float32Array(4);#r;#s;#n;#i;#a;constructor(e,s,r,n,i,o){super(),this.#a=e,this.#n=s,this.#e=r,this.#i=n,this.#r=i,this.#s=o,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(o);const[l,c,u,m]=this.#t;for(let A=0,g=e.length;A<g;A+=2)e[A]=(e[A]-l)/u,e[A+1]=(e[A+1]-c)/m;for(let A=0,g=s.length;A<g;A+=2)s[A]=(s[A]-l)/u,s[A+1]=(s[A+1]-c)/m}toSVGPath(){const e=[`M${this.#a[4]} ${this.#a[5]}`];for(let s=6,r=this.#a.length;s<r;s+=6){if(isNaN(this.#a[s])){e.push(`L${this.#a[s+4]} ${this.#a[s+5]}`);continue}e.push(`C${this.#a[s]} ${this.#a[s+1]} ${this.#a[s+2]} ${this.#a[s+3]} ${this.#a[s+4]} ${this.#a[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,r,n],i){const o=r-e,l=n-s;let c,u;switch(i){case 0:c=Ds._rescale(this.#a,e,n,o,-l),u=Ds._rescale(this.#n,e,n,o,-l);break;case 90:c=Ds._rescaleAndSwap(this.#a,e,s,o,l),u=Ds._rescaleAndSwap(this.#n,e,s,o,l);break;case 180:c=Ds._rescale(this.#a,r,s,-o,l),u=Ds._rescale(this.#n,r,s,-o,l);break;case 270:c=Ds._rescaleAndSwap(this.#a,r,n,-o,-l),u=Ds._rescaleAndSwap(this.#n,r,n,-o,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}#o(e){const s=this.#a;let r=s[4],n=s[5];const i=[r,n,r,n];let o=r,l=n,c=r,u=n;const m=e?Math.max:Math.min,A=new Float32Array(4);for(let p=6,v=s.length;p<v;p+=6){const b=s[p+4],y=s[p+5];isNaN(s[p])?(ks.pointBoundingBox(b,y,i),l>y?(o=b,l=y):l===y&&(o=m(o,b)),u<y?(c=b,u=y):u===y&&(c=m(c,b))):(A[0]=A[1]=1/0,A[2]=A[3]=-1/0,ks.bezierBoundingBox(r,n,...s.slice(p,p+6),A),ks.rectBoundingBox(A[0],A[1],A[2],A[3],i),l>A[1]?(o=A[0],l=A[1]):l===A[1]&&(o=m(o,A[0])),u<A[3]?(c=A[2],u=A[3]):u===A[3]&&(c=m(c,A[2]))),r=b,n=y}const g=this.#t;g[0]=i[0]-this.#r,g[1]=i[1]-this.#r,g[2]=i[2]-i[0]+2*this.#r,g[3]=i[3]-i[1]+2*this.#r,this.firstPoint=[o,l],this.lastPoint=[c,u]}get box(){return this.#t}newOutliner(e,s,r,n,i,o=0){return new Qm(e,s,r,n,i,o)}getNewOutline(e,s){const[r,n,i,o]=this.#t,[l,c,u,m]=this.#e,A=i*u,g=o*m,p=r*u+l,v=n*m+c,b=this.newOutliner({x:this.#n[0]*A+p,y:this.#n[1]*g+v},this.#e,this.#i,e,this.#s,s??this.#r);for(let y=2;y<this.#n.length;y+=2)b.add({x:this.#n[y]*A+p,y:this.#n[y+1]*g+v});return b.getOutlines()}}class Kj{#e;#t;#r;#s=[];#n=[];constructor(e,s=0,r=0,n=!0){const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:b,y,width:w,height:B}of e){const j=Math.floor((b-s)/o)*o,E=Math.ceil((b+w+s)/o)*o,S=Math.floor((y-s)/o)*o,T=Math.ceil((y+B+s)/o)*o,M=[j,S,T,!0],D=[E,S,T,!1];this.#s.push(M,D),ks.rectBoundingBox(j,S,E,T,i)}const l=i[2]-i[0]+2*r,c=i[3]-i[1]+2*r,u=i[0]-r,m=i[1]-r;let A=n?-1/0:1/0,g=1/0;const p=this.#s.at(n?-1:-2),v=[p[0],p[2]];for(const b of this.#s){const[y,w,B,j]=b;!j&&n?w<g?(g=w,A=y):w===g&&(A=Math.max(A,y)):j&&!n&&(w<g?(g=w,A=y):w===g&&(A=Math.min(A,y))),b[0]=(y-u)/l,b[1]=(w-m)/c,b[2]=(B-m)/c}this.#e=new Float32Array([u,m,l,c]),this.#t=[A,g],this.#r=v}getOutlines(){this.#s.sort((s,r)=>s[0]-r[0]||s[1]-r[1]||s[2]-r[2]);const e=[];for(const s of this.#s)s[3]?(e.push(...this.#l(s)),this.#o(s)):(this.#c(s),e.push(...this.#l(s)));return this.#i(e)}#i(e){const s=[],r=new Set;for(const o of e){const[l,c,u]=o;s.push([l,c,o],[l,u,o])}s.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=s.length;o<l;o+=2){const c=s[o][2],u=s[o+1][2];c.push(u),u.push(c),r.add(c),r.add(u)}const n=[];let i;for(;r.size>0;){const o=r.values().next().value;let[l,c,u,m,A]=o;r.delete(o);let g=l,p=c;for(i=[l,u],n.push(i);;){let v;if(r.has(m))v=m;else if(r.has(A))v=A;else break;r.delete(v),[l,c,u,m,A]=v,g!==l&&(i.push(g,p,l,p===c?c:u),g=l),p=p===c?u:c}i.push(g,p)}return new sq(n,this.#e,this.#t,this.#r)}#a(e){const s=this.#n;let r=0,n=s.length-1;for(;r<=n;){const i=r+n>>1,o=s[i][0];if(o===e)return i;o<e?r=i+1:n=i-1}return n+1}#o([,e,s]){const r=this.#a(e);this.#n.splice(r,0,[e,s])}#c([,e,s]){const r=this.#a(e);for(let n=r;n<this.#n.length;n++){const[i,o]=this.#n[n];if(i!==e)break;if(i===e&&o===s){this.#n.splice(n,1);return}}for(let n=r-1;n>=0;n--){const[i,o]=this.#n[n];if(i!==e)break;if(i===e&&o===s){this.#n.splice(n,1);return}}}#l(e){const[s,r,n]=e,i=[[s,r,n]],o=this.#a(n);for(let l=0;l<o;l++){const[c,u]=this.#n[l];for(let m=0,A=i.length;m<A;m++){const[,g,p]=i[m];if(!(u<=g||p<=c)){if(g>=c){if(p>u)i[m][1]=u;else{if(A===1)return[];i.splice(m,1),m--,A--}continue}i[m][2]=c,p>u&&i.push([s,u,p])}}}return i}}class sq extends Ds{#e;#t;constructor(e,s,r,n){super(),this.#t=e,this.#e=s,this.firstPoint=r,this.lastPoint=n}toSVGPath(){const e=[];for(const s of this.#t){let[r,n]=s;e.push(`M${r} ${n}`);for(let i=2;i<s.length;i+=2){const o=s[i],l=s[i+1];o===r?(e.push(`V${l}`),n=l):l===n&&(e.push(`H${o}`),r=o)}e.push("Z")}return e.join(" ")}serialize([e,s,r,n],i){const o=[],l=r-e,c=n-s;for(const u of this.#t){const m=new Array(u.length);for(let A=0;A<u.length;A+=2)m[A]=e+u[A]*l,m[A+1]=n-u[A+1]*c;o.push(m)}return o}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class Xj extends Qm{newFreeDrawOutline(e,s,r,n,i,o){return new rq(e,s,r,n,i,o)}}class rq extends vP{newOutliner(e,s,r,n,i,o=0){return new Xj(e,s,r,n,i,o)}}class Cn extends qs{#e=null;#t=0;#r;#s=null;#n=null;#i=null;#a=null;#o=0;#c=null;#l=null;#h=null;#u=!1;#m=null;#p=null;#f=null;#d="";#A;#g="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=dr.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Cn.prototype;return ar(this,"_keyboardManager",new y0([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Cn._defaultColor,this.#A=e.thickness||Cn._defaultThickness,this.opacity=e.opacity||Cn._defaultOpacity,this.#r=e.boxes||null,this.#g=e.methodOfCreation||"",this.#d=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#u=!0,this.#x(e),this.#y()):this.#r&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#a=e.focusNode,this.#o=e.focusOffset,this.#b(),this.#y(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#A,methodOfCreation:this.#g}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new Kj(this.#r,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const s=new Kj(this.#r,.0025,.001,this._uiManager.direction==="ltr");this.#i=s.getOutlines();const{firstPoint:r}=this.#l;this.#m=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height];const{lastPoint:n}=this.#i;this.#p=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#x({highlightOutlines:e,highlightId:s,clipPathId:r}){this.#l=e;const n=1.5;if(this.#i=e.getNewOutline(this.#A/2+n,.0025),s>=0)this.#h=s,this.#s=r,this.parent.drawLayer.finalizeDraw(s,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#f=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const A=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Cn.#j(this.#l.box,(A-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#f,{bbox:Cn.#j(this.#i.box,A),path:{d:this.#i.toSVGPath()}})}const[i,o,l,c]=e.box;switch(this.rotation){case 0:this.x=i,this.y=o,this.width=l,this.height=c;break;case 90:{const[A,g]=this.parentDimensions;this.x=o,this.y=1-i,this.width=l*g/A,this.height=c*A/g;break}case 180:this.x=1-i,this.y=1-o,this.width=l,this.height=c;break;case 270:{const[A,g]=this.parentDimensions;this.x=1-o,this.y=i,this.width=l*g/A,this.height=c*A/g;break}}const{firstPoint:u}=e;this.#m=[(u[0]-i)/l,(u[1]-o)/c];const{lastPoint:m}=this.#i;this.#p=[(m[0]-i)/l,(m[1]-o)/c]}static initialize(e,s){qs.initialize(e,s),Cn._defaultColor||=s.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,s){switch(e){case Tr.HIGHLIGHT_COLOR:Cn._defaultColor=s;break;case Tr.HIGHLIGHT_THICKNESS:Cn._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return this.#p}get commentButtonPosition(){return this.#m}updateParams(e,s){switch(e){case Tr.HIGHLIGHT_COLOR:this.#_(s);break;case Tr.HIGHLIGHT_THICKNESS:this.#N(s);break}}static get defaultPropertiesToUpdate(){return[[Tr.HIGHLIGHT_COLOR,Cn._defaultColor],[Tr.HIGHLIGHT_THICKNESS,Cn._defaultThickness]]}get propertiesToUpdate(){return[[Tr.HIGHLIGHT_COLOR,this.color||Cn._defaultColor],[Tr.HIGHLIGHT_THICKNESS,this.#A||Cn._defaultThickness],[Tr.HIGHLIGHT_FREE,this.#u]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#n?.updateColor(this.color),super.onUpdatedColor()}#_(e){const s=(i,o)=>{this.color=i,this.opacity=o,this.onUpdatedColor()},r=this.color,n=this.opacity;this.addCommands({cmd:s.bind(this,e,Cn._defaultOpacity),undo:s.bind(this,r,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Tr.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#N(e){const s=this.#A,r=n=>{this.#A=n,this.#v(n)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Tr.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#n=new Pl({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#S())}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,this.#S())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#k(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#y(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let s=!1;this.parent&&!e?this.#k():e&&(this.#y(e),s=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),s&&this.select()}#v(e){this.#u&&(this.#x({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())}#k(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#y(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#s}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#u},path:{d:this.#l.toSVGPath()}},!1,!0),this.#f=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#u),this.#c&&(this.#c.style.clipPath=this.#s))}static#j([e,s,r,n],i){switch(i){case 90:return[1-s-n,e,n,r];case 180:return[1-e-r,1-s-n,r,n];case 270:return[s,1-e-r,n,r]}return[e,s,r,n]}rotate(e){const{drawLayer:s}=this.parent;let r;this.#u?(e=(e-this.rotation+360)%360,r=Cn.#j(this.#l.box,e)):r=Cn.#j([this.x,this.y,this.width,this.height],e),s.updateProperties(this.#h,{bbox:r,root:{"data-main-rotation":e}}),s.updateProperties(this.#f,{bbox:Cn.#j(this.#i.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#d&&(e.setAttribute("aria-label",this.#d),e.setAttribute("role","mark")),this.#u?e.classList.add("free"):this.div.addEventListener("keydown",this.#E.bind(this),{signal:this._uiManager._signal});const s=this.#c=document.createElement("div");return e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=this.#s,this.setDims(),YT(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1}})}#E(e){Cn._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#B(!0);break;case 1:case 3:this.#B(!1);break}}#B(e){if(!this.#e)return;const s=window.getSelection();e?s.setPosition(this.#e,this.#t):s.setPosition(this.#a,this.#o)}select(){super.select(),this.#f&&this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{selected:!1}}),this.#u||this.#B(!1))}get _mustFixPosition(){return!this.#u}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!e}}))}#S(){return this.#u?this.rotation:0}#M(){if(this.#u)return null;const[e,s]=this.pageDimensions,[r,n]=this.pageTranslation,i=this.#r,o=new Float32Array(i.length*8);let l=0;for(const{x:c,y:u,width:m,height:A}of i){const g=c*e+r,p=(1-u)*s+n;o[l]=o[l+4]=g,o[l+1]=o[l+3]=p,o[l+2]=o[l+6]=g+m*e,o[l+5]=o[l+7]=p-A*s,l+=8}return o}#D(e){return this.#l.serialize(e,this.#S())}static startHighlighting(e,s,{target:r,x:n,y:i}){const{x:o,y:l,width:c,height:u}=r.getBoundingClientRect(),m=new AbortController,A=e.combinedSignal(m),g=p=>{m.abort(),this.#R(e,p)};window.addEventListener("blur",g,{signal:A}),window.addEventListener("pointerup",g,{signal:A}),window.addEventListener("pointerdown",xn,{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",Hl,{signal:A}),r.addEventListener("pointermove",this.#P.bind(this,e),{signal:A}),this._freeHighlight=new Xj({x:n,y:i},[o,l,c,u],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#P(e,s){this._freeHighlight.add(s)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#R(e,s){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,s,r){let n=null;if(e instanceof bP){const{data:{quadPoints:v,rect:b,rotation:y,id:w,color:B,opacity:j,popupRef:E,richText:S,contentsObj:T,creationDate:M,modificationDate:D},parent:{page:{pageNumber:P}}}=e;n=e={annotationType:dr.HIGHLIGHT,color:Array.from(B),opacity:j,quadPoints:v,boxes:null,pageIndex:P-1,rect:b.slice(0),rotation:y,annotationElementId:w,id:w,deleted:!1,popupRef:E,richText:S,comment:T?.str||null,creationDate:M,modificationDate:D}}else if(e instanceof T5){const{data:{inkLists:v,rect:b,rotation:y,id:w,color:B,borderStyle:{rawWidth:j},popupRef:E,richText:S,contentsObj:T,creationDate:M,modificationDate:D},parent:{page:{pageNumber:P}}}=e;n=e={annotationType:dr.HIGHLIGHT,color:Array.from(B),thickness:j,inkLists:v,boxes:null,pageIndex:P-1,rect:b.slice(0),rotation:y,annotationElementId:w,id:w,deleted:!1,popupRef:E,richText:S,comment:T?.str||null,creationDate:M,modificationDate:D}}const{color:i,quadPoints:o,inkLists:l,opacity:c}=e,u=await super.deserialize(e,s,r);u.color=ks.makeHexColor(...i),u.opacity=c||1,l&&(u.#A=e.thickness),u._initialData=n,e.comment&&u.setCommentData(e);const[m,A]=u.pageDimensions,[g,p]=u.pageTranslation;if(o){const v=u.#r=[];for(let b=0;b<o.length;b+=8)v.push({x:(o[b]-g)/m,y:1-(o[b+1]-p)/A,width:(o[b+2]-o[b])/m,height:(o[b+1]-o[b+5])/A});u.#b(),u.#y(),u.rotate(u.rotation)}else if(l){u.#u=!0;const v=l[0],b={x:v[0]-g,y:A-(v[1]-p)},y=new Xj(b,[0,0,m,A],1,u.#A/2,!0,.001);for(let j=0,E=v.length;j<E;j+=2)b.x=v[j]-g,b.y=A-(v[j+1]-p),y.add(b);const{id:w,clipPathId:B}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:y.toSVGPath()}},!0,!0);u.#x({highlightOutlines:y.getOutlines(),highlightId:w,clipPathId:B}),u.#y(),u.rotate(u.parentRotation)}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const s=qs._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(e);return Object.assign(r,{color:s,opacity:this.opacity,thickness:this.#A,quadPoints:this.#M(),outlines:this.#D(r.rect)}),this.addComment(r),this.annotationElementId&&!this.#I(r)?null:(r.id=this.annotationElementId,r)}#I(e){const{color:s}=this._initialData;return this.hasEditedComment||e.color.some((r,n)=>r!==s[n])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class wP{#e=Object.create(null);updateProperty(e,s){this[e]=s,this.updateSVGProperty(e,s)}updateProperties(e){if(e)for(const[s,r]of Object.entries(e))s.startsWith("_")||this.updateProperty(s,r)}updateSVGProperty(e,s){this.#e[e]=s}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){ta("Not implemented")}}class Kr extends qs{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#r=null;static#s=null;static#n=null;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#i(e),this.#c())}#i({drawOutlines:e,drawId:s,drawingOptions:r}){this.#e=e,this._drawingOptions||=r,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,e.defaultProperties)):this._drawId=this.#a(e,this.parent),this.#u(e.box)}#a(e,s){const{id:r}=s.drawLayer.draw(Kr._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r}static _mergeSVGProperties(e,s){const r=new Set(Object.keys(e));for(const[n,i]of Object.entries(s))r.has(n)?Object.assign(e[n],i):e[n]=i;return e}static getDefaultDrawingOptions(e){ta("Not implemented")}static get typesMap(){ta("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,s){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,s),this._currentParent&&(Kr.#r.updateProperty(r,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,s){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,s)}static get defaultPropertiesToUpdate(){const e=[],s=this._defaultDrawingOptions;for(const[r,n]of this.typesMap)e.push([r,s[n]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:s}=this;for(const[r,n]of this.constructor.typesMap)e.push([r,s[n]]);return e}_updateProperty(e,s,r){const n=this._drawingOptions,i=n[s],o=l=>{n.updateProperty(s,l);const c=this.#e.updateProperty(s,l);c&&this.#u(c),this.parent?.drawLayer.updateProperties(this._drawId,n.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,r),undo:o.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Kr._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#h()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Kr._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#h()),{bbox:this.#m()}))}_onTranslating(e,s){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Kr._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#h(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#u(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let s=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#o()):e&&(this._uiManager.addShouldRescale(this),this.#c(e),s=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),s&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#a(this.#e,e)}}#l([e,s,r,n]){const{parentDimensions:[i,o],rotation:l}=this;switch(l){case 90:return[s,1-e,r*(o/i),n*(i/o)];case 180:return[1-e,1-s,r,n];case 270:return[1-s,e,r*(o/i),n*(i/o)];default:return[e,s,r,n]}}#h(){const{x:e,y:s,width:r,height:n,parentDimensions:[i,o],rotation:l}=this;switch(l){case 90:return[1-s,e,r*(i/o),n*(o/i)];case 180:return[1-e,1-s,r,n];case 270:return[s,1-e,r*(i/o),n*(o/i)];default:return[e,s,r,n]}}#u(e){[this.x,this.y,this.width,this.height]=this.#l(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#m(){const{x:e,y:s,width:r,height:n,rotation:i,parentRotation:o,parentDimensions:[l,c]}=this;switch((i*4+o)/90){case 1:return[1-s-n,e,n,r];case 2:return[1-e-r,1-s-n,r,n];case 3:return[s,1-e-r,n,r];case 4:return[e,s-r*(l/c),n*(c/l),r*(l/c)];case 5:return[1-s,e,r*(l/c),n*(c/l)];case 6:return[1-e-n*(c/l),1-s,n*(c/l),r*(l/c)];case 7:return[s-r*(l/c),1-e-n*(c/l),r*(l/c),n*(c/l)];case 8:return[e-r,s-n,r,n];case 9:return[1-s,e-r,n,r];case 10:return[1-e,1-s,r,n];case 11:return[s-n,1-e,n,r];case 12:return[e-n*(c/l),s,n*(c/l),r*(l/c)];case 13:return[1-s-r*(l/c),e-n*(c/l),r*(l/c),n*(c/l)];case 14:return[1-e,1-s-r*(l/c),n*(c/l),r*(l/c)];case 15:return[s,1-e,r*(l/c),n*(c/l)];default:return[e,s,r,n]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Kr._mergeSVGProperties({bbox:this.#m()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,s;this._isCopy&&(e=this.x,s=this.y);const r=super.render();r.classList.add("draw");const n=document.createElement("div");return r.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,s),r}static createDrawerInstance(e,s,r,n,i){ta("Not implemented")}static startDrawing(e,s,r,n){const{target:i,offsetX:o,offsetY:l,pointerId:c,pointerType:u}=n;if(Jr.isInitializedAndDifferentPointerType(u))return;const{viewport:{rotation:m}}=e,{width:A,height:g}=i.getBoundingClientRect(),p=Kr.#s=new AbortController,v=e.combinedSignal(p);if(Jr.setPointer(u,c),window.addEventListener("pointerup",b=>{Jr.isSamePointerIdOrRemove(b.pointerId)&&this._endDraw(b)},{signal:v}),window.addEventListener("pointercancel",b=>{Jr.isSamePointerIdOrRemove(b.pointerId)&&this._currentParent.endDrawingSession()},{signal:v}),window.addEventListener("pointerdown",b=>{Jr.isSamePointerType(b.pointerType)&&(Jr.initializeAndAddPointerId(b.pointerId),Kr.#r.isCancellable()&&(Kr.#r.removeLastElement(),Kr.#r.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Hl,{signal:v}),i.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),i.addEventListener("touchmove",b=>{Jr.isSameTimeStamp(b.timeStamp)&&xn(b)},{signal:v}),e.toggleDrawing(),s._editorUndoBar?.hide(),Kr.#r){e.drawLayer.updateProperties(this._currentDrawId,Kr.#r.startNew(o,l,A,g,m));return}s.updateUIForDefaultProperties(this),Kr.#r=this.createDrawerInstance(o,l,A,g,m),Kr.#n=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Kr.#n.toSVGProperties(),Kr.#r.defaultSVGProperties),!0,!1)}static _drawMove(e){if(Jr.isSameTimeStamp(e.timeStamp),!Kr.#r)return;const{offsetX:s,offsetY:r,pointerId:n}=e;if(Jr.isSamePointerId(n)){if(Jr.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Kr.#r.add(s,r)),Jr.setTimeStamp(e.timeStamp),xn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Kr.#r=null,Kr.#n=null,Jr.clearTimeStamp()),Kr.#s&&(Kr.#s.abort(),Kr.#s=null,Jr.clearPointerIds())}static _endDraw(e){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),e?.target===s.div&&s.drawLayer.updateProperties(this._currentDrawId,Kr.#r.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=Kr.#r,n=this._currentDrawId,i=r.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(n,r.setLastElement(i))},undo:()=>{s.drawLayer.updateProperties(n,r.removeLastElement())},mustExec:!1,type:Tr.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Tr.DRAW_STEP),!Kr.#r.isEmpty()){const{pageDimensions:[r,n],scale:i}=s,o=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Kr.#r.getOutlines(r*i,n*i,i,this._INNER_MARGIN),drawingOptions:Kr.#n,mustBeCommitted:!e});return this._cleanup(!0),o}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,s,r,n,i,o){ta("Not implemented")}static async deserialize(e,s,r){const{rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:l}}=s.viewport,c=this.deserializeDraw(o,l,n,i,this._INNER_MARGIN,e),u=await super.deserialize(e,s,r);return u.createDrawingOptions(e),u.#i({drawOutlines:c}),u.#c(),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[s,r]=this.pageTranslation,[n,i]=this.pageDimensions;return this.#e.serialize([s,r,n,i],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class aq{#e=new Float64Array(6);#t;#r;#s;#n;#i;#a="";#o=0;#c=new v0;#l;#h;constructor(e,s,r,n,i,o){this.#l=r,this.#h=n,this.#s=i,this.#n=o,[e,s]=this.#u(e,s);const l=this.#t=[NaN,NaN,NaN,NaN,e,s];this.#i=[e,s],this.#r=[{line:l,points:this.#i}],this.#e.set(l,0)}updateProperty(e,s){e==="stroke-width"&&(this.#n=s)}#u(e,s){return Ds._normalizePoint(e,s,this.#l,this.#h,this.#s)}isEmpty(){return!this.#r||this.#r.length===0}isCancellable(){return this.#i.length<=10}add(e,s){[e,s]=this.#u(e,s);const[r,n,i,o]=this.#e.subarray(2,6),l=e-i,c=s-o;return Math.hypot(this.#l*l,this.#h*c)<=2?null:(this.#i.push(e,s),isNaN(r)?(this.#e.set([i,o,e,s],2),this.#t.push(NaN,NaN,NaN,NaN,e,s),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([r,n,i,o,e,s],0),this.#t.push(...Ds.createBezierPoints(r,n,i,o,e,s)),{path:{d:this.toSVGPath()}}))}end(e,s){const r=this.add(e,s);return r||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,s,r,n,i){this.#l=r,this.#h=n,this.#s=i,[e,s]=this.#u(e,s);const o=this.#t=[NaN,NaN,NaN,NaN,e,s];this.#i=[e,s];const l=this.#r.at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),this.#r.push({line:o,points:this.#i}),this.#e.set(o,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#r.at(-1)}setLastElement(e){return this.#r?(this.#r.push(e),this.#t=e.line,this.#i=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#r)return this.#c.removeLastElement();this.#r.pop(),this.#a="";for(let e=0,s=this.#r.length;e<s;e++){const{line:r,points:n}=this.#r[e];this.#t=r,this.#i=n,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const e=Ds.svgRound(this.#t[4]),s=Ds.svgRound(this.#t[5]);if(this.#i.length===2)return this.#a=`${this.#a} M ${e} ${s} Z`,this.#a;if(this.#i.length<=6){const n=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,n)} M ${e} ${s}`,this.#o=6}if(this.#i.length===4){const n=Ds.svgRound(this.#t[10]),i=Ds.svgRound(this.#t[11]);return this.#a=`${this.#a} L ${n} ${i}`,this.#o=12,this.#a}const r=[];this.#o===0&&(r.push(`M ${e} ${s}`),this.#o=6);for(let n=this.#o,i=this.#t.length;n<i;n+=6){const[o,l,c,u,m,A]=this.#t.slice(n,n+6).map(Ds.svgRound);r.push(`C${o} ${l} ${c} ${u} ${m} ${A}`)}return this.#a+=r.join(" "),this.#o=this.#t.length,this.#a}getOutlines(e,s,r,n){const i=this.#r.at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),this.#c.build(this.#r,e,s,r,this.#s,this.#n,n),this.#e=null,this.#t=null,this.#r=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class v0 extends Ds{#e;#t=0;#r;#s;#n;#i;#a;#o;#c;build(e,s,r,n,i,o,l){this.#n=s,this.#i=r,this.#a=n,this.#o=i,this.#c=o,this.#r=l??0,this.#s=e,this.#u()}get thickness(){return this.#c}setLastElement(e){return this.#s.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#s.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:s}of this.#s){if(e.push(`M${Ds.svgRound(s[4])} ${Ds.svgRound(s[5])}`),s.length===6){e.push("Z");continue}if(s.length===12&&isNaN(s[6])){e.push(`L${Ds.svgRound(s[10])} ${Ds.svgRound(s[11])}`);continue}for(let r=6,n=s.length;r<n;r+=6){const[i,o,l,c,u,m]=s.subarray(r,r+6).map(Ds.svgRound);e.push(`C${i} ${o} ${l} ${c} ${u} ${m}`)}}return e.join("")}serialize([e,s,r,n],i){const o=[],l=[],[c,u,m,A]=this.#h();let g,p,v,b,y,w,B,j,E;switch(this.#o){case 0:E=Ds._rescale,g=e,p=s+n,v=r,b=-n,y=e+c*r,w=s+(1-u-A)*n,B=e+(c+m)*r,j=s+(1-u)*n;break;case 90:E=Ds._rescaleAndSwap,g=e,p=s,v=r,b=n,y=e+u*r,w=s+c*n,B=e+(u+A)*r,j=s+(c+m)*n;break;case 180:E=Ds._rescale,g=e+r,p=s,v=-r,b=n,y=e+(1-c-m)*r,w=s+u*n,B=e+(1-c)*r,j=s+(u+A)*n;break;case 270:E=Ds._rescaleAndSwap,g=e+r,p=s+n,v=-r,b=-n,y=e+(1-u-A)*r,w=s+(1-c-m)*n,B=e+(1-u)*r,j=s+(1-c)*n;break}for(const{line:S,points:T}of this.#s)o.push(E(S,g,p,v,b,i?new Array(S.length):null)),l.push(E(T,g,p,v,b,i?new Array(T.length):null));return{lines:o,points:l,rect:[y,w,B,j]}}static deserialize(e,s,r,n,i,{paths:{lines:o,points:l},rotation:c,thickness:u}){const m=[];let A,g,p,v,b;switch(c){case 0:b=Ds._rescale,A=-e/r,g=s/n+1,p=1/r,v=-1/n;break;case 90:b=Ds._rescaleAndSwap,A=-s/n,g=-e/r,p=1/n,v=1/r;break;case 180:b=Ds._rescale,A=e/r+1,g=-s/n,p=-1/r,v=1/n;break;case 270:b=Ds._rescaleAndSwap,A=s/n+1,g=e/r+1,p=-1/n,v=-1/r;break}if(!o){o=[];for(const w of l){const B=w.length;if(B===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(B===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const j=new Float32Array(3*(B-2));o.push(j);let[E,S,T,M]=w.subarray(0,4);j.set([NaN,NaN,NaN,NaN,E,S],0);for(let D=4;D<B;D+=2){const P=w[D],Y=w[D+1];j.set(Ds.createBezierPoints(E,S,T,M,P,Y),(D-2)*3),[E,S,T,M]=[T,M,P,Y]}}}for(let w=0,B=o.length;w<B;w++)m.push({line:b(o[w].map(j=>j??NaN),A,g,p,v),points:b(l[w].map(j=>j??NaN),A,g,p,v)});const y=new this.prototype.constructor;return y.build(m,r,n,1,c,u,i),y}#l(e=this.#c){const s=this.#r+e/2*this.#a;return this.#o%180===0?[s/this.#n,s/this.#i]:[s/this.#i,s/this.#n]}#h(){const[e,s,r,n]=this.#e,[i,o]=this.#l(0);return[e+i,s+o,r-2*i,n-2*o]}#u(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:n}of this.#s){if(n.length<=12){for(let l=4,c=n.length;l<c;l+=6)ks.pointBoundingBox(n[l],n[l+1],e);continue}let i=n[4],o=n[5];for(let l=6,c=n.length;l<c;l+=6){const[u,m,A,g,p,v]=n.subarray(l,l+6);ks.bezierBoundingBox(i,o,u,m,A,g,p,v,e),i=p,o=v}}const[s,r]=this.#l();e[0]=Bi(e[0]-s,0,1),e[1]=Bi(e[1]-r,0,1),e[2]=Bi(e[2]+s,0,1),e[3]=Bi(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,s){return e==="stroke-width"?this.#m(s):null}#m(e){const[s,r]=this.#l();this.#c=e;const[n,i]=this.#l(),[o,l]=[n-s,i-r],c=this.#e;return c[0]-=o,c[1]-=l,c[2]+=2*o,c[3]+=2*l,c}updateParentDimensions([e,s],r){const[n,i]=this.#l();this.#n=e,this.#i=s,this.#a=r;const[o,l]=this.#l(),c=o-n,u=l-i,m=this.#e;return m[0]-=c,m[1]-=u,m[2]+=2*c,m[3]+=2*u,m}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(Ds.svgRound).join(" ")}get defaultProperties(){const[e,s]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ds.svgRound(e)} ${Ds.svgRound(s)}`}}}get rotationTransform(){const[,,e,s]=this.#e;let r=0,n=0,i=0,o=0,l=0,c=0;switch(this.#t){case 90:n=s/e,i=-e/s,l=e;break;case 180:r=-1,o=-1,l=e,c=s;break;case 270:n=-s/e,i=e/s,c=s;break;default:return""}return`matrix(${r} ${n} ${i} ${o} ${Ds.svgRound(l)} ${Ds.svgRound(c)})`}getPathResizingSVGProperties([e,s,r,n]){const[i,o]=this.#l(),[l,c,u,m]=this.#e;if(Math.abs(u-i)<=Ds.PRECISION||Math.abs(m-o)<=Ds.PRECISION){const b=e+r/2-(l+u/2),y=s+n/2-(c+m/2);return{path:{"transform-origin":`${Ds.svgRound(e)} ${Ds.svgRound(s)}`,transform:`${this.rotationTransform} translate(${b} ${y})`}}}const A=(r-2*i)/(u-2*i),g=(n-2*o)/(m-2*o),p=u/r,v=m/n;return{path:{"transform-origin":`${Ds.svgRound(l)} ${Ds.svgRound(c)}`,transform:`${this.rotationTransform} scale(${p} ${v}) translate(${Ds.svgRound(i)} ${Ds.svgRound(o)}) scale(${A} ${g}) translate(${Ds.svgRound(-i)} ${Ds.svgRound(-o)})`}}}getPathResizedSVGProperties([e,s,r,n]){const[i,o]=this.#l(),l=this.#e,[c,u,m,A]=l;if(l[0]=e,l[1]=s,l[2]=r,l[3]=n,Math.abs(m-i)<=Ds.PRECISION||Math.abs(A-o)<=Ds.PRECISION){const y=e+r/2-(c+m/2),w=s+n/2-(u+A/2);for(const{line:B,points:j}of this.#s)Ds._translate(B,y,w,B),Ds._translate(j,y,w,j);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ds.svgRound(e)} ${Ds.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(r-2*i)/(m-2*i),p=(n-2*o)/(A-2*o),v=-g*(c+i)+e+i,b=-p*(u+o)+s+o;if(g!==1||p!==1||v!==0||b!==0)for(const{line:y,points:w}of this.#s)Ds._rescale(y,v,b,g,p,y),Ds._rescale(w,v,b,g,p,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ds.svgRound(e)} ${Ds.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,s],r){const[n,i]=r,o=this.#e,l=e-o[0],c=s-o[1];if(this.#n===n&&this.#i===i)for(const{line:u,points:m}of this.#s)Ds._translate(u,l,c,u),Ds._translate(m,l,c,m);else{const u=this.#n/n,m=this.#i/i;this.#n=n,this.#i=i;for(const{line:A,points:g}of this.#s)Ds._rescale(A,l,c,u,m,A),Ds._rescale(g,l,c,u,m,g);o[2]*=u,o[3]*=m}return o[0]=e,o[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ds.svgRound(e)} ${Ds.svgRound(s)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ds.svgRound(e[0])} ${Ds.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class kw extends wP{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:qs._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,s){e==="stroke-width"&&(s??=this["stroke-width"],s*=this._viewParameters.realScale),super.updateSVGProperty(e,s)}clone(){const e=new kw(this._viewParameters);return e.updateAll(this),e}}class I5 extends Kr{static _type="ink";static _editorType=dr.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,s){qs.initialize(e,s),this._defaultDrawingOptions=new kw(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return ar(this,"typesMap",new Map([[Tr.INK_THICKNESS,"stroke-width"],[Tr.INK_COLOR,"stroke"],[Tr.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,s,r,n,i){return new aq(e,s,r,n,i,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,s,r,n,i,o){return v0.deserialize(e,s,r,n,i,o)}static async deserialize(e,s,r){let n=null;if(e instanceof T5){const{data:{inkLists:o,rect:l,rotation:c,id:u,color:m,opacity:A,borderStyle:{rawWidth:g},popupRef:p,richText:v,contentsObj:b,creationDate:y,modificationDate:w},parent:{page:{pageNumber:B}}}=e;n=e={annotationType:dr.INK,color:Array.from(m),thickness:g,opacity:A,paths:{points:o},boxes:null,pageIndex:B-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:p,richText:v,comment:b?.str||null,creationDate:y,modificationDate:w}}const i=await super.deserialize(e,s,r);return i._initialData=n,e.comment&&i.setCommentData(e),i}get toolbarButtons(){return this._colorPicker||=new Vx(this),[["colorPicker",this._colorPicker]]}get colorType(){return Tr.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:s,parent:r}=this;s.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:s,opacity:r}){this._drawingOptions=I5.getDefaultDrawingOptions({stroke:ks.makeHexColor(...e),"stroke-width":s,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:r}=this.serializeDraw(e),{_drawingOptions:{stroke:n,"stroke-opacity":i,"stroke-width":o}}=this,l=Object.assign(super.serialize(e),{color:qs._colorManager.convert(n),opacity:i,thickness:o,paths:{lines:s,points:r}});return this.addComment(l),e?(l.isCopy=!0,l):this.annotationElementId&&!this.#e(l)?null:(l.id=this.annotationElementId,l)}#e(e){const{color:s,thickness:r,opacity:n,pageIndex:i}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((o,l)=>o!==s[l])||e.thickness!==r||e.opacity!==n||e.pageIndex!==i}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:s,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:s,popup:this.comment}),null}}class Jj extends v0{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Tb=8,Qg=3;class Mf{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,s,r,n){return r-=e,n-=s,r===0?n>0?0:4:r===1?n+6:2-n}static#r=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#s(e,s,r,n,i,o,l){const c=this.#t(r,n,i,o);for(let u=0;u<8;u++){const m=(-u+c-l+16)%8,A=this.#r[2*m],g=this.#r[2*m+1];if(e[(r+A)*s+(n+g)]!==0)return m}return-1}static#n(e,s,r,n,i,o,l){const c=this.#t(r,n,i,o);for(let u=0;u<8;u++){const m=(u+c+l+16)%8,A=this.#r[2*m],g=this.#r[2*m+1];if(e[(r+A)*s+(n+g)]!==0)return m}return-1}static#i(e,s,r,n){const i=e.length,o=new Int32Array(i);for(let m=0;m<i;m++)o[m]=e[m]<=n?1:0;for(let m=1;m<r-1;m++)o[m*s]=o[m*s+s-1]=0;for(let m=0;m<s;m++)o[m]=o[s*r-1-m]=0;let l=1,c;const u=[];for(let m=1;m<r-1;m++){c=1;for(let A=1;A<s-1;A++){const g=m*s+A,p=o[g];if(p===0)continue;let v=m,b=A;if(p===1&&o[g-1]===0)l+=1,b-=1;else if(p>=1&&o[g+1]===0)l+=1,b+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const y=[A,m],w=b===A+1,B={isHole:w,points:y,id:l,parent:0};u.push(B);let j;for(const Q of u)if(Q.id===c){j=Q;break}j?j.isHole?B.parent=w?j.parent:c:B.parent=w?c:j.parent:B.parent=w?c:0;const E=this.#s(o,s,m,A,v,b,0);if(E===-1){o[g]=-l,o[g]!==1&&(c=Math.abs(o[g]));continue}let S=this.#r[2*E],T=this.#r[2*E+1];const M=m+S,D=A+T;v=M,b=D;let P=m,Y=A;for(;;){const Q=this.#n(o,s,P,Y,v,b,1);S=this.#r[2*Q],T=this.#r[2*Q+1];const L=P+S,ae=Y+T;y.push(ae,L);const ne=P*s+Y;if(o[ne+1]===0?o[ne]=-l:o[ne]===1&&(o[ne]=l),L===m&&ae===A&&P===M&&Y===D){o[g]!==1&&(c=Math.abs(o[g]));break}else v=P,b=Y,P=L,Y=ae}}}return u}static#a(e,s,r,n){if(r-s<=4){for(let M=s;M<r-2;M+=2)n.push(e[M],e[M+1]);return}const i=e[s],o=e[s+1],l=e[r-4]-i,c=e[r-3]-o,u=Math.hypot(l,c),m=l/u,A=c/u,g=m*o-A*i,p=c/l,v=1/u,b=Math.atan(p),y=Math.cos(b),w=Math.sin(b),B=v*(Math.abs(y)+Math.abs(w)),j=v*(1-B+B**2),E=Math.max(Math.atan(Math.abs(w+y)*j),Math.atan(Math.abs(w-y)*j));let S=0,T=s;for(let M=s+2;M<r-2;M+=2){const D=Math.abs(g-m*e[M+1]+A*e[M]);D>S&&(T=M,S=D)}S>(u*E)**2?(this.#a(e,s,T+2,n),this.#a(e,T,r,n)):n.push(i,o)}static#o(e){const s=[],r=e.length;return this.#a(e,0,r,s),s.push(e[r-2],e[r-1]),s.length<=4?null:s}static#c(e,s,r,n,i,o){const l=new Float32Array(o**2),c=-2*n**2,u=o>>1;for(let b=0;b<o;b++){const y=(b-u)**2;for(let w=0;w<o;w++)l[b*o+w]=Math.exp((y+(w-u)**2)/c)}const m=new Float32Array(256),A=-2*i**2;for(let b=0;b<256;b++)m[b]=Math.exp(b**2/A);const g=e.length,p=new Uint8Array(g),v=new Uint32Array(256);for(let b=0;b<r;b++)for(let y=0;y<s;y++){const w=b*s+y,B=e[w];let j=0,E=0;for(let T=0;T<o;T++){const M=b+T-u;if(!(M<0||M>=r))for(let D=0;D<o;D++){const P=y+D-u;if(P<0||P>=s)continue;const Y=e[M*s+P],Q=l[T*o+D]*m[Math.abs(Y-B)];j+=Y*Q,E+=Q}}const S=p[w]=Math.round(j/E);v[S]++}return[p,v]}static#l(e){const s=new Uint32Array(256);for(const r of e)s[r]++;return s}static#h(e){const s=e.length,r=new Uint8ClampedArray(s>>2);let n=-1/0,i=1/0;for(let l=0,c=r.length;l<c;l++){const u=r[l]=e[l<<2];n=Math.max(n,u),i=Math.min(i,u)}const o=255/(n-i);for(let l=0,c=r.length;l<c;l++)r[l]=(r[l]-i)*o;return r}static#u(e){let s,r=-1/0,n=-1/0;const i=e.findIndex(c=>c!==0);let o=i,l=i;for(s=i;s<256;s++){const c=e[s];c>r&&(s-o>n&&(n=s-o,l=s-1),r=c,o=s)}for(s=l-1;s>=0&&!(e[s]>e[s+1]);s--);return s}static#m(e){const s=e,{width:r,height:n}=e,{maxDim:i}=this.#e;let o=r,l=n;if(r>i||n>i){let g=r,p=n,v=Math.log2(Math.max(r,n)/i);const b=Math.floor(v);v=v===b?b-1:b;for(let w=0;w<v;w++){o=Math.ceil(g/2),l=Math.ceil(p/2);const B=new OffscreenCanvas(o,l);B.getContext("2d").drawImage(e,0,0,g,p,0,0,o,l),g=o,p=l,e!==s&&e.close(),e=B.transferToImageBitmap()}const y=Math.min(i/o,i/l);o=Math.round(o*y),l=Math.round(l*y)}const u=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,l),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,l);const m=u.getImageData(0,0,o,l).data;return[this.#h(m),o,l]}static extractContoursFromText(e,{fontFamily:s,fontStyle:r,fontWeight:n},i,o,l,c){let u=new OffscreenCanvas(1,1),m=u.getContext("2d",{alpha:!1});const A=200,g=m.font=`${r} ${n} ${A}px ${s}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:v,actualBoundingBoxAscent:b,actualBoundingBoxDescent:y,fontBoundingBoxAscent:w,fontBoundingBoxDescent:B,width:j}=m.measureText(e),E=1.5,S=Math.ceil(Math.max(Math.abs(p)+Math.abs(v)||0,j)*E),T=Math.ceil(Math.max(Math.abs(b)+Math.abs(y)||A,Math.abs(w)+Math.abs(B)||A)*E);u=new OffscreenCanvas(S,T),m=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=g,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,S,T),m.fillStyle="black",m.fillText(e,S*(E-1)/2,T*(3-E)/2);const M=this.#h(m.getImageData(0,0,S,T).data),D=this.#l(M),P=this.#u(D),Y=this.#i(M,S,T,P);return this.processDrawnLines({lines:{curves:Y,width:S,height:T},pageWidth:i,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,s,r,n,i){const[o,l,c]=this.#m(e),[u,m]=this.#c(o,l,c,Math.hypot(l,c)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),A=this.#u(m),g=this.#i(u,l,c,A);return this.processDrawnLines({lines:{curves:g,width:l,height:c},pageWidth:s,pageHeight:r,rotation:n,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:s,pageHeight:r,rotation:n,innerMargin:i,mustSmooth:o,areContours:l}){n%180!==0&&([s,r]=[r,s]);const{curves:c,width:u,height:m}=e,A=e.thickness??0,g=[],p=Math.min(s/u,r/m),v=p/s,b=p/r,y=[];for(const{points:B}of c){const j=o?this.#o(B):B;if(!j)continue;y.push(j);const E=j.length,S=new Float32Array(E),T=new Float32Array(3*(E===2?2:E-2));if(g.push({line:T,points:S}),E===2){S[0]=j[0]*v,S[1]=j[1]*b,T.set([NaN,NaN,NaN,NaN,S[0],S[1]],0);continue}let[M,D,P,Y]=j;M*=v,D*=b,P*=v,Y*=b,S.set([M,D,P,Y],0),T.set([NaN,NaN,NaN,NaN,M,D],0);for(let Q=4;Q<E;Q+=2){const L=S[Q]=j[Q]*v,ae=S[Q+1]=j[Q+1]*b;T.set(Ds.createBezierPoints(M,D,P,Y,L,ae),(Q-2)*3),[M,D,P,Y]=[P,Y,L,ae]}}if(g.length===0)return null;const w=l?new Jj:new v0;return w.build(g,s,r,1,n,l?0:A,i),{outline:w,newCurves:y,areContours:l,thickness:A,width:u,height:m}}static async compressSignature({outlines:e,areContours:s,thickness:r,width:n,height:i}){let o=1/0,l=-1/0,c=0;for(const j of e){c+=j.length;for(let E=2,S=j.length;E<S;E++){const T=j[E]-j[E-2];o=Math.min(o,T),l=Math.max(l,T)}}let u;o>=-128&&l<=127?u=Int8Array:o>=-32768&&l<=32767?u=Int16Array:u=Int32Array;const m=e.length,A=Tb+Qg*m,g=new Uint32Array(A);let p=0;g[p++]=A*Uint32Array.BYTES_PER_ELEMENT+(c-2*m)*u.BYTES_PER_ELEMENT,g[p++]=0,g[p++]=n,g[p++]=i,g[p++]=s?0:1,g[p++]=Math.max(0,Math.floor(r??0)),g[p++]=m,g[p++]=u.BYTES_PER_ELEMENT;for(const j of e)g[p++]=j.length-2,g[p++]=j[0],g[p++]=j[1];const v=new CompressionStream("deflate-raw"),b=v.writable.getWriter();await b.ready,b.write(g);const y=u.prototype.constructor;for(const j of e){const E=new y(j.length-2);for(let S=2,T=j.length;S<T;S++)E[S-2]=j[S]-j[S-2];b.write(E)}b.close();const w=await new Response(v.readable).arrayBuffer();return new Uint8Array(w).toBase64()}static async decompressSignature(e){try{const s=Uint8Array.fromBase64(e),{readable:r,writable:n}=new DecompressionStream("deflate-raw"),i=n.getWriter();await i.ready,i.write(s).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,l=0;for await(const j of r)o||=new Uint8Array(new Uint32Array(j.buffer,0,4)[0]),o.set(j,l),l+=j.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const m=c[2],A=c[3],g=c[4]===0,p=c[5],v=c[6],b=c[7],y=[],w=(Tb+Qg*v)*Uint32Array.BYTES_PER_ELEMENT;let B;switch(b){case Int8Array.BYTES_PER_ELEMENT:B=new Int8Array(o.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:B=new Int16Array(o.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:B=new Int32Array(o.buffer,w);break}l=0;for(let j=0;j<v;j++){const E=c[Qg*j+Tb],S=new Float32Array(E+2);y.push(S);for(let T=0;T<Qg-1;T++)S[T]=c[Qg*j+Tb+T+1];for(let T=0;T<E;T++)S[T+2]=S[T]+B[l++]}return{areContours:g,thickness:p,outlines:y,width:m,height:A}}catch(s){return rr(`decompressSignature: ${s}`),null}}}class L5 extends wP{constructor(){super(),super.updateProperties({fill:qs._defaultLineColor,"stroke-width":0})}clone(){const e=new L5;return e.updateAll(this),e}}class M5 extends kw{constructor(e){super(e),super.updateProperties({stroke:qs._defaultLineColor,"stroke-width":1})}clone(){const e=new M5(this._viewParameters);return e.updateAll(this),e}}class id extends Kr{#e=!1;#t=null;#r=null;#s=null;static _type="signature";static _editorType=dr.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#r=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,s){qs.initialize(e,s),this._defaultDrawingOptions=new L5,this._defaultDrawnSignatureOptions=new M5(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return ar(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const s=e.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,s;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,s=this.y),super.render(),this._drawId===null)if(this.#r){const{lines:n,mustSmooth:i,areContours:o,description:l,uuid:c,heightInPage:u}=this.#r,{rawDims:{pageWidth:m,pageHeight:A},rotation:g}=this.parent.viewport,p=Mf.processDrawnLines({lines:n,pageWidth:m,pageHeight:A,rotation:g,innerMargin:id._INNER_MARGIN,mustSmooth:i,areContours:o});this.addSignature(p,u,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(e,s)),this.div}setUuid(e){this.#s=e,this.addEditToolbar()}getUuid(){return this.#s}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(s=>{s?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:s,thickness:r,width:n,height:i}=this.#r,o=Math.max(n,i),l=Mf.processDrawnLines({lines:{curves:e.map(c=>({points:c})),thickness:r,width:n,height:i},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,s,r,n){const{x:i,y:o}=this,{outline:l}=this.#r=e;this.#e=l instanceof Jj,this.description=r;let c;this.#e?c=id.getDefaultDrawingOptions():(c=id._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[,u]=this.pageDimensions;let m=s/u;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(),this.x=i,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(n),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!n,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:s,pageHeight:r},rotation:n}=this.parent.viewport;return Mf.process(e,s,r,n,id._INNER_MARGIN)}getFromText(e,s){const{rawDims:{pageWidth:r,pageHeight:n},rotation:i}=this.parent.viewport;return Mf.extractContoursFromText(e,s,r,n,i,id._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:s,pageHeight:r},rotation:n}=this.parent.viewport;return Mf.processDrawnLines({lines:e,pageWidth:s,pageHeight:r,rotation:n,innerMargin:id._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:s}){e?this._drawingOptions=id.getDefaultDrawingOptions():(this._drawingOptions=id._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:s,points:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":n}}=this,i=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:n});return this.addComment(i),e?(i.paths={lines:s,points:r},i.uuid=this.#s,i.isCopy=!0):i.lines=s,this.#t&&(i.accessibilityData={type:"Figure",alt:this.#t}),i}static deserializeDraw(e,s,r,n,i,o){return o.areContours?Jj.deserialize(e,s,r,n,i,o):v0.deserialize(e,s,r,n,i,o)}static async deserialize(e,s,r){const n=await super.deserialize(e,s,r);return n.#e=e.areContours,n.description=e.accessibilityData?.alt||"",n.#s=e.uuid,n}}class nq extends qs{#e=null;#t=null;#r=null;#s=null;#n=null;#i="";#a=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=dr.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#s=e.bitmapUrl,this.#n=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,s){qs.initialize(e,s)}static isHandlingMimeForPasting(e){return Vj.includes(e)}static paste(e,s){s.pasteEditor({mode:dr.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const s=e.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}#u(e,s=!1){if(!e){this.remove();return}this.#e=e.bitmap,s||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#i=e.file.name),this.#f()}#m(){if(this.#r=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:n,width:i,height:o}=e||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:n,width:i,height:o,channels:n.length/(i*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),s&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}#p(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#u(r,!0)).finally(()=>this.#m());return}if(this.#s){const r=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromUrl(r).then(n=>this.#u(n)).finally(()=>this.#m());return}if(this.#n){const r=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromFile(r).then(n=>this.#u(n)).finally(()=>this.#m());return}const e=document.createElement("input");e.type="file",e.accept=Vj.join(",");const s=this._uiManager._signal;this.#r=new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const n=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(n)}r()},{signal:s}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>this.#m()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#p();return}super.rebuild(),this.div!==null&&(this.#t&&this.#a===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#r||this.#e||this.#s||this.#n||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;return this._isCopy&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#f():this.#p()),this._isCopy&&this._moveAfterPaste(e,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,s){const{id:r,bitmap:n}=this._uiManager.imageManager.getFromCanvas(e,s);s.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(this.#t=r,n&&(this.#e=n),this.#o=!1,this.#f())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#A()},e)}#f(){const{div:e}=this;let{width:s,height:r}=this.#e;const[n,i]=this.pageDimensions,o=.75;if(this.width)s=this.width*n,r=this.height*i;else if(s>o*n||r>o*i){const c=Math.min(o*n/s,o*i/r);s*=c,r*=c}this._uiManager.enableWaiting(!1);const l=this.#a=document.createElement("canvas");l.setAttribute("role","img"),this.addContainer(l),this.width=s/n,this.height=r/i,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#A(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,s,r=!1){e||(e=224);const{width:n,height:i}=this.#e,o=new _d;let l=this.#e,c=n,u=i,m=null;if(s){if(n>s||i>s){const T=Math.min(s/n,s/i);c=Math.floor(n*T),u=Math.floor(i*T)}m=document.createElement("canvas");const g=m.width=Math.ceil(c*o.sx),p=m.height=Math.ceil(u*o.sy);this.#l||(l=this.#d(g,p));const v=m.getContext("2d");v.filter=this._uiManager.hcmFilter;let b="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":Cz.isDarkMode&&(b="#8f8f9d",y="#42414d");const w=15,B=w*o.sx,j=w*o.sy,E=new OffscreenCanvas(B*2,j*2),S=E.getContext("2d");S.fillStyle=b,S.fillRect(0,0,B*2,j*2),S.fillStyle=y,S.fillRect(0,0,B,j),S.fillRect(B,j,B,j),v.fillStyle=v.createPattern(E,"repeat"),v.fillRect(0,0,g,p),v.drawImage(l,0,0,l.width,l.height,0,0,g,p)}let A=null;if(r){let g,p;if(o.symmetric&&l.width<e&&l.height<e)g=l.width,p=l.height;else if(l=this.#e,n>e||i>e){const y=Math.min(e/n,e/i);g=Math.floor(n*y),p=Math.floor(i*y),this.#l||(l=this.#d(g,p))}const b=new OffscreenCanvas(g,p).getContext("2d",{willReadFrequently:!0});b.drawImage(l,0,0,l.width,l.height,0,0,g,p),A={width:g,height:p,data:b.getImageData(0,0,g,p).data}}return{canvas:m,width:c,height:u,imageData:A}}#d(e,s){const{width:r,height:n}=this.#e;let i=r,o=n,l=this.#e;for(;i>2*e||o>2*s;){const c=i,u=o;i>2*e&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),o>2*s&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const m=new OffscreenCanvas(i,o);m.getContext("2d").drawImage(l,0,0,c,u,0,0,i,o),l=m.transferToImageBitmap()}return l}#A(){const[e,s]=this.parentDimensions,{width:r,height:n}=this,i=new _d,o=Math.ceil(r*e*i.sx),l=Math.ceil(n*s*i.sy),c=this.#a;if(!c||c.width===o&&c.height===l)return;c.width=o,c.height=l;const u=this.#l?this.#e:this.#d(o,l),m=c.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(u,0,0,u.width,u.height,0,0,o,l)}#g(e){if(e){if(this.#l){const n=this._uiManager.imageManager.getSvgUrl(this.#t);if(n)return n}const s=document.createElement("canvas");return{width:s.width,height:s.height}=this.#e,s.getContext("2d").drawImage(this.#e,0,0),s.toDataURL()}if(this.#l){const[s,r]=this.pageDimensions,n=Math.round(this.width*s*gp.PDF_TO_CSS_UNITS),i=Math.round(this.height*r*gp.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(n,i);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,n,i),o.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,s,r){let n=null,i=!1;if(e instanceof yP){const{data:{rect:b,rotation:y,id:w,structParent:B,popupRef:j,richText:E,contentsObj:S,creationDate:T,modificationDate:M},container:D,parent:{page:{pageNumber:P}},canvas:Y}=e;let Q,L;Y?(delete e.canvas,{id:Q,bitmap:L}=r.imageManager.getFromCanvas(D.id,Y),Y.remove()):(i=!0,e._hasNoCanvas=!0);const ae=(await s._structTree.getAriaAttributes(`${zf}${w}`))?.get("aria-label")||"";n=e={annotationType:dr.STAMP,bitmapId:Q,bitmap:L,pageIndex:P-1,rect:b.slice(0),rotation:y,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:ae},isSvg:!1,structParent:B,popupRef:j,richText:E,comment:S?.str||null,creationDate:T,modificationDate:M}}const o=await super.deserialize(e,s,r),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:m,isSvg:A,accessibilityData:g}=e;i?(r.addMissingCanvas(e.id,o),o.#o=!0):m&&r.imageManager.isValidId(m)?(o.#t=m,c&&(o.#e=c)):o.#s=u,o.#l=A;const[p,v]=o.pageDimensions;return o.width=(l[2]-l[0])/p,o.height=(l[3]-l[1])/v,g&&(o.altTextData=g),o._initialData=n,e.comment&&o.setCommentData(e),o.#h=!!n,o}serialize(e=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(r),e)return r.bitmapUrl=this.#g(!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:n,altText:i}=this.serializeAltText(!1);if(!n&&i&&(r.accessibilityData={type:"Figure",alt:i}),this.annotationElementId){const l=this.#b(r);return l.isSame?null:(l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(s===null)return r;s.stamps||=new Map;const o=this.#l?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(this.#t))s.stamps.set(this.#t,{area:o,serialized:r}),r.bitmap=this.#g(!1);else if(this.#l){const l=s.stamps.get(this.#t);o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=this.#g(!1))}return r}#b(e){const{pageIndex:s,accessibilityData:{altText:r}}=this._initialData,n=e.pageIndex===s,i=(e.accessibilityData?.alt||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&n&&i,isSameAltText:i}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class uu{#e;#t=!1;#r=null;#s=null;#n=null;#i=new Map;#a=!1;#o=!1;#c=!1;#l=null;#h=null;#u=null;#m=null;#p=null;#f=-1;#d;static _initialized=!1;static#A=new Map([pi,I5,nq,Cn,id].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:s,div:r,structTreeLayer:n,accessibilityManager:i,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:m}){const A=[...uu.#A.values()];if(!uu._initialized){uu._initialized=!0;for(const g of A)g.initialize(m,e)}e.registerEditorTypes(A),this.#d=e,this.pageIndex=s,this.div=r,this.#e=i,this.#r=o,this.viewport=u,this.#u=c,this.drawLayer=l,this._structTree=n,this.#d.addLayer(this)}updatePageIndex(e){this.pageIndex=e}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#d.getMode()===dr.NONE}updateToolbar(e){this.#d.updateToolbar(e)}updateMode(e=this.#d.getMode()){switch(this.#v(),e){case dr.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case dr.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case dr.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:s}=this.div;if(s.toggle("nonEditing",!1),e===dr.POPUP)s.toggle("commentEditing",!0);else{s.toggle("commentEditing",!1);for(const r of uu.#A.values())s.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#u?.div}setEditingState(e){this.#d.setEditingState(e)}addCommands(e){this.#d.addCommands(e)}cleanUndoStack(e){this.#d.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#r?.togglePointerEvents(e)}get#g(){return this.#i.size!==0?this.#i.values():this.#d.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#p?.abort(),this.#p=null;const e=new Set;for(const r of this.#g)r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#d.removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const s=this.#r;if(s)for(const r of s.getEditableAnnotations()){if(r.hide(),this.#d.isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const n=await this.deserialize(r);n&&(this.addOrRebuild(n),n.enableEditing())}this.#c=!1,this.#d._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#u&&!this.#p){this.#p=new AbortController;const n=this.#d.combinedSignal(this.#p);this.#u.div.addEventListener("pointerdown",i=>{const{clientX:l,clientY:c,timeStamp:u}=i,m=this.#f;if(u-m>500){this.#f=u;return}this.#f=-1;const{classList:A}=this.div;A.toggle("getElements",!0);const g=document.elementsFromPoint(l,c);if(A.toggle("getElements",!1),!this.div.contains(g[0]))return;let p;const v=new RegExp(`^${Ox}[0-9]+$`);for(const y of g)if(v.test(y.id)){p=y.id;break}if(!p)return;const b=this.#i.get(p);b?.annotationElementId===null&&(i.stopPropagation(),i.preventDefault(),b.dblclick(i))},{signal:n,capture:!0})}const e=this.#r,s=[];if(e){const n=new Map,i=new Map;for(const l of this.#g){if(l.disableEditing(),!l.annotationElementId){s.push(l);continue}if(l.serialize()!==null){n.set(l.annotationElementId,l);continue}else i.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:c}=l.data;if(this.#d.isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let u=i.get(c);if(u){u.resetAnnotationElement(l),u.show(!1),l.show();continue}u=n.get(c),u&&(this.#d.addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const n of uu.#A.values())r.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e?.updateFakeAnnotations(s),this.#o=!1}getEditableAnnotation(e){return this.#r?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#d.getActive()!==e&&this.#d.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#m){this.#m=new AbortController;const e=this.#d.combinedSignal(this.#m);this.#u.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#m&&(this.#m.abort(),this.#m=null,this.#u.div.classList.remove("highlighting"))}#b(e){this.#d.unselectAll();const{target:s}=e;if(s===this.#u.div||(s.getAttribute("role")==="img"||s.classList.contains("endOfContent"))&&this.#u.div.contains(s)){const{isMac:r}=oi.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#d.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),Cn.startHighlighting(this,this.#d.direction==="ltr",{target:this.#u.div,x:e.x,y:e.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#d._signal}),e.preventDefault()}}enableClick(){if(this.#s)return;this.#s=new AbortController;const e=this.#d.combinedSignal(this.#s);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const s=this.pointerup.bind(this);this.div.addEventListener("pointerup",s,{signal:e}),this.div.addEventListener("pointercancel",s,{signal:e})}disableClick(){this.#s?.abort(),this.#s=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:s}=e;s&&this.#d.isDeletedAnnotationElement(s)&&this.#d.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#d.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#d.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#d.addDeletedAnnotationElement(e),qs.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#d.addEditor(e),this.attach(e),!e.isAttachedToDOM){const s=e.render();this.div.append(s),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#d.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:s}=document;e.div.contains(s)&&!this.#n&&(e._focusEventsAllowed=!1,this.#n=setTimeout(()=>{this.#n=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#d._signal}),s.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const s=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:s,undo:r,mustExec:!1})}getEditorByUID(e){for(const s of this.#i.values())if(s.uid===e)return s;return null}getNextId(){return this.#d.getId()}get#x(){return uu.#A.get(this.#d.getMode())}combinedSignal(e){return this.#d.combinedSignal(e)}#_(e){const s=this.#x;return s?new s.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#x?.canCreateNewEmptyEditor()}async pasteEditor(e,s){this.updateToolbar(e),await this.#d.updateMode(e.mode);const{offsetX:r,offsetY:n}=this.#N(),i=this.getNextId(),o=this.#_({parent:this,id:i,x:r,y:n,uiManager:this.#d,isCentered:!0,...s});o&&this.add(o)}async deserialize(e){return await uu.#A.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#d)||null}createAndAddNewEditor(e,s,r={}){const n=this.getNextId(),i=this.#_({parent:this,id:n,x:e.offsetX,y:e.offsetY,uiManager:this.#d,isCentered:s,...r});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}#N(){const{x:e,y:s,width:r,height:n}=this.boundingClientRect,i=Math.max(0,e),o=Math.max(0,s),l=Math.min(window.innerWidth,e+r),c=Math.min(window.innerHeight,s+n),u=(i+l)/2-e,m=(o+c)/2-s,[A,g]=this.viewport.rotation%180===0?[u,m]:[m,u];return{offsetX:A,offsetY:g}}addNewEditor(e={}){this.createAndAddNewEditor(this.#N(),!0,e)}setSelected(e){this.#d.setSelected(e)}toggleSelected(e){this.#d.toggleSelected(e)}unselect(e){this.#d.unselect(e)}pointerup(e){const{isMac:s}=oi.platform;if(e.button!==0||e.ctrlKey&&s||e.target!==this.div||!this.#a||(this.#a=!1,this.#x?.isDrawer&&this.#x.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const r=this.#d.getMode();if(r===dr.STAMP||r===dr.SIGNATURE){this.#d.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#d.getMode()===dr.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:s}=oi.platform;if(e.button!==0||e.ctrlKey&&s||e.target!==this.div)return;if(this.#a=!0,this.#x?.isDrawer){this.startDrawingSession(e);return}const r=this.#d.getActive();this.#t=!r||r.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#x.startDrawing(this,this.#d,!1,e);return}this.#d.setCurrentDrawingSession(this),this.#l=new AbortController;const s=this.#d.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(this.#h=null,this.commitOrRemove())},{signal:s}),this.#x.startDrawing(this,this.#d,!1,e)}pause(e){if(e){const{activeElement:s}=document;this.div.contains(s)&&(this.#h=s);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#d.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#x.endDrawing(e)):null}findNewParent(e,s,r){const n=this.#d.findParent(s,r);return n===null||n===this?!1:(n.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#x.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#d.getActive()?.parent===this&&(this.#d.commitOrRemove(),this.#d.setActiveEditor(null)),this.#n&&(clearTimeout(this.#n),this.#n=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#d.removeLayer(this)}#v(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,oA(this.div,e);for(const s of this.#d.getEditors(this.pageIndex))this.add(s),s.rebuild();this.updateMode()}update({viewport:e}){this.#d.commitOrRemove(),this.#v();const s=this.viewport.rotation,r=e.rotation;if(this.viewport=e,oA(this.div,{rotation:r}),s!==r)for(const n of this.#i.values())n.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:s}=this.viewport.rawDims;return[e,s]}get scale(){return this.#d.viewParameters.realScale}}class ki{#e=null;#t=new Map;#r=new Map;static#s=0;setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const s of this.#t.values())s.remove(),e.append(s);this.#e=e}}static get _svgFactory(){return ar(this,"_svgFactory",new bv)}static#n(e,[s,r,n,i]){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*s}%`,o.width=`${100*n}%`,o.height=`${100*i}%`}#i(){const e=ki._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#a(e,s){const r=ki._svgFactory.createElement("clipPath");e.append(r);const n=`clip_${s}`;r.setAttribute("id",n),r.setAttribute("clipPathUnits","objectBoundingBox");const i=ki._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${s}`),i.classList.add("clip"),n}#o(e,s){for(const[r,n]of Object.entries(s))n===null?e.removeAttribute(r):e.setAttribute(r,n)}draw(e,s=!1,r=!1){const n=ki.#s++,i=this.#i(),o=ki._svgFactory.createElement("defs");i.append(o);const l=ki._svgFactory.createElement("path");o.append(l);const c=`path_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),s&&this.#r.set(n,l);const u=r?this.#a(o,c):null,m=ki._svgFactory.createElement("use");return i.append(m),m.setAttribute("href",`#${c}`),this.updateProperties(i,e),this.#t.set(n,i),{id:n,clipPathId:`url(#${u})`}}drawOutline(e,s){const r=ki.#s++,n=this.#i(),i=ki._svgFactory.createElement("defs");n.append(i);const o=ki._svgFactory.createElement("path");i.append(o);const l=`path_${r}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(s){const A=ki._svgFactory.createElement("mask");i.append(A),c=`mask_${r}`,A.setAttribute("id",c),A.setAttribute("maskUnits","objectBoundingBox");const g=ki._svgFactory.createElement("rect");A.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const p=ki._svgFactory.createElement("use");A.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=ki._svgFactory.createElement("use");n.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const m=u.cloneNode();return n.append(m),u.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(n,e),this.#t.set(r,n),r}finalizeDraw(e,s){this.#r.delete(e),this.updateProperties(e,s)}updateProperties(e,s){if(!s)return;const{root:r,bbox:n,rootClass:i,path:o}=s,l=typeof e=="number"?this.#t.get(e):e;if(l){if(r&&this.#o(l,r),n&&ki.#n(l,n),i){const{classList:c}=l;for(const[u,m]of Object.entries(i))c.toggle(u,m)}if(o){const u=l.firstElementChild.firstElementChild;this.#o(u,o)}}}updateParent(e,s){if(s===this)return;const r=this.#t.get(e);r&&(s.#e.append(r),this.#t.delete(e),s.#t.set(e,r))}remove(e){this.#r.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#r.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Kj};globalThis.pdfjsLib={AbortException:zh,AnnotationEditorLayer:uu,AnnotationEditorParamsType:Tr,AnnotationEditorType:dr,AnnotationEditorUIManager:$h,AnnotationLayer:P5,AnnotationMode:Nh,AnnotationType:$n,applyOpacity:Bz,build:I$,ColorPicker:Pl,createValidAbsoluteUrl:VT,CSSConstants:kz,DOMSVGFactory:bv,DrawLayer:ki,FeatureTest:oi,fetchData:g0,findContrastColor:Sz,getDocument:Lp,getFilenameFromUrl:vz,getPdfFilenameFromUrl:wz,getRGB:b0,getUuid:$T,getXfaPageViewport:jz,GlobalWorkerOptions:vd,ImageKind:Qy,InvalidPDFException:Qj,isDataScheme:yw,isPdfFile:j5,isValidExplicitDest:Uz,MathClamp:Bi,noContextMenu:Hl,normalizeUnicode:bz,OPS:Ux,OutputScale:_d,PagesMapper:Xr,PasswordResponses:cz,PDFDataRangeTransport:mP,PDFDateString:Hj,PDFWorker:Hx,PermissionFlag:lz,PixelsPerInch:gp,RenderingCancelledException:N5,renderRichText:GT,ResponseException:gv,setLayerDimensions:oA,shadow:ar,SignatureExtractor:Mf,stopEvent:xn,SupportedImageMimeTypes:Vj,TextLayer:tl,TouchManager:vw,updateUrlHash:zT,Util:ks,VerbosityLevel:pw,version:P$,XfaLayer:qT};typeof window<"u"&&(vd.workerSrc=new URL("/assets/pdf.worker.min-wgc6bjNh.mjs",import.meta.url).toString());const be={primary:"#4A90E2",secondary:"#000000",accent:"#FDA811",success:"#4CAF50",danger:"#E53935",background:"#FBFBFB",font:"Montserrat, Arial, sans-serif"},xS="/backend/business_permit/business_permit.php",iq="https://urbanplanning.goserveph.com/api/zoning-applications",oq="https://health.goserveph.com/api/licensing_export.php",lq=["Afghan","Albanian","Algerian","American","Andorran","Angolan","Antiguans","Argentinean","Armenian","Australian","Austrian","Azerbaijani","Bahamian","Bahraini","Bangladeshi","Barbadian","Barbudans","Batswana","Belarusian","Belgian","Belizean","Beninese","Bhutanese","Bolivian","Bosnian","Brazilian","British","Bruneian","Bulgarian","Burkinabe","Burmese","Burundian","Cambodian","Cameroonian","Canadian","Cape Verdean","Central African","Chadian","Chilean","Chinese","Colombian","Comoran","Congolese","Costa Rican","Croatian","Cuban","Cypriot","Czech","Danish","Djibouti","Dominican","Dutch","East Timorese","Ecuadorean","Egyptian","Emirian","Equatorial Guinean","Eritrean","Estonian","Ethiopian","Fijian","Filipino","Finnish","French","Gabonese","Gambian","Georgian","German","Ghanaian","Greek","Grenadian","Guatemalan","Guinea-Bissauan","Guinean","Guyanese","Haitian","Herzegovinian","Honduran","Hungarian","I-Kiribati","Icelander","Indian","Indonesian","Iranian","Iraqi","Irish","Israeli","Italian","Ivorian","Jamaican","Japanese","Jordanian","Kazakhstani","Kenyan","Kittian and Nevisian","Kuwaiti","Kyrgyz","Laotian","Latvian","Lebanese","Liberian","Libyan","Liechtensteiner","Lithuanian","Luxembourger","Macedonian","Malagasy","Malawian","Malaysian","Maldivan","Malian","Maltese","Marshallese","Mauritanian","Mauritian","Mexican","Micronesian","Moldovan","Monacan","Mongolian","Moroccan","Mosotho","Motswana","Mozambican","Namibian","Nauruan","Nepalese","New Zealander","Nicaraguan","Nigerian","Nigerien","North Korean","Northern Irish","Norwegian","Omani","Pakistani","Palauan","Palestinian","Panamanian","Papua New Guinean","Paraguayan","Peruvian","Polish","Portuguese","Qatari","Romanian","Russian","Rwandan","Saint Lucian","Salvadoran","Samoan","San Marinese","Sao Tomean","Saudi","Scottish","Senegalese","Serbian","Seychellois","Sierra Leonean","Singaporean","Slovakian","Slovenian","Solomon Islander","Somali","South African","South Korean","Spanish","Sri Lankan","Sudanese","Surinamer","Swazi","Swedish","Swiss","Syrian","Taiwanese","Tajik","Tanzanian","Thai","Togolese","Tongan","Trinidadian or Tobagonian","Tunisian","Turkish","Tuvaluan","Ugandan","Ukrainian","Uruguayan","Uzbekistani","Venezuelan","Vietnamese","Welsh","Yemenite","Zambian","Zimbabwean"];function cq(){const a=Ti(),e=ka(),s=a.state?.permitType||"NEW",[r,n]=C.useState(1),[i,o]=C.useState(!1),[l,c]=C.useState(null),[u,m]=C.useState(!1),[A,g]=C.useState(!1),[p,v]=C.useState(!1),[b,y]=C.useState(""),[w,B]=C.useState(""),[j,E]=C.useState(!1),[S,T]=C.useState({}),[M,D]=C.useState(!1),[P,Y]=C.useState(0),[Q,L]=C.useState(!1),[ae,ne]=C.useState(null),[V,O]=C.useState(!1),[X,$]=C.useState({}),[H,te]=C.useState([]),[K,I]=C.useState(!1),[R,G]=C.useState(null),[se,le]=C.useState(!1),[ye,De]=C.useState({}),[me,Te]=C.useState("upload"),[we,st]=C.useState(!1),[ce,tt]=C.useState(null),[Ae,gt]=C.useState(!1),[q,Qt]=C.useState({}),[yt,Oe]=C.useState([]),[ze,Le]=C.useState({barangay_clearance:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},bir_certificate:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},lease_or_title:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},fsic:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},owner_valid_id:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},dti_registration:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},sec_registration:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0}}),[oe,he]=C.useState(!1),[W,ve]=C.useState(null),[Qe,Ze]=C.useState({barangay_clearance:!1,bir_certificate:!0,lease_or_title:!0,fsic:!0,owner_valid_id:!0,id_picture:!0,official_receipt_file:!1}),[J,He]=C.useState({permit_type:s,application_date:new Date().toISOString().split("T")[0],gross_sale:"0",owner_last_name:"",owner_first_name:"",owner_middle_name:"",owner_type:"Individual",citizenship:"",corp_filipino_percent:0,corp_foreign_percent:0,date_of_birth:"",contact_number:"",email_address:"",home_address:"",valid_id_type:"",valid_id_number:"",business_name:"",trade_name:"",business_nature:"",building_type:"",capital_investment:0,house_bldg_no:"",building_name:"",block_no:"",lot_no:"",street:"",subdivision:"",province:"Metro Manila",city_municipality:"Caloocan City",barangay:"",zip_code:"",district:"",zoning_permit_id:"",sanitation_permit_id:"",barangay_clearance_id:"",business_area:0,total_floor_area:0,operation_time_from:"",operation_time_to:"",total_employees:0,male_employees:0,female_employees:0,employees_in_qc:0,delivery_van_truck:0,delivery_motorcycle:0,operation_type:"",attachments_applicable:!1,barangay_clearance:null,bir_certificate:null,lease_or_title:null,fsic:null,owner_valid_id:null,id_picture:null,official_receipt_file:null,owner_scanned_id:null,dti_registration:null,sec_registration:null,representative_scanned_id:null,owner_type_declaration:"Business Owner",owner_representative_name:"",date_submitted:"",official_receipt_no:"",applicant_signature:""});C.useEffect(()=>{xt(),Xe()},[]);const xt=async()=>{try{const Pe=await fetch(iq);if(!Pe.ok)throw new Error(`HTTP error! status: ${Pe.status}`);const Ke=await Pe.json();Ke.success&&Ke.data&&te(Ke.data)}catch(Pe){console.error("Error fetching zoning applications:",Pe)}},Xe=async()=>{try{const Pe=await fetch(oq);if(!Pe.ok)throw new Error(`HTTP error! status: ${Pe.status}`);const Ke=await Pe.json();Ke.success&&Ke.data?Oe(Ke.data):Array.isArray(Ke)&&Oe(Ke)}catch(Pe){console.error("Error fetching sanitation permits:",Pe)}},Ct=()=>[J.owner_first_name,J.owner_middle_name,J.owner_last_name].filter(Boolean).join(" "),_e=[{id:1,title:"Owner Information",description:"Personal details of the business owner"},{id:2,title:"Business Information",description:"Details about your business establishment"},{id:3,title:"Location & Operations",description:"Business address and operational information"},{id:4,title:"Attachments",description:"Upload required documents"},{id:5,title:"Declaration & Submit",description:"Finalize and submit your application"},{id:6,title:"Review Application",description:"Review your application details"}],Se=Pe=>{const{name:Ke,value:nt}=Pe.target;if(Ke==="contact_number"){const zt=nt.replace(/\D/g,"");He(is=>({...is,[Ke]:zt}));return}if(Ke==="date_of_birth"){const zt=new Date(nt),is=new Date;let ke=is.getFullYear()-zt.getFullYear();const de=is.getMonth()-zt.getMonth();if((de<0||de===0&&is.getDate()<zt.getDate())&&ke--,ke<18){dt.fire({icon:"error",title:"Age Requirement",text:"Applicant must be at least 18 years old",confirmButtonColor:"#4A90E2"});return}}He(zt=>({...zt,[Ke]:nt}))},Ve=Pe=>{const{name:Ke,files:nt}=Pe.target,zt=nt?.[0]||null;He(is=>({...is,[Ke]:zt})),ze[Ke]&&Le(is=>({...is,[Ke]:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0}}))},et=Pe=>{const Ke=Pe.target.files[0];if(Ke){const nt=new FileReader;nt.onloadend=()=>{He(zt=>({...zt,applicant_signature:nt.result}))},nt.readAsDataURL(Ke)}},vt=Pe=>{["bir_certificate","lease_or_title","fsic","owner_valid_id","id_picture"].includes(Pe)||Ze(Ke=>({...Ke,[Pe]:!Ke[Pe]}))},Mt=Pe=>{if(Pe){const Ke=URL.createObjectURL(Pe);T({url:Ke,type:Pe.type.split("/")[0],name:Pe.name})}},Ye=()=>{S.url&&URL.revokeObjectURL(S.url),T({})},Et=Pe=>{dt.fire({icon:"success",title:"Success!",text:Pe,confirmButtonColor:"#4CAF50",timer:3e3,timerProgressBar:!0})},Gt=Pe=>{dt.fire({icon:"error",title:"Error",text:Pe,confirmButtonColor:"#E53935"})},ee=Pe=>Pe.toLowerCase().replace(/[^a-z0-9]/g,""),Ie=(Pe,Ke,nt=.5)=>{const zt=ee(Pe),is=ee(Ke);if(zt===is)return 1;if(zt.includes(is)||is.includes(zt))return .95;const ke=zt.length>is.length?zt:is,de=zt.length>is.length?is:zt;if(ke.length===0)return 0;let ie=0;for(let bt=0;bt<de.length;bt++)ke.includes(de[bt])&&ie++;const Ue=ie/ke.length;return Ue>=nt?Ue:0},ue={barangay_clearance:["barangay clearance","brgy clearance","barangay certification","clearance","certification","punong barangay","barangay captain","lupon","katarungang pambarangay"],bir_certificate:["bir","bureau of internal revenue","certificate of registration","bir form","tin","tax identification","bir cert","revenue"],lease_or_title:["lease","contract","land title","transfer certificate of title","tct","original certificate of title","oct","lease agreement","rental agreement","deed"],fsic:["fire safety","fsic","fire safety inspection certificate","bureau of fire","bfp","fire protection","fire certificate","inspection certificate","fire clearance"],owner_valid_id:["philippine","national id","passport","driver","license","umid","sss","gsis","philhealth","pag-ibig","voter","postal","senior citizen","pwd","tin","prc"],dti_registration:["dti","department of trade","trade and industry","business name registration","certificate of business","sole proprietor","dti registration"],sec_registration:["sec","securities and exchange commission","certificate of incorporation","articles of incorporation","corporation","partnership","sec registration"]},fe=(Pe,Ke)=>{const nt=Pe.toLowerCase(),zt=ue[Ke]||[];let is=0;for(const de of zt)nt.includes(de.toLowerCase())&&is++;const ke=zt.length>0?is/zt.length:0;return{matched:is>0,confidence:ke,matchCount:is,expectedType:Ke}},xe={"Philippine National ID (PhilSys ID)":["philsys","philippine national id","national id","phil id","republic of the philippines","pambansang pagkakakilanlan","philippine identification card","pcn"],"Passport (DFA)":["passport","dfa","department of foreign affairs","p <","republic of the philippines passport"],"Driver's License (LTO)":["driver","license","licence","lto","land transportation","department of transportation","dl no"],UMID:["umid","unified multi-purpose id","sss","gsis"],"PRC ID":["prc","professional regulation commission","professional id"],"Voter's ID":["voter","comelec","commission on elections","voter's identification"],"COMELEC Voter's Certificate":["comelec","voter","certificate","commission on elections"],"Postal ID (PhilPost)":["postal","philpost","philippine postal"],"Senior Citizen ID":["senior citizen","osca","office of senior citizen"],"PWD ID":["pwd","person with disability","disabled"],"SSS ID":["sss","social security system","social security"],"GSIS eCard":["gsis","government service insurance","ecard"],"PhilHealth ID":["philhealth","philippine health","health insurance"],"Pag-IBIG ID":["pag-ibig","pagibig","hdmf","home development mutual fund"],"TIN ID":["tin","tax identification number","bir","bureau of internal revenue"],"Barangay ID":["barangay id","barangay identification","brgy id"],"Barangay Clearance":["barangay clearance","brgy clearance"],"Police Clearance":["police clearance","pnp clearance","philippine national police"],"NBI Clearance":["nbi clearance","national bureau of investigation"],"Solo Parent ID":["solo parent","single parent"],"Indigenous People's (IP) ID":["indigenous people","ip id","ncip","national commission on indigenous"],"School ID":["school id","student id","university","college","student number"],"Company / Employee ID":["company id","employee id","employee no","emp no"],"Government Office ID":["government","office id","gov id"],"Firearms License ID":["firearms","license to own and possess firearms","ltopf"],"Seafarer's Identification Record Book (SIRB)":["seafarer","sirb","marina","maritime"],"OWWA ID":["owwa","overseas workers welfare","ofw"],"Alien Certificate of Registration (ACR I-Card)":["acr","alien certificate","i-card","bureau of immigration"]},Me=Pe=>{const Ke=Pe.toLowerCase(),nt=[];for(const[zt,is]of Object.entries(xe)){let ke=0;for(const de of is)Ke.includes(de.toLowerCase())&&ke++;ke>0&&nt.push({type:zt,confidence:ke/is.length,matchCount:ke})}return nt.sort((zt,is)=>is.matchCount!==zt.matchCount?is.matchCount-zt.matchCount:is.confidence-zt.confidence),nt.length>0?nt[0]:null},ct=Pe=>{if(!J.business_name)return null;const Ke=J.business_name.trim();if(!Ke)return null;const nt=Ie(Ke,Pe);return{matched:nt>.6,confidence:nt,value:Ke}},Pt=Pe=>{const Ke=J.owner_first_name?.trim(),nt=J.owner_last_name?.trim(),zt=J.owner_middle_name?.trim();if(!Ke||!nt)return null;const is=Pe.toLowerCase(),ke=Ke.toLowerCase(),de=nt.toLowerCase(),ie=Ie(Ke,Pe),Ue=Ie(nt,Pe),bt=zt?Ie(zt,Pe):0,ot=ie>0||is.includes(ke),Dt=Ue>0||is.includes(de),jt=zt?bt>0||is.includes(zt.toLowerCase()):!1,kt=ot&&Dt;return{firstName:{matched:ot,confidence:ie,value:Ke},lastName:{matched:Dt,confidence:Ue,value:nt},middleName:zt?{matched:jt,confidence:bt,value:zt}:null,anyMatch:kt,allMatch:kt&&(!zt||jt)}},ts=async Pe=>{try{const Ke=await Pe.arrayBuffer(),nt=await Lp({data:Ke}).promise,zt=[],is=Math.min(nt.numPages,3);for(let ke=1;ke<=is;ke++){const de=await nt.getPage(ke),ie=de.getViewport({scale:2}),Ue=document.createElement("canvas"),bt=Ue.getContext("2d");Ue.width=ie.width,Ue.height=ie.height,await de.render({canvasContext:bt,viewport:ie}).promise,zt.push(Ue)}return zt}catch(Ke){throw console.error("Error converting PDF to images:",Ke),Ke}},as=async(Pe,Ke)=>{if(!Ke){Le(nt=>({...nt,[Pe]:{...nt[Pe],error:"Please upload the document first",isVerified:!1}}));return}D(!0),Y(0),Le(nt=>({...nt,[Pe]:{isVerifying:!0,isVerified:!1,results:null,error:null,progress:0}}));try{const nt=await bA.createWorker("eng",1,{logger:Ss=>{if(Ss.status==="recognizing text"){const Is=Math.round(Ss.progress*100);Y(Is),Le(bs=>({...bs,[Pe]:{...bs[Pe],progress:Is}}))}}});Le(Ss=>({...Ss,[Pe]:{...Ss[Pe],progress:10}}));let zt="";if(Ke.type==="application/pdf"){Le(Is=>({...Is,[Pe]:{...Is[Pe],progress:20}}));const Ss=await ts(Ke);Le(Is=>({...Is,[Pe]:{...Is[Pe],progress:40}}));for(let Is=0;Is<Ss.length;Is++){const{data:{text:bs}}=await nt.recognize(Ss[Is]);zt+=bs+`
`,Le(ds=>({...ds,[Pe]:{...ds[Pe],progress:40+Math.round((Is+1)/Ss.length*40)}}))}}else{const{data:{text:Ss}}=await nt.recognize(Ke);zt=Ss}await nt.terminate(),Le(Ss=>({...Ss,[Pe]:{...Ss[Pe],progress:90}}));const is=zt.toLowerCase(),ke=fe(zt,Pe),de=ct(is),ie=Pt(is);let Ue=null,bt=null,ot=!1;if(Pe==="owner_valid_id"||Pe==="owner_scanned_id"){if(J.valid_id_number){const Is=ee(J.valid_id_number);let bs=is.includes(Is)||Ie(J.valid_id_number,is)>.8;if(!bs){const ds=[/license\s*no\.?\s*:?\s*(\S+)/i,/dl\s*no\.?\s*:?\s*(\S+)/i,/license\s*number\s*:?\s*(\S+)/i,/dl\s*number\s*:?\s*(\S+)/i];for(const xs of ds){const xr=zt.match(xs);if(xr&&xr[1]){const qr=ee(xr[1]);if(qr===Is||qr.includes(Is)||Is.includes(qr)){bs=!0;break}}}}Ue={value:J.valid_id_number,found:bs}}const Ss=Me(is);if(Ss&&(ot=!0,J.valid_id_type)){const Is=J.valid_id_type.toLowerCase(),bs=Ss.type.toLowerCase(),ds=Is===bs||Is.includes(bs)||bs.includes(Is)||Is.includes("driver")&&bs.includes("driver")||Is.includes("passport")&&bs.includes("passport")||Is.includes("national id")&&bs.includes("national id")||Is.includes("philsys")&&bs.includes("philsys");bt={expected:J.valid_id_type,detected:Ss.type,matched:ds,confidence:Ss.confidence,matchCount:Ss.matchCount}}}const Dt={documentType:{detected:ke.matched,confidence:ke.confidence,matchCount:ke.matchCount},businessName:de,ownerName:ie,idNumber:Ue,idType:bt,extractedText:zt};let jt=!1,kt=[];if((Pe==="owner_valid_id"||Pe==="owner_scanned_id"?ot:ke.matched)||(kt=[`Wrong document type uploaded. Expected: ${{owner_valid_id:"Valid ID",owner_scanned_id:"Valid ID",bir_certificate:"BIR Certificate",dti_registration:"DTI Registration",sec_registration:"SEC Registration",lease_or_title:"Lease Agreement or Property Title",fsic:"Fire Safety Inspection Certificate",barangay_clearance:"Barangay Clearance"}[Pe]||Pe}. Please upload the correct document.`],jt=!1),(Pe==="owner_valid_id"||Pe==="owner_scanned_id")&&ot){const Ss=ie?.anyMatch,Is=Ue?.found,bs=bt?.matched;if(Ss&&Is&&bs)jt=!0;else{if(kt=["The following information could not be verified:"],Ss)kt.push(" Owner name verified");else{const ds=ie?.firstName?.matched,xs=ie?.lastName?.matched;!ds&&!xs?kt.push(" Owner name not found in ID"):ds?xs||kt.push(" Last name not found in ID"):kt.push(" First name not found in ID")}Is?kt.push(" ID number verified"):kt.push(" ID number not found in document"),bs?kt.push(" ID type verified"):bt?kt.push(` ID type mismatch (Expected: ${bt.expected}, Detected: ${bt.detected})`):kt.push(" ID type could not be detected"),kt.push("Please ensure the ID image is clear and all information is visible."),jt=!1}}if(["bir_certificate","dti_registration","sec_registration"].includes(Pe)&&ke.matched){const Ss=de?.matched;ie?.anyMatch?jt=!0:(kt=["Document may be unreadable or unclear. Please re-upload a clear copy."],jt=!1)}["lease_or_title","fsic"].includes(Pe)&&ke.matched&&(ie?.anyMatch?jt=!0:(kt=["Document may be unreadable or unclear. Please re-upload a clear copy."],jt=!1)),Pe==="barangay_clearance"&&ke.matched&&(ie?.anyMatch?jt=!0:(kt=["Document may be unreadable or unclear. Please re-upload a clear copy."],jt=!1)),Le(Ss=>({...Ss,[Pe]:{isVerifying:!1,isVerified:jt,results:Dt,error:jt?null:"Document verification failed. Please check the document.",progress:100}})),D(!1),ve({documentType:Pe,isVerified:jt,results:Dt,fileName:Ke.name,invalidReasons:kt.length>0?kt:null}),he(!0)}catch(nt){console.error("Verification error:",nt),Le(zt=>({...zt,[Pe]:{isVerifying:!1,isVerified:!1,results:null,error:"Failed to verify document: "+nt.message,progress:0}})),D(!1),ve({documentType:Pe,isVerified:!1,results:null,fileName:Ke.name,invalidReasons:["Document may be unreadable or unclear. Please re-upload a clear copy."]}),he(!0)}},Zt=()=>["Health / Clinic / Pharmacy","Restaurant / Eatery / Food Service","Catering Services","Bakery / Pastry / Cake Shop","Water Refilling Station"].includes(J.business_nature),Be=async()=>{const Pe=J.zoning_permit_id.trim();if(!Pe){ne({success:!1,message:"Please enter a zoning permit ID to verify"}),O(!0);return}if(X[Pe]){ne({success:!0,message:"Zoning permit ID is already verified and valid!",data:X[Pe]}),O(!0);return}L(!0);try{const Ke=H.find(nt=>nt.applicationNumber===Pe||nt.referenceNo===Pe);Ke?Ke.status==="approved"||Ke.status==="active"?(ne({success:!0,message:`Zoning permit ID is VALID! Status: ${Ke.status}`,data:Ke}),$(nt=>({...nt,[Pe]:Ke}))):ne({success:!1,message:` Zoning permit ID exists but is NOT APPROVED. Status: ${Ke.status}`,data:Ke}):ne({success:!1,message:" Zoning permit ID not found in the system. Please check the ID and try again.",data:null})}catch(Ke){console.error("Error verifying zoning ID:",Ke),ne({success:!1,message:" Error connecting to verification service. Please try again later."})}finally{L(!1),O(!0)}},mt=async()=>{const Pe=J.sanitation_permit_id.trim();if(!Pe){tt({success:!1,message:"Please enter a sanitation permit ID to verify"}),gt(!0);return}if(q[Pe]){tt({success:!0,message:"Sanitation permit ID is already verified and valid!",data:q[Pe]}),gt(!0);return}st(!0);try{console.log("Sanitation permits available:",yt),console.log("Searching for sanitation ID:",Pe);const Ke=yt.find(nt=>{const zt=nt.id?nt.id.toString():"",is=nt.license_number?nt.license_number.toString():"",ke=Pe.toString();return(zt===ke||is===ke)&&(nt.status==="completed"||nt.status==="pending")});console.log("Found permit:",Ke),Ke?(tt({success:!0,message:`Sanitation permit ID is VALID! Status: ${Ke.status}`,data:Ke}),Qt(nt=>({...nt,[Pe]:Ke}))):tt({success:!1,message:" Sanitation permit ID not found or invalid status. Please check the ID and try again.",data:null})}catch(Ke){console.error("Error verifying sanitation permit ID:",Ke),tt({success:!1,message:" Error verifying sanitation permit. Please try again later."})}finally{st(!1),gt(!0)}},Nt=Pe=>{const Ke=nt=>nt==null||typeof nt=="string"&&nt.trim()==="";if(Pe===1){const nt=[];return Ke(J.owner_first_name)&&nt.push("First Name"),Ke(J.owner_last_name)&&nt.push("Last Name"),Ke(J.owner_type)&&nt.push("Owner Type"),Ke(J.citizenship)&&nt.push("Citizenship"),J.owner_type==="Corporation"&&(Ke(J.corp_filipino_percent)&&nt.push("Filipino % (Corporation)"),Ke(J.corp_foreign_percent)&&nt.push("Foreign % (Corporation)")),Ke(J.date_of_birth)&&nt.push("Date of Birth"),Ke(J.contact_number)?nt.push("Contact Number"):(!J.contact_number.startsWith("09")||J.contact_number.length!==11)&&nt.push("Contact Number (must start with 09 and be 11 digits)"),Ke(J.email_address)&&nt.push("Email Address"),Ke(J.home_address)&&nt.push("Home Address"),Ke(J.valid_id_type)&&nt.push("Valid ID Type"),Ke(J.valid_id_number)&&nt.push("Valid ID Number"),nt.length?{ok:!1,message:"Missing: "+nt.join(", ")}:{ok:!0}}if(Pe===2){const nt=[];return Ke(J.business_name)&&nt.push("Registered Business Name"),Ke(J.business_nature)&&nt.push("Nature of Business"),Ke(J.building_type)&&nt.push("Building Type"),(Ke(J.capital_investment)||J.capital_investment<=0)&&nt.push("Capital Investment ()"),nt.length?{ok:!1,message:"Missing: "+nt.join(", ")}:{ok:!0}}if(Pe===3){const nt=[];return Ke(J.house_bldg_no)&&nt.push("House/Bldg. No"),Ke(J.street)&&nt.push("Street"),Ke(J.barangay)&&nt.push("Barangay"),Ke(J.zoning_permit_id)&&nt.push("Zoning Permit ID"),Ke(J.operation_type)&&nt.push("Type of Operation"),(Ke(J.business_area)||J.business_area<=0)&&nt.push("Business Area"),(Ke(J.total_floor_area)||J.total_floor_area<=0)&&nt.push("Total Floor/Building Area"),Ke(J.operation_time_from)&&nt.push("Operation Time From"),Ke(J.operation_time_to)&&nt.push("Operation Time To"),(Ke(J.total_employees)||J.total_employees<0)&&nt.push("Total No. of Employees"),J.zoning_permit_id&&!X[J.zoning_permit_id]&&nt.push("Zoning Permit ID needs to be verified (click Verify button)"),Zt()&&(Ke(J.sanitation_permit_id)?nt.push("Sanitation Permit ID (required for health-related businesses)"):q[J.sanitation_permit_id]||nt.push("Sanitation Permit ID needs to be verified (click Verify button)")),nt.length?{ok:!1,message:"Missing: "+nt.join(", ")}:{ok:!0}}if(Pe===4){const nt=[];return Ke(J.bir_certificate)?nt.push("BIR Certificate of Registration"):ze.bir_certificate?.isVerified===!1?nt.push("BIR Certificate is INVALID - Please upload a valid document"):J.bir_certificate&&!ze.bir_certificate?.isVerified&&nt.push("BIR Certificate must be verified (click Verify button)"),Ke(J.lease_or_title)?nt.push("Lease Agreement or Property Title"):ze.lease_or_title?.isVerified===!1?nt.push("Lease/Title is INVALID - Please upload a valid document"):J.lease_or_title&&!ze.lease_or_title?.isVerified&&nt.push("Lease/Title must be verified (click Verify button)"),Ke(J.fsic)?nt.push("Fire Safety Inspection Certificate (FSIC)"):ze.fsic?.isVerified===!1?nt.push("FSIC is INVALID - Please upload a valid document"):J.fsic&&!ze.fsic?.isVerified&&nt.push("FSIC must be verified (click Verify button)"),Ke(J.owner_valid_id)?nt.push("Owner Valid ID"):ze.owner_valid_id?.isVerified===!1?nt.push("Owner Valid ID is INVALID - Please upload a valid document"):J.owner_valid_id&&!ze.owner_valid_id?.isVerified&&nt.push("Owner Valid ID must be verified (click Verify button)"),J.barangay_clearance&&ze.barangay_clearance?.isVerified===!1?nt.push("Barangay Clearance is INVALID - Please upload a valid document or use ID verification"):J.barangay_clearance&&!ze.barangay_clearance?.isVerified?nt.push("Barangay Clearance must be verified (click Verify button)"):J.barangay_clearance_id&&!ye[J.barangay_clearance_id]&&nt.push("Barangay Clearance ID must be verified (click Verify button)"),J.owner_type==="Individual"&&(Ke(J.dti_registration)?nt.push("DTI Registration (required for Individual)"):ze.dti_registration?.isVerified===!1?nt.push("DTI Registration is INVALID - Please upload a valid document"):ze.dti_registration?.isVerified||nt.push("DTI Registration must be verified (click Verify button)")),J.owner_type==="Partnership"&&(Ke(J.sec_registration)?nt.push("SEC Registration (required for Partnership)"):ze.sec_registration?.isVerified===!1?nt.push("SEC Registration is INVALID - Please upload a valid document"):ze.sec_registration?.isVerified||nt.push("SEC Registration must be verified (click Verify button)")),Qe.official_receipt_file&&Ke(J.official_receipt_file)&&nt.push("Official Receipt of Payment"),nt.length?{ok:!1,message:"Missing required attachments: "+nt.join(", ")}:{ok:!0}}if(Pe===5){const nt=[];return Ke(J.owner_type_declaration)&&nt.push("Owner / Representative"),Ke(J.owner_representative_name)&&nt.push("Owner / Representative Name"),J.owner_type_declaration==="Representative"&&Ke(J.representative_scanned_id)&&nt.push("Representative's Scanned ID"),Ke(J.applicant_signature)&&nt.push("Applicant's Signature"),j||nt.push("Agreement to Declaration"),nt.length?{ok:!1,message:"Missing: "+nt.join(", ")}:{ok:!0}}return{ok:!0}},Ne=()=>n(Pe=>Math.max(Pe-1,1)),Je=Pe=>{if(Pe.preventDefault(),r===6){const Ke=Nt(6);if(!Ke.ok){c({type:"error",message:Ke.message||"Please complete required fields for this step."});return}c(null),dt.fire({title:"Submit Application",html:`
          <div style="text-align: left; margin: 20px 0;">
            <p style="margin-bottom: 15px;">Are you sure you want to submit your business permit application?</p>
            <div style="background: #f9f9f9; padding: 15px; border-radius: 8px; border-left: 4px solid #4A90E2;">
              <p style="margin-bottom: 10px; font-weight: bold;">Please confirm:</p>
              <label style="display: flex; align-items: center; cursor: pointer;">
                <input type="checkbox" id="swal-declaration-checkbox" style="margin-right: 10px;" />
                <span>I confirm that all information is correct and I agree to the terms</span>
              </label>
            </div>
          </div>
        `,icon:"question",showCancelButton:!0,confirmButtonColor:"#4CAF50",cancelButtonColor:"#E53935",confirmButtonText:"Submit Application",cancelButtonText:"Cancel",preConfirm:()=>document.getElementById("swal-declaration-checkbox").checked?!0:(dt.showValidationMessage("You must agree to the declaration"),!1)}).then(nt=>{nt.isConfirmed&&(E(!0),ht())});return}else{const Ke=Nt(r);if(!Ke.ok){c({type:"error",message:Ke.message||"Please complete required fields for this step."});return}c(null),n(nt=>Math.min(nt+1,_e.length))}},ht=async()=>{if(!j){dt.fire({icon:"warning",title:"Declaration Required",text:"You must agree to the declaration to proceed.",confirmButtonColor:"#4A90E2"}),m(!1);return}o(!0),m(!1);try{const Pe=new FormData,Ke=new Date,nt=Ke.toISOString().split("T")[0]+" "+Ke.toTimeString().split(" ")[0],is={owner_type:J.owner_type&&J.owner_type.trim()!==""?J.owner_type.trim():"Individual",citizenship:J.citizenship||"",business_nature:J.business_nature||"",building_type:J.building_type||"",operation_type:J.operation_type||""};Object.entries(is).forEach(([jt,kt])=>{jt==="owner_type"?Pe.append(jt,kt||"Individual"):Pe.append(jt,String(kt||""))}),Object.keys(J).forEach(jt=>{const kt=J[jt];if(!is.hasOwnProperty(jt)&&!(jt==="sanitation_permit_id"&&!Zt())&&!(jt==="representative_scanned_id"&&J.owner_type_declaration!=="Representative")&&jt!=="owner_scanned_id"&&!(jt==="barangay_clearance"&&!kt&&J.barangay_clearance_id)&&kt!=null&&kt!=="")if(typeof kt=="number")Pe.append(jt,kt.toString());else if(kt instanceof File)Pe.append(jt,kt,kt.name);else if(jt==="applicant_signature"&&kt.startsWith("data:image")){const gs=atob(kt.split(",")[1]),Xs=kt.split(",")[0].split(":")[1].split(";")[0],Ss=new ArrayBuffer(gs.length),Is=new Uint8Array(Ss);for(let xs=0;xs<gs.length;xs++)Is[xs]=gs.charCodeAt(xs);const bs=new Blob([Ss],{type:Xs}),ds=new File([bs],"signature.png",{type:Xs});Pe.append(jt,ds)}else Pe.append(jt,String(kt))}),Pe.append("date_submitted",nt);const ke=localStorage.getItem("user_id")||localStorage.getItem("goserveph_user_id")||"0";Pe.append("user_id",ke),Pe.append("action","submit_business_permit"),J.owner_first_name&&Pe.append("first_name",J.owner_first_name),J.owner_last_name&&Pe.append("last_name",J.owner_last_name),J.owner_middle_name&&Pe.append("middle_name",J.owner_middle_name);const de={has_barangay_clearance:!!(J.barangay_clearance||J.barangay_clearance_id),has_bir_certificate:!!J.bir_certificate,has_lease_or_title:!!J.lease_or_title,has_fsic:!!J.fsic,has_owner_valid_id:!!J.owner_valid_id,has_id_picture:!!J.id_picture,has_official_receipt:!!J.official_receipt_file,has_representative_scanned_id:J.owner_type_declaration==="Representative"&&!!J.representative_scanned_id,has_dti_registration:!!J.dti_registration,has_sec_registration:!!J.sec_registration,has_sanitation_permit:Zt()&&!!J.sanitation_permit_id};Object.entries(de).forEach(([jt,kt])=>{Pe.append(jt,kt?"1":"0")});const ie=J.barangay_clearance||J.barangay_clearance_id?"ID_PROVIDED":"PENDING";Pe.append("barangay_clearance_status",ie),Pe.append("gross_sale",J.gross_sale||"0"),ze&&Object.entries({bir_certificate:"bir_certificate",lease_or_title:"lease_or_title",fsic:"fsic",owner_valid_id:"owner_valid_id",barangay_clearance:"barangay_clearance"}).forEach(([kt,gs])=>{if(ze[kt]&&(Pe.append(`${gs}_verified`,ze[kt].isVerified?"1":"0"),ze[kt].results)){const Xs=ze[kt].isVerified?"AI Verified: Document type and owner name matched":ze[kt].error||"AI Verification failed";Pe.append(`${gs}_verification_notes`,Xs)}}),console.log("FormData entries:");for(let[jt,kt]of Pe.entries())console.log(`${jt}:`,kt);const Ue=await fetch(xS,{method:"POST",body:Pe,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!Ue.ok)throw new Error(`HTTP error! status: ${Ue.status}`);const bt=Ue.clone();console.log("Response status:",Ue.status);const ot=await Ue.text();if(console.log("Raw response:",ot),!ot.trim())throw new Error("Server returned an empty response");let Dt;try{Dt=JSON.parse(ot)}catch(jt){throw console.error("JSON parse error:",jt),console.log("Raw response that failed to parse:",ot),ot.includes("<?php")||ot.includes("Fatal error")||ot.includes("Parse error")?new Error("PHP error detected. Please check server logs."):new Error("Server returned invalid JSON. Check console for details.")}if(!Ue.ok||!Dt.success)throw new Error(Dt.message||Dt.error||`Submission failed with status: ${Ue.status}`);Et(Dt.message||"Business permit application submitted successfully!"),ql("Business Permit",Dt.permit_id||"",{permit_type:s,business_name:J.business_name}),setTimeout(()=>{e("/user/permittracker")},3e3)}catch(Pe){console.error("Submission error:",Pe);let Ke=Pe.message;(Pe.message.includes("Failed to fetch")||Pe.message.includes("Network error"))&&(Ke=`Network error. Please check:
          1. Server is running
          2. API endpoint is correct: ${xS}
          3. No CORS issues`),Gt(Ke)}finally{o(!1)}},It=()=>{switch(r){case 1:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:be.secondary,fontFamily:be.font},children:"Owner Information"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:_e[0].description})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["First Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{name:"owner_first_name",value:J.owner_first_name,onChange:Se,placeholder:"Enter first name",className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Last Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{name:"owner_last_name",value:J.owner_last_name,onChange:Se,placeholder:"Enter last name",className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:"Middle Name"}),t.jsx("input",{type:"text",name:"owner_middle_name",value:J.owner_middle_name,onChange:Se,placeholder:"Middle Name",className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Owner Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"owner_type",value:J.owner_type,onChange:Se,className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},required:!0,children:[t.jsx("option",{value:"Individual",children:"Individual"}),t.jsx("option",{value:"Partnership",children:"Partnership"}),t.jsx("option",{value:"Corporation",children:"Corporation"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:col-span-2",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Citizenship ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{list:"nationalities",name:"citizenship",value:J.citizenship,onChange:Se,placeholder:"Enter citizenship",className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},required:!0}),t.jsx("datalist",{id:"nationalities",children:lq.map(Pe=>t.jsx("option",{value:Pe},Pe))})]}),J.owner_type==="Corporation"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Filipino (%) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"corp_filipino_percent",value:J.corp_filipino_percent,onChange:Se,placeholder:"%",className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},min:"0",max:"100",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Foreign (%) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"corp_foreign_percent",value:J.corp_foreign_percent,onChange:Se,placeholder:"%",className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},min:"0",max:"100",required:!0})]})]}),J.owner_type==="Individual"&&t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[J.dti_registration?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"DTI Registration:"}),t.jsx("p",{className:"text-sm text-gray-600",children:J.dti_registration?J.dti_registration.name:"Required for Individual"}),t.jsx("p",{className:"text-xs text-red-500",children:"* Required for Individual owner type"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"dti_registration",onChange:Ve,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden",required:J.owner_type==="Individual"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${J.dti_registration?"border-green-200 bg-green-50":"border-gray-300"}`,style:{color:be.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),"Upload"]})]}),J.dti_registration&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{type:"button",onClick:()=>Mt(J.dti_registration),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:be.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]}),t.jsx("button",{type:"button",onClick:()=>as("dti_registration",J.dti_registration),disabled:ze.dti_registration.isVerifying,className:`flex items-center gap-1 px-3 py-1 text-sm rounded transition-colors duration-300 border ${ze.dti_registration.isVerified?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,children:ze.dti_registration.isVerifying?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):ze.dti_registration.isVerified?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(Pr,{className:"w-4 h-4"})," Verify"]})})]})]})]}),J.dti_registration&&ze.dti_registration.isVerifying&&t.jsxs("div",{className:"p-3 border-l border-r border-b border-gray-300 rounded-b-lg",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-600",children:[t.jsx("span",{children:"Verifying document..."}),t.jsxs("span",{children:[ze.dti_registration.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:t.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${ze.dti_registration.progress}%`}})})]})]}),J.owner_type==="Partnership"&&t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[J.sec_registration?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"SEC Registration:"}),t.jsx("p",{className:"text-sm text-gray-600",children:J.sec_registration?J.sec_registration.name:"Required for Partnership"}),t.jsx("p",{className:"text-xs text-red-500",children:"* Required for Partnership owner type"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"sec_registration",onChange:Ve,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden",required:J.owner_type==="Partnership"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${J.sec_registration?"border-green-200 bg-green-50":"border-gray-300"}`,style:{color:be.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),"Upload"]})]}),J.sec_registration&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{type:"button",onClick:()=>Mt(J.sec_registration),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:be.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]}),t.jsx("button",{type:"button",onClick:()=>as("sec_registration",J.sec_registration),disabled:ze.sec_registration.isVerifying,className:`flex items-center gap-1 px-3 py-1 text-sm rounded transition-colors duration-300 border ${ze.sec_registration.isVerified?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,children:ze.sec_registration.isVerifying?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):ze.sec_registration.isVerified?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(Pr,{className:"w-4 h-4"})," Verify"]})})]})]})]}),J.sec_registration&&ze.sec_registration.isVerifying&&t.jsxs("div",{className:"p-3 border-l border-r border-b border-gray-300 rounded-b-lg",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-600",children:[t.jsx("span",{children:"Verifying document..."}),t.jsxs("span",{children:[ze.sec_registration.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:t.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${ze.sec_registration.progress}%`}})})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Date of Birth ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",name:"date_of_birth",value:J.date_of_birth,onChange:Se,className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Contact Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",name:"contact_number",value:J.contact_number,placeholder:"(e.g. 09123456789)",onChange:Se,className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},pattern:"[0-9]{11}",maxLength:"11",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Email Address ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"email",name:"email_address",value:J.email_address,onChange:Se,placeholder:"Enter email address",className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Home Address ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{name:"home_address",value:J.home_address,onChange:Se,placeholder:"Enter home address",className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Valid ID Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"valid_id_type",value:J.valid_id_type,onChange:Se,className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},required:!0,children:[t.jsx("option",{value:"",children:"Select Valid ID Type"}),t.jsxs("optgroup",{label:"Primary Valid Government-Issued IDs",children:[t.jsx("option",{value:"PhilSys ID",children:"Philippine National ID (PhilSys ID)"}),t.jsx("option",{value:"Driver's License",children:"Driver's License (LTO)"}),t.jsx("option",{value:"Passport",children:"Passport (DFA)"}),t.jsx("option",{value:"UMID",children:"UMID"}),t.jsx("option",{value:"Voter's ID",children:"Voter's ID / COMELEC"}),t.jsx("option",{value:"Postal ID",children:"Postal ID (PhilPost)"}),t.jsx("option",{value:"PRC ID",children:"PRC ID"}),t.jsx("option",{value:"Senior Citizen ID",children:"Senior Citizen ID"}),t.jsx("option",{value:"PWD ID",children:"PWD ID"}),t.jsx("option",{value:"Barangay ID",children:"Barangay ID"})]}),t.jsxs("optgroup",{label:"Secondary / Supporting IDs",children:[t.jsx("option",{value:"School ID",children:"School ID"}),t.jsx("option",{value:"Company ID",children:"Company / Employee ID"}),t.jsx("option",{value:"Police Clearance",children:"Police Clearance / NBI Clearance"}),t.jsx("option",{value:"TIN ID",children:"Tax Identification Number (TIN) ID"}),t.jsx("option",{value:"PhilHealth ID",children:"PhilHealth ID"}),t.jsx("option",{value:"Pag-IBIG ID",children:"Pag-IBIG ID"}),t.jsx("option",{value:"GSIS eCard",children:"GSIS eCard"}),t.jsx("option",{value:"Solo Parent ID",children:"Solo Parent ID"}),t.jsx("option",{value:"IP ID",children:"Indigenous People's (IP) ID"}),t.jsx("option",{value:"Firearms License ID",children:"Firearms License ID"})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Valid ID Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"valid_id_number",value:J.valid_id_number,onChange:Se,placeholder:"Enter valid ID number",className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},required:!0})]})]})]});case 2:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:be.secondary,fontFamily:be.font},children:"Business Information"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:_e[1].description})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Registered Business Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{name:"business_name",value:J.business_name,onChange:Se,placeholder:"Enter registered business name",className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Trade / Brand Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{name:"trade_name",value:J.trade_name,onChange:Se,placeholder:"Enter trade or brand name",className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Nature of Business ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"business_nature",value:J.business_nature,onChange:Se,className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},required:!0,children:[t.jsx("option",{value:"",children:"Select Business Nature"}),t.jsx("option",{value:"Retail / Sari-sari Store",children:"Retail / Sari-sari Store"}),t.jsx("option",{value:"Grocery / Mini Grocery",children:"Grocery / Mini Grocery"}),t.jsx("option",{value:"Restaurant / Eatery / Food Service",children:"Restaurant / Eatery / Food Service"}),t.jsx("option",{value:"Catering Services",children:"Catering Services"}),t.jsx("option",{value:"Wholesale Trade",children:"Wholesale Trade"}),t.jsx("option",{value:"Manufacturing (Light Industry)",children:"Manufacturing (Light Industry)"}),t.jsx("option",{value:"Repairs / Technical Services",children:"Repairs / Technical Services (Electronics, Appliances)"}),t.jsx("option",{value:"Printing / Publishing",children:"Printing / Publishing"}),t.jsx("option",{value:"Beauty / Barber / Salon / Spa",children:"Beauty / Barber / Salon / Spa"}),t.jsx("option",{value:"Health / Clinic / Pharmacy",children:"Health / Clinic / Pharmacy"}),t.jsx("option",{value:"Education / Tutorial Center",children:"Education / Tutorial Center"}),t.jsx("option",{value:"Office / Administrative Services",children:"Office / Administrative Services"}),t.jsx("option",{value:"Logistics / Transport / Courier",children:"Logistics / Transport / Courier"}),t.jsx("option",{value:"Real Estate / Leasing / Rental Services",children:"Real Estate / Leasing / Rental Services"}),t.jsx("option",{value:"Construction / Contractor",children:"Construction / Contractor"}),t.jsx("option",{value:"Workshops (Metal, Carpentry, Furniture)",children:"Workshops (Metal, Carpentry, Furniture)"}),t.jsx("option",{value:"Bakery / Pastry / Cake Shop",children:"Bakery / Pastry / Cake Shop"}),t.jsx("option",{value:"Laundry / Dry Cleaning",children:"Laundry / Dry Cleaning"}),t.jsx("option",{value:"Automotive (Repair, Car Wash)",children:"Automotive (Repair, Car Wash)"}),t.jsx("option",{value:"Water Refilling Station",children:"Water Refilling Station"}),t.jsx("option",{value:"Entertainment / Recreation",children:"Entertainment / Recreation"}),t.jsx("option",{value:"Advertising / Signage",children:"Advertising / Signage"}),t.jsx("option",{value:"Online Business / E-commerce",children:"Online Business / E-commerce"}),t.jsx("option",{value:"Agricultural / Farming",children:"Agricultural / Farming"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Building Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"building_type",value:J.building_type,onChange:Se,className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},required:!0,children:[t.jsx("option",{value:"",children:"Select Building Type"}),t.jsx("option",{value:"Commercial",children:"Commercial"}),t.jsx("option",{value:"Residential",children:"Residential"}),t.jsx("option",{value:"Industrial",children:"Industrial"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Capital Investment () ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"capital_investment",value:J.capital_investment,onChange:Se,placeholder:"Enter capital investment amount",className:"p-3 border border-black rounded-lg w-full",style:{color:be.secondary,fontFamily:be.font},required:!0})]})]})]});case 3:return t.jsxs("div",{className:"space-y-10",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:be.secondary,fontFamily:be.font},children:"Location & Operations"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:_e[2].description})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold mb-4",style:{color:be.secondary,fontFamily:be.font},children:"Business Address"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:["House/Bldg. No ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"house_bldg_no",value:J.house_bldg_no,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter house or building number",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:"Name of Building"}),t.jsx("input",{type:"text",name:"building_name",value:J.building_name,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter building name (if applicable)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:"Block No."}),t.jsx("input",{type:"text",name:"block_no",value:J.block_no,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter block number"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:"Lot No."}),t.jsx("input",{type:"text",name:"lot_no",value:J.lot_no,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter lot number"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:["Street ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"street",value:J.street,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter street name",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:"Subdivision"}),t.jsx("input",{type:"text",name:"subdivision",value:J.subdivision,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter subdivision name"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:["Province ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"province",value:"Metro Manila",readOnly:!0,className:"w-full p-3 border border-black rounded-lg bg-gray-100",style:{color:be.secondary,fontFamily:be.font}}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Fixed as Metro Manila"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:["City/Municipality ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"city_municipality",value:"Caloocan City",readOnly:!0,className:"w-full p-3 border border-black rounded-lg bg-gray-100",style:{color:be.secondary,fontFamily:be.font}}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Fixed as Caloocan City"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:be.secondary,fontFamily:be.font},children:["Barangay ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"barangay",value:J.barangay,onChange:Se,className:"p-3 border border-black rounded-lg w-full focus:ring-1 focus:border-black-400 focus:outline-none",style:{color:be.secondary,fontFamily:be.font},required:!0,children:[t.jsx("option",{value:"",children:"Select a barangay"}),Array.from({length:175},(Pe,Ke)=>t.jsxs("option",{value:`Barangay ${Ke+1}`,children:["Barangay ",Ke+1]},`Barangay ${Ke+1}`)),["A","B","C","D","E","F"].map(Pe=>t.jsxs("option",{value:`Barangay 176-${Pe}`,children:["Barangay 176-",Pe]},`Barangay 176-${Pe}`)),Array.from({length:12},(Pe,Ke)=>t.jsxs("option",{value:`Barangay ${177+Ke}`,children:["Barangay ",177+Ke]},`Barangay ${177+Ke}`))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:"Zip Code"}),t.jsx("input",{type:"text",name:"zip_code",value:J.zip_code,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter ZIP code",maxLength:"4"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:"District"}),t.jsxs("select",{name:"district",value:J.district,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},children:[t.jsx("option",{value:"",children:"Select District"}),t.jsx("option",{value:"District 1",children:"District 1"}),t.jsx("option",{value:"District 2",children:"District 2"}),t.jsx("option",{value:"District 3",children:"District 3"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold mb-4",style:{color:be.secondary,fontFamily:be.font},children:"Operations Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsxs("label",{className:"block font-medium",style:{color:be.secondary,fontFamily:be.font},children:["Zoning Permit ID / Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),J.zoning_permit_id&&X[J.zoning_permit_id]&&t.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-800 flex items-center gap-1",children:[t.jsx(Ht,{className:"w-3 h-3"})," Verified"]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",name:"zoning_permit_id",value:J.zoning_permit_id,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter zoning permit ID/number (e.g., ZC-2026-01-0001)",required:!0}),t.jsx("button",{type:"button",onClick:Be,disabled:Q,className:`px-4 py-3 rounded-lg font-semibold text-white transition-colors duration-300 flex items-center gap-2 ${Q?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,style:{fontFamily:be.font},children:Q?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Verifying..."]}):t.jsxs(t.Fragment,{children:[t.jsx(sa,{className:"w-4 h-4"}),"Verify"]})})]}),t.jsx("p",{className:"text-xs mt-1 text-gray-600",children:X[J.zoning_permit_id]?" Zoning ID verified and valid":"Enter your zoning permit ID and click Verify to check status"})]}),Zt()&&t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsxs("label",{className:"block font-medium",style:{color:be.secondary,fontFamily:be.font},children:["Sanitation Permit ID / License Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),J.sanitation_permit_id&&q[J.sanitation_permit_id]&&t.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-800 flex items-center gap-1",children:[t.jsx(Ht,{className:"w-3 h-3"})," Verified"]})]}),t.jsx("input",{type:"text",name:"sanitation_permit_id",value:J.sanitation_permit_id,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter sanitation permit ID/license number",required:!0}),t.jsx("button",{type:"button",onClick:mt,disabled:we||!J.sanitation_permit_id,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:we?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"}),"Verifying..."]}):t.jsxs(t.Fragment,{children:[t.jsx(sa,{className:"w-4 h-4"}),"Verify Sanitation Permit ID"]})}),t.jsx("p",{className:"text-xs mt-1 text-gray-600",children:q[J.sanitation_permit_id]?"Sanitation permit verified and valid":"Enter your sanitation permit ID and click Verify to check status (required for health-related businesses)"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:["Type of Operation ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"operation_type",value:J.operation_type,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},required:!0,children:[t.jsx("option",{value:"",children:"Select Type of Operation"}),t.jsx("option",{value:"Main Office",children:"Main Office"}),t.jsx("option",{value:"Branch",children:"Branch"}),t.jsx("option",{value:"Franchise",children:"Franchise"}),t.jsx("option",{value:"Headquarters",children:"Headquarters"}),t.jsx("option",{value:"Satellite Office",children:"Satellite Office"}),t.jsx("option",{value:"Warehouse",children:"Warehouse"}),t.jsx("option",{value:"Factory",children:"Factory"}),t.jsx("option",{value:"Retail Store",children:"Retail Store"}),t.jsx("option",{value:"Food Establishment",children:"Food Establishment"}),t.jsx("option",{value:"Service Center",children:"Service Center"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:["Business Area (in sq. m.) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"business_area",value:J.business_area,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter business area",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:["Total Floor/Building Area (in sq.m.) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"total_floor_area",value:J.total_floor_area,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter total floor area",required:!0})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:["Time of Operation ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-1",children:"From"}),t.jsx("input",{type:"time",name:"operation_time_from",value:J.operation_time_from,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-1",children:"To"}),t.jsx("input",{type:"time",name:"operation_time_to",value:J.operation_time_to,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},required:!0})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:["Total No. of Employees in Establishment ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"total_employees",value:J.total_employees,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter total employees",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:"Male Employees"}),t.jsx("input",{type:"number",name:"male_employees",value:J.male_employees,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter number of male employees"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:"Female Employees"}),t.jsx("input",{type:"number",name:"female_employees",value:J.female_employees,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter number of female employees"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:"No. of Employees Residing within LGU"}),t.jsx("input",{type:"number",name:"employees_in_qc",value:J.employees_in_qc,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter number of employees in QC"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("h5",{className:"font-medium mb-3",style:{color:be.secondary,fontFamily:be.font},children:"No. of Delivery Vehicle (if applicable)"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-1",children:"Van/Truck"}),t.jsx("input",{type:"number",name:"delivery_van_truck",value:J.delivery_van_truck,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter number of vans/trucks"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm mb-1",children:"Motorcycle"}),t.jsx("input",{type:"number",name:"delivery_motorcycle",value:J.delivery_motorcycle,onChange:Se,className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},placeholder:"Enter number of motorcycles"})]})]})]})]})]})]});case 4:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Ht,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"Important Note:"}),t.jsxs("p",{className:"text-sm text-blue-700",children:[" All documents marked with ",t.jsx("span",{className:"font-bold text-red-600",children:"*"})," are ",t.jsx("span",{className:"font-bold text-red-600",children:"MANDATORY"})," for business permit applications."]}),t.jsx("p",{className:"text-sm text-blue-700 mt-1",children:" Official Receipt of Payment is optional unless you have already paid."})]})]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg bg-blue-50",children:[t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["Barangay Clearance: ",t.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:J.barangay_clearance?J.barangay_clearance.name:"Optional - Upload if available"}),t.jsx("p",{className:"text-xs text-gray-500",children:"This document is optional"})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"barangay_clearance",onChange:Ve,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${J.barangay_clearance?"border-green-200 bg-green-50":"border-gray-300 bg-gray-50"}`,style:{color:be.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),J.barangay_clearance?"Change":"Upload"]})]}),J.barangay_clearance&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{type:"button",onClick:()=>Mt(J.barangay_clearance),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:be.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]}),t.jsx("button",{type:"button",onClick:()=>as("barangay_clearance",J.barangay_clearance),disabled:ze.barangay_clearance.isVerifying,className:`flex items-center gap-1 px-3 py-1 text-sm rounded transition-colors duration-300 border ${ze.barangay_clearance.isVerified?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,children:ze.barangay_clearance.isVerifying?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):ze.barangay_clearance.isVerified?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(Pr,{className:"w-4 h-4"})," Verify"]})})]})]})]}),J.barangay_clearance&&ze.barangay_clearance.isVerifying&&t.jsxs("div",{className:"p-3 border-l border-r border-b border-gray-300 rounded-b-lg bg-blue-50",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-600",children:[t.jsx("span",{children:"Verifying document..."}),t.jsxs("span",{children:[ze.barangay_clearance.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:t.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${ze.barangay_clearance.progress}%`}})})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg bg-blue-50",children:[t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["Owner Valid ID: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:J.owner_valid_id?J.owner_valid_id.name:"Required"}),t.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"* This document is mandatory"})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"owner_valid_id",onChange:Ve,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden",required:!0}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${J.owner_valid_id?"border-green-200 bg-green-50":"border-red-300 bg-red-50"}`,style:{color:be.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),J.owner_valid_id?"Change":"Upload"]})]}),J.owner_valid_id&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{type:"button",onClick:()=>Mt(J.owner_valid_id),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:be.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]}),t.jsx("button",{type:"button",onClick:()=>as("owner_valid_id",J.owner_valid_id),disabled:ze.owner_valid_id.isVerifying,className:`flex items-center gap-1 px-3 py-1 text-sm rounded transition-colors duration-300 border ${ze.owner_valid_id.isVerified?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,children:ze.owner_valid_id.isVerifying?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):ze.owner_valid_id.isVerified?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(Pr,{className:"w-4 h-4"})," Verify"]})})]})]})]}),J.owner_valid_id&&ze.owner_valid_id.isVerifying&&t.jsxs("div",{className:"p-3 border-l border-r border-b border-gray-300 rounded-b-lg bg-blue-50",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-600",children:[t.jsx("span",{children:"Verifying document..."}),t.jsxs("span",{children:[ze.owner_valid_id.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:t.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${ze.owner_valid_id.progress}%`}})})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg bg-blue-50",children:[t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["BIR Certificate of Registration: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:J.bir_certificate?J.bir_certificate.name:"Required"}),t.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"* This document is mandatory"})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"bir_certificate",onChange:Ve,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden",required:!0}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${J.bir_certificate?"border-green-200 bg-green-50":"border-red-300 bg-red-50"}`,style:{color:be.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),J.bir_certificate?"Change":"Upload"]})]}),J.bir_certificate&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{type:"button",onClick:()=>Mt(J.bir_certificate),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:be.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]}),t.jsx("button",{type:"button",onClick:()=>as("bir_certificate",J.bir_certificate),disabled:ze.bir_certificate.isVerifying,className:`flex items-center gap-1 px-3 py-1 text-sm rounded transition-colors duration-300 border ${ze.bir_certificate.isVerified?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,children:ze.bir_certificate.isVerifying?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):ze.bir_certificate.isVerified?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(Pr,{className:"w-4 h-4"})," Verify"]})})]})]})]}),J.bir_certificate&&ze.bir_certificate.isVerifying&&t.jsxs("div",{className:"p-3 border-l border-r border-b border-gray-300 rounded-b-lg bg-blue-50",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-600",children:[t.jsx("span",{children:"Verifying document..."}),t.jsxs("span",{children:[ze.bir_certificate.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:t.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${ze.bir_certificate.progress}%`}})})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg bg-blue-50",children:[t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["Lease Contract / Land Title: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:J.lease_or_title?J.lease_or_title.name:"Required"}),t.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"* This document is mandatory"})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"lease_or_title",onChange:Ve,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden",required:!0}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${J.lease_or_title?"border-green-200 bg-green-50":"border-red-300 bg-red-50"}`,style:{color:be.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),J.lease_or_title?"Change":"Upload"]})]}),J.lease_or_title&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{type:"button",onClick:()=>Mt(J.lease_or_title),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:be.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]}),t.jsx("button",{type:"button",onClick:()=>as("lease_or_title",J.lease_or_title),disabled:ze.lease_or_title.isVerifying,className:`flex items-center gap-1 px-3 py-1 text-sm rounded transition-colors duration-300 border ${ze.lease_or_title.isVerified?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,children:ze.lease_or_title.isVerifying?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):ze.lease_or_title.isVerified?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(Pr,{className:"w-4 h-4"})," Verify"]})})]})]})]}),J.lease_or_title&&ze.lease_or_title.isVerifying&&t.jsxs("div",{className:"p-3 border-l border-r border-b border-gray-300 rounded-b-lg bg-blue-50",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-600",children:[t.jsx("span",{children:"Verifying document..."}),t.jsxs("span",{children:[ze.lease_or_title.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:t.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${ze.lease_or_title.progress}%`}})})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg bg-blue-50",children:[t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["Fire Safety Inspection Certificate (FSIC): ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:J.fsic?J.fsic.name:"Required"}),t.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"* This document is mandatory"})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"fsic",onChange:Ve,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden",required:!0}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${J.fsic?"border-green-200 bg-green-50":"border-red-300 bg-red-50"}`,style:{color:be.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),J.fsic?"Change":"Upload"]})]}),J.fsic&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{type:"button",onClick:()=>Mt(J.fsic),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:be.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]}),t.jsx("button",{type:"button",onClick:()=>as("fsic",J.fsic),disabled:ze.fsic.isVerifying,className:`flex items-center gap-1 px-3 py-1 text-sm rounded transition-colors duration-300 border ${ze.fsic.isVerified?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,children:ze.fsic.isVerifying?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):ze.fsic.isVerified?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(Pr,{className:"w-4 h-4"})," Verify"]})})]})]})]}),J.fsic&&ze.fsic.isVerifying&&t.jsxs("div",{className:"p-3 border-l border-r border-b border-gray-300 rounded-b-lg bg-blue-50",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-600",children:[t.jsx("span",{children:"Verifying document..."}),t.jsxs("span",{children:[ze.fsic.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:t.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${ze.fsic.progress}%`}})})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:Qe.official_receipt_file,onChange:()=>vt("official_receipt_file"),className:"mr-3 h-5 w-5"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Official Receipt of Payment:"}),t.jsx("p",{className:"text-sm text-gray-600",children:J.official_receipt_file?J.official_receipt_file.name:Qe.official_receipt_file?"Required":"Optional"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"official_receipt_file",onChange:Ve,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${J.official_receipt_file?"border-green-200 bg-green-50":"border-gray-300"}`,style:{color:be.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),J.official_receipt_file?"Change":"Upload"]})]}),J.official_receipt_file&&t.jsxs("button",{type:"button",onClick:()=>Mt(J.official_receipt_file),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:be.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]})]})]})]});case 5:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:be.secondary},children:"Declaration and Signature"}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:[t.jsxs("div",{className:"mb-8 p-6 border-2 border-red-200 bg-red-50 rounded-lg",children:[t.jsx("h4",{className:"font-bold text-lg mb-4 text-red-700",children:"BUSINESS PERMIT DECLARATION"}),t.jsxs("div",{className:"space-y-3 text-sm",style:{fontFamily:be.font},children:[t.jsxs("p",{children:["I, ",t.jsx("span",{className:"font-bold",children:Ct()||"[Full Name]"}),", hereby solemnly declare that:"]}),t.jsxs("ol",{className:"list-decimal ml-5 space-y-2",children:[t.jsx("li",{children:"All information provided in this application is true, complete, and correct;"}),t.jsx("li",{children:"I am the registered owner/authorized representative of the business described in this application;"}),t.jsx("li",{children:"The business remains compliant with all safety, sanitation, and environmental standards;"}),t.jsx("li",{children:"I have secured all necessary clearances, permits, and tax payments;"}),t.jsx("li",{children:"I shall continue to abide by all business regulations, rules, and ordinances of Caloocan City;"}),t.jsx("li",{children:"I understand that any false statement or misrepresentation shall be grounds for:"}),t.jsxs("ul",{className:"list-disc ml-8 mt-2 space-y-1",children:[t.jsx("li",{children:"Immediate cancellation of the permit"}),t.jsx("li",{children:"Administrative and criminal liability"}),t.jsx("li",{children:"Blacklisting from future applications"}),t.jsx("li",{children:"Fines and penalties as per existing laws"})]}),t.jsx("li",{children:"I agree to the processing of my personal data for application purposes in accordance with the Data Privacy Act of 2012;"}),t.jsx("li",{children:"I consent to inspections and monitoring by authorized personnel."})]}),t.jsx("p",{className:"mt-4 font-semibold",children:"Republic Act No. 11032 - Ease of Doing Business and Efficient Government Service Delivery Act of 2018"}),t.jsx("p",{className:"text-xs italic",children:'"Any person who makes any false statement in any business permit application shall be subject to penalties under existing laws."'})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:be.secondary},children:["Applicant's Signature ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 h-32 flex items-center justify-center",children:J.applicant_signature?t.jsxs("div",{className:"text-center",children:[t.jsx("img",{src:J.applicant_signature,alt:"Applicant Signature",className:"max-h-20 mx-auto"}),t.jsx("p",{className:"text-xs mt-2 text-green-600",children:"Signature uploaded"}),t.jsx("button",{type:"button",onClick:()=>He(Pe=>({...Pe,applicant_signature:""})),className:"text-xs text-red-600 mt-1 hover:text-red-800",children:"Remove"})]}):t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-gray-500 mb-2",children:"Upload your signature"}),t.jsx("input",{type:"file",accept:"image/*",onChange:et,className:"hidden",id:"signature-upload"}),t.jsx("label",{htmlFor:"signature-upload",className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100 transition-colors cursor-pointer",children:"Upload Signature"})]})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:be.secondary},children:["Date of Submission ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsxs("div",{className:"w-full p-3 border border-black rounded-lg bg-gray-50",children:[t.jsx("p",{style:{color:be.secondary,fontFamily:be.font},children:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",weekday:"long"})}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically set to current date and time upon submission"})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[t.jsxs("label",{className:"flex items-center gap-2",style:{color:be.secondary,fontFamily:be.font},children:[t.jsx("input",{type:"radio",name:"owner_type_declaration",value:"Business Owner",checked:J.owner_type_declaration==="Business Owner",onChange:Se,className:"accent-blue-600"}),"Business Owner"]}),t.jsxs("label",{className:"flex items-center gap-2",style:{color:be.secondary,fontFamily:be.font},children:[t.jsx("input",{type:"radio",name:"owner_type_declaration",value:"Representative",checked:J.owner_type_declaration==="Representative",onChange:Se,className:"accent-blue-600"}),"Representative"]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:be.secondary,fontFamily:be.font},children:["Name: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"owner_representative_name",value:J.owner_representative_name,onChange:Se,placeholder:J.owner_type_declaration==="Business Owner"?"Enter full name of business owner":"Enter full name of representative",className:"w-full p-3 border border-black rounded-lg",style:{color:be.secondary,fontFamily:be.font},required:!0})]}),J.owner_type_declaration==="Representative"&&t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[J.representative_scanned_id?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["Scanned ID of Representative: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:J.representative_scanned_id?J.representative_scanned_id.name:"Required"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Scanned ID of the person submitting on behalf of the owner"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"representative_scanned_id",onChange:Ve,accept:".jpg,.jpeg,.png,.pdf",className:"hidden",required:J.owner_type_declaration==="Representative"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${J.representative_scanned_id?"border-green-200 bg-green-50":"border-red-300 bg-red-50"}`,style:{color:be.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),J.representative_scanned_id?"Change":"Upload"]})]}),J.representative_scanned_id&&t.jsxs("button",{type:"button",onClick:()=>Mt(J.representative_scanned_id),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:be.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]})]})})]}),t.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("input",{type:"checkbox",id:"final-declaration",checked:j,onChange:Pe=>E(Pe.target.checked),className:"w-5 h-5 mt-1 text-green-600 border-gray-300 rounded focus:ring-green-500"}),t.jsxs("label",{htmlFor:"final-declaration",className:"ml-3",children:[t.jsx("span",{className:"font-bold text-red-700",children:"FINAL DECLARATION AND CONSENT *"}),t.jsxs("p",{className:"text-sm mt-1",style:{color:be.secondary,fontFamily:be.font},children:["I, ",t.jsx("span",{className:"font-semibold",children:Ct()||"[Full Name]"}),", have read, understood, and agree to all terms and conditions stated in this declaration. I certify that all information provided is accurate and I accept full responsibility for its veracity."]})]})]})})]})]});case 6:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:be.secondary,fontFamily:be.font},children:"Review Your Application"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:_e[5].description})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-4 text-lg border-b pb-2",style:{color:be.primary,fontFamily:be.font},children:"Owner Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"First Name:"}),t.jsx("p",{children:J.owner_first_name||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Middle Name:"}),t.jsx("p",{children:J.owner_middle_name||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Last Name:"}),t.jsx("p",{children:J.owner_last_name||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Owner Type:"}),t.jsx("p",{children:J.owner_type||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Citizenship:"}),t.jsx("p",{children:J.citizenship||"Not provided"})]}),J.owner_type==="Corporation"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Filipino %:"}),t.jsxs("p",{children:[J.corp_filipino_percent||"0","%"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Foreign %:"}),t.jsxs("p",{children:[J.corp_foreign_percent||"0","%"]})]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Date of Birth:"}),t.jsx("p",{children:J.date_of_birth||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Contact Number:"}),t.jsx("p",{children:J.contact_number||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Email Address:"}),t.jsx("p",{children:J.email_address||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Home Address:"}),t.jsx("p",{children:J.home_address||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Valid ID Type:"}),t.jsx("p",{children:J.valid_id_type||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Valid ID Number:"}),t.jsx("p",{children:J.valid_id_number||"Not provided"})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-4 text-lg border-b pb-2",style:{color:be.primary,fontFamily:be.font},children:"Business Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Business Name:"}),t.jsx("p",{children:J.business_name||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Trade Name:"}),t.jsx("p",{children:J.trade_name||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Nature of Business:"}),t.jsx("p",{children:J.business_nature||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Building Type:"}),t.jsx("p",{children:J.building_type||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Capital Investment:"}),t.jsxs("p",{children:["",J.capital_investment||"0"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Gross Sale:"}),t.jsxs("p",{children:["",J.gross_sale||"0"]})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-4 text-lg border-b pb-2",style:{color:be.primary,fontFamily:be.font},children:"Location Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"House/Bldg. No:"}),t.jsx("p",{children:J.house_bldg_no||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Building Name:"}),t.jsx("p",{children:J.building_name||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Block No:"}),t.jsx("p",{children:J.block_no||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Lot No:"}),t.jsx("p",{children:J.lot_no||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Street:"}),t.jsx("p",{children:J.street||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Subdivision:"}),t.jsx("p",{children:J.subdivision||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Province:"}),t.jsx("p",{children:J.province||"Metro Manila"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"City/Municipality:"}),t.jsx("p",{children:J.city_municipality||"Caloocan City"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Barangay:"}),t.jsx("p",{children:J.barangay||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Zip Code:"}),t.jsx("p",{children:J.zip_code||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"District:"}),t.jsx("p",{children:J.district||"Not provided"})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-4 text-lg border-b pb-2",style:{color:be.primary,fontFamily:be.font},children:"Operations Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Zoning Permit ID:"}),t.jsx("p",{children:J.zoning_permit_id||"Not provided"}),X[J.zoning_permit_id]?t.jsx("span",{className:"text-sm text-green-600",children:" Verified and Valid"}):t.jsx("span",{className:"text-sm text-yellow-600",children:" Needs verification"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Sanitation Permit ID:"}),t.jsx("p",{children:J.sanitation_permit_id||"Not provided"}),Zt()&&!J.sanitation_permit_id&&t.jsx("p",{className:"text-sm text-blue-500",children:"Note: Recommended for this type of business"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Type of Operation:"}),t.jsx("p",{children:J.operation_type||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Business Area:"}),t.jsxs("p",{children:[J.business_area||"0"," sq. m."]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Total Floor Area:"}),t.jsxs("p",{children:[J.total_floor_area||"0"," sq. m."]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Time of Operation:"}),t.jsx("p",{children:J.operation_time_from&&J.operation_time_to?`${J.operation_time_from} to ${J.operation_time_to}`:"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Total Employees:"}),t.jsx("p",{children:J.total_employees||"0"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Male Employees:"}),t.jsx("p",{children:J.male_employees||"0"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Female Employees:"}),t.jsx("p",{children:J.female_employees||"0"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Employees in QC:"}),t.jsx("p",{children:J.employees_in_qc||"0"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Delivery Van/Truck:"}),t.jsx("p",{children:J.delivery_van_truck||"0"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Delivery Motorcycle:"}),t.jsx("p",{children:J.delivery_motorcycle||"0"})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-4 text-lg border-b pb-2",style:{color:be.primary,fontFamily:be.font},children:"Declaration & Signature"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Submitted by:"}),t.jsx("p",{children:J.owner_type_declaration||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Name:"}),t.jsx("p",{children:J.owner_representative_name||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Date Submitted:"}),t.jsx("p",{children:"Current date and time upon submission"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Application Date:"}),t.jsx("p",{children:J.application_date||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Permit Type:"}),t.jsx("p",{children:J.permit_type||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",style:{color:be.secondary},children:"Signature:"}),t.jsx("p",{children:J.applicant_signature?" Uploaded":"Missing"})]})]})]})]})})]});default:return null}};return t.jsxs("div",{className:"mx-1 mt-1 p-6 rounded-lg min-h-screen",style:{background:be.background,color:be.secondary,fontFamily:be.font},children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold",style:{color:be.primary,fontFamily:be.font},children:"BUSINESS NEW PERMIT APPLICATION"}),t.jsxs("p",{className:"mt-2",style:{color:be.secondary,fontFamily:be.font},children:["Permit Type: ",t.jsx("span",{className:"font-semibold",style:{color:be.success},children:s})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:()=>e("/user/business/type"),className:"px-4 py-2 rounded-lg font-semibold text-white hover:bg-[#FDA811] transition-colors duration-300",style:{background:be.success,fontFamily:be.font},onMouseEnter:Pe=>Pe.currentTarget.style.background=be.accent,onMouseLeave:Pe=>Pe.currentTarget.style.background=be.success,children:"Change Type"})})]}),t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"flex items-center justify-between",children:_e.map((Pe,Ke)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2",style:{background:r>=Pe.id?be.success:"transparent",borderColor:r>=Pe.id?be.success:"#9CA3AF",color:r>=Pe.id?"#fff":"#9CA3AF",fontFamily:be.font},children:Pe.id}),t.jsxs("div",{className:"ml-3 hidden md:block",children:[t.jsx("p",{className:"text-sm font-medium",style:{color:r>=Pe.id?be.success:be.secondary,fontFamily:be.font},children:Pe.title}),t.jsx("p",{className:"text-xs text-gray-500",children:Pe.description})]}),Ke<_e.length-1&&t.jsx("div",{className:"hidden md:block w-16 h-0.5 mx-4",style:{background:r>Pe.id?be.success:"#9CA3AF"}})]},Pe.id))})}),l&&t.jsx("div",{className:"p-4 mb-6 rounded",style:{background:l.type==="success"?"#e6f9ed":"#fdecea",color:l.type==="success"?be.success:be.danger,fontFamily:be.font,border:"1px solid "+(l.type==="success"?be.success:be.danger)},children:l.message}),t.jsxs("form",{onSubmit:Je,className:"space-y-8",children:[It(),t.jsxs("div",{className:"flex justify-between pt-6",children:[r>1&&t.jsx("button",{type:"button",onClick:Ne,className:"px-6 py-3 rounded-lg font-semibold text-white hover:bg-[#FDA811] transition-colors duration-300",style:{background:be.success,fontFamily:be.font},onMouseEnter:Pe=>Pe.currentTarget.style.background=be.accent,onMouseLeave:Pe=>Pe.currentTarget.style.background=be.success,children:"Previous"}),r<_e.length?t.jsx("button",{type:"submit",className:"px-6 py-3 rounded-lg font-semibold text-white hover:bg-[#FDA811] transition-colors duration-300",style:{background:be.success,fontFamily:be.font},onMouseEnter:Pe=>Pe.currentTarget.style.background=be.accent,onMouseLeave:Pe=>Pe.currentTarget.style.background=be.success,children:r===_e.length-1?"Review":"Next"}):t.jsx("button",{type:"button",onClick:Je,className:"px-6 py-3 rounded-lg font-semibold text-white hover:bg-[#FDA811] transition-colors duration-300",style:{background:be.success,fontFamily:be.font},onMouseEnter:Pe=>Pe.currentTarget.style.background=be.accent,onMouseLeave:Pe=>Pe.currentTarget.style.background=be.success,children:"Submit Application"})]})]}),V&&ae&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:be.font,backdropFilter:"blur(10px)"},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${ae.success?"bg-green-100":"bg-red-100"}`,children:ae.success?t.jsx(Ht,{className:"w-8 h-8 text-green-600"}):t.jsx(Ks,{className:"w-8 h-8 text-red-600"})})}),t.jsx("h2",{className:"text-2xl font-bold text-center mb-4",style:{color:ae.success?be.success:be.danger},children:ae.success?"VALID DOCUMENT":"INVALID DOCUMENT"}),t.jsx("div",{className:"mb-6",children:t.jsx("p",{className:"text-center text-base",style:{color:be.secondary,fontFamily:be.font},children:ae.success?"The zoning permit ID has been successfully verified and is valid for use in this application.":"The zoning permit ID could not be verified. Please check the ID number or ensure the document is readable and approved."})}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:()=>O(!1),style:{background:ae.success?be.success:be.danger},onMouseEnter:Pe=>Pe.currentTarget.style.background=be.accent,onMouseLeave:Pe=>Pe.currentTarget.style.background=ae.success?be.success:be.danger,className:"px-8 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:ae.success?"Continue Application":"Close"})})]})}),se&&R&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"rounded-lg shadow-lg max-w-lg w-full border border-gray-200 p-8",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:be.font,backdropFilter:"blur(10px)"},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${R.success?"bg-green-100":"bg-red-100"}`,children:R.success?t.jsx(Ht,{className:"w-8 h-8 text-green-600"}):t.jsx(Ks,{className:"w-8 h-8 text-red-600"})})}),t.jsx("h2",{className:"text-2xl font-bold text-center mb-4",style:{color:R.success?be.success:be.danger},children:R.success?"VALID DOCUMENT":"INVALID DOCUMENT"}),t.jsx("div",{className:"mb-6",children:t.jsx("p",{className:"text-center text-base",style:{color:be.secondary,fontFamily:be.font},children:R.success?"The barangay clearance ID has been successfully verified and is valid for use in this application.":"The barangay clearance ID could not be verified. Please check the ID number or ensure the document is readable and approved."})}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:()=>le(!1),style:{background:R.success?be.success:be.danger},onMouseEnter:Pe=>Pe.currentTarget.style.background=be.accent,onMouseLeave:Pe=>Pe.currentTarget.style.background=R.success?be.success:be.danger,className:"px-8 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:R.success?"Continue Application":"Close"})})]})}),Ae&&ce&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"rounded-lg shadow-lg max-w-lg w-full border border-gray-200 p-8",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:be.font,backdropFilter:"blur(10px)"},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${ce.success?"bg-green-100":"bg-red-100"}`,children:ce.success?t.jsx(Ht,{className:"w-8 h-8 text-green-600"}):t.jsx(Ks,{className:"w-8 h-8 text-red-600"})})}),t.jsx("h2",{className:"text-2xl font-bold text-center mb-4",style:{color:ce.success?be.success:be.danger},children:ce.success?"VALID DOCUMENT":"INVALID DOCUMENT"}),t.jsx("div",{className:"mb-6",children:t.jsx("p",{className:"text-center text-base",style:{color:be.secondary,fontFamily:be.font},children:ce.success?"The sanitation permit ID has been successfully verified and is valid for use in this application.":"The sanitation permit ID could not be verified. Please check the ID number or ensure the document is readable and approved."})}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:()=>gt(!1),style:{background:ce.success?be.success:be.danger},onMouseEnter:Pe=>Pe.currentTarget.style.background=be.accent,onMouseLeave:Pe=>Pe.currentTarget.style.background=ce.success?be.success:be.danger,className:"px-8 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:ce.success?"Continue Application":"Close"})})]})}),M&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"rounded-lg shadow-lg max-w-md w-full border border-gray-200 p-8",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:be.font,backdropFilter:"blur(10px)"},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center bg-blue-100",children:t.jsx(Or,{className:"w-8 h-8 text-blue-600 animate-spin"})})}),t.jsx("h2",{className:"text-2xl font-bold text-center mb-4",style:{color:be.primary},children:"Verifying Document"}),t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-center text-base mb-4",style:{color:be.secondary,fontFamily:be.font},children:"Please wait while we verify your document..."}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:t.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${P}%`}})}),t.jsxs("p",{className:"text-center text-sm mt-2",style:{color:be.secondary},children:[P,"% complete"]})]})]})}),oe&&W&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"rounded-lg shadow-lg max-w-lg w-full border border-gray-200 p-8",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:be.font,backdropFilter:"blur(10px)"},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${W.isVerified?"bg-green-100":"bg-red-100"}`,children:W.isVerified?t.jsx(Ht,{className:"w-8 h-8 text-green-600"}):t.jsx(Ks,{className:"w-8 h-8 text-red-600"})})}),t.jsx("h2",{className:"text-2xl font-bold text-center mb-4",style:{color:W.isVerified?be.success:be.danger},children:W.isVerified?"VALID DOCUMENT":"INVALID DOCUMENT"}),t.jsx("div",{className:"mb-6",children:W.isVerified?t.jsx("p",{className:"text-center text-base mb-4",style:{color:be.secondary,fontFamily:be.font},children:"The document has been successfully verified and is valid for use in this application."}):t.jsx("div",{className:"text-left",children:W.invalidReasons&&W.invalidReasons.length>0?t.jsx("div",{children:W.invalidReasons.map((Pe,Ke)=>t.jsx("p",{className:`mb-2 ${Ke===0?"font-semibold text-base":"text-sm ml-4"}`,style:{color:be.secondary,fontFamily:be.font},children:Pe},Ke))}):t.jsx("p",{className:"text-center text-base mb-4",style:{color:be.secondary,fontFamily:be.font},children:"Document may be unreadable or unclear. Please re-upload a clear copy."})})}),t.jsxs("div",{className:"flex justify-center gap-3",children:[!W.isVerified&&t.jsx("button",{onClick:()=>{he(!1),W.documentType&&(He(Pe=>({...Pe,[W.documentType]:null})),Le(Pe=>({...Pe,[W.documentType]:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0}})))},style:{background:be.primary},onMouseEnter:Pe=>Pe.currentTarget.style.background=be.accent,onMouseLeave:Pe=>Pe.currentTarget.style.background=be.primary,className:"px-8 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:"Re-upload Document"}),t.jsx("button",{onClick:()=>he(!1),style:{background:W.isVerified?be.success:be.danger},onMouseEnter:Pe=>Pe.currentTarget.style.background=be.accent,onMouseLeave:Pe=>Pe.currentTarget.style.background=W.isVerified?be.success:be.danger,className:"px-8 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:W.isVerified?"Continue Application":"Close"})]})]})}),S.url&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"rounded-lg shadow-lg w-full max-w-4xl border border-gray-200 overflow-hidden",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:be.font,backdropFilter:"blur(10px)",maxHeight:"90vh"},children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold",style:{color:be.primary},children:"Preview Document"}),t.jsx("button",{onClick:Ye,className:"text-gray-500 hover:text-gray-700 transition-colors duration-300",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 overflow-auto",style:{maxHeight:"calc(90vh - 80px)"},children:[t.jsxs("p",{className:"text-sm mb-4",style:{color:be.secondary,fontFamily:be.font},children:["File: ",t.jsx("span",{className:"font-medium",children:S.name})]}),t.jsx("div",{className:"bg-white rounded-lg border p-4",children:S.type==="image"?t.jsx("div",{className:"flex justify-center",children:t.jsx("img",{src:S.url,alt:"Preview",className:"max-w-full h-auto max-h-[500px]"})}):S.type==="application"&&S.name?.includes(".pdf")?t.jsx("iframe",{src:S.url,className:"w-full h-[500px] rounded",title:"PDF Preview"}):t.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[t.jsx(Kt,{className:"w-24 h-24 text-gray-400 mb-4"}),t.jsxs("p",{className:"text-gray-600 mb-2",children:["File: ",S.name]}),t.jsx("p",{className:"text-gray-500 mb-6",children:"Preview not available for this file type"}),t.jsx("a",{href:S.url,download:S.name,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors duration-300",children:"Download File"})]})}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsx("button",{onClick:Ye,style:{background:be.success},onMouseEnter:Pe=>Pe.currentTarget.style.background=be.accent,onMouseLeave:Pe=>Pe.currentTarget.style.background=be.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close Preview"})})]})]})}),u&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:be.font,backdropFilter:"blur(10px)"},children:[t.jsx("h2",{className:"text-xl font-bold mb-6",style:{color:be.primary},children:"Final Submission"}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border mb-4",children:[t.jsx("p",{className:"text-sm font-semibold mb-2",style:{color:be.secondary,fontFamily:be.font},children:"Final Confirmation:"}),t.jsx("p",{className:"text-sm mb-3",style:{color:be.secondary,fontFamily:be.font},children:"Are you sure you want to submit your business permit application? Please review all information before submitting."}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"final-confirmation-checkbox",checked:j,onChange:Pe=>E(Pe.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),t.jsx("label",{htmlFor:"final-confirmation-checkbox",className:"ml-2 text-sm",style:{color:be.secondary,fontFamily:be.font},children:"I confirm that all information is correct and I agree to the terms *"})]})]}),t.jsx("p",{className:"text-sm",style:{color:be.secondary,fontFamily:be.font},children:"By submitting, you confirm that all information provided is accurate and complete."})]}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("button",{onClick:()=>m(!1),disabled:i,style:{background:be.danger},onMouseEnter:Pe=>{i||(Pe.currentTarget.style.background=be.accent)},onMouseLeave:Pe=>{i||(Pe.currentTarget.style.background=be.danger)},className:`px-6 py-2 rounded-lg font-semibold text-white ${i?"cursor-not-allowed":"transition-colors duration-300"}`,children:"Cancel"}),t.jsx("button",{onClick:ht,disabled:i||!j,style:{background:!j||i?"#9CA3AF":be.success},onMouseEnter:Pe=>{!i&&j&&(Pe.currentTarget.style.background=be.accent)},onMouseLeave:Pe=>{!i&&j&&(Pe.currentTarget.style.background=be.success)},className:`px-6 py-2 rounded-lg font-semibold text-white ${i||!j?"cursor-not-allowed":"transition-colors duration-300"}`,children:i?"Submitting...":"Submit Application"})]})]})}),A&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:be.font,backdropFilter:"blur(10px)"},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center",children:t.jsx(Ht,{className:"w-8 h-8 text-green-600"})})}),t.jsx("h2",{className:"text-xl font-bold text-center mb-4",style:{color:be.primary},children:w}),t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-sm text-center mb-3",style:{color:be.secondary,fontFamily:be.font},children:b}),t.jsx("p",{className:"text-xs text-center text-gray-500",style:{fontFamily:be.font},children:"You will be redirected to your dashboard in a few seconds..."})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:()=>{g(!1),e("/user/permittracker")},style:{background:be.success},onMouseEnter:Pe=>Pe.currentTarget.style.background=be.accent,onMouseLeave:Pe=>Pe.currentTarget.style.background=be.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Track Application"})})]})}),p&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:be.font,backdropFilter:"blur(10px)"},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center",children:t.jsx(ls,{className:"w-8 h-8 text-red-600"})})}),t.jsx("h2",{className:"text-xl font-bold text-center mb-4",style:{color:be.danger},children:w}),t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-sm text-center mb-3",style:{color:be.secondary,fontFamily:be.font},children:b}),t.jsx("p",{className:"text-xs text-center text-gray-500",style:{fontFamily:be.font},children:"Please check your information and try again."})]}),t.jsxs("div",{className:"flex justify-center gap-4",children:[t.jsx("button",{onClick:()=>v(!1),style:{background:be.danger},onMouseEnter:Pe=>Pe.currentTarget.style.background=be.accent,onMouseLeave:Pe=>Pe.currentTarget.style.background=be.danger,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close"}),t.jsx("button",{onClick:()=>v(!1),style:{background:be.success},onMouseEnter:Pe=>Pe.currentTarget.style.background=be.accent,onMouseLeave:Pe=>Pe.currentTarget.style.background=be.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Try Again"})]})]})})]})}typeof window<"u"&&(vd.workerSrc=new URL("/assets/pdf.worker.min-wgc6bjNh.mjs",import.meta.url).toString());const We={primary:"#4A90E2",secondary:"#000000",accent:"#FDA811",success:"#4CAF50",danger:"#E53935",background:"#FBFBFB",font:"Montserrat, Arial, sans-serif"},bS="/backend/business_permit/submit_renewal.php",dq="/backend/barangay_permit/admin_fetch.php",uq="https://revenuetreasury.goserveph.com/api/business/fetch_business_paid.php",hq=["Afghan","Albanian","Algerian","American","Andorran","Angolan","Antiguans","Argentinean","Armenian","Australian","Austrian","Azerbaijani","Bahamian","Bahraini","Bangladeshi","Barbadian","Barbudans","Batswana","Belarusian","Belgian","Belizean","Beninese","Bhutanese","Bolivian","Bosnian","Brazilian","British","Bruneian","Bulgarian","Burkinabe","Burmese","Burundian","Cambodian","Cameroonian","Canadian","Cape Verdean","Central African","Chadian","Chilean","Chinese","Colombian","Comoran","Congolese","Costa Rican","Croatian","Cuban","Cypriot","Czech","Danish","Djibouti","Dominican","Dutch","East Timorese","Ecuadorean","Egyptian","Emirian","Equatorial Guinean","Eritrean","Estonian","Ethiopian","Fijian","Filipino","Finnish","French","Gabonese","Gambian","Georgian","German","Ghanaian","Greek","Grenadian","Guatemalan","Guinea-Bissauan","Guinean","Guyanese","Haitian","Herzegovinian","Honduran","Hungarian","I-Kiribati","Icelander","Indian","Indonesian","Iranian","Iraqi","Irish","Israeli","Italian","Ivorian","Jamaican","Japanese","Jordanian","Kazakhstani","Kenyan","Kittian and Nevisian","Kuwaiti","Kyrgyz","Laotian","Latvian","Lebanese","Liberian","Libyan","Liechtensteiner","Lithuanian","Luxembourger","Macedonian","Malagasy","Malawian","Malaysian","Maldivan","Malian","Maltese","Marshallese","Mauritanian","Mauritian","Mexican","Micronesian","Moldovan","Monacan","Mongolian","Moroccan","Mosotho","Motswana","Mozambican","Namibian","Nauruan","Nepalese","New Zealander","Nicaraguan","Nigerian","Nigerien","North Korean","Northern Irish","Norwegian","Omani","Pakistani","Palauan","Palestinian","Panamanian","Papua New Guinean","Paraguayan","Peruvian","Polish","Portuguese","Qatari","Romanian","Russian","Rwandan","Saint Lucian","Salvadoran","Samoan","San Marinese","Sao Tomean","Saudi","Scottish","Senegalese","Serbian","Seychellois","Sierra Leonean","Singaporean","Slovakian","Slovenian","Solomon Islander","Somali","South African","South Korean","Spanish","Sri Lankan","Sudanese","Surinamer","Swazi","Swedish","Swiss","Syrian","Taiwanese","Tajik","Tanzanian","Thai","Togolese","Tongan","Trinidadian or Tobagonian","Tunisian","Turkish","Tuvaluan","Ugandan","Ukrainian","Uruguayan","Uzbekistani","Venezuelan","Vietnamese","Welsh","Yemenite","Zambian","Zimbabwean"];function mq(){const a=Ti(),e=ka(),s=new Date().toISOString().split("T")[0],[r,n]=C.useState(1),[i,o]=C.useState(!1),[l,c]=C.useState(null),[u,m]=C.useState(!1),[A,g]=C.useState(!1),[p,v]=C.useState(!1),[b,y]=C.useState(""),[w,B]=C.useState(""),[j,E]=C.useState(!1),[S,T]=C.useState({}),[M,D]=C.useState(null),[P,Y]=C.useState({barangay_clearance:!0,owner_valid_id:!0,official_receipt_file:!1,business_tax_receipt:!0,fire_safety_certificate:!0,sanitation_permit:!1}),[Q,L]=C.useState(""),[ae,ne]=C.useState(!1),[V,O]=C.useState(""),[X,$]=C.useState(!1),[H,te]=C.useState(null),[K,I]=C.useState(!1),[R,G]=C.useState({}),[se,le]=C.useState("upload"),[ye,De]=C.useState(!1),[me,Te]=C.useState(null),[we,st]=C.useState(!1),[ce,tt]=C.useState({}),[Ae,gt]=C.useState("upload"),[q,Qt]=C.useState({barangay_clearance_file:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},owner_valid_id_file:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},business_tax_receipt:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},fire_safety_certificate:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0}}),[yt,Oe]=C.useState(!1),[ze,Le]=C.useState(null),[oe,he]=C.useState({permit_type:"Renewal",application_date:s,permit_expiry:"",official_receipt_no:"",owner_type:"Individual",owner_last_name:"",owner_first_name:"",owner_middle_name:"",citizenship:"Filipino",contact_number:"",email_address:"",home_address:"",valid_id_type:"Passport",valid_id_number:"",business_name:"",trade_name:"",gross_sale:"",total_employees:"0",male_employees:"0",female_employees:"0",business_nature:"",house_bldg_no:"",street:"",barangay:"",city_municipality:"Caloocan City",province:"Metro Manila",zip_code:"",business_area:"",total_floor_area:"",building_type:"Commercial",capital_investment:"",barangay_clearance_file:null,barangay_clearance_id:"",owner_valid_id_file:null,official_receipt_file:null,business_tax_receipt:null,business_tax_receipt_id:"",fire_safety_certificate:null,sanitation_permit:null,date_submitted:s,applicant_signature:""});C.useEffect(()=>{if(a.state?.existingPermit){const ue=a.state.existingPermit;D(ue.permit_id),he(fe=>({...fe,business_name:ue.business_name||"",trade_name:ue.trade_name||"",owner_last_name:ue.owner_last_name||"",owner_first_name:ue.owner_first_name||"",owner_middle_name:ue.owner_middle_name||"",contact_number:ue.contact_number||"",email_address:ue.email_address||"",home_address:ue.home_address||"",business_nature:ue.business_nature||"",gross_sale:ue.gross_sale||"",total_employees:ue.total_employees?.toString()||"0",male_employees:ue.male_employees?.toString()||"0",female_employees:ue.female_employees?.toString()||"0",house_bldg_no:ue.house_bldg_no||"",street:ue.street||"",barangay:ue.barangay||"",zip_code:ue.zip_code||"",business_area:ue.business_area||"",total_floor_area:ue.total_floor_area||"",building_type:ue.building_type||"Commercial",capital_investment:ue.capital_investment||"",valid_id_type:ue.valid_id_type||"Passport",valid_id_number:ue.valid_id_number||"",citizenship:ue.citizenship||"Filipino"}))}},[a.state]);const W=()=>[oe.owner_first_name,oe.owner_middle_name,oe.owner_last_name].filter(Boolean).join(" "),ve=async()=>{if(!Q.trim()){O("Please enter an Applicant ID");return}ne(!0),O("");try{const ue=await fetch(`/backend/business_permit/fetch_by_applicant.php?applicant_id=${Q}`);if(!ue.ok)throw new Error(`HTTP error! status: ${ue.status}`);const fe=await ue.json();if(fe.success&&fe.data){const xe=fe.data;he(Me=>({...Me,owner_last_name:xe.owner_last_name||"",owner_first_name:xe.owner_first_name||"",owner_middle_name:xe.owner_middle_name||"",citizenship:xe.citizenship||"Filipino",contact_number:xe.contact_number||"",email_address:xe.email_address||"",home_address:xe.home_address||"",valid_id_type:xe.valid_id_type||"Passport",valid_id_number:xe.valid_id_number||"",business_name:xe.business_name||"",trade_name:xe.trade_name||"",business_nature:xe.business_nature||"",gross_sale:xe.gross_sale||"",total_employees:xe.total_employees?.toString()||"0",male_employees:xe.male_employees?.toString()||"0",female_employees:xe.female_employees?.toString()||"0",house_bldg_no:xe.house_bldg_no||"",street:xe.street||"",barangay:xe.barangay||"",zip_code:xe.zip_code||"",business_area:xe.business_area||"",total_floor_area:xe.total_floor_area||"",building_type:xe.building_type||"Commercial",capital_investment:xe.capital_investment||""})),D(xe.permit_id),Ct("Applicant data loaded successfully!")}else throw new Error(fe.message||"No data found for this Applicant ID")}catch(ue){console.error("Error fetching applicant data:",ue),O(ue.message||"Failed to fetch applicant data")}finally{ne(!1)}},Qe=[{id:1,title:"Renewal Information",description:"Basic renewal details and permit information"},{id:2,title:"Owner Information",description:"Personal details of the business owner"},{id:3,title:"Business Details & Address",description:"Updated business information and location"},{id:4,title:"Required Documents",description:"Upload renewal documents"},{id:5,title:"Declaration & Submit",description:"Finalize and submit your renewal"}],Ze=ue=>{const{name:fe,value:xe}=ue.target;["total_employees","male_employees","female_employees","business_area","total_floor_area","capital_investment","gross_sale"].includes(fe)?(xe===""||/^\d*\.?\d*$/.test(xe))&&he(Me=>({...Me,[fe]:xe})):he(Me=>({...Me,[fe]:xe}))},J=ue=>{const{name:fe,files:xe}=ue.target,Me=xe?.[0]||null;he(ct=>({...ct,[fe]:Me}))},He=ue=>{const fe=ue.target.files[0];if(fe){const xe=new FileReader;xe.onloadend=()=>{he(Me=>({...Me,applicant_signature:xe.result}))},xe.readAsDataURL(fe)}},xt=ue=>{if(ue){const fe=URL.createObjectURL(ue);T({url:fe,type:ue.type.split("/")[0],name:ue.name})}},Xe=()=>{S.url&&URL.revokeObjectURL(S.url),T({})},Ct=ue=>{B("Success!"),y(ue),g(!0)},_e=ue=>{B("Error"),y(ue),v(!0)},Se=()=>["Health / Clinic / Pharmacy","Restaurant / Eatery / Food Service","Catering Services","Bakery / Pastry / Cake Shop","Water Refilling Station"].includes(oe.business_nature),Ve=async()=>{const ue=oe.barangay_clearance_id.trim();if(!ue){te({success:!1,message:"Please enter a barangay clearance ID to verify"}),I(!0);return}if(R[ue]){te({success:!0,message:"Barangay clearance ID is already verified and valid!",data:R[ue]}),I(!0);return}$(!0);try{const fe=await fetch(dq);if(!fe.ok)throw new Error(`HTTP error! status: ${fe.status}`);const xe=await fe.json();let Me=[];xe.success&&xe.data?Me=xe.data:Array.isArray(xe)?Me=xe:Me=xe.permits||[];const ct=Me.find(Pt=>{const ts=Pt.applicant_id?Pt.applicant_id.toString():"",as=Pt.permit_id?Pt.permit_id.toString():"",Zt=ue.toString();return(ts===Zt||as===Zt)&&Pt.status==="approved"});ct?(te({success:!0,message:"Barangay clearance ID is VALID! Status: approved",data:ct}),G(Pt=>({...Pt,[ue]:ct})),ct.permit_id&&he(Pt=>({...Pt,barangay_permit_id:ct.permit_id}))):te({success:!1,message:" Barangay clearance ID not found or not approved. Please check the ID and try again.",data:null})}catch(fe){console.error("Error verifying barangay clearance ID:",fe),te({success:!1,message:" Error connecting to verification service. Please try again later."})}finally{$(!1),I(!0)}},et=async()=>{const ue=oe.business_tax_receipt_id?.trim();if(!ue){Te({success:!1,message:"Please enter a business ID to verify"}),st(!0);return}if(ce[ue]){Te({success:!0,message:"Business tax receipt is already verified and paid!",data:ce[ue]}),st(!0);return}De(!0);try{const fe=await fetch(`${uq}?business_id=${ue}`);if(!fe.ok)throw new Error(`HTTP error! status: ${fe.status}`);const xe=await fe.json();if(xe.success&&xe.data){const Me=xe.data;Me.status&&Me.status.toLowerCase()==="paid"?(Te({success:!0,message:"Business tax receipt is VALID and PAID!",data:Me}),tt(ct=>({...ct,[ue]:Me}))):Te({success:!1,message:` Business found but payment status is: ${Me.status||"unknown"}. Only paid receipts are accepted.`,data:Me})}else Te({success:!1,message:" Business ID not found in revenue system. Please check the ID and try again.",data:null})}catch(fe){console.error("Error verifying business tax receipt:",fe),Te({success:!1,message:" Error connecting to revenue treasury service. Please try again later."})}finally{De(!1),st(!0)}},vt=async ue=>{try{const fe=await ue.arrayBuffer(),xe=await Lp({data:fe}).promise,Me=[],ct=Math.min(xe.numPages,3);for(let Pt=1;Pt<=ct;Pt++){const ts=await xe.getPage(Pt),as=ts.getViewport({scale:2}),Zt=document.createElement("canvas"),Be=Zt.getContext("2d");Zt.width=as.width,Zt.height=as.height,await ts.render({canvasContext:Be,viewport:as}).promise,Me.push(Zt)}return Me}catch(fe){throw console.error("Error converting PDF to images:",fe),fe}},Mt=async(ue,fe)=>{if(!fe){Qt(xe=>({...xe,[ue]:{...xe[ue],error:"Please upload the document first",isVerified:!1}}));return}Qt(xe=>({...xe,[ue]:{isVerifying:!0,isVerified:!1,results:null,error:null,progress:0}}));try{const xe=await bA.createWorker("eng",1,{logger:as=>{if(as.status==="recognizing text"){const Zt=Math.round(as.progress*100);Qt(Be=>({...Be,[ue]:{...Be[ue],progress:Zt}}))}}});let Me="";if(fe.type==="application/pdf"){const as=await vt(fe);for(let Zt=0;Zt<as.length;Zt++){const{data:{text:Be}}=await xe.recognize(as[Zt]);Me+=Be+`
`}}else{const{data:{text:as}}=await xe.recognize(fe);Me=as}await xe.terminate();const ct=Me.toLowerCase();let Pt=!1,ts="";ue==="barangay_clearance_file"?(Pt=ct.includes("barangay")||ct.includes("clearance"),ts=Pt?"Document appears to be a valid Barangay Clearance":"Document may not be a Barangay Clearance"):ue==="business_tax_receipt"?(Pt=ct.includes("tax")||ct.includes("receipt")||ct.includes("business"),ts=Pt?"Document appears to be a valid Business Tax Receipt":"Document may not be a Business Tax Receipt"):ue==="fire_safety_certificate"?(Pt=ct.includes("fire")||ct.includes("safety")||ct.includes("fsic"),ts=Pt?"Document appears to be a valid Fire Safety Certificate":"Document may not be a Fire Safety Certificate"):ue==="owner_valid_id_file"&&(Pt=ct.includes("id")||ct.includes("license")||ct.includes("passport"),ts=Pt?"Document appears to be a valid ID":"Document may not be a valid ID"),Qt(as=>({...as,[ue]:{isVerifying:!1,isVerified:Pt,results:{text:Me,message:ts},error:null,progress:100}})),Le({documentType:ue,isValid:Pt,message:ts,extractedText:Me.substring(0,500)}),Oe(!0)}catch(xe){console.error("Document verification error:",xe),Qt(Me=>({...Me,[ue]:{isVerifying:!1,isVerified:!1,results:null,error:xe.message||"Verification failed",progress:0}}))}},Ye=ue=>{const fe=xe=>xe==null||typeof xe=="string"&&xe.trim()==="";if(ue===1){const xe=[];return fe(oe.permit_expiry)&&xe.push("Permit Expiry Date"),fe(oe.official_receipt_no)&&xe.push("Official Receipt Number"),xe.length?{ok:!1,message:"Missing: "+xe.join(", ")}:{ok:!0}}if(ue===2){const xe=[];return fe(oe.owner_first_name)&&xe.push("First Name"),fe(oe.owner_last_name)&&xe.push("Last Name"),fe(oe.citizenship)&&xe.push("Citizenship"),fe(oe.contact_number)&&xe.push("Contact Number"),fe(oe.email_address)&&xe.push("Email Address"),fe(oe.home_address)&&xe.push("Home Address"),fe(oe.valid_id_type)&&xe.push("Valid ID Type"),fe(oe.valid_id_number)&&xe.push("Valid ID Number"),xe.length?{ok:!1,message:"Missing: "+xe.join(", ")}:{ok:!0}}if(ue===3){const xe=[];fe(oe.business_name)&&xe.push("Business Name"),fe(oe.trade_name)&&xe.push("Trade Name"),fe(oe.business_nature)&&xe.push("Nature of Business"),fe(oe.gross_sale)&&xe.push("Gross Sale"),(fe(oe.total_employees)||oe.total_employees==="0")&&xe.push("Total Employees");const Me=parseInt(oe.total_employees)||0,ct=parseInt(oe.male_employees)||0,Pt=parseInt(oe.female_employees)||0;return ct+Pt!==Me?{ok:!1,message:"Male + Female employees must equal Total Employees"}:(fe(oe.house_bldg_no)&&xe.push("House/Bldg. No"),fe(oe.street)&&xe.push("Street"),fe(oe.barangay)&&xe.push("Barangay"),(fe(oe.business_area)||oe.business_area==="0")&&xe.push("Business Area"),(fe(oe.total_floor_area)||oe.total_floor_area==="0")&&xe.push("Total Floor Area"),(fe(oe.capital_investment)||oe.capital_investment==="0")&&xe.push("Capital Investment"),xe.length?{ok:!1,message:"Missing: "+xe.join(", ")}:{ok:!0})}if(ue===4){const xe=[];return fe(oe.barangay_clearance_file)&&fe(oe.barangay_clearance_id)&&xe.push("Barangay Clearance (file or ID)"),fe(oe.owner_valid_id_file)&&xe.push("Owner Valid ID"),P.official_receipt_file&&fe(oe.official_receipt_file)&&xe.push("Official Receipt of Payment"),xe.length?{ok:!1,message:"Missing required documents: "+xe.join(", ")}:{ok:!0}}if(ue===5){const xe=[];return fe(oe.applicant_signature)&&xe.push("Applicant's Signature"),j||xe.push("Agreement to Declaration"),xe.length?{ok:!1,message:"Missing: "+xe.join(", ")}:{ok:!0}}return{ok:!0}},Et=()=>n(ue=>Math.max(ue-1,1)),Gt=ue=>{if(ue.preventDefault(),r===5){const fe=Ye(5);if(!fe.ok){c({type:"error",message:fe.message||"Please complete required fields for this step."});return}c(null),m(!0)}else{const fe=Ye(r);if(!fe.ok){c({type:"error",message:fe.message||"Please complete required fields for this step."});return}c(null),n(xe=>Math.min(xe+1,Qe.length))}},ee=async()=>{if(!j){c({type:"error",message:"You must agree to the declaration to proceed."}),m(!1);return}o(!0),m(!1);try{const ue=new FormData,fe=new Date,xe=fe.toISOString().split("T")[0]+" "+fe.toTimeString().split(" ")[0],Me=fe.toTimeString().split(" ")[0];if(ue.append("permit_type","RENEWAL"),ue.append("application_date",oe.application_date),ue.append("owner_last_name",oe.owner_last_name),ue.append("owner_first_name",oe.owner_first_name),ue.append("owner_middle_name",oe.owner_middle_name||""),ue.append("owner_type",oe.owner_type),ue.append("citizenship",oe.citizenship),ue.append("contact_number",oe.contact_number),ue.append("email_address",oe.email_address),ue.append("home_address",oe.home_address),ue.append("valid_id_type",oe.valid_id_type),ue.append("valid_id_number",oe.valid_id_number),ue.append("business_name",oe.business_name),ue.append("trade_name",oe.trade_name||""),ue.append("business_nature",oe.business_nature),ue.append("building_type",oe.building_type),ue.append("capital_investment",oe.capital_investment||"0"),ue.append("gross_sale",oe.gross_sale||"0"),ue.append("house_bldg_no",oe.house_bldg_no),ue.append("street",oe.street),ue.append("province",oe.province),ue.append("city_municipality",oe.city_municipality),ue.append("barangay",oe.barangay),ue.append("zip_code",oe.zip_code||""),ue.append("business_area",oe.business_area||"0"),ue.append("total_floor_area",oe.total_floor_area||"0"),ue.append("total_employees",oe.total_employees||"0"),ue.append("male_employees",oe.male_employees||"0"),ue.append("female_employees",oe.female_employees||"0"),ue.append("barangay_clearance_id",oe.barangay_clearance_id||""),ue.append("official_receipt_no",oe.official_receipt_no),ue.append("permit_expiry",oe.permit_expiry||""),ue.append("owner_type_declaration","Business Owner"),ue.append("date_submitted",oe.application_date),ue.append("date_submitted_time",Me),ue.append("has_barangay_clearance",oe.barangay_clearance_file||oe.barangay_clearance_id?"1":"0"),ue.append("has_owner_valid_id",oe.owner_valid_id_file?"1":"0"),ue.append("has_official_receipt",oe.official_receipt_file?"1":"0"),ue.append("has_fsic",oe.fire_safety_certificate?"1":"0"),ue.append("has_business_tax_receipt",oe.business_tax_receipt?"1":"0"),ue.append("has_sanitation_permit",oe.sanitation_permit?"1":"0"),M&&M!=="0"&&ue.append("previous_permit_id",M),[{field:"barangay_clearance_file",name:"barangay_clearance_file"},{field:"owner_valid_id_file",name:"owner_valid_id_file"},{field:"official_receipt_file",name:"official_receipt_file"},{field:"business_tax_receipt",name:"business_tax_receipt"},{field:"fire_safety_certificate",name:"fire_safety_certificate"},{field:"sanitation_permit",name:"sanitation_permit"}].forEach(mt=>{const Nt=oe[mt.field];Nt instanceof File&&ue.append(mt.name,Nt,Nt.name)}),oe.applicant_signature&&oe.applicant_signature.startsWith("data:image")){const mt=atob(oe.applicant_signature.split(",")[1]),Nt=oe.applicant_signature.split(",")[0].split(":")[1].split(";")[0],Ne=new ArrayBuffer(mt.length),Je=new Uint8Array(Ne);for(let Pe=0;Pe<mt.length;Pe++)Je[Pe]=mt.charCodeAt(Pe);const ht=new Blob([Ne],{type:Nt}),It=new File([ht],"signature.png",{type:Nt});ue.append("applicant_signature",It)}const Pt=localStorage.getItem("user_id")||localStorage.getItem("goserveph_user_id")||"0";ue.append("user_id",Pt),ue.append("action","submit_business_renewal"),console.log("FormData entries for renewal:");for(let[mt,Nt]of ue.entries())Nt instanceof File?console.log(`${mt}: File - ${Nt.name} (${Nt.type})`):console.log(`${mt}:`,Nt);const ts=await fetch(bS,{method:"POST",body:ue,headers:{"X-Requested-With":"XMLHttpRequest"}});if(!ts.ok)throw new Error(`HTTP error! status: ${ts.status}`);const as=ts.clone();console.log("Response status:",ts.status);const Zt=await ts.text();if(console.log("Raw response:",Zt),!Zt.trim())throw new Error("Server returned an empty response");let Be;try{Be=JSON.parse(Zt)}catch(mt){throw console.error("JSON parse error:",mt),console.log("Raw response that failed to parse:",Zt),Zt.includes("<?php")||Zt.includes("Fatal error")||Zt.includes("Parse error")?new Error("PHP error detected. Please check server logs."):new Error("Server returned invalid JSON. Check console for details.")}if(!ts.ok||!Be.success)throw new Error(Be.message||Be.error||`Submission failed with status: ${ts.status}`);Ct(Be.message||"Business permit renewal submitted successfully!"),ql("Business Permit",Be.permit_id||"",{permit_type:"Renewal"}),setTimeout(()=>{e("/user/permittracker")},3e3)}catch(ue){console.error("Submission error:",ue);let fe=ue.message;(ue.message.includes("Failed to fetch")||ue.message.includes("Network error"))&&(fe=`Network error. Please check:
          1. Server is running
          2. API endpoint is correct: ${bS}
          3. No CORS issues`),_e(fe)}finally{o(!1)}},Ie=()=>{switch(r){case 1:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:We.secondary,fontFamily:We.font},children:"Renewal Information"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Qe[0].description})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:"Permit Type"}),t.jsx("input",{type:"text",value:"Renewal",readOnly:!0,className:"p-3 border border-black rounded-lg w-full bg-gray-100",style:{color:We.secondary,fontFamily:We.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:"Application Date"}),t.jsx("input",{type:"text",value:oe.application_date,readOnly:!0,className:"p-3 border border-black rounded-lg w-full bg-gray-100",style:{color:We.secondary,fontFamily:We.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Current Permit Expiry Date ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"date",name:"permit_expiry",value:oe.permit_expiry,onChange:Ze,min:s,className:"p-3 border border-black rounded-lg w-full pl-10",style:{color:We.secondary,fontFamily:We.font},required:!0}),t.jsx(bn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Official Receipt Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"official_receipt_no",value:oe.official_receipt_no,onChange:Ze,placeholder:"Enter official receipt number",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Owner Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"owner_type",value:oe.owner_type,onChange:Ze,className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0,children:[t.jsx("option",{value:"Individual",children:"Individual"}),t.jsx("option",{value:"Partnership",children:"Partnership"}),t.jsx("option",{value:"Corporation",children:"Corporation"})]})]})]}),t.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-lg",children:[t.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-800",style:{fontFamily:We.font},children:"Quick Fill from Previous Application"}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Enter your Applicant ID to auto-fill your information from previous records"}),t.jsxs("div",{className:"flex gap-3 items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("input",{type:"text",value:Q,onChange:ue=>{L(ue.target.value),O("")},placeholder:"Enter Applicant ID (e.g., AP-0001)",className:"p-3 border border-blue-300 rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font}}),V&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:V})]}),t.jsx("button",{type:"button",onClick:ve,disabled:ae||!Q.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",style:{fontFamily:We.font},children:ae?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Loading..."]}):"Auto-Fill"})]})]})]});case 2:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:We.secondary,fontFamily:We.font},children:"Owner Information"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Qe[1].description})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Last Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{name:"owner_last_name",value:oe.owner_last_name,onChange:Ze,placeholder:"Enter last name",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["First Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{name:"owner_first_name",value:oe.owner_first_name,onChange:Ze,placeholder:"Enter first name",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:"Middle Name"}),t.jsx("input",{name:"owner_middle_name",value:oe.owner_middle_name,onChange:Ze,placeholder:"Enter middle name",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Citizenship ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"citizenship",value:oe.citizenship,onChange:Ze,className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0,children:[t.jsx("option",{value:"Filipino",children:"Filipino"}),hq.map(ue=>t.jsx("option",{value:ue,children:ue},ue))]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Contact Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",name:"contact_number",value:oe.contact_number,onChange:Ze,placeholder:"09123456789",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},pattern:"[0-9]{11}",maxLength:"11",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Email Address ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"email",name:"email_address",value:oe.email_address,onChange:Ze,placeholder:"example@email.com",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Home Address ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{name:"home_address",value:oe.home_address,onChange:Ze,placeholder:"Enter complete home address",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Valid ID Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"valid_id_type",value:oe.valid_id_type,onChange:Ze,className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0,children:[t.jsx("option",{value:"Passport",children:"Passport"}),t.jsx("option",{value:"Driver's License",children:"Driver's License"}),t.jsx("option",{value:"PhilSys ID",children:"PhilSys ID"}),t.jsx("option",{value:"UMID",children:"UMID"}),t.jsx("option",{value:"Voter's ID",children:"Voter's ID"}),t.jsx("option",{value:"Postal ID",children:"Postal ID"}),t.jsx("option",{value:"PRC ID",children:"PRC ID"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Valid ID Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"valid_id_number",value:oe.valid_id_number,onChange:Ze,placeholder:"Enter ID number",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0})]})]})]});case 3:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:We.secondary,fontFamily:We.font},children:"Business Details & Address"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Qe[2].description})]}),t.jsx("div",{className:"border-t-4 border-blue-500 pt-4",children:t.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-700",style:{fontFamily:We.font},children:"Business Information"})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Business Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{name:"business_name",value:oe.business_name,onChange:Ze,placeholder:"Enter registered business name",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:"Trade Name"}),t.jsx("input",{name:"trade_name",value:oe.trade_name,onChange:Ze,placeholder:"Enter trade name (if different)",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Gross Annual Sale () ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"gross_sale",value:oe.gross_sale,onChange:Ze,placeholder:"Enter gross sale amount",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Nature of Business ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"business_nature",value:oe.business_nature,onChange:Ze,className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0,children:[t.jsx("option",{value:"",children:"Select Nature of Business"}),t.jsx("option",{value:"Retail / Sari-sari Store",children:"Retail / Sari-sari Store"}),t.jsx("option",{value:"Restaurant / Eatery / Food Service",children:"Restaurant / Eatery / Food Service"}),t.jsx("option",{value:"Manufacturing (Light Industry)",children:"Manufacturing (Light Industry)"}),t.jsx("option",{value:"Health / Clinic / Pharmacy",children:"Health / Clinic / Pharmacy"}),t.jsx("option",{value:"Education / Tutorial Center",children:"Education / Tutorial Center"}),t.jsx("option",{value:"Real Estate / Leasing",children:"Real Estate / Leasing"}),t.jsx("option",{value:"Construction / Contractor",children:"Construction / Contractor"}),t.jsx("option",{value:"Automotive Services",children:"Automotive Services"}),t.jsx("option",{value:"Water Refilling Station",children:"Water Refilling Station"}),t.jsx("option",{value:"Online Business / E-commerce",children:"Online Business / E-commerce"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Total Employees ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"total_employees",value:oe.total_employees,onChange:Ze,placeholder:"Enter total number of employees",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:"Male Employees"}),t.jsx("input",{type:"text",name:"male_employees",value:oe.male_employees,onChange:Ze,placeholder:"Enter number of male employees",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:"Female Employees"}),t.jsx("input",{type:"text",name:"female_employees",value:oe.female_employees,onChange:Ze,placeholder:"Enter number of female employees",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font}})]})]}),t.jsx("div",{className:"border-t-4 border-green-500 pt-4 mt-8",children:t.jsx("h4",{className:"text-lg font-semibold mb-3 text-green-700",style:{fontFamily:We.font},children:"Business Address & Property Details"})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["House/Bldg. No ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{name:"house_bldg_no",value:oe.house_bldg_no,onChange:Ze,placeholder:"Enter house/building number",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Street ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{name:"street",value:oe.street,onChange:Ze,placeholder:"Enter street name",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Barangay ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"barangay",value:oe.barangay,onChange:Ze,className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0,children:[t.jsx("option",{value:"",children:"Select Barangay"}),Array.from({length:175},(ue,fe)=>t.jsxs("option",{value:`Barangay ${fe+1}`,children:["Barangay ",fe+1]},`Barangay ${fe+1}`)),["A","B","C","D","E","F"].map(ue=>t.jsxs("option",{value:`Barangay 176-${ue}`,children:["Barangay 176-",ue]},`Barangay 176-${ue}`)),Array.from({length:12},(ue,fe)=>t.jsxs("option",{value:`Barangay ${177+fe}`,children:["Barangay ",177+fe]},`Barangay ${177+fe}`))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:"City/Municipality"}),t.jsx("input",{type:"text",value:"Caloocan City",readOnly:!0,className:"p-3 border border-black rounded-lg w-full bg-gray-100",style:{color:We.secondary,fontFamily:We.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:"Province"}),t.jsx("input",{type:"text",value:"Metro Manila",readOnly:!0,className:"p-3 border border-black rounded-lg w-full bg-gray-100",style:{color:We.secondary,fontFamily:We.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:"ZIP Code"}),t.jsx("input",{type:"text",name:"zip_code",value:oe.zip_code,onChange:Ze,placeholder:"Enter ZIP code",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},maxLength:"4"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Business Area (sq.m.) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"business_area",value:oe.business_area,onChange:Ze,placeholder:"Enter business area",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Total Floor Area (sq.m.) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"total_floor_area",value:oe.total_floor_area,onChange:Ze,placeholder:"Enter total floor area",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:"Building Type"}),t.jsxs("select",{name:"building_type",value:oe.building_type,onChange:Ze,className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},children:[t.jsx("option",{value:"Commercial",children:"Commercial"}),t.jsx("option",{value:"Residential",children:"Residential"}),t.jsx("option",{value:"Industrial",children:"Industrial"}),t.jsx("option",{value:"Mixed Use",children:"Mixed Use"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:We.secondary,fontFamily:We.font},children:["Capital Investment () ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"capital_investment",value:oe.capital_investment,onChange:Ze,placeholder:"Enter capital investment",className:"p-3 border border-black rounded-lg w-full",style:{color:We.secondary,fontFamily:We.font},required:!0})]})]})]});case 4:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Ht,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"Important Note for Renewal:"}),t.jsxs("p",{className:"text-sm text-blue-700",children:[" All documents marked with ",t.jsx("span",{className:"font-bold text-red-600",children:"*"})," are ",t.jsx("span",{className:"font-bold text-red-600",children:"MANDATORY"})," for permit renewal."]}),t.jsx("p",{className:"text-sm text-blue-700 mt-1",children:" Ensure all documents are up-to-date and valid."})]})]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"border border-gray-300 rounded-lg bg-blue-50",children:[t.jsx("div",{className:"flex items-center justify-between p-3 border-b",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-3",children:oe.barangay_clearance_file||oe.barangay_clearance_id?t.jsx(Ht,{className:"w-5 h-5 text-green-600"}):t.jsx(ls,{className:"w-5 h-5 text-red-600"})}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["Barangay Clearance: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:oe.barangay_clearance_file?oe.barangay_clearance_file.name:oe.barangay_clearance_id?"ID Provided":"File or ID required"}),t.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"* Either file upload OR ID number must be provided"})]})]})}),t.jsxs("div",{className:"p-3 bg-gray-50 border-b",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:We.secondary,fontFamily:We.font},children:"Choose verification method:"}),t.jsxs("div",{className:"flex gap-6",children:[t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx("input",{type:"radio",name:"barangay_method",value:"upload",checked:se==="upload",onChange:ue=>le(ue.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),t.jsx("span",{className:"ml-2 text-sm",style:{color:We.secondary,fontFamily:We.font},children:"Upload Document (AI Verification)"})]}),t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx("input",{type:"radio",name:"barangay_method",value:"id",checked:se==="id",onChange:ue=>le(ue.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),t.jsx("span",{className:"ml-2 text-sm",style:{color:We.secondary,fontFamily:We.font},children:"Enter ID Number (API Verification)"})]})]})]}),se==="upload"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"p-3 bg-white",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"barangay_clearance_file",onChange:J,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-2 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${oe.barangay_clearance_file?"border-green-200 bg-green-50":"border-gray-300"}`,style:{color:We.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),oe.barangay_clearance_file?"Change File":"Upload Document"]})]}),oe.barangay_clearance_file&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-sm text-gray-600",children:oe.barangay_clearance_file.name}),t.jsxs("button",{type:"button",onClick:()=>xt(oe.barangay_clearance_file),className:"flex items-center gap-1 px-3 py-2 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border border-gray-300",style:{color:We.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]}),t.jsx("button",{type:"button",onClick:()=>Mt("barangay_clearance_file",oe.barangay_clearance_file),disabled:q.barangay_clearance_file.isVerifying,className:`flex items-center gap-1 px-3 py-2 text-sm rounded transition-colors duration-300 border ${q.barangay_clearance_file.isVerified?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,children:q.barangay_clearance_file.isVerifying?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):q.barangay_clearance_file.isVerified?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(Pr,{className:"w-4 h-4"})," Verify with AI"]})})]})]})}),oe.barangay_clearance_file&&q.barangay_clearance_file.isVerifying&&t.jsxs("div",{className:"px-3 pb-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-600",children:[t.jsx("span",{children:"Verifying document with AI..."}),t.jsxs("span",{children:[q.barangay_clearance_file.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:t.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${q.barangay_clearance_file.progress}%`}})})]})]}),se==="id"&&t.jsxs("div",{className:"p-3 bg-white",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:We.secondary,fontFamily:We.font},children:"Barangay Clearance ID/Applicant ID:"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",name:"barangay_clearance_id",value:oe.barangay_clearance_id,onChange:Ze,placeholder:"Enter Barangay Clearance Applicant ID",className:"flex-1 p-2 border border-gray-300 rounded",style:{color:We.secondary,fontFamily:We.font}}),oe.barangay_clearance_id&&t.jsx("button",{type:"button",onClick:Ve,disabled:X,className:`flex items-center gap-1 px-4 py-2 text-sm rounded transition-colors duration-300 border ${R[oe.barangay_clearance_id]?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,children:X?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):R[oe.barangay_clearance_id]?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(sa,{className:"w-4 h-4"})," Verify with API"]})})]})]}),t.jsx("div",{className:"p-3 bg-gray-50",children:t.jsx("p",{className:"text-xs",children:t.jsx("span",{className:`font-medium ${q.barangay_clearance_file?.isVerified||R[oe.barangay_clearance_id]?"text-green-600":"text-red-600"}`,children:q.barangay_clearance_file?.isVerified||R[oe.barangay_clearance_id]?" Requirement satisfied - Verified":oe.barangay_clearance_file||oe.barangay_clearance_id?" Please verify the document or ID to proceed":" Please provide either the document or ID number"})})})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg bg-blue-50",children:[t.jsxs("div",{className:"flex items-center",children:[oe.owner_valid_id_file?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["Owner Valid ID: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:oe.owner_valid_id_file?oe.owner_valid_id_file.name:"Required"}),t.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"* This document is mandatory"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"owner_valid_id_file",onChange:J,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${oe.owner_valid_id_file?"border-green-200 bg-green-50":"border-red-300 bg-red-50"}`,style:{color:We.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),oe.owner_valid_id_file?"Change":"Upload"]})]}),oe.owner_valid_id_file&&t.jsxs("button",{type:"button",onClick:()=>xt(oe.owner_valid_id_file),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:We.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]})]}),t.jsxs("div",{className:"border border-gray-300 rounded-lg bg-blue-50",children:[t.jsx("div",{className:"flex items-center justify-between p-3 border-b",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-3",children:oe.business_tax_receipt||oe.business_tax_receipt_id?t.jsx(Ht,{className:"w-5 h-5 text-green-600"}):t.jsx(ls,{className:"w-5 h-5 text-red-600"})}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["Business Tax Receipt (Previous Year): ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:oe.business_tax_receipt?oe.business_tax_receipt.name:oe.business_tax_receipt_id?"ID Provided":"File or ID required"}),t.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"* Either file upload OR Business ID must be provided"})]})]})}),t.jsxs("div",{className:"p-3 bg-gray-50 border-b",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:We.secondary,fontFamily:We.font},children:"Choose verification method:"}),t.jsxs("div",{className:"flex gap-6",children:[t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx("input",{type:"radio",name:"business_tax_method",value:"upload",checked:Ae==="upload",onChange:ue=>gt(ue.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),t.jsx("span",{className:"ml-2 text-sm",style:{color:We.secondary,fontFamily:We.font},children:"Upload Document (AI Verification)"})]}),t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx("input",{type:"radio",name:"business_tax_method",value:"id",checked:Ae==="id",onChange:ue=>gt(ue.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),t.jsx("span",{className:"ml-2 text-sm",style:{color:We.secondary,fontFamily:We.font},children:"Enter Business ID (API Verification - Paid Status)"})]})]})]}),Ae==="upload"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"p-3 bg-white",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"business_tax_receipt",onChange:J,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-2 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${oe.business_tax_receipt?"border-green-200 bg-green-50":"border-gray-300"}`,style:{color:We.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),oe.business_tax_receipt?"Change File":"Upload Document"]})]}),oe.business_tax_receipt&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-sm text-gray-600",children:oe.business_tax_receipt.name}),t.jsxs("button",{type:"button",onClick:()=>xt(oe.business_tax_receipt),className:"flex items-center gap-1 px-3 py-2 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border border-gray-300",style:{color:We.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]}),t.jsx("button",{type:"button",onClick:()=>Mt("business_tax_receipt",oe.business_tax_receipt),disabled:q.business_tax_receipt.isVerifying,className:`flex items-center gap-1 px-3 py-2 text-sm rounded transition-colors duration-300 border ${q.business_tax_receipt.isVerified?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,children:q.business_tax_receipt.isVerifying?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):q.business_tax_receipt.isVerified?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(Pr,{className:"w-4 h-4"})," Verify with AI"]})})]})]})}),oe.business_tax_receipt&&q.business_tax_receipt.isVerifying&&t.jsxs("div",{className:"px-3 pb-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-600",children:[t.jsx("span",{children:"Verifying document with AI..."}),t.jsxs("span",{children:[q.business_tax_receipt.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:t.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${q.business_tax_receipt.progress}%`}})})]})]}),Ae==="id"&&t.jsxs("div",{className:"p-3 bg-white",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:We.secondary,fontFamily:We.font},children:"Business ID (from Revenue Treasury):"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",name:"business_tax_receipt_id",value:oe.business_tax_receipt_id,onChange:Ze,placeholder:"Enter Business ID",className:"flex-1 p-2 border border-gray-300 rounded",style:{color:We.secondary,fontFamily:We.font}}),oe.business_tax_receipt_id&&t.jsx("button",{type:"button",onClick:et,disabled:ye,className:`flex items-center gap-1 px-4 py-2 text-sm rounded transition-colors duration-300 border ${ce[oe.business_tax_receipt_id]?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,children:ye?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):ce[oe.business_tax_receipt_id]?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified & Paid"]}):t.jsxs(t.Fragment,{children:[t.jsx(sa,{className:"w-4 h-4"})," Verify Payment Status"]})})]}),t.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"* System will verify that the business tax has been paid"})]}),t.jsx("div",{className:"p-3 bg-gray-50",children:t.jsx("p",{className:"text-xs",children:t.jsx("span",{className:`font-medium ${q.business_tax_receipt?.isVerified||ce[oe.business_tax_receipt_id]?"text-green-600":"text-red-600"}`,children:q.business_tax_receipt?.isVerified||ce[oe.business_tax_receipt_id]?" Requirement satisfied - Verified":oe.business_tax_receipt||oe.business_tax_receipt_id?" Please verify the document or payment status to proceed":" Please provide either the document or Business ID"})})})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg bg-blue-50",children:[t.jsxs("div",{className:"flex items-center",children:[oe.fire_safety_certificate?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["Fire Safety Inspection Certificate: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:oe.fire_safety_certificate?oe.fire_safety_certificate.name:"Required"}),t.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"* This document is mandatory"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"fire_safety_certificate",onChange:J,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${oe.fire_safety_certificate?"border-green-200 bg-green-50":"border-red-300 bg-red-50"}`,style:{color:We.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),oe.fire_safety_certificate?"Change":"Upload"]})]}),oe.fire_safety_certificate&&t.jsxs("button",{type:"button",onClick:()=>xt(oe.fire_safety_certificate),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:We.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg bg-blue-50",children:[t.jsxs("div",{className:"flex items-center",children:[oe.sanitation_permit?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Sanitation Permit:"}),t.jsx("p",{className:"text-sm text-gray-600",children:oe.sanitation_permit?oe.sanitation_permit.name:"Optional (Recommended for health/food businesses)"}),Se()&&t.jsx("p",{className:"text-xs text-blue-600",children:"* Recommended for health/food related businesses"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"sanitation_permit",onChange:J,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${oe.sanitation_permit?"border-green-200 bg-green-50":"border-gray-300"}`,style:{color:We.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),oe.sanitation_permit?"Change":"Upload"]})]}),oe.sanitation_permit&&t.jsxs("button",{type:"button",onClick:()=>xt(oe.sanitation_permit),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:We.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg bg-blue-50",children:[t.jsxs("div",{className:"flex items-center",children:[oe.official_receipt_file?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["Official Receipt of Payment: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:oe.official_receipt_file?oe.official_receipt_file.name:"Required"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"official_receipt_file",onChange:J,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${oe.official_receipt_file?"border-green-200 bg-green-50":"border-red-300 bg-red-50"}`,style:{color:We.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),oe.official_receipt_file?"Change":"Upload"]})]}),oe.official_receipt_file&&t.jsxs("button",{type:"button",onClick:()=>xt(oe.official_receipt_file),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:We.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]})]})]})]});case 5:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:We.secondary},children:"Declaration and Signature"}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:[t.jsxs("div",{className:"mb-8 p-6 border-2 border-red-200 bg-red-50 rounded-lg",children:[t.jsx("h4",{className:"font-bold text-lg mb-4 text-red-700",children:"BUSINESS PERMIT RENEWAL DECLARATION"}),t.jsxs("div",{className:"space-y-3 text-sm",style:{fontFamily:We.font},children:[t.jsxs("p",{children:["I, ",t.jsx("span",{className:"font-bold",children:W()||"[Full Name]"}),", hereby solemnly declare that:"]}),t.jsxs("ol",{className:"list-decimal ml-5 space-y-2",children:[t.jsx("li",{children:"All information provided in this renewal application is true, complete, and correct;"}),t.jsx("li",{children:"I am the registered owner/authorized representative of the business described in this application;"}),t.jsx("li",{children:"The business remains compliant with all safety, sanitation, and environmental standards;"}),t.jsx("li",{children:"I have secured all necessary clearances, permits, and paid all business taxes;"}),t.jsx("li",{children:"I shall continue to abide by all business regulations, rules, and ordinances of Caloocan City;"}),t.jsx("li",{children:"I understand that any false statement or misrepresentation shall be grounds for:"}),t.jsxs("ul",{className:"list-disc ml-8 mt-2 space-y-1",children:[t.jsx("li",{children:"Immediate cancellation of the permit renewal"}),t.jsx("li",{children:"Administrative and criminal liability"}),t.jsx("li",{children:"Fines and penalties as per existing laws"})]}),t.jsx("li",{children:"I agree to the processing of my personal data for renewal purposes in accordance with the Data Privacy Act of 2012;"}),t.jsx("li",{children:"I consent to inspections and monitoring by authorized personnel."})]}),t.jsx("p",{className:"mt-4 font-semibold",children:"Republic Act No. 11032 - Ease of Doing Business and Efficient Government Service Delivery Act of 2018"}),t.jsx("p",{className:"text-xs italic",children:'"Any person who makes any false statement in any business permit renewal application shall be subject to penalties under existing laws."'})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:We.secondary},children:["Applicant's Signature ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 h-32 flex items-center justify-center",children:oe.applicant_signature?t.jsxs("div",{className:"text-center",children:[t.jsx("img",{src:oe.applicant_signature,alt:"Applicant Signature",className:"max-h-20 mx-auto"}),t.jsx("p",{className:"text-xs mt-2 text-green-600",children:"Signature uploaded"}),t.jsx("button",{type:"button",onClick:()=>he(ue=>({...ue,applicant_signature:""})),className:"text-xs text-red-600 mt-1 hover:text-red-800",children:"Remove"})]}):t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-gray-500 mb-2",children:"Upload your signature"}),t.jsx("input",{type:"file",accept:"image/*",onChange:He,className:"hidden",id:"signature-upload"}),t.jsx("label",{htmlFor:"signature-upload",className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100 transition-colors cursor-pointer",children:"Upload Signature"})]})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:We.secondary},children:["Date of Submission ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsxs("div",{className:"w-full p-3 border border-black rounded-lg bg-gray-50",children:[t.jsx("p",{style:{color:We.secondary,fontFamily:We.font},children:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",weekday:"long"})}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically set to current date and time upon submission"})]})]})]}),t.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("input",{type:"checkbox",id:"final-declaration",checked:j,onChange:ue=>E(ue.target.checked),className:"w-5 h-5 mt-1 text-green-600 border-gray-300 rounded focus:ring-green-500"}),t.jsxs("label",{htmlFor:"final-declaration",className:"ml-3",children:[t.jsx("span",{className:"font-bold text-red-700",children:"FINAL DECLARATION AND CONSENT *"}),t.jsxs("p",{className:"text-sm mt-1",style:{color:We.secondary,fontFamily:We.font},children:["I, ",t.jsx("span",{className:"font-semibold",children:W()||"[Full Name]"}),", have read, understood, and agree to all terms and conditions stated in this declaration. I certify that all information provided is accurate and I accept full responsibility for its veracity."]})]})]})})]})]});default:return null}};return t.jsxs("div",{className:"mx-1 mt-1 p-6 rounded-lg min-h-screen",style:{background:We.background,color:We.secondary,fontFamily:We.font},children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold",style:{color:We.primary,fontFamily:We.font},children:"BUSINESS PERMIT RENEWAL APPLICATION"}),t.jsxs("p",{className:"mt-2",style:{color:We.secondary,fontFamily:We.font},children:["Permit Type: ",t.jsx("span",{className:"font-semibold",style:{color:We.success},children:"Renewal"})]}),M&&t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Renewing Permit ID: ",M]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:()=>e("/user/business/type"),className:"px-4 py-2 rounded-lg font-semibold text-white hover:bg-[#FDA811] transition-colors duration-300",style:{background:We.success,fontFamily:We.font},onMouseEnter:ue=>ue.currentTarget.style.background=We.accent,onMouseLeave:ue=>ue.currentTarget.style.background=We.success,children:"Back to Permit Type"})})]}),t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"flex items-center justify-between overflow-x-auto",children:Qe.map((ue,fe)=>t.jsxs("div",{className:"flex items-center flex-shrink-0",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2",style:{background:r>=ue.id?We.success:"transparent",borderColor:r>=ue.id?We.success:"#9CA3AF",color:r>=ue.id?"#fff":"#9CA3AF",fontFamily:We.font},children:ue.id}),t.jsxs("div",{className:"ml-3 hidden md:block",children:[t.jsx("p",{className:"text-sm font-medium",style:{color:r>=ue.id?We.success:We.secondary,fontFamily:We.font},children:ue.title}),t.jsx("p",{className:"text-xs text-gray-500",children:ue.description})]}),fe<Qe.length-1&&t.jsx("div",{className:"hidden md:block w-16 h-0.5 mx-4",style:{background:r>ue.id?We.success:"#9CA3AF"}})]},ue.id))})}),l&&t.jsx("div",{className:"p-4 mb-6 rounded",style:{background:l.type==="success"?"#e6f9ed":"#fdecea",color:l.type==="success"?We.success:We.danger,fontFamily:We.font,border:"1px solid "+(l.type==="success"?We.success:We.danger)},children:l.message}),t.jsxs("form",{onSubmit:Gt,className:"space-y-8",children:[Ie(),t.jsxs("div",{className:"flex justify-between pt-6",children:[r>1&&t.jsx("button",{type:"button",onClick:Et,className:"px-6 py-3 rounded-lg font-semibold text-white hover:bg-[#FDA811] transition-colors duration-300",style:{background:We.success,fontFamily:We.font},onMouseEnter:ue=>ue.currentTarget.style.background=We.accent,onMouseLeave:ue=>ue.currentTarget.style.background=We.success,children:"Previous"}),r<Qe.length?t.jsx("button",{type:"submit",className:"px-6 py-3 rounded-lg font-semibold text-white hover:bg-[#FDA811] transition-colors duration-300",style:{background:We.success,fontFamily:We.font},onMouseEnter:ue=>ue.currentTarget.style.background=We.accent,onMouseLeave:ue=>ue.currentTarget.style.background=We.success,children:r===Qe.length-1?"Review & Submit":"Next"}):t.jsx("button",{type:"button",onClick:Gt,className:"px-6 py-3 rounded-lg font-semibold text-white hover:bg-[#FDA811] transition-colors duration-300",style:{background:We.success,fontFamily:We.font},onMouseEnter:ue=>ue.currentTarget.style.background=We.accent,onMouseLeave:ue=>ue.currentTarget.style.background=We.success,children:"Submit Renewal Application"})]})]}),S.url&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"rounded-lg shadow-lg w-full max-w-4xl border border-gray-200 overflow-hidden",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:We.font,backdropFilter:"blur(10px)",maxHeight:"90vh"},children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold",style:{color:We.primary},children:"Preview Document"}),t.jsx("button",{onClick:Xe,className:"text-gray-500 hover:text-gray-700 transition-colors duration-300",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 overflow-auto",style:{maxHeight:"calc(90vh - 80px)"},children:[t.jsxs("p",{className:"text-sm mb-4",style:{color:We.secondary,fontFamily:We.font},children:["File: ",t.jsx("span",{className:"font-medium",children:S.name})]}),t.jsx("div",{className:"bg-white rounded-lg border p-4",children:S.type==="image"?t.jsx("div",{className:"flex justify-center",children:t.jsx("img",{src:S.url,alt:"Preview",className:"max-w-full h-auto max-h-[500px]"})}):S.type==="application"&&S.name?.includes(".pdf")?t.jsx("iframe",{src:S.url,className:"w-full h-[500px] rounded",title:"PDF Preview"}):t.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[t.jsx(Kt,{className:"w-24 h-24 text-gray-400 mb-4"}),t.jsxs("p",{className:"text-gray-600 mb-2",children:["File: ",S.name]}),t.jsx("p",{className:"text-gray-500 mb-6",children:"Preview not available for this file type"}),t.jsx("a",{href:S.url,download:S.name,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors duration-300",children:"Download File"})]})}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsx("button",{onClick:Xe,style:{background:We.success},onMouseEnter:ue=>ue.currentTarget.style.background=We.accent,onMouseLeave:ue=>ue.currentTarget.style.background=We.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close Preview"})})]})]})}),u&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:We.font,backdropFilter:"blur(10px)"},children:[t.jsx("h2",{className:"text-xl font-bold mb-6",style:{color:We.primary},children:"Final Submission"}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border mb-4",children:[t.jsx("p",{className:"text-sm font-semibold mb-2",style:{color:We.secondary,fontFamily:We.font},children:"Final Confirmation:"}),t.jsx("p",{className:"text-sm mb-3",style:{color:We.secondary,fontFamily:We.font},children:"Are you sure you want to submit your business permit renewal application? Please review all information before submitting."}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"final-confirmation-checkbox",checked:j,onChange:ue=>E(ue.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),t.jsx("label",{htmlFor:"final-confirmation-checkbox",className:"ml-2 text-sm",style:{color:We.secondary,fontFamily:We.font},children:"I confirm that all information is correct and I agree to the terms *"})]})]}),t.jsx("p",{className:"text-sm",style:{color:We.secondary,fontFamily:We.font},children:"By submitting, you confirm that all information provided is accurate and complete."})]}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("button",{onClick:()=>m(!1),disabled:i,style:{background:We.danger},onMouseEnter:ue=>{i||(ue.currentTarget.style.background=We.accent)},onMouseLeave:ue=>{i||(ue.currentTarget.style.background=We.danger)},className:`px-6 py-2 rounded-lg font-semibold text-white ${i?"cursor-not-allowed":"transition-colors duration-300"}`,children:"Cancel"}),t.jsx("button",{onClick:ee,disabled:i||!j,style:{background:!j||i?"#9CA3AF":We.success},onMouseEnter:ue=>{!i&&j&&(ue.currentTarget.style.background=We.accent)},onMouseLeave:ue=>{!i&&j&&(ue.currentTarget.style.background=We.success)},className:`px-6 py-2 rounded-lg font-semibold text-white ${i||!j?"cursor-not-allowed":"transition-colors duration-300"}`,children:i?"Submitting...":"Submit Renewal"})]})]})}),A&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:We.font,backdropFilter:"blur(10px)"},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center",children:t.jsx(Ht,{className:"w-8 h-8 text-green-600"})})}),t.jsx("h2",{className:"text-xl font-bold text-center mb-4",style:{color:We.primary},children:w}),t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-sm text-center mb-3",style:{color:We.secondary,fontFamily:We.font},children:b}),t.jsx("p",{className:"text-xs text-center text-gray-500",style:{fontFamily:We.font},children:"You will be redirected to your dashboard in a few seconds..."})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:()=>{g(!1),e("/user/permittracker")},style:{background:We.success},onMouseEnter:ue=>ue.currentTarget.style.background=We.accent,onMouseLeave:ue=>ue.currentTarget.style.background=We.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Track Application"})})]})}),K&&H&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:We.font},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${H.success?"bg-green-100":"bg-red-100"}`,children:H.success?t.jsx(Ht,{className:"w-8 h-8 text-green-600"}):t.jsx(ls,{className:"w-8 h-8 text-red-600"})})}),t.jsx("h2",{className:"text-xl font-bold text-center mb-4",style:{color:H.success?We.success:We.danger},children:H.success?"Verification Successful":"Verification Failed"}),t.jsx("p",{className:"text-sm text-center mb-6",style:{color:We.secondary},children:H.message}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:()=>I(!1),style:{background:We.success},onMouseEnter:ue=>ue.currentTarget.style.background=We.accent,onMouseLeave:ue=>ue.currentTarget.style.background=We.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close"})})]})}),we&&me&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:We.font},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${me.success?"bg-green-100":"bg-red-100"}`,children:me.success?t.jsx(Ht,{className:"w-8 h-8 text-green-600"}):t.jsx(ls,{className:"w-8 h-8 text-red-600"})})}),t.jsx("h2",{className:"text-xl font-bold text-center mb-4",style:{color:me.success?We.success:We.danger},children:me.success?"Payment Verified":"Verification Failed"}),t.jsx("p",{className:"text-sm text-center mb-6",style:{color:We.secondary},children:me.message}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:()=>st(!1),style:{background:We.success},onMouseEnter:ue=>ue.currentTarget.style.background=We.accent,onMouseLeave:ue=>ue.currentTarget.style.background=We.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close"})})]})}),yt&&ze&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-2xl border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:We.font},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${ze.isValid?"bg-green-100":"bg-yellow-100"}`,children:ze.isValid?t.jsx(Ht,{className:"w-8 h-8 text-green-600"}):t.jsx(Ks,{className:"w-8 h-8 text-yellow-600"})})}),t.jsx("h2",{className:"text-xl font-bold text-center mb-4",style:{color:ze.isValid?We.success:"#D97706"},children:ze.isValid?"AI Verification Complete":"Please Review Document"}),t.jsx("p",{className:"text-sm text-center mb-4",style:{color:We.secondary},children:ze.message}),ze.extractedText&&t.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx("p",{className:"text-xs font-semibold mb-2 text-gray-700",children:"Extracted Text Sample:"}),t.jsxs("p",{className:"text-xs text-gray-600 font-mono whitespace-pre-wrap",children:[ze.extractedText,"..."]})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:()=>Oe(!1),style:{background:We.success},onMouseEnter:ue=>ue.currentTarget.style.background=We.accent,onMouseLeave:ue=>ue.currentTarget.style.background=We.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close"})})]})}),p&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:We.font,backdropFilter:"blur(10px)"},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center",children:t.jsx(ls,{className:"w-8 h-8 text-red-600"})})}),t.jsx("h2",{className:"text-xl font-bold text-center mb-4",style:{color:We.danger},children:w}),t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-sm text-center mb-3",style:{color:We.secondary,fontFamily:We.font},children:b}),t.jsx("p",{className:"text-xs text-center text-gray-500",style:{fontFamily:We.font},children:"Please check your information and try again."})]}),t.jsxs("div",{className:"flex justify-center gap-4",children:[t.jsx("button",{onClick:()=>v(!1),style:{background:We.danger},onMouseEnter:ue=>ue.currentTarget.style.background=We.accent,onMouseLeave:ue=>ue.currentTarget.style.background=We.danger,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close"}),t.jsx("button",{onClick:()=>v(!1),style:{background:We.success},onMouseEnter:ue=>ue.currentTarget.style.background=We.accent,onMouseLeave:ue=>ue.currentTarget.style.background=We.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Try Again"})]})]})})]})}typeof window<"u"&&(vd.workerSrc=new URL("/assets/pdf.worker.min-wgc6bjNh.mjs",import.meta.url).toString());const Jt={primary:"#4A90E2",secondary:"#000000",accent:"#FDA811",success:"#4CAF50",danger:"#E53935",warning:"#FF9800",background:"#FBFBFB",font:"Montserrat, Arial, sans-serif"};function Aq(){const[a,e]=C.useState(1),[s,r]=C.useState(!1),[n,i]=C.useState(!1),[o,l]=C.useState({}),[c,u]=C.useState({}),[m,A]=C.useState(""),[g,p]=C.useState(null),[v,b]=C.useState(!1),[y,w]=C.useState(null),[B,j]=C.useState(null),[E,S]=C.useState(!0),[T,M]=C.useState(!1),[D,P]=C.useState(!1),Y=ka(),[Q,L]=C.useState({barangay_clearance_id_copy:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},owner_valid_id:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},renewal_permit_copy:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},previous_permit_copy:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0}}),[ae,ne]=C.useState(!1),[V,O]=C.useState(0),[X,$]=C.useState(!1),[H,te]=C.useState(null),[K,I]=C.useState(!1),[R,G]=C.useState(null),[se,le]=C.useState(!1),[ye,De]=C.useState({}),[me,Te]=C.useState("upload"),we=()=>new Date().toISOString().split("T")[0];C.useEffect(()=>{const fe=localStorage.getItem("userId")||localStorage.getItem("user_id")||localStorage.getItem("applicant_id")||"USER001";A(fe)},[]);const st=[{id:1,title:"Application Type",description:"Select type of application"},{id:2,title:"Business Info",description:"Business details and validation"},{id:3,title:"Owner Information",description:"Owner details (18+ only)"},{id:4,title:"Documents",description:"Upload required documents"},{id:5,title:"Review & Submit",description:"Review and submit application"}],[ce,tt]=C.useState({application_type:"NEW",existing_permit_number:"",applicant_id_input:"",renewal_permit_number:"",previous_permit_validity:"",renewal_reason:"",amendment_type:"CHANGE_OWNER",amendment_details:"",amendment_reason:"",business_name:"",business_address:"",business_email:"",business_phone:"",business_type:"",business_nature:"",owner_first_name:"",owner_last_name:"",owner_middle_name:"",owner_address:"",id_type:"GOVERNMENT_ID",id_number:"",date_of_birth:"",citizenship:"FILIPINO",barangay_clearance_id:"",barangay_clearance_liquor:null,barangay_clearance_id_copy:null,owner_valid_id:null,renewal_permit_copy:null,previous_permit_copy:null,applicant_signature:"",declaration_agreed:!1,applicant_id:"",date_submitted:we(),time_submitted:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})});C.useEffect(()=>{tt(fe=>({...fe,applicant_id:m}))},[m]),C.useEffect(()=>{if(ce.date_of_birth){const fe=new Date(ce.date_of_birth),xe=new Date;let Me=xe.getFullYear()-fe.getFullYear();const ct=xe.getMonth()-fe.getMonth();(ct<0||ct===0&&xe.getDate()<fe.getDate())&&Me--,S(Me>=18)}},[ce.date_of_birth]);const Ae=[{id:"NEW",name:"New Application",description:"First time application for liquor permit"},{id:"RENEWAL",name:"Renewal",description:"Renew existing liquor permit"},{id:"AMENDMENT",name:"Amendment",description:"Modify existing liquor permit"}],gt=[{id:"CHANGE_OWNER",name:"Change of Owner"},{id:"CHANGE_BUSINESS_NAME",name:"Change Business Name"},{id:"CHANGE_BUSINESS_ADDRESS",name:"Change Business Address"},{id:"CHANGE_BUSINESS_NATURE",name:"Change Business Nature"},{id:"CHANGE_OPERATING_HOURS",name:"Change Operating Hours"}],q=["Restaurant/Bar","Night Club/Disco","Hotel/Resort","Convenience Store","Supermarket","Liquor Store","Catering Service","Events Place","Others"],Qt=["Retail Sale of Liquor","Wholesale of Liquor","Sale of Liquor for On-Site Consumption","Sale of Liquor for Off-Site Consumption","Manufacturing of Liquor","Import/Export of Liquor","Distribution of Liquor"],yt=[{id:"PASSPORT",name:"Passport"},{id:"DRIVERS_LICENSE",name:"Driver's License"},{id:"GOVERNMENT_ID",name:"Government ID"},{id:"UMID",name:"UMID"},{id:"PRC_ID",name:"PRC ID"},{id:"POSTAL_ID",name:"Postal ID"},{id:"VOTERS_ID",name:"Voter's ID"},{id:"SENIOR_CITIZEN_ID",name:"Senior Citizen ID"}],Oe=fe=>{const{name:xe,value:Me,type:ct,files:Pt,checked:ts}=fe.target;if(ct==="file"){const as=Pt[0];tt(Zt=>({...Zt,[xe]:as||null})),Q[xe]&&L(Zt=>({...Zt,[xe]:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0}}))}else if(ct==="checkbox")tt(as=>({...as,[xe]:ts}));else{if(xe==="business_phone"){const as=Me.replace(/\D/g,"");tt(Zt=>({...Zt,[xe]:as}));return}tt(as=>({...as,[xe]:Me}))}},ze=fe=>{const xe=fe.target.files[0];if(xe){const Me=new FileReader;Me.onloadend=()=>{tt(ct=>({...ct,applicant_signature:Me.result}))},Me.readAsDataURL(xe)}},Le=fe=>fe.toLowerCase().replace(/[^a-z0-9]/g,""),oe=(fe,xe,Me=.5)=>{const ct=Le(fe),Pt=Le(xe);if(ct===Pt)return 1;if(ct.includes(Pt)||Pt.includes(ct))return .95;const ts=ct.length>Pt.length?ct:Pt,as=ct.length>Pt.length?Pt:ct;if(ts.length===0)return 0;let Zt=0;for(let mt=0;mt<as.length;mt++)ts.includes(as[mt])&&Zt++;const Be=Zt/ts.length;return Be>=Me?Be:0},he={barangay_clearance_id_copy:["barangay clearance","brgy clearance","barangay certification","clearance","certification","punong barangay","barangay captain","lupon","katarungang pambarangay","liquor","alcoholic"],owner_valid_id:["philippine","national id","passport","driver","license","umid","sss","gsis","philhealth","pag-ibig","voter","postal","senior citizen","pwd","tin","prc"],renewal_permit_copy:["liquor permit","alcoholic","beverage","permit","license","business","mayor","city","municipality"],previous_permit_copy:["liquor permit","alcoholic","beverage","permit","license","business","mayor","city","municipality"]},W=(fe,xe)=>{const Me=fe.toLowerCase(),ct=he[xe]||[];let Pt=0;for(const as of ct)Me.includes(as.toLowerCase())&&Pt++;const ts=ct.length>0?Pt/ct.length:0;return{matched:Pt>0,confidence:ts,matchCount:Pt,expectedType:xe}},ve=fe=>{const xe=ce.owner_first_name?.trim(),Me=ce.owner_last_name?.trim(),ct=ce.owner_middle_name?.trim();if(!xe||!Me)return null;const Pt=fe.toLowerCase(),ts=xe.toLowerCase(),as=Me.toLowerCase(),Zt=oe(xe,fe),Be=oe(Me,fe),mt=ct?oe(ct,fe):0,Nt=Zt>0||Pt.includes(ts),Ne=Be>0||Pt.includes(as),Je=ct?mt>0||Pt.includes(ct.toLowerCase()):!1,ht=Nt&&Ne;return{firstName:{matched:Nt,confidence:Zt,value:xe},lastName:{matched:Ne,confidence:Be,value:Me},middleName:ct?{matched:Je,confidence:mt,value:ct}:null,anyMatch:ht,allMatch:ht&&(!ct||Je)}},Qe=fe=>{if(!ce.business_name)return null;const xe=ce.business_name.trim();if(!xe)return null;const Me=oe(xe,fe);return{matched:Me>.6,confidence:Me,value:xe}},Ze=async fe=>{try{const xe=await fe.arrayBuffer(),Me=await Lp({data:xe}).promise,ct=[],Pt=Math.min(Me.numPages,3);for(let ts=1;ts<=Pt;ts++){const as=await Me.getPage(ts),Zt=as.getViewport({scale:2}),Be=document.createElement("canvas"),mt=Be.getContext("2d");Be.width=Zt.width,Be.height=Zt.height,await as.render({canvasContext:mt,viewport:Zt}).promise,ct.push(Be)}return ct}catch(xe){throw console.error("Error converting PDF to images:",xe),xe}},J=async(fe,xe)=>{if(!xe){L(Me=>({...Me,[fe]:{...Me[fe],error:"Please upload the document first",isVerified:!1}}));return}ne(!0),O(0),L(Me=>({...Me,[fe]:{isVerifying:!0,isVerified:!1,results:null,error:null,progress:0}}));try{const Me=await bA.createWorker("eng",1,{logger:Je=>{if(Je.status==="recognizing text"){const ht=Math.round(Je.progress*100);O(ht),L(It=>({...It,[fe]:{...It[fe],progress:ht}}))}}});L(Je=>({...Je,[fe]:{...Je[fe],progress:10}}));let ct="";if(xe.type==="application/pdf"){L(ht=>({...ht,[fe]:{...ht[fe],progress:20}}));const Je=await Ze(xe);L(ht=>({...ht,[fe]:{...ht[fe],progress:40}}));for(let ht=0;ht<Je.length;ht++){const{data:{text:It}}=await Me.recognize(Je[ht]);ct+=It+`
`,L(Pe=>({...Pe,[fe]:{...Pe[fe],progress:40+Math.round((ht+1)/Je.length*40)}}))}}else{const{data:{text:Je}}=await Me.recognize(xe);ct=Je}await Me.terminate(),L(Je=>({...Je,[fe]:{...Je[fe],progress:90}}));const Pt=ct.toLowerCase(),ts=W(ct,fe),as=Qe(Pt),Zt=ve(Pt),Be={documentType:{detected:ts.matched,confidence:ts.confidence,matchCount:ts.matchCount},businessName:as,ownerName:Zt,extractedText:ct};let mt=!1,Nt=[];ts.matched||(Nt=[`Wrong document type uploaded. Expected: ${{barangay_clearance_id_copy:"Barangay Clearance for Liquor",owner_valid_id:"Valid ID",renewal_permit_copy:"Copy of Existing Liquor Permit",previous_permit_copy:"Copy of Previous Liquor Permit"}[fe]||fe}. Please upload the correct document.`],mt=!1),fe==="barangay_clearance_id_copy"&&ts.matched&&(Zt?.anyMatch?mt=!0:(Nt=["Document may be unreadable or owner name not found. Please re-upload a clear copy."],mt=!1)),fe==="owner_valid_id"&&ts.matched&&(Zt?.anyMatch?mt=!0:(Nt=["Document may be unreadable or name not found. Please re-upload a clear copy."],mt=!1)),(fe==="renewal_permit_copy"||fe==="previous_permit_copy")&&ts.matched&&(as?.matched?mt=!0:(Nt=["Document may be unreadable. Please re-upload a clear copy."],mt=!1)),L(Je=>({...Je,[fe]:{isVerifying:!1,isVerified:mt,results:Be,error:mt?null:"Document verification failed. Please check the document.",progress:100}})),ne(!1),te({documentType:fe,isVerified:mt,results:Be,fileName:xe.name,invalidReasons:Nt.length>0?Nt:null}),$(!0)}catch(Me){console.error("Verification error:",Me),L(ct=>({...ct,[fe]:{isVerifying:!1,isVerified:!1,results:null,error:"Failed to verify document: "+Me.message,progress:0}})),ne(!1),te({documentType:fe,isVerified:!1,results:null,fileName:xe.name,invalidReasons:["Document may be unreadable or unclear. Please re-upload a clear copy."]}),$(!0)}},He=async()=>{const fe=ce.barangay_clearance_id.trim();if(!fe){G({success:!1,message:"Please enter a barangay clearance ID to verify"}),le(!0);return}if(ye[fe]){G({success:!0,message:"Barangay clearance ID is already verified and valid!",data:ye[fe]}),le(!0);return}I(!0);try{const xe=await fetch("/backend/barangay_permit/admin_fetch.php");if(!xe.ok)throw new Error(`HTTP error! status: ${xe.status}`);const Me=await xe.json();let ct=[];Me.success&&Me.data?ct=Me.data:Array.isArray(Me)?ct=Me:ct=Me.permits||[];const Pt=ct.find(ts=>{const as=ts.applicant_id?ts.applicant_id.toString():"",Zt=ts.permit_id?ts.permit_id.toString():"",Be=fe.toString();return(as===Be||Zt===Be)&&ts.status==="approved"});Pt?(G({success:!0,message:"Barangay clearance ID is VALID! Status: approved",data:Pt}),De(ts=>({...ts,[fe]:Pt})),Pt.permit_id&&tt(ts=>({...ts,barangay_permit_id:Pt.permit_id}))):G({success:!1,message:" Barangay clearance ID not found or not approved. Please check the ID and try again.",data:null})}catch(xe){console.error("Error verifying barangay clearance ID:",xe),G({success:!1,message:" Error verifying barangay clearance ID. Please try again.",data:null})}finally{I(!1),le(!0)}},xt=async()=>{if(!ce.existing_permit_number.trim()){u({...c,existing_permit_number:"Please enter a permit number"});return}b(!0);try{if(ce.application_type==="NEW"){let fe=await fetch(`/backend/business_permit/admin_fetch.php?permit_number=${ce.existing_permit_number}`);if(!fe.ok)throw new Error(`HTTP error! status: ${fe.status}`);let xe=await fe.json();if(!xe.success||!xe.data||xe.data.length===0){if(fe=await fetch(`/backend/business_permit/admin_fetch.php?search=${ce.existing_permit_number}`),!fe.ok)throw new Error(`HTTP error! status: ${fe.status}`);xe=await fe.json()}if(xe.success&&xe.data&&xe.data.length>0){const Me=xe.data.find(ct=>ct.permit_id===ce.existing_permit_number||ct.applicant_id===ce.existing_permit_number)||xe.data[0];p(Me),tt(ct=>({...ct,business_name:Me.business_name||"",business_address:Me.business_address||`${Me.barangay||""}, ${Me.city_municipality||""}, ${Me.province||""}`.trim(),business_email:Me.email_address||"",business_phone:Me.contact_number||"",business_nature:Me.business_nature||"",owner_first_name:Me.owner_first_name||"",owner_last_name:Me.owner_last_name||"",owner_middle_name:Me.owner_middle_name||"",owner_address:Me.home_address||"",id_type:Me.valid_id_type||"GOVERNMENT_ID",id_number:Me.valid_id_number||""})),u({...c,existing_permit_number:""}),w({type:"success",message:"Business permit found! Information has been auto-filled."})}else p(null),u({...c,existing_permit_number:"Business permit not found"}),w({type:"error",message:"Business permit not found. Please check and try again."})}else{let fe=await fetch(`/backend/liquor_permit/check.php?permit_number=${ce.existing_permit_number}`);if(!fe.ok)throw new Error(`HTTP error! status: ${fe.status}`);let xe=await fe.json();xe.success&&xe.data?(j(xe.data),tt(Me=>({...Me,business_name:xe.data.business_name||"",business_address:xe.data.business_address||"",business_email:xe.data.business_email||"",business_phone:xe.data.business_phone||"",business_type:xe.data.business_type||"",business_nature:xe.data.business_nature||"",owner_first_name:xe.data.owner_first_name||"",owner_last_name:xe.data.owner_last_name||"",owner_middle_name:xe.data.owner_middle_name||"",owner_address:xe.data.owner_address||"",id_type:xe.data.id_type||"GOVERNMENT_ID",id_number:xe.data.id_number||"",date_of_birth:xe.data.date_of_birth||"",citizenship:xe.data.citizenship||"FILIPINO"})),u({...c,existing_permit_number:""}),w({type:"success",message:`Existing liquor permit found! ${ce.application_type==="RENEWAL"?"Renewal":"Amendment"} information has been loaded.`})):(j(null),u({...c,existing_permit_number:"Liquor permit not found"}),w({type:"error",message:"Liquor permit not found. Please check and try again."}))}}catch(fe){console.error("Error checking permit:",fe),u({...c,existing_permit_number:"Error checking permit. Please try again."}),w({type:"error",message:"Error checking permit. Please try again."})}finally{b(!1)}},Xe=fe=>{const xe={};if(fe===1&&(ce.application_type||(xe.application_type="Please select application type"),ce.application_type!=="NEW"&&!ce.existing_permit_number.trim()&&(xe.existing_permit_number="Existing liquor permit number is required"),ce.application_type==="NEW"&&!ce.existing_permit_number.trim()&&w({type:"warning",message:"Note: Entering your business permit number will auto-fill your business information."})),fe===2&&(ce.business_name.trim()||(xe.business_name="Business name is required"),ce.business_address.trim()||(xe.business_address="Business address is required"),ce.business_email.trim()||(xe.business_email="Business email is required"),ce.business_phone.trim()?(!ce.business_phone.startsWith("09")||ce.business_phone.length!==11)&&(xe.business_phone="Contact number must start with 09 and be 11 digits"):xe.business_phone="Business phone is required",ce.business_type||(xe.business_type="Business type is required"),ce.business_nature||(xe.business_nature="Business nature is required"),ce.application_type==="AMENDMENT"&&(ce.amendment_type||(xe.amendment_type="Amendment type is required"),ce.amendment_details.trim()||(xe.amendment_details="Amendment details are required"),ce.amendment_reason.trim()||(xe.amendment_reason="Amendment reason is required")),ce.application_type==="RENEWAL"&&(ce.renewal_reason.trim()||(xe.renewal_reason="Renewal reason is required"))),fe===3&&(ce.owner_first_name.trim()||(xe.owner_first_name="Owner first name is required"),ce.owner_last_name.trim()||(xe.owner_last_name="Owner last name is required"),ce.owner_address.trim()||(xe.owner_address="Owner address is required"),ce.id_type||(xe.id_type="ID type is required"),ce.id_number.trim()||(xe.id_number="ID number is required"),ce.date_of_birth||(xe.date_of_birth="Date of birth is required"),E||(xe.date_of_birth="Applicant must be 18 years or older"),ce.citizenship||(xe.citizenship="Citizenship is required")),fe===4){const Me=ce.barangay_clearance_id&&ce.barangay_clearance_id.trim()!=="",ct=ce.barangay_clearance_id_copy;!Me&&!ct?xe.barangay_clearance="Barangay clearance ID or document is required (provide at least one)":(Me&&!ye[ce.barangay_clearance_id]&&(xe.barangay_clearance="Barangay clearance ID must be verified (click Verify button)"),!Me&&ct&&!Q.barangay_clearance_id_copy?.isVerified&&(Q.barangay_clearance_id_copy?.isVerified===!1?xe.barangay_clearance="Barangay clearance document is INVALID - Please upload a valid document":xe.barangay_clearance="Barangay clearance document must be verified (click Verify button)")),ce.owner_valid_id?Q.owner_valid_id?.isVerified===!1?xe.owner_valid_id="Owner Valid ID is INVALID - Please upload a valid document":Q.owner_valid_id?.isVerified||(xe.owner_valid_id="Owner Valid ID must be verified (click Verify button)"):xe.owner_valid_id="Owner valid ID is required",ce.application_type==="RENEWAL"&&(ce.renewal_permit_copy?Q.renewal_permit_copy?.isVerified===!1?xe.renewal_permit_copy="Renewal permit copy is INVALID - Please upload a valid document":Q.renewal_permit_copy?.isVerified||(xe.renewal_permit_copy="Renewal permit copy must be verified (click Verify button)"):xe.renewal_permit_copy="Copy of existing liquor permit is required for renewal"),ce.application_type==="AMENDMENT"&&(ce.previous_permit_copy?Q.previous_permit_copy?.isVerified===!1?xe.previous_permit_copy="Previous permit copy is INVALID - Please upload a valid document":Q.previous_permit_copy?.isVerified||(xe.previous_permit_copy="Previous permit copy must be verified (click Verify button)"):xe.previous_permit_copy="Copy of previous liquor permit is required for amendment")}return fe===5&&(ce.applicant_signature||(xe.applicant_signature="Signature is required"),n||(xe.agreeDeclaration="You must agree to the declaration")),u(xe),Object.keys(xe).length===0},Ct=fe=>{if(fe===1){const xe=ce.application_type;return ce.application_type==="NEW"?xe:xe&&ce.existing_permit_number.trim()}if(fe===2){const xe=ce.business_name.trim()&&ce.business_address.trim()&&ce.business_email.trim()&&ce.business_phone.trim()&&ce.business_type&&ce.business_nature;return ce.application_type==="RENEWAL"?xe&&ce.renewal_reason.trim():ce.application_type==="AMENDMENT"?xe&&ce.amendment_type&&ce.amendment_details.trim()&&ce.amendment_reason.trim():xe}if(fe===3)return ce.owner_first_name.trim()&&ce.owner_last_name.trim()&&ce.owner_address.trim()&&ce.id_type&&ce.id_number.trim()&&ce.date_of_birth&&E&&ce.citizenship;if(fe===4){const xe=ce.barangay_clearance_id.trim()||ce.barangay_clearance_id_copy,Me=ce.owner_valid_id;let ct=!0;return ce.application_type==="RENEWAL"?ct=ce.renewal_permit_copy:ce.application_type==="AMENDMENT"&&(ct=ce.previous_permit_copy),xe&&Me&&ct}return fe===5?ce.applicant_signature&&n:!0},_e=fe=>{if(fe.preventDefault(),a===st.length){dt.fire({title:"Submit Application",html:`
          <div style="text-align: left; margin: 20px 0;">
            <p style="margin-bottom: 15px;">Are you sure you want to submit your liquor permit application?</p>
            <div style="background: #f9f9f9; padding: 15px; border-radius: 8px; border-left: 4px solid #4A90E2;">
              <p style="font-size: 14px;"><strong>Business:</strong> ${ce.business_name}</p>
              <p style="font-size: 14px;"><strong>Owner:</strong> ${ce.owner_first_name} ${ce.owner_last_name}</p>
              <p style="font-size: 14px;"><strong>Type:</strong> ${Ae.find(xe=>xe.id===ce.application_type)?.name}</p>
              <p style="font-size: 14px;"><strong>Date:</strong> ${ce.date_submitted}</p>
            </div>
          </div>
        `,icon:"question",showCancelButton:!0,confirmButtonColor:Jt.success,cancelButtonColor:Jt.danger,confirmButtonText:"Submit Application",cancelButtonText:"Cancel"}).then(xe=>{xe.isConfirmed&&vt()});return}a<st.length&&Xe(a)&&(e(a+1),u({}))},Se=()=>{a>1&&e(a-1)},Ve=fe=>{dt.fire({icon:"success",title:"Success!",text:fe,confirmButtonColor:"#4CAF50",timer:3e3,timerProgressBar:!0}).then(()=>{Y("/user/permittracker")})},et=fe=>{dt.fire({icon:"error",title:"Error",text:fe,confirmButtonColor:"#E53935"})},vt=async()=>{for(let fe=1;fe<=st.length;fe++)if(!Xe(fe)){e(fe);return}r(!0);try{const fe=new FormData,xe={applicant_id:m,application_type:ce.application_type,existing_permit_number:ce.existing_permit_number||"",business_name:ce.business_name,business_address:ce.business_address,business_email:ce.business_email,business_phone:ce.business_phone,business_type:ce.business_type,business_nature:ce.business_nature,owner_first_name:ce.owner_first_name,owner_last_name:ce.owner_last_name,owner_middle_name:ce.owner_middle_name||"",owner_address:ce.owner_address,id_type:ce.id_type,id_number:ce.id_number,date_of_birth:ce.date_of_birth,citizenship:ce.citizenship,barangay_clearance_id:ce.barangay_clearance_id,renewal_reason:ce.renewal_reason||"",amendment_type:ce.amendment_type||"",amendment_details:ce.amendment_details||"",amendment_reason:ce.amendment_reason||"",applicant_signature:ce.applicant_signature,declaration_agreed:n?1:0,date_submitted:ce.date_submitted,time_submitted:ce.time_submitted,status:"PENDING",permit_type:"LIQUOR"},Me=localStorage.getItem("user_id")||localStorage.getItem("goserveph_user_id")||"0";fe.append("user_id",Me),Object.entries(xe).forEach(([Be,mt])=>{fe.append(Be,mt??"")}),["barangay_clearance_id_copy","owner_valid_id","renewal_permit_copy","previous_permit_copy"].forEach(Be=>{ce[Be]instanceof File&&fe.append(Be,ce[Be])});const Pt=await fetch("/backend/liquor_permit/submit.php",{method:"POST",body:fe});if(!Pt.ok)throw new Error(`HTTP error! status: ${Pt.status}`);const as=await Pt.clone().text();let Zt;try{Zt=JSON.parse(as)}catch(Be){console.error("Failed to parse JSON:",Be),et("Server returned invalid response. Please try again.");return}if(Zt.success){Ve(Zt.message||"Liquor permit application submitted successfully!");try{ql("Business Permit",Zt.permit_id||"",{permit_type:"Liquor"})}catch(Be){console.warn("Activity log failed:",Be)}setTimeout(()=>{Y("/user/permittracker")},3e3)}else et(Zt.message||"Failed to submit application. Please try again.")}catch(fe){console.error("Submission error:",fe),et("Network error: "+fe.message)}finally{r(!1)}},Mt=fe=>{if(!fe)return null;const xe=URL.createObjectURL(fe),Me=fe.type.split("/")[0];l({url:xe,type:Me,name:fe.name})},Ye=()=>{o.url&&URL.revokeObjectURL(o.url),l({})},Et=fe=>{if(!fe)return 0;const xe=new Date(fe),Me=new Date;let ct=Me.getFullYear()-xe.getFullYear();const Pt=Me.getMonth()-xe.getMonth();return(Pt<0||Pt===0&&Me.getDate()<xe.getDate())&&ct--,ct},Gt=()=>{switch(ce.application_type){case"RENEWAL":return t.jsxs("div",{className:"mt-4 p-4 border border-blue-200 bg-blue-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx(Ya,{className:"w-5 h-5 text-blue-600 mr-2"}),t.jsx("h4",{className:"font-semibold text-blue-800",children:"Renewal Details"})]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium text-blue-700",children:["Reason for Renewal ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("textarea",{name:"renewal_reason",value:ce.renewal_reason,onChange:Oe,placeholder:"Explain why you are renewing your liquor permit",rows:"3",className:`w-full p-3 border border-blue-300 rounded-lg ${c.renewal_reason?"border-red-500":""}`}),c.renewal_reason&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.renewal_reason}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Please provide details about why you need to renew your liquor permit"})]})})]});case"AMENDMENT":return t.jsxs("div",{className:"mt-4 p-4 border border-purple-200 bg-purple-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx(dB,{className:"w-5 h-5 text-purple-600 mr-2"}),t.jsx("h4",{className:"font-semibold text-purple-800",children:"Amendment Details"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block mb-2 font-medium text-purple-700",children:["Type of Amendment ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsxs("select",{name:"amendment_type",value:ce.amendment_type,onChange:Oe,className:`w-full p-3 border border-purple-300 rounded-lg ${c.amendment_type?"border-red-500":""}`,children:[t.jsx("option",{value:"",children:"Select Amendment Type"}),gt.map(fe=>t.jsx("option",{value:fe.id,children:fe.name},fe.id))]}),c.amendment_type&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.amendment_type})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block mb-2 font-medium text-purple-700",children:["Amendment Details ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("textarea",{name:"amendment_details",value:ce.amendment_details,onChange:Oe,placeholder:"Provide specific details of the amendment",rows:"3",className:`w-full p-3 border border-purple-300 rounded-lg ${c.amendment_details?"border-red-500":""}`}),c.amendment_details&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.amendment_details})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block mb-2 font-medium text-purple-700",children:["Reason for Amendment ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("textarea",{name:"amendment_reason",value:ce.amendment_reason,onChange:Oe,placeholder:"Explain why you need to amend your liquor permit",rows:"3",className:`w-full p-3 border border-purple-300 rounded-lg ${c.amendment_reason?"border-red-500":""}`}),c.amendment_reason&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.amendment_reason})]})]})]});default:return null}},ee=()=>{switch(ce.application_type){case"RENEWAL":return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx(Ya,{className:"w-5 h-5 text-blue-600 mr-2"}),t.jsx("h4",{className:"font-semibold text-blue-800",children:"Renewal Requirements"})]}),t.jsxs("ul",{className:"space-y-2 text-sm text-blue-700",children:[t.jsxs("li",{className:"flex items-start",children:[t.jsx(Ht,{className:"w-4 h-4 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:"Copy of existing liquor permit"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx(Ht,{className:"w-4 h-4 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:"Proof of payment for current year"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx(Ht,{className:"w-4 h-4 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:"Updated barangay clearance for liquor"})]})]})]}),t.jsx("div",{className:"border border-blue-300 rounded-lg bg-blue-50",children:t.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-blue-200",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-3",children:ce.renewal_permit_copy?t.jsx(Ht,{className:"w-5 h-5 text-green-600"}):t.jsx(ls,{className:"w-5 h-5 text-red-600"})}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium text-blue-800",children:["Copy of Existing Liquor Permit: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-blue-700",children:ce.renewal_permit_copy?ce.renewal_permit_copy.name:"Required for renewal"}),t.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"* Copy of your current liquor permit"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"renewal_permit_copy",onChange:Oe,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-blue-100 transition-colors duration-300 border ${ce.renewal_permit_copy?"border-green-200 bg-green-50":"border-red-300 bg-red-50"}`,children:[t.jsx(er,{className:"w-4 h-4"}),ce.renewal_permit_copy?"Change":"Upload"]})]}),ce.renewal_permit_copy&&t.jsxs("button",{type:"button",onClick:()=>Mt(ce.renewal_permit_copy),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-blue-100 transition-colors duration-300",children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]})]})})]});case"AMENDMENT":return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx(dB,{className:"w-5 h-5 text-purple-600 mr-2"}),t.jsx("h4",{className:"font-semibold text-purple-800",children:"Amendment Requirements"})]}),t.jsxs("ul",{className:"space-y-2 text-sm text-purple-700",children:[t.jsxs("li",{className:"flex items-start",children:[t.jsx(Ht,{className:"w-4 h-4 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:"Copy of previous liquor permit"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx(Ht,{className:"w-4 h-4 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:"Supporting documents for the amendment (e.g., deed of sale for change of ownership)"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx(Ht,{className:"w-4 h-4 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:"Updated barangay clearance reflecting changes"})]})]})]}),t.jsxs("div",{className:"border border-purple-300 rounded-lg bg-purple-50",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-purple-200",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-3",children:ce.previous_permit_copy?t.jsx(Ht,{className:"w-5 h-5 text-green-600"}):t.jsx(ls,{className:"w-5 h-5 text-red-600"})}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium text-purple-800",children:["Copy of Previous Liquor Permit: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-purple-700",children:ce.previous_permit_copy?ce.previous_permit_copy.name:"Required for amendment"}),t.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"* Copy of your previous liquor permit before amendment"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"previous_permit_copy",onChange:Oe,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-purple-100 transition-colors duration-300 border ${ce.previous_permit_copy?"border-green-200 bg-green-50":"border-red-300 bg-red-50"}`,children:[t.jsx(er,{className:"w-4 h-4"}),ce.previous_permit_copy?"Change":"Upload"]})]}),ce.previous_permit_copy&&t.jsxs("button",{type:"button",onClick:()=>Mt(ce.previous_permit_copy),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-purple-100 transition-colors duration-300",children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]})]}),ce.amendment_type==="CHANGE_OWNER"&&t.jsxs("div",{className:"p-3 border-t border-purple-200",children:[t.jsx("p",{className:"text-sm font-medium text-purple-700 mb-2",children:"Additional documents for Change of Owner:"}),t.jsxs("ul",{className:"text-xs text-purple-600 space-y-1",children:[t.jsx("li",{children:" Deed of Sale or Transfer Document"}),t.jsx("li",{children:" Notarized Affidavit of Ownership Transfer"}),t.jsx("li",{children:" Valid ID of new owner"})]})]})]})]});default:return t.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx(c8,{className:"w-5 h-5 text-green-600 mr-2"}),t.jsx("h4",{className:"font-semibold text-green-800",children:"New Application Requirements"})]}),t.jsxs("ul",{className:"space-y-2 text-sm text-green-700",children:[t.jsxs("li",{className:"flex items-start",children:[t.jsx(Ht,{className:"w-4 h-4 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:"Valid Business Permit (if existing business)"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx(Ht,{className:"w-4 h-4 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:"Barangay Clearance specifically for liquor business"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx(Ht,{className:"w-4 h-4 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:"Valid ID of owner (must be 18+ years old)"})]}),t.jsxs("li",{className:"flex items-start",children:[t.jsx(Ht,{className:"w-4 h-4 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:"Proof of business location ownership or lease agreement"})]})]})]})}},Ie=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:Jt.secondary,fontFamily:Jt.font},children:"Review Application"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please review all information before submitting your liquor permit application."})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h4",{className:"font-bold text-lg",style:{color:Jt.primary},children:"Application Summary"}),t.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${ce.application_type==="NEW"?"bg-green-100 text-green-800":ce.application_type==="RENEWAL"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:ce.application_type==="NEW"?"New Application":ce.application_type==="RENEWAL"?"Renewal Application":"Amendment Application"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Application Date"}),t.jsx("p",{className:"font-medium",children:ce.date_submitted})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Application Time"}),t.jsx("p",{className:"font-medium",children:ce.time_submitted})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Applicant ID"}),t.jsx("p",{className:"font-medium",children:ce.applicant_id})]}),ce.application_type!=="NEW"&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Existing Permit No."}),t.jsx("p",{className:"font-medium",children:ce.existing_permit_number})]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:Jt.primary},children:"Business Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Business Name"}),t.jsx("p",{className:"font-medium",children:ce.business_name||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Business Type"}),t.jsx("p",{className:"font-medium",children:ce.business_type||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Business Nature"}),t.jsx("p",{className:"font-medium",children:ce.business_nature||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Contact Email"}),t.jsx("p",{className:"font-medium",children:ce.business_email||"Not provided"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Business Address"}),t.jsx("p",{className:"font-medium",children:ce.business_address||"Not provided"})]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:Jt.primary},children:"Owner Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),t.jsxs("p",{className:"font-medium",children:[ce.owner_first_name," ",ce.owner_middle_name," ",ce.owner_last_name]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Date of Birth / Age"}),t.jsxs("p",{className:"font-medium",children:[ce.date_of_birth?`${ce.date_of_birth} (${Et(ce.date_of_birth)} years old)`:"Not provided",!E&&ce.date_of_birth&&t.jsxs("span",{className:"ml-2 text-red-600 text-sm",children:[t.jsx(Ap,{className:"inline w-4 h-4 mr-1"}),"Must be 18+"]})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Citizenship"}),t.jsx("p",{className:"font-medium",children:ce.citizenship||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"ID Type & Number"}),t.jsxs("p",{className:"font-medium",children:[ce.id_type,": ",ce.id_number]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Owner Address"}),t.jsx("p",{className:"font-medium",children:ce.owner_address||"Not provided"})]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:Jt.primary},children:"Barangay Clearance Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Clearance ID Number"}),t.jsx("p",{className:"font-medium",children:ce.barangay_clearance_id||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Document Status"}),t.jsx("p",{className:"font-medium",children:ce.barangay_clearance_id_copy?t.jsxs("span",{className:"text-green-600 flex items-center",children:[t.jsx(Ht,{className:"w-4 h-4 mr-1"})," Uploaded"]}):t.jsxs("span",{className:"text-red-600 flex items-center",children:[t.jsx(ls,{className:"w-4 h-4 mr-1"})," Not uploaded"]})})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Note"}),t.jsx("p",{className:"text-sm text-gray-600",children:ce.barangay_clearance_id||ce.barangay_clearance_id_copy?" Barangay clearance requirement satisfied (ID or Document provided)":" Barangay clearance requirement not satisfied"})]})]})]}),ce.application_type==="RENEWAL"&&ce.renewal_reason&&t.jsxs("div",{className:"bg-white border border-blue-300 rounded-lg p-6 shadow-sm",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:Jt.primary},children:"Renewal Details"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Reason for Renewal"}),t.jsx("p",{className:"font-medium mt-1 p-3 bg-blue-50 rounded",children:ce.renewal_reason})]})]}),ce.application_type==="AMENDMENT"&&t.jsxs("div",{className:"bg-white border border-purple-300 rounded-lg p-6 shadow-sm",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:Jt.primary},children:"Amendment Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Amendment Type"}),t.jsx("p",{className:"font-medium",children:gt.find(fe=>fe.id===ce.amendment_type)?.name})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Amendment Details"}),t.jsx("p",{className:"font-medium mt-1 p-3 bg-purple-50 rounded",children:ce.amendment_details})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Amendment Reason"}),t.jsx("p",{className:"font-medium mt-1 p-3 bg-purple-50 rounded",children:ce.amendment_reason})]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:Jt.primary},children:"Documents Uploaded"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:t.jsxs("div",{className:"flex items-center",children:[ce.barangay_clearance_id||ce.barangay_clearance_id_copy?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Barangay Clearance for Liquor"}),t.jsx("p",{className:"text-sm text-gray-600",children:ce.barangay_clearance_id?`ID: ${ce.barangay_clearance_id}`:"ID: Not provided"}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Document: ",ce.barangay_clearance_id_copy?ce.barangay_clearance_id_copy.name:"Not uploaded"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Either ID or Document is sufficient"})]})]})}),t.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:t.jsxs("div",{className:"flex items-center",children:[ce.owner_valid_id?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Owner Valid ID"}),t.jsx("p",{className:"text-sm text-gray-600",children:ce.owner_valid_id?ce.owner_valid_id.name:"Not uploaded"})]})]})}),ce.application_type==="RENEWAL"&&t.jsx("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded",children:t.jsxs("div",{className:"flex items-center",children:[ce.renewal_permit_copy?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Copy of Existing Permit"}),t.jsx("p",{className:"text-sm text-blue-700",children:ce.renewal_permit_copy?ce.renewal_permit_copy.name:"Not uploaded"})]})]})}),ce.application_type==="AMENDMENT"&&t.jsx("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded",children:t.jsxs("div",{className:"flex items-center",children:[ce.previous_permit_copy?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Copy of Previous Permit"}),t.jsx("p",{className:"text-sm text-purple-700",children:ce.previous_permit_copy?ce.previous_permit_copy.name:"Not uploaded"})]})]})})]})]}),t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:Jt.primary},children:"Declaration"}),t.jsxs("div",{className:"mb-6 p-4 border-2 border-red-200 bg-red-50 rounded-lg",children:[t.jsx("h5",{className:"font-bold mb-3 text-red-700",children:"LIQUOR PERMIT DECLARATION"}),t.jsxs("div",{className:"text-sm space-y-2",children:[t.jsxs("p",{children:["I, ",t.jsxs("span",{className:"font-bold",children:[ce.owner_first_name," ",ce.owner_last_name]}),", hereby solemnly declare that:"]}),t.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[t.jsx("li",{children:"All information provided in this application is true, complete, and correct;"}),t.jsx("li",{children:"I am at least 18 years of age;"}),t.jsx("li",{children:"I will comply with all liquor laws and regulations;"}),t.jsx("li",{children:"I will not serve alcohol to minors;"}),t.jsx("li",{children:"I accept full responsibility for any violations."})]})]})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx("input",{type:"checkbox",id:"final-declaration",checked:n,onChange:fe=>i(fe.target.checked),className:`w-5 h-5 mt-1 text-green-600 border-gray-300 rounded focus:ring-green-500 ${c.agreeDeclaration?"border-red-500":""}`}),t.jsxs("label",{htmlFor:"final-declaration",className:"ml-3",children:[t.jsx("span",{className:"font-bold text-red-700",children:"FINAL DECLARATION AND CONSENT *"}),t.jsx("p",{className:"text-sm mt-1",children:"I have read, understood, and agree to all terms and conditions stated in this declaration. I certify that all information provided is accurate and I accept full responsibility."})]})]}),c.agreeDeclaration&&t.jsx("p",{className:"text-red-600 text-sm mt-2 ml-8",children:c.agreeDeclaration}),t.jsxs("div",{className:"mt-6 pt-6 border-t",children:[t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Upload Your Signature ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"file",accept:"image/*",onChange:ze,className:"w-full p-2 border border-gray-300 rounded-lg"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload an image of your signature (PNG, JPG, etc.)"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Applicant Signature"}),ce.applicant_signature?t.jsxs("div",{className:"mt-2",children:[t.jsx("img",{src:ce.applicant_signature,alt:"Signature",className:"h-20 border rounded"}),t.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Signature uploaded"})]}):t.jsx("p",{className:"text-red-600 text-sm mt-1",children:"Signature required"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Submission Date"}),t.jsx("p",{className:"font-medium",children:ce.date_submitted}),t.jsx("p",{className:"text-xs text-gray-500",children:ce.time_submitted})]})]})]})]})]})]}),ue=()=>{switch(a){case 1:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:Jt.secondary,fontFamily:Jt.font},children:"Type of Application"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:st[0].description})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:["Application Type ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:Ae.map(fe=>t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"radio",id:`type-${fe.id}`,name:"application_type",value:fe.id,checked:ce.application_type===fe.id,onChange:Oe,className:"hidden"}),t.jsx("label",{htmlFor:`type-${fe.id}`,className:`block p-4 border-2 rounded-lg cursor-pointer transition-all duration-300 ${ce.application_type===fe.id?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-5 h-5 border rounded-full mr-3 flex items-center justify-center ${ce.application_type===fe.id?"bg-blue-500 border-blue-500":"border-gray-400"}`,children:ce.application_type===fe.id&&t.jsx(Ht,{className:"w-3 h-3 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:fe.name}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:fe.description})]})]})})]},fe.id))}),c.application_type&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.application_type})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:[ce.application_type==="NEW"?"Existing Business Permit Number (Optional)":"Existing Liquor Permit Number",ce.application_type!=="NEW"&&t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",name:"existing_permit_number",value:ce.existing_permit_number,onChange:Oe,placeholder:ce.application_type==="NEW"?"Enter business permit number (recommended)":"Enter liquor permit number (required)",className:`flex-1 p-3 border border-black rounded-lg ${c.existing_permit_number?"border-red-500":""}`,style:{color:Jt.secondary,fontFamily:Jt.font}}),t.jsx("button",{type:"button",onClick:xt,disabled:v||!ce.existing_permit_number.trim()&&ce.application_type!=="NEW",className:`px-4 py-3 rounded-lg font-medium text-white ${v||!ce.existing_permit_number.trim()&&ce.application_type!=="NEW"?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 transition-colors duration-300"}`,children:v?t.jsx(Ya,{className:"w-5 h-5 animate-spin"}):"Verify"})]}),c.existing_permit_number&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.existing_permit_number}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ce.application_type==="NEW"?"Enter your existing business permit number to auto-fill business information (recommended)":`Enter your existing liquor permit number for ${ce.application_type.toLowerCase()}`}),g&&ce.application_type==="NEW"&&t.jsxs("div",{className:"mt-4 p-4 border border-green-300 bg-green-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"font-medium text-green-700",children:"Business Permit Found!"}),t.jsx(Ht,{className:"w-5 h-5 text-green-600"})]}),t.jsxs("div",{className:"text-sm",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Business:"})," ",g.business_name]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Owner:"})," ",g.owner_first_name," ",g.owner_last_name]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Status:"})," ",t.jsx("span",{className:"text-green-600",children:g.status})]}),t.jsx("p",{className:"mt-2 text-green-600",children:"Business information has been auto-filled"})]})]}),B&&ce.application_type!=="NEW"&&t.jsxs("div",{className:"mt-4 p-4 border border-blue-300 bg-blue-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"font-medium text-blue-700",children:"Liquor Permit Found!"}),t.jsx(Ht,{className:"w-5 h-5 text-blue-600"})]}),t.jsxs("div",{className:"text-sm",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Business:"})," ",B.business_name]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Owner:"})," ",B.owner_first_name," ",B.owner_last_name]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Type:"})," ",B.business_type]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Status:"})," ",t.jsx("span",{className:"text-blue-600",children:B.status})]}),t.jsx("p",{className:"mt-2 text-blue-600",children:"Liquor permit information has been loaded"})]})]})]})]})]});case 2:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:Jt.secondary,fontFamily:Jt.font},children:"Business Information"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:st[1].description})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:["Business Type ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsxs("select",{name:"business_type",value:ce.business_type,onChange:Oe,className:`w-full p-3 border border-black rounded-lg ${c.business_type?"border-red-500":""}`,style:{color:Jt.secondary,fontFamily:Jt.font},children:[t.jsx("option",{value:"",children:"Select Business Type"}),q.map(fe=>t.jsx("option",{value:fe,children:fe},fe))]}),c.business_type&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.business_type})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:["Business Nature ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsxs("select",{name:"business_nature",value:ce.business_nature,onChange:Oe,className:`w-full p-3 border border-black rounded-lg ${c.business_nature?"border-red-500":""}`,style:{color:Jt.secondary,fontFamily:Jt.font},children:[t.jsx("option",{value:"",children:"Select Business Nature"}),Qt.map(fe=>t.jsx("option",{value:fe,children:fe},fe))]}),c.business_nature&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.business_nature})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:["Business Name ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"text",name:"business_name",value:ce.business_name,onChange:Oe,placeholder:"Registered business name",className:`w-full p-3 border border-black rounded-lg ${c.business_name?"border-red-500":""}`,style:{color:Jt.secondary,fontFamily:Jt.font}}),c.business_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.business_name})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:["Business Address ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("textarea",{name:"business_address",value:ce.business_address,onChange:Oe,placeholder:"Complete business address",rows:"3",className:`w-full p-3 border border-black rounded-lg ${c.business_address?"border-red-500":""}`,style:{color:Jt.secondary,fontFamily:Jt.font}}),c.business_address&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.business_address})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:["Business Email ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"email",name:"business_email",value:ce.business_email,onChange:Oe,placeholder:"business@example.com",className:`w-full p-3 border border-black rounded-lg ${c.business_email?"border-red-500":""}`,style:{color:Jt.secondary,fontFamily:Jt.font}}),c.business_email&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.business_email})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:["Business Phone ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"tel",name:"business_phone",value:ce.business_phone,onChange:Oe,placeholder:"09XXXXXXXXX",maxLength:11,inputMode:"numeric",pattern:"[0-9]*",className:`w-full p-3 border border-black rounded-lg ${c.business_phone?"border-red-500":""}`,style:{color:Jt.secondary,fontFamily:Jt.font}}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must be 11 digits starting with 09"}),c.business_phone&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.business_phone})]})]}),Gt()]})]});case 3:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:Jt.secondary,fontFamily:Jt.font},children:"Owner Information"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:st[2].description})]}),!E&&ce.date_of_birth&&t.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ap,{className:"w-5 h-5 text-red-600 mr-2"}),t.jsx("p",{className:"font-medium text-red-700",children:"Age Requirement Not Met"})]}),t.jsxs("p",{className:"text-sm text-red-600 mt-1",children:["Applicant must be at least 18 years old to apply for a liquor permit. Current age: ",Et(ce.date_of_birth)," years."]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:["Owner First Name ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"text",name:"owner_first_name",value:ce.owner_first_name,onChange:Oe,placeholder:"First Name",className:`w-full p-3 border border-black rounded-lg ${c.owner_first_name?"border-red-500":""}`,style:{color:Jt.secondary,fontFamily:Jt.font}}),c.owner_first_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.owner_first_name})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:["Owner Last Name ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"text",name:"owner_last_name",value:ce.owner_last_name,onChange:Oe,placeholder:"Last Name",className:`w-full p-3 border border-black rounded-lg ${c.owner_last_name?"border-red-500":""}`,style:{color:Jt.secondary,fontFamily:Jt.font}}),c.owner_last_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.owner_last_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:"Owner Middle Name"}),t.jsx("input",{type:"text",name:"owner_middle_name",value:ce.owner_middle_name,onChange:Oe,placeholder:"Middle Name",className:"w-full p-3 border border-black rounded-lg",style:{color:Jt.secondary,fontFamily:Jt.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:["Date of Birth ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"date",name:"date_of_birth",value:ce.date_of_birth,onChange:Oe,className:`w-full p-3 border border-black rounded-lg pl-10 ${c.date_of_birth?"border-red-500":""}`,style:{color:Jt.secondary,fontFamily:Jt.font},max:new Date(new Date().setFullYear(new Date().getFullYear()-18)).toISOString().split("T")[0]}),t.jsx(T6,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),ce.date_of_birth&&t.jsx("div",{className:`text-xs mt-1 ${E?"text-green-600":"text-red-600"}`,children:E?" Age requirement met (18+ years)":" Must be 18 years or older"})]}),c.date_of_birth&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.date_of_birth})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:["Citizenship ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsxs("select",{name:"citizenship",value:ce.citizenship,onChange:Oe,className:`w-full p-3 border border-black rounded-lg ${c.citizenship?"border-red-500":""}`,style:{color:Jt.secondary,fontFamily:Jt.font},children:[t.jsx("option",{value:"FILIPINO",children:"Filipino"}),t.jsx("option",{value:"DUAL_CITIZEN",children:"Dual Citizen"}),t.jsx("option",{value:"FOREIGNER",children:"Foreigner"})]}),c.citizenship&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.citizenship})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:["Owner Address ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("textarea",{name:"owner_address",value:ce.owner_address,onChange:Oe,placeholder:"Complete owner address",rows:"3",className:`w-full p-3 border border-black rounded-lg ${c.owner_address?"border-red-500":""}`,style:{color:Jt.secondary,fontFamily:Jt.font}}),c.owner_address&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.owner_address})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:["Type of ID ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsxs("select",{name:"id_type",value:ce.id_type,onChange:Oe,className:`w-full p-3 border border-black rounded-lg ${c.id_type?"border-red-500":""}`,style:{color:Jt.secondary,fontFamily:Jt.font},children:[t.jsx("option",{value:"",children:"Select ID Type"}),yt.map(fe=>t.jsx("option",{value:fe.id,children:fe.name},fe.id))]}),c.id_type&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.id_type})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:Jt.secondary},children:["ID Number ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"text",name:"id_number",value:ce.id_number,onChange:Oe,placeholder:"ID number",className:`w-full p-3 border border-black rounded-lg ${c.id_number?"border-red-500":""}`,style:{color:Jt.secondary,fontFamily:Jt.font}}),c.id_number&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.id_number})]})]})]});case 4:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Ht,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"Important Note for Liquor Permit:"}),t.jsxs("p",{className:"text-sm text-blue-700",children:[" All documents marked with ",t.jsx("span",{className:"font-bold text-red-600",children:"*"})," are ",t.jsx("span",{className:"font-bold text-red-600",children:"MANDATORY"})," for liquor permit application."]}),t.jsx("p",{className:"text-sm text-blue-700 mt-1",children:" Ensure all documents are up-to-date and valid."}),t.jsx("p",{className:"text-sm text-blue-700 mt-1",children:" Upload both front and back of valid IDs."})]})]})}),t.jsxs("div",{className:"space-y-4",children:[ee(),t.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[t.jsx("div",{className:"flex items-center justify-between p-3 bg-blue-50",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-3",children:ce.barangay_clearance_id.trim()&&ye[ce.barangay_clearance_id]||ce.barangay_clearance_id_copy?t.jsx(Ht,{className:"w-5 h-5 text-green-600"}):t.jsx(ls,{className:"w-5 h-5 text-red-600"})}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["Barangay Clearance for Liquor: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:ce.barangay_clearance_id_copy?ce.barangay_clearance_id_copy.name:ce.barangay_clearance_id?"ID Provided":"File or ID required"}),t.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"* Either file upload OR ID number must be provided"})]})]})}),t.jsxs("div",{className:"p-3 bg-gray-50 border-b",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:Jt.secondary,fontFamily:Jt.font},children:"Choose verification method:"}),t.jsxs("div",{className:"flex gap-6",children:[t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx("input",{type:"radio",name:"barangay_method",value:"upload",checked:me==="upload",onChange:fe=>Te(fe.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),t.jsx("span",{className:"ml-2 text-sm",style:{color:Jt.secondary,fontFamily:Jt.font},children:"Upload Document"})]}),t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx("input",{type:"radio",name:"barangay_method",value:"id",checked:me==="id",onChange:fe=>Te(fe.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),t.jsx("span",{className:"ml-2 text-sm",style:{color:Jt.secondary,fontFamily:Jt.font},children:"Enter ID Number (API Verification)"})]})]})]}),me==="upload"&&t.jsxs("div",{className:"p-3 bg-white",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"barangay_clearance_id_copy",onChange:Oe,accept:".pdf,.jpg,.png,.jpeg",className:"hidden"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-2 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${ce.barangay_clearance_id_copy?"border-green-200 bg-green-50":"border-gray-300"}`,style:{color:Jt.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),ce.barangay_clearance_id_copy?"Change File":"Upload Document"]})]}),ce.barangay_clearance_id_copy&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-sm text-gray-600",children:ce.barangay_clearance_id_copy.name}),t.jsxs("button",{type:"button",onClick:()=>Mt(ce.barangay_clearance_id_copy),className:"flex items-center gap-1 px-3 py-2 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border border-gray-300",style:{color:Jt.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]}),t.jsxs("button",{type:"button",onClick:()=>J("barangay_clearance_id_copy",ce.barangay_clearance_id_copy),disabled:Q.barangay_clearance_id_copy?.isVerifying,className:`flex items-center gap-1 px-3 py-2 text-sm rounded border ${Q.barangay_clearance_id_copy?.isVerifying?"border-gray-300 bg-gray-100 text-gray-500 cursor-not-allowed":Q.barangay_clearance_id_copy?.isVerified?"border-green-500 bg-green-50 text-green-700":"border-blue-500 bg-blue-50 text-blue-700 hover:bg-blue-100"}`,children:[Q.barangay_clearance_id_copy?.isVerifying?t.jsx(Or,{className:"w-4 h-4 animate-spin"}):Q.barangay_clearance_id_copy?.isVerified?t.jsx(Ht,{className:"w-4 h-4"}):t.jsx(Pr,{className:"w-4 h-4"}),Q.barangay_clearance_id_copy?.isVerifying?"Verifying...":Q.barangay_clearance_id_copy?.isVerified?"Verified":"Verify"]})]})]}),Q.barangay_clearance_id_copy?.isVerified&&t.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-2",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Document verified successfully"]}),Q.barangay_clearance_id_copy?.isVerified===!1&&t.jsxs("div",{className:"text-xs text-red-600 flex items-center mt-2",children:[t.jsx(ls,{className:"w-3 h-3 mr-1"})," Verification failed - please check document"]})]}),me==="id"&&t.jsxs("div",{className:"p-3 bg-white",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:Jt.secondary,fontFamily:Jt.font},children:"Barangay Clearance ID/Applicant ID:"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",name:"barangay_clearance_id",value:ce.barangay_clearance_id,onChange:Oe,placeholder:"Enter Barangay Clearance Applicant ID",className:"flex-1 p-2 border border-gray-300 rounded",style:{color:Jt.secondary,fontFamily:Jt.font}}),ce.barangay_clearance_id&&t.jsx("button",{type:"button",onClick:He,disabled:K,className:`flex items-center gap-1 px-4 py-2 text-sm rounded transition-colors duration-300 border ${ye[ce.barangay_clearance_id]?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,children:K?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):ye[ce.barangay_clearance_id]?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(sa,{className:"w-4 h-4"})," Verify with API"]})})]})]}),t.jsx("div",{className:"p-3 bg-gray-50",children:t.jsx("p",{className:"text-xs",children:t.jsx("span",{className:`font-medium ${ce.barangay_clearance_id.trim()&&ye[ce.barangay_clearance_id]||ce.barangay_clearance_id_copy?"text-green-600":"text-red-600"}`,children:ce.barangay_clearance_id.trim()&&ye[ce.barangay_clearance_id]||ce.barangay_clearance_id_copy?" Requirement satisfied":ce.barangay_clearance_id&&!ye[ce.barangay_clearance_id]?" Please verify the ID to proceed":" Please provide either the document or ID number"})})})]}),c.barangay_clearance&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.barangay_clearance}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg bg-blue-50",children:[t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["Owner Valid ID: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:ce.owner_valid_id?ce.owner_valid_id.name:"Required"}),t.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"* This document is mandatory"})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"owner_valid_id",onChange:Oe,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden",required:!0}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${ce.owner_valid_id?"border-green-200 bg-green-50":"border-red-300 bg-red-50"}`,style:{color:Jt.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),ce.owner_valid_id?"Change":"Upload"]})]}),ce.owner_valid_id&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{type:"button",onClick:()=>Mt(ce.owner_valid_id),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:Jt.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]}),t.jsx("button",{type:"button",onClick:()=>J("owner_valid_id",ce.owner_valid_id),disabled:Q.owner_valid_id?.isVerifying,className:`flex items-center gap-1 px-3 py-1 text-sm rounded transition-colors duration-300 border ${Q.owner_valid_id?.isVerified?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,children:Q.owner_valid_id?.isVerifying?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):Q.owner_valid_id?.isVerified?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(Pr,{className:"w-4 h-4"})," Verify"]})})]})]})]}),Q.owner_valid_id?.isVerified&&t.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-green-600/90 backdrop-blur-md shadow-lg border border-green-400/50",children:[t.jsx(Ht,{className:"w-4 h-4 text-white"}),t.jsx("span",{className:"text-xs font-semibold text-white",children:"Verified ID"})]})]}),ce.owner_valid_id&&Q.owner_valid_id?.isVerifying&&t.jsxs("div",{className:"p-3 border-l border-r border-b border-gray-300 rounded-b-lg bg-blue-50",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-600",children:[t.jsx("span",{children:"Verifying document..."}),t.jsxs("span",{children:[Q.owner_valid_id.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:t.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${Q.owner_valid_id.progress}%`}})})]}),c.owner_valid_id&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.owner_valid_id})]})]});case 5:return Ie();default:return null}};return t.jsxs("div",{className:"mx-1 mt-1 p-6 rounded-lg min-h-screen",style:{background:Jt.background,color:Jt.secondary,fontFamily:Jt.font},children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 rounded-full bg-blue-100",children:t.jsx(DQ,{className:"w-10 h-10 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold",style:{color:Jt.primary},children:"Liquor Permit Application"}),t.jsx("p",{className:"mt-1 text-lg font-semibold text-blue-700",children:"Caloocan City Business Permit and Licensing Office"})]})]}),t.jsx("p",{className:"mt-2",style:{color:Jt.secondary},children:"Complete the form below to apply for a liquor permit for your business"}),t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${ce.application_type==="NEW"?"bg-green-100 text-green-800":ce.application_type==="RENEWAL"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:ce.application_type==="NEW"?"New Application":ce.application_type==="RENEWAL"?"Renewal Application":"Amendment Application"}),B&&t.jsxs("div",{className:"px-3 py-1 rounded-full bg-yellow-100 text-yellow-800 text-sm font-medium",children:["Existing Permit: ",B.permit_number]})]})]}),t.jsx("button",{onClick:()=>Y("/user/dashboard"),onMouseEnter:fe=>fe.currentTarget.style.background=Jt.accent,onMouseLeave:fe=>fe.currentTarget.style.background=Jt.success,style:{background:Jt.success},className:"px-4 py-2 rounded-lg font-medium text-white hover:bg-[#FDA811] transition-colors duration-300",children:"Back to Dashboard"})]}),t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"flex items-center justify-between overflow-x-auto",children:st.map((fe,xe)=>t.jsxs("div",{className:"flex items-center flex-shrink-0",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2",style:{background:a>=fe.id?Jt.success:"transparent",borderColor:a>=fe.id?Jt.success:"#9CA3AF",color:a>=fe.id?"#fff":"#9CA3AF",fontFamily:Jt.font},children:fe.id}),t.jsxs("div",{className:"ml-3 hidden md:block",children:[t.jsx("p",{className:"text-sm font-medium",style:{color:a>=fe.id?Jt.success:Jt.secondary,fontFamily:Jt.font},children:fe.title}),t.jsx("p",{className:"text-xs text-gray-500",children:fe.description})]}),xe<st.length-1&&t.jsx("div",{className:"hidden md:block w-16 h-0.5 mx-4",style:{background:a>fe.id?Jt.success:"#9CA3AF"}})]},fe.id))})}),y&&t.jsx("div",{className:"p-4 mb-6 rounded",style:{background:y.type==="success"?"#e6f9ed":y.type==="warning"?"#fff8e6":"#fdecea",color:y.type==="success"?Jt.success:y.type==="warning"?Jt.warning:Jt.danger,fontFamily:Jt.font,border:"1px solid "+(y.type==="success"?Jt.success:y.type==="warning"?Jt.warning:Jt.danger)},children:y.message}),t.jsxs("form",{onSubmit:_e,className:"space-y-8",children:[ue(),t.jsxs("div",{className:"flex justify-between pt-6",children:[a>1&&t.jsx("button",{type:"button",onClick:Se,onMouseEnter:fe=>fe.currentTarget.style.background=Jt.accent,onMouseLeave:fe=>fe.currentTarget.style.background=Jt.success,style:{background:Jt.success},className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:"Previous"}),a<st.length?t.jsx("button",{type:"submit",disabled:!Ct(a),style:{background:Ct(a)?Jt.success:"#9CA3AF"},onMouseEnter:fe=>{Ct(a)&&(fe.currentTarget.style.background=Jt.accent)},onMouseLeave:fe=>{Ct(a)&&(fe.currentTarget.style.background=Jt.success)},className:`px-6 py-3 rounded-lg font-semibold text-white ${Ct(a)?"transition-colors duration-300":"cursor-not-allowed"}`,children:a===st.length-1?"Review Application":"Next"}):t.jsx("button",{type:"submit",onMouseEnter:fe=>fe.currentTarget.style.background=Jt.accent,onMouseLeave:fe=>fe.currentTarget.style.background=Jt.success,style:{background:Jt.success},className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:"Submit Application"})]})]}),o.url&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"rounded-lg shadow-lg w-full max-w-4xl border border-gray-200 overflow-hidden",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:Jt.font,backdropFilter:"blur(10px)",maxHeight:"90vh"},children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold",style:{color:Jt.primary},children:"Preview Document"}),t.jsx("button",{onClick:Ye,className:"text-gray-500 hover:text-gray-700 transition-colors duration-300",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 overflow-auto",style:{maxHeight:"calc(90vh - 80px)"},children:[t.jsxs("p",{className:"text-sm mb-4",style:{color:Jt.secondary,fontFamily:Jt.font},children:["File: ",t.jsx("span",{className:"font-medium",children:o.name})]}),t.jsx("div",{className:"bg-white rounded-lg border p-4",children:o.type==="image"?t.jsx("div",{className:"flex justify-center",children:t.jsx("img",{src:o.url,alt:"Preview",className:"max-w-full h-auto max-h-[500px]"})}):o.type==="application"&&o.name?.includes(".pdf")?t.jsx("iframe",{src:o.url,className:"w-full h-[500px] rounded",title:"PDF Preview"}):t.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[t.jsx(Kt,{className:"w-24 h-24 text-gray-400 mb-4"}),t.jsxs("p",{className:"text-gray-600 mb-2",children:["File: ",o.name]}),t.jsx("p",{className:"text-gray-500 mb-6",children:"Preview not available for this file type"}),t.jsx("a",{href:o.url,download:o.name,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors duration-300",children:"Download File"})]})}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsx("button",{onClick:Ye,style:{background:Jt.success},onMouseEnter:fe=>fe.currentTarget.style.background=Jt.accent,onMouseLeave:fe=>fe.currentTarget.style.background=Jt.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close Preview"})})]})]})}),ae&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsx("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-md border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:Jt.font,backdropFilter:"blur(10px)"},children:t.jsxs("div",{className:"text-center",children:[t.jsx(Or,{className:"w-16 h-16 text-blue-600 animate-spin mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Verifying Document..."}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please wait while we verify your document using AI technology"}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:t.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${V}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[V,"% Complete"]})]})})}),X&&H&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-2xl border border-gray-200 max-h-[90vh] overflow-y-auto",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:Jt.font,backdropFilter:"blur(10px)"},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${H.isVerified?"bg-green-100":"bg-red-100"}`,children:H.isVerified?t.jsx(Ht,{className:"w-8 h-8 text-green-600"}):t.jsx(ls,{className:"w-8 h-8 text-red-600"})})}),t.jsx("h2",{className:"text-xl font-bold text-center mb-2",style:{color:H.isVerified?Jt.success:Jt.danger},children:H.isVerified?"Document Verified!":"Verification Failed"}),t.jsx("p",{className:"text-sm text-center text-gray-600 mb-4",children:H.fileName}),H.invalidReasons&&t.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx("p",{className:"font-semibold text-red-800 mb-2",children:"Issues Found:"}),t.jsx("ul",{className:"list-disc ml-5 space-y-1",children:H.invalidReasons.map((fe,xe)=>t.jsx("li",{className:"text-sm text-red-700",children:fe},xe))})]}),H.isVerified&&t.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[t.jsx("p",{className:"text-green-800 font-semibold",children:"All verification checks passed!"}),t.jsx("p",{className:"text-sm text-green-700 mt-1",children:"The document has been successfully verified and matches the required criteria."})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:()=>$(!1),style:{background:Jt.success},onMouseEnter:fe=>fe.currentTarget.style.background=Jt.accent,onMouseLeave:fe=>fe.currentTarget.style.background=Jt.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close"})})]})}),se&&R&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:Jt.font},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${R.success?"bg-green-100":"bg-red-100"}`,children:R.success?t.jsx(Ht,{className:"w-8 h-8 text-green-600"}):t.jsx(ls,{className:"w-8 h-8 text-red-600"})})}),t.jsx("h2",{className:"text-xl font-bold text-center mb-4",style:{color:R.success?Jt.success:Jt.danger},children:R.success?"Verification Successful":"Verification Failed"}),t.jsx("p",{className:"text-sm text-center mb-6",style:{color:Jt.secondary},children:R.message}),R.data&&t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2 mb-6",children:[t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:"Permit ID:"})," ",R.data.permit_id]}),t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:"Applicant:"})," ",R.data.first_name," ",R.data.last_name]}),t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:"Status:"})," ",t.jsx("span",{className:"text-green-600 font-semibold",children:R.data.status})]})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:()=>le(!1),style:{background:Jt.success},onMouseEnter:fe=>fe.currentTarget.style.background=Jt.accent,onMouseLeave:fe=>fe.currentTarget.style.background=Jt.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close"})})]})})]})}const cs={primary:"#4A90E2",secondary:"#000000",accent:"#FDA811",success:"#4CAF50",danger:"#E53935",warning:"#FF9800",background:"#FBFBFB",font:"Montserrat, Arial, sans-serif"},fq="/backend/barangay_permit/admin_fetch.php";function pq(){const[a,e]=C.useState(1),[s,r]=C.useState(!1),[n,i]=C.useState(!1),[o,l]=C.useState({}),[c,u]=C.useState({}),[m,A]=C.useState(""),[g,p]=C.useState(null),v=ka(),[b,y]=C.useState(!1),[w,B]=C.useState(null),[j,E]=C.useState(!1),[S,T]=C.useState({}),[M,D]=C.useState("upload"),P=()=>new Date().toISOString().split("T")[0],Y=()=>{const me=new Date;return me.setDate(me.getDate()+1),me.toISOString().split("T")[0]};C.useEffect(()=>{const me=localStorage.getItem("userId")||localStorage.getItem("user_id")||localStorage.getItem("applicant_id")||"USER001";A(me)},[]);const Q=[{id:1,title:"Applicant Information",description:"Business owner details"},{id:2,title:"Event Details",description:"Special permit information"},{id:3,title:"Documents",description:"Upload required documents"},{id:4,title:"Declaration",description:"Agree to terms and sign"},{id:5,title:"Review & Submit",description:"Review and submit application"}],[L,ae]=C.useState({business_name:"",owner_first_name:"",owner_last_name:"",owner_middle_name:"",owner_address:"",contact_number:"",email_address:"",special_permit_type:"",event_description:"",event_date_start:"",event_date_end:"",event_location:"",estimated_attendees:"",event_permit:null,barangay_clearance:null,barangay_clearance_id:"",valid_id:null,applicant_signature:"",declaration_agreed:!1,applicant_id:"",date_submitted:P(),time_submitted:new Date().toTimeString().slice(0,8)});C.useEffect(()=>{ae(me=>({...me,applicant_id:m}))},[m]);const ne=["Temporary Event Permit","Seasonal Business Permit","Pop-up Store Permit","Trade Fair / Bazaar Permit","Festival / Concert Permit","Food Cart / Mobile Vendor Permit","Construction Site Permit","Promotional Event Permit","Other Special Permit"],V=me=>{const{name:Te,value:we,type:st,files:ce,checked:tt}=me.target;if(st==="file"){const Ae=ce[0];ae(gt=>({...gt,[Te]:Ae||null}))}else if(st==="checkbox")ae(Ae=>({...Ae,[Te]:tt}));else{if(Te==="contact_number"){const Ae=we.replace(/\D/g,"").slice(0,11);ae(gt=>({...gt,[Te]:Ae}));return}ae(Ae=>({...Ae,[Te]:we}))}},O=me=>{const Te=me.target.files[0];if(Te){const we=new FileReader;we.onloadend=()=>{ae(st=>({...st,applicant_signature:we.result}))},we.readAsDataURL(Te)}},X=me=>{const Te={};if(me===1&&(L.business_name.trim()||(Te.business_name="Business name is required"),L.owner_first_name.trim()||(Te.owner_first_name="First name is required"),L.owner_last_name.trim()||(Te.owner_last_name="Last name is required"),L.owner_address.trim()||(Te.owner_address="Address is required"),L.contact_number.trim()?(!L.contact_number.startsWith("09")||L.contact_number.length!==11)&&(Te.contact_number="Contact number must start with 09 and be 11 digits"):Te.contact_number="Contact number is required",L.email_address.trim()||(Te.email_address="Email is required")),me===2&&(L.special_permit_type||(Te.special_permit_type="Permit type is required"),L.event_date_start?L.event_date_start<Y()&&(Te.event_date_start="Start date must be a future date"):Te.event_date_start="Start date is required",L.event_date_end?L.event_date_end<Y()&&(Te.event_date_end="End date must be a future date"):Te.event_date_end="End date is required",L.event_date_start&&L.event_date_end&&L.event_date_end<L.event_date_start&&(Te.event_date_end="End date must be after start date"),L.event_location.trim()||(Te.event_location="Location is required")),me===3&&(!L.barangay_clearance&&!L.barangay_clearance_id.trim()&&(Te.barangay_clearance="Barangay clearance (file or ID) is required"),L.valid_id||(Te.valid_id="Valid ID is required")),me===4&&(L.applicant_signature||(Te.applicant_signature="Signature is required"),n||(Te.agreeDeclaration="You must agree to the declaration")),u(Te),Object.keys(Te).length>0){const we=Object.values(Te).join(`
 `);return dt.fire({icon:"warning",title:"Please Complete Required Fields",html:`<div style="text-align:left;"><p> ${we.replace(/\n /g,"</p><p> ")}</p></div>`,confirmButtonColor:cs.primary}),!1}return!0},$=me=>me===1?L.business_name.trim()&&L.owner_first_name.trim()&&L.owner_last_name.trim()&&L.owner_address.trim()&&L.contact_number.trim()&&L.contact_number.startsWith("09")&&L.contact_number.length===11&&L.email_address.trim():me===2?L.special_permit_type&&L.event_date_start&&L.event_date_start>=Y()&&L.event_date_end&&L.event_date_end>=Y()&&L.event_location.trim():me===3?(L.barangay_clearance||L.barangay_clearance_id.trim())&&L.valid_id:me===4?L.applicant_signature&&n:!0,H=async()=>{const me=L.barangay_clearance_id.trim();if(!me){B({success:!1,message:"Please enter a barangay clearance ID to verify"}),E(!0);return}if(S[me]){B({success:!0,message:"Barangay clearance ID is already verified and valid!",data:S[me]}),E(!0);return}y(!0);try{const Te=await fetch(fq);if(!Te.ok)throw new Error(`HTTP error! status: ${Te.status}`);const we=await Te.json();let st=[];we.success&&we.data?st=we.data:Array.isArray(we)?st=we:st=we.permits||[];const ce=st.find(tt=>{const Ae=tt.applicant_id?tt.applicant_id.toString():"",gt=tt.permit_id?tt.permit_id.toString():"",q=me.toString();return(Ae===q||gt===q)&&tt.status==="approved"});ce?(B({success:!0,message:"Barangay clearance ID is VALID! Status: approved",data:ce}),T(tt=>({...tt,[me]:ce})),ce.permit_id&&ae(tt=>({...tt,barangay_permit_id:ce.permit_id}))):B({success:!1,message:"Barangay clearance ID not found or not approved. Please check the ID and try again.",data:null})}catch(Te){console.error("Error verifying barangay clearance ID:",Te),B({success:!1,message:"Error connecting to verification service. Please try again later."})}finally{y(!1),E(!0)}},te=me=>{if(me.preventDefault(),a===Q.length){dt.fire({title:"Submit Application",html:`
          <div style="text-align: left; margin: 20px 0;">
            <p style="margin-bottom: 15px;">Are you sure you want to submit your special permit application?</p>
            <div style="background: #f9f9f9; padding: 15px; border-radius: 8px; border-left: 4px solid #4A90E2;">
              <p style="font-size: 14px;"><strong>Business:</strong> ${L.business_name}</p>
              <p style="font-size: 14px;"><strong>Permit Type:</strong> ${L.special_permit_type}</p>
              <p style="font-size: 14px;"><strong>Event Period:</strong> ${L.event_date_start} to ${L.event_date_end}</p>
            </div>
          </div>
        `,icon:"question",showCancelButton:!0,confirmButtonColor:cs.success,cancelButtonColor:cs.danger,confirmButtonText:"Submit Application",cancelButtonText:"Cancel"}).then(Te=>{Te.isConfirmed&&G()});return}a<Q.length&&X(a)&&(e(a+1),u({}))},K=()=>{a>1&&e(a-1)},I=me=>{dt.fire({icon:"success",title:"Success!",text:me,confirmButtonColor:"#4CAF50",timer:3e3,timerProgressBar:!0}).then(()=>{v("/user/permittracker")})},R=me=>{dt.fire({icon:"error",title:"Error",text:me,confirmButtonColor:"#E53935"})},G=async()=>{for(let me=1;me<=Q.length;me++)if(!X(me)){e(me);return}r(!0);try{const me=new FormData,Te={applicant_id:m,business_name:L.business_name,owner_first_name:L.owner_first_name,owner_last_name:L.owner_last_name,owner_middle_name:L.owner_middle_name||"",owner_address:L.owner_address,contact_number:L.contact_number,email_address:L.email_address,special_permit_type:L.special_permit_type,event_description:L.event_description||"",event_date_start:L.event_date_start,event_date_end:L.event_date_end,event_location:L.event_location,estimated_attendees:L.estimated_attendees||"",applicant_signature:L.applicant_signature,barangay_clearance_id:L.barangay_clearance_id||"",declaration_agreed:n?1:0,date_submitted:L.date_submitted,time_submitted:L.time_submitted,status:"PENDING",permit_type:"SPECIAL"},we=localStorage.getItem("user_id")||localStorage.getItem("goserveph_user_id")||"0";me.append("user_id",we),Object.entries(Te).forEach(([q,Qt])=>{me.append(q,Qt)}),["event_permit","barangay_clearance","valid_id"].forEach(q=>{L[q]instanceof File&&me.append(q,L[q])});const ce=await fetch("/backend/business_permit/submit_special.php",{method:"POST",body:me});if(!ce.ok)throw new Error(`HTTP error! status: ${ce.status}`);const Ae=await ce.clone().text();let gt;try{gt=JSON.parse(Ae)}catch(q){console.error("Failed to parse JSON:",q),R("Server returned invalid response. Please try again.");return}gt.success?(I(gt.message||"Special permit application submitted successfully!"),ql("Business Permit",gt.permit_id||"",{permit_type:"Special"}),setTimeout(()=>{v("/user/permittracker")},3e3)):R(gt.message||"Failed to submit application. Please try again.")}catch(me){console.error("Submission error:",me),R("Network error: "+me.message)}finally{r(!1)}},se=me=>{if(!me)return null;const Te=URL.createObjectURL(me),we=me.type.split("/")[0];l({url:Te,type:we,name:me.name})},le=()=>{o.url&&URL.revokeObjectURL(o.url),l({})},ye=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:cs.secondary,fontFamily:cs.font},children:"Review Application"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please review all information before submitting your special permit application."})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h4",{className:"font-bold text-lg",style:{color:cs.primary},children:"Application Summary"}),t.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800",children:"SPECIAL PERMIT APPLICATION"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Application Date"}),t.jsx("p",{className:"font-medium",children:L.date_submitted})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Application Time"}),t.jsx("p",{className:"font-medium",children:L.time_submitted})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Applicant ID"}),t.jsx("p",{className:"font-medium",children:L.applicant_id})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Permit Type"}),t.jsx("p",{className:"font-medium",children:L.special_permit_type})]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:cs.primary},children:"Applicant Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Business Name"}),t.jsx("p",{className:"font-medium",children:L.business_name||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),t.jsxs("p",{className:"font-medium",children:[L.owner_first_name," ",L.owner_middle_name," ",L.owner_last_name]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Contact Number"}),t.jsx("p",{className:"font-medium",children:L.contact_number||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email Address"}),t.jsx("p",{className:"font-medium",children:L.email_address||"Not provided"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Address"}),t.jsx("p",{className:"font-medium",children:L.owner_address||"Not provided"})]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:cs.primary},children:"Event/Special Permit Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Permit Type"}),t.jsx("p",{className:"font-medium",children:L.special_permit_type||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Event Start Date"}),t.jsx("p",{className:"font-medium",children:L.event_date_start||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Event End Date"}),t.jsx("p",{className:"font-medium",children:L.event_date_end||"Not provided"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Event Location"}),t.jsx("p",{className:"font-medium",children:L.event_location||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Estimated Attendees"}),t.jsx("p",{className:"font-medium",children:L.estimated_attendees||"Not specified"})]}),L.event_description&&t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Event Description"}),t.jsx("p",{className:"font-medium p-3 bg-gray-50 rounded",children:L.event_description})]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:cs.primary},children:"Documents"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded",children:[L.barangay_clearance||S[L.barangay_clearance_id]?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Barangay Clearance"}),t.jsx("p",{className:"text-sm text-gray-600",children:L.barangay_clearance?L.barangay_clearance.name:S[L.barangay_clearance_id]?`ID: ${L.barangay_clearance_id} (Verified)`:L.barangay_clearance_id?`ID: ${L.barangay_clearance_id} (Not verified)`:"Not provided"})]})]}),t.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded",children:[L.valid_id?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Valid ID"}),t.jsx("p",{className:"text-sm text-gray-600",children:L.valid_id?L.valid_id.name:"Not uploaded"})]})]}),L.event_permit&&t.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded",children:[t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Event Permit (Optional)"}),t.jsx("p",{className:"text-sm text-gray-600",children:L.event_permit.name})]})]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:cs.primary},children:"Declaration & Signature"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Declaration Status"}),t.jsx("p",{className:"font-medium text-green-600",children:"Agreed and Signed"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Submission Date"}),t.jsx("p",{className:"font-medium",children:L.date_submitted}),t.jsx("p",{className:"text-xs text-gray-500",children:L.time_submitted})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Applicant Signature"}),L.applicant_signature?t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:L.applicant_signature,alt:"Signature",className:"h-16 border rounded"})}):t.jsx("p",{className:"text-red-600 text-sm mt-1",children:"Not provided"})]})]})]})]})]}),De=()=>{switch(a){case 1:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:cs.secondary,fontFamily:cs.font},children:"Applicant Information"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Q[0].description})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:cs.secondary},children:["Business Name ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"text",name:"business_name",value:L.business_name,onChange:V,className:`w-full p-3 border border-black rounded-lg ${c.business_name?"border-red-500":""}`,placeholder:"Enter business name",style:{color:cs.secondary,fontFamily:cs.font}}),c.business_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.business_name})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:cs.secondary},children:["Owner First Name ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"text",name:"owner_first_name",value:L.owner_first_name,onChange:V,className:`w-full p-3 border border-black rounded-lg ${c.owner_first_name?"border-red-500":""}`,placeholder:"First name",style:{color:cs.secondary,fontFamily:cs.font}}),c.owner_first_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.owner_first_name})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:cs.secondary},children:["Owner Last Name ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"text",name:"owner_last_name",value:L.owner_last_name,onChange:V,className:`w-full p-3 border border-black rounded-lg ${c.owner_last_name?"border-red-500":""}`,placeholder:"Last name",style:{color:cs.secondary,fontFamily:cs.font}}),c.owner_last_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.owner_last_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:cs.secondary},children:"Owner Middle Name"}),t.jsx("input",{type:"text",name:"owner_middle_name",value:L.owner_middle_name,onChange:V,className:"w-full p-3 border border-black rounded-lg",placeholder:"Middle name (optional)",style:{color:cs.secondary,fontFamily:cs.font}})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:cs.secondary},children:["Owner Address ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("textarea",{name:"owner_address",value:L.owner_address,onChange:V,className:`w-full p-3 border border-black rounded-lg ${c.owner_address?"border-red-500":""}`,placeholder:"Complete address",rows:"3",style:{color:cs.secondary,fontFamily:cs.font}}),c.owner_address&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.owner_address})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:cs.secondary},children:["Contact Number ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"tel",name:"contact_number",value:L.contact_number,onChange:V,maxLength:11,className:`w-full p-3 border border-black rounded-lg ${c.contact_number?"border-red-500":""}`,placeholder:"09XXXXXXXXX",style:{color:cs.secondary,fontFamily:cs.font}}),c.contact_number&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.contact_number})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:cs.secondary},children:["Email Address ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"email",name:"email_address",value:L.email_address,onChange:V,className:`w-full p-3 border border-black rounded-lg ${c.email_address?"border-red-500":""}`,placeholder:"email@example.com",style:{color:cs.secondary,fontFamily:cs.font}}),c.email_address&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.email_address})]})]})]});case 2:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:cs.secondary,fontFamily:cs.font},children:"Event/Special Permit Details"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Q[1].description})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:cs.secondary},children:["Special Permit Type ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsxs("select",{name:"special_permit_type",value:L.special_permit_type,onChange:V,className:`w-full p-3 border border-black rounded-lg ${c.special_permit_type?"border-red-500":""}`,style:{color:cs.secondary,fontFamily:cs.font},children:[t.jsx("option",{value:"",children:"Select permit type"}),ne.map(me=>t.jsx("option",{value:me,children:me},me))]}),c.special_permit_type&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.special_permit_type})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:cs.secondary},children:"Event/Activity Description"}),t.jsx("textarea",{name:"event_description",value:L.event_description,onChange:V,className:"w-full p-3 border border-black rounded-lg",rows:"4",placeholder:"Describe the event or activity",style:{color:cs.secondary,fontFamily:cs.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:cs.secondary},children:["Event Start Date ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"date",name:"event_date_start",value:L.event_date_start,onChange:V,min:Y(),className:`w-full p-3 border border-black rounded-lg ${c.event_date_start?"border-red-500":""}`,style:{color:cs.secondary,fontFamily:cs.font}}),c.event_date_start&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.event_date_start})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:cs.secondary},children:["Event End Date ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"date",name:"event_date_end",value:L.event_date_end,onChange:V,min:L.event_date_start||Y(),className:`w-full p-3 border border-black rounded-lg ${c.event_date_end?"border-red-500":""}`,style:{color:cs.secondary,fontFamily:cs.font}}),c.event_date_end&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.event_date_end})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:cs.secondary},children:["Event Location ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"text",name:"event_location",value:L.event_location,onChange:V,className:`w-full p-3 border border-black rounded-lg ${c.event_location?"border-red-500":""}`,placeholder:"Complete address of event location",style:{color:cs.secondary,fontFamily:cs.font}}),c.event_location&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.event_location})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:cs.secondary},children:"Estimated Attendees"}),t.jsx("input",{type:"number",name:"estimated_attendees",value:L.estimated_attendees,onChange:V,className:"w-full p-3 border border-black rounded-lg",placeholder:"Expected number of attendees",min:"0",style:{color:cs.secondary,fontFamily:cs.font}})]})]})]});case 3:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:cs.secondary,fontFamily:cs.font},children:"Upload Documents"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Q[2].description})]}),t.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Ht,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"Important Note for Special Permit:"}),t.jsxs("p",{className:"text-sm text-blue-700",children:[" All documents marked with ",t.jsx("span",{className:"font-bold text-red-600",children:"*"})," are ",t.jsx("span",{className:"font-bold text-red-600",children:"MANDATORY"})," for special permit application."]}),t.jsx("p",{className:"text-sm text-blue-700 mt-1",children:" Ensure all documents are clear and readable."})]})]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"border border-gray-300 rounded-lg bg-gray-50",children:t.jsxs("div",{className:"flex items-center justify-between p-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-3",children:L.event_permit?t.jsx(Ht,{className:"w-5 h-5 text-green-600"}):t.jsx(iw,{className:"w-5 h-5 text-gray-400"})}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Event Permit (Optional)"}),t.jsx("p",{className:"text-sm text-gray-600",children:L.event_permit?L.event_permit.name:"Upload if available"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"event_permit",onChange:V,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden"}),t.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border border-gray-300",children:[t.jsx(er,{className:"w-4 h-4"}),L.event_permit?"Change":"Upload"]})]}),L.event_permit&&t.jsxs("button",{type:"button",onClick:()=>se(L.event_permit),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]})]})}),t.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[t.jsx("div",{className:"flex items-center justify-between p-3 bg-blue-50",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-3",children:L.barangay_clearance||S[L.barangay_clearance_id]?t.jsx(Ht,{className:"w-5 h-5 text-green-600"}):t.jsx(ls,{className:"w-5 h-5 text-red-600"})}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["Barangay Clearance: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:L.barangay_clearance?L.barangay_clearance.name:L.barangay_clearance_id?"ID Provided":"File or ID required"}),t.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"* Either file upload OR ID number must be provided"})]})]})}),t.jsxs("div",{className:"p-3 bg-gray-50 border-b",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:cs.secondary,fontFamily:cs.font},children:"Choose verification method:"}),t.jsxs("div",{className:"flex gap-6",children:[t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx("input",{type:"radio",name:"barangay_method",value:"upload",checked:M==="upload",onChange:me=>D(me.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),t.jsx("span",{className:"ml-2 text-sm",style:{color:cs.secondary,fontFamily:cs.font},children:"Upload Document"})]}),t.jsxs("label",{className:"flex items-center cursor-pointer",children:[t.jsx("input",{type:"radio",name:"barangay_method",value:"id",checked:M==="id",onChange:me=>D(me.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),t.jsx("span",{className:"ml-2 text-sm",style:{color:cs.secondary,fontFamily:cs.font},children:"Enter ID Number (API Verification)"})]})]})]}),M==="upload"&&t.jsx("div",{className:"p-3 bg-white",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"barangay_clearance",onChange:V,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-2 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${L.barangay_clearance?"border-green-200 bg-green-50":"border-gray-300"}`,style:{color:cs.secondary},children:[t.jsx(er,{className:"w-4 h-4"}),L.barangay_clearance?"Change File":"Upload Document"]})]}),L.barangay_clearance&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-sm text-gray-600",children:L.barangay_clearance.name}),t.jsxs("button",{type:"button",onClick:()=>se(L.barangay_clearance),className:"flex items-center gap-1 px-3 py-2 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border border-gray-300",style:{color:cs.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]})]})}),M==="id"&&t.jsxs("div",{className:"p-3 bg-white",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:cs.secondary,fontFamily:cs.font},children:"Barangay Clearance ID/Applicant ID:"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",name:"barangay_clearance_id",value:L.barangay_clearance_id,onChange:V,placeholder:"Enter Barangay Clearance Applicant ID",className:"flex-1 p-2 border border-gray-300 rounded",style:{color:cs.secondary,fontFamily:cs.font}}),L.barangay_clearance_id&&t.jsx("button",{type:"button",onClick:H,disabled:b,className:`flex items-center gap-1 px-4 py-2 text-sm rounded transition-colors duration-300 border ${S[L.barangay_clearance_id]?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,children:b?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):S[L.barangay_clearance_id]?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(sa,{className:"w-4 h-4"})," Verify with API"]})})]})]}),t.jsx("div",{className:"p-3 bg-gray-50",children:t.jsx("p",{className:"text-xs",children:t.jsx("span",{className:`font-medium ${L.barangay_clearance||S[L.barangay_clearance_id]?"text-green-600":"text-red-600"}`,children:L.barangay_clearance||S[L.barangay_clearance_id]?" Requirement satisfied":L.barangay_clearance_id&&!S[L.barangay_clearance_id]?" Please verify the ID to proceed":" Please provide either the document or ID number"})})})]}),c.barangay_clearance&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.barangay_clearance}),t.jsx("div",{className:"border border-gray-300 rounded-lg bg-blue-50",children:t.jsxs("div",{className:"flex items-center justify-between p-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"mr-3",children:L.valid_id?t.jsx(Ht,{className:"w-5 h-5 text-green-600"}):t.jsx(ls,{className:"w-5 h-5 text-red-600"})}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:["Valid ID: ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:L.valid_id?L.valid_id.name:"Required"}),t.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"* This document is mandatory"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",name:"valid_id",onChange:V,accept:".pdf,.jpg,.png,.doc,.docx",className:"hidden"}),t.jsxs("div",{className:`flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300 border ${L.valid_id?"border-green-200 bg-green-50":"border-red-300 bg-red-50"}`,children:[t.jsx(er,{className:"w-4 h-4"}),L.valid_id?"Change":"Upload"]})]}),L.valid_id&&t.jsxs("button",{type:"button",onClick:()=>se(L.valid_id),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]})]})}),c.valid_id&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.valid_id})]})]});case 4:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:cs.secondary,fontFamily:cs.font},children:"Declaration & Signature"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Q[3].description})]}),t.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 shadow-sm",children:[t.jsxs("div",{className:"mb-6 p-4 border-2 border-red-200 bg-red-50 rounded-lg",children:[t.jsx("h5",{className:"font-bold mb-3 text-red-700",children:"SPECIAL PERMIT DECLARATION"}),t.jsxs("div",{className:"text-sm space-y-2",children:[t.jsxs("p",{children:["I, ",t.jsxs("span",{className:"font-bold",children:[L.owner_first_name," ",L.owner_last_name]}),", hereby solemnly declare that:"]}),t.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[t.jsx("li",{children:"All information provided in this application is true, complete, and correct;"}),t.jsx("li",{children:"I will comply with all applicable laws and regulations;"}),t.jsx("li",{children:"I will ensure public safety during the event/operation;"}),t.jsx("li",{children:"I accept full responsibility for any violations;"}),t.jsx("li",{children:"I understand this permit is temporary and subject to city regulations."})]})]})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx("input",{type:"checkbox",id:"final-declaration",checked:n,onChange:me=>i(me.target.checked),className:`w-5 h-5 mt-1 text-green-600 border-gray-300 rounded focus:ring-green-500 ${c.agreeDeclaration?"border-red-500":""}`}),t.jsxs("label",{htmlFor:"final-declaration",className:"ml-3",children:[t.jsx("span",{className:"font-bold text-red-700",children:"FINAL DECLARATION AND CONSENT *"}),t.jsx("p",{className:"text-sm mt-1",children:"I have read, understood, and agree to all terms and conditions stated in this declaration. I certify that all information provided is accurate and I accept full responsibility."})]})]}),c.agreeDeclaration&&t.jsx("p",{className:"text-red-600 text-sm mt-2 ml-8",children:c.agreeDeclaration}),t.jsxs("div",{className:"mt-6 pt-6 border-t",children:[t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Upload Your Signature ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"w-full p-2 border border-gray-300 rounded-lg"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload an image of your signature (PNG, JPG, etc.)"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Applicant Signature"}),L.applicant_signature?t.jsxs("div",{className:"mt-2",children:[t.jsx("img",{src:L.applicant_signature,alt:"Signature",className:"h-20 border rounded"}),t.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Signature uploaded"})]}):t.jsx("p",{className:"text-red-600 text-sm mt-1",children:"Signature required"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Submission Date"}),t.jsx("p",{className:"font-medium",children:L.date_submitted}),t.jsx("p",{className:"text-xs text-gray-500",children:L.time_submitted})]})]})]})]})]});case 5:return ye();default:return null}};return t.jsxs("div",{className:"mx-1 mt-1 p-6 rounded-lg min-h-screen",style:{background:cs.background,color:cs.secondary,fontFamily:cs.font},children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 rounded-full bg-purple-100",children:t.jsx(_h,{className:"w-10 h-10 text-purple-600"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold",style:{color:cs.primary},children:"Special Permit Application"}),t.jsx("p",{className:"mt-1 text-lg font-semibold text-purple-700",children:"Caloocan City Business Permit and Licensing Office"})]})]}),t.jsx("p",{className:"mt-2",style:{color:cs.secondary},children:"Complete the form below to apply for a special business permit"}),t.jsx("div",{className:"mt-2 flex items-center gap-2",children:t.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800",children:"Special Permit Application"})})]}),t.jsx("button",{onClick:()=>v("/user/dashboard"),onMouseEnter:me=>me.currentTarget.style.background=cs.accent,onMouseLeave:me=>me.currentTarget.style.background=cs.success,style:{background:cs.success},className:"px-4 py-2 rounded-lg font-medium text-white hover:bg-[#FDA811] transition-colors duration-300",children:"Back to Dashboard"})]}),t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"flex items-center justify-between overflow-x-auto",children:Q.map((me,Te)=>t.jsxs("div",{className:"flex items-center flex-shrink-0",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2",style:{background:a>=me.id?cs.success:"transparent",borderColor:a>=me.id?cs.success:"#9CA3AF",color:a>=me.id?"#fff":"#9CA3AF",fontFamily:cs.font},children:me.id}),t.jsxs("div",{className:"ml-3 hidden md:block",children:[t.jsx("p",{className:"text-sm font-medium",style:{color:a>=me.id?cs.success:cs.secondary,fontFamily:cs.font},children:me.title}),t.jsx("p",{className:"text-xs text-gray-500",children:me.description})]}),Te<Q.length-1&&t.jsx("div",{className:"hidden md:block w-16 h-0.5 mx-4",style:{background:a>me.id?cs.success:"#9CA3AF"}})]},me.id))})}),g&&t.jsx("div",{className:"p-4 mb-6 rounded",style:{background:g.type==="success"?"#e6f9ed":g.type==="warning"?"#fff8e6":"#fdecea",color:g.type==="success"?cs.success:g.type==="warning"?cs.warning:cs.danger,fontFamily:cs.font,border:"1px solid "+(g.type==="success"?cs.success:g.type==="warning"?cs.warning:cs.danger)},children:g.message}),t.jsxs("form",{onSubmit:te,className:"space-y-8",children:[De(),t.jsxs("div",{className:"flex justify-between pt-6",children:[a>1&&t.jsx("button",{type:"button",onClick:K,onMouseEnter:me=>me.currentTarget.style.background=cs.accent,onMouseLeave:me=>me.currentTarget.style.background=cs.success,style:{background:cs.success},className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:"Previous"}),a<Q.length?t.jsx("button",{type:"submit",disabled:!$(a),style:{background:$(a)?cs.success:"#9CA3AF"},onMouseEnter:me=>{$(a)&&(me.currentTarget.style.background=cs.accent)},onMouseLeave:me=>{$(a)&&(me.currentTarget.style.background=cs.success)},className:`px-6 py-3 rounded-lg font-semibold text-white ${$(a)?"transition-colors duration-300":"cursor-not-allowed"}`,children:a===Q.length-1?"Review Application":"Next"}):t.jsx("button",{type:"submit",onMouseEnter:me=>me.currentTarget.style.background=cs.accent,onMouseLeave:me=>me.currentTarget.style.background=cs.success,style:{background:cs.success},className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:"Submit Application"})]})]}),o.url&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"rounded-lg shadow-lg w-full max-w-4xl border border-gray-200 overflow-hidden",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:cs.font,backdropFilter:"blur(10px)",maxHeight:"90vh"},children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold",style:{color:cs.primary},children:"Preview Document"}),t.jsx("button",{onClick:le,className:"text-gray-500 hover:text-gray-700 transition-colors duration-300",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 overflow-auto",style:{maxHeight:"calc(90vh - 80px)"},children:[t.jsxs("p",{className:"text-sm mb-4",style:{color:cs.secondary,fontFamily:cs.font},children:["File: ",t.jsx("span",{className:"font-medium",children:o.name})]}),t.jsx("div",{className:"bg-white rounded-lg border p-4",children:o.type==="image"?t.jsx("div",{className:"flex justify-center",children:t.jsx("img",{src:o.url,alt:"Preview",className:"max-w-full h-auto max-h-[500px]"})}):o.type==="application"&&o.name?.includes(".pdf")?t.jsx("iframe",{src:o.url,className:"w-full h-[500px] rounded",title:"PDF Preview"}):t.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[t.jsx(Kt,{className:"w-24 h-24 text-gray-400 mb-4"}),t.jsxs("p",{className:"text-gray-600 mb-2",children:["File: ",o.name]}),t.jsx("p",{className:"text-gray-500 mb-6",children:"Preview not available for this file type"}),t.jsx("a",{href:o.url,download:o.name,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors duration-300",children:"Download File"})]})}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsx("button",{onClick:le,style:{background:cs.success},onMouseEnter:me=>me.currentTarget.style.background=cs.accent,onMouseLeave:me=>me.currentTarget.style.background=cs.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close Preview"})})]})]})}),j&&w&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:cs.font},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${w.success?"bg-green-100":"bg-red-100"}`,children:w.success?t.jsx(Ht,{className:"w-8 h-8 text-green-600"}):t.jsx(ls,{className:"w-8 h-8 text-red-600"})})}),t.jsx("h2",{className:"text-xl font-bold text-center mb-4",style:{color:w.success?cs.success:cs.danger},children:w.success?"Verification Successful":"Verification Failed"}),t.jsx("p",{className:"text-sm text-center mb-6",style:{color:cs.secondary},children:w.message}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:()=>E(!1),style:{background:cs.success},onMouseEnter:me=>me.currentTarget.style.background=cs.accent,onMouseLeave:me=>me.currentTarget.style.background=cs.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close"})})]})})]})}const ft={primary:"#4A90E2",secondary:"#000000",accent:"#FDA811",success:"#4CAF50",danger:"#E53935",background:"#FBFBFB",font:"Montserrat, Arial, sans-serif"};function gq(){const[a,e]=C.useState(""),[s,r]=C.useState(!1),[n,i]=C.useState(1),[o,l]=C.useState(!1),[c,u]=C.useState(!1),[m,A]=C.useState(!1),[g,p]=C.useState(!1),[v,b]=C.useState(!1),[y,w]=C.useState(!1),[B,j]=C.useState(!1),[E,S]=C.useState(""),[T,M]=C.useState(""),[D,P]=C.useState(!1),[Y,Q]=C.useState({}),[L,ae]=C.useState(null),ne=ka(),V=()=>new Date().toISOString().split("T")[0],O=()=>{const Le=new Date;return Le.setDate(Le.getDate()+1),Le.toISOString().split("T")[0]},X=[{title:"Previous Mayor's Permit (Original)",description:"The current/active business permit issued by Caloocan City",name:"previous_permit_file",required:!0},{title:"Official Receipt of Business Tax Payment",description:"For the current year",name:"tax_receipt_file",required:!0},{title:"Valid Governmentissued ID",description:"Of Business Owner",name:"owner_id_file",required:!0}],$=[{id:"CHANGE_BUSINESS_NAME",title:"Change of Business Name",description:"Update your registered business name",icon:t.jsx(Ur,{className:"w-10 h-10"}),color:"border-indigo-200 hover:border-indigo-300",bgColor:"hover:bg-indigo-50",formColor:"text-indigo-600",formBgColor:"bg-indigo-50",requirements:[{title:"Updated Business Registration Certificate",description:"Reflecting the new name:",details:["Sole Proprietorship  DTI Business Name Certificate (must show the new business name)","Corporation/Partnership/OPC  SEC Certificate of Registration or updated General Information Sheet (GIS) with the new name"],name:"business_registration_file",required:!0},{title:"Board Resolution/Secretary's Certificate",description:"Authorizing the name change (for corporations, if applicable)",name:"board_resolution_file",required:!1},{title:"DTI/SEC/CDA Registration",description:"Must cover the current owner and show the business activity and name exactly as in the amendment application",name:"registration_update_file",required:!0}]},{id:"CHANGE_BUSINESS_LINE",title:"Change of Business Line",description:"Modify your primary business activities",icon:t.jsx(Kt,{className:"w-10 h-10"}),color:"border-teal-200 hover:border-teal-300",bgColor:"hover:bg-teal-50",formColor:"text-teal-600",formBgColor:"bg-teal-50",requirements:[{title:"Updated SEC/DTI/CDA Registration",description:"That includes the revised business activity/line, or proof that the listed business activities cover the amended lines on your permit",name:"business_line_registration_file",required:!0},{title:"Business Activity Documentation",description:"Your business activity on the permit must match the scope listed in your business registration documents",name:"business_activity_file",required:!0}]},{id:"CHANGE_BUSINESS_LOCATION",title:"Change of Business Location",description:"Transfer your business to a new address",icon:t.jsx(Ec,{className:"w-10 h-10"}),color:"border-amber-200 hover:border-amber-300",bgColor:"hover:bg-amber-50",formColor:"text-amber-600",formBgColor:"bg-amber-50",requirements:[{title:"Proof of New Business Address",description:"Choose one of the following:",details:["If owned: Transfer Certificate of Title (TCT), Tax Declaration, RPT Receipt","If leased: Notarized Contract of Lease or agreement and lessor's consent","If government owned: Affidavit of voluntary vacate or similar proof"],name:"address_proof_file",required:!0},{title:"Locational Clearance",description:"For the new address issued via QC EServices (to confirm zoning compliance)",name:"locational_clearance_file",required:!0},{title:"Address Verification",description:"The address documents must exactly match the new business address you indicate in the amendment",name:"address_verification_file",required:!0}]},{id:"CHANGE_OWNER",title:"Change of Owner",description:"Transfer business ownership to another person",icon:t.jsx(gr,{className:"w-10 h-10"}),color:"border-rose-200 hover:border-rose-300",bgColor:"hover:bg-rose-50",formColor:"text-rose-600",formBgColor:"bg-rose-50",requirements:[{title:"Updated Business Registration",description:"Reflecting the new owner:",details:["For sole proprietorship: Updated DTI Business Name Certificate showing the new owner's name; affidavit of assignment/deed of sale may be required","For corporation/partnership/OPC: SEC Certificate and supporting documents proving the ownership change (e.g., Board Resolution, updated GIS)"],name:"ownership_registration_file",required:!0},{title:"Supporting Corporate Documents",description:"Updated registration under the new owner's name and other supporting corporate documents where relevant",name:"ownership_support_file",required:!0}]}],[H,te]=C.useState({business_permit_id:"",business_name:"",current_business_name:"",new_business_name:"",business_type:"",business_line:"",current_business_line:"",new_business_line:"",current_address:"",new_address:"",current_owner_name:"",new_owner_name:"",contact_person:"",contact_number:"",email:"",amendment_type:"",amendment_reason:"",effective_date:"",previous_permit_file:null,tax_receipt_file:null,owner_id_file:null,applicant_signature:"",date_submitted:V(),date_submitted_time:new Date().toTimeString().split(" ")[0]}),K=[{id:1,title:"Business Information",description:"Business details"},{id:2,title:"Amendment Details",description:"Specific changes"},{id:3,title:"Required Documents",description:"Upload documents"},{id:4,title:"Declaration",description:"Sign and submit"},{id:5,title:"Review",description:"Review application"}],I=Le=>{e(Le),$.find(oe=>oe.id===Le),w(!0)},R=(Le,oe)=>{oe.stopPropagation(),ae(Le),j(!0)},G=()=>{e(L),j(!1),w(!0)},se=()=>{if(!a)return;const Le=$.find(W=>W.id===a);te(W=>({...W,amendment_type:a}));const oe=Le?.requirements||[],he={};oe.forEach(W=>{he[W.name]=null}),te(W=>({...W,...he})),w(!1),l(!0),i(1),P(!1)},le=Le=>{const{name:oe,value:he,type:W,files:ve}=Le.target;if(W==="file"){const Qe=ve[0];te(Ze=>({...Ze,[oe]:Qe||null}))}else{if(oe==="contact_number"){const Qe=he.replace(/\D/g,"");te(Ze=>({...Ze,[oe]:Qe}));return}te(Qe=>({...Qe,[oe]:he}))}},ye=Le=>{const oe=Le.target.files[0];if(oe){const he=new FileReader;he.onloadend=()=>{te(W=>({...W,applicant_signature:he.result}))},he.readAsDataURL(oe)}},De=()=>a==="CHANGE_OWNER"&&H.new_owner_name?H.new_owner_name:H.contact_person,me=Le=>{if(!Le)return null;const oe=URL.createObjectURL(Le),he=Le.type.split("/")[0];Q({url:oe,type:he,name:Le.name})},Te=()=>{Y.url&&URL.revokeObjectURL(Y.url),Q({})},[we,st]=C.useState({}),ce=Le=>{const oe={},he=$.find(W=>W.id===a);if(Le===1&&(H.business_permit_id.trim()||(oe.business_permit_id="Business Permit ID is required"),H.business_name.trim()||(oe.business_name="Business name is required"),H.business_type.trim()||(oe.business_type="Business type is required"),H.contact_person.trim()||(oe.contact_person="Contact person is required"),H.contact_number.trim()?(!H.contact_number.startsWith("09")||H.contact_number.length!==11)&&(oe.contact_number="Contact number must start with 09 and be 11 digits"):oe.contact_number="Contact number is required",a==="CHANGE_BUSINESS_NAME"&&(H.new_business_name.trim()||(oe.new_business_name="New business name is required")),a==="CHANGE_BUSINESS_LINE"&&(H.new_business_line.trim()||(oe.new_business_line="New business line is required")),a==="CHANGE_BUSINESS_LOCATION"&&(H.new_address.trim()||(oe.new_address="New address is required")),a==="CHANGE_OWNER"&&(H.new_owner_name.trim()||(oe.new_owner_name="New owner name is required"))),Le===2&&(H.amendment_reason.trim()||(oe.amendment_reason="Amendment reason is required"),H.effective_date||(oe.effective_date="Effective date is required"),H.effective_date)){const W=new Date;new Date(H.effective_date)<=W&&(oe.effective_date="Effective date must be in the future")}return Le===3&&(H.previous_permit_file||(oe.previous_permit_file="Previous Mayor's Permit is required"),H.tax_receipt_file||(oe.tax_receipt_file="Tax receipt is required"),H.owner_id_file||(oe.owner_id_file="Owner ID is required"),(he?.requirements||[]).forEach(ve=>{ve.required&&!H[ve.name]&&(oe[ve.name]=`${ve.title} is required`)})),Le===4&&(H.applicant_signature||(oe.applicant_signature="Signature is required"),D||(oe.agreeDeclaration="You must agree to the declaration")),st(oe),Object.keys(oe).length===0},tt=Le=>{const oe=$.find(he=>he.id===a);if(Le===1)return!(!H.business_permit_id.trim()||!H.business_name.trim()||!H.business_type.trim()||!H.contact_person.trim()||!H.contact_number.trim()||a==="CHANGE_BUSINESS_NAME"&&!H.new_business_name.trim()||a==="CHANGE_BUSINESS_LINE"&&!H.new_business_line.trim()||a==="CHANGE_BUSINESS_LOCATION"&&!H.new_address.trim()||a==="CHANGE_OWNER"&&!H.new_owner_name.trim());if(Le===2){if(!H.amendment_reason.trim()||!H.effective_date)return!1;const he=new Date;return!(new Date(H.effective_date)<=he)}if(Le===3){if(!H.previous_permit_file||!H.tax_receipt_file||!H.owner_id_file)return!1;const he=oe?.requirements||[];for(const W of he)if(W.required&&!H[W.name])return!1;return!0}return Le===4?!(!H.applicant_signature||!D):!0},Ae=Le=>{Le.preventDefault(),n<K.length&&ce(n)&&(n===4?A(!0):(i(n+1),st({})))},gt=()=>{n>1&&i(n-1)},q=Le=>{dt.fire({icon:"success",title:"Success!",text:Le,confirmButtonColor:"#4CAF50",timer:3e3,timerProgressBar:!0}).then(()=>{ne("/user/permittracker")})},Qt=Le=>{dt.fire({icon:"error",title:"Error",text:Le,confirmButtonColor:"#E53935"})},yt=async()=>{const Le=ce(1),oe=ce(2),he=ce(3),W=ce(4);if(!(Le&&oe&&he&&W)){u(!1),i(Le?oe?he?4:3:2:1),A(!1);return}u(!0);try{const ve=$.find(et=>et.id===a),Qe=new FormData,Ze=localStorage.getItem("userId")||localStorage.getItem("user_id")||localStorage.getItem("applicant_id")||"USER001";console.log("=== DEBUG SUBMISSION DATA ==="),console.log("selectedType:",a),console.log("selectedAmendment:",ve),console.log("applicantId:",Ze),console.log("agreeDeclaration:",D),console.log("formData:",H),console.log("=============================");const J={applicant_id:Ze,business_permit_id:H.business_permit_id,business_name:H.business_name,new_business_name:H.new_business_name||"",business_type:H.business_type,new_business_line:H.new_business_line||"",new_address:H.new_address||"",new_owner_name:H.new_owner_name||"",contact_person:H.contact_person,contact_number:H.contact_number,email:H.email||"",amendment_type:a,amendment_reason:H.amendment_reason,effective_date:H.effective_date,date_submitted:H.date_submitted,date_submitted_time:H.date_submitted_time,status:"pending",application_date:new Date().toISOString().split("T")[0],declaration_agreed:D?"1":"0"},He=localStorage.getItem("user_id")||localStorage.getItem("goserveph_user_id")||"0";if(Qe.append("user_id",He),Object.entries(J).forEach(([et,vt])=>{console.log(`Appending ${et}:`,vt),Qe.append(et,vt)}),H.applicant_signature&&H.applicant_signature.startsWith("data:image"))try{const et=atob(H.applicant_signature.split(",")[1]),vt=H.applicant_signature.split(",")[0].split(":")[1].split(";")[0],Mt=new ArrayBuffer(et.length),Ye=new Uint8Array(Mt);for(let ee=0;ee<et.length;ee++)Ye[ee]=et.charCodeAt(ee);const Et=new Blob([Mt],{type:vt}),Gt=new File([Et],"signature.png",{type:vt});Qe.append("applicant_signature",Gt),console.log("Signature converted to file:",Gt.name,Gt.size,"bytes")}catch(et){console.error("Error converting signature:",et),Qt("Failed to process signature. Please try again.");return}const xt=["previous_permit_file","tax_receipt_file","owner_id_file"];console.log("General files to upload:"),xt.forEach(et=>{H[et]instanceof File?(console.log(`${et}:`,H[et].name),Qe.append(et,H[et])):console.log(`${et}: No file`)});const Xe=ve?.requirements||[];console.log("Specific requirements files:"),Xe.forEach(et=>{H[et.name]instanceof File?(console.log(`${et.name}:`,H[et.name].name),Qe.append(et.name,H[et.name])):console.log(`${et.name}: No file`)}),console.log("=== FINAL FORMDATA ENTRIES ===");for(let[et,vt]of Qe.entries())console.log(et,vt);console.log("=============================="),console.log("Sending request to backend...");const Ct=await fetch("/backend/business_permit/submit_amend.php",{method:"POST",body:Qe});if(!Ct.ok)throw new Error(`HTTP error! status: ${Ct.status}`);const _e=Ct.clone();console.log("Response status:",Ct.status),console.log("Response headers:",Ct.headers);const Se=await Ct.text();console.log("Raw response text:",Se);let Ve;try{Ve=JSON.parse(Se),console.log("Parsed response data:",Ve)}catch(et){console.error("Failed to parse JSON:",et),console.error("Raw response that failed to parse:",Se),Qt("Server returned invalid response. Please try again.");return}Ve.success?(A(!1),q(Ve.message||"Amendment application submitted successfully!"),ql("Business Permit",Ve.permit_id||"",{permit_type:"Amendment"}),setTimeout(()=>{te({business_permit_id:"",business_name:"",current_business_name:"",new_business_name:"",business_type:"",business_line:"",current_business_line:"",new_business_line:"",current_address:"",new_address:"",current_owner_name:"",new_owner_name:"",contact_person:"",contact_number:"",email:"",amendment_reason:"",effective_date:"",previous_permit_file:null,tax_receipt_file:null,owner_id_file:null,applicant_signature:"",date_submitted:V(),date_submitted_time:new Date().toTimeString().split(" ")[0]}),e(""),l(!1),i(1),P(!1),st({})},2e3),setTimeout(()=>{ne("/user/permittracker")},3e3)):(console.error("Submission failed:",Ve.message),Qt(Ve.message||"Failed to submit application. Please check your data and try again."))}catch(ve){console.error("Network submission error:",ve),Qt("Network error: "+ve.message)}finally{u(!1)}},Oe=()=>{e(""),l(!1),i(1),te({business_permit_id:"",business_name:"",current_business_name:"",new_business_name:"",business_type:"",business_line:"",current_business_line:"",new_business_line:"",current_address:"",new_address:"",current_owner_name:"",new_owner_name:"",contact_person:"",contact_number:"",email:"",amendment_reason:"",effective_date:"",previous_permit_file:null,tax_receipt_file:null,owner_id_file:null,applicant_signature:"",date_submitted:V(),date_submitted_time:new Date().toTimeString().slice(0,8)}),st({}),P(!1)},ze=()=>{const Le=$.find(oe=>oe.id===a);switch(n){case 1:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:ft.secondary},children:"Business Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-1",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"Business Permit ID *"}),t.jsx("input",{type:"text",name:"business_permit_id",value:H.business_permit_id,onChange:le,placeholder:"Enter your Business Permit ID",className:`w-full p-3 border border-black rounded-lg ${we.business_permit_id?"border-red-500":""}`,style:{color:ft.secondary,fontFamily:ft.font}}),we.business_permit_id&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:ft.font},children:we.business_permit_id})]}),t.jsxs("div",{className:"md:col-span-1",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"Current Business Name *"}),t.jsx("input",{type:"text",name:"business_name",value:H.business_name,onChange:le,placeholder:"Current registered business name",className:`w-full p-3 border border-black rounded-lg ${we.business_name?"border-red-500":""}`,style:{color:ft.secondary,fontFamily:ft.font}}),we.business_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:ft.font},children:we.business_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"Business Type *"}),t.jsxs("select",{name:"business_type",value:H.business_type,onChange:le,className:`w-full p-3 border border-black rounded-lg ${we.business_type?"border-red-500":""}`,style:{color:ft.secondary,fontFamily:ft.font},children:[t.jsx("option",{value:"",children:"Select business type"}),t.jsx("option",{value:"Sole Proprietorship",children:"Sole Proprietorship"}),t.jsx("option",{value:"Partnership",children:"Partnership"}),t.jsx("option",{value:"Corporation",children:"Corporation"}),t.jsx("option",{value:"Cooperative",children:"Cooperative"}),t.jsx("option",{value:"OPC",children:"One Person Corporation (OPC)"})]}),we.business_type&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:ft.font},children:we.business_type})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"Contact Person *"}),t.jsx("input",{type:"text",name:"contact_person",value:H.contact_person,onChange:le,placeholder:"Full name of contact person",className:`w-full p-3 border border-black rounded-lg ${we.contact_person?"border-red-500":""}`,style:{color:ft.secondary,fontFamily:ft.font}}),we.contact_person&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:ft.font},children:we.contact_person})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"Contact Number *"}),t.jsx("input",{type:"text",name:"contact_number",value:H.contact_number,onChange:le,placeholder:"Mobile or telephone number",className:`w-full p-3 border border-black rounded-lg ${we.contact_number?"border-red-500":""}`,style:{color:ft.secondary,fontFamily:ft.font}}),we.contact_number&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:ft.font},children:we.contact_number})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"Email Address"}),t.jsx("input",{type:"email",name:"email",value:H.email,onChange:le,placeholder:"Email address",className:"w-full p-3 border border-black rounded-lg",style:{color:ft.secondary,fontFamily:ft.font}})]}),a==="CHANGE_BUSINESS_NAME"&&t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"New Business Name *"}),t.jsx("input",{type:"text",name:"new_business_name",value:H.new_business_name,onChange:le,placeholder:"Enter new business name",className:`w-full p-3 border border-black rounded-lg ${we.new_business_name?"border-red-500":""}`,style:{color:ft.secondary,fontFamily:ft.font}}),we.new_business_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:ft.font},children:we.new_business_name})]}),a==="CHANGE_BUSINESS_LINE"&&t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"Current Business Line"}),t.jsx("input",{type:"text",name:"current_business_line",value:H.current_business_line,onChange:le,placeholder:"Current business activities",className:"w-full p-3 border border-black rounded-lg",style:{color:ft.secondary,fontFamily:ft.font}})]}),a==="CHANGE_BUSINESS_LINE"&&t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"New Business Line *"}),t.jsx("textarea",{name:"new_business_line",value:H.new_business_line,onChange:le,placeholder:"Describe new business activities",rows:"3",className:`w-full p-3 border border-black rounded-lg ${we.new_business_line?"border-red-500":""}`,style:{color:ft.secondary,fontFamily:ft.font}}),we.new_business_line&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:ft.font},children:we.new_business_line})]}),a==="CHANGE_BUSINESS_LOCATION"&&t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"Current Business Address"}),t.jsx("textarea",{name:"current_address",value:H.current_address,onChange:le,placeholder:"Current business address",rows:"2",className:"w-full p-3 border border-black rounded-lg",style:{color:ft.secondary,fontFamily:ft.font}})]}),a==="CHANGE_BUSINESS_LOCATION"&&t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"New Business Address *"}),t.jsx("textarea",{name:"new_address",value:H.new_address,onChange:le,placeholder:"Complete new business address",rows:"3",className:`w-full p-3 border border-black rounded-lg ${we.new_address?"border-red-500":""}`,style:{color:ft.secondary,fontFamily:ft.font}}),we.new_address&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:ft.font},children:we.new_address})]}),a==="CHANGE_OWNER"&&t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"Current Owner Name"}),t.jsx("input",{type:"text",name:"current_owner_name",value:H.current_owner_name,onChange:le,placeholder:"Current business owner name",className:"w-full p-3 border border-black rounded-lg",style:{color:ft.secondary,fontFamily:ft.font}})]}),a==="CHANGE_OWNER"&&t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"New Owner Name *"}),t.jsx("input",{type:"text",name:"new_owner_name",value:H.new_owner_name,onChange:le,placeholder:"New business owner name",className:`w-full p-3 border border-black rounded-lg ${we.new_owner_name?"border-red-500":""}`,style:{color:ft.secondary,fontFamily:ft.font}}),we.new_owner_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:ft.font},children:we.new_owner_name})]})]})]});case 2:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:ft.secondary},children:"Amendment Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{className:"md:col-span-2",children:t.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg mb-4",style:{background:Le?.formBgColor||"#f3f4f6"},children:[t.jsx("div",{className:`p-3 rounded-full ${Le?.formBgColor||"bg-gray-100"}`,children:Le?.icon}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Selected Amendment Type"}),t.jsx("p",{className:`text-lg font-bold ${Le?.formColor||"text-gray-800"}`,children:Le?.title})]})]})}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"Reason for Amendment *"}),t.jsx("textarea",{name:"amendment_reason",value:H.amendment_reason,onChange:le,placeholder:"Please explain the reason for this amendment...",rows:"4",className:`w-full p-3 border border-black rounded-lg ${we.amendment_reason?"border-red-500":""}`,style:{color:ft.secondary,fontFamily:ft.font}}),we.amendment_reason&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:ft.font},children:we.amendment_reason})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:"Effective Date *"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(bn,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"date",name:"effective_date",value:H.effective_date,onChange:le,min:O(),className:`w-full p-3 border border-black rounded-lg ${we.effective_date?"border-red-500":""}`,style:{color:ft.secondary,fontFamily:ft.font}})]}),we.effective_date&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:ft.font},children:we.effective_date}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must be a future date"})]})]})]});case 3:return t.jsxs("div",{className:"space-y-8",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:ft.secondary},children:"Required Documents"}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Ks,{className:"w-5 h-5 text-blue-600"}),t.jsx("h4",{className:"text-lg font-semibold",style:{color:ft.primary},children:"General Requirements (For All Amendments)"})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"These documents are required for all types of amendments:"}),t.jsx("div",{className:"space-y-4",children:X.map((oe,he)=>t.jsxs("div",{className:"p-4 border border-black rounded-lg",children:[t.jsx("div",{className:"flex items-start justify-between mb-2",children:t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:ft.secondary},children:[oe.title," ",oe.required&&"*"]}),t.jsx("p",{className:"text-xs text-gray-600",style:{fontFamily:ft.font},children:oe.description})]})}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:oe.name,onChange:le,className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:ft.font}})]}),we[oe.name]&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:ft.font},children:we[oe.name]}),H[oe.name]&&t.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[t.jsx(Ht,{className:"w-4 h-4 mr-1"}),t.jsxs("span",{children:["Uploaded: ",H[oe.name].name]})]})]},he))})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Ks,{className:"w-5 h-5 text-amber-600"}),t.jsxs("h4",{className:"text-lg font-semibold",style:{color:"#d97706"},children:["Specific Requirements for ",Le?.title]})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Additional documents required for this amendment type:"}),t.jsx("div",{className:"space-y-4",children:Le?.requirements.map((oe,he)=>t.jsxs("div",{className:"p-4 border border-black rounded-lg",children:[t.jsx("div",{className:"flex items-start justify-between mb-2",children:t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:ft.secondary},children:[oe.title," ",oe.required&&"*"]}),t.jsx("p",{className:"text-xs text-gray-600",style:{fontFamily:ft.font},children:oe.description}),oe.details&&t.jsx("ul",{className:"mt-2 text-xs text-gray-600 list-disc list-inside",children:oe.details.map((W,ve)=>t.jsx("li",{style:{fontFamily:ft.font},children:W},ve))})]})}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:oe.name,onChange:le,className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:ft.font}})]}),we[oe.name]&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:ft.font},children:we[oe.name]}),H[oe.name]&&t.jsxs("div",{className:"mt-2 flex items-center text-sm text-green-600",children:[t.jsx(Ht,{className:"w-4 h-4 mr-1"}),t.jsxs("span",{children:["Uploaded: ",H[oe.name].name]})]})]},he))})]}),t.jsxs("div",{className:"p-4 rounded-lg border border-amber-300 bg-amber-50",children:[t.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"#92400e"},children:"File Requirements:"}),t.jsxs("ul",{className:"text-xs space-y-1",style:{color:"#92400e"},children:[t.jsx("li",{children:" All documents must be clear and legible"}),t.jsx("li",{children:" File names should clearly indicate the document type"}),t.jsx("li",{children:" Maximum file size: 5MB per document"}),t.jsx("li",{children:" Accepted formats: PDF, JPG, PNG"}),t.jsx("li",{children:" Required fields are marked with *"})]})]})]});case 4:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:ft.secondary},children:"Declaration and Signature"}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:[t.jsxs("div",{className:"mb-8 p-6 border-2 border-red-200 bg-red-50 rounded-lg",children:[t.jsx("h4",{className:"font-bold text-lg mb-4 text-red-700",children:"BUSINESS AMENDMENT DECLARATION"}),t.jsxs("div",{className:"space-y-3 text-sm",style:{fontFamily:ft.font},children:[t.jsxs("p",{children:["I, ",t.jsx("span",{className:"font-bold",children:De()||"[Full Name]"}),", hereby solemnly declare that:"]}),t.jsxs("ol",{className:"list-decimal ml-5 space-y-2",children:[t.jsx("li",{children:"All information provided in this amendment application is true, complete, and correct;"}),t.jsx("li",{children:"I am the registered owner/authorized representative of the business described in this amendment application;"}),t.jsx("li",{children:"The proposed amendment is necessary and justified as described in the application;"}),t.jsx("li",{children:"I have attached all required supporting documents for this amendment;"}),t.jsx("li",{children:"I shall continue to abide by all business regulations, rules, and ordinances of Caloocan City;"}),t.jsx("li",{children:"I understand that any false statement or misrepresentation shall be grounds for:"}),t.jsxs("ul",{className:"list-disc ml-8 mt-2 space-y-1",children:[t.jsx("li",{children:"Immediate cancellation of the amendment application"}),t.jsx("li",{children:"Administrative and criminal liability"}),t.jsx("li",{children:"Blacklisting from future applications"}),t.jsx("li",{children:"Fines and penalties as per existing laws"})]}),t.jsx("li",{children:"I agree to the processing of my personal data for amendment purposes in accordance with the Data Privacy Act of 2012;"}),t.jsx("li",{children:"I consent to inspections and monitoring by authorized personnel for verification of amendment details."})]}),t.jsx("p",{className:"mt-4 font-semibold",children:"Republic Act No. 11032 - Ease of Doing Business and Efficient Government Service Delivery Act of 2018"}),t.jsx("p",{className:"text-xs italic",children:'"Any person who makes any false statement in any business permit application shall be subject to penalties under existing laws."'})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:["Applicant's Signature ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 h-32 flex items-center justify-center",children:H.applicant_signature?t.jsxs("div",{className:"text-center",children:[t.jsx("img",{src:H.applicant_signature,alt:"Applicant Signature",className:"max-h-20 mx-auto"}),t.jsx("p",{className:"text-xs mt-2 text-green-600",children:"Signature uploaded"}),t.jsx("button",{type:"button",onClick:()=>te(oe=>({...oe,applicant_signature:""})),className:"text-xs text-red-600 mt-1 hover:text-red-800",children:"Remove"})]}):t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-gray-500 mb-2",children:"Upload your signature"}),t.jsx("input",{type:"file",accept:"image/*",onChange:ye,className:"hidden",id:"signature-upload"}),t.jsx("label",{htmlFor:"signature-upload",className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100 transition-colors cursor-pointer",children:"Upload Signature"})]})}),we.applicant_signature&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:ft.font},children:we.applicant_signature})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:ft.secondary},children:["Date and Time of Submission ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 p-3 border border-black rounded-lg bg-gray-50",children:[t.jsx(bn,{className:"w-5 h-5 text-gray-500"}),t.jsx("span",{className:"font-medium",style:{color:ft.secondary,fontFamily:ft.font},children:H.date_submitted})]}),t.jsxs("div",{className:"flex items-center gap-2 p-3 border border-black rounded-lg bg-gray-50",children:[t.jsx(jr,{className:"w-5 h-5 text-gray-500"}),t.jsx("span",{className:"font-medium",style:{color:ft.secondary,fontFamily:ft.font},children:H.date_submitted_time})]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Current date and time (auto-filled)"})]})]})]}),t.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx("input",{type:"checkbox",id:"final-declaration",checked:D,onChange:oe=>P(oe.target.checked),className:`w-5 h-5 mt-1 text-green-600 border-gray-300 rounded focus:ring-green-500 ${we.agreeDeclaration?"border-red-500":""}`}),t.jsxs("label",{htmlFor:"final-declaration",className:"ml-3",children:[t.jsx("span",{className:"font-bold text-red-700",children:"FINAL DECLARATION AND CONSENT *"}),t.jsxs("p",{className:"text-sm mt-1",style:{color:ft.secondary,fontFamily:ft.font},children:["I, ",t.jsx("span",{className:"font-semibold",children:De()||"[Full Name]"}),", have read, understood, and agree to all terms and conditions stated in this amendment declaration. I certify that all information provided is accurate and I accept full responsibility for its veracity."]})]})]}),we.agreeDeclaration&&t.jsx("p",{className:"text-red-600 text-sm mt-2 ml-8",style:{fontFamily:ft.font},children:we.agreeDeclaration})]}),t.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium mb-2 text-blue-700",children:"Important Note:"}),t.jsx("p",{className:"text-xs text-blue-600",style:{fontFamily:ft.font},children:'After signing and agreeing to the declaration, you will be able to review your complete application before final submission. Click "Next" to proceed to the review page.'})]})]})]});case 5:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:ft.secondary},children:"Review Your Application"}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg mb-6",style:{background:Le?.formBgColor||"#f3f4f6"},children:[t.jsx("div",{className:`p-3 rounded-full ${Le?.formBgColor||"bg-gray-100"}`,children:Le?.icon}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Amendment Type"}),t.jsx("p",{className:`text-xl font-bold ${Le?.formColor||"text-gray-800"}`,children:Le?.title})]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg mb-6 bg-green-50 border border-green-200",children:[t.jsx(Ht,{className:"w-6 h-6 text-green-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-green-700",children:"Declaration Signed and Agreed"}),t.jsxs("p",{className:"text-sm text-green-600",children:["You have successfully completed the declaration on ",H.date_submitted," at ",H.date_submitted_time]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:ft.primary},children:"Business Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",style:{fontFamily:ft.font},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Business Permit ID:"}),t.jsx("span",{className:"flex-1",children:H.business_permit_id})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Current Business Name:"}),t.jsx("span",{className:"flex-1",children:H.business_name})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Business Type:"}),t.jsx("span",{className:"flex-1",children:H.business_type})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Contact Person:"}),t.jsx("span",{className:"flex-1",children:H.contact_person})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Contact Number:"}),t.jsx("span",{className:"flex-1",children:H.contact_number})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Email:"}),t.jsx("span",{className:"flex-1",children:H.email||"N/A"})]}),a==="CHANGE_BUSINESS_NAME"&&H.new_business_name&&t.jsxs("div",{className:"flex items-center md:col-span-2",children:[t.jsx("span",{className:"font-medium w-40",children:"New Business Name:"}),t.jsx("span",{className:"flex-1 font-semibold text-blue-600",children:H.new_business_name})]}),a==="CHANGE_BUSINESS_LINE"&&H.new_business_line&&t.jsxs("div",{className:"flex items-start md:col-span-2",children:[t.jsx("span",{className:"font-medium w-40",children:"New Business Line:"}),t.jsx("span",{className:"flex-1",children:H.new_business_line})]}),a==="CHANGE_BUSINESS_LOCATION"&&H.new_address&&t.jsxs("div",{className:"flex items-start md:col-span-2",children:[t.jsx("span",{className:"font-medium w-40",children:"New Business Address:"}),t.jsx("span",{className:"flex-1",children:H.new_address})]}),a==="CHANGE_OWNER"&&H.new_owner_name&&t.jsxs("div",{className:"flex items-center md:col-span-2",children:[t.jsx("span",{className:"font-medium w-40",children:"New Owner Name:"}),t.jsx("span",{className:"flex-1 font-semibold text-blue-600",children:H.new_owner_name})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:ft.primary},children:"Amendment Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",style:{fontFamily:ft.font},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Reason for Amendment:"}),t.jsx("span",{className:"flex-1",children:H.amendment_reason})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Effective Date:"}),t.jsx("span",{className:"flex-1 font-semibold text-green-600",children:H.effective_date})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:ft.primary},children:"Uploaded Documents"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h6",{className:"font-medium mb-2 text-blue-600",children:"General Requirements:"}),t.jsx("div",{className:"space-y-2",children:X.map((oe,he)=>t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[H[oe.name]?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):oe.required?t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-gray-400 mr-3"}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:[oe.title,":"]}),t.jsx("p",{className:"text-sm text-gray-600",children:H[oe.name]?H[oe.name].name:oe.required?"Not uploaded":"Optional"})]})]}),H[oe.name]&&t.jsxs("button",{type:"button",onClick:()=>me(H[oe.name]),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:ft.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]},he))})]}),Le?.requirements&&t.jsxs("div",{children:[t.jsx("h6",{className:"font-medium mb-2",style:{color:"#d97706"},children:"Specific Requirements:"}),t.jsx("div",{className:"space-y-2",children:Le.requirements.map((oe,he)=>t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[H[oe.name]?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):oe.required?t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-gray-400 mr-3"}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:[oe.title,":"]}),t.jsx("p",{className:"text-sm text-gray-600",children:H[oe.name]?H[oe.name].name:oe.required?"Not uploaded":"Optional"})]})]}),H[oe.name]&&t.jsxs("button",{type:"button",onClick:()=>me(H[oe.name]),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:ft.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]},he))})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:ft.primary},children:"Declaration Status"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",style:{fontFamily:ft.font},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Declaration Agreed:"}),t.jsx("span",{className:"flex-1 font-semibold text-green-600",children:"Yes"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Signature Uploaded:"}),t.jsx("span",{className:"flex-1 font-semibold text-green-600",children:"Yes"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Submission Date:"}),t.jsx("span",{className:"flex-1",children:H.date_submitted})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Submission Time:"}),t.jsx("span",{className:"flex-1",children:H.date_submitted_time})]})]})]})]})})]});default:return null}};if(o&&a){const Le=$.find(oe=>oe.id===a);return t.jsxs("div",{className:"mx-1 mt-1 p-6 rounded-lg min-h-screen",style:{background:ft.background,color:ft.secondary,fontFamily:ft.font},children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-3 rounded-full ${Le?.formBgColor||"bg-gray-100"}`,children:Le?.icon}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold",style:{color:ft.primary},children:"BUSINESS AMENDMENT                 "}),t.jsx("p",{className:`mt-1 text-lg font-semibold ${Le?.formColor||"text-gray-800"}`,children:Le?.title})]})]}),t.jsx("p",{className:"mt-2",style:{color:ft.secondary},children:"Complete the form below to apply for your business amendment"})]}),t.jsx("button",{onClick:Oe,onMouseEnter:oe=>oe.currentTarget.style.background=ft.accent,onMouseLeave:oe=>oe.currentTarget.style.background=ft.success,style:{background:ft.success},className:"px-4 py-2 rounded-lg font-medium text-white hover:bg-[#FDA811] transition-colors duration-300",children:"Back to Selection"})]}),t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"flex items-center justify-between",children:K.map((oe,he)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`flex items-center justify-center rounded-full border-2 font-semibold transition-all duration-300 ${n>=oe.id?"text-white":"text-gray-500"}`,style:{background:n>=oe.id?ft.success:"transparent",borderColor:n>=oe.id?ft.success:"#9CA3AF",width:"45px",height:"30px",borderRadius:"20px",fontFamily:ft.font},children:oe.id}),t.jsxs("div",{className:"ml-3 hidden md:block",children:[t.jsx("p",{className:"text-sm font-medium",style:{color:n>=oe.id?ft.success:ft.secondary,fontFamily:ft.font},children:oe.title}),t.jsx("p",{className:"text-xs",style:{color:ft.secondary,fontFamily:ft.font},children:oe.description})]}),he<K.length-1&&t.jsx("div",{className:"hidden md:block w-16 h-0.5 mx-4",style:{background:n>oe.id?ft.success:"#9CA3AF"}})]},oe.id))})}),t.jsxs("form",{onSubmit:Ae,className:"space-y-8",children:[ze(),t.jsxs("div",{className:"flex justify-between pt-6",children:[n>1&&t.jsx("button",{type:"button",onClick:gt,onMouseEnter:oe=>oe.currentTarget.style.background=ft.accent,onMouseLeave:oe=>oe.currentTarget.style.background=ft.success,style:{background:ft.success},className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:"Previous"}),n<K.length?t.jsx("button",{type:"submit",disabled:!tt(n),style:{background:tt(n)?ft.success:"#9CA3AF"},onMouseEnter:oe=>{tt(n)&&(oe.currentTarget.style.background=ft.accent)},onMouseLeave:oe=>{tt(n)&&(oe.currentTarget.style.background=ft.success)},className:`px-6 py-3 rounded-lg font-semibold text-white ${tt(n)?"transition-colors duration-300":"cursor-not-allowed"}`,children:n===K.length-1?"Submit Application":"Next"}):t.jsx("button",{type:"button",onClick:()=>A(!0),onMouseEnter:oe=>oe.currentTarget.style.background=ft.accent,onMouseLeave:oe=>oe.currentTarget.style.background=ft.success,style:{background:ft.success},className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:"Submit Application"})]})]}),Y.url&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"rounded-lg shadow-lg w-full max-w-4xl border border-gray-200 overflow-hidden",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:ft.font,backdropFilter:"blur(10px)",maxHeight:"90vh"},children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold",style:{color:ft.primary},children:"Preview Document"}),t.jsx("button",{onClick:Te,className:"text-gray-500 hover:text-gray-700 transition-colors duration-300",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 overflow-auto",style:{maxHeight:"calc(90vh - 80px)"},children:[t.jsxs("p",{className:"text-sm mb-4",style:{color:ft.secondary,fontFamily:ft.font},children:["File: ",t.jsx("span",{className:"font-medium",children:Y.name})]}),t.jsx("div",{className:"bg-white rounded-lg border p-4",children:Y.type==="image"?t.jsx("div",{className:"flex justify-center",children:t.jsx("img",{src:Y.url,alt:"Preview",className:"max-w-full h-auto max-h-[500px]"})}):Y.type==="application"&&Y.name?.includes(".pdf")?t.jsx("iframe",{src:Y.url,className:"w-full h-[500px] rounded",title:"PDF Preview"}):t.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[t.jsx(Kt,{className:"w-24 h-24 text-gray-400 mb-4"}),t.jsxs("p",{className:"text-gray-600 mb-2",children:["File: ",Y.name]}),t.jsx("p",{className:"text-gray-500 mb-6",children:"Preview not available for this file type"}),t.jsx("a",{href:Y.url,download:Y.name,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors duration-300",children:"Download File"})]})}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsx("button",{onClick:Te,style:{background:ft.success},onMouseEnter:oe=>oe.currentTarget.style.background=ft.accent,onMouseLeave:oe=>oe.currentTarget.style.background=ft.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close Preview"})})]})]})}),m&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:ft.font,backdropFilter:"blur(10px)"},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center",children:t.jsx(o8,{className:"w-8 h-8 text-blue-600"})})}),t.jsx("h2",{className:"text-xl font-bold text-center mb-4",style:{color:ft.primary},children:"Submit Amendment Application?"}),t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-sm text-center mb-3",style:{color:ft.secondary,fontFamily:ft.font},children:"Are you sure you want to submit your business amendment application? Please ensure all information is correct before submitting."}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border mt-4",children:[t.jsx("p",{className:"text-sm font-semibold mb-2",style:{color:ft.secondary,fontFamily:ft.font},children:"Application Summary:"}),t.jsxs("ul",{className:"text-xs space-y-1",style:{color:ft.secondary,fontFamily:ft.font},children:[t.jsxs("li",{children:[" Amendment Type: ",Le?.title]}),t.jsxs("li",{children:[" Business: ",H.business_name]}),t.jsxs("li",{children:[" Contact Person: ",H.contact_person]}),t.jsxs("li",{children:[" Submission Date: ",H.date_submitted," at ",H.date_submitted_time]}),t.jsxs("li",{children:[" Declaration Status: ",t.jsx("span",{className:"text-green-600 font-semibold",children:"Agreed and Signed"})]})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("button",{onClick:()=>A(!1),disabled:c,style:{background:ft.danger},onMouseEnter:oe=>{c||(oe.currentTarget.style.background=ft.accent)},onMouseLeave:oe=>{c||(oe.currentTarget.style.background=ft.danger)},className:`px-6 py-2 rounded-lg font-semibold text-white ${c?"cursor-not-allowed":"transition-colors duration-300"}`,children:"Cancel"}),t.jsx("button",{onClick:yt,disabled:c,style:{background:c?"#9CA3AF":ft.success},onMouseEnter:oe=>{c||(oe.currentTarget.style.background=ft.accent)},onMouseLeave:oe=>{c||(oe.currentTarget.style.background=ft.success)},className:`px-6 py-2 rounded-lg font-semibold text-white ${c?"cursor-not-allowed":"transition-colors duration-300"}`,children:c?"Submitting...":"Confirm & Submit"})]})]})}),g&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:ft.font,backdropFilter:"blur(10px)"},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center",children:t.jsx(Ht,{className:"w-8 h-8 text-green-600"})})}),t.jsx("h2",{className:"text-xl font-bold text-center mb-4",style:{color:ft.primary},children:T}),t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-sm text-center mb-3",style:{color:ft.secondary,fontFamily:ft.font},children:E}),t.jsx("p",{className:"text-xs text-center text-gray-500",style:{fontFamily:ft.font},children:"You will be redirected to your dashboard in a few seconds..."})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:()=>{p(!1),ne("/user/permittracker")},style:{background:ft.success},onMouseEnter:oe=>oe.currentTarget.style.background=ft.accent,onMouseLeave:oe=>oe.currentTarget.style.background=ft.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Track Application"})})]})}),v&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:ft.font,backdropFilter:"blur(10px)"},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center",children:t.jsx(ls,{className:"w-8 h-8 text-red-600"})})}),t.jsx("h2",{className:"text-xl font-bold text-center mb-4",style:{color:ft.danger},children:T}),t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-sm text-center mb-3",style:{color:ft.secondary,fontFamily:ft.font},children:E}),t.jsx("p",{className:"text-xs text-center text-gray-500",style:{fontFamily:ft.font},children:"Please check your information and try again."})]}),t.jsxs("div",{className:"flex justify-center gap-4",children:[t.jsx("button",{onClick:()=>b(!1),style:{background:ft.danger},onMouseEnter:oe=>oe.currentTarget.style.background=ft.accent,onMouseLeave:oe=>oe.currentTarget.style.background=ft.danger,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close"}),!m&&t.jsx("button",{onClick:()=>{b(!1),A(!0)},style:{background:ft.success},onMouseEnter:oe=>oe.currentTarget.style.background=ft.accent,onMouseLeave:oe=>oe.currentTarget.style.background=ft.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Try Again"})]})]})})]})}return t.jsxs("div",{className:"mx-1 mt-1 p-6 rounded-lg min-h-screen",style:{background:ft.background,color:ft.secondary,fontFamily:ft.font},children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold",style:{color:ft.primary},children:"Business Amendment Application"}),t.jsx("p",{className:"mt-2",style:{color:ft.secondary},children:"Select the type of amendment you need and review the requirements before proceeding"})]}),t.jsx("button",{onClick:()=>r(!0),onMouseEnter:Le=>Le.currentTarget.style.background=ft.accent,onMouseLeave:Le=>Le.currentTarget.style.background=ft.success,style:{background:ft.success},className:"px-4 py-2 rounded-lg font-medium text-white hover:bg-[#FDA811] transition-colors duration-300",children:"Back to Dashboard"})]}),t.jsx("div",{className:"flex justify-center",children:t.jsxs("div",{className:"w-full max-w-6xl",children:[t.jsx("h2",{className:"text-xl font-semibold mb-6 text-center",style:{color:ft.secondary},children:"Select Amendment Type"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:$.map(Le=>t.jsxs("div",{onClick:()=>I(Le.id),className:`cursor-pointer rounded-lg border-2 p-6 transition-all duration-300 hover:scale-[1.02] shadow-md hover:shadow-xl flex flex-col justify-between h-full min-h-[180px]
                  ${a===Le.id?"ring-2 ring-blue-500 border-blue-500 bg-blue-50":"border-gray-200"} 
                  ${Le.color} ${Le.bgColor}`,children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"p-3 rounded-full",style:{background:a===Le.id?"rgba(59, 130, 246, 0.1)":"#f9fafb"},children:Le.icon}),a===Le.id&&t.jsx(Us,{className:"w-6 h-6 text-green-500"})]}),t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:Le.title}),t.jsx("p",{className:"text-gray-600",children:Le.description})]}),t.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[t.jsx("span",{className:"inline-block px-3 py-1 text-xs font-semibold rounded-full",style:{background:a===Le.id?ft.primary:"#e5e7eb",color:a===Le.id?"white":"#6b7280"},children:a===Le.id?"Selected":"Click to select"}),t.jsxs("button",{onClick:oe=>R(Le.id,oe),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-300",style:{background:ft.primary,color:"white"},onMouseEnter:oe=>oe.currentTarget.style.background=ft.accent,onMouseLeave:oe=>oe.currentTarget.style.background=ft.primary,children:[t.jsx(iw,{className:"w-4 h-4"}),"Learn More"]})]})]},Le.id))}),t.jsxs("div",{className:"mt-8 p-4 rounded-lg border border-blue-300 bg-blue-50 mx-auto max-w-3xl",children:[t.jsx("p",{className:"text-sm font-medium mb-2",style:{color:ft.primary},children:"How to proceed:"}),t.jsxs("ul",{className:"text-xs space-y-1",style:{color:"#1e40af"},children:[t.jsx("li",{children:" Click on one of the amendment types above to select it"}),t.jsx("li",{children:' Click "Learn More" to view detailed requirements for each amendment type'}),t.jsx("li",{children:" Review the specific requirements for your selected amendment"}),t.jsx("li",{children:' Click "Continue to Application" to start the form'})]})]})]})}),B&&L&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-[1px] p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsx("div",{className:"p-6",style:{background:ft.primary},children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Requirements Preview"}),t.jsxs("p",{className:"text-blue-100 text-sm",children:["For: ",$.find(Le=>Le.id===L)?.title]})]}),t.jsx("button",{onClick:()=>j(!1),className:"text-white hover:text-blue-200 transition-colors duration-300",children:t.jsx(Ka,{className:"w-6 h-6"})})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Ks,{className:"w-5 h-5 text-blue-600"}),t.jsx("h3",{className:"font-bold text-lg",style:{color:ft.primary},children:"General Requirements"})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"These documents are required for all types of amendments:"}),t.jsx("ul",{className:"space-y-3",children:X.map((Le,oe)=>t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx(Fj,{className:"w-4 h-4 text-green-600 mt-1 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",style:{color:ft.secondary},children:Le.title}),t.jsx("p",{className:"text-xs text-gray-600",children:Le.description})]})]},oe))})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Ks,{className:"w-5 h-5 text-amber-600"}),t.jsx("h3",{className:"font-bold text-lg",style:{color:"#d97706"},children:"Specific Requirements"})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Additional documents required for this amendment type:"}),t.jsx("ul",{className:"space-y-4",children:$.find(Le=>Le.id===L)?.requirements.map((Le,oe)=>t.jsxs("li",{className:"pb-4 border-b border-gray-100 last:border-0 last:pb-0",children:[t.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[t.jsx(Fj,{className:"w-4 h-4 text-amber-600 mt-1 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",style:{color:ft.secondary},children:Le.title}),t.jsx("p",{className:"text-xs text-gray-600",children:Le.description})]})]}),Le.details&&t.jsx("ul",{className:"ml-6 mt-2 space-y-1",children:Le.details.map((he,W)=>t.jsxs("li",{className:"text-xs text-gray-700 flex items-start gap-2",children:[t.jsx("span",{className:"text-gray-400",children:""}),he]},W))})]},oe))})]}),t.jsxs("div",{className:"mt-6 p-4 rounded-lg",style:{background:"#fef3c7"},children:[t.jsx("p",{className:"text-sm font-medium mb-2",style:{color:"#92400e"},children:"Important Notes:"}),t.jsxs("ul",{className:"text-xs space-y-1",style:{color:"#92400e"},children:[t.jsx("li",{children:" All documents must be clear and legible"}),t.jsx("li",{children:" File names should clearly indicate the document type"}),t.jsx("li",{children:" Maximum file size: 5MB per document"}),t.jsx("li",{children:" Accepted formats: PDF, JPG, PNG"}),t.jsx("li",{children:" You will need your Business Permit ID"})]})]})]}),t.jsx("div",{className:"p-6 border-t border-gray-200",children:t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("button",{onClick:()=>j(!1),className:"px-6 py-3 rounded-lg font-semibold transition-colors duration-300",style:{background:"#e5e7eb",color:ft.secondary,fontFamily:ft.font},onMouseEnter:Le=>Le.currentTarget.style.background="#d1d5db",onMouseLeave:Le=>Le.currentTarget.style.background="#e5e7eb",children:"Close"}),t.jsx("button",{onClick:G,onMouseEnter:Le=>Le.currentTarget.style.background=ft.accent,onMouseLeave:Le=>Le.currentTarget.style.background=ft.success,style:{background:ft.success,color:"white",fontFamily:ft.font},className:"px-6 py-3 rounded-lg font-semibold transition-colors duration-300",children:"Continue Application"})]})})]})}),y&&a&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-[1px] p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-2xl font-bold",style:{color:ft.primary,fontFamily:ft.font},children:"Confirm Amendment Type"}),t.jsx("button",{onClick:()=>w(!1),className:"text-gray-500 hover:text-gray-700 transition-colors duration-300",children:t.jsx(Ka,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg mb-6",style:{background:$.find(Le=>Le.id===a)?.formBgColor||"#f3f4f6"},children:[t.jsx("div",{className:`p-3 rounded-full ${$.find(Le=>Le.id===a)?.formBgColor||"bg-gray-100"}`,children:$.find(Le=>Le.id===a)?.icon}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"You have selected:"}),t.jsx("p",{className:`text-xl font-bold ${$.find(Le=>Le.id===a)?.formColor||"text-gray-800"}`,children:$.find(Le=>Le.id===a)?.title})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("p",{className:"text-sm mb-3",style:{color:ft.secondary,fontFamily:ft.font},children:[t.jsx("strong",{children:"Description:"})," ",$.find(Le=>Le.id===a)?.description]}),t.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[t.jsx("p",{className:"text-sm font-medium mb-2",style:{color:ft.primary},children:"Before you proceed:"}),t.jsxs("ul",{className:"text-xs space-y-1",style:{color:"#1e40af"},children:[t.jsx("li",{children:" Make sure you have your Business Permit ID ready"}),t.jsx("li",{children:" Prepare all required documents"}),t.jsx("li",{children:" Ensure you have valid government ID"}),t.jsx("li",{children:" Have your business tax receipt available"})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsx("button",{onClick:()=>w(!1),className:"px-6 py-3 rounded-lg font-semibold transition-colors duration-300",style:{background:"#e5e7eb",color:ft.secondary,fontFamily:ft.font},onMouseEnter:Le=>Le.currentTarget.style.background="#d1d5db",onMouseLeave:Le=>Le.currentTarget.style.background="#e5e7eb",children:"Cancel"}),t.jsx("button",{onClick:se,onMouseEnter:Le=>Le.currentTarget.style.background=ft.accent,onMouseLeave:Le=>Le.currentTarget.style.background=ft.success,style:{background:ft.success,color:"white",fontFamily:ft.font},className:"px-6 py-3 rounded-lg font-semibold transition-colors duration-300",children:"Continue to Application"})]})]})}),s&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-[1px]",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-lg w-full p-8 text-center",children:[t.jsx("h3",{className:"text-2xl font-semibold mb-6",style:{color:ft.secondary,fontFamily:ft.font},children:"Leave Amendment Selection?"}),t.jsxs("div",{className:"flex justify-center gap-6",children:[t.jsx("button",{onClick:()=>r(!1),className:"px-8 py-3 rounded-lg font-semibold transition-colors duration-300",style:{background:"#e5e7eb",color:ft.secondary,fontFamily:ft.font},onMouseEnter:Le=>Le.currentTarget.style.background="#d1d5db",onMouseLeave:Le=>Le.currentTarget.style.background="#e5e7eb",children:"Cancel"}),t.jsx("button",{onClick:()=>ne("/user/dashboard"),onMouseEnter:Le=>Le.currentTarget.style.background=ft.accent,onMouseLeave:Le=>Le.currentTarget.style.background=ft.success,style:{background:ft.success,color:"white",fontFamily:ft.font},className:"px-8 py-3 rounded-lg font-semibold transition-colors duration-300",children:"Yes, Go Back"})]})]})})]})}const xq=["Afghan","Albanian","Algerian","American","Andorran","Angolan","Antiguans","Argentinean","Armenian","Australian","Austrian","Azerbaijani","Bahamian","Bahraini","Bangladeshi","Barbadian","Barbudans","Batswana","Belarusian","Belgian","Belizean","Beninese","Bhutanese","Bolivian","Bosnian","Brazilian","British","Bruneian","Bulgarian","Burkinabe","Burmese","Burundian","Cambodian","Cameroonian","Canadian","Cape Verdean","Central African","Chadian","Chilean","Chinese","Colombian","Comoran","Congolese","Costa Rican","Croatian","Cuban","Cypriot","Czech","Danish","Djibouti","Dominican","Dutch","East Timorese","Ecuadorean","Egyptian","Emirian","Equatorial Guinean","Eritrean","Estonian","Ethiopian","Fijian","Filipino","Finnish","French","Gabonese","Gambian","Georgian","German","Ghanaian","Greek","Grenadian","Guatemalan","Guinea-Bissauan","Guinean","Guyanese","Haitian","Herzegovinian","Honduran","Hungarian","I-Kiribati","Icelander","Indian","Indonesian","Iranian","Iraqi","Irish","Israeli","Italian","Ivorian","Jamaican","Japanese","Jordanian","Kazakhstani","Kenyan","Kittian and Nevisian","Kuwaiti","Kyrgyz","Laotian","Latvian","Lebanese","Liberian","Libyan","Liechtensteiner","Lithuanian","Luxembourger","Macedonian","Malagasy","Malawian","Malaysian","Maldivan","Malian","Maltese","Marshallese","Mauritanian","Mauritian","Mexican","Micronesian","Moldovan","Monacan","Mongolian","Moroccan","Mosotho","Motswana","Mozambican","Namibian","Nauruan","Nepalese","New Zealander","Nicaraguan","Nigerian","Nigerien","North Korean","Northern Irish","Norwegian","Omani","Pakistani","Palauan","Palestinian","Panamanian","Papua New Guinean","Paraguayan","Peruvian","Polish","Portuguese","Qatari","Romanian","Russian","Rwandan","Saint Lucian","Salvadoran","Samoan","San Marinese","Sao Tomean","Saudi","Scottish","Senegalese","Serbian","Seychellois","Sierra Leonean","Singaporean","Slovakian","Slovenian","Solomon Islander","Somali","South African","South Korean","Spanish","Sri Lankan","Sudanese","Surinamer","Swazi","Swedish","Swiss","Syrian","Taiwanese","Tajik","Tanzanian","Thai","Togolese","Tongan","Trinidadian or Tobagonian","Tunisian","Turkish","Tuvaluan","Ugandan","Ukrainian","Uruguayan","Uzbekistani","Venezuelan","Vietnamese","Welsh","Yemenite","Zambian","Zimbabwean"],it={primary:"#4A90E2",secondary:"#000000",accent:"#FDA811",success:"#4CAF50",background:"#FBFBFB",font:"Montserrat, Arial, sans-serif"};function bq(){const a=ka(),[e,s]=C.useState(!1),r="/backend/building_permit",[n,i]=C.useState(1),[o,l]=C.useState({last_name:"",first_name:"",middle_initial:"",suffix:"",tin:"",contact_no:"",email:"",citizenship:"",home_address:"",form_of_ownership:"",permit_group:"",use_of_permit:"",proposed_date_of_construction:"",expected_date_of_completion:"",total_estimated_cost:"",lot_no:"",blk_no:"",tct_no:"",tax_dec_no:"",street:"",barangay:"",city_municipality:"",province:"",number_of_units:"",number_of_storeys:"",total_floor_area:"",lot_area:"",building_cost:"",electrical_cost:"",mechanical_cost:"",electronics_cost:"",plumbing_cost:"",other_cost:"",equipment_cost:"",proposed_start:"",expected_completion:"",attachments:[],professional_title:"",professional_name:"",prc_no:"",ptr_no:"",gov_id_no:"",date_issued:"",remarks:"",place_issued:"",signature:null}),c=[{id:1,title:"Applicant Information",description:"Personal and contact details"},{id:2,title:"Application Details",description:"Ownership and permit info"},{id:3,title:"Project Site Information",description:"Project location details"},{id:4,title:"Occupancy & Project Cost",description:"Units, storeys, and cost"},{id:5,title:"Other Requirements & Professionals",description:"Attachments and professionals"}],u=b=>{const{name:y,type:w,value:B,files:j}=b.target;l(E=>({...E,[y]:w==="file"?j&&j[0]?j[0]:null:B}))},m=(b,y)=>{const w=E=>E==null||E===""||Array.isArray(E)&&E.length===0,B={1:["last_name","first_name","middle_initial","tin","contact_no","email","citizenship","home_address","form_of_ownership"],2:["permit_group","use_of_permit","proposed_date_of_construction","expected_date_of_completion","total_estimated_cost"],3:["lot_no","blk_no","tct_no","tax_dec_no","street","barangay","city_municipality","province"],4:["number_of_units","number_of_storeys","total_floor_area","lot_area","proposed_start","expected_completion"],5:["professional_title","professional_name","prc_no","ptr_no","gov_id_no","signature","date_issued","place_issued"]},j=[];return B[b].forEach(E=>{w(y[E])&&j.push(E.replace(/_/g," ").replace(/\b\w/g,S=>S.toUpperCase()))}),j.length?{ok:!1,message:"Missing: "+j.join(", ")}:{ok:!0}},A=()=>{const b=m(n,o);if(!b.ok){dt.fire({icon:"warning",title:"Missing Fields",text:b.message,confirmButtonColor:"#4a90e2"});return}n<c.length&&i(n+1)},g=()=>{n>1&&i(n-1)},p=async b=>{b.preventDefault();const y=m(n,o);if(!y.ok){dt.fire({icon:"warning",title:"Missing Fields",text:y.message,confirmButtonColor:"#4a90e2"});return}if((await dt.fire({title:"Submit Application?",text:"Are you sure you want to submit this building permit application?",icon:"question",showCancelButton:!0,confirmButtonColor:"#4CAF50",cancelButtonColor:"#9aa5b1",confirmButtonText:"Yes, Submit",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed){s(!0),dt.fire({title:"Submitting...",html:"Please wait while we process your application.",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{dt.showLoading()}});try{const B=new FormData;Object.keys(o).forEach(T=>{const M=o[T];M!=null&&(M instanceof File||M instanceof FileList||Array.isArray(M)||B.append(T,M))}),B.append("permit_action","NEW"),o.prc_no&&B.append("prc_license",o.prc_no);const j=localStorage.getItem("user_id")||localStorage.getItem("goserveph_user_id")||"0";if(B.append("user_id",j),o.signature&&B.append("signature",o.signature),o.attachments&&o.attachments.length>0)for(let T=0;T<o.attachments.length;T++)B.append("attachments[]",o.attachments[T]);const E=await fetch(`${r}/building_permit.php`,{method:"POST",body:B});if(!E.ok)throw new Error(`HTTP error! status: ${E.status}`);const S=await E.json();if(S.success){try{ql("Building Permit",S.data?.application_id||"",{permit_type:"New"})}catch(T){console.warn("Activity log failed:",T)}dt.fire({icon:"success",title:"Application Submitted!",html:`<p>Your building permit application has been submitted successfully.</p>
                 <p style="margin-top:8px;"><strong>Application ID:</strong> ${S.data?.application_id||"N/A"}</p>`,confirmButtonColor:"#4CAF50",confirmButtonText:"OK"}).then(()=>{a("/user/building/type")})}else dt.fire({icon:"error",title:"Submission Failed",text:S.message||"Failed to submit application. Please try again.",confirmButtonColor:"#E53935"})}catch(B){console.error("Submit error:",B),dt.fire({icon:"error",title:"Network Error",text:"Could not connect to the server. Please check your connection and try again.",confirmButtonColor:"#E53935"})}finally{s(!1)}}},v=()=>{switch(n){case 1:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:it.secondary,fontFamily:it.font},children:c[0].title}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:c[0].description})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["First Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"first_name",value:o.first_name||"",onChange:u,placeholder:"Enter first name",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Last Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"last_name",value:o.last_name||"",onChange:u,placeholder:"Enter last name",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Middle Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"middle_initial",value:o.middle_initial||"",onChange:u,placeholder:"Enter middle initial",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:"Suffix"}),t.jsx("input",{type:"text",name:"suffix",value:o.suffix||"",onChange:u,placeholder:"Enter suffix",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Citizenship ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{list:"nationalities",name:"citizenship",value:o.citizenship||"",onChange:u,placeholder:"Enter citizenship",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}}),t.jsx("datalist",{id:"nationalities",children:xq.map(b=>t.jsx("option",{value:b},b))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["TIN Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"tin",value:o.tin||"",onChange:u,placeholder:"Enter TIN number",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Contact Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"contact_no",value:o.contact_no||"",onChange:u,placeholder:"Enter contact number",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Email Address ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"email",name:"email",value:o.email||"",onChange:u,placeholder:"Enter email address",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Home Address ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"home_address",value:o.home_address||"",onChange:u,placeholder:"Enter home address",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Form of Ownership ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"form_of_ownership",value:o.form_of_ownership||"",onChange:u,className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font},children:[t.jsx("option",{value:"",children:"Select Ownership"}),t.jsx("option",{value:"Individual",children:"Individual"}),t.jsx("option",{value:"Enterprise",children:"Enterprise"}),t.jsx("option",{value:"Others",children:"Others"})]})]})]})]});case 2:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:it.secondary,fontFamily:it.font},children:c[1].title}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:c[1].description})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Permit Group ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{id:"permit_group",name:"permit_group",value:o.permit_group||"",onChange:u,className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font},children:[t.jsx("option",{value:"",children:"Select Permit Group"}),t.jsx("option",{value:"GROUP A: Single / Duplex / Residential R-1, R-2",children:"GROUP A: Single / Duplex / Residential R-1, R-2"}),t.jsx("option",{value:"GROUP B: Hotel / Motel / Dormitory / Townhouse / Boardinghouse / Residential R-3, R-4, R-5",children:"GROUP B: Hotel / Motel / Dormitory / Townhouse / Boardinghouse / Residential R-3, R-4, R-5"}),t.jsx("option",{value:"GROUP C: School Building / Civic Center / Clubhouse / School Auditorium / Gymnasium / Church, Mosque, Temple, Chapel",children:"GROUP C: School Building / Civic Center / Clubhouse / School Auditorium / Gymnasium / Church, Mosque, Temple, Chapel"}),t.jsx("option",{value:"GROUP D: Hospital / Home for the Aged / Government Office",children:"GROUP D: Hospital / Home for the Aged / Government Office"}),t.jsx("option",{value:"GROUP E: Bank / Store / Shopping Center / Mall / Dining Establishment / Shop",children:"GROUP E: Bank / Store / Shopping Center / Mall / Dining Establishment / Shop"}),t.jsx("option",{value:"GROUP F: Factory / Plant (Non-Explosive)",children:"GROUP F: Factory / Plant (Non-Explosive)"}),t.jsx("option",{value:"GROUP G: Warehouse / Factory (Hazardous / Highly Flammable)",children:"GROUP G: Warehouse / Factory (Hazardous / Highly Flammable)"}),t.jsx("option",{value:"GROUP H: Theater / Auditorium / Convention Hall / Grandstand / Bleacher",children:"GROUP H: Theater / Auditorium / Convention Hall / Grandstand / Bleacher"}),t.jsx("option",{value:"GROUP I: Coliseum / Sports Complex / Convention Center and Similar Structure",children:"GROUP I: Coliseum / Sports Complex / Convention Center and Similar Structure"}),t.jsx("option",{value:"GROUP J-1: Barn / Granary / Poultry House / Piggery / Grain Mill / Grain Silo",children:"GROUP J-1: Barn / Granary / Poultry House / Piggery / Grain Mill / Grain Silo"}),t.jsx("option",{value:"GROUP J-2: Private Carport / Garage / Tower / Swimming Pool / Fence / Steel / Concrete Tank",children:"GROUP J-2: Private Carport / Garage / Tower / Swimming Pool / Fence / Steel / Concrete Tank"}),t.jsx("option",{value:"Others",children:"Others"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Specify Permit Use ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"use_of_permit",value:o.use_of_permit||"",onChange:u,placeholder:"E.g Hotel",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Proposed Date of Construction ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",name:"proposed_date_of_construction",value:o.proposed_date_of_construction||"",onChange:u,className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Expected Date of Completion ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",name:"expected_date_of_completion",value:o.expected_date_of_completion||"",onChange:u,className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Total Estimated Cost ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"total_estimated_cost",value:o.total_estimated_cost||"",onChange:u,placeholder:"Enter total estimated cost",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]})]})]});case 3:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:it.secondary,fontFamily:it.font},children:c[2].title}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:c[2].description})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Lot Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"lot_no",value:o.lot_no||"",onChange:u,placeholder:"Enter Lot Number",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Block Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"blk_no",value:o.blk_no||"",onChange:u,placeholder:"Enter Block Number",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Street ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"street",value:o.street||"",onChange:u,placeholder:"Enter Street",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Barangay ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"barangay",value:o.barangay||"",onChange:u,placeholder:"Enter Barangay",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["City / Municipality ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"city_municipality",value:o.city_municipality||"",onChange:u,placeholder:"Enter City or Municipality",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Province ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"province",value:o.province||"",onChange:u,placeholder:"Enter Province",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["TCT Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"tct_no",value:o.tct_no||"",onChange:u,placeholder:"Enter TCT Number",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Tax Declaration Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"tax_dec_no",value:o.tax_dec_no||"",onChange:u,placeholder:"Enter Tax Declaration Number",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]})]})]});case 4:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:it.secondary,fontFamily:it.font},children:c[3].title}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:c[3].description})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Number of Units ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"number_of_units",value:o.number_of_units||"",onChange:u,placeholder:"Enter number of units",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Number of Storeys ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"number_of_storeys",value:o.number_of_storeys||"",onChange:u,placeholder:"Enter number of storeys",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Total Floor Area ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"total_floor_area",value:o.total_floor_area||"",onChange:u,placeholder:"Enter total floor area",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Lot Area ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"lot_area",value:o.lot_area||"",onChange:u,placeholder:"Enter lot area",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:"Building Cost"}),t.jsx("input",{type:"number",name:"building_cost",value:o.building_cost||"",onChange:u,placeholder:"Enter building cost",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:"Electrical Cost"}),t.jsx("input",{type:"number",name:"electrical_cost",value:o.electrical_cost||"",onChange:u,placeholder:"Enter electrical cost",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:"Mechanical Cost"}),t.jsx("input",{type:"number",name:"mechanical_cost",value:o.mechanical_cost||"",onChange:u,placeholder:"Enter mechanical cost",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:"Electronics Cost"}),t.jsx("input",{type:"number",name:"electronics_cost",value:o.electronics_cost||"",onChange:u,placeholder:"Enter electronics cost",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:"Plumbing Cost"}),t.jsx("input",{type:"number",name:"plumbing_cost",value:o.plumbing_cost||"",onChange:u,placeholder:"Enter plumbing cost",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:"Equipment Cost"}),t.jsx("input",{type:"number",name:"equipment_cost",value:o.equipment_cost||"",onChange:u,placeholder:"Enter equipment cost",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Proposed Start Date ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",name:"proposed_start",value:o.proposed_start||"",onChange:u,className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Expected Completion Date ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",name:"expected_completion",value:o.expected_completion||"",onChange:u,className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:"Other Cost"}),t.jsx("input",{type:"number",name:"other_cost",value:o.other_cost||"",onChange:u,placeholder:"Enter other cost",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]})]})]});case 5:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:it.secondary,fontFamily:it.font},children:c[4].title}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:c[4].description})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Professional Title ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"professional_title",value:o.professional_title||"",onChange:u,className:"w-full p-3 border border-black rounded-lg",style:{color:it.secondary,fontFamily:it.font},children:[t.jsx("option",{value:"",children:"Select Professional Title"}),t.jsx("option",{value:"Architect",children:"Architect"}),t.jsx("option",{value:"Civil Engineer",children:"Civil Engineer"}),t.jsx("option",{value:"Electronics and Communications Engineering",children:"Electronics and Communications Engineering"}),t.jsx("option",{value:"Electronics Engineer",children:"Electronics Engineer"}),t.jsx("option",{value:"Geodetic Engineer",children:"Geodetic Engineer"}),t.jsx("option",{value:"Interior Designer",children:"Interior Designer"}),t.jsx("option",{value:"Master Electrician",children:"Master Electrician"}),t.jsx("option",{value:"Master Plumber",children:"Master Plumber"}),t.jsx("option",{value:"Mechanical Engineer",children:"Mechanical Engineer"}),t.jsx("option",{value:"Professional Electrical Engineer",children:"Professional Electrical Engineer"}),t.jsx("option",{value:"Professional Electronics Engineer",children:"Professional Electronics Engineer"}),t.jsx("option",{value:"Professional Mechanical Engineer",children:"Professional Mechanical Engineer"}),t.jsx("option",{value:"Registered Electrical Engineer",children:"Registered Electrical Engineer"}),t.jsx("option",{value:"Sanitary Engineer",children:"Sanitary Engineer"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Professional Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"professional_name",value:o.professional_name||"",onChange:u,placeholder:"Enter Professional Name",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["PRC Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"prc_no",value:o.prc_no||"",onChange:u,placeholder:"Enter PRC Number",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["PTR Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"ptr_no",value:o.ptr_no||"",onChange:u,placeholder:"Enter PTR Number",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Government ID Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"gov_id_no",value:o.gov_id_no||"",onChange:u,placeholder:"Enter Government ID Number",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Date Issued ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",name:"date_issued",value:o.date_issued||"",onChange:u,className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Place Issued ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"place_issued",value:o.place_issued||"",onChange:u,placeholder:"Enter Place Issued",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:"Remarks"}),t.jsx("input",{type:"text",name:"remarks",value:o.remarks||"",onChange:u,placeholder:"Enter remarks",className:"p-3 border border-black rounded-lg w-full",style:{color:it.secondary,fontFamily:it.font}})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:it.secondary,fontFamily:it.font},children:["Signature ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded-lg w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"signature",onChange:u,className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{color:it.secondary,fontFamily:it.font}})]})]})]})]});default:return null}};return t.jsxs("div",{className:"mx-1 mt-1 p-6 rounded-lg min-h-screen",style:{background:it.background,color:it.secondary,fontFamily:it.font},children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold",style:{color:it.primary,fontFamily:it.font},children:"BUILDING NEW PERMIT APPLICATION"}),t.jsx("p",{className:"mt-2",style:{color:it.secondary,fontFamily:it.font},children:"Apply for a building permit. Fill out the required details below."})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:()=>a("/user/building/type"),className:"px-4 py-2 rounded-lg font-semibold text-white hover:bg-[#FDA811] transition-colors duration-300",style:{background:it.success,fontFamily:it.font},onMouseEnter:b=>b.currentTarget.style.background=it.accent,onMouseLeave:b=>b.currentTarget.style.background=it.success,children:"Change Type"})})]}),t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"flex items-center justify-between",children:c.map((b,y)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2",style:{background:n>=b.id?it.success:"transparent",borderColor:n>=b.id?it.success:"#9CA3AF",color:n>=b.id?"#fff":"#9CA3AF",fontFamily:it.font},children:b.id}),t.jsxs("div",{className:"ml-3 hidden md:block",children:[t.jsx("p",{className:"text-sm font-medium",style:{color:n>=b.id?it.success:it.secondary,fontFamily:it.font},children:b.title}),t.jsx("p",{className:"text-xs text-gray-500",children:b.description})]}),y<c.length-1&&t.jsx("div",{className:"hidden md:block w-16 h-0.5 mx-4",style:{background:n>b.id?it.success:"#9CA3AF"}})]},b.id))})}),t.jsxs("form",{onSubmit:p,className:"space-y-8",children:[v(),t.jsxs("div",{className:"flex justify-between pt-6",children:[n>1&&t.jsx("button",{type:"button",onClick:g,className:"px-6 py-3 rounded-lg font-semibold text-white hover:bg-[#FDA811] transition-colors duration-300",style:{background:it.success,fontFamily:it.font},onMouseEnter:b=>b.currentTarget.style.background=it.accent,onMouseLeave:b=>b.currentTarget.style.background=it.success,children:"Previous"}),n<c.length?t.jsx("button",{type:"button",onClick:A,className:"px-6 py-3 rounded-lg font-semibold text-white hover:bg-[#FDA811] transition-colors duration-300",style:{background:it.success,fontFamily:it.font},onMouseEnter:b=>b.currentTarget.style.background=it.accent,onMouseLeave:b=>b.currentTarget.style.background=it.success,children:"Next"}):t.jsx("button",{type:"submit",disabled:e,className:`px-6 py-3 rounded-lg font-semibold text-white ${e?"cursor-not-allowed":"hover:bg-[#FDA811] transition-colors duration-300"}`,style:{background:e?"#9CA3AF":it.success,fontFamily:it.font},onMouseEnter:b=>{e||(b.currentTarget.style.background=it.accent)},onMouseLeave:b=>{e||(b.currentTarget.style.background=it.success)},children:e?"Submitting...":"Submit Application"})]})]})]})}const _m={primary:"#4A90E2",accent:"#FDA811",success:"#4CAF50",danger:"#E53935"};function yq({building_permit_id:a}){const e=ka(),s=[{id:"PROFESSIONAL",title:"PROFESSIONAL / ENGINEER",description:"Register yourself as a professional or engineer to be available for building projects.",color:"bg-orange-500 hover:bg-orange-600"},{id:"NEW",title:"NEW",description:"Apply for a new building permit for your project.",color:"bg-green-500 hover:bg-green-600"},{id:"RENEWAL",title:"RENEWAL",description:"Renew your current building permit quickly and easily.w your existing building permit",color:"bg-blue-500 hover:bg-blue-600"},{id:"ANCILLARY",title:"ANCILLARY PERMITS",description:"Apply for the required ancillary permits needed for specialized works in your building project.",color:"bg-yellow-500 hover:bg-yellow-600"}],r=i=>{const o=s.find(l=>l.id===i);dt.fire({title:"Selected Permit Type",html:`
      <div style="text-align: center; padding: 10px 0;">
        <p style="margin-bottom: 10px;">You have selected: <strong style="color: ${_m.primary}">${o?.title}</strong></p>
        <p style="font-size: 0.9rem; color: #666;">${o?.description}</p>
      </div>
    `,icon:"question",showCancelButton:!0,confirmButtonColor:_m.success,cancelButtonColor:"#9CA3AF",confirmButtonText:"Continue",cancelButtonText:"Cancel",customClass:{popup:"swal-wide",title:"swal-title-center",htmlContainer:"swal-text-center"}}).then(l=>{l.isConfirmed&&e({NEW:"/user/building/new",RENEWAL:"/user/building/renewal",PROFESSIONAL:"/user/building/professional",ANCILLARY:"/user/building/ancillary"}[i]||"/user/building/new",{state:{permitType:i}})})},n=()=>{dt.fire({title:"Go Back to Dashboard?",text:"Are you sure you want to return to the dashboard?",icon:"question",showCancelButton:!0,confirmButtonColor:_m.success,cancelButtonColor:_m.danger,confirmButtonText:"Yes, Go Back",cancelButtonText:"Cancel",customClass:{title:"swal-title-center",htmlContainer:"swal-text-center"}}).then(i=>{i.isConfirmed&&dt.fire({title:"Redirecting...",html:'<p style="text-align: center;">Returning to dashboard...</p>',timer:2e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1,customClass:{title:"swal-title-center",htmlContainer:"swal-text-center"},didOpen:()=>{dt.showLoading()},willClose:()=>{e("/user/dashboard")}})})};return t.jsxs("div",{className:"mx-1 mt-1 p-6 dark:bg-slate-900 bg-white dark:text-slate-300 rounded-lg min-h-screen",children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-8 text-center",children:"Building Permit Types"}),t.jsx("p",{className:"mb-6 text-center",children:"Please select the type of Building permit you need to apply for"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full mt-6",children:s.map(i=>t.jsxs("div",{onClick:()=>r(i.id),className:"cursor-pointer rounded-lg border border-transparent px-5 py-4 transition-colors hover:border-blue-300 hover:bg-blue-100 shadow-lg shadow-blue-200/50 hover:shadow-blue-300/50 flex flex-col justify-between h-full",children:[t.jsxs("h2",{className:"mb-3 text-2xl font-semibold flex items-center justify-between",children:[i.title,t.jsx(sA,{className:"ml-2 w-5 h-5 transition-transform group-hover:translate-x-1 motion-reduce:transform-none"})]}),t.jsx("p",{className:"m-0 max-w-[30ch] text-sm opacity-70",children:i.description})]},i.id))}),t.jsx("div",{className:"mt-8 text-center",children:t.jsxs("button",{onClick:n,style:{backgroundColor:_m.success,color:"#fff"},onMouseEnter:i=>i.currentTarget.style.backgroundColor=_m.accent,onMouseLeave:i=>i.currentTarget.style.backgroundColor=_m.success,className:"inline-flex items-center gap-2 font-semibold py-2 px-4 rounded-lg transition-colors",children:[t.jsx(Vh,{size:18}),"Back to Dashboard"]})})]})}const pt={primary:"#4A90E2",secondary:"#000000",accent:"#FDA811",success:"#4CAF50",danger:"#E53935",background:"#FBFBFB",font:"Montserrat, Arial, sans-serif"},vq=["Afghan","Albanian","Algerian","American","Andorran","Angolan","Antiguans","Argentinean","Armenian","Australian","Austrian","Azerbaijani","Bahamian","Bahraini","Bangladeshi","Barbadian","Barbudans","Batswana","Belarusian","Belgian","Belizean","Beninese","Bhutanese","Bolivian","Bosnian","Brazilian","British","Bruneian","Bulgarian","Burkinabe","Burmese","Burundian","Cambodian","Cameroonian","Canadian","Cape Verdean","Central African","Chadian","Chilean","Chinese","Colombian","Comoran","Congolese","Costa Rican","Croatian","Cuban","Cypriot","Czech","Danish","Djibouti","Dominican","Dutch","East Timorese","Ecuadorean","Egyptian","Emirian","Equatorial Guinean","Eritrean","Estonian","Ethiopian","Fijian","Filipino","Finnish","French","Gabonese","Gambian","Georgian","German","Ghanaian","Greek","Grenadian","Guatemalan","Guinea-Bissauan","Guinean","Guyanese","Haitian","Herzegovinian","Honduran","Hungarian","I-Kiribati","Icelander","Indian","Indonesian","Iranian","Iraqi","Irish","Israeli","Italian","Ivorian","Jamaican","Japanese","Jordanian","Kazakhstani","Kenyan","Kittian and Nevisian","Kuwaiti","Kyrgyz","Laotian","Latvian","Lebanese","Liberian","Libyan","Liechtensteiner","Lithuanian","Luxembourger","Macedonian","Malagasy","Malawian","Malaysian","Maldivan","Malian","Maltese","Marshallese","Mauritanian","Mauritian","Mexican","Micronesian","Moldovan","Monacan","Mongolian","Moroccan","Mosotho","Motswana","Mozambican","Namibian","Nauruan","Nepalese","New Zealander","Nicaraguan","Nigerian","Nigerien","North Korean","Northern Irish","Norwegian","Omani","Pakistani","Palauan","Palestinian","Panamanian","Papua New Guinean","Paraguayan","Peruvian","Polish","Portuguese","Qatari","Romanian","Russian","Rwandan","Saint Lucian","Salvadoran","Samoan","San Marinese","Sao Tomean","Saudi","Scottish","Senegalese","Serbian","Seychellois","Sierra Leonean","Singaporean","Slovakian","Slovenian","Solomon Islander","Somali","South African","South Korean","Spanish","Sri Lankan","Sudanese","Surinamer","Swazi","Swedish","Swiss","Syrian","Taiwanese","Tajik","Tanzanian","Thai","Togolese","Tongan","Trinidadian or Tobagonian","Tunisian","Turkish","Tuvaluan","Ugandan","Ukrainian","Uruguayan","Uzbekistani","Venezuelan","Vietnamese","Welsh","Yemenite","Zambian","Zimbabwean"],yS=a=>{if(!a)return null;const e=new Date,s=new Date(a);let r=e.getFullYear()-s.getFullYear();const n=e.getMonth()-s.getMonth();return(n<0||n===0&&e.getDate()<s.getDate())&&r--,r};function wq(){const a=ka(),[e,s]=C.useState(1),[r,n]=C.useState(!1),[i,o]=C.useState({}),[l,c]=C.useState({isVerifying:!1,isVerified:!1,verificationResults:null,verificationError:null,progress:0}),[u,m]=C.useState({previous_permit_number:"",previous_permit_expiry:"",first_name:"",middle_name:"",last_name:"",suffix:"",contact_no:"",email:"",birthdate:"",gender:"",civil_status:"",nationality:"",tin:"",lot_no:"",blk_no:"",tct_no:"",tax_dec_no:"",street:"",barangay:"",city_municipality:"Caloocan City",province:"Metro Manila",home_address:"",form_of_ownership:"",use_of_permit:"",remarks:"",total_estimated_cost:"",number_of_storeys:"",number_of_units:"",total_floor_area:"",lot_area:"",id_type:"",id_number:"",valid_id_file:null,previous_permit_file:null,signature_file:null,building_plan_file:null}),A=[{id:1,title:"Previous Permit",description:"Existing permit info"},{id:2,title:"Applicant Info",description:"Personal details"},{id:3,title:"Project Site & Building",description:"Location & building details"},{id:4,title:"Uploads",description:"Required documents"},{id:5,title:"Review",description:"Review your application"}],g=V=>{const{name:O,value:X,type:$,files:H}=V.target;if($==="file"){const te=H[0];m(K=>({...K,[O]:te||null})),O==="valid_id_file"&&te&&c({isVerifying:!1,isVerified:!1,verificationResults:null,verificationError:null,progress:0})}else if(O==="contact_no"){const te=X.replace(/[^0-9]/g,"");te.length<=11&&m(K=>({...K,[O]:te}))}else m(te=>({...te,[O]:X}))},p=V=>{if(!V)return null;const O=URL.createObjectURL(V),X=V.type.split("/")[0];o({url:O,type:X,name:V.name})},v=()=>{i.url&&URL.revokeObjectURL(i.url),o({})},b=V=>V.toLowerCase().replace(/[^a-z0-9]/g,""),y=(V,O,X=.5)=>{const $=b(V),H=b(O);if($===H)return 1;if($.includes(H)||H.includes($))return .9;const te=$.length>H.length?$:H,K=$.length>H.length?H:$;if(te.length===0)return 0;let I=0;for(let G=0;G<K.length;G++)te.includes(K[G])&&I++;const R=I/te.length;return R>=X?R:0},w={"Philippine National ID (PhilSys ID)":["philsys","philippine national id","national id","phil id","republic of the philippines","pambansang pagkakakilanlan"],"Passport (DFA)":["passport","dfa","department of foreign affairs"],"Driver's License (LTO)":["driver","license","licence","lto","land transportation"],UMID:["umid","unified multi-purpose id","sss","gsis"],"PRC ID":["prc","professional regulation commission"],"Voter's ID":["voter","comelec","commission on elections"],"Postal ID (PhilPost)":["postal","philpost","philippine postal"],"Senior Citizen ID":["senior citizen","osca"],"PWD ID":["pwd","person with disability"],"SSS ID":["sss","social security system"],"GSIS eCard":["gsis","government service insurance"],"PhilHealth ID":["philhealth","philippine health"],"Pag-IBIG ID":["pag-ibig","pagibig","hdmf"],"TIN ID":["tin","tax identification number","bir"],"Barangay ID":["barangay id","brgy id"],"NBI Clearance":["nbi clearance","national bureau of investigation"],"School ID":["school id","student id"],"Company / Employee ID":["company id","employee id"]},B=V=>{const O=V.toLowerCase(),X=[];for(const[$,H]of Object.entries(w)){let te=0;for(const K of H)O.includes(K.toLowerCase())&&te++;te>0&&X.push({type:$,confidence:te/H.length,matchCount:te})}return X.sort(($,H)=>H.matchCount!==$.matchCount?H.matchCount-$.matchCount:H.confidence-$.confidence),X.length>0?X[0]:null},j=async()=>{if(!u.valid_id_file){c(V=>({...V,verificationError:"Please upload a valid ID first"}));return}if(!u.first_name||!u.last_name||!u.id_number){c(V=>({...V,verificationError:"Please fill in First Name, Last Name, and ID Number before verification"}));return}if(!u.id_type){c(V=>({...V,verificationError:"Please select an ID type before verification"}));return}c({isVerifying:!0,isVerified:!1,verificationResults:null,verificationError:null,progress:0});try{const V=await bA.createWorker("eng",1,{logger:De=>{De.status==="recognizing text"&&c(me=>({...me,progress:Math.round(De.progress*100)}))}});c(De=>({...De,progress:10}));const{data:{text:O}}=await V.recognize(u.valid_id_file);await V.terminate(),c(De=>({...De,progress:90}));const X=O.toLowerCase(),$=y(u.first_name,X),H=y(u.last_name,X);let te=null;if(u.middle_name){const De=y(u.middle_name,X),me=u.middle_name.charAt(0).toLowerCase(),Te=X.includes(me);te=De>0||Te}const K=b(u.id_number),R=b(X).includes(K)||X.includes(K)||y(u.id_number,X)>.8,G=B(O),se=G&&G.type===u.id_type,le={firstName:{matched:$>0,confidence:$,value:u.first_name},lastName:{matched:H>0,confidence:H,value:u.last_name},middleName:u.middle_name?{matched:te===!0||te>0,confidence:te===!0?1:te||0,value:u.middle_name}:null,idNumber:{matched:R,confidence:R?1:0,value:u.id_number},idType:{detected:G?G.type:"Unknown",selected:u.id_type,matched:se,confidence:G?G.confidence:0},extractedText:O},ye=le.firstName.matched&&le.lastName.matched&&le.idNumber.matched&&le.idType.matched&&(!u.middle_name||le.middleName.matched);c({isVerifying:!1,isVerified:ye,verificationResults:le,verificationError:ye?null:"Some information does not match the ID",progress:100})}catch(V){console.error("Verification error:",V),c({isVerifying:!1,isVerified:!1,verificationResults:null,verificationError:"Failed to verify document: "+V.message,progress:0})}},[E,S]=C.useState({}),T=V=>{const O={};return V===1&&((!u.previous_permit_number||u.previous_permit_number.trim()==="")&&(O.previous_permit_number="Previous permit number is required"),u.previous_permit_expiry||(O.previous_permit_expiry="Previous permit expiry date is required")),V===2&&((!u.first_name||u.first_name.trim()==="")&&(O.first_name="First name is required"),(!u.last_name||u.last_name.trim()==="")&&(O.last_name="Last name is required"),!u.contact_no||u.contact_no.trim()===""?O.contact_no="Contact number is required":u.contact_no.startsWith("09")?u.contact_no.length!==11&&(O.contact_no="Contact number must be exactly 11 digits"):O.contact_no="Contact number must start with 09",(!u.email||u.email.trim()==="")&&(O.email="Email is required"),u.birthdate?yS(u.birthdate)<18&&(O.birthdate="You must be at least 18 years old to apply"):O.birthdate="Birth date is required",u.gender||(O.gender="Gender is required"),u.civil_status||(O.civil_status="Civil status is required"),(!u.nationality||u.nationality.trim()==="")&&(O.nationality="Nationality is required")),V===3&&((!u.street||u.street.trim()==="")&&(O.street="Street is required"),(!u.barangay||u.barangay.trim()==="")&&(O.barangay="Barangay is required"),(!u.city_municipality||u.city_municipality.trim()==="")&&(O.city_municipality="City/Municipality is required"),(!u.province||u.province.trim()==="")&&(O.province="Province is required"),(!u.use_of_permit||u.use_of_permit.trim()==="")&&(O.use_of_permit="Use/purpose of permit is required"),(!u.form_of_ownership||u.form_of_ownership.trim()==="")&&(O.form_of_ownership="Form of ownership is required")),V===4&&(u.valid_id_file||(O.valid_id_file="Valid ID is required"),u.signature_file||(O.signature_file="Applicant Signature is required"),u.valid_id_file&&!l.isVerified&&(O.verification_required="You must verify your ID and it must be VALID to proceed")),S(O),Object.keys(O).length===0},M=V=>V===1?!(!u.previous_permit_number||u.previous_permit_number.trim()===""||!u.previous_permit_expiry):V===2?!(!u.first_name||u.first_name.trim()===""||!u.last_name||u.last_name.trim()===""||!u.contact_no||u.contact_no.trim()===""||!u.contact_no.startsWith("09")||u.contact_no.length!==11||!u.email||u.email.trim()===""||!u.birthdate||!u.gender||!u.civil_status||!u.nationality||u.nationality.trim()===""):V===3?!(!u.street||u.street.trim()===""||!u.barangay||u.barangay.trim()===""||!u.city_municipality||u.city_municipality.trim()===""||!u.province||u.province.trim()===""||!u.use_of_permit||u.use_of_permit.trim()===""||!u.form_of_ownership||u.form_of_ownership.trim()===""):V===4?!(!u.valid_id_file||!u.signature_file||!l.isVerified):!0,D=()=>{e<A.length&&T(e)&&(s(e+1),S({}))},P=()=>{e>1&&s(e-1)},Y=async V=>{V.preventDefault(),e<A.length-1?D():e===A.length-1?T(e)&&(s(e+1),S({})):(await dt.fire({title:"Confirm Submission",html:`
          <div class="text-left">
            <p class="mb-3 text-sm">Are you sure you want to submit your building permit renewal application? Please review your information before submitting.</p>
            <div class="p-4 bg-gray-50 rounded-lg border mb-4">
              <p class="text-sm font-semibold mb-2">Declaration:</p>
              <p class="text-sm mb-3">I hereby declare that all information provided is true and correct to the best of my knowledge. I understand that any false information may result in the rejection of my application.</p>
            </div>
          </div>
        `,icon:"question",input:"checkbox",inputValue:0,inputPlaceholder:"I agree to the above declaration",confirmButtonText:"Confirm & Submit",confirmButtonColor:pt.success,cancelButtonText:"Cancel",cancelButtonColor:pt.danger,showCancelButton:!0,inputValidator:X=>!X&&"You must agree to the declaration!",customClass:{popup:"text-left",htmlContainer:"text-left"}})).isConfirmed&&await ae()},Q=async V=>{await dt.fire({title:"Success!",html:`
        <div class="text-center">
          <p class="mb-3">${V}</p>
          <p class="text-xs text-gray-500">You will be redirected...</p>
        </div>
      `,icon:"success",confirmButtonText:"Track Application",confirmButtonColor:pt.success,timer:3e3,timerProgressBar:!0}).then(O=>{(O.isConfirmed||O.dismiss===dt.DismissReason.timer)&&a("/user/permittracker")})},L=async V=>{await dt.fire({title:"Error",html:`
        <div class="text-center">
          <p class="mb-3">${V}</p>
          <p class="text-xs text-gray-500">Please check your information and try again.</p>
        </div>
      `,icon:"error",confirmButtonText:"Close",confirmButtonColor:pt.danger})},ae=async()=>{n(!0),dt.fire({title:"Submitting...",html:"<p>Please wait while we process your renewal application.</p>",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>dt.showLoading()});const V=T(1),O=T(2),X=T(3),$=T(4);if(!(V&&O&&X&&$)){n(!1),dt.close(),s(V?O?X?4:3:2:1);return}try{const H=new FormData;Object.entries({user_id:localStorage.getItem("user_id")||localStorage.getItem("goserveph_user_id")||"0",permit_action:"RENEWAL",permit_group:"",previous_permit_number:u.previous_permit_number,previous_permit_expiry:u.previous_permit_expiry,first_name:u.first_name,middle_initial:u.middle_name||"",last_name:u.last_name,suffix:u.suffix||"",tin:u.tin||"",contact_no:u.contact_no,email:u.email,citizenship:u.nationality,home_address:u.home_address||"",form_of_ownership:u.form_of_ownership,use_of_permit:u.use_of_permit,prc_license:"",remarks:[u.previous_permit_number?`Previous Permit: ${u.previous_permit_number}`:"",u.previous_permit_expiry?`Prev. Permit Expiry: ${u.previous_permit_expiry}`:"",u.id_type?`ID Type: ${u.id_type}`:"",u.id_number?`ID Number: ${u.id_number}`:"",u.remarks||""].filter(Boolean).join(" | "),proposed_date_of_construction:"",expected_date_of_completion:"",total_estimated_cost:u.total_estimated_cost||"0",lot_no:u.lot_no||"",blk_no:u.blk_no||"",tct_no:u.tct_no||"",tax_dec_no:u.tax_dec_no||"",street:u.street,barangay:u.barangay,city_municipality:u.city_municipality,province:u.province,number_of_units:u.number_of_units||"0",number_of_storeys:u.number_of_storeys||"0",total_floor_area:u.total_floor_area||"0",lot_area:u.lot_area||"0",building_cost:"0",electrical_cost:"0",mechanical_cost:"0",electronics_cost:"0",plumbing_cost:"0",other_cost:"0",equipment_cost:"0",proposed_start:"",expected_completion:"",id_type:u.id_type||"",id_number:u.id_number||""}).forEach(([G,se])=>{H.append(G,se)}),["valid_id_file","previous_permit_file","signature_file","building_plan_file"].forEach(G=>{u[G]instanceof File&&H.append(G,u[G])}),u.signature_file instanceof File&&H.append("signature",u.signature_file);const K=await fetch("/backend/building_permit/building_permit.php",{method:"POST",body:H});if(!K.ok)throw new Error(`HTTP error! status: ${K.status}`);const I=K.clone();let R;try{R=await K.json()}catch{const G=await I.text();throw console.error("Raw server response:",G),new Error("Server did not return valid JSON")}if(R.success){try{ql("Building Permit",R.application_id||R.data?.application_id||"",{permit_type:"Renewal"})}catch(G){console.warn("Activity log failed:",G)}await Q(R.message||"Renewal application submitted successfully!")}else await L(R.message||"Failed to submit application.")}catch(H){console.error("Submission error:",H),await L("Network error: "+H.message)}finally{n(!1)}},ne=()=>{switch(e){case 1:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:pt.secondary},children:"Previous Permit Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Previous Permit Number *"}),t.jsx("input",{type:"text",name:"previous_permit_number",value:u.previous_permit_number,onChange:g,placeholder:"e.g. BP-2024-XXXXX",className:`w-full p-3 border border-black rounded-lg ${E.previous_permit_number?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font}}),E.previous_permit_number&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.previous_permit_number})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Previous Permit Expiry Date *"}),t.jsx("input",{type:"date",name:"previous_permit_expiry",value:u.previous_permit_expiry,onChange:g,className:`w-full p-3 border border-black rounded-lg ${E.previous_permit_expiry?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font}}),E.previous_permit_expiry&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.previous_permit_expiry})]})]})]});case 2:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:pt.secondary},children:"Applicant Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"First Name *"}),t.jsx("input",{type:"text",name:"first_name",value:u.first_name,onChange:g,placeholder:"First Name",className:`w-full p-3 border border-black rounded-lg ${E.first_name?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font}}),E.first_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.first_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Middle Name"}),t.jsx("input",{type:"text",name:"middle_name",value:u.middle_name,onChange:g,placeholder:"Middle Name",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Last Name *"}),t.jsx("input",{type:"text",name:"last_name",value:u.last_name,onChange:g,placeholder:"Last Name",className:`w-full p-3 border border-black rounded-lg ${E.last_name?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font}}),E.last_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.last_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Suffix"}),t.jsx("input",{type:"text",name:"suffix",value:u.suffix,onChange:g,placeholder:"Jr., Sr., III, etc.",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Contact Number *"}),t.jsx("input",{type:"text",name:"contact_no",value:u.contact_no,onChange:g,placeholder:"09XXXXXXXXX",className:`w-full p-3 border border-black rounded-lg ${E.contact_no?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font}}),E.contact_no&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.contact_no})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Email *"}),t.jsx("input",{type:"email",name:"email",value:u.email,onChange:g,placeholder:"Email Address",className:`w-full p-3 border border-black rounded-lg ${E.email?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font}}),E.email&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Birth Date *"}),t.jsx("input",{type:"date",name:"birthdate",value:u.birthdate,onChange:g,max:new Date(new Date().setFullYear(new Date().getFullYear()-18)).toISOString().split("T")[0],className:`w-full p-3 border border-black rounded-lg ${E.birthdate?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font}}),u.birthdate&&yS(u.birthdate)<18&&t.jsx("p",{className:"text-red-600 text-sm mt-1 font-semibold",style:{fontFamily:pt.font},children:"You must be at least 18 years old to apply."}),E.birthdate&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.birthdate})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Gender *"}),t.jsxs("select",{name:"gender",value:u.gender,onChange:g,className:`w-full p-3 border border-black rounded-lg ${E.gender?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font},children:[t.jsx("option",{value:"",children:"Select gender"}),t.jsx("option",{value:"Male",children:"Male"}),t.jsx("option",{value:"Female",children:"Female"}),t.jsx("option",{value:"Other",children:"Other"})]}),E.gender&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.gender})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Civil Status *"}),t.jsxs("select",{name:"civil_status",value:u.civil_status,onChange:g,className:`w-full p-3 border border-black rounded-lg ${E.civil_status?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font},children:[t.jsx("option",{value:"",children:"Select civil status"}),t.jsx("option",{value:"Single",children:"Single"}),t.jsx("option",{value:"Married",children:"Married"}),t.jsx("option",{value:"Widowed",children:"Widowed"}),t.jsx("option",{value:"Separated",children:"Separated"})]}),E.civil_status&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.civil_status})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Nationality *"}),t.jsxs("select",{name:"nationality",value:u.nationality,onChange:g,className:`w-full p-3 border border-black rounded-lg ${E.nationality?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font},children:[t.jsx("option",{value:"",children:"Select nationality"}),vq.map(V=>t.jsx("option",{value:V,children:V},V))]}),E.nationality&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.nationality})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"TIN"}),t.jsx("input",{type:"text",name:"tin",value:u.tin,onChange:g,placeholder:"Tax Identification Number",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Home Address"}),t.jsx("input",{type:"text",name:"home_address",value:u.home_address,onChange:g,placeholder:"Home Address",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]})]})]});case 3:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:pt.secondary},children:"Project Site & Building Information"}),t.jsx("h4",{className:"text-lg font-semibold",style:{color:pt.primary},children:"Project Site Location"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Lot No."}),t.jsx("input",{type:"text",name:"lot_no",value:u.lot_no,onChange:g,placeholder:"Lot No.",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Block No."}),t.jsx("input",{type:"text",name:"blk_no",value:u.blk_no,onChange:g,placeholder:"Block No.",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"TCT No."}),t.jsx("input",{type:"text",name:"tct_no",value:u.tct_no,onChange:g,placeholder:"TCT No.",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Tax Dec. No."}),t.jsx("input",{type:"text",name:"tax_dec_no",value:u.tax_dec_no,onChange:g,placeholder:"Tax Declaration No.",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Street *"}),t.jsx("input",{type:"text",name:"street",value:u.street,onChange:g,placeholder:"Street",className:`w-full p-3 border border-black rounded-lg ${E.street?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font}}),E.street&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.street})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Barangay *"}),t.jsx("input",{type:"text",name:"barangay",value:u.barangay,onChange:g,placeholder:"Barangay",className:`w-full p-3 border border-black rounded-lg ${E.barangay?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font}}),E.barangay&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.barangay})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"City/Municipality *"}),t.jsx("input",{type:"text",name:"city_municipality",value:u.city_municipality,onChange:g,placeholder:"City/Municipality",className:`w-full p-3 border border-black rounded-lg ${E.city_municipality?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font}}),E.city_municipality&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.city_municipality})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Province *"}),t.jsx("input",{type:"text",name:"province",value:u.province,onChange:g,placeholder:"Province",className:`w-full p-3 border border-black rounded-lg ${E.province?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font}}),E.province&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.province})]})]}),t.jsx("h4",{className:"text-lg font-semibold mt-6",style:{color:pt.primary},children:"Building Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Use/Purpose of Permit *"}),t.jsxs("select",{name:"use_of_permit",value:u.use_of_permit,onChange:g,className:`w-full p-3 border border-black rounded-lg ${E.use_of_permit?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font},children:[t.jsx("option",{value:"",children:"Select purpose"}),t.jsx("option",{value:"Renewal of Building Permit",children:"Renewal of Building Permit"}),t.jsx("option",{value:"Renovation / Alteration",children:"Renovation / Alteration"}),t.jsx("option",{value:"Addition / Extension",children:"Addition / Extension"}),t.jsx("option",{value:"Change of Use / Occupancy",children:"Change of Use / Occupancy"}),t.jsx("option",{value:"Repair",children:"Repair"})]}),E.use_of_permit&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.use_of_permit})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Form of Ownership *"}),t.jsxs("select",{name:"form_of_ownership",value:u.form_of_ownership,onChange:g,className:`w-full p-3 border border-black rounded-lg ${E.form_of_ownership?"border-red-500":""}`,style:{color:pt.secondary,fontFamily:pt.font},children:[t.jsx("option",{value:"",children:"Select ownership"}),t.jsx("option",{value:"Individual",children:"Individual"}),t.jsx("option",{value:"Corporation",children:"Corporation"}),t.jsx("option",{value:"Partnership",children:"Partnership"}),t.jsx("option",{value:"Cooperative",children:"Cooperative"}),t.jsx("option",{value:"Others",children:"Others"})]}),E.form_of_ownership&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.form_of_ownership})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"No. of Storeys"}),t.jsx("input",{type:"number",name:"number_of_storeys",value:u.number_of_storeys,onChange:g,placeholder:"Number of Storeys",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"No. of Units"}),t.jsx("input",{type:"number",name:"number_of_units",value:u.number_of_units,onChange:g,placeholder:"Number of Units",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Total Floor Area (sqm)"}),t.jsx("input",{type:"number",name:"total_floor_area",value:u.total_floor_area,onChange:g,placeholder:"Total Floor Area",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Lot Area (sqm)"}),t.jsx("input",{type:"number",name:"lot_area",value:u.lot_area,onChange:g,placeholder:"Lot Area",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Total Estimated Cost"}),t.jsx("input",{type:"number",name:"total_estimated_cost",value:u.total_estimated_cost,onChange:g,placeholder:"Total Estimated Cost",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Valid ID Type *"}),t.jsxs("select",{name:"id_type",value:u.id_type,onChange:g,className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font},children:[t.jsx("option",{value:"",children:"Select ID type"}),t.jsxs("optgroup",{label:"Primary Government IDs",children:[t.jsx("option",{value:"Philippine National ID (PhilSys ID)",children:"Philippine National ID (PhilSys ID)"}),t.jsx("option",{value:"Passport (DFA)",children:"Passport (DFA)"}),t.jsx("option",{value:"Driver's License (LTO)",children:"Driver's License (LTO)"}),t.jsx("option",{value:"UMID",children:"UMID (SSS / GSIS)"}),t.jsx("option",{value:"PRC ID",children:"PRC ID"}),t.jsx("option",{value:"Voter's ID",children:"Voter's ID"}),t.jsx("option",{value:"Postal ID (PhilPost)",children:"Postal ID (PhilPost)"}),t.jsx("option",{value:"Senior Citizen ID",children:"Senior Citizen ID"}),t.jsx("option",{value:"PWD ID",children:"PWD ID"})]}),t.jsxs("optgroup",{label:"Secondary Government IDs",children:[t.jsx("option",{value:"SSS ID",children:"SSS ID"}),t.jsx("option",{value:"GSIS eCard",children:"GSIS eCard"}),t.jsx("option",{value:"PhilHealth ID",children:"PhilHealth ID"}),t.jsx("option",{value:"Pag-IBIG ID",children:"Pag-IBIG ID"}),t.jsx("option",{value:"TIN ID",children:"TIN ID"}),t.jsx("option",{value:"Barangay ID",children:"Barangay ID"}),t.jsx("option",{value:"NBI Clearance",children:"NBI Clearance"})]}),t.jsxs("optgroup",{label:"Other IDs",children:[t.jsx("option",{value:"School ID",children:"School ID"}),t.jsx("option",{value:"Company / Employee ID",children:"Company / Employee ID"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Valid ID Number"}),t.jsx("input",{type:"text",name:"id_number",value:u.id_number,onChange:g,placeholder:"ID Number",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:pt.secondary},children:"Remarks / Description"}),t.jsx("textarea",{name:"remarks",value:u.remarks,onChange:g,rows:"3",placeholder:"Additional remarks or building description",className:"w-full p-3 border border-black rounded-lg",style:{color:pt.secondary,fontFamily:pt.font}})]})]})]});case 4:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:pt.secondary},children:"Required Documents"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:pt.secondary},children:"Valid ID (Government-issued) *"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"valid_id_file",onChange:g,accept:"image/*",className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:pt.font}})]}),E.valid_id_file&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.valid_id_file}),u.valid_id_file&&t.jsxs("div",{className:"mt-4 p-4 border border-blue-200 rounded-lg bg-blue-50",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Pr,{className:"w-5 h-5 text-blue-600"}),t.jsx("h4",{className:"font-semibold text-blue-900",style:{fontFamily:pt.font},children:"AI Document Verification"})]}),!l.isVerifying&&!l.isVerified&&t.jsxs("button",{type:"button",onClick:j,disabled:!u.first_name||!u.last_name||!u.id_number||!u.id_type,className:"px-4 py-2 rounded-lg font-medium text-white transition-colors duration-300 flex items-center gap-2",style:{background:!u.first_name||!u.last_name||!u.id_number||!u.id_type?"#9CA3AF":pt.primary,cursor:!u.first_name||!u.last_name||!u.id_number||!u.id_type?"not-allowed":"pointer"},onMouseEnter:V=>{u.first_name&&u.last_name&&u.id_number&&u.id_type&&(V.currentTarget.style.background=pt.accent)},onMouseLeave:V=>{u.first_name&&u.last_name&&u.id_number&&u.id_type&&(V.currentTarget.style.background=pt.primary)},children:[t.jsx(Pr,{className:"w-4 h-4"}),"Verify ID"]})]}),l.isVerifying&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Or,{className:"w-5 h-5 text-blue-600 animate-spin"}),t.jsxs("p",{className:"text-sm text-blue-800",style:{fontFamily:pt.font},children:["Verifying document... ",l.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${l.progress}%`}})})]}),l.verificationError&&!l.isVerifying&&t.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx(Ks,{className:"w-5 h-5 text-red-600 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-red-800",style:{fontFamily:pt.font},children:"Verification Failed"}),t.jsx("p",{className:"text-xs text-red-600 mt-1",style:{fontFamily:pt.font},children:l.verificationError})]})]}),l.verificationResults&&!l.isVerifying&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:`p-4 rounded-lg border-2 ${l.isVerified?"bg-green-50 border-green-500":"bg-red-50 border-red-500"}`,children:[t.jsx("div",{className:"flex items-center gap-3 mb-3",children:l.isVerified?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center",children:t.jsx(Ht,{className:"w-7 h-7 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xl font-bold text-green-800",style:{fontFamily:pt.font},children:"VALID"}),t.jsx("p",{className:"text-sm text-green-700",style:{fontFamily:pt.font},children:"ID verification successful"})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500 flex items-center justify-center",children:t.jsx(ls,{className:"w-7 h-7 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xl font-bold text-red-800",style:{fontFamily:pt.font},children:"INVALID"}),t.jsx("p",{className:"text-sm text-red-700",style:{fontFamily:pt.font},children:"Information does not match ID"})]})]})}),t.jsxs("div",{className:"border-t pt-3 space-y-1 text-xs",style:{fontFamily:pt.font,borderColor:l.isVerified?"#22c55e":"#ef4444"},children:[t.jsx("p",{className:"font-semibold mb-2",style:{color:l.isVerified?"#166534":"#991b1b"},children:"Verification Details:"}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"ID Type:"}),t.jsxs("div",{className:"text-[10px] mt-0.5",children:[t.jsxs("div",{children:["Selected: ",l.verificationResults.idType.selected]}),t.jsxs("div",{children:["Detected: ",l.verificationResults.idType.detected]})]})]}),l.verificationResults.idType.matched?t.jsx(Ht,{className:"w-4 h-4 text-green-600"}):t.jsx(ls,{className:"w-4 h-4 text-red-600"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{children:["First Name: ",l.verificationResults.firstName.value]}),l.verificationResults.firstName.matched?t.jsx(Ht,{className:"w-4 h-4 text-green-600"}):t.jsx(ls,{className:"w-4 h-4 text-red-600"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{children:["Last Name: ",l.verificationResults.lastName.value]}),l.verificationResults.lastName.matched?t.jsx(Ht,{className:"w-4 h-4 text-green-600"}):t.jsx(ls,{className:"w-4 h-4 text-red-600"})]}),l.verificationResults.middleName&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{children:["Middle Name: ",l.verificationResults.middleName.value]}),l.verificationResults.middleName.matched?t.jsx(Ht,{className:"w-4 h-4 text-green-600"}):t.jsx(ls,{className:"w-4 h-4 text-red-600"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{children:["ID Number: ",l.verificationResults.idNumber.value]}),l.verificationResults.idNumber.matched?t.jsx(Ht,{className:"w-4 h-4 text-green-600"}):t.jsx(ls,{className:"w-4 h-4 text-red-600"})]})]}),!l.isVerified&&t.jsxs("div",{className:"mt-3 p-2 bg-red-100 rounded border border-red-300",children:[t.jsx("p",{className:"text-xs text-red-800 font-medium",style:{fontFamily:pt.font},children:"You cannot proceed until your ID is verified as VALID. Issues found:"}),t.jsxs("ul",{className:"text-xs text-red-700 mt-1 ml-4 list-disc",style:{fontFamily:pt.font},children:[!l.verificationResults.idType.matched&&t.jsxs("li",{className:"font-semibold",children:['ID Type Mismatch: You selected "',l.verificationResults.idType.selected,'" but the system detected "',l.verificationResults.idType.detected,'".']}),!l.verificationResults.firstName.matched&&t.jsx("li",{children:"First Name does not match the ID"}),!l.verificationResults.lastName.matched&&t.jsx("li",{children:"Last Name does not match the ID"}),l.verificationResults.middleName&&!l.verificationResults.middleName.matched&&t.jsx("li",{children:"Middle Name does not match the ID"}),!l.verificationResults.idNumber.matched&&t.jsx("li",{children:"ID Number does not match the ID"}),t.jsx("li",{className:"mt-1",children:"Ensure your ID image is clear and readable"}),t.jsx("li",{children:"Verify the information you entered exactly matches your ID"})]})]})]}),t.jsx("button",{type:"button",onClick:j,className:"text-xs text-blue-600 hover:text-blue-800 underline font-medium",style:{fontFamily:pt.font},children:"Re-verify Document"})]})]}),E.verification_required&&t.jsxs("div",{className:"mt-2 flex items-start gap-2 p-3 bg-red-50 border-2 border-red-500 rounded-lg",children:[t.jsx(Ks,{className:"w-5 h-5 text-red-600 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-bold text-red-800",style:{fontFamily:pt.font},children:"Verification Required"}),t.jsx("p",{className:"text-xs text-red-700 mt-1",style:{fontFamily:pt.font},children:E.verification_required})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:pt.secondary},children:"Previous Permit Copy"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"previous_permit_file",onChange:g,className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:pt.font}})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:pt.secondary},children:"Building Plan / Blueprint"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"building_plan_file",onChange:g,className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:pt.font}})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:pt.secondary},children:"Applicant's Signature *"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"signature_file",onChange:g,className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:pt.font}})]}),E.signature_file&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:pt.font},children:E.signature_file})]})]})]});case 5:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:pt.secondary},children:"Review Your Application"}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:pt.primary},children:"Previous Permit Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",style:{fontFamily:pt.font},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Permit Number:"}),t.jsx("span",{className:"flex-1",children:u.previous_permit_number})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Permit Expiry:"}),t.jsx("span",{className:"flex-1",children:u.previous_permit_expiry})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:pt.primary},children:"Applicant Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",style:{fontFamily:pt.font},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"First Name:"}),t.jsx("span",{className:"flex-1",children:u.first_name})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Middle Name:"}),t.jsx("span",{className:"flex-1",children:u.middle_name||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Last Name:"}),t.jsx("span",{className:"flex-1",children:u.last_name})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Suffix:"}),t.jsx("span",{className:"flex-1",children:u.suffix||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Contact Number:"}),t.jsx("span",{className:"flex-1",children:u.contact_no})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Email:"}),t.jsx("span",{className:"flex-1",children:u.email})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Birth Date:"}),t.jsx("span",{className:"flex-1",children:u.birthdate})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Gender:"}),t.jsx("span",{className:"flex-1",children:u.gender})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Civil Status:"}),t.jsx("span",{className:"flex-1",children:u.civil_status})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Nationality:"}),t.jsx("span",{className:"flex-1",children:u.nationality})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"TIN:"}),t.jsx("span",{className:"flex-1",children:u.tin||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Home Address:"}),t.jsx("span",{className:"flex-1",children:u.home_address||"N/A"})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:pt.primary},children:"Project Site"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",style:{fontFamily:pt.font},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Lot No.:"}),t.jsx("span",{className:"flex-1",children:u.lot_no||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Block No.:"}),t.jsx("span",{className:"flex-1",children:u.blk_no||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"TCT No.:"}),t.jsx("span",{className:"flex-1",children:u.tct_no||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Tax Dec. No.:"}),t.jsx("span",{className:"flex-1",children:u.tax_dec_no||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Street:"}),t.jsx("span",{className:"flex-1",children:u.street})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Barangay:"}),t.jsx("span",{className:"flex-1",children:u.barangay})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"City/Municipality:"}),t.jsx("span",{className:"flex-1",children:u.city_municipality})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Province:"}),t.jsx("span",{className:"flex-1",children:u.province})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:pt.primary},children:"Building Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",style:{fontFamily:pt.font},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Use/Purpose:"}),t.jsx("span",{className:"flex-1",children:u.use_of_permit})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Ownership:"}),t.jsx("span",{className:"flex-1",children:u.form_of_ownership})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"No. of Storeys:"}),t.jsx("span",{className:"flex-1",children:u.number_of_storeys||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"No. of Units:"}),t.jsx("span",{className:"flex-1",children:u.number_of_units||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Total Floor Area:"}),t.jsx("span",{className:"flex-1",children:u.total_floor_area?`${u.total_floor_area} sqm`:"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Lot Area:"}),t.jsx("span",{className:"flex-1",children:u.lot_area?`${u.lot_area} sqm`:"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Estimated Cost:"}),t.jsx("span",{className:"flex-1",children:u.total_estimated_cost?`PHP ${u.total_estimated_cost}`:"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"ID Type:"}),t.jsx("span",{className:"flex-1",children:u.id_type||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"ID Number:"}),t.jsx("span",{className:"flex-1",children:u.id_number||"N/A"})]}),t.jsxs("div",{className:"flex items-center md:col-span-2",children:[t.jsx("span",{className:"font-medium w-40",children:"Remarks:"}),t.jsx("span",{className:"flex-1",children:u.remarks||"N/A"})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:pt.primary},children:"Uploaded Documents"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center",children:[u.valid_id_file?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Valid ID:"}),t.jsx("p",{className:"text-sm text-gray-600",children:u.valid_id_file?u.valid_id_file.name:"Not uploaded"})]})]}),u.valid_id_file&&t.jsxs("button",{type:"button",onClick:()=>p(u.valid_id_file),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:pt.secondary},children:[t.jsx(ws,{className:"w-4 h-4"})," Preview"]})]}),u.valid_id_file&&t.jsx("div",{className:"mt-2",children:l.isVerified?t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-50 border-2 border-green-500 rounded",children:[t.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 flex items-center justify-center",children:t.jsx(Ht,{className:"w-4 h-4 text-white"})}),t.jsx("span",{className:"text-sm text-green-800 font-bold",style:{fontFamily:pt.font},children:"VALID - AI Verified"})]}):l.verificationResults?t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border-2 border-red-500 rounded",children:[t.jsx("div",{className:"w-6 h-6 rounded-full bg-red-500 flex items-center justify-center",children:t.jsx(ls,{className:"w-4 h-4 text-white"})}),t.jsx("span",{className:"text-sm text-red-800 font-bold",style:{fontFamily:pt.font},children:"INVALID - Information does not match"})]}):t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border-2 border-red-500 rounded",children:[t.jsx(Ks,{className:"w-5 h-5 text-red-600"}),t.jsx("span",{className:"text-sm text-red-800 font-bold",style:{fontFamily:pt.font},children:"NOT VERIFIED - Go back to step 4 to verify"})]})})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[u.previous_permit_file?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-gray-400 mr-3"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Previous Permit Copy:"}),t.jsx("p",{className:"text-sm text-gray-600",children:u.previous_permit_file?u.previous_permit_file.name:"Optional"})]})]}),u.previous_permit_file&&t.jsxs("button",{type:"button",onClick:()=>p(u.previous_permit_file),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:pt.secondary},children:[t.jsx(ws,{className:"w-4 h-4"})," Preview"]})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[u.building_plan_file?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-gray-400 mr-3"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Building Plan / Blueprint:"}),t.jsx("p",{className:"text-sm text-gray-600",children:u.building_plan_file?u.building_plan_file.name:"Optional"})]})]}),u.building_plan_file&&t.jsxs("button",{type:"button",onClick:()=>p(u.building_plan_file),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:pt.secondary},children:[t.jsx(ws,{className:"w-4 h-4"})," Preview"]})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[u.signature_file?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Signature:"}),t.jsx("p",{className:"text-sm text-gray-600",children:u.signature_file?u.signature_file.name:"Not uploaded"})]})]}),u.signature_file&&t.jsxs("button",{type:"button",onClick:()=>p(u.signature_file),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:pt.secondary},children:[t.jsx(ws,{className:"w-4 h-4"})," Preview"]})]})]})]})]})})]});default:return null}};return t.jsxs("div",{className:"mx-1 mt-1 p-6 rounded-lg min-h-screen",style:{background:pt.background,color:pt.secondary,fontFamily:pt.font},children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold",style:{color:pt.primary},children:"BUILDING PERMIT RENEWAL"}),t.jsx("p",{className:"mt-2",style:{color:pt.secondary},children:"Renew your existing building permit. Please provide your previous permit details and updated information."})]}),t.jsx("button",{onClick:()=>a("/user/building/type"),onMouseEnter:V=>V.currentTarget.style.background=pt.accent,onMouseLeave:V=>V.currentTarget.style.background=pt.success,style:{background:pt.success},className:"px-4 py-2 rounded-lg font-medium text-white hover:bg-[#FDA811] transition-colors duration-300",children:"Change Type"})]}),t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"flex items-center justify-between",children:A.map((V,O)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`flex items-center justify-center rounded-full border-2 font-semibold transition-all duration-300 ${e>=V.id?"text-white":"text-gray-500"}`,style:{background:e>=V.id?pt.success:"transparent",borderColor:e>=V.id?pt.success:"#9CA3AF",width:"45px",height:"30px",borderRadius:"20px",fontFamily:pt.font},children:V.id}),t.jsxs("div",{className:"ml-3 hidden md:block",children:[t.jsx("p",{className:"text-sm font-medium",style:{color:e>=V.id?pt.success:pt.secondary,fontFamily:pt.font},children:V.title}),t.jsx("p",{className:"text-xs",style:{color:pt.secondary,fontFamily:pt.font},children:V.description})]}),O<A.length-1&&t.jsx("div",{className:"hidden md:block w-16 h-0.5 mx-4",style:{background:e>V.id?pt.success:"#9CA3AF"}})]},V.id))})}),t.jsxs("form",{onSubmit:Y,className:"space-y-8",children:[ne(),t.jsxs("div",{className:"flex justify-between pt-6",children:[e>1&&t.jsx("button",{type:"button",onClick:P,onMouseEnter:V=>V.currentTarget.style.background=pt.accent,onMouseLeave:V=>V.currentTarget.style.background=pt.success,style:{background:pt.success},className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:"Previous"}),e<A.length?t.jsx("button",{type:"submit",disabled:!M(e),style:{background:M(e)?pt.success:"#9CA3AF"},onMouseEnter:V=>{M(e)&&(V.currentTarget.style.background=pt.accent)},onMouseLeave:V=>{M(e)&&(V.currentTarget.style.background=pt.success)},className:`px-6 py-3 rounded-lg font-semibold text-white ${M(e)?"transition-colors duration-300":"cursor-not-allowed"}`,children:e===A.length-1?"Review Application":"Next"}):t.jsx("button",{type:"submit",disabled:r,onMouseEnter:V=>V.currentTarget.style.background=pt.accent,onMouseLeave:V=>V.currentTarget.style.background=pt.success,style:{background:pt.success},className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:r?"Submitting...":"Submit Renewal"})]})]}),i.url&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"rounded-lg shadow-lg w-full max-w-4xl border border-gray-200 overflow-hidden",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:pt.font,backdropFilter:"blur(10px)",maxHeight:"90vh"},children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold",style:{color:pt.primary},children:"Preview Document"}),t.jsx("button",{onClick:v,className:"text-gray-500 hover:text-gray-700 transition-colors duration-300",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 overflow-auto",style:{maxHeight:"calc(90vh - 80px)"},children:[t.jsxs("p",{className:"text-sm mb-4",style:{color:pt.secondary,fontFamily:pt.font},children:["File: ",t.jsx("span",{className:"font-medium",children:i.name})]}),t.jsx("div",{className:"bg-white rounded-lg border p-4",children:i.type==="image"?t.jsx("div",{className:"flex justify-center",children:t.jsx("img",{src:i.url,alt:"Preview",className:"max-w-full h-auto max-h-[500px]"})}):i.type==="application"&&i.name?.includes(".pdf")?t.jsx("iframe",{src:i.url,className:"w-full h-[500px] rounded",title:"PDF Preview"}):t.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[t.jsx(Kt,{className:"w-24 h-24 text-gray-400 mb-4"}),t.jsxs("p",{className:"text-gray-600 mb-2",children:["File: ",i.name]}),t.jsx("p",{className:"text-gray-500 mb-6",children:"Preview not available for this file type"}),t.jsx("a",{href:i.url,download:i.name,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors duration-300",children:"Download File"})]})}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsx("button",{onClick:v,style:{background:pt.success},onMouseEnter:V=>V.currentTarget.style.background=pt.accent,onMouseLeave:V=>V.currentTarget.style.background=pt.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close Preview"})})]})]})})]})}const ps={primary:"#4A90E2",secondary:"#000000",accent:"#FDA811",success:"#4CAF50",danger:"#E53935",background:"#FBFBFB",font:"Montserrat, Arial, sans-serif"},Nq="/backend/building_permit/ancillary_permit.php",jq="/backend/barangay_permit/admin_fetch.php",_q="/backend/building_permit/professional_registration.php",La={color:"#000000",fontFamily:"Montserrat, Arial, sans-serif"},Fo="p-3 border border-black rounded-lg w-full",Cq=[{id:"demolition",title:"Demolition Permit",icon:v8,color:"#F44336",description:"Required for partial or complete demolition of buildings or structures.",fields:[{name:"structure_type",label:"Structure Type",type:"select",options:["Residential","Commercial","Industrial","Mixed-Use","Others"],required:!0},{name:"demolition_method",label:"Demolition Method",type:"select",options:["Manual","Mechanical","Implosion","Selective","Others"],required:!0},{name:"debris_disposal_plan",label:"Debris Disposal Plan",type:"textarea",placeholder:"Describe how debris will be disposed...",required:!0},{name:"estimated_volume",label:"Estimated Volume (cubic meters)",type:"number",placeholder:"e.g. 500",required:!0}]},{id:"electrical",title:"Electrical Permit",icon:nA,color:"#FFC107",description:"Mandatory for electrical installations, repairs, or modifications.",fields:[{name:"total_connected_load",label:"Total Connected Load (kW)",type:"number",placeholder:"e.g. 50",required:!0},{name:"total_transformer_capacity",label:"Total Transformer Capacity (kVA)",type:"number",placeholder:"e.g. 100",required:!0},{name:"contractor_name",label:"Contractor Name",type:"text",placeholder:"Enter contractor name",required:!1},{name:"scope_of_work",label:"Scope of Electrical Work",type:"textarea",placeholder:"Describe the electrical work scope...",required:!0}]},{id:"electronics",title:"Electronics Permit",icon:G8,color:"#607D8B",description:"Required for electronic systems including communication, security, and automation.",fields:[{name:"system_type",label:"System Type",type:"select",options:["Communication","Security/CCTV","Fire Alarm","Automation","Network/IT","Others"],required:!0},{name:"equipment_specifications",label:"Equipment Specifications",type:"textarea",placeholder:"List equipment specs, brands, models...",required:!0},{name:"communication_type",label:"Communication Type",type:"text",placeholder:"e.g. Fiber Optic, WiFi",required:!1}]},{id:"excavation",title:"Excavation Permit",icon:N8,color:"#795548",description:"Required for digging, trenching, or earth-moving activities.",fields:[{name:"excavation_depth",label:"Excavation Depth (meters)",type:"number",placeholder:"e.g. 3",required:!0},{name:"excavation_area",label:"Excavation Area (sq. meters)",type:"number",placeholder:"e.g. 200",required:!0},{name:"soil_type",label:"Soil Type",type:"select",options:["Clay","Sandy","Rocky","Loam","Gravel","Mixed"],required:!0},{name:"purpose_of_excavation",label:"Purpose of Excavation",type:"textarea",placeholder:"Describe the purpose...",required:!0},{name:"shoring_method",label:"Shoring Method",type:"select",options:["Sheet Piling","Soldier Pile","Bracing","Anchored","None Required"],required:!0}]},{id:"fencing",title:"Fencing Permit",icon:KU,color:"#4CAF50",description:"Required for construction of perimeter fences, walls, or boundary enclosures.",fields:[{name:"fence_type",label:"Fence Type",type:"select",options:["Concrete Block","Metal/Steel","Wood","Chain Link","Combination","Others"],required:!0},{name:"fence_height",label:"Fence Height (meters)",type:"number",placeholder:"e.g. 2.5",required:!0},{name:"fence_length",label:"Total Fence Length (meters)",type:"number",placeholder:"e.g. 100",required:!0},{name:"fence_material",label:"Primary Material",type:"text",placeholder:"e.g. CHB, Steel Bars",required:!0}]},{id:"mechanical",title:"Mechanical Permit",icon:rQ,color:"#9C27B0",description:"Required for HVAC, ventilation, and mechanical installations.",fields:[{name:"equipment_type",label:"Equipment Type",type:"select",options:["HVAC System","Elevator/Escalator","Boiler","Pressure Vessel","Generator","Others"],required:!0},{name:"capacity_rating",label:"Capacity / Rating",type:"text",placeholder:"e.g. 5 TR, 100 HP",required:!0},{name:"equipment_brand",label:"Equipment Brand / Model",type:"text",placeholder:"Enter brand and model",required:!1},{name:"scope_of_work",label:"Scope of Mechanical Work",type:"textarea",placeholder:"Describe the mechanical work scope...",required:!0}]},{id:"occupancy",title:"Occupancy Permit",icon:rn,color:"#E91E63",description:"Required before occupying a building to certify it meets safety standards.",fields:[{name:"building_use",label:"Building Use / Purpose",type:"select",options:["Residential","Commercial","Industrial","Institutional","Mixed-Use","Others"],required:!0},{name:"number_of_occupants",label:"Expected Number of Occupants",type:"number",placeholder:"e.g. 50",required:!0},{name:"fire_safety_clearance",label:"Fire Safety Inspection Certificate No.",type:"text",placeholder:"Enter FSIC number",required:!0},{name:"certificate_of_completion",label:"Certificate of Completion No.",type:"text",placeholder:"Enter certificate number",required:!0}]},{id:"plumbing",title:"Plumbing Permit",icon:VU,color:"#2196F3",description:"Required for plumbing systems including water supply, drainage, and sanitary.",fields:[{name:"plumbing_work_type",label:"Type of Plumbing Work",type:"select",options:["New Installation","Renovation","Repair","Extension","Relocation"],required:!0},{name:"number_of_fixtures",label:"Number of Fixtures",type:"number",placeholder:"e.g. 15",required:!0},{name:"water_source",label:"Water Source",type:"select",options:["Municipal Water","Deep Well","Shallow Well","Rain Harvesting","Others"],required:!0},{name:"drainage_type",label:"Drainage System Type",type:"select",options:["Septic Tank","Sewage Treatment Plant","Municipal Sewer","Others"],required:!0}]},{id:"signage",title:"Signage Permit",icon:dQ,color:"#FF9800",description:"Required for installation of business signs, billboards, and advertising displays.",fields:[{name:"sign_type",label:"Sign Type",type:"select",options:["Wall-Mounted","Free-Standing","Projecting","Roof Sign","Billboard","LED/Digital","Others"],required:!0},{name:"sign_dimensions",label:"Sign Dimensions (W x H)",type:"text",placeholder:"e.g. 3m x 2m",required:!0},{name:"sign_material",label:"Sign Material",type:"text",placeholder:"e.g. Acrylic, Metal",required:!0},{name:"illuminated",label:"Illuminated?",type:"select",options:["Yes - Internal","Yes - External","Yes - LED/Neon","No"],required:!0}]}],Pb=[{id:1,title:"Select Permit",description:"Choose permit type"},{id:2,title:"Applicant Info",description:"Personal details"},{id:3,title:"Professional",description:"Licensed professional"},{id:4,title:"Project Details",description:"Specific requirements"},{id:5,title:"Documents",description:"Upload & declare"},{id:6,title:"Review",description:"Review application"}];function kq(){const a=ka(),[e,s]=C.useState(1),[r,n]=C.useState(null),[i,o]=C.useState(!1),[l,c]=C.useState(!1),[u,m]=C.useState(!1),[A,g]=C.useState(null),[p,v]=C.useState(!1),[b,y]=C.useState(!1),[w,B]=C.useState(null),[j,E]=C.useState({first_name:"",last_name:"",middle_initial:"",contact_number:"",email:"",owner_address:"",property_address:"",building_permit_number:"",barangay_clearance:"",tct_or_tax_dec:"",professional_name:"",professional_role:"",prc_id:"",ptr_number:"",prc_expiry:"",project_description:"",document_plans:null,document_id:null,signature_file:null,agree_declaration:!1,date_submitted:new Date().toISOString().split("T")[0]}),[S,T]=C.useState({}),M=R=>{const{name:G,value:se,type:le,files:ye,checked:De}=R.target;if(G==="contact_number"){const me=se.replace(/[^0-9]/g,"");(me===""||me.startsWith("09"))&&E(Te=>({...Te,[G]:me}));return}if(G==="barangay_clearance"&&(m(!1),g(null)),G==="prc_id"&&(y(!1),B(null)),["tct_or_tax_dec","barangay_clearance"].includes(G)){E(me=>({...me,[G]:se.replace(/[^0-9]/g,"")}));return}E(le==="file"?me=>({...me,[G]:ye[0]||null}):le==="checkbox"?me=>({...me,[G]:De}):me=>({...me,[G]:se}))},D=R=>{const{name:G,value:se}=R.target;T(le=>({...le,[G]:se}))},P=R=>{n(R),T({}),dt.fire({title:R.title,html:`<p style="font-family:${ps.font}">${R.description}</p>`,icon:"info",confirmButtonText:"Continue to Application",confirmButtonColor:ps.success,showCancelButton:!0,cancelButtonText:"Back",cancelButtonColor:"#6b7280"}).then(G=>{G.isConfirmed&&(s(2),window.scrollTo({top:0,behavior:"smooth"}))})},Y=async()=>{const R=j.barangay_clearance.trim();if(!R){dt.fire({icon:"warning",title:"Enter Barangay Clearance ID",text:"Please enter a barangay clearance ID to verify.",confirmButtonColor:ps.primary});return}if(u&&A){dt.fire({icon:"success",title:"Already Verified",text:"This barangay clearance ID is already verified.",confirmButtonColor:ps.success});return}c(!0);try{const G=await fetch(jq);if(!G.ok)throw new Error(`HTTP error! status: ${G.status}`);const se=await G.json();let le=[];se.success&&se.data?le=se.data:Array.isArray(se)?le=se:le=se.permits||[];const ye=le.find(De=>{const me=De.applicant_id?De.applicant_id.toString():"",Te=De.permit_id?De.permit_id.toString():"",we=R.toString();return(me===we||Te===we)&&De.status==="approved"});if(ye){m(!0),g(ye);const De=[ye.house_no,ye.street,ye.barangay,ye.city_municipality,ye.province].filter(Boolean).join(", ");E(me=>({...me,first_name:ye.first_name||me.first_name,last_name:ye.last_name||me.last_name,middle_initial:ye.middle_name||me.middle_initial,contact_number:ye.mobile_number||me.contact_number,email:ye.email||me.email,owner_address:De||me.owner_address})),dt.fire({icon:"success",title:"Verified & Auto-filled!",html:`<div style="font-family:${ps.font};text-align:left">
            <p><strong>Name:</strong> ${ye.first_name} ${ye.middle_name||""} ${ye.last_name}</p>
            <p><strong>Email:</strong> ${ye.email||"N/A"}</p>
            <p><strong>Contact:</strong> ${ye.mobile_number||"N/A"}</p>
            <p><strong>Address:</strong> ${De||"N/A"}</p>
            <p class="mt-2 text-green-600"><strong>Status:</strong> Approved</p>
          </div>`,confirmButtonColor:ps.success})}else dt.fire({icon:"error",title:"Not Found",text:"Barangay clearance ID not found or not approved. Please check the ID and try again.",confirmButtonColor:ps.danger})}catch(G){console.error("Error verifying barangay clearance:",G),dt.fire({icon:"error",title:"Verification Error",text:"Error connecting to verification service. Please try again later.",confirmButtonColor:ps.danger})}finally{c(!1)}},Q=async()=>{const R=j.prc_id.trim();if(!R){dt.fire({icon:"warning",title:"Enter PRC License",text:"Please enter a PRC license number to verify.",confirmButtonColor:ps.primary});return}if(b&&w){dt.fire({icon:"success",title:"Already Verified",text:"This professional is already verified.",confirmButtonColor:ps.success});return}v(!0);try{const G=await fetch(_q);if(!G.ok)throw new Error(`HTTP error! status: ${G.status}`);const se=await G.json();let le=[];se.success&&se.data?le=se.data:Array.isArray(se)&&(le=se);const ye=le.find(De=>(De.prc_license?De.prc_license.toString().trim():"")===R&&(De.status==="approved"||De.status==="pending"));if(ye){y(!0),B(ye);const De=[ye.first_name,ye.middle_initial,ye.last_name,ye.suffix].filter(Boolean).join(" ");E(me=>({...me,professional_name:De||me.professional_name,professional_role:ye.role_in_project||ye.profession||me.professional_role,ptr_number:ye.ptr_number||me.ptr_number,prc_expiry:ye.prc_expiry?ye.prc_expiry.split("T")[0]:me.prc_expiry})),dt.fire({icon:"success",title:"Professional Verified!",html:`<div style="font-family:${ps.font};text-align:left">
            <p><strong>Name:</strong> ${De}</p>
            <p><strong>Profession:</strong> ${ye.profession||"N/A"}</p>
            <p><strong>Role:</strong> ${ye.role_in_project||"N/A"}</p>
            <p><strong>PRC License:</strong> ${ye.prc_license}</p>
            <p><strong>PTR Number:</strong> ${ye.ptr_number||"N/A"}</p>
            <p><strong>PRC Expiry:</strong> ${ye.prc_expiry||"N/A"}</p>
            <p class="mt-2" style="color:${ye.status==="approved"?ps.success:ps.accent}"><strong>Status:</strong> ${ye.status}</p>
          </div>`,confirmButtonColor:ps.success})}else dt.fire({icon:"error",title:"Not Found",text:"PRC license not found in the professional registration database. Please ensure the professional is registered first.",confirmButtonColor:ps.danger})}catch(G){console.error("Error verifying professional:",G),dt.fire({icon:"error",title:"Verification Error",text:"Error connecting to professional registration service.",confirmButtonColor:ps.danger})}finally{v(!1)}},L=R=>{const G=[];return R===2&&(j.barangay_clearance.trim()?u||G.push("Barangay Clearance must be verified (click Verify)"):G.push("Barangay Clearance ID"),j.first_name.trim()||G.push("First Name"),j.last_name.trim()||G.push("Last Name"),j.contact_number.trim()?j.contact_number.length!==11&&G.push("Contact must be 11 digits (09XXXXXXXXX)"):G.push("Contact Number"),j.email.trim()?/\S+@\S+\.\S+/.test(j.email)||G.push("Valid email format"):G.push("Email"),j.owner_address.trim()||G.push("Owner Address"),j.property_address.trim()||G.push("Property Address")),R===3&&(j.prc_id.trim()?b||G.push("Professional must be verified (click Verify)"):G.push("PRC License Number"),j.professional_name.trim()||G.push("Professional Name"),j.ptr_number.trim()||G.push("PTR Number"),j.prc_expiry?new Date(j.prc_expiry)<new Date&&G.push("PRC must not be expired"):G.push("PRC Expiry Date")),R===4&&(j.project_description.trim()||G.push("Project Description"),r&&r.fields.forEach(se=>{se.required&&!S[se.name]?.toString().trim()&&G.push(se.label)})),R===5&&(j.document_plans||G.push("Plans / Drawings"),j.document_id||G.push("Valid ID"),j.signature_file||G.push("Signature File"),j.agree_declaration||G.push("You must agree to the declaration")),G},ae=()=>{const R=L(e);if(R.length>0){dt.fire({icon:"warning",title:"Missing Required Fields",html:`<ul style="text-align:left;font-family:${ps.font}">${R.map(G=>`<li> ${G}</li>`).join("")}</ul>`,confirmButtonColor:ps.primary});return}e<Pb.length&&(s(G=>G+1),window.scrollTo({top:0,behavior:"smooth"}))},ne=()=>{e>1&&(s(R=>R-1),window.scrollTo({top:0,behavior:"smooth"}))},V=async()=>{if((await dt.fire({title:"Submit Application?",html:`<p style="font-family:${ps.font}">Submit your <strong>${r.title}</strong> application? This cannot be undone.</p>`,icon:"question",showCancelButton:!0,confirmButtonText:"Submit",confirmButtonColor:ps.success,cancelButtonText:"Cancel",cancelButtonColor:"#6b7280"})).isConfirmed){dt.fire({title:"Submitting...",html:"<p>Please wait while we process your application.</p>",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>dt.showLoading()}),o(!0);try{const G=new FormData;G.append("permit_type",r.id);const se=localStorage.getItem("user_id")||localStorage.getItem("goserveph_user_id")||"0";G.append("user_id",se),Object.entries(j).forEach(([De,me])=>{me!=null&&(De==="document_plans"||De==="document_id"||De==="signature_file"||De==="agree_declaration"||De==="date_submitted"||me instanceof File||G.append(De,me))}),G.append("type_specific_data",JSON.stringify(S)),j.document_plans&&G.append("document_plans",j.document_plans),j.document_id&&G.append("document_id",j.document_id),j.signature_file&&G.append("signature_file",j.signature_file);const le=await fetch(Nq,{method:"POST",body:G}),ye=await le.json();if(!le.ok)throw new Error(ye.message||`HTTP error! status: ${le.status}`);if(ye.success){try{ql("Building Permit",ye.data?.permit_id||"",{permit_type:r?.title||"Ancillary"})}catch(De){console.warn("Activity log failed:",De)}dt.fire({icon:"success",title:"Application Submitted!",html:`<div style="font-family:${ps.font}"><p>Your <strong>${r.title}</strong> application has been submitted.</p><p class="mt-2"><strong>Permit ID:</strong> ${ye.data?.permit_id||"N/A"}</p></div>`,confirmButtonColor:ps.success,confirmButtonText:"Track Application"}).then(()=>a("/user/permittracker"))}else throw new Error(ye.message||"Submission failed")}catch(G){dt.fire({icon:"error",title:"Submission Failed",html:`<p style="font-family:${ps.font}">${G.message}</p>`,confirmButtonColor:ps.danger})}finally{o(!1)}}},O=()=>{switch(e){case 1:return X();case 2:return $();case 3:return H();case 4:return te();case 5:return K();case 6:return I();default:return null}},X=()=>t.jsxs("div",{children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold",style:{color:ps.primary,fontFamily:ps.font},children:"Select Ancillary Permit Type"}),t.jsx("p",{className:"mt-2 text-gray-500",style:{fontFamily:ps.font},children:"Choose the type of ancillary permit you need to apply for"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:Cq.map(R=>{const G=R.icon,se=r?.id===R.id;return t.jsx("div",{onClick:()=>P(R),className:`group cursor-pointer rounded-xl border-2 bg-white p-5 shadow-sm transition-all duration-200 hover:shadow-lg ${se?"ring-2 ring-offset-2":""}`,style:{borderColor:se?R.color:"#E5E7EB"},children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:`${R.color}15`},children:t.jsx(G,{className:"w-6 h-6",style:{color:R.color}})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("h3",{className:"font-bold text-base flex items-center justify-between",style:{color:ps.secondary,fontFamily:ps.font},children:[R.title,t.jsx(sA,{className:"w-4 h-4 text-gray-400 group-hover:translate-x-1 transition-transform"})]}),t.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",style:{fontFamily:ps.font},children:R.description})]})]})},R.id)})})]}),$=()=>t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold mb-1",style:{color:ps.primary,fontFamily:ps.font},children:"Applicant Information"}),t.jsx("p",{className:"text-sm text-gray-500 mb-6",style:{fontFamily:ps.font},children:"Enter your Barangay Clearance ID to auto-fill your details"}),t.jsxs("div",{className:"p-4 rounded-lg border-2 mb-6",style:{borderColor:u?ps.success:ps.primary,background:u?"#4CAF5010":"#4A90E210"},children:[t.jsxs("label",{className:"block text-sm font-bold mb-2",style:{color:ps.primary,fontFamily:ps.font},children:[t.jsx(Pr,{className:"w-4 h-4 inline mr-1"})," Barangay Clearance ID ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",name:"barangay_clearance",value:j.barangay_clearance,onChange:M,placeholder:"Enter Barangay Clearance / Permit ID",className:`${Fo} flex-1`,style:La}),t.jsx("button",{onClick:Y,disabled:l,className:"px-4 py-2 rounded-lg text-white font-semibold flex items-center gap-2 whitespace-nowrap",style:{background:u?ps.success:ps.primary,fontFamily:ps.font},children:l?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):u?t.jsxs(t.Fragment,{children:[t.jsx(Us,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(sa,{className:"w-4 h-4"})," Verify"]})})]}),u&&t.jsxs("p",{className:"text-xs mt-2 flex items-center gap-1",style:{color:ps.success},children:[t.jsx(Us,{className:"w-3 h-3"})," Barangay clearance verified  applicant info auto-filled below"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[[{name:"first_name",label:"First Name",req:!0,ph:"Enter first name"},{name:"last_name",label:"Last Name",req:!0,ph:"Enter last name"},{name:"middle_initial",label:"Middle Initial",req:!1,ph:"M.I."},{name:"contact_number",label:"Contact Number",req:!0,ph:"09XXXXXXXXX",max:11},{name:"email",label:"Email",req:!0,ph:"email@example.com",type:"email"},{name:"tct_or_tax_dec",label:"TCT / Tax Dec No.",req:!1,ph:"Enter TCT or Tax Dec number"}].map(R=>t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:La,children:[R.label," ",R.req&&t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:R.type||"text",name:R.name,value:j[R.name],onChange:M,placeholder:R.ph,maxLength:R.max,className:Fo,style:{...La,background:u&&["first_name","last_name","middle_initial","contact_number","email"].includes(R.name)?"#f0fdf4":"#fff"}})]},R.name)),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:La,children:["Owner Address ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"owner_address",value:j.owner_address,onChange:M,placeholder:"Enter complete owner address",className:Fo,style:{...La,background:u?"#f0fdf4":"#fff"}})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:La,children:["Property / Project Address ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"property_address",value:j.property_address,onChange:M,placeholder:"Enter complete property address",className:Fo,style:La})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:La,children:"Building Permit Number"}),t.jsx("input",{type:"text",name:"building_permit_number",value:j.building_permit_number,onChange:M,placeholder:"Enter building permit number",className:Fo,style:La})]})]})]}),H=()=>t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold mb-1",style:{color:ps.primary,fontFamily:ps.font},children:"Professional Information"}),t.jsx("p",{className:"text-sm text-gray-500 mb-6",style:{fontFamily:ps.font},children:"Enter the PRC License number to verify and auto-fill professional details"}),t.jsxs("div",{className:"p-4 rounded-lg border-2 mb-6",style:{borderColor:b?ps.success:ps.primary,background:b?"#4CAF5010":"#4A90E210"},children:[t.jsxs("label",{className:"block text-sm font-bold mb-2",style:{color:ps.primary,fontFamily:ps.font},children:[t.jsx(Pr,{className:"w-4 h-4 inline mr-1"})," PRC License Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",name:"prc_id",value:j.prc_id,onChange:M,placeholder:"Enter PRC License Number (e.g. PRC-987654)",className:`${Fo} flex-1`,style:La}),t.jsx("button",{onClick:Q,disabled:p,className:"px-4 py-2 rounded-lg text-white font-semibold flex items-center gap-2 whitespace-nowrap",style:{background:b?ps.success:ps.primary,fontFamily:ps.font},children:p?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):b?t.jsxs(t.Fragment,{children:[t.jsx(Us,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(sa,{className:"w-4 h-4"})," Verify"]})})]}),b&&t.jsxs("p",{className:"text-xs mt-2 flex items-center gap-1",style:{color:ps.success},children:[t.jsx(Us,{className:"w-3 h-3"})," Professional verified from registration database  details auto-filled below"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:La,children:["Professional Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"professional_name",value:j.professional_name,onChange:M,placeholder:"Full name of supervising professional",className:Fo,style:{...La,background:b?"#f0fdf4":"#fff"},readOnly:b})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:La,children:"Professional Role"}),t.jsx("input",{type:"text",name:"professional_role",value:j.professional_role,onChange:M,placeholder:"e.g. Professional Engineer",className:Fo,style:{...La,background:b?"#f0fdf4":"#fff"},readOnly:b})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:La,children:["PTR Number ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"ptr_number",value:j.ptr_number,onChange:M,placeholder:"Enter PTR number",className:Fo,style:{...La,background:b?"#f0fdf4":"#fff"},readOnly:b})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:La,children:["PRC Expiry Date ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",name:"prc_expiry",value:j.prc_expiry,onChange:M,min:new Date().toISOString().split("T")[0],className:Fo,style:{...La,background:b?"#f0fdf4":"#fff"},readOnly:b})]})]})]}),te=()=>{if(!r)return null;const R=r.icon;return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[t.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:`${r.color}15`},children:t.jsx(R,{className:"w-5 h-5",style:{color:r.color}})}),t.jsxs("h2",{className:"text-xl font-bold",style:{color:ps.primary,fontFamily:ps.font},children:[r.title," - Project Details"]})]}),t.jsxs("p",{className:"text-sm text-gray-500 mb-6 ml-11",style:{fontFamily:ps.font},children:["Provide specific details for your ",r.title.toLowerCase()," application"]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:La,children:["Project Description ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{name:"project_description",value:j.project_description,onChange:M,placeholder:"Describe the overall scope of work, location details, and any special considerations...",rows:4,className:Fo,style:La})]}),t.jsxs("div",{className:"p-4 rounded-lg border mb-6",style:{borderColor:r.color,background:`${r.color}08`},children:[t.jsxs("h3",{className:"font-bold text-base mb-4",style:{color:r.color,fontFamily:ps.font},children:[r.title," Specific Information"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.fields.map(G=>t.jsxs("div",{className:G.type==="textarea"?"md:col-span-2":"",children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:La,children:[G.label," ",G.required&&t.jsx("span",{className:"text-red-500",children:"*"})]}),G.type==="select"?t.jsxs("select",{name:G.name,value:S[G.name]||"",onChange:D,className:`${Fo} bg-white`,style:La,children:[t.jsxs("option",{value:"",children:["Select ",G.label]}),G.options.map(se=>t.jsx("option",{value:se,children:se},se))]}):G.type==="textarea"?t.jsx("textarea",{name:G.name,value:S[G.name]||"",onChange:D,placeholder:G.placeholder||"",rows:3,className:Fo,style:La}):t.jsx("input",{type:G.type||"text",name:G.name,value:S[G.name]||"",onChange:D,placeholder:G.placeholder||"",className:Fo,style:La})]},G.name))})]})]})},K=()=>t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold mb-1",style:{color:ps.primary,fontFamily:ps.font},children:"Documents & Declaration"}),t.jsx("p",{className:"text-sm text-gray-500 mb-6",style:{fontFamily:ps.font},children:"Upload required documents and sign the declaration"}),t.jsxs("div",{className:"space-y-5",children:[[{name:"document_plans",label:"Plans / Drawings",hint:"Upload signed and sealed plans (PDF, JPG, PNG  max 5MB)"},{name:"document_id",label:"Valid ID",hint:"Upload a valid government-issued ID (PDF, JPG, PNG  max 5MB)"},{name:"signature_file",label:"Professional Signature",hint:"Upload professional signature (PNG, JPG  max 5MB)"}].map(R=>t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium mb-1",style:La,children:[R.label," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-2",style:{fontFamily:ps.font},children:R.hint}),t.jsx("input",{type:"file",name:R.name,onChange:M,accept:".pdf,.jpg,.jpeg,.png",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 border border-black rounded-lg p-2",style:{fontFamily:ps.font}}),j[R.name]&&t.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[t.jsx(Us,{className:"w-3 h-3"})," ",j[R.name].name]})]},R.name)),t.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 mt-4",children:t.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",name:"agree_declaration",checked:j.agree_declaration,onChange:M,className:"mt-1 w-5 h-5 accent-green-600"}),t.jsx("span",{className:"text-sm",style:{color:ps.secondary,fontFamily:ps.font},children:"I hereby declare that all information provided in this application is true and correct to the best of my knowledge. I understand that any misrepresentation may result in the denial or revocation of this permit."})]})})]})]}),I=()=>{if(!r)return null;const R=r.icon,G=({title:le,children:ye})=>t.jsxs("div",{className:"mb-5",children:[t.jsx("h3",{className:"font-bold text-base mb-3 pb-2 border-b",style:{color:ps.primary,fontFamily:ps.font},children:le}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2",children:ye})]}),se=({label:le,value:ye})=>t.jsxs("div",{className:"py-1",children:[t.jsx("span",{className:"text-xs text-gray-500 block",style:{fontFamily:ps.font},children:le}),t.jsx("span",{className:"text-sm font-medium",style:{color:ps.secondary,fontFamily:ps.font},children:ye||""})]});return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{background:`${r.color}15`},children:t.jsx(R,{className:"w-5 h-5",style:{color:r.color}})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold",style:{color:ps.primary,fontFamily:ps.font},children:"Review Application"}),t.jsxs("p",{className:"text-sm text-gray-500",style:{fontFamily:ps.font},children:[r.title,"  Please review all details before submitting"]})]})]}),t.jsxs(G,{title:"Applicant Information",children:[t.jsx(se,{label:"Barangay Clearance ID",value:j.barangay_clearance}),t.jsx(se,{label:"Full Name",value:`${j.first_name} ${j.middle_initial} ${j.last_name}`.trim()}),t.jsx(se,{label:"Contact Number",value:j.contact_number}),t.jsx(se,{label:"Email",value:j.email}),t.jsx(se,{label:"Owner Address",value:j.owner_address}),t.jsx(se,{label:"Property Address",value:j.property_address}),t.jsx(se,{label:"Building Permit No.",value:j.building_permit_number}),t.jsx(se,{label:"TCT / Tax Dec No.",value:j.tct_or_tax_dec})]}),t.jsxs(G,{title:"Professional Information",children:[t.jsx(se,{label:"PRC License No.",value:j.prc_id}),t.jsx(se,{label:"Professional Name",value:j.professional_name}),t.jsx(se,{label:"Role",value:j.professional_role}),t.jsx(se,{label:"PTR Number",value:j.ptr_number}),t.jsx(se,{label:"PRC Expiry",value:j.prc_expiry}),t.jsx(se,{label:"Verified",value:b?"Yes":"No"})]}),t.jsxs(G,{title:"Project Details",children:[t.jsx("div",{className:"md:col-span-2",children:t.jsx(se,{label:"Project Description",value:j.project_description})}),r.fields.map(le=>t.jsx(se,{label:le.label,value:S[le.name]},le.name))]}),t.jsxs(G,{title:"Documents",children:[t.jsx(se,{label:"Plans / Drawings",value:j.document_plans?.name}),t.jsx(se,{label:"Valid ID",value:j.document_id?.name}),t.jsx(se,{label:"Professional Signature",value:j.signature_file?.name}),t.jsx(se,{label:"Declaration Agreed",value:j.agree_declaration?"Yes":"No"})]}),t.jsx("div",{className:"p-3 rounded-lg mt-2",style:{background:"#4A90E210",border:`1px solid ${ps.primary}`},children:t.jsx(se,{label:"Submission Date",value:j.date_submitted})})]})};return t.jsxs("div",{className:"mx-1 mt-1 p-6 rounded-lg min-h-screen",style:{background:ps.background,color:ps.secondary,fontFamily:ps.font},children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold",style:{color:ps.primary,fontFamily:ps.font},children:"Ancillary Permit Application"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",style:{fontFamily:ps.font},children:r?`Applying for: ${r.title}`:"Select a permit type to begin"})]}),t.jsx("button",{onClick:()=>{dt.fire({title:"Go Back?",text:"Are you sure you want to go back? Unsaved changes will be lost.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Go Back",confirmButtonColor:ps.success,cancelButtonText:"Cancel",cancelButtonColor:"#6b7280"}).then(R=>{R.isConfirmed&&a("/user/building/type")})},className:"px-4 py-2 rounded-lg text-white font-semibold transition-colors",style:{background:ps.success,fontFamily:ps.font},onMouseEnter:R=>R.currentTarget.style.background=ps.accent,onMouseLeave:R=>R.currentTarget.style.background=ps.success,children:t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(Vh,{size:16})," Change Type"]})})]}),t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"flex items-center justify-between",children:Pb.map((R,G)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 font-bold text-sm",style:{background:e>=R.id?ps.success:"transparent",borderColor:e>=R.id?ps.success:"#9CA3AF",color:e>=R.id?"#fff":"#9CA3AF",fontFamily:ps.font},children:e>R.id?t.jsx(Us,{className:"w-5 h-5"}):R.id}),t.jsxs("div",{className:"ml-2 hidden md:block",children:[t.jsx("p",{className:"text-sm font-semibold",style:{color:e>=R.id?ps.success:"#9CA3AF",fontFamily:ps.font},children:R.title}),t.jsx("p",{className:"text-xs",style:{color:"#9CA3AF",fontFamily:ps.font},children:R.description})]}),G<Pb.length-1&&t.jsx("div",{className:"hidden md:block w-12 h-0.5 mx-3",style:{background:e>R.id?ps.success:"#D1D5DB"}})]},R.id))})}),t.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:O()}),t.jsxs("div",{className:"flex justify-between",children:[e>1?t.jsxs("button",{onClick:ne,className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors flex items-center gap-2",style:{background:"#9CA3AF",fontFamily:ps.font},onMouseEnter:R=>R.currentTarget.style.background="#6B7280",onMouseLeave:R=>R.currentTarget.style.background="#9CA3AF",children:[t.jsx(Vh,{size:16})," Previous"]}):t.jsx("div",{}),e<Pb.length?e>1&&t.jsxs("button",{onClick:ae,className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors flex items-center gap-2",style:{background:ps.success,fontFamily:ps.font},onMouseEnter:R=>R.currentTarget.style.background=ps.accent,onMouseLeave:R=>R.currentTarget.style.background=ps.success,children:[e===5?"Review Application":"Next"," ",t.jsx(sA,{size:16})]}):t.jsx("button",{onClick:V,disabled:i,className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors",style:{background:i?"#9CA3AF":ps.success,cursor:i?"not-allowed":"pointer",fontFamily:ps.font},onMouseEnter:R=>{i||(R.currentTarget.style.background=ps.accent)},onMouseLeave:R=>{i||(R.currentTarget.style.background=ps.success)},children:i?"Submitting...":"Submit Application"})]})]})}const As={primary:"#4A90E2",secondary:"#000000",accent:"#FDA811",success:"#28A745",danger:"#DC3545",background:"#FBFBFB",font:"Montserrat, Arial, sans-serif"};function Bq(){const a=ka(),[e,s]=C.useState(1),[r,n]=C.useState(!1),[i,o]=C.useState(null),[l,c]=C.useState({}),u={Architect:["Designer of Record","Interior Design Consultant","Landscape Designer","Consultant"],"Civil Engineer":["Designer of Record","Structural Designer","Inspector / Supervisor","Contractor"],"Structural Engineer":["Structural Designer","Inspector / Supervisor","Consultant"],"Electrical Engineer":["Electrical Designer","Inspector / Supervisor","Consultant"],"Mechanical Engineer":["Mechanical Designer","Consultant"],"Electronics Engineer":["Electronics Designer","Consultant"],"Sanitary Engineer":["Sanitary / Plumbing Designer","Consultant"],"Master Plumber":["Plumbing Designer","Consultant"],"Geodetic Engineer":["Surveyor"],"Interior Designer":["Interior Design Consultant"],"Landscape Architect":["Landscape Designer"],"Environmental Planner":["Environmental Consultant"],"Fire Protection Engineer":["Fire Safety Consultant"],Contractor:["Contractor"]},m=[{id:1,title:"Personal Information",description:"Basic personal details"},{id:2,title:"Credentials & Specialization",description:"License and profession details"},{id:3,title:"Uploads",description:"Required documents"},{id:4,title:"Declaration & Approval",description:"Review and submit"}],[A,g]=C.useState({first_name:"",middle_initial:"",last_name:"",suffix:"",birth_date:"",contact_number:"",email:"",prc_license:"",prc_expiry:"",ptr_number:"",tin:"",profession:"",role:"",prc_id_file:null,ptr_file:null,signature_file:null}),p=T=>{const{name:M,value:D,type:P,files:Y}=T.target;if(P==="file")g(Q=>({...Q,[M]:Y[0]||null}));else if(M==="contact_number"){const Q=D.replace(/[^0-9]/g,"");g(L=>({...L,[M]:Q}))}else g(Q=>({...Q,[M]:D}))},v=T=>{const M={};return T===1&&((!A.first_name||A.first_name.trim()==="")&&(M.first_name="First name is required"),(!A.last_name||A.last_name.trim()==="")&&(M.last_name="Last name is required"),A.birth_date||(M.birth_date="Birth date is required"),(!A.contact_number||A.contact_number.trim()==="")&&(M.contact_number="Contact number is required"),(!A.email||A.email.trim()==="")&&(M.email="Email is required")),T===2&&((!A.prc_license||A.prc_license.trim()==="")&&(M.prc_license="PRC License is required"),A.prc_expiry||(M.prc_expiry="PRC Expiry is required"),(!A.ptr_number||A.ptr_number.trim()==="")&&(M.ptr_number="PTR Number is required"),(!A.tin||A.tin.trim()==="")&&(M.tin="TIN is required"),A.profession||(M.profession="Profession is required"),A.role||(M.role="Role is required")),T===3&&(A.prc_id_file||(M.prc_id_file="PRC ID is required"),A.ptr_file||(M.ptr_file="PTR is required"),A.signature_file||(M.signature_file="Signature is required")),c(M),Object.keys(M).length===0},b=T=>T===1?!(!A.first_name||A.first_name.trim()===""||!A.last_name||A.last_name.trim()===""||!A.birth_date||!A.contact_number||A.contact_number.trim()===""||!A.email||A.email.trim()===""):T===2?!(!A.prc_license||A.prc_license.trim()===""||!A.prc_expiry||!A.ptr_number||A.ptr_number.trim()===""||!A.tin||A.tin.trim()===""||!A.profession||!A.role):T===3?!(!A.prc_id_file||!A.ptr_file||!A.signature_file):!0,y=()=>{e<m.length&&v(e)&&(s(e+1),c({}))},w=async T=>{T.preventDefault(),v(e)&&(await dt.fire({title:"Confirm Registration",html:`
          <div style="font-family: ${As.font}; text-align: left;">
            <p class="mb-3">Are you sure you want to submit your professional registration?</p>
            <div class="bg-gray-50 p-3 rounded text-sm">
              <p><strong>Name:</strong> ${A.first_name} ${A.last_name}</p>
              <p><strong>Profession:</strong> ${A.profession}</p>
              <p><strong>PRC License:</strong> ${A.prc_license}</p>
            </div>
          </div>
        `,icon:"question",showCancelButton:!0,confirmButtonText:"Yes, Submit",cancelButtonText:"Cancel",confirmButtonColor:As.accent,cancelButtonColor:"#9CA3AF",customClass:{popup:"swal-wide"}})).isConfirmed&&E(T)},B=T=>{T.preventDefault(),e<m.length?y():w(T)},j=()=>{e>1&&s(e-1)},E=async T=>{T&&T.preventDefault(),n(!0);const M=v(1),D=v(2),P=v(3);if(!(M&&D&&P)){n(!1),dt.fire({icon:"error",title:"Validation Error",text:"Please complete all required fields in all steps.",confirmButtonColor:As.primary}),s(M?D?3:2:1);return}dt.fire({title:"Submitting Registration...",html:"Please wait while we process your professional registration.",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{dt.showLoading()}});try{const Y=new FormData;Y.append("first_name",A.first_name),Y.append("middle_initial",A.middle_initial||""),Y.append("last_name",A.last_name),Y.append("suffix",A.suffix||""),Y.append("birth_date",A.birth_date),Y.append("contact_number",A.contact_number),Y.append("email",A.email),Y.append("prc_license",A.prc_license),Y.append("prc_expiry",A.prc_expiry),Y.append("ptr_number",A.ptr_number),Y.append("tin",A.tin),Y.append("profession",A.profession),Y.append("role",A.role);const Q=localStorage.getItem("userId")||localStorage.getItem("user_id");Q&&Y.append("user_id",Q),A.prc_id_file&&Y.append("prc_id_file",A.prc_id_file),A.ptr_file&&Y.append("ptr_file",A.ptr_file),A.signature_file&&Y.append("signature_file",A.signature_file);const L=await fetch("/backend/building_permit/professional_registration.php",{method:"POST",body:Y}),ae=await L.json();if(!L.ok)throw new Error(ae.message||`HTTP error! status: ${L.status}`);if(ae.success)n(!1),ql("Building Permit",ae.data?.registration_id||"",{permit_type:"Professional Registration"}),dt.fire({icon:"success",title:"Registration Submitted!",html:`
            <div style="font-family: ${As.font};">
              <p class="mb-2">Your professional registration has been submitted successfully.</p>
              <p class="text-sm text-gray-600">You will receive a confirmation email shortly.</p>
              <div class="mt-3 p-3 bg-green-50 rounded text-sm">
                <p><strong>Registration ID:</strong> ${ae.data.registration_id}</p>
                <p><strong>Status:</strong> ${ae.data.status}</p>
              </div>
            </div>
          `,confirmButtonColor:As.success,confirmButtonText:"Track Application"}).then(()=>{a("/user/permittracker")});else throw new Error(ae.message||"Submission failed")}catch(Y){console.error("Submission error:",Y),n(!1),dt.fire({icon:"error",title:"Submission Failed",text:Y.message||"Failed to submit professional registration. Please try again.",confirmButtonColor:As.danger})}},S=()=>{switch(e){case 1:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:As.secondary},children:"Personal Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:As.secondary},children:"First Name *"}),t.jsx("input",{type:"text",name:"first_name",value:A.first_name,onChange:p,className:`w-full p-3 border border-black rounded-lg ${l.first_name?"border-red-500":""}`,style:{color:As.secondary,fontFamily:As.font}}),l.first_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:As.font},children:l.first_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:As.secondary},children:"Middle Initial"}),t.jsx("input",{type:"text",name:"middle_initial",value:A.middle_initial,onChange:p,className:"w-full p-3 border border-black rounded-lg",style:{color:As.secondary,fontFamily:As.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:As.secondary},children:"Last Name *"}),t.jsx("input",{type:"text",name:"last_name",value:A.last_name,onChange:p,className:`w-full p-3 border border-black rounded-lg ${l.last_name?"border-red-500":""}`,style:{color:As.secondary,fontFamily:As.font}}),l.last_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:As.font},children:l.last_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:As.secondary},children:"Suffix"}),t.jsx("input",{type:"text",name:"suffix",value:A.suffix,onChange:p,className:"w-full p-3 border border-black rounded-lg",style:{color:As.secondary,fontFamily:As.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:As.secondary},children:"Birth Date *"}),t.jsx("input",{type:"date",name:"birth_date",value:A.birth_date,onChange:p,className:`w-full p-3 border border-black rounded-lg ${l.birth_date?"border-red-500":""}`,style:{color:As.secondary,fontFamily:As.font}}),l.birth_date&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:As.font},children:l.birth_date})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:As.secondary},children:"Contact Number *"}),t.jsx("input",{type:"text",name:"contact_number",value:A.contact_number,onChange:p,className:`w-full p-3 border border-black rounded-lg ${l.contact_number?"border-red-500":""}`,style:{color:As.secondary,fontFamily:As.font}}),l.contact_number&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:As.font},children:l.contact_number})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:As.secondary},children:"Email Address *"}),t.jsx("input",{type:"email",name:"email",value:A.email,onChange:p,className:`w-full p-3 border border-black rounded-lg ${l.email?"border-red-500":""}`,style:{color:As.secondary,fontFamily:As.font}}),l.email&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:As.font},children:l.email})]})]})]});case 2:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:As.secondary},children:"Credentials & Specialization"}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-lg font-semibold mb-4",style:{color:As.secondary},children:"Professional Credentials"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:As.secondary},children:"PRC License Number *"}),t.jsx("input",{type:"text",name:"prc_license",value:A.prc_license,onChange:p,className:`w-full p-3 border border-black rounded-lg ${l.prc_license?"border-red-500":""}`,style:{color:As.secondary,fontFamily:As.font}}),l.prc_license&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:As.font},children:l.prc_license})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:As.secondary},children:"PRC Expiry Date *"}),t.jsx("input",{type:"date",name:"prc_expiry",value:A.prc_expiry,onChange:p,className:`w-full p-3 border border-black rounded-lg ${l.prc_expiry?"border-red-500":""}`,style:{color:As.secondary,fontFamily:As.font}}),l.prc_expiry&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:As.font},children:l.prc_expiry})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:As.secondary},children:"PTR Number *"}),t.jsx("input",{type:"text",name:"ptr_number",value:A.ptr_number,onChange:p,className:`w-full p-3 border border-black rounded-lg ${l.ptr_number?"border-red-500":""}`,style:{color:As.secondary,fontFamily:As.font}}),l.ptr_number&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:As.font},children:l.ptr_number})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:As.secondary},children:"TIN *"}),t.jsx("input",{type:"text",name:"tin",value:A.tin,onChange:p,className:`w-full p-3 border border-black rounded-lg ${l.tin?"border-red-500":""}`,style:{color:As.secondary,fontFamily:As.font}}),l.tin&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:As.font},children:l.tin})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold mb-4",style:{color:As.secondary},children:"Specialization"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:As.secondary},children:"Profession *"}),t.jsxs("select",{name:"profession",value:A.profession,onChange:T=>{p(T),g(M=>({...M,role:""}))},className:`w-full p-3 border border-black rounded-lg ${l.profession?"border-red-500":""}`,style:{color:As.secondary,fontFamily:As.font},required:!0,children:[t.jsx("option",{value:"",children:"Select profession"}),Object.keys(u).map(T=>t.jsx("option",{value:T,children:T},T))]}),l.profession&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:As.font},children:l.profession})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:As.secondary},children:"Role in Project *"}),t.jsxs("select",{name:"role",value:A.role,onChange:p,className:`w-full p-3 border border-black rounded-lg ${l.role?"border-red-500":""}`,style:{color:As.secondary,fontFamily:As.font},required:!0,disabled:!A.profession,children:[t.jsx("option",{value:"",children:"Select role"}),A.profession&&u[A.profession].map(T=>t.jsx("option",{value:T,children:T},T))]}),l.role&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:As.font},children:l.role})]})]})]})]});case 3:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:As.secondary},children:"Required Documents"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:As.secondary},children:"PRC ID (Professional Regulation Commission ID) *"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"prc_id_file",onChange:p,className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:As.font}})]}),l.prc_id_file&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:As.font},children:l.prc_id_file})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:As.secondary},children:"PTR (Professional Tax Receipt) *"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"ptr_file",onChange:p,className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:As.font}})]}),l.ptr_file&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:As.font},children:l.ptr_file})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:As.secondary},children:"Digital Signature *"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"signature_file",onChange:p,className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:As.font}})]}),l.signature_file&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:As.font},children:l.signature_file})]})]})]});case 4:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:As.secondary},children:"Declaration & Approval"}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:[t.jsx("h4",{className:"font-bold mb-4 text-lg",style:{color:As.secondary},children:"Review Your Registration"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-2",style:{color:As.secondary},children:"Personal Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",style:{fontFamily:As.font},children:[t.jsxs("p",{children:[t.jsx("strong",{children:"First Name:"})," ",A.first_name]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Middle Initial:"})," ",A.middle_initial||"N/A"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Last Name:"})," ",A.last_name]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Suffix:"})," ",A.suffix||"N/A"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Birth Date:"})," ",A.birth_date]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Contact Number:"})," ",A.contact_number]}),t.jsxs("p",{className:"md:col-span-2",children:[t.jsx("strong",{children:"Email:"})," ",A.email]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-2",style:{color:As.secondary},children:"Professional Credentials"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",style:{fontFamily:As.font},children:[t.jsxs("p",{children:[t.jsx("strong",{children:"PRC License:"})," ",A.prc_license]}),t.jsxs("p",{children:[t.jsx("strong",{children:"PRC Expiry:"})," ",A.prc_expiry]}),t.jsxs("p",{children:[t.jsx("strong",{children:"PTR Number:"})," ",A.ptr_number]}),t.jsxs("p",{children:[t.jsx("strong",{children:"TIN:"})," ",A.tin]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-2",style:{color:As.secondary},children:"Specialization"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",style:{fontFamily:As.font},children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Profession:"})," ",A.profession]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Role:"})," ",A.role]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-2",style:{color:As.secondary},children:"Uploaded Documents"}),t.jsxs("ul",{className:"text-sm space-y-1",style:{fontFamily:As.font},children:[A.prc_id_file&&t.jsxs("li",{children:[" PRC ID: ",A.prc_id_file.name]}),A.ptr_file&&t.jsxs("li",{children:[" PTR: ",A.ptr_file.name]}),A.signature_file&&t.jsxs("li",{children:[" Signature: ",A.signature_file.name]})]})]})]}),t.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border",children:[t.jsx("p",{className:"text-sm font-semibold mb-2",style:{color:As.secondary,fontFamily:As.font},children:"Declaration:"}),t.jsx("p",{className:"text-sm",style:{color:As.secondary,fontFamily:As.font},children:"I hereby declare that all information provided is true and correct to the best of my knowledge. I understand that any false information may result in the rejection of my registration."})]})]})]});default:return null}};return t.jsxs("div",{className:"mx-1 mt-1 p-6 rounded-lg min-h-screen",style:{background:As.background,color:As.secondary,fontFamily:As.font},children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold",style:{color:As.primary},children:"PROFESSIONAL REGISTRATION"}),t.jsx("p",{className:"mt-2",style:{color:As.secondary},children:"Register as a licensed professional or engineer to be accredited for building projects."})]}),t.jsx("button",{onClick:()=>a("/user/building/type"),style:{background:As.primary,color:"#fff"},className:"px-4 py-2 rounded-lg transition-colors hover:bg-[#FDA811] font-medium",children:"Back to Permits"})]}),t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"flex items-center justify-between",children:m.map((T,M)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`flex items-center justify-center rounded-full border-2 font-semibold transition-all duration-300 ${e>=T.id?"text-white":"text-gray-500"}`,style:{background:e>=T.id?As.primary:"transparent",borderColor:e>=T.id?As.primary:"#9CA3AF",width:"45px",height:"30px",borderRadius:"20px",fontFamily:As.font},children:T.id}),t.jsxs("div",{className:"ml-3 hidden md:block",children:[t.jsx("p",{className:"text-sm font-medium",style:{color:e>=T.id?As.primary:As.secondary,fontFamily:As.font},children:T.title}),t.jsx("p",{className:"text-xs",style:{color:As.secondary,fontFamily:As.font},children:T.description})]}),M<m.length-1&&t.jsx("div",{className:"hidden md:block w-16 h-0.5 mx-4",style:{background:e>T.id?As.primary:"#9CA3AF"}})]},T.id))})}),i&&t.jsx("div",{className:`p-4 mb-6 rounded ${i.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,style:{fontFamily:As.font},children:i.message}),t.jsxs("form",{onSubmit:B,className:"space-y-8",children:[S(),t.jsxs("div",{className:"flex justify-between pt-6",children:[e>1&&t.jsx("button",{type:"button",onClick:j,style:{background:"#9CA3AF",color:"#fff"},className:"px-6 py-3 rounded-lg font-semibold hover:bg-gray-600 transition-colors",children:"Previous"}),e<m.length?t.jsx("button",{type:"button",onClick:y,disabled:!b(e),style:{background:b(e)?As.primary:"#9CA3AF",color:"#fff"},className:`px-6 py-3 rounded-lg font-semibold ${b(e)?"hover:bg-blue-700 transition-colors":"cursor-not-allowed"}`,children:"Next"}):t.jsx("button",{type:"submit",disabled:r||!(b(1)&&b(2)&&b(3)),style:{background:r||!(b(1)&&b(2)&&b(3))?"#9CA3AF":As.accent,color:"#fff"},className:`px-6 py-3 rounded-lg font-semibold ${r||!(b(1)&&b(2)&&b(3))?"cursor-not-allowed":"hover:bg-orange-600 transition-colors"}`,children:r?"Submitting...":"Submit Registration"})]})]})]})}const Cm={primary:"#4A90E2",accent:"#FDA811",success:"#4CAF50",danger:"#E53935"};function Sq({franchise_permit_id:a}){const e=ka(),s=[{id:"NEW",title:"NEW",description:"Apply for a new franchise permit"},{id:"RENEWAL",title:"RENEWAL",description:"Renew your existing franchise permit"}],r=l=>{l.currentTarget.style.backgroundColor=Cm.accent},n=l=>{l.currentTarget.style.backgroundColor=Cm.success},i=()=>{dt.fire({title:"Go Back to Dashboard?",text:"Are you sure you want to return to the dashboard?",icon:"question",showCancelButton:!0,confirmButtonColor:Cm.success,cancelButtonColor:Cm.danger,confirmButtonText:"Yes, Go Back",cancelButtonText:"Cancel",customClass:{title:"swal-title-center",htmlContainer:"swal-text-center"}}).then(l=>{l.isConfirmed&&dt.fire({title:"Redirecting...",html:'<p style="text-align: center;">Returning to dashboard...</p>',timer:2e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1,customClass:{title:"swal-title-center",htmlContainer:"swal-text-center"},didOpen:()=>{dt.showLoading()},willClose:()=>{e("/user/dashboard")}})})},o=l=>{const c=s.find(u=>u.id===l);dt.fire({title:"Selected Permit Type",html:`
        <div style="text-align: center; padding: 10px 0;">
          <p style="margin-bottom: 10px;">You have selected: <strong style="color: ${Cm.primary}">${c?.title}</strong></p>
          <p style="font-size: 0.9rem; color: #666;">${c?.description}</p>
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonColor:Cm.success,cancelButtonColor:"#9CA3AF",confirmButtonText:"Continue",cancelButtonText:"Cancel",customClass:{popup:"swal-wide",title:"swal-title-center",htmlContainer:"swal-text-center"}}).then(u=>{u.isConfirmed&&e({NEW:"/user/franchise/new",RENEWAL:"/user/franchise/renew"}[l]||"/user/franchise/new",{state:{permitType:l}})})};return t.jsxs("div",{className:"mx-1 mt-1 p-6 dark:bg-slate-900 bg-white dark:text-slate-300 rounded-lg min-h-screen",children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-8 text-center",children:"Franchise and Transport Permit Types"}),t.jsx("p",{className:"mb-6 text-center",children:"Please select the type of franchise permit you need to apply for"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full mt-6",children:s.map(l=>t.jsxs("div",{onClick:()=>o(l.id),className:"cursor-pointer rounded-lg border border-transparent px-5 py-4 transition-colors hover:border-blue-300 hover:bg-blue-100 shadow-lg shadow-blue-200/50 hover:shadow-blue-300/50 flex flex-col justify-between h-full",children:[t.jsxs("h2",{className:"mb-3 text-2xl font-semibold flex items-center justify-between",children:[l.title,t.jsx(sA,{className:"ml-2 w-5 h-5 transition-transform group-hover:translate-x-1 motion-reduce:transform-none"})]}),t.jsx("p",{className:"m-0 max-w-[30ch] text-sm opacity-70",children:l.description})]},l.id))}),t.jsx("div",{className:"mt-8 text-center",children:t.jsxs("button",{onClick:i,style:{backgroundColor:Cm.success,color:"#fff"},onMouseEnter:r,onMouseLeave:n,className:"inline-flex items-center gap-2 font-semibold py-2 px-4 rounded-lg transition-colors",children:[t.jsx(Vh,{size:18}),"Back to Dashboard"]})})]})}typeof window<"u"&&(vd.workerSrc=new URL("/assets/pdf.worker.min-wgc6bjNh.mjs",import.meta.url).toString());const rt={primary:"#4A90E2",secondary:"#000000",accent:"#FDA811",success:"#4CAF50",danger:"#E53935",background:"#FBFBFB",font:"Montserrat, Arial, sans-serif"},Eq=["Filipino","Afghan","Albanian","Algerian","American","Andorran","Angolan","Antiguans","Argentinean","Armenian","Australian","Austrian","Azerbaijani","Bahamian","Bahraini","Bangladeshi","Barbadian","Barbudans","Batswana","Belarusian","Belgian","Belizean","Beninese","Bhutanese","Bolivian","Bosnian","Brazilian","British","Bruneian","Bulgarian","Burkinabe","Burmese","Burundian","Cambodian","Cameroonian","Canadian","Cape Verdean","Central African","Chadian","Chilean","Chinese","Colombian","Comoran","Congolese","Costa Rican","Croatian","Cuban","Cypriot","Czech","Danish","Djibouti","Dominican","Dutch","East Timorese","Ecuadorean","Egyptian","Emirian","Equatorial Guinean","Eritrean","Estonian","Ethiopian","Fijian","Finnish","French","Gabonese","Gambian","Georgian","German","Ghanaian","Greek","Grenadian","Guatemalan","Guinea-Bissauan","Guinean","Guyanese","Haitian","Herzegovinian","Honduran","Hungarian","I-Kiribati","Icelander","Indian","Indonesian","Iranian","Iraqi","Irish","Israeli","Italian","Ivorian","Jamaican","Japanese","Jordanian","Kazakhstani","Kenyan","Kittian and Nevisian","Kuwaiti","Kyrgyz","Laotian","Latvian","Lebanese","Liberian","Libyan","Liechtensteiner","Lithuanian","Luxembourger","Macedonian","Malagasy","Malawian","Malaysian","Maldivan","Malian","Maltese","Marshallese","Mauritanian","Mauritian","Mexican","Micronesian","Moldovan","Monacan","Mongolian","Moroccan","Mosotho","Motswana","Mozambican","Namibian","Nauruan","Nepalese","New Zealander","Nicaraguan","Nigerian","Nigerien","North Korean","Northern Irish","Norwegian","Omani","Pakistani","Palauan","Palestinian","Panamanian","Papua New Guinean","Paraguayan","Peruvian","Polish","Portuguese","Qatari","Romanian","Russian","Rwandan","Saint Lucian","Salvadoran","Samoan","San Marinese","Sao Tomean","Saudi","Scottish","Senegalese","Serbian","Seychellois","Sierra Leonean","Singaporean","Slovakian","Slovenian","Solomon Islander","Somali","South African","South Korean","Spanish","Sri Lankan","Sudanese","Surinamer","Swazi","Swedish","Swiss","Syrian","Taiwanese","Tajik","Tanzanian","Thai","Togolese","Tongan","Trinidadian or Tobagonian","Tunisian","Turkish","Tuvaluan","Ugandan","Ukrainian","Uruguayan","Uzbekistani","Venezuelan","Vietnamese","Welsh","Yemenite","Zambian","Zimbabwean"];function Fq(){const a=Ti(),e=ka(),s=a.state?.permitType||"NEW",[r,n]=C.useState(1),[i,o]=C.useState(!1),[l,c]=C.useState(!1),[u,m]=C.useState({}),[A,g]=C.useState({}),[p,v]=C.useState(!1),[b,y]=C.useState({hasExistingPermit:!1,permitDetails:null,message:"",canProceed:!1}),[w,B]=C.useState(null),[j,E]=C.useState({}),[S,T]=C.useState(!1),[M,D]=C.useState({hasDuplicate:!1,message:"",duplicateDetails:null}),[P,Y]=C.useState({isPaid:!1,paymentMethod:"",paymentDate:"",transactionId:"",receiptNumber:""}),[Q,L]=C.useState(!1),[ae,ne]=C.useState(!1),[V,O]=C.useState({barangay_clearance:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},lto_or_cr:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},drivers_license:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},proof_of_residency:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0}}),[X,$]=C.useState(!1),[H,te]=C.useState(0),[K,I]=C.useState(!1),[R,G]=C.useState(null),[se,le]=C.useState(!1),[ye,De]=C.useState({}),[me,Te]=C.useState(!1),[we,st]=C.useState(null),[ce,tt]=C.useState(!1),[Ae,gt]=C.useState({}),[q,Qt]=C.useState({permit_subtype:"MTOP",mtop_application_id:"",mtop_plate_number:"",first_name:"",last_name:"",middle_initial:"",home_address:"",contact_number:"",email:"",citizenship:"Filipino",birth_date:"",id_type:"",id_number:"",proof_of_residency:null,operator_type:"Individual Operator",make_brand:"",model:"",engine_number:"",chassis_number:"",plate_number:"",year_acquired:"",color:"",vehicle_type:"",lto_or_number:"",lto_cr_number:"",lto_expiration_date:"",mv_file_number:"",district:"",route_zone:"",toda_name:"",toda_president_cert:null,barangay_of_operation:"",company_name:"",barangay_clearance:null,barangay_clearance_id:"",barangay_permit_id:"",mayors_permit_id:"",mayors_permit_applicant_id:"",toda_endorsement:null,lto_or_cr:null,lto_cr_copy:null,insurance_certificate:null,drivers_license:null,emission_test:null,nbi_clearance:null,police_clearance:null,medical_certificate:null,franchise_fee_checked:!1,sticker_id_fee_checked:!1,inspection_fee_checked:!1,franchise_fee_or:"",sticker_id_fee_or:"",inspection_fee_or:"",franchise_fee_receipt:null,sticker_id_fee_receipt:null,inspection_fee_receipt:null,payment_method:"online",applicant_signature:"",date_submitted:new Date().toISOString().split("T")[0],barangay_captain_signature:"",remarks:"",notes:""}),yt=[{id:1,title:"Permit Type",description:"Select permit type"},{id:2,title:q.permit_subtype==="MTOP"?"Operator Information":"Applicant Information",description:"Personal details"},{id:3,title:"Vehicle & Route Information",description:"Vehicle, route and operation details"},{id:4,title:"Required Documents",description:"Upload required documents"},{id:5,title:"Payment Information",description:"Fees and payment"},{id:6,title:"Declaration",description:"Sign and submit"},{id:7,title:"Review",description:"Review your application"}],Oe=["Bagong Barrio","Grace Park East","Grace Park West","Barangay 28","Barangay 35","Barangay 63","Barangay 71","Barangay 75","Barangay 120","Barangay 122","Barangay 126","Barangay 129","Barangay 132","Barangay 134","Barangay 136","Barangay 143","Barangay 146","Barangay 148","Barangay 151","Barangay 155","Barangay 160","Barangay 162","Barangay 164","Barangay 167","Barangay 171","Barangay 172","Barangay 175","Barangay 176","Barangay 177","Barangay 178","Barangay 179","Barangay 180","Barangay 181","Barangay 182","Barangay 183","Barangay 184","Barangay 185","Barangay 186","Barangay 187","Barangay 188","Deparo","Bagumbong","Tala","Camarin","Bagong Silang","Pangarap Village"],ze=["Bagong Barrio TODA","Grace Park TODA","Camarin TODA","Barangay 120 TODA","Barangay 177 TODA","Barangay 178 TODA","Barangay 188 TODA","Tala TODA","Deparo TODA","Bagumbong TODA","Phase 1 TODA","Phase 8 TODA","Pangarap TODA","Camarin East TODA","Bagong Silang TODA","Barangay 176 TODA","Barangay 175 TODA","Barangay 170 TODA","Barangay 171 TODA","Barangay 172 TODA"],Le=[{label:"Bagong Barrio TODA  Bagong Barrio Terminal  EDSA  Monumento Circle",value:"Bagong Barrio  Bagong Barrio Terminal  EDSA  Monumento Circle"},{label:"Grace Park TODA  Grace Park  Rizal Avenue  MCU  Monumento",value:"Grace Park  Rizal Avenue  MCU  Monumento"},{label:"Camarin TODA  Camarin Road  Zabarte  SM Fairview",value:"Camarin Road  Zabarte  SM Fairview"},{label:"Barangay 120 TODA  Barangay 120  Camarin Road  Zabarte  SM Fairview",value:"Barangay 120  Camarin Road  Zabarte  SM Fairview"},{label:"Barangay 177 TODA  Barangay 177  Susano Road  Zabarte  Quirino Highway",value:"Barangay 177  Susano Road  Zabarte  Quirino Highway"},{label:"Barangay 178 TODA  Barangay 178  Mindanao Avenue Extension  Zabarte",value:"Barangay 178  Mindanao Avenue Extension  Zabarte"},{label:"Barangay 188 TODA  Barangay 188  Camarin  Novaliches Bayan",value:"Barangay 188  Camarin  Novaliches Bayan"},{label:"Tala TODA  Tala Hospital  Phase 8  Phase 7  Camarin",value:"Tala Hospital  Phase 8  Phase 7  Camarin"},{label:"Deparo TODA  Deparo Road  Bagumbong  Quirino Highway",value:"Deparo Road  Bagumbong  Quirino Highway"},{label:"Bagumbong TODA  Bagumbong Road  Deparo  Camarin  Zabarte",value:"Bagumbong Road  Deparo  Camarin  Zabarte"},{label:"Phase 1 TODA  Phase 1  Phase 2  Zabarte  Camarin",value:"Phase 1  Phase 2  Zabarte  Camarin"},{label:"Phase 8 TODA  Phase 8  Tala Hospital  Camarin Road",value:"Phase 8  Tala Hospital  Camarin Road"},{label:"Pangarap TODA  Pangarap Village  Quirino Highway  Zabarte",value:"Pangarap Village  Quirino Highway  Zabarte"},{label:"Camarin East TODA  Camarin East  Zabarte  Fairview",value:"Camarin East  Zabarte  Fairview"},{label:"Bagong Silang TODA  Bagong Silang Phases 112  Zabarte  Camarin",value:"Bagong Silang Phases 112  Zabarte  Camarin"},{label:"Barangay 176 TODA  Barangay 176  Susano Road  Zabarte",value:"Barangay 176  Susano Road  Zabarte"},{label:"Barangay 175 TODA  Barangay 175  Camarin Road  Zabarte",value:"Barangay 175  Camarin Road  Zabarte"},{label:"Barangay 170 TODA  Barangay 170  Zabarte  Quirino Highway",value:"Barangay 170  Zabarte  Quirino Highway"},{label:"Barangay 171 TODA  Barangay 171  Zabarte  SM Fairview",value:"Barangay 171  Zabarte  SM Fairview"},{label:"Barangay 172 TODA  Barangay 172  Quirino Highway  Zabarte",value:"Barangay 172  Quirino Highway  Zabarte"}],oe=["Individual Operator","TODA Member","Transport Cooperative","Corporation"],he={franchise_fee:250,sticker_id_fee:150,inspection_fee:100},W=ke=>{if(!ke)return{valid:!1,error:""};const de=ke.replace(/\s/g,"").toUpperCase(),Ue=/^[A-Z]{3}\d{4}$/.test(de);return{valid:Ue,formatted:de,error:Ue?"":"Plate number must be in 3-letter, 4-digit format (e.g., ABC1234)"}},ve=ke=>{if(!ke)return{valid:!1,error:""};const de=ke.replace(/\s/g,"").toUpperCase(),ie=de.length===17;return{valid:ie,formatted:de,error:ie?"":"Chassis number must be exactly 17 characters"}},Qe=ke=>{if(!ke)return{valid:!1,error:""};const de=ke.replace(/\s/g,"").toUpperCase(),ie=de.length>=8&&de.length<=12;return{valid:ie,formatted:de,error:ie?"":"Engine number must be between 8-12 characters"}},Ze=ke=>{if(!ke)return{valid:!1,error:""};const de=ke.replace(/\s/g,""),Ue=/^\d{7,8}$/.test(de);return{valid:Ue,formatted:de,error:Ue?"":"OR number must be 7-8 digits"}},J=ke=>{if(!ke)return{valid:!1,error:""};const de=ke.replace(/\s/g,""),Ue=/^\d{7,8}$/.test(de);return{valid:Ue,formatted:de,error:Ue?"":"CR number must be 7-8 digits"}},He=ke=>{if(!ke)return{valid:!1,error:""};const de=ke.replace(/\s/g,"");return{valid:de.length>0,formatted:de,error:""}},xt=ke=>{if(!ke)return{valid:!1,error:""};const de=new Date().getFullYear(),ie=parseInt(ke),Ue=/^\d{4}$/.test(ke)&&ie<=de&&ie>=1900;return{valid:Ue,formatted:ke,error:Ue?"":"Year must be a valid 4-digit year (1900-present)"}},Xe=async()=>{if(!q.id_number||!q.plate_number)return!1;T(!0);try{const ke=await fetch("/backend/franchise_permit/check_duplicate.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_number:q.id_number,plate_number:q.plate_number,permit_subtype:q.permit_subtype,current_application_id:q.mtop_application_id||null})});if(!ke.ok)throw new Error(`HTTP error! status: ${ke.status}`);const de=await ke.json();return de.success?de.hasDuplicate?(D({hasDuplicate:!0,message:de.message||`You already have a ${q.permit_subtype} application in progress for this vehicle. Application ID: ${de.duplicate_id}, Status: ${de.status}`,duplicateDetails:de.duplicateDetails}),!0):(D({hasDuplicate:!1,message:"",duplicateDetails:null}),!1):(D({hasDuplicate:!1,message:"Unable to check for duplicates. Please try again.",duplicateDetails:null}),!1)}catch(ke){return console.error("Error checking for duplicates:",ke),D({hasDuplicate:!1,message:"Error checking for duplicate applications.",duplicateDetails:null}),!1}finally{T(!1)}},Ct=ke=>{if(!ke)return;const de={},ie={...q};if(["first_name","last_name","middle_initial","home_address","contact_number","email","citizenship","birth_date","id_type","id_number","make_brand","model","engine_number","chassis_number","plate_number","year_acquired","color","vehicle_type","lto_or_number","lto_cr_number","lto_expiration_date","mv_file_number","district","route_zone","barangay_of_operation","toda_name"].forEach(ot=>{ke[ot]&&(ie[ot]=ke[ot],de[ot]=!0)}),ie.operator_type="TODA Member",de.operator_type=!0,ke.application_id&&(ie.mtop_application_id=ke.application_id),ie.plate_number){const ot=W(ie.plate_number);ot.valid&&(ie.plate_number=ot.formatted)}if(ie.chassis_number){const ot=ve(ie.chassis_number);ot.valid&&(ie.chassis_number=ot.formatted)}if(ie.engine_number){const ot=Qe(ie.engine_number);ot.valid&&(ie.engine_number=ot.formatted)}if(ie.lto_or_number){const ot=Ze(ie.lto_or_number);ot.valid&&(ie.lto_or_number=ot.formatted)}if(ie.lto_cr_number){const ot=J(ie.lto_cr_number);ot.valid&&(ie.lto_cr_number=ot.formatted)}if(ie.id_number){const ot=He(ie.id_number);ot.valid&&(ie.id_number=ot.formatted)}if(ie.year_acquired){const ot=xt(ie.year_acquired);ot.valid&&(ie.year_acquired=ot.formatted)}["engine_number","chassis_number","lto_or_number","lto_cr_number"].forEach(ot=>de[ot]=!0),Qt(ie),E(de),B(ke)},_e=()=>{const ke={...q};Object.keys(j).forEach(de=>ke[de]=""),Qt(ke),E({}),B(null),y(de=>({...de,canProceed:!1,message:"Auto-filled data has been cleared. Please validate MTOP again."}))},Se=async()=>{let ke={};if(q.permit_subtype==="FRANCHISE"){if(!q.mtop_application_id||!q.mtop_plate_number)return Ye("Please enter MTOP Application ID and Plate Number for validation."),!1;ke={application_id:q.mtop_application_id,plate_number:q.mtop_plate_number,permit_subtype:q.permit_subtype}}else{if(!q.id_number||!q.plate_number)return Ye("Please complete your ID number and plate number before validation."),!1;ke={id_number:q.id_number,plate_number:q.plate_number,permit_subtype:q.permit_subtype}}v(!0);try{const de=await fetch("/backend/franchise_permit/check_mtop.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ke)});if(!de.ok)throw new Error(`HTTP error! status: ${de.status}`);const ie=await de.json();if(ie.success)if(q.permit_subtype==="FRANCHISE"){const Ue=ie.mtopStatus&&ie.mtopStatus.toLowerCase()==="approved";return ie.hasExistingMTOP&&Ue?(ie.permitDetails?(Ct(ie.permitDetails),y({hasExistingPermit:!0,permitDetails:ie.permitDetails,message:" Valid MTOP permit found! Data has been auto-filled for your franchise application.",canProceed:!0}),dt.fire({icon:"success",title:"MTOP Permit Found",html:`
                  <div style="padding: 20px 0; min-height: 150px;">
                    <p style="font-size: 16px; margin-bottom: 15px; color: #333;">Fetching existing MTOP permit details...</p>
                    <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 20px;">
                      <p style="font-size: 15px; color: #555; line-height: 1.6;">Valid MTOP permit found! Data has been auto-filled for your franchise application.</p>
                    </div>
                    <p style="font-size: 14px; color: #888; margin-top: 20px;">Loading permit information, please wait...</p>
                  </div>
                `,timer:2e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1,customClass:{popup:"swal-tall-popup",htmlContainer:"swal-tall-content"},willClose:()=>{ne(!0)}})):(y({hasExistingPermit:!0,permitDetails:ie.permitDetails,message:` Valid MTOP permit found! (ID: ${ie.application_id}, Status: ${ie.mtopStatus}). You may proceed with Franchise application.`,canProceed:!0}),dt.fire({icon:"success",title:"MTOP Permit Found",html:`
                  <div style="padding: 20px 0; min-height: 150px;">
                    <p style="font-size: 16px; margin-bottom: 15px; color: #333;">Fetching existing MTOP permit details...</p>
                    <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 20px;">
                      <p style="font-size: 15px; color: #555; line-height: 1.6;">Valid MTOP permit found! (ID: ${ie.application_id})<br>You may proceed with Franchise application.</p>
                    </div>
                    <p style="font-size: 14px; color: #888; margin-top: 20px;">Loading permit information, please wait...</p>
                  </div>
                `,timer:2e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1,customClass:{popup:"swal-tall-popup",htmlContainer:"swal-tall-content"},willClose:()=>{ne(!0)}})),!0):ie.hasExistingMTOP&&!Ue?(y({hasExistingPermit:!0,permitDetails:ie.permitDetails,message:` MTOP permit found but status is "${ie.mtopStatus}". You need an APPROVED MTOP permit before applying for Franchise.`,canProceed:!1}),!1):(y({hasExistingPermit:!1,permitDetails:null,message:"No existing MTOP permit found with the provided details. Please apply for MTOP first.",canProceed:!1}),!1)}else{const Ue=ie.mtopStatus&&ie.mtopStatus.toLowerCase()==="approved";return ie.hasExistingMTOP&&Ue?(y({hasExistingPermit:!0,permitDetails:ie.permitDetails,message:`You already have an APPROVED MTOP permit (ID: ${ie.application_id}). Please renew your existing permit instead.`,canProceed:!1}),!1):ie.hasExistingMTOP&&!Ue?(y({hasExistingPermit:!0,permitDetails:ie.permitDetails,message:`You have a MTOP application with status "${ie.mtopStatus}". Please wait for it to be approved.`,canProceed:!1}),!1):(y({hasExistingPermit:!1,permitDetails:null,message:"No existing MTOP permit found. You may proceed with MTOP application.",canProceed:!0}),!0)}else return y({hasExistingPermit:!1,permitDetails:null,message:ie.message||"Unable to verify existing permits. Please try again.",canProceed:!1}),!1}catch(de){return console.error("Error checking MTOP permit:",de),y({hasExistingPermit:!1,permitDetails:null,message:" Error checking existing permits. Please check your connection and try again.",canProceed:!1}),Ye(`Network error: ${de.message}`),!1}finally{v(!1)}};C.useEffect(()=>{if(q.permit_subtype==="MTOP"&&q.plate_number&&q.plate_number.length>=3&&q.id_number&&q.id_number.length>=1){const ke=setTimeout(()=>{Se(),Xe()},1e3);return()=>clearTimeout(ke)}},[q.plate_number,q.id_number,q.permit_subtype]),C.useEffect(()=>{if(q.permit_subtype==="FRANCHISE"&&q.mtop_application_id&&q.mtop_plate_number){const ke=setTimeout(()=>{Xe()},1e3);return()=>clearTimeout(ke)}},[q.mtop_application_id,q.mtop_plate_number,q.permit_subtype]),C.useEffect(()=>{q.permit_subtype==="MTOP"?(y({hasExistingPermit:!1,permitDetails:null,message:"",canProceed:!1}),B(null),E({})):q.permit_subtype==="FRANCHISE"&&(B(null),E({}),y({hasExistingPermit:!1,permitDetails:null,message:"",canProceed:!1}))},[q.permit_subtype]);const Ve=ke=>{const{name:de,value:ie,type:Ue,checked:bt,files:ot}=ke.target;if(q.permit_subtype==="FRANCHISE"&&j[de]){Ye("This field is auto-filled from your MTOP record and cannot be modified.");return}if(de==="contact_number"){const Dt=ie.replace(/[^0-9]/g,"");let jt=Dt;if(Dt.length>0&&(Dt.startsWith("09")||(jt="09"+Dt),jt=jt.slice(0,11)),Qt(kt=>({...kt,[de]:jt})),jt.length>0&&jt.length!==11)g(kt=>({...kt,contact_number:"Contact number must be 11 digits (09XXXXXXXXX)"}));else if(A.contact_number){const kt={...A};delete kt.contact_number,g(kt)}}else if(Ue==="file"){const Dt=ot[0];if(Qt(jt=>({...jt,[de]:Dt||null})),de==="barangay_clearance"&&Dt&&Qt(jt=>({...jt,barangay_clearance_id:""})),A[de]){const jt={...A};delete jt[de],g(jt)}}else if(Ue==="checkbox")Qt(Dt=>({...Dt,[de]:bt}));else{let Dt=ie;switch(de){case"plate_number":case"mtop_plate_number":const jt=ie.replace(/\s/g,"").toUpperCase();if(Dt=jt,jt){const bs=W(jt);if(!bs.valid&&jt.length>=3)g(ds=>({...ds,[de]:bs.error}));else if(A[de]){const ds={...A};delete ds[de],g(ds)}}break;case"chassis_number":const kt=ie.replace(/\s/g,"").toUpperCase();if(Dt=kt,kt){const bs=ve(kt);if(!bs.valid&&kt.length>=10)g(ds=>({...ds,[de]:bs.error}));else if(A[de]){const ds={...A};delete ds[de],g(ds)}}break;case"engine_number":const gs=ie.replace(/\s/g,"").toUpperCase();if(Dt=gs,gs){const bs=Qe(gs);if(!bs.valid&&gs.length>=6)g(ds=>({...ds,[de]:bs.error}));else if(A[de]){const ds={...A};delete ds[de],g(ds)}}break;case"lto_or_number":const Xs=ie.replace(/\s/g,"");if(Dt=Xs,Xs){const bs=Ze(Xs);if(!bs.valid&&Xs.length>=6)g(ds=>({...ds,[de]:bs.error}));else if(A[de]){const ds={...A};delete ds[de],g(ds)}}break;case"lto_cr_number":const Ss=ie.replace(/\s/g,"");if(Dt=Ss,Ss){const bs=J(Ss);if(!bs.valid&&Ss.length>=6)g(ds=>({...ds,[de]:bs.error}));else if(A[de]){const ds={...A};delete ds[de],g(ds)}}break;case"id_number":const Is=ie.replace(/\s/g,"");if(Dt=Is,Is){const bs=He(Is);if(!bs.valid)g(ds=>({...ds,[de]:bs.error}));else if(A[de]){const ds={...A};delete ds[de],g(ds)}}break;case"year_acquired":if(ie){const bs=xt(ie);if(!bs.valid)g(ds=>({...ds,[de]:bs.error}));else if(A[de]){const ds={...A};delete ds[de],g(ds)}}Dt=ie;break;case"barangay_clearance_id":ie&&ie.trim()!==""&&Qt(bs=>({...bs,barangay_clearance:null})),Dt=ie;break;default:Dt=ie}if(Qt(jt=>({...jt,[de]:Dt})),de==="lto_expiration_date"&&ie){const jt=new Date;if(jt.setHours(0,0,0,0),new Date(ie)<jt)g(gs=>({...gs,lto_expiration_date:"LTO Expiration Date cannot be in the past. Please select a future date."}));else if(A.lto_expiration_date){const gs={...A};delete gs.lto_expiration_date,g(gs)}}de==="permit_subtype"&&(y({hasExistingPermit:!1,permitDetails:null,message:"",canProceed:!1}),B(null),E({}),D({hasDuplicate:!1,message:"",duplicateDetails:null})),(de==="mtop_application_id"||de==="mtop_plate_number")&&(y({hasExistingPermit:!1,permitDetails:null,message:"",canProceed:!1}),B(null),E({}),D({hasDuplicate:!1,message:"",duplicateDetails:null}))}},et=ke=>{if(!ke)return null;const de=URL.createObjectURL(ke),ie=ke.type.split("/")[0];m({url:de,type:ie,name:ke.name})},vt=()=>{u.url&&URL.revokeObjectURL(u.url),m({})},Mt=ke=>{dt.fire({icon:"success",title:"Success!",text:ke,confirmButtonColor:rt.success})},Ye=ke=>{dt.fire({icon:"error",title:"Error",text:ke,confirmButtonColor:rt.danger})},Et=ke=>ke.toLowerCase().replace(/[^a-z0-9]/g,""),Gt=(ke,de,ie=.5)=>{const Ue=Et(ke),bt=Et(de);if(Ue===bt)return 1;if(Ue.includes(bt)||bt.includes(Ue))return .95;const ot=Ue.length>bt.length?Ue:bt,Dt=Ue.length>bt.length?bt:Ue;if(ot.length===0)return 0;let jt=0;for(let gs=0;gs<Dt.length;gs++)ot.includes(Dt[gs])&&jt++;const kt=jt/ot.length;return kt>=ie?kt:0},ee={barangay_clearance:["barangay clearance","brgy clearance","barangay certification","clearance","certification","punong barangay","barangay captain"],lto_or_cr:["certificate of registration","official receipt","lto","land transportation","motor vehicle","plate number","chassis"],drivers_license:["driver","license","licence","lto","land transportation office","restriction","dl no","license no","philippine","republic of the philippines"],proof_of_residency:["barangay","residency","certificate","resident","indigency"]},Ie={"Driver's License (LTO)":["driver","license","licence","lto","land transportation","department of transportation","dl no","non-professional","professional","restriction","conditions"],"Passport (DFA)":["passport","dfa","department of foreign affairs","p <","republic of the philippines passport","date of issue","date of expiry","nationality"],"Philippine National ID (PhilSys ID)":["philsys","philippine national id","national id","phil id","republic of the philippines","pambansang pagkakakilanlan","philippine identification card","pcn","philippine identification system"],UMID:["umid","unified multi-purpose id","unified multi-purpose identification"],"Postal ID":["postal","philpost","philippine postal","post office","postal id"],"Voter's ID (COMELEC)":["voter","comelec","commission on elections","voter's identification","registered voter","precinct"],"PRC ID":["prc","professional regulation commission","professional id","licensed","registration no","prc id"],"PhilHealth ID":["philhealth","philippine health insurance","phic","philhealth id","member id"],"SSS ID":["sss","social security system","social security","sss no","ss number","sss id"],"GSIS ID (GSIS e-Card)":["gsis","government service insurance","gsis e-card","e-card","gsis member"],"TIN ID (BIR)":["tin","tax identification","bir","bureau of internal revenue","tin id","taxpayer"],"Senior Citizen ID":["senior citizen","senior","osca","office of senior citizens","elderly","senior citizen id"],"PWD ID":["pwd","person with disability","disability","pwd id","persons with disability","national council on disability"],"OFW ID (iDOLE Card)":["ofw","idole","overseas filipino worker","dole","department of labor","ofw id","i-dole"],"Alien Certificate of Registration (ACR)":["acr","alien certificate","alien registration","bureau of immigration","immigration","acr i-card"],"OWWA ID":["owwa","overseas workers welfare","owwa id","welfare administration"],"Barangay ID / Barangay Certification":["barangay id","barangay certification","barangay certificate","barangay clearance","brgy","punong barangay","barangay captain"],"NBI Clearance":["nbi","national bureau of investigation","nbi clearance","no criminal record","no derogatory"],"Police Clearance":["police clearance","police","pnp","philippine national police","clearance certificate"],"Seaman's Book":["seaman","seaman's book","seafarer","marina","maritime industry","seamans book"],"School ID (with current registration)":["school id","student","university","college","enrollment","school year","student id"],"Company ID (with current employment)":["company id","employee","employee id","employment","corporate","company identification"],"IBP ID (Integrated Bar of the Philippines)":["ibp","integrated bar","bar of the philippines","attorney","lawyer","ibp id"],"HDMF / Pag-IBIG ID":["hdmf","pag-ibig","pagibig","home development mutual fund","pag ibig","hdmf id"]},ue=ke=>{const de=ke.toLowerCase(),ie=[];for(const[Ue,bt]of Object.entries(Ie)){let ot=0;for(const Dt of bt)de.includes(Dt.toLowerCase())&&ot++;ot>0&&ie.push({type:Ue,confidence:ot/bt.length,matchCount:ot})}return ie.length===0?null:(ie.sort((Ue,bt)=>bt.matchCount-Ue.matchCount||bt.confidence-Ue.confidence),ie[0])},fe=ke=>{const de=ke.toLowerCase();let ie={type:null,score:0,matchedKeywords:[]};for(const[Ue,bt]of Object.entries(ee)){let ot=0;const Dt=[];bt.forEach(kt=>{de.includes(kt.toLowerCase())&&(ot++,Dt.push(kt))});const jt=ot/bt.length;jt>ie.score&&(ie={type:Ue,score:jt,matchedKeywords:Dt})}return ie.score>.1?ie:{type:null,score:0,matchedKeywords:[]}},xe=ke=>{const de=q.first_name?.trim(),ie=q.last_name?.trim(),Ue=q.middle_initial?.trim();if(!de||!ie)return null;const bt=ke.toLowerCase(),ot=de.toLowerCase(),Dt=ie.toLowerCase(),jt=Gt(de,ke),kt=Gt(ie,ke),gs=Ue?Gt(Ue,ke):0,Xs=jt>0||bt.includes(ot),Ss=kt>0||bt.includes(Dt),Is=Ue?gs>0||bt.includes(Ue.toLowerCase()):!1,bs=Xs&&Ss;return{firstName:{matched:Xs,confidence:jt,value:de},lastName:{matched:Ss,confidence:kt,value:ie},middleInitial:Ue?{matched:Is,confidence:gs,value:Ue}:null,anyMatch:bs,allMatch:bs&&(!Ue||Is)}},Me=async ke=>{try{const de=await ke.arrayBuffer(),ie=await Lp({data:de}).promise,Ue=[];for(let bt=1;bt<=Math.min(ie.numPages,3);bt++){const ot=await ie.getPage(bt),Dt=ot.getViewport({scale:2}),jt=document.createElement("canvas"),kt=jt.getContext("2d");jt.height=Dt.height,jt.width=Dt.width,await ot.render({canvasContext:kt,viewport:Dt}).promise,Ue.push(jt.toDataURL("image/png"))}return Ue}catch(de){return console.error("Error converting PDF to images:",de),[]}},ct=async()=>{const ke=q.barangay_clearance_id.trim();if(!ke){dt.fire({icon:"error",title:"Verification Failed",text:"Please enter a barangay clearance ID to verify",timer:3e3,timerProgressBar:!0,confirmButtonColor:rt.danger});return}le(!0);try{const de=await fetch("/backend/barangay_permit/admin_fetch.php");if(!de.ok)throw new Error(`HTTP error! status: ${de.status}`);const ie=await de.json();let Ue=[];ie.success&&ie.data?Ue=ie.data:Array.isArray(ie)?Ue=ie:Ue=ie.permits||[];const bt=Ue.find(ot=>{const Dt=ot.applicant_id?ot.applicant_id.toString():"",jt=ot.permit_id?ot.permit_id.toString():"",kt=ke.toString();return(Dt===kt||jt===kt)&&ot.status==="approved"});bt?(De(ot=>({...ot,[ke]:bt})),bt.permit_id&&Qt(ot=>({...ot,barangay_permit_id:bt.permit_id})),dt.fire({icon:"success",title:"ID Verified!",html:'<p style="font-size: 16px; color: #333;">Barangay clearance ID is VALID!</p><p style="font-size: 14px; color: #666; margin-top: 10px;">Status: Approved</p>',timer:3e3,timerProgressBar:!0,showConfirmButton:!1,confirmButtonColor:rt.success})):dt.fire({icon:"error",title:"Verification Failed",text:"Barangay clearance ID not found or not approved. Please check the ID and try again.",timer:3e3,timerProgressBar:!0,confirmButtonColor:rt.danger})}catch(de){console.error("Error verifying barangay clearance ID:",de),dt.fire({icon:"error",title:"Error",text:"Error verifying barangay clearance ID. Please try again.",timer:3e3,timerProgressBar:!0,confirmButtonColor:rt.danger})}finally{le(!1)}},Pt=async()=>{const ke=q.mayors_permit_id.trim();if(!ke){dt.fire({icon:"error",title:"Error",text:"Please enter a Mayor's Permit ID to verify",confirmButtonColor:rt.danger});return}Te(!0);try{const de=await fetch("/backend/business_permit/admin_fetch.php");if(!de.ok)throw new Error(`HTTP error! status: ${de.status}`);const ie=await de.json();let Ue=[];ie.success&&ie.data?Ue=ie.data:Array.isArray(ie)?Ue=ie:Ue=ie.permits||[];const bt=Ue.find(ot=>{const Dt=ot.applicant_id?ot.applicant_id.toString():"",jt=ot.permit_id?ot.permit_id.toString():"",kt=ke.toString();return(Dt===kt||jt===kt)&&ot.status==="APPROVED"});bt?(gt(ot=>({...ot,[ke]:bt})),bt.applicant_id&&Qt(ot=>({...ot,mayors_permit_applicant_id:bt.applicant_id})),dt.fire({icon:"success",title:"Verification Successful!",html:`
            <div style="text-align: left;">
              <p><strong>Business Name:</strong> ${bt.business_name||"N/A"}</p>
              <p><strong>Applicant ID:</strong> ${bt.applicant_id||"N/A"}</p>
              <p><strong>Owner:</strong> ${bt.owner_first_name||""} ${bt.owner_last_name||""}</p>
              <p><strong>Status:</strong> ${bt.status}</p>
            </div>
          `,confirmButtonColor:rt.success})):dt.fire({icon:"error",title:"Verification Failed",text:"Mayor's Permit ID not found or not approved. Please check the ID and try again.",confirmButtonColor:rt.danger})}catch(de){console.error("Error verifying Mayor's Permit ID:",de),dt.fire({icon:"error",title:"Error",text:"Error verifying Mayor's Permit ID. Please try again.",confirmButtonColor:rt.danger})}finally{Te(!1)}},ts=async(ke,de)=>{if(!de){Ye("Please upload a document first");return}O(ie=>({...ie,[ke]:{...ie[ke],isVerifying:!0,isVerified:!1,progress:0}})),dt.fire({title:"Verifying Document",html:"<p>Please wait while we verify your document using AI...</p>",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{dt.showLoading()}});try{let ie=[];if(de.type==="application/pdf"){if(te(10),ie=await Me(de),ie.length===0)throw new Error("Failed to process PDF")}else ie=[URL.createObjectURL(de)];te(30);const Ue=await bA.createWorker("eng");let bt="";for(let bs=0;bs<ie.length;bs++){const ds=await Ue.recognize(ie[bs]);bt+=ds.data.text+`
`,te(30+40*(bs+1)/ie.length),O(xs=>({...xs,[ke]:{...xs[ke],progress:30+40*(bs+1)/ie.length}}))}await Ue.terminate(),te(80);const ot=fe(bt),Dt=xe(bt);let jt=!1,kt=[],gs=null,Xs=null,Ss=!1;if(ke==="drivers_license"){if(q.id_number){const ds=Et(q.id_number);let xr=bt.toLowerCase().includes(ds)||Gt(q.id_number,bt)>.8;if(!xr){const qr=[/license\s*no\.?\s*:?\s*(\S+)/i,/dl\s*no\.?\s*:?\s*(\S+)/i,/license\s*number\s*:?\s*(\S+)/i,/dl\s*number\s*:?\s*(\S+)/i];for(const mr of qr){const Uo=bt.match(mr);if(Uo&&Uo[1]){const Ln=Et(Uo[1]);if(Ln===ds||Ln.includes(ds)||ds.includes(Ln)){xr=!0;break}}}}gs={value:q.id_number,found:xr}}const bs=ue(bt);if(bs&&(Ss=!0,q.id_type)){const ds=q.id_type.toLowerCase(),xs=bs.type.toLowerCase(),xr=ds===xs||ds.includes(xs)||xs.includes(ds)||ds.includes("driver")&&xs.includes("driver")||ds.includes("license")&&xs.includes("license");Xs={expected:q.id_type,detected:bs.type,matched:xr,confidence:bs.confidence,matchCount:bs.matchCount}}}const Is=ke==="drivers_license"?Ss:ot.type===ke;if(!Is)kt=[`Wrong document type uploaded. Expected: ${{barangay_clearance:"Barangay Clearance",lto_or_cr:"LTO OR/CR",drivers_license:"Driver's License",proof_of_residency:"Proof of Residency"}[ke]||ke}`],jt=!1;else if(ke==="drivers_license"&&Ss){const bs=Dt?.anyMatch,ds=gs?.found,xs=Xs?.matched;if(bs&&ds&&xs)jt=!0;else{if(kt=["The following information could not be verified:"],bs)kt.push(" Owner name verified");else{const xr=Dt?.firstName?.matched,qr=Dt?.lastName?.matched;!xr&&!qr?kt.push(" Owner name not found in license"):xr?qr||kt.push(" Last name not found in license"):kt.push(" First name not found in license")}ds?kt.push(" License number verified"):kt.push(" License number not found in document"),xs?kt.push(" ID type verified"):Xs?kt.push(` ID type mismatch (Expected: ${Xs.expected}, Detected: ${Xs.detected})`):kt.push(" ID type could not be detected"),kt.push("Please ensure the license image is clear and all information is visible."),jt=!1}}else Dt?.anyMatch?jt=!0:(kt=["Owner name not found in document"],jt=!1);te(100),O(bs=>({...bs,[ke]:{isVerifying:!1,isVerified:jt,results:{documentType:ke==="drivers_license"?"drivers_license":ot.type,documentTypeMatched:Is,ownerName:Dt,idNumber:gs,idType:Xs,extractedText:bt.substring(0,500)},error:jt?null:kt.join(", "),progress:100}})),G({success:jt,documentType:ke,details:{documentTypeMatched:Is,ownerNameFound:Dt?.anyMatch,idNumberFound:gs?.found,idTypeMatched:Xs?.matched},invalidReasons:kt}),dt.fire({icon:jt?"success":"error",title:jt?"VALID DOCUMENT":"INVALID DOCUMENT",html:jt?'<p style="font-size: 16px;">The document has been successfully verified and is valid for use in this application.</p>':`<div style="text-align: left;">${kt.map(bs=>`<p style="margin: 8px 0;">${bs}</p>`).join("")}</div>`,confirmButtonText:jt?"Continue":"Close",confirmButtonColor:jt?rt.success:rt.danger,allowOutsideClick:!0})}catch(ie){console.error("Verification error:",ie),O(Ue=>({...Ue,[ke]:{isVerifying:!1,isVerified:!1,results:null,error:ie.message,progress:0}})),dt.fire({icon:"error",title:"Verification Failed",text:`Verification failed: ${ie.message}`,confirmButtonColor:rt.danger})}},as=()=>{if(P.isPaid){Ye("Payment has already been completed. You cannot make another payment.");return}let ke=0;if(q.franchise_fee_checked&&(ke+=he.franchise_fee),q.sticker_id_fee_checked&&(ke+=he.sticker_id_fee),q.inspection_fee_checked&&(ke+=he.inspection_fee),ke<=0){Ye("Please select at least one fee to pay.");return}const de=`FRAN-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ie={system:"franchise",ref:de,amount:ke.toFixed(2),purpose:`${q.permit_subtype} Application - ${q.plate_number||"New Application"}`,callback:"https://revenuetreasury.goserveph.com/citizen_dashboard/market/api/market_payment_api.php"};localStorage.setItem("payment_reference",de),localStorage.setItem("payment_amount",ke.toFixed(2)),localStorage.setItem("application_plate",q.plate_number||q.mtop_plate_number);const Ue=document.createElement("form");Ue.method="POST",Ue.action="https://revenuetreasury.goserveph.com/citizen_dashboard/digital/index.php",Ue.target="_blank",Object.entries(ie).forEach(([bt,ot])=>{const Dt=document.createElement("input");Dt.type="hidden",Dt.name=bt,Dt.value=ot,Ue.appendChild(Dt)}),document.body.appendChild(Ue),Ue.submit(),setTimeout(()=>{dt.fire({icon:"success",title:"Payment Successful!",text:"Your payment has been confirmed successfully! You can now proceed to the next step.",confirmButtonColor:rt.primary,confirmButtonText:"Continue"})},2e3),Zt(de)},Zt=ke=>{console.log("Starting payment polling for:",ke);const de=async()=>{try{const Ue=await fetch(`/backend/franchise_permit/get_payment_status.php?reference_id=${ke}`);if(!Ue.ok){console.error("HTTP error! status:",Ue.status);return}const bt=await Ue.text();console.log("Payment check raw response:",bt);let ot;try{ot=JSON.parse(bt)}catch{console.error("Failed to parse JSON:",bt);return}console.log("Payment status data:",ot),ot.success&&(Y({isPaid:!0,paymentMethod:"online",paymentDate:new Date().toISOString(),transactionId:ot.payment_id||ke,receiptNumber:ot.receipt_number||"N/A"}),clearInterval(ie),setModalTitle("Payment Successful!"),setModalMessage("Your payment has been confirmed successfully! You can now proceed to the next step."),L(!0),Qt(Dt=>({...Dt,payment_method:"online",payment_status:"paid"})))}catch(Ue){console.error("Error checking payment:",Ue)}},ie=setInterval(de,5e3);setTimeout(()=>{clearInterval(ie),console.log("Payment polling stopped after 10 minutes")},600*1e3),de()},Be=ke=>{if(P.isPaid){Ye("Payment has already been completed. Payment method cannot be changed.");return}Qt(de=>({...de,payment_method:ke}))},mt=ke=>{const de={};if(ke===1&&(q.permit_subtype==="FRANCHISE"&&!b.canProceed&&(de.mtop_validation="Please validate your existing MTOP permit before proceeding"),M.hasDuplicate&&(de.duplicate=M.message)),ke===2){if(q.first_name.trim()||(de.first_name="First name is required"),q.last_name.trim()||(de.last_name="Last name is required"),q.home_address.trim()||(de.home_address="Home address is required"),q.contact_number.trim()?q.contact_number.length!==11&&(de.contact_number="Contact number must be 11 digits (09XXXXXXXXX)"):de.contact_number="Contact number is required",q.email.trim()?/\S+@\S+\.\S+/.test(q.email)||(de.email="Email is invalid"):de.email="Email is required",q.citizenship||(de.citizenship="Citizenship is required"),q.birth_date||(de.birth_date="Birth date is required"),q.id_type||(de.id_type="ID type is required"),!q.id_number.trim())de.id_number="ID number is required";else{const ie=He(q.id_number);ie.valid||(de.id_number=ie.error)}q.permit_subtype==="MTOP"&&!q.operator_type&&(de.operator_type="Operator type is required")}if(ke===3){if(q.make_brand.trim()||(de.make_brand="Make/Brand is required"),q.model.trim()||(de.model="Model is required"),!q.engine_number.trim())de.engine_number="Engine number is required";else{const ie=Qe(q.engine_number);ie.valid||(de.engine_number=ie.error)}if(!q.chassis_number.trim())de.chassis_number="Chassis number is required";else{const ie=ve(q.chassis_number);ie.valid||(de.chassis_number=ie.error)}if(!q.plate_number.trim())de.plate_number="Plate number is required";else{const ie=W(q.plate_number);ie.valid||(de.plate_number=ie.error)}if(!q.year_acquired.trim())de.year_acquired="Year acquired is required";else{const ie=xt(q.year_acquired);ie.valid||(de.year_acquired=ie.error)}if(q.color.trim()||(de.color="Color is required"),q.vehicle_type.trim()||(de.vehicle_type="Vehicle type is required"),!q.lto_or_number.trim())de.lto_or_number="LTO OR number is required";else{const ie=Ze(q.lto_or_number);ie.valid||(de.lto_or_number=ie.error)}if(!q.lto_cr_number.trim())de.lto_cr_number="LTO CR number is required";else{const ie=J(q.lto_cr_number);ie.valid||(de.lto_cr_number=ie.error)}if(!q.lto_expiration_date)de.lto_expiration_date="LTO expiration date is required";else{const ie=new Date;ie.setHours(0,0,0,0),new Date(q.lto_expiration_date)<ie&&(de.lto_expiration_date="LTO Expiration Date cannot be in the past. Please select a future date.")}q.district.trim()||(de.district="District is required"),q.route_zone.trim()||(de.route_zone="Route is required"),q.barangay_of_operation.trim()||(de.barangay_of_operation="Barangay of operation is required"),q.permit_subtype==="FRANCHISE"&&!q.toda_name.trim()&&(de.toda_name="TODA name is required")}if(ke===4){const ie=[{name:"lto_cr_copy",label:"LTO CR Copy"},{name:"drivers_license",label:"Driver's License"}];!q.barangay_clearance_id&&!q.barangay_clearance&&(de.barangay_clearance="Barangay Clearance is required - either enter ID or upload document"),q.permit_subtype==="MTOP"&&ie.push({name:"nbi_clearance",label:"NBI Clearance"},{name:"police_clearance",label:"Police Clearance"},{name:"medical_certificate",label:"Medical Certificate"}),q.permit_subtype==="FRANCHISE"&&ie.push({name:"toda_endorsement",label:"TODA Endorsement"});let Ue=0;ie.forEach(bt=>{q[bt.name]?Ue++:de[bt.name]=`${bt.label} is required`}),Ue<ie.length&&(de.min_documents="All required documents must be uploaded"),q.drivers_license&&!V.drivers_license?.isVerified&&(de.drivers_license_verification=`Driver's License must be AI verified before proceeding. Click the "Verify" button.`)}if(ke===5)if(q.payment_method==="upload"){const ie=[{name:"franchise_fee",checked:q.franchise_fee_checked,receipt:q.franchise_fee_receipt},{name:"sticker_id_fee",checked:q.sticker_id_fee_checked,receipt:q.sticker_id_fee_receipt},{name:"inspection_fee",checked:q.inspection_fee_checked,receipt:q.inspection_fee_receipt}];let Ue=!1;ie.forEach(bt=>{bt.checked&&bt.receipt&&(Ue=!0)}),Ue||(de.payment="At least one fee must be checked and its receipt uploaded")}else q.franchise_fee_checked||q.sticker_id_fee_checked||q.inspection_fee_checked?P.isPaid||(de.payment='Please complete the online payment by clicking "Pay Now" before proceeding to the next step'):de.payment="Please select at least one fee to pay";return ke===6&&(q.applicant_signature||(de.applicant_signature="Applicant signature is required"),q.date_submitted||(de.date_submitted="Date of submission is required"),l||(de.declaration="You must agree to the declaration")),g(de),Object.keys(de).length===0},Nt=ke=>{const de={1:()=>q.permit_subtype?q.permit_subtype==="MTOP"?!M.hasDuplicate:q.permit_subtype==="FRANCHISE"?b.canProceed&&!M.hasDuplicate:!0:!1,2:()=>!q.first_name.trim()||!q.last_name.trim()||!q.home_address.trim()||!q.contact_number.trim()||q.contact_number.length!==11||!q.email.trim()||!/\S+@\S+\.\S+/.test(q.email)||!q.citizenship||!q.birth_date||!q.id_type||!q.id_number.trim()||!He(q.id_number).valid?!1:q.permit_subtype==="FRANCHISE"?!0:!(q.permit_subtype==="MTOP"&&!q.operator_type),3:()=>{if(!q.make_brand.trim()||!q.model.trim()||!q.engine_number.trim()||!Qe(q.engine_number).valid||!q.chassis_number.trim()||!ve(q.chassis_number).valid||!q.plate_number.trim()||!W(q.plate_number).valid||!q.year_acquired.trim()||!xt(q.year_acquired).valid||!q.color.trim()||!q.vehicle_type.trim()||!q.lto_or_number.trim()||!Ze(q.lto_or_number).valid||!q.lto_cr_number.trim()||!J(q.lto_cr_number).valid||!q.lto_expiration_date)return!1;const kt=new Date;return kt.setHours(0,0,0,0),!(new Date(q.lto_expiration_date)<kt||!q.district.trim()||!q.route_zone.trim()||!q.barangay_of_operation.trim()||q.permit_subtype==="FRANCHISE"&&!q.toda_name.trim())},4:()=>{const ie=[{file:q.lto_cr_copy},{file:q.drivers_license}],Ue=q.barangay_clearance_id||q.barangay_clearance;return q.permit_subtype==="MTOP"&&ie.push({file:q.nbi_clearance},{file:q.police_clearance},{file:q.medical_certificate}),q.permit_subtype==="FRANCHISE"&&ie.push({file:q.toda_endorsement}),Ue&&ie.every(bt=>bt.file)},5:()=>q.payment_method==="upload"?[{checked:q.franchise_fee_checked,receipt:q.franchise_fee_receipt},{checked:q.sticker_id_fee_checked,receipt:q.sticker_id_fee_receipt},{checked:q.inspection_fee_checked,receipt:q.inspection_fee_receipt}].some(Ue=>Ue.checked&&Ue.receipt):(q.franchise_fee_checked||q.sticker_id_fee_checked||q.inspection_fee_checked)&&P.isPaid,6:()=>q.applicant_signature&&q.date_submitted&&l,7:()=>!0};return de[ke]?de[ke]():!0},Ne=()=>`${q.first_name} ${q.middle_initial?q.middle_initial+".":""} ${q.last_name}`.trim(),Je=()=>{if(r<yt.length){if(q.permit_subtype==="FRANCHISE"&&r===1&&!b.canProceed){Ye("Please validate your existing MTOP permit before proceeding.");return}if(M.hasDuplicate&&r===1){Ye("You cannot proceed with a duplicate application. Please check your existing applications.");return}mt(r)&&(n(r+1),g({}))}},ht=async ke=>{ke.preventDefault(),r<yt.length-1?Je():r===yt.length-1?mt(r)&&(n(r+1),g({})):(await dt.fire({title:"Confirm Application Submission",html:`
          <div style="text-align: left;">
            <p style="margin-bottom: 15px;">You are about to submit your ${q.permit_subtype==="MTOP"?"MTOP":"Franchise"} application.</p>
            ${q.permit_subtype==="FRANCHISE"&&b.canProceed?`
              <div style="background-color: #EFF6FF; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #BFDBFE;">
                <p style="margin: 0; font-weight: 600; color: #1E40AF; margin-bottom: 8px;"> MTOP Permit Verified</p>
                <p style="margin: 0; font-size: 0.875rem;">Your MTOP permit has been validated.</p>
              </div>
            `:""}
            <div style="background-color: #F9FAFB; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
              <p style="margin: 0; font-weight: 600; margin-bottom: 8px;">Application Declaration:</p>
              <p style="margin: 0; font-size: 0.875rem;">I hereby declare that all information provided is true and correct to the best of my knowledge. I understand that any false information may result in the rejection of my application.</p>
            </div>
            <div style="background-color: #DBEAFE; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 2px solid #3B82F6;">
              <div style="display: flex; align-items: start;">
                <input type="checkbox" id="swal-confirm-checkbox" style="margin-top: 3px; margin-right: 10px; width: 18px; height: 18px; cursor: pointer;" />
                <label for="swal-confirm-checkbox" style="cursor: pointer; font-weight: 600; color: #1E40AF; margin: 0;">
                  I confirm that I have reviewed all information and documents, and I am ready to submit this application.
                </label>
              </div>
            </div>
            <p style="font-size: 0.875rem; color: #6B7280; margin: 0;">Please check the box above to proceed with submission.</p>
          </div>
        `,icon:"question",showCancelButton:!0,confirmButtonText:"Confirm & Submit",cancelButtonText:"Cancel",confirmButtonColor:rt.success,cancelButtonColor:rt.danger,reverseButtons:!0,preConfirm:()=>document.getElementById("swal-confirm-checkbox").checked?!0:(dt.showValidationMessage("You must confirm that you have reviewed all information before submitting"),!1)})).isConfirmed&&Ke()},It=()=>{r>1&&n(r-1)},Pe=()=>{dt.fire({title:"Change Permit Type?",text:"Are you sure you want to go back and change the permit type? Your current progress will be lost.",icon:"warning",showCancelButton:!0,confirmButtonColor:rt.success,cancelButtonColor:rt.danger,confirmButtonText:"Yes, Go Back",cancelButtonText:"Cancel",customClass:{title:"swal-title-center",htmlContainer:"swal-text-center"}}).then(ke=>{ke.isConfirmed&&dt.fire({title:"Redirecting...",html:'<p style="text-align: center;">Taking you back to permit type selection...</p>',timer:2e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1,customClass:{title:"swal-title-center",htmlContainer:"swal-text-center"},didOpen:()=>{dt.showLoading()},willClose:()=>{e("/user/franchise/type")}})})},Ke=async()=>{if(q.permit_subtype==="FRANCHISE"&&!b.canProceed){Ye("Please complete MTOP validation before submitting.");return}if(await Xe()){Ye("Duplicate application detected. You cannot submit another application for the same vehicle.");return}o(!0);const de="/backend/franchise_permit/franchise_permit.php";try{const ie=new FormData;Object.keys(q).forEach(jt=>{const kt=q[jt];kt!=null&&(kt instanceof File?ie.append(jt,kt):typeof kt=="boolean"?ie.append(jt,kt?"1":"0"):ie.append(jt,String(kt)))}),ie.append("permit_type",s),ie.append("payment_method",q.payment_method),ie.append("franchise_fee_checked",q.franchise_fee_checked?"1":"0"),ie.append("sticker_id_fee_checked",q.sticker_id_fee_checked?"1":"0"),ie.append("inspection_fee_checked",q.inspection_fee_checked?"1":"0");const Ue=localStorage.getItem("user_id")||localStorage.getItem("goserveph_user_id")||"0";ie.append("user_id",Ue),q.permit_subtype==="FRANCHISE"&&q.mtop_application_id&&ie.append("mtop_reference_id",q.mtop_application_id);const ot=await(await fetch(de,{method:"POST",body:ie})).text();let Dt;try{Dt=JSON.parse(ot)}catch(jt){console.error("Failed to parse JSON:",jt),ot.includes("<b>")||ot.includes("PHP Error")?Ye("Backend error occurred. Please check server logs."):Ye("Invalid response from server");return}if(Dt.success){Mt(`Application submitted successfully! Application ID: ${Dt.data.application_id}`);try{ql("Franchise Permit",Dt.data?.application_id||"",{permit_type:q.permit_subtype||"New"})}catch(jt){console.warn("Activity log failed:",jt)}setTimeout(()=>{e("/user/permittracker")},3e3)}else Ye(`Error: ${Dt.message||"Unknown error"}`)}catch(ie){console.error("Submit error:",ie),Ye("Failed to submit application. Please check your connection.")}finally{o(!1)}},nt=ke=>{const de=ke.target.files[0];if(de){const ie=new FileReader;ie.onload=Ue=>Qt(bt=>({...bt,applicant_signature:Ue.target.result})),ie.readAsDataURL(de)}},zt=(ke,de,ie="text",Ue=[],bt=!1)=>{const ot=q.permit_subtype==="FRANCHISE"&&j[ke];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:[de," ",bt&&"*"]}),ie==="select"?t.jsxs("select",{name:ke,value:q[ke]||"",onChange:Ve,className:`w-full p-3 border rounded-lg ${A[ke]?"border-red-500":"border-black"} ${ot?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font},required:bt,disabled:ot,children:[t.jsxs("option",{value:"",children:["Select ",de.replace("*","").trim()]}),Ue.map(Dt=>t.jsx("option",{value:Dt,children:Dt},Dt))]}):t.jsx("input",{type:ie,name:ke,value:q[ke]||"",onChange:Ve,placeholder:de,className:`w-full p-3 border rounded-lg ${A[ke]?"border-red-500":"border-black"} ${ot?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font},required:bt,readOnly:ot}),ot&&t.jsx("div",{className:"absolute top-9 right-0 mt-1 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})}),A[ke]&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A[ke]}),!A[ke]&&ke==="plate_number"&&t.jsx("p",{className:`text-xs mt-1 ${q.plate_number&&q.plate_number.length===7?"text-green-600":"text-red-600"}`,children:"Format: 3 letters followed by 4 digits (e.g., ABC1234)"}),!A[ke]&&ke==="chassis_number"&&t.jsx("p",{className:`text-xs mt-1 ${q.chassis_number&&q.chassis_number.length===17?"text-green-600":"text-red-600"}`,children:"Must be exactly 17 characters"}),!A[ke]&&ke==="engine_number"&&t.jsx("p",{className:`text-xs mt-1 ${q.engine_number&&q.engine_number.length>=8&&q.engine_number.length<=12?"text-green-600":"text-red-600"}`,children:"Must be 8-12 characters"}),!A[ke]&&(ke==="lto_or_number"||ke==="lto_cr_number")&&t.jsx("p",{className:`text-xs mt-1 ${q[ke]&&q[ke].length>=7&&q[ke].length<=8?"text-green-600":"text-red-600"}`,children:"Must be 7-8 digits"}),!A[ke]&&ke==="year_acquired"&&t.jsx("p",{className:`text-xs mt-1 ${q.year_acquired&&q.year_acquired.length===4&&parseInt(q.year_acquired)>=1900&&parseInt(q.year_acquired)<=new Date().getFullYear()?"text-green-600":"text-red-600"}`,children:"Format: YYYY (e.g., 2023)"})]})},is=()=>{switch(r){case 1:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:rt.secondary},children:"Select Permit Type"}),M.hasDuplicate&&t.jsx("div",{className:"p-4 rounded-lg border mb-4 bg-red-50 border-red-200",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Ks,{className:"w-5 h-5 mr-2 mt-0.5 text-red-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-red-700",children:" Duplicate Application Detected"}),t.jsx("p",{className:"text-xs mt-1 text-red-600",children:M.message}),M.duplicateDetails&&t.jsxs("div",{className:"mt-2 text-xs",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Application ID:"})," ",M.duplicateDetails.application_id]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Status:"})," ",M.duplicateDetails.status]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Date Submitted:"})," ",M.duplicateDetails.date_submitted]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Remarks:"})," ",M.duplicateDetails.remarks||"None"]})]}),t.jsx("button",{type:"button",onClick:()=>e("/user/permittracker"),className:"mt-2 px-3 py-1 text-xs bg-red-100 text-red-700 hover:bg-red-200 rounded transition-colors",children:"View Your Applications"})]})]})}),q.permit_subtype&&t.jsx("div",{className:`p-4 rounded-lg border mb-4 ${b.hasExistingPermit?q.permit_subtype==="MTOP"?"bg-red-50 border-red-200":"bg-green-50 border-green-200":q.permit_subtype==="MTOP"?"bg-blue-50 border-blue-200":"bg-yellow-50 border-yellow-200"}`,children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(lB,{className:`w-5 h-5 mr-2 mt-0.5 ${b.hasExistingPermit?q.permit_subtype==="MTOP"?"text-red-600":"text-green-600":q.permit_subtype==="MTOP"?"text-blue-600":"text-yellow-600"}`}),t.jsxs("div",{children:[t.jsx("p",{className:`text-sm font-medium ${b.hasExistingPermit?q.permit_subtype==="MTOP"?"text-red-700":"text-green-700":q.permit_subtype==="MTOP"?"text-blue-700":"text-yellow-700"}`,children:q.permit_subtype==="MTOP"?"MTOP Application Requirements":"Franchise Application Requirements"}),t.jsx("p",{className:"text-xs mt-1",style:{color:rt.secondary,fontFamily:rt.font},children:q.permit_subtype==="MTOP"?" Must NOT have existing approved MTOP permit (to avoid duplicates)":" MUST have existing APPROVED MTOP permit first"}),b.message&&t.jsx("p",{className:"text-xs mt-1 font-medium",children:b.message})]})]})}),q.permit_subtype==="FRANCHISE"&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black mb-4",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:rt.primary},children:"Validate Existing MTOP Permit"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"Existing MTOP Application ID *"}),t.jsx("input",{type:"text",name:"mtop_application_id",value:q.mtop_application_id||"",onChange:Ve,placeholder:"Enter your MTOP Application ID",className:"w-full p-3 border border-black rounded-lg",style:{color:rt.secondary,fontFamily:rt.font}}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter the application ID from your approved MTOP permit"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"Plate Number *"}),t.jsx("input",{type:"text",name:"mtop_plate_number",value:q.mtop_plate_number||"",onChange:Ve,placeholder:"ABC1234",className:`w-full p-3 border rounded-lg ${A.mtop_plate_number?"border-red-500":"border-black"}`,style:{color:rt.secondary,fontFamily:rt.font,textTransform:"uppercase"}}),A.mtop_plate_number&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:A.mtop_plate_number}),t.jsx("p",{className:`text-xs mt-1 ${q.mtop_plate_number&&q.mtop_plate_number.length===7?"text-green-600":"text-red-600"}`,children:"Format: 3 letters followed by 4 digits (e.g., ABC1234)"})]})]}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{type:"button",onClick:Se,disabled:p||!q.mtop_application_id||!q.mtop_plate_number,style:{background:p||!q.mtop_application_id||!q.mtop_plate_number?"#9CA3AF":rt.primary},className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:p?"Validating...":"Validate MTOP Permit"})}),b.message&&t.jsx("div",{className:`mt-4 p-3 rounded-lg ${b.canProceed?"bg-green-100 border border-green-300 text-green-800":"bg-red-100 border border-red-300 text-red-800"}`,children:t.jsxs("div",{className:"flex items-center",children:[b.canProceed?t.jsx(Ht,{className:"w-5 h-5 mr-2"}):t.jsx(ls,{className:"w-5 h-5 mr-2"}),t.jsx("span",{className:"text-sm",children:b.message})]})})]}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"p-4 border-2 border-blue-300 rounded-lg bg-blue-50 hover:bg-blue-100 transition-colors duration-200 cursor-pointer",onClick:()=>Qt(ke=>({...ke,permit_subtype:"MTOP"})),children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"permit_subtype",value:"MTOP",checked:q.permit_subtype==="MTOP",onChange:Ve,className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h4",{className:"font-bold text-lg",style:{color:rt.primary},children:"Motorized Tricycle Operator's Permit (MTOP)"}),t.jsx("p",{className:"text-sm mt-1",style:{color:rt.secondary},children:"For individual tricycle operators. This permit allows you to operate a tricycle as an independent operator."}),t.jsx("p",{className:"text-xs mt-2 font-semibold text-blue-700",children:"REQUIREMENT: No existing approved MTOP permit"})]})]})}),t.jsx("div",{className:"p-4 border-2 border-green-300 rounded-lg bg-green-50 hover:bg-green-100 transition-colors duration-200 cursor-pointer",onClick:()=>Qt(ke=>({...ke,permit_subtype:"FRANCHISE"})),children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"permit_subtype",value:"FRANCHISE",checked:q.permit_subtype==="FRANCHISE",onChange:Ve,className:"w-5 h-5 text-green-600"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h4",{className:"font-bold text-lg",style:{color:rt.success},children:"Transport Permit"}),t.jsx("p",{className:"text-sm mt-1",style:{color:rt.secondary},children:"For TODA (Tricycle Operators and Drivers Association) members or corporations operating multiple units under a franchise."}),t.jsx("p",{className:"text-xs mt-2 font-semibold text-green-700",children:"REQUIREMENT: Must have existing APPROVED MTOP permit"})]})]})}),t.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("p",{className:"text-sm font-medium",style:{color:rt.secondary},children:["Selected: ",t.jsx("span",{className:"font-bold",children:q.permit_subtype==="MTOP"?"Motorized Tricycle Operator's Permit (MTOP)":"Franchise Permit"})]}),b.message&&t.jsx("p",{className:`text-xs mt-2 ${b.canProceed?"text-green-600":"text-red-600"}`,children:b.message})]})]})})]});case 2:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:rt.secondary},children:q.permit_subtype==="MTOP"?"Operator Information":"Applicant Information"}),q.permit_subtype==="FRANCHISE"&&w&&t.jsxs("div",{className:"p-4 rounded-lg border mb-4 bg-blue-50 border-blue-200",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-full mr-3",children:t.jsx(Ht,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-blue-700",children:" Data Auto-filled from MTOP (READ-ONLY)"}),t.jsx("p",{className:"text-xs mt-1 text-blue-600",children:'Your information has been automatically filled from your existing MTOP permit and cannot be modified. Fields marked with "Auto-filled" are read-only.'}),t.jsxs("p",{className:"text-xs mt-2 font-medium text-blue-700",children:["MTOP ID: ",w.application_id," | Status: ",w.status," | Plate: ",w.plate_number]})]})]}),t.jsx("div",{className:"flex justify-end mt-4",children:t.jsxs("button",{type:"button",onClick:_e,className:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors",children:[t.jsx(ls,{className:"w-4 h-4"}),"Clear Auto-filled Data"]})})]}),q.permit_subtype==="FRANCHISE"&&b.message&&t.jsx("div",{className:`p-4 rounded-lg border mb-4 ${b.canProceed?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Pr,{className:`w-5 h-5 mr-2 mt-0.5 ${b.canProceed?"text-green-600":"text-red-600"}`}),t.jsxs("div",{children:[t.jsx("p",{className:`text-sm font-medium ${b.canProceed?"text-green-700":"text-red-700"}`,children:b.canProceed?" Eligible for Franchise":" Not Eligible for Franchise"}),t.jsx("p",{className:"text-xs mt-1",style:{color:rt.secondary,fontFamily:rt.font},children:b.message})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[zt("first_name","First Name","text",[],!0),zt("last_name","Last Name","text",[],!0),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"Middle Initial"}),t.jsx("input",{type:"text",name:"middle_initial",value:q.middle_initial||"",onChange:Ve,placeholder:"M.I.",maxLength:"1",className:`w-full p-3 border rounded-lg border-black ${q.permit_subtype==="FRANCHISE"&&j.middle_initial?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font},readOnly:q.permit_subtype==="FRANCHISE"&&j.middle_initial}),q.permit_subtype==="FRANCHISE"&&j.middle_initial&&t.jsx("div",{className:"absolute top-9 right-0 mt-1 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})})]}),zt("home_address","Home Address","text",[],!0),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"Contact Number *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"tel",name:"contact_number",value:q.contact_number,onChange:Ve,placeholder:"09XXXXXXXXX",maxLength:11,className:`w-full p-3 border rounded-lg ${A.contact_number?"border-red-500":"border-black"} ${q.permit_subtype==="FRANCHISE"&&j.contact_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font},readOnly:q.permit_subtype==="FRANCHISE"&&j.contact_number}),q.permit_subtype==="FRANCHISE"&&j.contact_number&&t.jsx("div",{className:"absolute top-0 right-0 mt-3 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})})]}),A.contact_number?t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A.contact_number}):t.jsx("p",{className:"text-gray-500 text-xs mt-1",style:{fontFamily:rt.font},children:"Format: 09XXXXXXXXX (11 digits total)"})]}),zt("email","Email Address","email",[],!0),zt("citizenship","Citizenship","select",Eq,!0),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"Date of Birth *"}),t.jsx("input",{type:"date",name:"birth_date",value:q.birth_date||"",onChange:Ve,className:`w-full p-3 border rounded-lg ${A.birth_date?"border-red-500":"border-black"} ${q.permit_subtype==="FRANCHISE"&&j.birth_date?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font},readOnly:q.permit_subtype==="FRANCHISE"&&j.birth_date}),q.permit_subtype==="FRANCHISE"&&j.birth_date&&t.jsx("div",{className:"absolute top-9 right-0 mt-1 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})}),A.birth_date&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A.birth_date})]}),zt("id_type","Valid ID Type","select",["Driver's License (LTO)","Passport (DFA)","Philippine National ID (PhilSys ID)","UMID","Postal ID","Voter's ID (COMELEC)","PRC ID","PhilHealth ID","SSS ID","GSIS ID (GSIS e-Card)","TIN ID (BIR)","Senior Citizen ID","PWD ID","OFW ID (iDOLE Card)","Alien Certificate of Registration (ACR)","OWWA ID","Barangay ID / Barangay Certification","NBI Clearance","Police Clearance","Seaman's Book","School ID (with current registration)","Company ID (with current employment)","IBP ID (Integrated Bar of the Philippines)","HDMF / Pag-IBIG ID"],!0),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"Valid ID Number *"}),t.jsx("input",{type:"text",name:"id_number",value:q.id_number||"",onChange:Ve,placeholder:"ID Number",className:`w-full p-3 border rounded-lg ${A.id_number?"border-red-500":"border-black"} ${q.permit_subtype==="FRANCHISE"&&j.id_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font},required:!0,readOnly:q.permit_subtype==="FRANCHISE"&&j.id_number}),q.permit_subtype==="FRANCHISE"&&j.id_number&&t.jsx("div",{className:"absolute top-9 right-0 mt-1 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})})]}),q.permit_subtype==="MTOP"&&zt("operator_type","Operator Type","select",oe,!0)]})]});case 3:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:rt.secondary},children:"Vehicle & Route Information"}),q.permit_subtype==="FRANCHISE"&&w&&t.jsx("div",{className:"p-4 rounded-lg border mb-4 bg-blue-50 border-blue-200",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-full mr-3",children:t.jsx(Ht,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-blue-700",children:" Vehicle & Route Data Auto-filled from MTOP (READ-ONLY)"}),t.jsx("p",{className:"text-xs mt-1 text-blue-600",children:"Vehicle and route information has been automatically filled from your existing MTOP permit and cannot be modified."})]})]})}),q.permit_subtype==="MTOP"&&b.message&&t.jsx("div",{className:`p-4 rounded-lg border mb-4 ${b.canProceed?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(lB,{className:`w-5 h-5 mr-2 mt-0.5 ${b.canProceed?"text-green-600":"text-red-600"}`}),t.jsxs("div",{children:[t.jsx("p",{className:`text-sm font-medium ${b.canProceed?"text-green-700":"text-red-700"}`,children:b.canProceed?" Eligible for MTOP Application":" Not Eligible for MTOP Application"}),t.jsx("p",{className:"text-xs mt-1",style:{color:rt.secondary,fontFamily:rt.font},children:b.message})]})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black mb-6",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:rt.primary},children:"Vehicle Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[zt("make_brand","Make / Brand","text",[],!0),zt("model","Model","text",[],!0),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"Engine Number *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",name:"engine_number",value:q.engine_number||"",onChange:Ve,placeholder:"Engine Number",maxLength:"12",className:`w-full p-3 border rounded-lg ${A.engine_number?"border-red-500":"border-black"} ${q.permit_subtype==="FRANCHISE"&&j.engine_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font,textTransform:"uppercase"},required:!0,readOnly:q.permit_subtype==="FRANCHISE"&&j.engine_number}),q.permit_subtype==="FRANCHISE"&&j.engine_number&&t.jsx("div",{className:"absolute top-0 right-0 mt-3 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})})]}),A.engine_number?t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A.engine_number}):t.jsx("p",{className:"text-gray-500 text-xs mt-1",style:{fontFamily:rt.font},children:"Must be 8-12 characters"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"Chassis Number *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",name:"chassis_number",value:q.chassis_number||"",onChange:Ve,placeholder:"Chassis Number",maxLength:"17",className:`w-full p-3 border rounded-lg ${A.chassis_number?"border-red-500":"border-black"} ${q.permit_subtype==="FRANCHISE"&&j.chassis_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font,textTransform:"uppercase"},required:!0,readOnly:q.permit_subtype==="FRANCHISE"&&j.chassis_number}),q.permit_subtype==="FRANCHISE"&&j.chassis_number&&t.jsx("div",{className:"absolute top-0 right-0 mt-3 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})})]}),A.chassis_number?t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A.chassis_number}):t.jsx("p",{className:"text-gray-500 text-xs mt-1",style:{fontFamily:rt.font},children:"Must be exactly 17 characters"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"Plate Number *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",name:"plate_number",value:q.plate_number||"",onChange:Ve,placeholder:"ABC1234",maxLength:"7",className:`w-full p-3 border rounded-lg ${A.plate_number?"border-red-500":"border-black"} ${q.permit_subtype==="FRANCHISE"&&j.plate_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font,textTransform:"uppercase"},required:!0,readOnly:q.permit_subtype==="FRANCHISE"&&j.plate_number}),q.permit_subtype==="FRANCHISE"&&j.plate_number&&t.jsx("div",{className:"absolute top-0 right-0 mt-3 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})})]}),A.plate_number?t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A.plate_number}):t.jsx("p",{className:"text-gray-500 text-xs mt-1",style:{fontFamily:rt.font},children:"Format: 3 letters followed by 4 digits (e.g., ABC1234)"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"Year Acquired *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",name:"year_acquired",value:q.year_acquired||"",onChange:Ve,placeholder:"YYYY",maxLength:"4",className:`w-full p-3 border rounded-lg ${A.year_acquired?"border-red-500":"border-black"} ${q.permit_subtype==="FRANCHISE"&&j.year_acquired?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font},required:!0,readOnly:q.permit_subtype==="FRANCHISE"&&j.year_acquired}),q.permit_subtype==="FRANCHISE"&&j.year_acquired&&t.jsx("div",{className:"absolute top-0 right-0 mt-3 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})})]}),A.year_acquired?t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A.year_acquired}):t.jsx("p",{className:"text-gray-500 text-xs mt-1",style:{fontFamily:rt.font},children:"Format: YYYY (e.g., 2023)"})]}),zt("color","Color ","text",[],!0),zt("vehicle_type","Vehicle Type ","select",["Tricycle","Motorcycle","Pedicabs","E-Tricycle"],!0),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"LTO OR Number *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",name:"lto_or_number",value:q.lto_or_number||"",onChange:Ve,placeholder:"OR Number",maxLength:"8",className:`w-full p-3 border rounded-lg ${A.lto_or_number?"border-red-500":"border-black"} ${q.permit_subtype==="FRANCHISE"&&j.lto_or_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font},required:!0,readOnly:q.permit_subtype==="FRANCHISE"&&j.lto_or_number}),q.permit_subtype==="FRANCHISE"&&j.lto_or_number&&t.jsx("div",{className:"absolute top-0 right-0 mt-3 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})})]}),A.lto_or_number?t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A.lto_or_number}):t.jsx("p",{className:`text-xs mt-1 ${q.lto_or_number&&q.lto_or_number.length>=7&&q.lto_or_number.length<=8?"text-green-600":"text-red-600"}`,style:{fontFamily:rt.font},children:"Must be 7-8 digits"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"LTO CR Number *"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",name:"lto_cr_number",value:q.lto_cr_number||"",onChange:Ve,placeholder:"CR Number",maxLength:"8",className:`w-full p-3 border rounded-lg ${A.lto_cr_number?"border-red-500":"border-black"} ${q.permit_subtype==="FRANCHISE"&&j.lto_cr_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font},required:!0,readOnly:q.permit_subtype==="FRANCHISE"&&j.lto_cr_number}),q.permit_subtype==="FRANCHISE"&&j.lto_cr_number&&t.jsx("div",{className:"absolute top-0 right-0 mt-3 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})})]}),A.lto_cr_number?t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A.lto_cr_number}):t.jsx("p",{className:`text-xs mt-1 ${q.lto_or_number&&q.lto_or_number.length>=7&&q.lto_or_number.length<=8?"text-green-600":"text-red-600"}`,style:{fontFamily:rt.font},children:"Must be 7-8 digits"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"LTO Expiration Date *"}),t.jsx("input",{type:"date",name:"lto_expiration_date",value:q.lto_expiration_date||"",onChange:Ve,className:`w-full p-3 border rounded-lg ${A.lto_expiration_date?"border-red-500":"border-black"} ${q.permit_subtype==="FRANCHISE"&&j.lto_expiration_date?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font},readOnly:q.permit_subtype==="FRANCHISE"&&j.lto_expiration_date}),q.permit_subtype==="FRANCHISE"&&j.lto_expiration_date&&t.jsx("div",{className:"absolute top-9 right-0 mt-1 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})}),A.lto_expiration_date&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A.lto_expiration_date})]}),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"MV File Number"}),t.jsx("input",{type:"text",name:"mv_file_number",value:q.mv_file_number||"",onChange:Ve,placeholder:"MV File Number",className:`w-full p-3 border border-black rounded-lg ${q.permit_subtype==="FRANCHISE"&&j.mv_file_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font},readOnly:q.permit_subtype==="FRANCHISE"&&j.mv_file_number}),q.permit_subtype==="FRANCHISE"&&j.mv_file_number&&t.jsx("div",{className:"absolute top-9 right-0 mt-1 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})})]}),zt("district","District ","text",[],!0)]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:rt.primary},children:"Route & Operation Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"Route / Zone *"}),t.jsx("input",{list:"route-list",name:"route_zone",value:q.route_zone,onChange:Ve,placeholder:"Select or type route",className:`w-full p-3 border rounded-lg ${A.route_zone?"border-red-500":"border-black"} ${q.permit_subtype==="FRANCHISE"&&j.route_zone?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font},readOnly:q.permit_subtype==="FRANCHISE"&&j.route_zone}),t.jsx("datalist",{id:"route-list",children:Le.map(ke=>t.jsx("option",{value:ke.label},ke.value))}),q.permit_subtype==="FRANCHISE"&&j.route_zone&&t.jsx("div",{className:"absolute top-9 right-0 mt-1 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})}),A.route_zone&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A.route_zone})]}),q.permit_subtype==="FRANCHISE"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"TODA Name *"}),t.jsx("input",{list:"toda-list",name:"toda_name",value:q.toda_name,onChange:Ve,placeholder:"Select or type TODA",className:`w-full p-3 border rounded-lg ${A.toda_name?"border-red-500":"border-black"} ${q.permit_subtype==="FRANCHISE"&&j.toda_name?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font},readOnly:q.permit_subtype==="FRANCHISE"&&j.toda_name}),t.jsx("datalist",{id:"toda-list",children:ze.map(ke=>t.jsx("option",{value:ke},ke))}),q.permit_subtype==="FRANCHISE"&&j.toda_name&&t.jsx("div",{className:"absolute top-9 right-0 mt-1 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})}),A.toda_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A.toda_name})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"TODA President Certificate"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"toda_president_cert",onChange:Ve,accept:".jpg,.jpeg,.png,.pdf",className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:rt.font}})]}),q.toda_president_cert&&t.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[t.jsxs("p",{className:"text-green-600 text-xs flex items-center",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Uploaded: ",q.toda_president_cert.name]}),t.jsx("button",{type:"button",onClick:()=>et(q.toda_president_cert),className:"text-xs text-blue-600 hover:text-blue-800",children:"Preview"})]})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"Barangay of Operation *"}),t.jsx("input",{list:"barangay-list",name:"barangay_of_operation",value:q.barangay_of_operation,onChange:Ve,placeholder:"Select or type barangay",className:`w-full p-3 border rounded-lg ${A.barangay_of_operation?"border-red-500":"border-black"} ${q.permit_subtype==="FRANCHISE"&&j.barangay_of_operation?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:rt.secondary,fontFamily:rt.font},readOnly:q.permit_subtype==="FRANCHISE"&&j.barangay_of_operation}),t.jsx("datalist",{id:"barangay-list",children:Oe.map(ke=>t.jsx("option",{value:ke},ke))}),q.permit_subtype==="FRANCHISE"&&j.barangay_of_operation&&t.jsx("div",{className:"absolute top-9 right-0 mt-1 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Auto-filled"]})}),A.barangay_of_operation&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A.barangay_of_operation})]}),q.permit_subtype==="FRANCHISE"&&t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"Company/Organization Name (Optional)"}),t.jsx("input",{type:"text",name:"company_name",value:q.company_name,onChange:Ve,placeholder:"Company/Organization Name",className:"w-full p-3 border border-black rounded-lg",style:{color:rt.secondary,fontFamily:rt.font}})]})]})]})]});case 4:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:rt.secondary},children:"Required Documents"}),t.jsxs("p",{className:"text-sm mb-4 text-gray-600",style:{fontFamily:rt.font},children:[t.jsx("span",{className:"text-red-600 font-bold",children:"* All required documents must be uploaded."})," Documents marked with * are required for ",q.permit_subtype==="MTOP"?"MTOP":"Franchise"," application."]}),A.min_documents&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg mb-4",children:t.jsx("p",{className:"text-red-600 font-medium",style:{fontFamily:rt.font},children:A.min_documents})}),t.jsxs("div",{className:"space-y-4",children:[q.permit_subtype==="FRANCHISE"&&t.jsxs("div",{className:"flex flex-col p-4 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"flex items-center font-medium",children:t.jsx("span",{style:{color:rt.secondary,fontFamily:rt.font},children:"Mayor's Permit Verification (Optional)"})}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"If you have an existing Mayor's Permit, you can verify it here by entering your Permit ID or Applicant ID"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",name:"mayors_permit_id",value:q.mayors_permit_id||"",onChange:Ve,placeholder:"Enter Mayor's Permit ID or Applicant ID",className:"flex-1 p-3 border border-black rounded-lg",style:{fontFamily:rt.font}}),t.jsx("button",{type:"button",onClick:Pt,disabled:me||!q.mayors_permit_id.trim(),className:`px-4 py-3 rounded-lg font-medium text-white ${me||!q.mayors_permit_id.trim()?"bg-gray-400 cursor-not-allowed":Ae[q.mayors_permit_id]?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:me?t.jsx(Or,{className:"w-5 h-5 animate-spin"}):Ae[q.mayors_permit_id]?"Verified":"Verify"})]}),Ae[q.mayors_permit_id]&&t.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-2",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," Mayor's Permit ID verified successfully"]}),q.mayors_permit_applicant_id&&t.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:t.jsxs("p",{className:"text-sm text-green-700",children:[t.jsx("strong",{children:"Applicant ID:"})," ",q.mayors_permit_applicant_id]})})]})]}),[{name:"proof_of_residency",label:"Proof of Residency",description:"Utility bill, lease agreement, or any document proving your residency"},{name:"barangay_clearance",label:"Barangay Clearance *",description:"Clearance from your barangay of residence - either upload file OR enter Barangay Clearance ID",specialType:"barangayClearance"},...q.permit_subtype==="FRANCHISE"?[{name:"toda_endorsement",label:"TODA Endorsement *",description:"Endorsement letter from the Tricycle Operators and Drivers Association"}]:[],{name:"lto_or_cr",label:"LTO OR Copy",description:"Official Receipt from LTO"},{name:"lto_cr_copy",label:"LTO CR Copy *",description:"Certificate of Registration from LTO"},{name:"drivers_license",label:"Driver's License *",description:"Valid driver's license of the operator"},...q.permit_subtype==="MTOP"?[{name:"nbi_clearance",label:"NBI Clearance *",description:"Valid NBI clearance certificate"},{name:"police_clearance",label:"Police Clearance *",description:"Police clearance from local police station"},{name:"medical_certificate",label:"Medical Certificate *",description:"Medical certificate from accredited clinic/hospital"}]:[],{name:"insurance_certificate",label:"Insurance Certificate",description:"Comprehensive insurance coverage for the vehicle",optional:!0},{name:"emission_test",label:"Emission Test",description:"Latest emission test result",optional:!0},{name:"id_picture",label:"2x2 ID Picture",description:"Recent 2x2 ID photo",optional:!0},{name:"official_receipt",label:"Official Receipt",description:"Official receipt for payment",optional:!0}].map(ke=>t.jsxs("div",{className:"flex flex-col p-4 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"mb-3",children:[t.jsxs("label",{className:"flex items-center font-medium",children:[t.jsx("span",{className:`${ke.optional?"":"text-red-600"}`,style:{color:ke.optional?rt.secondary:rt.danger,fontFamily:rt.font},children:ke.label}),ke.optional&&t.jsx("span",{className:"ml-2 text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded",children:"Optional"})]}),ke.description&&t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ke.description})]}),ke.specialType==="barangayClearance"?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 text-sm font-medium",style:{color:rt.secondary,fontFamily:rt.font},children:"Barangay Clearance ID (Alternative to Upload)"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",name:"barangay_clearance_id",value:q.barangay_clearance_id||"",onChange:Ve,placeholder:"Enter Barangay Clearance ID",className:"flex-1 p-3 border border-black rounded-lg",style:{color:rt.secondary,fontFamily:rt.font}}),t.jsx("button",{type:"button",onClick:ct,disabled:se||!q.barangay_clearance_id.trim(),className:`px-4 py-3 rounded-lg font-medium text-white ${se||!q.barangay_clearance_id.trim()?"bg-gray-400 cursor-not-allowed":ye[q.barangay_clearance_id]?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:se?t.jsx(Or,{className:"w-5 h-5 animate-spin"}):ye[q.barangay_clearance_id]?"Verified":"Verify"})]}),ye[q.barangay_clearance_id]&&t.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," ID verified successfully"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 text-sm font-medium",style:{color:rt.secondary,fontFamily:rt.font},children:"Or Upload Barangay Clearance Document"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"barangay_clearance",onChange:Ve,accept:".jpg,.jpeg,.png,.pdf",className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:rt.font}})]}),q.barangay_clearance&&t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsxs("button",{type:"button",onClick:()=>et(q.barangay_clearance),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100",children:[t.jsx(ws,{className:"w-4 h-4"})," Preview"]}),t.jsx("button",{type:"button",onClick:()=>ts("barangay_clearance",q.barangay_clearance),disabled:V.barangay_clearance?.isVerifying,className:`flex items-center gap-1 px-3 py-1 text-sm rounded border ${V.barangay_clearance?.isVerified?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700"}`,children:V.barangay_clearance?.isVerifying?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):V.barangay_clearance?.isVerified?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(Pr,{className:"w-4 h-4"})," Verify"]})})]})]})]}),q.barangay_clearance&&V.barangay_clearance?.isVerifying&&t.jsxs("div",{className:"p-3 border border-blue-300 rounded-lg bg-blue-50",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-600",children:[t.jsx("span",{children:"Verifying document..."}),t.jsxs("span",{children:[V.barangay_clearance.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:t.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all",style:{width:`${V.barangay_clearance.progress}%`}})})]}),(q.barangay_clearance_id||q.barangay_clearance)&&t.jsx("div",{className:"flex items-center justify-between p-2 bg-green-50 border border-green-200 rounded",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ht,{className:"w-4 h-4 text-green-600 mr-2"}),t.jsx("span",{className:"text-sm text-green-700",children:q.barangay_clearance_id?`Barangay Clearance ID: ${q.barangay_clearance_id}`:q.barangay_clearance?`Uploaded: ${q.barangay_clearance.name}`:""})]})}),!q.barangay_clearance_id&&!q.barangay_clearance&&A.barangay_clearance&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A.barangay_clearance})]}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:ke.name,onChange:Ve,accept:".jpg,.jpeg,.png,.pdf",className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:rt.font},required:!ke.optional})]}),q[ke.name]&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 border border-green-200 rounded mt-2",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ht,{className:"w-4 h-4 text-green-600 mr-2"}),t.jsxs("span",{className:"text-sm text-green-700",children:["Uploaded: ",q[ke.name].name]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{type:"button",onClick:()=>et(q[ke.name]),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100",children:[t.jsx(ws,{className:"w-4 h-4"})," Preview"]}),V[ke.name]&&t.jsx("button",{type:"button",onClick:()=>ts(ke.name,q[ke.name]),disabled:V[ke.name]?.isVerifying,className:`flex items-center gap-1 px-3 py-1 text-sm rounded border ${V[ke.name]?.isVerified?"bg-green-100 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700"}`,children:V[ke.name]?.isVerifying?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"})," Verifying..."]}):V[ke.name]?.isVerified?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"})," Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(Pr,{className:"w-4 h-4"})," Verify"]})})]})]}),V[ke.name]?.isVerifying&&t.jsxs("div",{className:"p-3 border border-blue-300 rounded-lg bg-blue-50 mt-2",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-blue-600",children:[t.jsx("span",{children:"Verifying document..."}),t.jsxs("span",{children:[V[ke.name].progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:t.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all",style:{width:`${V[ke.name].progress}%`}})})]})]}),A[ke.name]&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:rt.font},children:A[ke.name]})]})]},ke.name))]})]});case 5:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:rt.secondary},children:"Payment Information"}),t.jsx("p",{className:"text-sm mb-4 text-gray-600",style:{fontFamily:rt.font},children:t.jsx("span",{className:"text-red-600 font-bold",children:"* Please select your payment method and choose which fees to pay."})}),A.payment&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg mb-4",children:t.jsx("p",{className:"text-red-600 font-medium",style:{fontFamily:rt.font},children:A.payment})}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black mb-6",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:rt.primary},children:"Select Payment Method"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all duration-300 ${q.payment_method==="upload"?"border-green-500 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onClick:()=>Be("upload"),children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 ${q.payment_method==="upload"?"border-green-500 bg-green-500":"border-gray-300"}`,children:q.payment_method==="upload"&&t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx(Ht,{className:"w-3 h-3 text-white"})})}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold",children:"Upload Receipts"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Upload payment receipts from offline payment"})]})]})}),t.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all duration-300 ${q.payment_method==="online"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onClick:()=>Be("online"),children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 ${q.payment_method==="online"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:q.payment_method==="online"&&t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx(Ht,{className:"w-3 h-3 text-white"})})}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold",children:"Pay Online Now"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Pay securely via Revenue Treasury portal"})]})]})})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:rt.primary},children:"Select Fees to Pay"}),t.jsxs("div",{className:"space-y-4",children:[[{name:"franchise_fee",label:q.permit_subtype==="MTOP"?"MTOP Application Fee":"Franchise Fee",amount:he.franchise_fee,checked:q.franchise_fee_checked},{name:"sticker_id_fee",label:"Sticker / ID Fee",amount:he.sticker_id_fee,checked:q.sticker_id_fee_checked},{name:"inspection_fee",label:"Inspection Fee",amount:he.inspection_fee,checked:q.inspection_fee_checked}].map(ke=>t.jsxs("div",{className:"flex flex-col p-4 border border-gray-300 rounded-lg",children:[t.jsxs("label",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",name:`${ke.name}_checked`,checked:ke.checked,onChange:Ve,className:"w-5 h-5 mr-2",style:{color:rt.primary}}),t.jsx("span",{className:"font-medium",style:{color:rt.secondary,fontFamily:rt.font},children:ke.label})]}),t.jsxs("span",{className:"font-bold",style:{color:rt.primary},children:["",ke.amount.toFixed(2)]})]}),ke.checked&&q.payment_method==="online"&&t.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded",children:t.jsx("p",{className:"text-sm text-blue-700",children:"This fee will be included in your online payment. You will be redirected to the Revenue Treasury portal to complete payment."})}),ke.checked&&q.payment_method==="upload"&&t.jsx("div",{className:"mt-3 space-y-3",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 text-sm font-medium",style:{color:rt.secondary,fontFamily:rt.font},children:"OR Number"}),t.jsx("input",{type:"text",name:`${ke.name}_or`,value:q[`${ke.name}_or`]||"",onChange:Ve,placeholder:"OR Number",className:"w-full p-2 border border-black rounded",style:{fontFamily:rt.font},required:ke.checked})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 text-sm font-medium",style:{color:rt.secondary,fontFamily:rt.font},children:"Receipt *"}),t.jsxs("div",{className:"flex items-center gap-3 p-2 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-4 h-4 text-gray-500"}),t.jsx("input",{type:"file",name:`${ke.name}_receipt`,onChange:Ve,accept:".jpg,.jpeg,.png,.pdf",className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:rt.font},required:ke.checked})]}),q[`${ke.name}_receipt`]&&t.jsxs("p",{className:"text-green-600 text-xs mt-1 flex items-center",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Uploaded: ",q[`${ke.name}_receipt`].name]})]})]})}),A[`${ke.name}_receipt`]&&t.jsx("p",{className:"text-red-600 text-sm mt-2",children:A[`${ke.name}_receipt`]})]},ke.name)),t.jsx("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-300 rounded-lg",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",style:{color:rt.secondary},children:"Total Amount:"}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Selected ",q.payment_method==="online"?"for online payment":"for receipt upload"]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-2xl font-bold",style:{color:rt.primary},children:["",((q.franchise_fee_checked?he.franchise_fee:0)+(q.sticker_id_fee_checked?he.sticker_id_fee:0)+(q.inspection_fee_checked?he.inspection_fee:0)).toFixed(2)]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[[q.franchise_fee_checked,q.sticker_id_fee_checked,q.inspection_fee_checked].filter(Boolean).length," fee(s) selected"]})]})]})}),P.isPaid&&t.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ht,{className:"w-6 h-6 text-green-600 mr-3"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-green-700",children:" Payment Completed"}),t.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Payment Method: ",P.paymentMethod==="online"?"Online Payment":"Receipt Upload"]}),P.paymentDate&&t.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Paid on: ",P.paymentDate]}),P.transactionId&&t.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Transaction ID: ",P.transactionId]})]})]})}),q.payment_method==="online"&&t.jsxs("div",{className:"mt-6",children:[t.jsxs("button",{type:"button",onClick:as,disabled:!q.franchise_fee_checked&&!q.sticker_id_fee_checked&&!q.inspection_fee_checked,style:{background:!q.franchise_fee_checked&&!q.sticker_id_fee_checked&&!q.inspection_fee_checked?"#9CA3AF":rt.primary},className:"w-full py-3 rounded-lg font-semibold text-white transition-colors duration-300 flex items-center justify-center gap-3",children:[t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Pay Now via Revenue Treasury (Opens in New Tab)"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"You will be redirected to the Revenue Treasury secure payment portal in a new tab"})]}),t.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Payment Instructions:"}),t.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1",children:[t.jsx("li",{children:" Select at least one fee to proceed"}),t.jsx("li",{children:' For online payment: Click "Pay Now" to complete payment in a new tab'}),t.jsx("li",{children:" For receipt upload: Upload clear photos/scans of official receipts"}),t.jsx("li",{children:" All fees are non-refundable once paid"}),t.jsx("li",{children:" Keep your payment references for verification"})]})]})]})]})]});case 6:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:rt.secondary},children:"Declaration and Signature"}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:[t.jsxs("div",{className:"mb-8 p-6 border-2 border-red-200 bg-red-50 rounded-lg",children:[t.jsx("h4",{className:"font-bold text-lg mb-4 text-red-700",children:"LEGAL DECLARATION"}),t.jsxs("div",{className:"space-y-3 text-sm",style:{fontFamily:rt.font},children:[t.jsxs("p",{children:["I, ",t.jsx("span",{className:"font-bold",children:Ne()||"[Full Name]"}),", hereby solemnly declare that:"]}),t.jsxs("ol",{className:"list-decimal ml-5 space-y-2",children:[t.jsx("li",{children:"All information provided in this application form is true, complete, and correct to the best of my knowledge;"}),t.jsx("li",{children:"I am the registered owner/authorized representative of the tricycle unit described in this application;"}),t.jsx("li",{children:"The vehicle is roadworthy and complies with all safety and emission standards;"}),t.jsx("li",{children:"I have secured all necessary clearances, permits, and insurance coverage;"}),t.jsx("li",{children:"I shall abide by all traffic rules, regulations, and ordinances of Caloocan City;"}),t.jsx("li",{children:"I understand that any false statement or misrepresentation shall be grounds for:"}),t.jsxs("ul",{className:"list-disc ml-8 mt-2 space-y-1",children:[t.jsx("li",{children:"Immediate cancellation of the permit"}),t.jsx("li",{children:"Administrative and criminal liability"}),t.jsx("li",{children:"Blacklisting from future applications"}),t.jsx("li",{children:"Fines and penalties as per existing laws"})]}),t.jsx("li",{children:"I agree to the processing of my personal data for the purpose of this application in accordance with the Data Privacy Act of 2012;"}),t.jsx("li",{children:"I consent to inspections and monitoring by authorized personnel."})]}),t.jsx("p",{className:"mt-4 font-semibold",children:"Republic Act No. 4136 - Land Transportation and Traffic Code"}),t.jsx("p",{className:"text-xs italic",children:'"Any person who makes any false statement in any document required by this Act shall, upon conviction, be punished by a fine of not less than 5,000 nor more than 20,000 or imprisonment of not less than 6 months nor more than 1 year, or both."'})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:["Applicant's Signature ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 h-32 flex items-center justify-center",children:q.applicant_signature?t.jsxs("div",{className:"text-center",children:[t.jsx("img",{src:q.applicant_signature,alt:"Applicant Signature",className:"max-h-20 mx-auto"}),t.jsx("p",{className:"text-xs mt-2 text-green-600",children:"Signature uploaded"}),t.jsx("button",{type:"button",onClick:()=>Qt(ke=>({...ke,applicant_signature:""})),className:"text-xs text-red-600 mt-1 hover:text-red-800",children:"Remove"})]}):t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-gray-500 mb-2",children:"Upload your signature"}),t.jsx("input",{type:"file",accept:"image/*",onChange:nt,className:"hidden",id:"signature-upload"}),t.jsx("label",{htmlFor:"signature-upload",className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100 transition-colors cursor-pointer",children:"Upload Signature"}),A.applicant_signature&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:A.applicant_signature})]})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:["Date of Submission ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"date",name:"date_submitted",value:q.date_submitted||new Date().toISOString().split("T")[0],readOnly:!0,className:"w-full p-3 border border-black rounded-lg bg-gray-100 cursor-not-allowed",style:{color:rt.secondary,fontFamily:rt.font},required:!0}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Submission date is automatically set to today's date"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:rt.secondary},children:"Barangay Captain/Authorized Signatory (For office use only)"}),t.jsx("input",{type:"text",name:"barangay_captain_signature",value:q.barangay_captain_signature,onChange:Ve,placeholder:"Will be filled by Barangay Office",className:"w-full p-3 border border-gray-300 bg-gray-50 rounded-lg",style:{color:rt.secondary,fontFamily:rt.font},disabled:!0})]})]}),t.jsx("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("input",{type:"checkbox",id:"final-declaration",checked:l,onChange:ke=>c(ke.target.checked),className:`w-5 h-5 mt-1 text-green-600 border-gray-300 rounded focus:ring-green-500 ${A.declaration?"border-red-500":""}`}),t.jsxs("label",{htmlFor:"final-declaration",className:"ml-3",children:[t.jsx("span",{className:"font-bold text-red-700",children:"FINAL DECLARATION AND CONSENT *"}),t.jsxs("p",{className:"text-sm mt-1",style:{color:rt.secondary,fontFamily:rt.font},children:["I, ",t.jsx("span",{className:"font-semibold",children:Ne()||"[Full Name]"}),", have read, understood, and agree to all terms and conditions stated in this declaration. I certify that all information provided is accurate and I accept full responsibility for its veracity."]}),A.declaration&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:A.declaration})]})]})})]})]});case 7:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:rt.secondary},children:"Review Your Application"}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg mb-4 border-l-4 border-blue-500",children:[t.jsxs("h5",{className:"font-bold text-lg mb-2",style:{color:rt.primary},children:[" Application Type: ",q.permit_subtype==="MTOP"?"Motorized Tricycle Operator's Permit (MTOP)":"Franchise Permit"]}),q.permit_subtype==="MTOP"&&t.jsxs("p",{className:"text-sm",style:{color:rt.secondary},children:[t.jsx("span",{className:"font-semibold",children:"Operator Type:"})," ",q.operator_type]}),q.permit_subtype==="FRANCHISE"&&q.mtop_application_id&&t.jsxs("p",{className:"text-sm",style:{color:rt.secondary},children:[t.jsx("span",{className:"font-semibold",children:"MTOP Reference ID:"})," ",q.mtop_application_id]})]}),q.permit_subtype==="FRANCHISE"&&w&&t.jsx("div",{className:"p-4 rounded-lg border mb-4 bg-blue-50 border-blue-200",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-full mr-3",children:t.jsx(Ht,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-blue-700",children:" Data Auto-filled from MTOP (READ-ONLY)"}),t.jsxs("p",{className:"text-xs mt-1 text-blue-600",children:["Your application has been pre-filled with data from your existing MTOP permit (ID: ",q.mtop_application_id,")"]})]})]})}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg mb-4",children:[t.jsx("h5",{className:"font-bold text-lg mb-2",style:{color:rt.primary},children:"Payment Summary"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",style:{color:rt.secondary},children:"Payment Method:"}),t.jsx("p",{className:`font-bold ${q.payment_method==="online"?"text-blue-600":"text-green-600"}`,children:q.payment_method==="online"?"Online Payment":"Receipt Upload"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",style:{color:rt.secondary},children:"Total Amount:"}),t.jsxs("p",{className:"text-2xl font-bold",style:{color:rt.primary},children:["",((q.franchise_fee_checked?he.franchise_fee:0)+(q.sticker_id_fee_checked?he.sticker_id_fee:0)+(q.inspection_fee_checked?he.inspection_fee:0)).toFixed(2)]})]})]})]}),t.jsxs("div",{children:[t.jsxs("h5",{className:"font-semibold mb-3 text-lg",style:{color:rt.primary},children:[" ",q.permit_subtype==="MTOP"?"Operator Information":"Applicant Information"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",style:{fontFamily:rt.font},children:[t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Full Name:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:Ne()})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"First Name:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.first_name})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Last Name:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.last_name})]}),q.middle_initial&&t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Middle Initial:"}),t.jsxs("p",{className:"font-semibold text-gray-900 mt-1",children:[q.middle_initial,"."]})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg md:col-span-2",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Home Address:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.home_address})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Contact Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.contact_number})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Email:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.email})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Citizenship:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.citizenship})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Birth Date:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.birth_date})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"ID Type:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.id_type})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"ID Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.id_number})]}),q.permit_subtype==="MTOP"&&t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Operator Type:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.operator_type})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:rt.primary},children:" Tricycle Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",style:{fontFamily:rt.font},children:[t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Make/Brand:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.make_brand})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Model:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.model})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Engine Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.engine_number})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Chassis Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.chassis_number})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Plate Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.plate_number})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Year Acquired:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.year_acquired})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Color:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.color})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Vehicle Type:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.vehicle_type})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"LTO OR Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.lto_or_number})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"LTO CR Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.lto_cr_number})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"LTO Expiration:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.lto_expiration_date})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"District:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:q.district})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:rt.primary},children:"Operation Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",style:{fontFamily:rt.font},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Route/Zone:"}),t.jsx("span",{className:"flex-1",children:q.route_zone})]}),q.permit_subtype==="FRANCHISE"&&t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"TODA Name:"}),t.jsx("span",{className:"flex-1",children:q.toda_name})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Barangay of Operation:"}),t.jsx("span",{className:"flex-1",children:q.barangay_of_operation})]}),q.permit_subtype==="FRANCHISE"&&q.company_name&&t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-40",children:"Company Name:"}),t.jsx("span",{className:"flex-1",children:q.company_name})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:rt.primary},children:" Required Documents & Uploads"}),t.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["All documents marked with ",t.jsx("span",{className:"text-red-600 font-bold",children:"*"})," are required"]}),t.jsx("div",{className:"space-y-3",children:[{name:"proof_of_residency",label:"Proof of Residency",file:q.proof_of_residency,required:!1},{name:"barangay_clearance",label:"Barangay Clearance",file:q.barangay_clearance,id:q.barangay_clearance_id,required:!0},{name:"lto_or_cr",label:"LTO OR/CR",file:q.lto_or_cr,required:!1},{name:"lto_cr_copy",label:"LTO CR Copy",file:q.lto_cr_copy,required:!0},{name:"drivers_license",label:"Driver's License",file:q.drivers_license,required:!0},{name:"insurance_certificate",label:"Insurance Certificate",file:q.insurance_certificate,required:!1},{name:"emission_test",label:"Emission Test",file:q.emission_test,required:!1},{name:"id_picture",label:"2x2 ID Picture",file:q.id_picture,required:!1},{name:"official_receipt",label:"Official Receipt",file:q.official_receipt,required:!1},...q.permit_subtype==="FRANCHISE"?[{name:"toda_endorsement",label:"TODA Endorsement",file:q.toda_endorsement,required:!0}]:[],...q.permit_subtype==="MTOP"?[{name:"nbi_clearance",label:"NBI Clearance",file:q.nbi_clearance,required:!0},{name:"police_clearance",label:"Police Clearance",file:q.police_clearance,required:!0},{name:"medical_certificate",label:"Medical Certificate",file:q.medical_certificate,required:!0}]:[]].map(ke=>t.jsx("div",{className:`p-4 border-2 rounded-lg ${ke.file||ke.id?V[ke.name]?.isVerified?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200":ke.required?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start flex-1",children:[ke.file||ke.id?V[ke.name]?.isVerified?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3 mt-1 flex-shrink-0"}):t.jsx(Ks,{className:"w-5 h-5 text-yellow-600 mr-3 mt-1 flex-shrink-0"}):ke.required?t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3 mt-1 flex-shrink-0"}):t.jsx(Ks,{className:"w-5 h-5 text-gray-400 mr-3 mt-1 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("span",{className:`font-semibold ${ke.required?"text-red-600":"text-gray-700"}`,children:[ke.label," ",ke.required&&"*"]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ke.file?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"font-medium",children:"File:"})," ",ke.file.name,t.jsx("br",{}),t.jsxs("span",{className:"text-xs text-gray-500",children:["Size: ",(ke.file.size/1024).toFixed(2)," KB"]}),t.jsx("br",{}),V[ke.name]?.isVerified?t.jsxs("span",{className:"text-xs text-green-600 font-medium flex items-center mt-1",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"})," AI Verified"]}):t.jsxs("span",{className:"text-xs text-yellow-600 font-medium flex items-center mt-1",children:[t.jsx(Ks,{className:"w-3 h-3 mr-1"})," Not AI Verified"]})]}):ke.id?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"font-medium",children:"Clearance ID:"})," ",ke.id]}):ke.required?t.jsx("span",{className:"text-red-600 font-medium",children:" Not provided - Required for submission"}):t.jsx("span",{className:"text-gray-500 font-medium",children:"Not provided - Optional"})}),ke.file&&ke.file.type&&ke.file.type.startsWith("image/")&&t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:URL.createObjectURL(ke.file),alt:ke.label,className:"w-32 h-32 object-cover rounded border border-gray-300"})})]})]}),ke.file&&t.jsxs("button",{type:"button",onClick:()=>et(ke.file),className:"ml-3 flex items-center gap-1 px-3 py-2 text-sm rounded-lg bg-blue-100 hover:bg-blue-200 transition-colors duration-300 text-blue-700 font-medium flex-shrink-0",children:[t.jsx(ws,{className:"w-4 h-4"}),"View Full"]})]})},ke.name))})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:rt.primary},children:"Payment Summary"}),t.jsxs("div",{className:"space-y-4",children:[[{name:"franchise_fee",label:q.permit_subtype==="MTOP"?"MTOP Application Fee":"Franchise Fee",checked:q.franchise_fee_checked},{name:"sticker_id_fee",label:"Sticker / ID Fee",checked:q.sticker_id_fee_checked},{name:"inspection_fee",label:"Inspection Fee",checked:q.inspection_fee_checked}].map(ke=>t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[ke.checked?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx("div",{className:"w-5 h-5 border border-gray-300 rounded mr-3"}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:[ke.label,":"]}),t.jsx("p",{className:"text-sm text-gray-600",children:ke.checked?"Selected":"Not selected"})]})]}),ke.checked&&t.jsxs("span",{className:"font-bold",style:{color:rt.primary},children:["",he[ke.name].toFixed(2)]})]},ke.name)),P.isPaid&&t.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ht,{className:"w-6 h-6 text-green-600 mr-3"}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-semibold text-green-700",children:[" Payment Status: ",P.isPaid?"Paid":"Pending"]}),t.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Payment Method: ",P.paymentMethod==="online"?"Online Payment":"Receipt Upload"]}),P.paymentDate&&t.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Payment Date: ",P.paymentDate]})]})]})})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:rt.primary},children:"Declaration Summary"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",style:{fontFamily:rt.font},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-48",children:"Applicant's Signature:"}),t.jsx("span",{className:"flex-1",children:q.applicant_signature?t.jsx("span",{className:"text-green-600 font-medium",children:" Provided"}):t.jsx("span",{className:"text-red-600 font-medium",children:" Missing"})})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-48",children:"Date of Submission:"}),t.jsx("span",{className:"flex-1",children:q.date_submitted||"Not set"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-48",children:"Agreement to Declaration:"}),t.jsx("span",{className:"flex-1",children:l?t.jsx("span",{className:"text-green-600 font-medium",children:" Agreed"}):t.jsx("span",{className:"text-red-600 font-medium",children:" Not agreed"})})]})]})]})]})})]});default:return null}};return t.jsxs("div",{className:"mx-1 mt-1 p-6 rounded-lg min-h-screen",style:{background:rt.background,color:rt.secondary,fontFamily:rt.font},children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold",style:{color:rt.primary},children:"FRANCHISE PERMIT APPLICATION"}),t.jsxs("p",{className:"mt-2",style:{color:rt.secondary},children:["Apply for ",q.permit_subtype==="MTOP"?"Motorized Tricycle Operator's Permit (MTOP)":"Franchise Permit"," for tricycle operation."]})]}),t.jsx("button",{onClick:Pe,onMouseEnter:ke=>ke.currentTarget.style.background=rt.accent,onMouseLeave:ke=>ke.currentTarget.style.background=rt.success,style:{background:rt.success},className:"px-4 py-2 rounded-lg font-medium text-white hover:bg-[#FDA811] transition-colors duration-300",children:"Change Permit Type"})]}),t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"flex items-center justify-between",children:yt.map((ke,de)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`flex items-center justify-center rounded-full border-2 font-semibold transition-all duration-300 ${r>=ke.id?"text-white":"text-gray-500"}`,style:{background:r>=ke.id?rt.success:"transparent",borderColor:r>=ke.id?rt.success:"#9CA3AF",width:"45px",height:"30px",borderRadius:"20px",fontFamily:rt.font},children:ke.id}),t.jsxs("div",{className:"ml-3 hidden md:block",children:[t.jsx("p",{className:"text-sm font-medium",style:{color:r>=ke.id?rt.success:rt.secondary,fontFamily:rt.font},children:ke.title}),t.jsx("p",{className:"text-xs",style:{color:rt.secondary,fontFamily:rt.font},children:ke.description})]}),de<yt.length-1&&t.jsx("div",{className:"hidden md:block w-16 h-0.5 mx-4",style:{background:r>ke.id?rt.success:"#9CA3AF"}})]},ke.id))})}),t.jsxs("form",{onSubmit:ht,className:"space-y-8",children:[is(),t.jsxs("div",{className:"flex justify-between pt-6",children:[r>1&&t.jsx("button",{type:"button",onClick:It,onMouseEnter:ke=>ke.currentTarget.style.background=rt.accent,onMouseLeave:ke=>ke.currentTarget.style.background=rt.success,style:{background:rt.success},className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:"Previous"}),r<yt.length?t.jsx("button",{type:"submit",disabled:!Nt(r)||q.permit_subtype==="FRANCHISE"&&!b.canProceed||M.hasDuplicate,style:{background:!Nt(r)||q.permit_subtype==="FRANCHISE"&&!b.canProceed||M.hasDuplicate?"#9CA3AF":rt.success},onMouseEnter:ke=>{Nt(r)&&!(q.permit_subtype==="FRANCHISE"&&!b.canProceed)&&!M.hasDuplicate&&(ke.currentTarget.style.background=rt.accent)},onMouseLeave:ke=>{Nt(r)&&!(q.permit_subtype==="FRANCHISE"&&!b.canProceed)&&!M.hasDuplicate&&(ke.currentTarget.style.background=rt.success)},className:`px-6 py-3 rounded-lg font-semibold text-white ${!Nt(r)||q.permit_subtype==="FRANCHISE"&&!b.canProceed||M.hasDuplicate?"cursor-not-allowed":"transition-colors duration-300"}`,children:r===yt.length-1?"Review Application":"Next"}):t.jsx("button",{type:"submit",disabled:i||!b.canProceed||M.hasDuplicate,onMouseEnter:ke=>{!i&&b.canProceed&&!M.hasDuplicate&&(ke.currentTarget.style.background=rt.accent)},onMouseLeave:ke=>{!i&&b.canProceed&&!M.hasDuplicate&&(ke.currentTarget.style.background=rt.success)},style:{background:i||!b.canProceed||M.hasDuplicate?"#9CA3AF":rt.success},className:`px-6 py-3 rounded-lg font-semibold text-white ${i||!b.canProceed||M.hasDuplicate?"cursor-not-allowed":"transition-colors duration-300"}`,children:i?"Submitting...":"Submit Application"})]})]}),u.url&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"rounded-lg shadow-lg w-full max-w-4xl border border-gray-200 overflow-hidden",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:rt.font,backdropFilter:"blur(10px)",maxHeight:"90vh"},children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold",style:{color:rt.primary},children:"Preview Document"}),t.jsx("button",{onClick:vt,className:"text-gray-500 hover:text-gray-700 transition-colors duration-300",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 overflow-auto",style:{maxHeight:"calc(90vh - 80px)"},children:[t.jsxs("p",{className:"text-sm mb-4",style:{color:rt.secondary,fontFamily:rt.font},children:["File: ",t.jsx("span",{className:"font-medium",children:u.name})]}),t.jsx("div",{className:"bg-white rounded-lg border p-4",children:u.type==="image"?t.jsx("div",{className:"flex justify-center",children:t.jsx("img",{src:u.url,alt:"Preview",className:"max-w-full h-auto max-h-[500px]"})}):u.type==="application"&&u.name?.includes(".pdf")?t.jsx("iframe",{src:u.url,className:"w-full h-[500px] rounded",title:"PDF Preview"}):t.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[t.jsx(Kt,{className:"w-24 h-24 text-gray-400 mb-4"}),t.jsxs("p",{className:"text-gray-600 mb-2",children:["File: ",u.name]}),t.jsx("p",{className:"text-gray-500 mb-6",children:"Preview not available for this file type"}),t.jsx("a",{href:u.url,download:u.name,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors duration-300",children:"Download File"})]})}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsx("button",{onClick:vt,style:{background:rt.success},onMouseEnter:ke=>ke.currentTarget.style.background=rt.accent,onMouseLeave:ke=>ke.currentTarget.style.background=rt.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close Preview"})})]})]})}),Q&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"p-8 rounded-lg shadow-lg w-full max-w-lg border border-gray-200",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:rt.font,backdropFilter:"blur(10px)"},children:[t.jsx("div",{className:"flex items-center justify-center mb-6",children:t.jsx("div",{className:"w-20 h-20 rounded-full bg-green-100 flex items-center justify-center",children:t.jsx(Ht,{className:"w-10 h-10 text-green-600"})})}),t.jsx("h2",{className:"text-xl font-bold text-center mb-4",style:{color:rt.primary},children:"Payment Successful!"}),t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-sm text-center mb-3",style:{color:rt.secondary,fontFamily:rt.font},children:"Your payment has been completed successfully! As long as you have completed the payment process, it is considered successful. You can now proceed to the next step."}),P.transactionId&&t.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 mb-4",children:[t.jsx("p",{className:"text-sm font-medium text-blue-700 mb-2",children:"Payment Details:"}),t.jsxs("div",{className:"text-xs space-y-1",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Transaction ID:"})," ",P.transactionId]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Payment Date:"})," ",new Date(P.paymentDate).toLocaleDateString()]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Payment Method:"})," Online Payment"]})]})]}),t.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium text-green-700 mb-2",children:"Next Steps:"}),t.jsxs("ul",{className:"text-xs space-y-1 text-green-700",children:[t.jsx("li",{children:" Your payment has been recorded in the system"}),t.jsx("li",{children:" You can now proceed to the declaration step"}),t.jsx("li",{children:" Your application will be processed after submission"}),t.jsx("li",{children:" You will receive updates via email"})]})]})]}),t.jsx("div",{className:"flex justify-center gap-4",children:t.jsx("button",{onClick:()=>{L(!1),n(7)},style:{background:rt.primary},onMouseEnter:ke=>ke.currentTarget.style.background=rt.accent,onMouseLeave:ke=>ke.currentTarget.style.background=rt.primary,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Proceed to Next Step"})})]})}),ae&&b.permitDetails&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-2xl border border-gray-200 max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold",style:{color:rt.primary},children:"Existing MTOP Permit Details"}),t.jsx("button",{onClick:()=>ne(!1),className:"text-gray-500 hover:text-gray-700",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Application ID"}),t.jsx("p",{className:"font-bold text-lg",style:{color:rt.primary},children:b.permitDetails.application_id||b.permitDetails.display_id||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Status"}),t.jsx("p",{className:`font-bold text-lg ${b.permitDetails.status==="pending"?"text-yellow-600":b.permitDetails.status==="approved"?"text-green-600":"text-red-600"}`,children:b.permitDetails.status?.toUpperCase()||"N/A"})]})]}),t.jsxs("div",{className:"pt-4 border-t border-blue-200",children:[t.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Plate Number"}),t.jsx("p",{className:"font-bold text-lg text-green-700",children:b.permitDetails.plate_number||"N/A"})]})]})}),t.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[t.jsx("h3",{className:"font-semibold text-lg mb-3 text-green-800",children:"Vehicle Information"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Make/Brand:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.make_brand||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Model:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.model||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Color:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.color||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Year Acquired:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.year_acquired||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Vehicle Type:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.vehicle_type||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Engine Number:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.engine_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Chassis Number:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.chassis_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"MV File Number:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.mv_file_number||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[t.jsx("h3",{className:"font-semibold text-lg mb-3 text-purple-800",children:"LTO Information"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"LTO OR Number:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.lto_or_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"LTO CR Number:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.lto_cr_number||"N/A"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("p",{className:"text-gray-600",children:"LTO Expiration Date:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.lto_expiration_date_formatted||b.permitDetails.lto_expiration_date||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[t.jsx("h3",{className:"font-semibold text-lg mb-3 text-yellow-800",children:"Operation Details"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"District:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.district||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Route/Zone:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.route_zone||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"TODA Name:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.toda_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Barangay of Operation:"}),t.jsx("p",{className:"font-semibold",children:b.permitDetails.barangay_of_operation||"N/A"})]})]})]})]}),t.jsx("div",{className:"flex justify-end gap-4 mt-6",children:t.jsx("button",{onClick:()=>{ne(!1),Je()},style:{background:rt.primary},onMouseEnter:ke=>ke.currentTarget.style.background=rt.accent,onMouseLeave:ke=>ke.currentTarget.style.background=rt.primary,className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:"Proceed to Next Step"})})]})})]})}typeof window<"u"&&"Worker"in window&&(vd.workerPort=new Worker(new URL("/assets/pdf.worker-BkbLVoSG.js",import.meta.url),{type:"module"}));const _t={primary:"#4A90E2",secondary:"#000000",accent:"#FDA811",success:"#4CAF50",danger:"#E53935",warning:"#FF9800",background:"#FBFBFB",font:"Montserrat, Arial, sans-serif"},Dq=["Filipino","Afghan","Albanian","Algerian","American","Andorran","Angolan","Antiguans","Argentinean","Armenian","Australian","Austrian","Azerbaijani","Bahamian","Bahraini","Bangladeshi","Barbadian","Barbudans","Batswana","Belarusian","Belgian","Belizean","Beninese","Bhutanese","Bolivian","Bosnian","Brazilian","British","Bruneian","Bulgarian","Burkinabe","Burmese","Burundian","Cambodian","Cameroonian","Canadian","Cape Verdean","Central African","Chadian","Chilean","Chinese","Colombian","Comoran","Congolese","Costa Rican","Croatian","Cuban","Cypriot","Czech","Danish","Djibouti","Dominican","Dutch","East Timorese","Ecuadorean","Egyptian","Emirian","Equatorial Guinean","Eritrean","Estonian","Ethiopian","Fijian","Finnish","French","Gabonese","Gambian","Georgian","German","Ghanaian","Greek","Grenadian","Guatemalan","Guinea-Bissauan","Guinean","Guyanese","Haitian","Herzegovinian","Honduran","Hungarian","I-Kiribati","Icelander","Indian","Indonesian","Iranian","Iraqi","Irish","Israeli","Italian","Ivorian","Jamaican","Japanese","Jordanian","Kazakhstani","Kenyan","Kittian and Nevisian","Kuwaiti","Kyrgyz","Laotian","Latvian","Lebanese","Liberian","Libyan","Liechtensteiner","Lithuanian","Luxembourger","Macedonian","Malagasy","Malawian","Malaysian","Maldivan","Malian","Maltese","Marshallese","Mauritanian","Mauritian","Mexican","Micronesian","Moldovan","Monacan","Mongolian","Moroccan","Mosotho","Motswana","Mozambican","Namibian","Nauruan","Nepalese","New Zealander","Nicaraguan","Nigerian","Nigerien","North Korean","Northern Irish","Norwegian","Omani","Pakistani","Palauan","Palestinian","Panamanian","Papua New Guinean","Paraguayan","Peruvian","Polish","Portuguese","Qatari","Romanian","Russian","Rwandan","Saint Lucian","Salvadoran","Samoan","San Marinese","Sao Tomean","Saudi","Scottish","Senegalese","Serbian","Seychellois","Sierra Leonean","Singaporean","Slovakian","Slovenian","Solomon Islander","Somali","South African","South Korean","Spanish","Sri Lankan","Sudanese","Surinamer","Swazi","Swedish","Swiss","Syrian","Taiwanese","Tajik","Tanzanian","Thai","Togolese","Tongan","Trinidadian or Tobagonian","Tunisian","Turkish","Tuvaluan","Ugandan","Ukrainian","Uruguayan","Uzbekistani","Venezuelan","Vietnamese","Welsh","Yemenite","Zambian","Zimbabwean"];function Tq(){const a=Ti(),e=ka(),s=a.state?.permitType||"RENEWAL",[r,n]=C.useState(1),[i,o]=C.useState(!1),[l,c]=C.useState(!1),[u,m]=C.useState(!1),[A,g]=C.useState(!1),[p,v]=C.useState(""),[b,y]=C.useState(""),[w,B]=C.useState(!1),[j,E]=C.useState({}),[S,T]=C.useState({}),[M,D]=C.useState(!1),[P,Y]=C.useState(null),[Q,L]=C.useState({}),[ae,ne]=C.useState("MTOP"),[V,O]=C.useState(!1),[X,$]=C.useState({isPaid:!1,paymentMethod:"",paymentDate:"",transactionId:"",receiptNumber:""}),[H,te]=C.useState(!1),[K,I]=C.useState(!1),[R,G]=C.useState(!1),[se,le]=C.useState(null),[ye,De]=C.useState(!1),[me,Te]=C.useState({}),[we,st]=C.useState(!1),[ce,tt]=C.useState(null),[Ae,gt]=C.useState({old_permit_copy:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},lto_cr_copy:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},lto_or_copy:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},community_tax_certificate:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},drivers_license:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0},barangay_business_clearance:{isVerifying:!1,isVerified:!1,results:null,error:null,progress:0}}),[q,Qt]=C.useState(!1),[yt,Oe]=C.useState(!1),[ze,Le]=C.useState(0),[oe,he]=C.useState({success:!1,documentType:"",details:{},invalidReasons:[]}),[W,ve]=C.useState({renewal_type:"MTOP",existing_permit_id:"",existing_plate_number:"",mayors_permit_id:"",mayors_permit_applicant_id:"",first_name:"",last_name:"",middle_initial:"",home_address:"",contact_number:"",email:"",citizenship:"Filipino",birth_date:"",id_type:"",id_number:"",make_brand:"",model:"",engine_number:"",chassis_number:"",plate_number:"",year_acquired:"",color:"",vehicle_type:"",lto_or_number:"",lto_cr_number:"",lto_expiration_date:"",mv_file_number:"",district:"",route_zone:"",barangay_of_operation:"",toda_name:"",operator_type:"",company_name:"",old_permit_copy:null,lto_cr_copy:null,lto_or_copy:null,community_tax_certificate:null,drivers_license:null,inspection_report:null,barangay_business_clearance:null,barangay_clearance_id:"",payment_method:"online",renewal_fee_checked:!1,sticker_fee_checked:!1,inspection_fee_checked:!1,business_tax_fee_checked:!1,renewal_fee_or:"",sticker_fee_or:"",inspection_fee_or:"",business_tax_fee_or:"",renewal_fee_receipt:null,sticker_fee_receipt:null,inspection_fee_receipt:null,business_tax_fee_receipt:null,applicant_signature:"",date_submitted:"",barangay_captain_signature:"",remarks:"",notes:"",original_permit_id:"",original_issue_date:"",original_expiry_date:"",permit_status:""}),Qe=[{id:1,title:"Renewal Type",description:"Select permit to renew"},{id:2,title:"Existing Permit",description:"Verify existing permit"},{id:3,title:"Applicant Information",description:"Personal details"},{id:4,title:"Vehicle Information",description:"Vehicle details"},{id:5,title:"Required Documents",description:"Upload renewal documents"},{id:6,title:"Payment Information",description:"Fees and payment"},{id:7,title:"Declaration",description:"Sign and submit"},{id:8,title:"Review",description:"Review your renewal"}],Ze=["Individual Operator","TODA Member","Transport Cooperative","Corporation"],J={mtop:{renewal_fee:200,sticker_fee:100,inspection_fee:100},franchise:{renewal_fee:300,sticker_fee:100,inspection_fee:100}},He=de=>{if(!de)return{valid:!1,error:""};const ie=de.replace(/\s/g,"").toUpperCase(),bt=/^[A-Z]{3}\d{4}$/.test(ie);return{valid:bt,formatted:ie,error:bt?"":"Plate number must be in 3-letter, 4-digit format (e.g., ABC1234)"}},xt=de=>{if(!de)return{valid:!1,error:""};const ie=de.replace(/\s/g,"").toUpperCase(),Ue=ie.length===17;return{valid:Ue,formatted:ie,error:Ue?"":"Chassis number must be exactly 17 characters"}},Xe=de=>{if(!de)return{valid:!1,error:""};const ie=de.replace(/\s/g,"").toUpperCase(),Ue=ie.length>=8&&ie.length<=12;return{valid:Ue,formatted:ie,error:Ue?"":"Engine number must be between 8-12 characters"}},Ct=de=>{if(!de)return{valid:!1,error:""};const ie=de.replace(/\s/g,""),bt=/^\d{7,8}$/.test(ie);return{valid:bt,formatted:ie,error:bt?"":"OR number must be 7-8 digits"}},_e=de=>{if(!de)return{valid:!1,error:""};const ie=de.replace(/\s/g,""),bt=/^\d{7,8}$/.test(ie);return{valid:bt,formatted:ie,error:bt?"":"CR number must be 7-8 digits"}},Se=de=>{if(!de)return{valid:!1,error:""};const ie=de.replace(/\s/g,"");return{valid:ie.length>0,formatted:ie,error:""}},Ve=de=>{if(!de)return{valid:!1,error:""};const ie=new Date().getFullYear(),Ue=parseInt(de),bt=/^\d{4}$/.test(de)&&Ue<=ie&&Ue>=1900;return{valid:bt,formatted:de,error:bt?"":"Year must be a valid 4-digit year (1900-present)"}},et=de=>de.toLowerCase().replace(/[^a-z0-9]/g,""),vt=(de,ie,Ue=.5)=>{const bt=et(de),ot=et(ie);if(bt===ot)return 1;if(bt.includes(ot)||ot.includes(bt))return .95;const Dt=bt.length>ot.length?bt:ot,jt=bt.length>ot.length?ot:bt;if(Dt.length===0)return 0;let kt=0;for(let Xs=0;Xs<jt.length;Xs++)Dt.includes(jt[Xs])&&kt++;const gs=kt/Dt.length;return gs>=Ue?gs:0},Mt={drivers_license:["driver","license","licence","lto","land transportation office","restriction","dl no","license no","philippine","republic of the philippines"]},Ye={"Driver's License (LTO)":["driver","license","licence","lto","land transportation","department of transportation","dl no"],"Driver's License":["driver","license","licence","lto","land transportation"]},Et=de=>{const ie=de.toLowerCase(),Ue=[];for(const[bt,ot]of Object.entries(Ye)){let Dt=0;for(const jt of ot)ie.includes(jt.toLowerCase())&&Dt++;Dt>0&&Ue.push({type:bt,confidence:Dt/ot.length,matchCount:Dt})}return Ue.length===0?null:(Ue.sort((bt,ot)=>ot.matchCount-bt.matchCount||ot.confidence-bt.confidence),Ue[0])},Gt=de=>{const ie=de.toLowerCase();let Ue={type:null,score:0,matchedKeywords:[]};for(const[bt,ot]of Object.entries(Mt)){let Dt=0;const jt=[];ot.forEach(gs=>{ie.includes(gs.toLowerCase())&&(Dt++,jt.push(gs))});const kt=Dt/ot.length;kt>Ue.score&&(Ue={type:bt,score:kt,matchedKeywords:jt})}return Ue.score>.1?Ue:{type:null,score:0,matchedKeywords:[]}},ee=de=>{const ie=W.first_name?.trim(),Ue=W.last_name?.trim(),bt=W.middle_initial?.trim();if(!ie||!Ue)return null;const ot=de.toLowerCase(),Dt=ie.toLowerCase(),jt=Ue.toLowerCase(),kt=vt(ie,de),gs=vt(Ue,de),Xs=bt?vt(bt,de):0,Ss=kt>0||ot.includes(Dt),Is=gs>0||ot.includes(jt),bs=bt?Xs>0||ot.includes(bt.toLowerCase()):!1,ds=Ss&&Is;return{firstName:{matched:Ss,confidence:kt,value:ie},lastName:{matched:Is,confidence:gs,value:Ue},middleInitial:bt?{matched:bs,confidence:Xs,value:bt}:null,anyMatch:ds,allMatch:ds&&(!bt||bs)}},Ie=async de=>{try{const ie=await de.arrayBuffer(),Ue=await Lp({data:ie}).promise,bt=[];for(let ot=1;ot<=Math.min(Ue.numPages,3);ot++){const Dt=await Ue.getPage(ot),jt=Dt.getViewport({scale:2}),kt=document.createElement("canvas"),gs=kt.getContext("2d");kt.height=jt.height,kt.width=jt.width,await Dt.render({canvasContext:gs,viewport:jt}).promise,bt.push(kt.toDataURL("image/png"))}return bt}catch(ie){return console.error("Error converting PDF to images:",ie),[]}},ue=async(de,ie)=>{if(!ie){Pt("Please upload a document first");return}gt(Ue=>({...Ue,[de]:{...Ue[de],isVerifying:!0,isVerified:!1,progress:0}})),dt.fire({title:"Verifying Document",html:"<p>Please wait while we verify your driver's license using AI...</p>",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{dt.showLoading()}});try{let Ue=[];if(ie.type==="application/pdf"){if(Le(10),Ue=await Ie(ie),Ue.length===0)throw new Error("Failed to process PDF")}else Ue=[URL.createObjectURL(ie)];Le(30);const bt=await bA.createWorker("eng");let ot="";for(let ds=0;ds<Ue.length;ds++){const xs=await bt.recognize(Ue[ds]);ot+=xs.data.text+`
`,Le(30+40*(ds+1)/Ue.length),gt(xr=>({...xr,[de]:{...xr[de],progress:30+40*(ds+1)/Ue.length}}))}await bt.terminate(),Le(80);const Dt=Gt(ot),jt=ee(ot);let kt=!1,gs=[],Xs=null,Ss=null,Is=!1;if(de==="drivers_license"){if(W.id_number){const xs=et(W.id_number);let qr=ot.toLowerCase().includes(xs)||vt(W.id_number,ot)>.8;if(!qr){const mr=[/license\s*no\.?\s*:?\s*(\S+)/i,/dl\s*no\.?\s*:?\s*(\S+)/i,/license\s*number\s*:?\s*(\S+)/i,/dl\s*number\s*:?\s*(\S+)/i];for(const Uo of mr){const Ln=ot.match(Uo);if(Ln&&Ln[1]){const ho=et(Ln[1]);if(ho===xs||ho.includes(xs)||xs.includes(ho)){qr=!0;break}}}}Xs={value:W.id_number,found:qr}}const ds=Et(ot);if(ds&&(Is=!0,W.id_type)){const xs=W.id_type.toLowerCase(),xr=ds.type.toLowerCase(),qr=xs===xr||xs.includes(xr)||xr.includes(xs)||xs.includes("driver")&&xr.includes("driver")||xs.includes("license")&&xr.includes("license");Ss={expected:W.id_type,detected:ds.type,matched:qr,confidence:ds.confidence,matchCount:ds.matchCount}}}const bs=de==="drivers_license"?Is:Dt.type===de;if(!bs)gs=["Wrong document type uploaded. Expected: Driver's License"],kt=!1;else if(de==="drivers_license"&&Is){const ds=jt?.anyMatch,xs=Xs?.found,xr=Ss?.matched;if(ds&&xs&&xr)kt=!0;else{if(gs=["The following information could not be verified:"],ds)gs.push(" Owner name verified");else{const qr=jt?.firstName?.matched,mr=jt?.lastName?.matched;!qr&&!mr?gs.push(" Owner name not found in license"):qr?mr||gs.push(" Last name not found in license"):gs.push(" First name not found in license")}xs?gs.push(" License number verified"):gs.push(" License number not found in document"),xr?gs.push(" ID type verified"):Ss?gs.push(` ID type mismatch (Expected: ${Ss.expected}, Detected: ${Ss.detected})`):gs.push(" ID type could not be detected"),gs.push("Please ensure the license image is clear and all information is visible."),kt=!1}}Le(100),gt(ds=>({...ds,[de]:{isVerifying:!1,isVerified:kt,results:{documentType:de==="drivers_license"?"drivers_license":Dt.type,documentTypeMatched:bs,ownerName:jt,idNumber:Xs,idType:Ss,extractedText:ot.substring(0,500)},error:kt?null:gs.join(", "),progress:100}})),he({success:kt,documentType:de,details:{documentTypeMatched:bs,ownerNameFound:jt?.anyMatch,idNumberFound:Xs?.found,idTypeMatched:Ss?.matched},invalidReasons:gs}),dt.fire({icon:kt?"success":"error",title:kt?"VALID DOCUMENT":"INVALID DOCUMENT",html:kt?`<p style="font-size: 16px;">The driver's license has been successfully verified and is valid for use in this application.</p>`:`<div style="text-align: left;">${gs.map(ds=>`<p style="margin: 8px 0;">${ds}</p>`).join("")}</div>`,confirmButtonText:kt?"Continue":"Close",confirmButtonColor:kt?_t.success:_t.danger,allowOutsideClick:!0})}catch(Ue){console.error("Verification error:",Ue),gt(bt=>({...bt,[de]:{isVerifying:!1,isVerified:!1,results:null,error:Ue.message,progress:0}})),dt.fire({icon:"error",title:"Verification Failed",text:`Verification failed: ${Ue.message}`,confirmButtonColor:_t.danger})}},fe=async()=>{if(!W.barangay_clearance_id){dt.fire({icon:"warning",title:"Input Required",text:"Please enter Barangay Clearance ID",confirmButtonColor:_t.primary});return}st(!0);try{const de=await fetch("/backend/barangay_permit/admin_fetch.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({barangay_clearance_id:W.barangay_clearance_id})});if(!de.ok)throw new Error(`HTTP error! status: ${de.status}`);const ie=await de.json();ie.success?(tt(ie.data),dt.fire({icon:"success",title:"Verification Successful",html:`
          <div style="text-align: left;">
            <p><strong>Barangay Clearance ID:</strong> ${ie.data.clearance_id||W.barangay_clearance_id}</p>
            <p><strong>Permit ID:</strong> ${ie.data.permit_id||"N/A"}</p>
            <p><strong>Status:</strong> <span style="color: green;">${ie.data.status||"Valid"}</span></p>
            ${ie.data.business_name?`<p><strong>Business Name:</strong> ${ie.data.business_name}</p>`:""}
            ${ie.data.owner_name?`<p><strong>Owner:</strong> ${ie.data.owner_name}</p>`:""}
          </div>
        `,confirmButtonColor:_t.primary})):(tt(null),dt.fire({icon:"error",title:"Verification Failed",text:ie.message||"Barangay Clearance ID not found or invalid",confirmButtonColor:_t.danger}))}catch(de){console.error("Barangay verification error:",de),dt.fire({icon:"error",title:"Verification Error",text:"Failed to verify Barangay Clearance ID. Please try again.",confirmButtonColor:_t.danger})}finally{st(!1)}},xe=async()=>{if(!W.existing_permit_id||!W.existing_plate_number)return Pt("Please enter your existing Permit ID and Plate Number for validation."),!1;D(!0);try{const de=await fetch("/backend/franchise_permit/check_existing_permit.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({permit_id:W.existing_permit_id,plate_number:W.existing_plate_number,renewal_type:ae})});if(!de.ok)throw new Error(`HTTP error! status: ${de.status}`);const ie=await de.text();let Ue;try{Ue=JSON.parse(ie)}catch(bt){return console.error("Failed to parse JSON:",bt),!1}if(Ue.success&&Ue.existingPermit){Y(Ue.existingPermit),Me(Ue.existingPermit);const bt=new Date(Ue.existingPermit.expiry_date),Dt=Math.ceil((bt-new Date)/(1e3*60*60*24));let jt="";return Ue.existingPermit.status==="EXPIRED"?jt=" Your permit has expired. Please renew immediately.":Dt<=30&&Dt>0?jt=` Your permit expires in ${Dt} days.`:Dt<=0?jt=" Your permit has expired. Please renew immediately.":jt="Valid permit found. You may proceed with renewal.",dt.fire({icon:"success",title:"Success!",text:`Existing ${ae==="MTOP"?"MTOP":"Franchise"} permit found! ${jt}`,confirmButtonColor:_t.primary,timer:3e3,timerProgressBar:!0}).then(()=>{n(3)}),!0}else return dt.fire({icon:"error",title:"Error",text:Ue.message||"No existing permit found with the provided details.",confirmButtonColor:_t.danger}),!1}catch(de){return console.error("Error checking existing permit:",de),dt.fire({icon:"error",title:"Error",text:"Error checking existing permit. Please check your connection.",confirmButtonColor:_t.danger}),!1}finally{D(!1)}},Me=de=>{if(!de)return;const ie={},Ue={...W};if(["first_name","last_name","middle_initial","home_address","contact_number","email","citizenship","birth_date","id_type","id_number","make_brand","model","engine_number","chassis_number","plate_number","year_acquired","color","vehicle_type","lto_or_number","lto_cr_number","lto_expiration_date","mv_file_number","district","route_zone","barangay_of_operation","toda_name","operator_type","company_name"].forEach(ot=>{de[ot]&&(Ue[ot]=de[ot],ie[ot]=!0)}),de.application_id&&(Ue.original_permit_id=de.application_id,Ue.existing_permit_id=de.application_id),de.date_approved&&(Ue.original_issue_date=de.date_approved),de.expiry_date&&(Ue.original_expiry_date=de.expiry_date),de.status&&(Ue.permit_status=de.status),Ue.plate_number){const ot=He(Ue.plate_number);ot.valid&&(Ue.plate_number=ot.formatted)}if(Ue.chassis_number){const ot=xt(Ue.chassis_number);ot.valid&&(Ue.chassis_number=ot.formatted)}if(Ue.engine_number){const ot=Xe(Ue.engine_number);ot.valid&&(Ue.engine_number=ot.formatted)}if(Ue.lto_or_number){const ot=Ct(Ue.lto_or_number);ot.valid&&(Ue.lto_or_number=ot.formatted)}if(Ue.lto_cr_number){const ot=_e(Ue.lto_cr_number);ot.valid&&(Ue.lto_cr_number=ot.formatted)}if(Ue.id_number){const ot=Se(Ue.id_number);ot.valid&&(Ue.id_number=ot.formatted)}if(Ue.year_acquired){const ot=Ve(Ue.year_acquired);ot.valid&&(Ue.year_acquired=ot.formatted)}ve(Ue),L(ie)},ct=()=>{const de={...W};Object.keys(Q).forEach(ie=>{de[ie]=""}),de.original_permit_id="",de.original_issue_date="",de.original_expiry_date="",de.permit_status="",ve(de),L({}),Y(null),n(3)},Pt=de=>{dt.fire({icon:"error",title:"Error",text:de,confirmButtonColor:_t.danger})},ts=de=>{if(X.isPaid){Pt("Payment has already been completed. Payment method cannot be changed.");return}ve(ie=>({...ie,payment_method:de}))},as=()=>{if(X.isPaid){Pt("Payment has already been completed. You cannot make another payment.");return}const de=ae==="MTOP"?J.mtop:J.franchise;let ie=0;if(W.renewal_fee_checked&&(ie+=de.renewal_fee),W.sticker_fee_checked&&(ie+=de.sticker_fee),W.inspection_fee_checked&&(ie+=de.inspection_fee),ie<=0){Pt("Please select at least one fee to pay.");return}const Ue=`REN-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,bt={system:"franchise_renewal",ref:Ue,amount:ie.toFixed(2),purpose:`${ae} Renewal - ${W.plate_number||"Renewal Application"}`,callback:"https://revenuetreasury.goserveph.com/citizen_dashboard/market/api/market_payment_api.php"};localStorage.setItem("payment_reference",Ue),localStorage.setItem("payment_amount",ie.toFixed(2)),localStorage.setItem("application_plate",W.plate_number);const ot=document.createElement("form");ot.method="POST",ot.action="https://revenuetreasury.goserveph.com/citizen_dashboard/digital/index.php",ot.target="_blank",Object.entries(bt).forEach(([Dt,jt])=>{const kt=document.createElement("input");kt.type="hidden",kt.name=Dt,kt.value=jt,ot.appendChild(kt)}),document.body.appendChild(ot),ot.submit(),setTimeout(()=>{dt.fire({icon:"success",title:"Payment Successful!",text:"Your payment has been confirmed successfully! You can now proceed to the next step.",confirmButtonColor:_t.primary})},2e3),Zt(Ue)},Zt=de=>{console.log("Starting payment polling for:",de);const ie=async()=>{try{const bt=await fetch(`/backend/franchise_permit/get_payment_status.php?reference_id=${de}`);if(!bt.ok){console.error("HTTP error! status:",bt.status);return}const ot=await bt.text();console.log("Payment check raw response:",ot);let Dt;try{Dt=JSON.parse(ot)}catch{console.error("Failed to parse JSON:",ot);return}console.log("Payment status data:",Dt),Dt.success&&($({isPaid:!0,paymentMethod:"online",paymentDate:new Date().toISOString(),transactionId:Dt.payment_id||de,receiptNumber:Dt.receipt_number||"N/A"}),clearInterval(Ue),dt.fire({icon:"success",title:"Payment Successful!",text:"Your payment has been confirmed successfully! You can now proceed to the next step.",confirmButtonColor:_t.primary}),ve(jt=>({...jt,payment_method:"online",payment_status:"paid"})))}catch(bt){console.error("Error checking payment:",bt)}},Ue=setInterval(ie,5e3);setTimeout(()=>{clearInterval(Ue),console.log("Payment polling stopped after 10 minutes")},600*1e3),ie()},Be=de=>{const{name:ie,value:Ue,type:bt,checked:ot,files:Dt}=de.target;if(Q[ie]){Pt("This field is auto-filled from your existing permit and cannot be modified.");return}if(ie==="contact_number"){const jt=Ue.replace(/[^0-9]/g,"");let kt=jt;if(jt.length>0&&(jt.startsWith("09")||(kt="09"+jt),kt=kt.slice(0,11)),ve(gs=>({...gs,[ie]:kt})),kt.length>0&&kt.length!==11)T(gs=>({...gs,contact_number:"Contact number must be 11 digits (09XXXXXXXXX)"}));else if(S.contact_number){const gs={...S};delete gs.contact_number,T(gs)}}else if(bt==="file"){const jt=Dt[0];if(ve(kt=>({...kt,[ie]:jt||null})),S[ie]){const kt={...S};delete kt[ie],T(kt)}}else if(bt==="checkbox")ve(jt=>({...jt,[ie]:ot}));else if(ie==="renewal_type")ne(Ue),ve(jt=>({...jt,[ie]:Ue})),Y(null),L({});else{let jt=Ue;switch(ie){case"plate_number":case"existing_plate_number":const kt=Ue.replace(/\s/g,"").toUpperCase();if(jt=kt,kt){const ds=He(kt);if(!ds.valid&&kt.length>=3)T(xs=>({...xs,[ie]:ds.error}));else if(S[ie]){const xs={...S};delete xs[ie],T(xs)}}break;case"chassis_number":const gs=Ue.replace(/\s/g,"").toUpperCase();if(jt=gs,gs){const ds=xt(gs);if(!ds.valid&&gs.length>=10)T(xs=>({...xs,[ie]:ds.error}));else if(S[ie]){const xs={...S};delete xs[ie],T(xs)}}break;case"engine_number":const Xs=Ue.replace(/\s/g,"").toUpperCase();if(jt=Xs,Xs){const ds=Xe(Xs);if(!ds.valid&&Xs.length>=6)T(xs=>({...xs,[ie]:ds.error}));else if(S[ie]){const xs={...S};delete xs[ie],T(xs)}}break;case"lto_or_number":const Ss=Ue.replace(/\s/g,"");if(jt=Ss,Ss){const ds=Ct(Ss);if(!ds.valid&&Ss.length>=6)T(xs=>({...xs,[ie]:ds.error}));else if(S[ie]){const xs={...S};delete xs[ie],T(xs)}}break;case"lto_cr_number":const Is=Ue.replace(/\s/g,"");if(jt=Is,Is){const ds=_e(Is);if(!ds.valid&&Is.length>=6)T(xs=>({...xs,[ie]:ds.error}));else if(S[ie]){const xs={...S};delete xs[ie],T(xs)}}break;case"id_number":const bs=Ue.replace(/\s/g,"");if(jt=bs,bs){const ds=Se(bs);if(!ds.valid)T(xs=>({...xs,[ie]:ds.error}));else if(S[ie]){const xs={...S};delete xs[ie],T(xs)}}break;case"year_acquired":if(Ue){const ds=Ve(Ue);if(!ds.valid)T(xs=>({...xs,[ie]:ds.error}));else if(S[ie]){const xs={...S};delete xs[ie],T(xs)}}jt=Ue;break;default:jt=Ue}ve(kt=>({...kt,[ie]:jt}))}},mt=de=>{const ie={};if(de===1&&(ae||(ie.renewal_type="Please select renewal type")),de===2){if(W.existing_permit_id||(ie.existing_permit_id="Existing permit ID is required"),!W.existing_plate_number)ie.existing_plate_number="Plate number is required";else{const Ue=He(W.existing_plate_number);Ue.valid||(ie.existing_plate_number=Ue.error)}P||(ie.existing_permit="Please verify your existing permit before proceeding")}if(de===3){if(W.first_name.trim()||(ie.first_name="First name is required"),W.last_name.trim()||(ie.last_name="Last name is required"),W.home_address.trim()||(ie.home_address="Home address is required"),W.contact_number.trim()?W.contact_number.length!==11&&(ie.contact_number="Contact number must be 11 digits (09XXXXXXXXX)"):ie.contact_number="Contact number is required",W.email.trim()?/\S+@\S+\.\S+/.test(W.email)||(ie.email="Email is invalid"):ie.email="Email is required",W.citizenship||(ie.citizenship="Citizenship is required"),W.birth_date||(ie.birth_date="Birth date is required"),W.id_type||(ie.id_type="ID type is required"),!W.id_number.trim())ie.id_number="ID number is required";else{const Ue=Se(W.id_number);Ue.valid||(ie.id_number=Ue.error)}W.operator_type||(ie.operator_type="Operator type is required")}if(de===4){if(W.make_brand.trim()||(ie.make_brand="Make/Brand is required"),W.model.trim()||(ie.model="Model is required"),!W.engine_number.trim())ie.engine_number="Engine number is required";else{const Ue=Xe(W.engine_number);Ue.valid||(ie.engine_number=Ue.error)}if(!W.chassis_number.trim())ie.chassis_number="Chassis number is required";else{const Ue=xt(W.chassis_number);Ue.valid||(ie.chassis_number=Ue.error)}if(!W.plate_number.trim())ie.plate_number="Plate number is required";else{const Ue=He(W.plate_number);Ue.valid||(ie.plate_number=Ue.error)}if(!W.year_acquired.trim())ie.year_acquired="Year acquired is required";else{const Ue=Ve(W.year_acquired);Ue.valid||(ie.year_acquired=Ue.error)}if(W.color.trim()||(ie.color="Color is required"),W.vehicle_type.trim()||(ie.vehicle_type="Vehicle type is required"),!W.lto_or_number.trim())ie.lto_or_number="LTO OR number is required";else{const Ue=Ct(W.lto_or_number);Ue.valid||(ie.lto_or_number=Ue.error)}if(!W.lto_cr_number.trim())ie.lto_cr_number="LTO CR number is required";else{const Ue=_e(W.lto_cr_number);Ue.valid||(ie.lto_cr_number=Ue.error)}if(!W.lto_expiration_date)ie.lto_expiration_date="LTO expiration date is required";else if(new Date(W.lto_expiration_date).getFullYear()<=2026)ie.lto_expiration_date="LTO Expiration Date must be 2027 or later.";else{const ot=new Date;ot.setHours(0,0,0,0),new Date(W.lto_expiration_date)<ot&&(ie.lto_expiration_date="LTO Expiration Date cannot be in the past. Please select a future date.")}W.district.trim()||(ie.district="District is required")}if(de===5){const Ue=[];Ue.push({name:"old_permit_copy",label:"Old Permit Copy"},{name:"lto_cr_copy",label:"LTO CR Copy"},{name:"lto_or_copy",label:"LTO OR Copy"},{name:"community_tax_certificate",label:"Community Tax Certificate"},{name:"drivers_license",label:"Driver's License"}),ae==="FRANCHISE"&&Ue.push({name:"barangay_business_clearance",label:"Barangay Business Clearance"});let bt=0;Ue.forEach(ot=>{W[ot.name]?bt++:ie[ot.name]=`${ot.label} is required for ${ae==="MTOP"?"MTOP":"Franchise Permit"} renewal`}),bt<Ue.length&&(ie.min_documents="All required documents must be uploaded")}if(de===6){const Ue=[{name:"renewal_fee",checked:W.renewal_fee_checked,receipt:W.renewal_fee_receipt,or:W.renewal_fee_or},{name:"sticker_fee",checked:W.sticker_fee_checked,receipt:W.sticker_fee_receipt,or:W.sticker_fee_or},{name:"inspection_fee",checked:W.inspection_fee_checked,receipt:W.inspection_fee_receipt,or:W.inspection_fee_or}],bt=Ue.some(ot=>ot.checked);if(W.payment_method==="online")bt||(ie.payment="At least one fee must be selected for payment");else{let ot=!1;Ue.forEach(Dt=>{Dt.checked&&(Dt.or||(ie[`${Dt.name}_or`]="OR Number is required"),Dt.receipt||(ie[`${Dt.name}_receipt`]="Receipt is required"),Dt.or&&Dt.receipt&&(ot=!0))}),ot||(ie.payment="At least one fee must be checked with valid OR number and receipt")}}return de===7&&(W.applicant_signature||(ie.applicant_signature="Applicant signature is required"),W.date_submitted||(ie.date_submitted="Date of submission is required"),w||(ie.declaration="You must agree to the declaration")),T(ie),Object.keys(ie).length===0},Nt=de=>{const ie={1:()=>ae==="MTOP"||ae==="FRANCHISE",2:()=>!W.existing_permit_id||!W.existing_plate_number||!He(W.existing_plate_number).valid?!1:!!P,3:()=>!(!W.first_name.trim()||!W.last_name.trim()||!W.home_address.trim()||!W.contact_number.trim()||W.contact_number.length!==11||!W.email.trim()||!/\S+@\S+\.\S+/.test(W.email)||!W.citizenship||!W.birth_date||!W.id_type||!W.id_number.trim()||!Se(W.id_number).valid||!W.operator_type),4:()=>!(!W.make_brand.trim()||!W.model.trim()||!W.engine_number.trim()||!Xe(W.engine_number).valid||!W.chassis_number.trim()||!xt(W.chassis_number).valid||!W.plate_number.trim()||!He(W.plate_number).valid||!W.year_acquired.trim()||!Ve(W.year_acquired).valid||!W.color.trim()||!W.vehicle_type.trim()||!W.lto_or_number.trim()||!Ct(W.lto_or_number).valid||!W.lto_cr_number.trim()||!_e(W.lto_cr_number).valid||!W.lto_expiration_date||new Date(W.lto_expiration_date).getFullYear()<=2026||!W.district.trim()),5:()=>{const Ue=["old_permit_copy","lto_cr_copy","lto_or_copy","community_tax_certificate","drivers_license"];return ae==="FRANCHISE"&&Ue.push("barangay_business_clearance"),Ue.every(bt=>W[bt])},6:()=>{const Ue=[{checked:W.renewal_fee_checked,receipt:W.renewal_fee_receipt,or:W.renewal_fee_or},{checked:W.sticker_fee_checked,receipt:W.sticker_fee_receipt,or:W.sticker_fee_or},{checked:W.inspection_fee_checked,receipt:W.inspection_fee_receipt,or:W.inspection_fee_or}];return W.payment_method==="online"?Ue.some(bt=>bt.checked):Ue.some(bt=>bt.checked&&bt.receipt&&bt.or)},7:()=>Ae.drivers_license.isVerified?!0:W.applicant_signature&&W.date_submitted&&w,8:()=>!0};return ie[de]?ie[de]():!0},Ne=()=>`${W.first_name} ${W.middle_initial?W.middle_initial+".":""} ${W.last_name}`.trim(),Je=()=>{if(r<Qe.length){if(r===2&&!P){Pt("Please verify your existing permit before proceeding.");return}if(r===7&&Ae.drivers_license.isVerified){n(r+1),T({});return}mt(r)&&(n(r+1),T({}))}},ht=de=>{if(de.preventDefault(),r<Qe.length-1)Je();else if(r===Qe.length-1){if(Ae.drivers_license.isVerified){n(r+1),T({});return}mt(r)&&(n(r+1),T({}))}else dt.fire({title:"Confirm Renewal Submission",html:`
          <p>You are about to submit your ${ae==="MTOP"?"MTOP":"Franchise Permit"} renewal application.</p>
          ${P?`
            <div style="margin-top: 10px; padding: 10px; background: #EFF6FF; border-radius: 8px; text-align: left;">
              <p style="font-weight: bold; color: #1E40AF;"> Existing Permit Verified</p>
              <p style="font-size: 12px; margin-top: 5px;"><strong>Permit ID:</strong> ${P.application_id}</p>
              <p style="font-size: 12px;"><strong>Status:</strong> ${P.status}</p>
              <p style="font-size: 12px;"><strong>Expiry:</strong> ${P.expiry_date}</p>
            </div>
          `:""}
          <div style="margin-top: 15px; padding: 10px; background: #F9FAFB; border-radius: 8px;">
            <p style="font-weight: bold; margin-bottom: 5px;">Renewal Declaration:</p>
            <p style="font-size: 13px;">I hereby declare that all information provided is true and correct to the best of my knowledge.</p>
          </div>
        `,icon:"question",showCancelButton:!0,confirmButtonColor:_t.success,cancelButtonColor:_t.danger,confirmButtonText:"Confirm & Submit",cancelButtonText:"Cancel"}).then(ie=>{ie.isConfirmed&&nt()})},It=()=>{r>1&&n(r-1)},Pe=de=>{dt.fire({icon:"success",title:"Success!",text:de,confirmButtonColor:_t.primary})},Ke=()=>{dt.fire({title:"Change Permit Type?",text:"Are you sure you want to go back and change the permit type? Your current progress will be lost.",icon:"warning",showCancelButton:!0,confirmButtonColor:_t.success,cancelButtonColor:_t.danger,confirmButtonText:"Yes, Go Back",cancelButtonText:"Cancel",customClass:{title:"swal-title-center",htmlContainer:"swal-text-center"}}).then(de=>{de.isConfirmed&&dt.fire({title:"Redirecting...",html:'<p style="text-align: center;">Taking you back to permit type selection...</p>',timer:2e3,timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1,customClass:{title:"swal-title-center",htmlContainer:"swal-text-center"},didOpen:()=>{dt.showLoading()},willClose:()=>{e("/user/franchise/type")}})})},nt=async()=>{if(!P){Pt("Please verify your existing permit before submitting.");return}o(!0);const de="/backend/franchise_permit/franchise_permit.php";try{const ie=new FormData;Object.keys(W).forEach(jt=>{const kt=W[jt];kt!=null&&(kt instanceof File?ie.append(jt,kt):typeof kt=="boolean"?ie.append(jt,kt?"1":"0"):ie.append(jt,String(kt)))}),ie.append("permit_type",s),ie.append("renewal_type",ae),ie.append("original_permit_id",W.original_permit_id);const Ue=localStorage.getItem("user_id")||localStorage.getItem("goserveph_user_id")||"0";if(ie.append("user_id",Ue),ie.append("renewal_fee_checked",W.renewal_fee_checked?"1":"0"),ie.append("sticker_fee_checked",W.sticker_fee_checked?"1":"0"),ie.append("inspection_fee_checked",W.inspection_fee_checked?"1":"0"),ie.append("business_tax_fee_checked",W.business_tax_fee_checked?"1":"0"),Ae){const jt={};Object.entries(Ae).forEach(([kt,gs])=>{gs&&(gs.isVerified||gs.results||gs.error)&&(jt[kt]={isVerified:!!gs.isVerified,notes:gs.isVerified?"AI Verified: Document type and owner name matched":gs.error||"AI Verification failed or not attempted"})}),Object.keys(jt).length>0&&ie.append("document_verification_data",JSON.stringify(jt))}const bt=await fetch(de,{method:"POST",body:ie});if(!bt.ok)throw new Error(`HTTP error! status: ${bt.status}`);const ot=await bt.text();let Dt;try{Dt=JSON.parse(ot)}catch(jt){console.error("Failed to parse JSON:",jt),Pt("Invalid response from server");return}if(Dt.success){Pe(`Renewal application submitted successfully! Application ID: ${Dt.data.application_id}`);try{ql("Franchise Permit",Dt.data?.application_id||"",{permit_type:"Renewal"})}catch(jt){console.warn("Activity log failed:",jt)}setTimeout(()=>{e("/user/permittracker")},3e3)}else Pt(`Error: ${Dt.message||"Unknown error"}`)}catch(ie){console.error("Submit error:",ie),Pt("Failed to submit renewal application. Please check your connection.")}finally{o(!1)}},zt=de=>{const ie=de.target.files[0];if(ie){const Ue=new FileReader;Ue.onload=bt=>{ve(ot=>({...ot,applicant_signature:bt.target.result}))},Ue.readAsDataURL(ie)}},is=(de,ie,Ue="text",bt=[],ot=!1)=>{const Dt=Q[de];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:[ie," ",ot&&"*"]}),Ue==="select"?t.jsxs("select",{name:de,value:W[de]||"",onChange:Be,className:`w-full p-3 border rounded-lg ${S[de]?"border-red-500":"border-black"} ${Dt?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:_t.secondary,fontFamily:_t.font},required:ot,disabled:Dt,children:[t.jsxs("option",{value:"",children:["Select ",ie.replace("*","").trim()]}),bt.map(jt=>t.jsx("option",{value:jt,children:jt},jt))]}):t.jsx("input",{type:Ue,name:de,value:W[de]||"",onChange:Be,placeholder:ie,className:`w-full p-3 border rounded-lg ${S[de]?"border-red-500":"border-black"} ${Dt?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:_t.secondary,fontFamily:_t.font},required:ot,readOnly:Dt}),Dt&&t.jsx("div",{className:"absolute top-9 right-0 mt-1 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Auto-filled"]})}),S[de]&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:_t.font},children:S[de]})]})},ke=()=>{switch(r){case 1:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:_t.secondary},children:"Select Permit to Renew"}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"p-6 border-2 border-blue-300 rounded-lg bg-blue-50 hover:bg-blue-100 transition-colors duration-200 cursor-pointer",onClick:()=>ne("MTOP"),children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"renewal_type",value:"MTOP",checked:ae==="MTOP",onChange:Be,className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ya,{className:"w-6 h-6 text-blue-600"}),t.jsx("h4",{className:"font-bold text-xl",style:{color:_t.primary},children:"MTOP Renewal"})]}),t.jsx("p",{className:"text-sm mt-2",style:{color:_t.secondary},children:"Motorized Tricycle Operator's Permit (MTOP) must be renewed annually so your tricycle can legally operate for hire."}),t.jsxs("div",{className:"mt-4 p-3 bg-blue-100 rounded-lg",children:[t.jsx("p",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Required Documents:"}),t.jsxs("ul",{className:"text-xs space-y-1 text-blue-700",children:[t.jsx("li",{children:" Old MTOP permit (for renewal)  photocopy"}),t.jsx("li",{children:" LTO Certificate of Registration (CR)  photocopy"}),t.jsx("li",{children:" Valid LTO Official Receipt (OR)  photocopy"}),t.jsx("li",{children:" Barangay Clearance/Certification"}),t.jsx("li",{children:" Community Tax Certificate (CTC/Cedula)"}),t.jsx("li",{children:" Valid Driver's License (if applicable)"}),t.jsx("li",{children:" Inspection report (if required)"})]})]})]})]})}),t.jsx("div",{className:"p-6 border-2 border-green-300 rounded-lg bg-green-50 hover:bg-green-100 transition-colors duration-200 cursor-pointer",onClick:()=>ne("FRANCHISE"),children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"renewal_type",value:"FRANCHISE",checked:ae==="FRANCHISE",onChange:Be,className:"w-5 h-5 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(fu,{className:"w-6 h-6 text-green-600"}),t.jsx("h4",{className:"font-bold text-xl",style:{color:_t.success},children:"Franchise Permit Renewal"})]}),t.jsx("p",{className:"text-sm mt-2",style:{color:_t.secondary},children:"For Franchise Permit renewal  this applies if your tricycle operation requires a franchise permit for legal operation."}),t.jsxs("div",{className:"mt-4 p-3 bg-green-100 rounded-lg",children:[t.jsx("p",{className:"text-sm font-semibold text-green-800 mb-2",children:"Required Documents:"}),t.jsxs("ul",{className:"text-xs space-y-1 text-green-700",children:[t.jsx("li",{children:" Official Receipt of Business Tax Payment"}),t.jsx("li",{children:" Barangay Business Clearance"}),t.jsx("li",{children:" Previous Franchise Permit"}),t.jsx("li",{children:" Old MTOP permit (photocopy)"}),t.jsx("li",{children:" LTO CR and OR (photocopies)"}),t.jsx("li",{children:" Barangay Clearance"}),t.jsx("li",{children:" Community Tax Certificate"})]})]})]})]})}),t.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("p",{className:"text-sm font-medium",style:{color:_t.secondary},children:["Selected: ",t.jsx("span",{className:"font-bold",children:ae==="MTOP"?"MTOP Renewal":"Franchise Permit Renewal"})]}),t.jsx("p",{className:"text-xs mt-2 text-gray-600",children:ae==="MTOP"?"Caloocan City Tricycle Franchising Board and TTMD handle MTOP renewal, confirmed yearly with LTO.":"Submit to City Treasurer's Office with completed renewal application."})]})]})})]});case 2:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:_t.secondary},children:"Verify Existing Permit"}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black mb-6",children:[t.jsxs("h4",{className:"font-bold text-lg mb-4",style:{color:_t.primary},children:["Check ",ae==="MTOP"?"MTOP":"Franchise"," Permit Status"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"Existing Permit ID *"}),t.jsx("input",{type:"text",name:"existing_permit_id",value:W.existing_permit_id||"",onChange:Be,placeholder:"Enter your existing permit ID",className:`w-full p-3 border rounded-lg ${S.existing_permit_id?"border-red-500":"border-black"}`,style:{color:_t.secondary,fontFamily:_t.font}}),S.existing_permit_id&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.existing_permit_id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"Plate Number *"}),t.jsx("input",{type:"text",name:"existing_plate_number",value:W.existing_plate_number||"",onChange:Be,placeholder:"ABC1234",className:`w-full p-3 border rounded-lg ${S.existing_plate_number?"border-red-500":"border-black"}`,style:{color:_t.secondary,fontFamily:_t.font,textTransform:"uppercase"}}),S.existing_plate_number&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.existing_plate_number}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: 3 letters followed by 4 digits (e.g., ABC1234)"})]})]}),t.jsx("div",{className:"mt-6",children:t.jsx("button",{type:"button",onClick:xe,disabled:M||!W.existing_permit_id||!W.existing_plate_number,style:{background:M||!W.existing_permit_id||!W.existing_plate_number?"#9CA3AF":_t.primary},className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:M?"Checking...":`Verify ${ae==="MTOP"?"MTOP":"Franchise"} Permit`})})]}),P&&t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h4",{className:"font-bold text-lg",style:{color:_t.success},children:"Existing Permit Verified"}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("button",{type:"button",onClick:ct,className:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors",children:[t.jsx(ls,{className:"w-4 h-4"}),"Clear Data"]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[t.jsx("p",{className:"text-sm font-medium text-blue-700 mb-2",children:"Permit Details"}),t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Permit ID:"})," ",P.application_id]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Type:"})," ",P.permit_subtype||ae]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Status:"})," ",t.jsx("span",{className:`font-semibold ${P.status==="EXPIRED"?"text-red-600":"text-green-600"}`,children:P.status})]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Issue Date:"})," ",P.date_approved]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Expiry Date:"})," ",P.expiry_date]})]})]}),t.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[t.jsx("p",{className:"text-sm font-medium text-green-700 mb-2",children:"Vehicle Details"}),t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Plate:"})," ",P.plate_number]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Make/Model:"})," ",P.make_brand," ",P.model]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Color:"})," ",P.color]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Operator:"})," ",P.operator_type]})]})]})]}),t.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Ks,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Data Auto-filled"}),t.jsx("p",{className:"text-xs mt-1 text-yellow-700",children:'Your information has been automatically filled from your existing permit. Fields marked with "Auto-filled" are read-only. You can clear the data if you need to make changes.'})]})]})})]}),W.original_expiry_date&&t.jsx("div",{className:"mt-4",children:t.jsx("div",{className:`p-4 rounded-lg border ${new Date(W.original_expiry_date)<new Date?"bg-red-50 border-red-200":"bg-green-50 border-green-200"}`,children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(bn,{className:`w-5 h-5 mr-2 mt-0.5 ${new Date(W.original_expiry_date)<new Date?"text-red-600":"text-green-600"}`}),t.jsxs("div",{children:[t.jsx("p",{className:`text-sm font-medium ${new Date(W.original_expiry_date)<new Date?"text-red-700":"text-green-700"}`,children:new Date(W.original_expiry_date)<new Date?" PERMIT EXPIRED":"Permit Active"}),t.jsxs("p",{className:"text-xs mt-1",style:{color:_t.secondary,fontFamily:_t.font},children:["Original expiry date: ",W.original_expiry_date,new Date(W.original_expiry_date)<new Date?" (Expired "+Math.ceil((new Date-new Date(W.original_expiry_date))/(1e3*60*60*24))+" days ago)":" (Expires in "+Math.ceil((new Date(W.original_expiry_date)-new Date)/(1e3*60*60*24))+" days)"]})]})]})})})]});case 3:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:_t.secondary},children:"Applicant Information"}),P&&t.jsx("div",{className:"p-4 rounded-lg border mb-4 bg-blue-50 border-blue-200",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-full mr-3",children:t.jsx(CQ,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-blue-700",children:" Data Auto-filled from Existing Permit (READ-ONLY)"}),t.jsx("p",{className:"text-xs mt-1 text-blue-600",children:'Your information has been automatically filled from your existing permit and cannot be modified. Fields marked with "Auto-filled" are read-only.'})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[is("first_name","First Name ","text",[],!0),is("last_name","Last Name ","text",[],!0),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"Middle Initial"}),t.jsx("input",{type:"text",name:"middle_initial",value:W.middle_initial||"",onChange:Be,placeholder:"M.I.",maxLength:"1",className:`w-full p-3 border rounded-lg border-black ${Q.middle_initial?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:_t.secondary,fontFamily:_t.font},readOnly:Q.middle_initial}),Q.middle_initial&&t.jsx("div",{className:"absolute top-9 right-0 mt-1 mr-3",children:t.jsxs("div",{className:"flex items-center text-xs text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Auto-filled"]})})]}),is("home_address","Home Address","text",[],!0),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"Contact Number *"}),t.jsx("input",{type:"tel",name:"contact_number",value:W.contact_number,onChange:Be,placeholder:"09XXXXXXXXX",maxLength:11,className:`w-full p-3 border rounded-lg ${S.contact_number?"border-red-500":"border-black"} ${Q.contact_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:_t.secondary,fontFamily:_t.font},readOnly:Q.contact_number}),S.contact_number&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:_t.font},children:S.contact_number})]}),is("email","Email Address ","email",[],!0),is("citizenship","Citizenship ","select",Dq,!0),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"Date of Birth *"}),t.jsx("input",{type:"date",name:"birth_date",value:W.birth_date||"",onChange:Be,className:`w-full p-3 border rounded-lg ${S.birth_date?"border-red-500":"border-black"} ${Q.birth_date?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:_t.secondary,fontFamily:_t.font},readOnly:Q.birth_date}),S.birth_date&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:_t.font},children:S.birth_date})]}),is("id_type","Valid ID Type *","select",["Driver's License","Passport","National ID","UMID","Postal ID","Voter's ID"],!0),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"Valid ID Number *"}),t.jsx("input",{type:"text",name:"id_number",value:W.id_number||"",onChange:Be,placeholder:"ID Number",className:`w-full p-3 border rounded-lg ${S.id_number?"border-red-500":"border-black"} ${Q.id_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:_t.secondary,fontFamily:_t.font},required:!0,readOnly:Q.id_number})]}),is("operator_type","Operator Type","select",Ze,!0)]})]});case 4:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:_t.secondary},children:"Vehicle Information"}),P&&t.jsx("div",{className:"p-4 rounded-lg border mb-4 bg-blue-50 border-blue-200",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-full mr-3",children:t.jsx(Ht,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-blue-700",children:" Vehicle Data Auto-filled from Existing Permit (READ-ONLY)"}),t.jsx("p",{className:"text-xs mt-1 text-blue-600",children:"Vehicle information has been automatically filled from your existing permit and cannot be modified."})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[is("make_brand","Make / Brand","text",[],!0),is("model","Model","text",[],!0),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"Engine Number *"}),t.jsx("input",{type:"text",name:"engine_number",value:W.engine_number||"",onChange:Be,placeholder:"Engine Number must be between 8-12 characters",maxLength:"12",className:`w-full p-3 border rounded-lg ${S.engine_number?"border-red-500":"border-black"} ${Q.engine_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:_t.secondary,fontFamily:_t.font,textTransform:"uppercase"},required:!0,readOnly:Q.engine_number}),t.jsx("p",{className:"text-gray-500 text-xs mt-1",style:{fontFamily:_t.font},children:"Engine number must be between 8-12 characters"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"Chassis Number *"}),t.jsx("input",{type:"text",name:"chassis_number",value:W.chassis_number||"",onChange:Be,placeholder:"Chassis Number must be exactly 17 characters",maxLength:"17",className:`w-full p-3 border rounded-lg ${S.chassis_number?"border-red-500":"border-black"} ${Q.chassis_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:_t.secondary,fontFamily:_t.font,textTransform:"uppercase"},required:!0,readOnly:Q.chassis_number}),t.jsx("p",{className:"text-gray-500 text-xs mt-1",style:{fontFamily:_t.font},children:"Chassis number must be exactly 17 characters"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"Plate Number *"}),t.jsx("input",{type:"text",name:"plate_number",value:W.plate_number||"",onChange:Be,placeholder:"ABC1234",maxLength:"7",className:`w-full p-3 border rounded-lg ${S.plate_number?"border-red-500":"border-black"} ${Q.plate_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:_t.secondary,fontFamily:_t.font,textTransform:"uppercase"},required:!0,readOnly:Q.plate_number}),t.jsx("p",{className:"text-gray-500 text-xs mt-1",style:{fontFamily:_t.font},children:"Plate number format: 3 letters, 4 digits (e.g., ABC1234)"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"Year Acquired *"}),t.jsx("input",{type:"text",name:"year_acquired",value:W.year_acquired||"",onChange:Be,placeholder:"YYYY",maxLength:"4",className:`w-full p-3 border rounded-lg ${S.year_acquired?"border-red-500":"border-black"} ${Q.year_acquired?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:_t.secondary,fontFamily:_t.font},required:!0,readOnly:Q.year_acquired}),t.jsx("p",{className:"text-gray-500 text-xs mt-1",style:{fontFamily:_t.font},children:"Year must be a valid 4-digit year (1900-present)"})]}),is("color","Color","text",[],!0),is("vehicle_type","Vehicle Type","select",["Tricycle","Motorcycle","Pedicabs","E-Tricycle"],!0),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"LTO OR Number *"}),t.jsx("input",{type:"text",name:"lto_or_number",value:W.lto_or_number||"",onChange:Be,placeholder:"OR number must be 7-8 digits",maxLength:"8",className:`w-full p-3 border rounded-lg ${S.lto_or_number?"border-red-500":"border-black"} ${Q.lto_or_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:_t.secondary,fontFamily:_t.font},required:!0,readOnly:Q.lto_or_number}),t.jsx("p",{className:"text-gray-500 text-xs mt-1",style:{fontFamily:_t.font},children:"OR number must be 7-8 digits"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"LTO CR Number *"}),t.jsx("input",{type:"text",name:"lto_cr_number",value:W.lto_cr_number||"",onChange:Be,placeholder:"CR number must be 7-8 digits",maxLength:"8",className:`w-full p-3 border rounded-lg ${S.lto_cr_number?"border-red-500":"border-black"} ${Q.lto_cr_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:_t.secondary,fontFamily:_t.font},required:!0,readOnly:Q.lto_cr_number}),t.jsx("p",{className:"text-gray-500 text-xs mt-1",style:{fontFamily:_t.font},children:"CR number must be 7-8 digits"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"LTO Expiration Date *"}),t.jsx("input",{type:"date",name:"lto_expiration_date",value:W.lto_expiration_date||"",onChange:Be,className:`w-full p-3 border rounded-lg ${S.lto_expiration_date?"border-red-500":"border-black"} ${Q.lto_expiration_date?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:_t.secondary,fontFamily:_t.font},readOnly:Q.lto_expiration_date}),t.jsx("p",{className:"text-gray-500 text-xs mt-1",style:{fontFamily:_t.font},children:"LTO Expiration Date must be 2027 or later"}),S.lto_expiration_date&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:_t.font},children:S.lto_expiration_date})]}),t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"MV File Number"}),t.jsx("input",{type:"text",name:"mv_file_number",value:W.mv_file_number||"",onChange:Be,placeholder:"MV File Number",className:`w-full p-3 border border-black rounded-lg ${Q.mv_file_number?"bg-gray-100 cursor-not-allowed":"bg-white"}`,style:{color:_t.secondary,fontFamily:_t.font},readOnly:Q.mv_file_number})]}),is("district","District","text",[],!0),is("route_zone","Route / Zone","text",[],!0),is("barangay_of_operation","Barangay of Operation","text",[],!0),is("toda_name","TODA Name","text",[],!1),is("company_name","Company/Organization Name","text",[],!1)]})]});case 5:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:_t.secondary},children:"Required Documents for Renewal"}),t.jsxs("p",{className:"text-sm mb-4 text-gray-600",style:{fontFamily:_t.font},children:[t.jsx("span",{className:"text-red-600 font-bold",children:"* All required documents must be uploaded."})," Documents marked with * are required for ",ae==="MTOP"?"MTOP":"Franchise Permit"," renewal."]}),S.min_documents&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg mb-4",children:t.jsx("p",{className:"text-red-600 font-medium",style:{fontFamily:_t.font},children:S.min_documents})}),t.jsxs("div",{className:"space-y-4",children:[ae==="FRANCHISE"&&t.jsxs("div",{className:"flex flex-col p-4 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"flex items-center font-medium",children:t.jsx("span",{className:"text-red-600",style:{fontFamily:_t.font},children:"Barangay Business Clearance *"})}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Business clearance from your barangay"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 text-sm font-medium",style:{color:_t.secondary},children:"Barangay Clearance ID *"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",name:"barangay_clearance_id",value:W.barangay_clearance_id||"",onChange:Be,placeholder:"Enter Barangay Clearance ID",className:"flex-1 p-3 border border-black rounded-lg",style:{fontFamily:_t.font},required:!0}),t.jsx("button",{type:"button",onClick:fe,disabled:we||!W.barangay_clearance_id,className:"px-4 py-3 rounded-lg font-semibold text-white transition-colors duration-300 flex items-center gap-2",style:{background:we||!W.barangay_clearance_id?"#9CA3AF":_t.primary,cursor:we||!W.barangay_clearance_id?"not-allowed":"pointer"},onMouseEnter:ie=>{!we&&W.barangay_clearance_id&&(ie.currentTarget.style.background=_t.accent)},onMouseLeave:ie=>{!we&&W.barangay_clearance_id&&(ie.currentTarget.style.background=_t.primary)},children:we?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"}),"Verifying..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Pr,{className:"w-4 h-4"}),"Verify"]})})]}),ce&&t.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded flex items-center gap-2",children:[t.jsx(Ht,{className:"w-4 h-4 text-green-600"}),t.jsxs("span",{className:"text-sm text-green-700",style:{fontFamily:_t.font},children:["Verified - Permit ID: ",ce.permit_id]})]}),S.barangay_clearance_id&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:_t.font},children:S.barangay_clearance_id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 text-sm font-medium",style:{color:_t.secondary},children:"Upload Barangay Clearance Document *"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"barangay_business_clearance",onChange:Be,accept:".jpg,.jpeg,.png,.pdf",className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:_t.font},required:!0})]}),S.barangay_business_clearance&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:_t.font},children:S.barangay_business_clearance}),W.barangay_business_clearance&&t.jsxs("p",{className:"text-green-600 text-xs mt-1 flex items-center",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Uploaded: ",W.barangay_business_clearance.name]})]})]})]}),[{name:"old_permit_copy",label:"Old Permit Copy *",description:"Photocopy of your existing permit for renewal"},{name:"lto_cr_copy",label:"LTO CR Copy *",description:"Photocopy of LTO Certificate of Registration"},{name:"lto_or_copy",label:"LTO OR Copy *",description:"Photocopy of valid LTO Official Receipt"},{name:"community_tax_certificate",label:"Community Tax Certificate *",description:"CTC/Cedula"}].map(ie=>t.jsxs("div",{className:"flex flex-col p-4 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"flex items-center font-medium",children:t.jsx("span",{className:"text-red-600",style:{fontFamily:_t.font},children:ie.label})}),ie.description&&t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ie.description})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:ie.name,onChange:Be,accept:".jpg,.jpeg,.png,.pdf",className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:_t.font},required:!0})]}),S[ie.name]&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:_t.font},children:S[ie.name]}),W[ie.name]&&t.jsxs("p",{className:"text-green-600 text-xs mt-1 flex items-center",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Uploaded: ",W[ie.name].name]})]})]},ie.name)),t.jsxs("div",{className:"flex flex-col p-4 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"flex items-center font-medium",children:t.jsx("span",{className:"text-red-600",style:{fontFamily:_t.font},children:"Driver's License *"})}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Valid driver's license of the operator"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"drivers_license",onChange:Be,accept:".jpg,.jpeg,.png,.pdf",className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:_t.font},required:!0})]}),S.drivers_license&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:_t.font},children:S.drivers_license}),W.drivers_license&&t.jsxs("div",{className:"mt-2 space-y-2",children:[t.jsxs("p",{className:"text-green-600 text-xs flex items-center",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Uploaded: ",W.drivers_license.name]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{type:"button",onClick:()=>ue("drivers_license",W.drivers_license),disabled:Ae.drivers_license?.isVerifying,className:`flex items-center gap-1 px-3 py-1 text-sm rounded border ${Ae.drivers_license?.isVerified?"bg-green-50 border-green-500 text-green-700":"bg-blue-50 border-blue-500 text-blue-700 hover:bg-blue-100"}`,style:{fontFamily:_t.font},children:Ae.drivers_license?.isVerifying?t.jsxs(t.Fragment,{children:[t.jsx(Or,{className:"w-4 h-4 animate-spin"}),"Verifying..."]}):Ae.drivers_license?.isVerified?t.jsxs(t.Fragment,{children:[t.jsx(Ht,{className:"w-4 h-4"}),"Verified"]}):t.jsxs(t.Fragment,{children:[t.jsx(Pr,{className:"w-4 h-4"}),"Verify with AI"]})}),Ae.drivers_license?.isVerifying&&t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Ae.drivers_license?.progress||0}%`}})}),t.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[Math.round(Ae.drivers_license?.progress||0),"% complete"]})]})]})]})]})]}),[{name:"inspection_report",label:"Inspection Report",description:"Roadworthiness inspection report (if required)",optional:!0}].map(ie=>t.jsxs("div",{className:"flex flex-col p-4 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"mb-3",children:[t.jsxs("label",{className:"flex items-center font-medium",children:[t.jsx("span",{style:{color:_t.secondary,fontFamily:_t.font},children:ie.label}),ie.optional&&t.jsx("span",{className:"ml-2 text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded",children:"Optional"})]}),ie.description&&t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ie.description})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:ie.name,onChange:Be,accept:".jpg,.jpeg,.png,.pdf",className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:_t.font}})]}),W[ie.name]&&t.jsxs("p",{className:"text-green-600 text-xs mt-1 flex items-center",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Uploaded: ",W[ie.name].name]})]})]},ie.name))]})]});case 6:const de=ae==="MTOP"?J.mtop:J.franchise;return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:_t.secondary},children:"Payment Information"}),t.jsx("p",{className:"text-sm mb-4 text-gray-600",style:{fontFamily:_t.font},children:t.jsx("span",{className:"text-red-600 font-bold",children:"* Please select your payment method and choose which fees to pay."})}),S.payment&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg mb-4",children:t.jsx("p",{className:"text-red-600 font-medium",style:{fontFamily:_t.font},children:S.payment})}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black mb-6",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:_t.primary},children:"Select Payment Method"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all duration-300 ${W.payment_method==="upload"?"border-green-500 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onClick:()=>ts("upload"),children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 ${W.payment_method==="upload"?"border-green-500 bg-green-500":"border-gray-300"}`,children:W.payment_method==="upload"&&t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx(Ht,{className:"w-3 h-3 text-white"})})}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold",children:"Upload Receipts"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Upload payment receipts from offline payment"})]})]})}),t.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all duration-300 ${W.payment_method==="online"?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onClick:()=>ts("online"),children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 ${W.payment_method==="online"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:W.payment_method==="online"&&t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx(Ht,{className:"w-3 h-3 text-white"})})}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold",children:"Pay Online Now"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Pay securely via Revenue Treasury portal"})]})]})})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:[t.jsx("h4",{className:"font-bold text-lg mb-4",style:{color:_t.primary},children:"Select Fees to Pay"}),t.jsxs("div",{className:"space-y-4",children:[[{name:"renewal_fee",label:"Renewal Fee",amount:de.renewal_fee,checked:W.renewal_fee_checked},{name:"sticker_fee",label:"Sticker Fee",amount:de.sticker_fee,checked:W.sticker_fee_checked},{name:"inspection_fee",label:"Inspection Fee",amount:de.inspection_fee,checked:W.inspection_fee_checked}].map(ie=>t.jsxs("div",{className:"flex flex-col p-4 border border-gray-300 rounded-lg",children:[t.jsxs("label",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",name:`${ie.name}_checked`,checked:ie.checked,onChange:Be,className:"w-5 h-5 mr-2",style:{color:_t.primary}}),t.jsx("span",{className:"font-medium",style:{color:_t.secondary,fontFamily:_t.font},children:ie.label})]}),t.jsxs("span",{className:"font-bold",style:{color:_t.primary},children:["",ie.amount.toFixed(2)]})]}),ie.checked&&W.payment_method==="online"&&t.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded",children:t.jsx("p",{className:"text-sm text-blue-700",children:"This fee will be included in your online payment. You will be redirected to the Revenue Treasury portal to complete payment."})}),ie.checked&&W.payment_method==="upload"&&t.jsx("div",{className:"mt-3 space-y-3",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 text-sm font-medium",style:{color:_t.secondary,fontFamily:_t.font},children:"OR Number"}),t.jsx("input",{type:"text",name:`${ie.name}_or`,value:W[`${ie.name}_or`]||"",onChange:Be,placeholder:"OR Number",className:"w-full p-2 border border-black rounded",style:{fontFamily:_t.font},required:ie.checked})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 text-sm font-medium",style:{color:_t.secondary,fontFamily:_t.font},children:"Receipt *"}),t.jsxs("div",{className:"flex items-center gap-3 p-2 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-4 h-4 text-gray-500"}),t.jsx("input",{type:"file",name:`${ie.name}_receipt`,onChange:Be,accept:".jpg,.jpeg,.png,.pdf",className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:_t.font},required:ie.checked})]}),W[`${ie.name}_receipt`]&&t.jsxs("p",{className:"text-green-600 text-xs mt-1 flex items-center",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Uploaded: ",W[`${ie.name}_receipt`].name]})]})]})}),S[`${ie.name}_receipt`]&&t.jsx("p",{className:"text-red-600 text-sm mt-2",children:S[`${ie.name}_receipt`]})]},ie.name)),t.jsx("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-300 rounded-lg",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",style:{color:_t.secondary},children:"Total Amount:"}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Selected ",W.payment_method==="online"?"for online payment":"for receipt upload"]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-2xl font-bold",style:{color:_t.primary},children:["",((W.renewal_fee_checked?de.renewal_fee:0)+(W.sticker_fee_checked?de.sticker_fee:0)+(W.inspection_fee_checked?de.inspection_fee:0)).toFixed(2)]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[[W.renewal_fee_checked,W.sticker_fee_checked,W.inspection_fee_checked].filter(Boolean).length," fee(s) selected"]})]})]})}),X.isPaid&&t.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ht,{className:"w-6 h-6 text-green-600 mr-3"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-green-700",children:" Payment Completed"}),t.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Payment Method: ",X.paymentMethod==="online"?"Online Payment":"Receipt Upload"]}),X.paymentDate&&t.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Paid on: ",X.paymentDate]}),X.transactionId&&t.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Transaction ID: ",X.transactionId]})]})]})}),W.payment_method==="online"&&t.jsxs("div",{className:"mt-6",children:[t.jsxs("button",{type:"button",onClick:as,disabled:!W.renewal_fee_checked&&!W.sticker_fee_checked&&!W.inspection_fee_checked,style:{background:!W.renewal_fee_checked&&!W.sticker_fee_checked&&!W.inspection_fee_checked?"#9CA3AF":_t.primary},className:"w-full py-3 rounded-lg font-semibold text-white transition-colors duration-300 flex items-center justify-center gap-3",children:[t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Pay Now via Revenue Treasury (Opens in New Tab)"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"You will be redirected to the Revenue Treasury secure payment portal in a new tab"})]}),t.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Payment Instructions:"}),t.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1",children:[t.jsx("li",{children:" Select at least one fee to proceed"}),t.jsx("li",{children:' For online payment: Click "Pay Now" to complete payment in a new tab'}),t.jsx("li",{children:" For receipt upload: Upload clear photos/scans of official receipts"}),t.jsx("li",{children:" All fees are non-refundable once paid"}),t.jsx("li",{children:" Keep your payment references for verification"})]})]})]})]})]});case 7:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:_t.secondary},children:"Declaration and Signature"}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:[t.jsxs("div",{className:"mb-8 p-6 border-2 border-red-200 bg-red-50 rounded-lg",children:[t.jsx("h4",{className:"font-bold text-lg mb-4 text-red-700",children:"RENEWAL DECLARATION"}),t.jsxs("div",{className:"space-y-3 text-sm",style:{fontFamily:_t.font},children:[t.jsxs("p",{children:["I, ",t.jsx("span",{className:"font-bold",children:Ne()||"[Full Name]"}),", hereby solemnly declare that:"]}),t.jsxs("ol",{className:"list-decimal ml-5 space-y-2",children:[t.jsx("li",{children:"All information provided in this renewal application is true, complete, and correct;"}),t.jsx("li",{children:"I am the registered owner/authorized representative of the tricycle unit described in this renewal application;"}),t.jsx("li",{children:"The vehicle remains roadworthy and complies with all safety and emission standards;"}),t.jsx("li",{children:"I have secured all necessary clearances, permits, and insurance coverage for renewal;"}),t.jsx("li",{children:"I shall continue to abide by all traffic rules, regulations, and ordinances of Caloocan City;"}),t.jsx("li",{children:"I understand that any false statement or misrepresentation shall be grounds for:"}),t.jsxs("ul",{className:"list-disc ml-8 mt-2 space-y-1",children:[t.jsx("li",{children:"Immediate cancellation of the permit renewal"}),t.jsx("li",{children:"Administrative and criminal liability"}),t.jsx("li",{children:"Blacklisting from future applications"}),t.jsx("li",{children:"Fines and penalties as per existing laws"})]}),t.jsx("li",{children:"I agree to the processing of my personal data for renewal purposes in accordance with the Data Privacy Act of 2012;"}),t.jsx("li",{children:"I consent to inspections and monitoring by authorized personnel."})]}),t.jsx("p",{className:"mt-4 font-semibold",children:"Republic Act No. 4136 - Land Transportation and Traffic Code"}),t.jsx("p",{className:"text-xs italic",children:'"Any person who makes any false statement in any document required by this Act shall, upon conviction, be punished by a fine of not less than 5,000 nor more than 20,000 or imprisonment of not less than 6 months nor more than 1 year, or both."'})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:["Applicant's Signature ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 h-32 flex items-center justify-center",children:W.applicant_signature?t.jsxs("div",{className:"text-center",children:[t.jsx("img",{src:W.applicant_signature,alt:"Applicant Signature",className:"max-h-20 mx-auto"}),t.jsx("p",{className:"text-xs mt-2 text-green-600",children:"Signature uploaded"}),t.jsx("button",{type:"button",onClick:()=>ve(ie=>({...ie,applicant_signature:""})),className:"text-xs text-red-600 mt-1 hover:text-red-800",children:"Remove"})]}):t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-gray-500 mb-2",children:"Upload your signature"}),t.jsx("input",{type:"file",accept:"image/*",onChange:zt,className:"hidden",id:"signature-upload"}),t.jsx("label",{htmlFor:"signature-upload",className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100 transition-colors cursor-pointer",children:"Upload Signature"}),S.applicant_signature&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.applicant_signature})]})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:["Date of Submission ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"date",name:"date_submitted",value:new Date().toISOString().split("T")[0],className:"w-full p-3 border border-black rounded-lg bg-gray-100 cursor-not-allowed",style:{color:_t.secondary,fontFamily:_t.font},readOnly:!0,disabled:!0}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Date is automatically set to today"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:_t.secondary},children:"Barangay Captain/Authorized Signatory (For office use only)"}),t.jsx("input",{type:"text",name:"barangay_captain_signature",value:W.barangay_captain_signature,onChange:Be,placeholder:"Will be filled by Barangay Office",className:"w-full p-3 border border-gray-300 bg-gray-50 rounded-lg",style:{color:_t.secondary,fontFamily:_t.font},disabled:!0})]})]}),t.jsx("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("input",{type:"checkbox",id:"final-declaration",checked:w,onChange:ie=>B(ie.target.checked),className:`w-5 h-5 mt-1 text-green-600 border-gray-300 rounded focus:ring-green-500 ${S.declaration?"border-red-500":""}`}),t.jsxs("label",{htmlFor:"final-declaration",className:"ml-3",children:[t.jsx("span",{className:"font-bold text-red-700",children:"FINAL DECLARATION AND CONSENT *"}),t.jsxs("p",{className:"text-sm mt-1",style:{color:_t.secondary,fontFamily:_t.font},children:["I, ",t.jsx("span",{className:"font-semibold",children:Ne()||"[Full Name]"}),", have read, understood, and agree to all terms and conditions stated in this renewal declaration. I certify that all information provided is accurate and I accept full responsibility for its veracity."]}),S.declaration&&t.jsx("p",{className:"text-red-600 text-sm mt-1",children:S.declaration})]})]})})]})]});case 8:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:_t.secondary},children:"Review Your Renewal Application"}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg mb-4",children:[t.jsx("h5",{className:"font-bold text-lg mb-2",style:{color:_t.primary},children:ae==="MTOP"?"MTOP Renewal Application":"Franchise Permit Renewal Application"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Original Permit ID:"})," ",W.original_permit_id]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Issue Date:"})," ",W.original_issue_date]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Expiry Date:"})," ",W.original_expiry_date]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Status:"})," ",t.jsx("span",{className:`font-semibold ${W.permit_status==="EXPIRED"?"text-red-600":"text-green-600"}`,children:W.permit_status})]})]})]}),P&&t.jsx("div",{className:"p-4 rounded-lg border mb-4 bg-blue-50 border-blue-200",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-full mr-3",children:t.jsx(Ht,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-blue-700",children:" Data Auto-filled from Existing Permit"}),t.jsx("p",{className:"text-xs mt-1 text-blue-600",children:"Your application has been pre-filled with data from your existing permit"})]})]})}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:_t.primary},children:"Applicant Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",style:{fontFamily:_t.font},children:[t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Full Name:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:Ne()})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Contact Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.contact_number})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg md:col-span-2",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Home Address:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.home_address})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Email:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.email})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Citizenship:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.citizenship})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Birth Date:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.birth_date})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"ID Type:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.id_type})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"ID Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.id_number})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Operator Type:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.operator_type})]}),W.company_name&&t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg md:col-span-2",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Company Name:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.company_name})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:_t.primary},children:"Vehicle Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",style:{fontFamily:_t.font},children:[t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Make/Brand:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.make_brand})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Model:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.model})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Plate Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.plate_number})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Engine Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.engine_number})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Chassis Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.chassis_number})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Year Acquired:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.year_acquired})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Color:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.color})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Vehicle Type:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.vehicle_type})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"LTO OR Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.lto_or_number})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"LTO CR Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.lto_cr_number})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"LTO Expiration Date:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.lto_expiration_date})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"MV File Number:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.mv_file_number||"N/A"})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"District:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.district})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:_t.primary},children:"Operation Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",style:{fontFamily:_t.font},children:[t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg md:col-span-2",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Route/Zone:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.route_zone})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Barangay of Operation:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.barangay_of_operation})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"TODA Name:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.toda_name})]}),ae==="FRANCHISE"&&W.mayors_permit_id&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Franchise Permit ID:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.mayors_permit_id})]}),t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Barangay Clearance ID:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.barangay_clearance_id||"N/A"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:_t.primary},children:"Uploaded Documents"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[W.old_permit_copy&&t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Kt,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-700",children:"Old Permit Copy"}),t.jsx("p",{className:"text-xs text-gray-500",children:W.old_permit_copy.name})]})]}),t.jsx("button",{onClick:()=>E({url:URL.createObjectURL(W.old_permit_copy),type:W.old_permit_copy.type}),className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:t.jsx(ws,{className:"w-4 h-4 text-blue-600"})})]})}),W.lto_cr_copy&&t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Kt,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-700",children:"LTO CR Copy"}),t.jsx("p",{className:"text-xs text-gray-500",children:W.lto_cr_copy.name})]})]}),t.jsx("button",{onClick:()=>E({url:URL.createObjectURL(W.lto_cr_copy),type:W.lto_cr_copy.type}),className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:t.jsx(ws,{className:"w-4 h-4 text-blue-600"})})]})}),W.lto_or_copy&&t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Kt,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-700",children:"LTO OR Copy"}),t.jsx("p",{className:"text-xs text-gray-500",children:W.lto_or_copy.name})]})]}),t.jsx("button",{onClick:()=>E({url:URL.createObjectURL(W.lto_or_copy),type:W.lto_or_copy.type}),className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:t.jsx(ws,{className:"w-4 h-4 text-blue-600"})})]})}),W.community_tax_certificate&&t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Kt,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-700",children:"Community Tax Certificate"}),t.jsx("p",{className:"text-xs text-gray-500",children:W.community_tax_certificate.name})]})]}),t.jsx("button",{onClick:()=>E({url:URL.createObjectURL(W.community_tax_certificate),type:W.community_tax_certificate.type}),className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:t.jsx(ws,{className:"w-4 h-4 text-blue-600"})})]})}),W.drivers_license&&t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Kt,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-700",children:"Driver's License"}),t.jsx("p",{className:"text-xs text-gray-500",children:W.drivers_license.name}),Ae.drivers_license.isVerified&&t.jsxs("span",{className:"inline-flex items-center text-xs text-green-600 mt-1",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"}),"AI Verified"]})]})]}),t.jsx("button",{onClick:()=>E({url:URL.createObjectURL(W.drivers_license),type:W.drivers_license.type}),className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:t.jsx(ws,{className:"w-4 h-4 text-blue-600"})})]})}),W.inspection_report&&t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Kt,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-700",children:"Inspection Report"}),t.jsx("p",{className:"text-xs text-gray-500",children:W.inspection_report.name})]})]}),t.jsx("button",{onClick:()=>E({url:URL.createObjectURL(W.inspection_report),type:W.inspection_report.type}),className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:t.jsx(ws,{className:"w-4 h-4 text-blue-600"})})]})}),ae==="FRANCHISE"&&W.barangay_business_clearance&&t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Kt,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-700",children:"Barangay Business Clearance"}),t.jsx("p",{className:"text-xs text-gray-500",children:W.barangay_business_clearance.name})]})]}),t.jsx("button",{onClick:()=>E({url:URL.createObjectURL(W.barangay_business_clearance),type:W.barangay_business_clearance.type}),className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:t.jsx(ws,{className:"w-4 h-4 text-blue-600"})})]})})]})]}),W.payment_method==="upload"&&t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:_t.primary},children:"Payment Receipts"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[W.renewal_fee_checked&&W.renewal_fee_receipt&&t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(fu,{className:"w-5 h-5 text-green-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-700",children:"Renewal Fee Receipt"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["OR: ",W.renewal_fee_or]})]})]}),t.jsx("button",{onClick:()=>E({url:URL.createObjectURL(W.renewal_fee_receipt),type:W.renewal_fee_receipt.type}),className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:t.jsx(ws,{className:"w-4 h-4 text-blue-600"})})]})}),W.sticker_fee_checked&&W.sticker_fee_receipt&&t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(fu,{className:"w-5 h-5 text-green-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-700",children:"Sticker Fee Receipt"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["OR: ",W.sticker_fee_or]})]})]}),t.jsx("button",{onClick:()=>E({url:URL.createObjectURL(W.sticker_fee_receipt),type:W.sticker_fee_receipt.type}),className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:t.jsx(ws,{className:"w-4 h-4 text-blue-600"})})]})}),W.inspection_fee_checked&&W.inspection_fee_receipt&&t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(fu,{className:"w-5 h-5 text-green-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-700",children:"Inspection Fee Receipt"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["OR: ",W.inspection_fee_or]})]})]}),t.jsx("button",{onClick:()=>E({url:URL.createObjectURL(W.inspection_fee_receipt),type:W.inspection_fee_receipt.type}),className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:t.jsx(ws,{className:"w-4 h-4 text-blue-600"})})]})})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:_t.primary},children:"Payment Summary"}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[t.jsxs("p",{className:"font-medium mb-2",children:["Payment Method: ",t.jsx("span",{className:`font-bold ${W.payment_method==="online"?"text-blue-600":"text-green-600"}`,children:W.payment_method==="online"?"Online Payment":"Receipt Upload"})]}),t.jsxs("div",{className:"space-y-2 mb-3",children:[W.renewal_fee_checked&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-700",children:"Renewal Fee:"}),t.jsxs("span",{className:"font-semibold",children:["",(ae==="MTOP"?J.mtop.renewal_fee:J.franchise.renewal_fee).toFixed(2)]})]}),W.sticker_fee_checked&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-700",children:"Sticker Fee:"}),t.jsxs("span",{className:"font-semibold",children:["",(ae==="MTOP"?J.mtop.sticker_fee:J.franchise.sticker_fee).toFixed(2)]})]}),W.inspection_fee_checked&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-700",children:"Inspection Fee:"}),t.jsxs("span",{className:"font-semibold",children:["",(ae==="MTOP"?J.mtop.inspection_fee:J.franchise.inspection_fee).toFixed(2)]})]})]}),t.jsx("div",{className:"border-t pt-3 mt-3",children:t.jsxs("p",{className:"font-medium",children:["Total Amount: ",t.jsxs("span",{className:"text-2xl font-bold",style:{color:_t.primary},children:["",((W.renewal_fee_checked?ae==="MTOP"?J.mtop.renewal_fee:J.franchise.renewal_fee:0)+(W.sticker_fee_checked?ae==="MTOP"?J.mtop.sticker_fee:J.franchise.sticker_fee:0)+(W.inspection_fee_checked?ae==="MTOP"?J.mtop.inspection_fee:J.franchise.inspection_fee:0)).toFixed(2)]})]})})]})]}),W.applicant_signature&&t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:_t.primary},children:"Declaration & Signature"}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Signature:"}),t.jsx("div",{className:"mt-2 border border-gray-300 rounded-lg p-2 bg-white",children:t.jsx("img",{src:W.applicant_signature,alt:"Signature",className:"h-24 object-contain"})})]}),W.date_submitted&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Date Submitted:"}),t.jsx("p",{className:"font-semibold text-gray-900 mt-1",children:W.date_submitted})]})]})]}),(W.remarks||W.notes)&&t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:_t.primary},children:"Additional Information"}),t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[W.remarks&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Remarks:"}),t.jsx("p",{className:"text-gray-900 mt-1",children:W.remarks})]}),W.notes&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Notes:"}),t.jsx("p",{className:"text-gray-900 mt-1",children:W.notes})]})]})]})]})})]});default:return null}};return t.jsxs("div",{className:"mx-1 mt-1 p-6 rounded-lg min-h-screen",style:{background:_t.background,color:_t.secondary,fontFamily:_t.font},children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold",style:{color:_t.primary},children:"PERMIT RENEWAL APPLICATION"}),t.jsxs("p",{className:"mt-2",style:{color:_t.secondary},children:["Renew your ",ae==="MTOP"?"Motorized Tricycle Operator's Permit (MTOP)":"Franchise Permit","."]})]}),t.jsx("button",{onClick:Ke,onMouseEnter:de=>de.currentTarget.style.background=_t.accent,onMouseLeave:de=>de.currentTarget.style.background=_t.success,style:{background:_t.success},className:"px-4 py-2 rounded-lg font-medium text-white hover:bg-[#FDA811] transition-colors duration-300",children:"Change Type"})]}),t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"flex items-center justify-between",children:Qe.map((de,ie)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`flex items-center justify-center rounded-full border-2 font-semibold transition-all duration-300 ${r>=de.id?"text-white":"text-gray-500"}`,style:{background:r>=de.id?_t.success:"transparent",borderColor:r>=de.id?_t.success:"#9CA3AF",width:"45px",height:"30px",borderRadius:"20px",fontFamily:_t.font},children:de.id}),t.jsxs("div",{className:"ml-3 hidden md:block",children:[t.jsx("p",{className:"text-sm font-medium",style:{color:r>=de.id?_t.success:_t.secondary,fontFamily:_t.font},children:de.title}),t.jsx("p",{className:"text-xs",style:{color:_t.secondary,fontFamily:_t.font},children:de.description})]}),ie<Qe.length-1&&t.jsx("div",{className:"hidden md:block w-16 h-0.5 mx-4",style:{background:r>de.id?_t.success:"#9CA3AF"}})]},de.id))})}),t.jsxs("form",{onSubmit:ht,className:"space-y-8",children:[ke(),t.jsxs("div",{className:"flex justify-between pt-6",children:[r>1&&t.jsx("button",{type:"button",onClick:It,onMouseEnter:de=>de.currentTarget.style.background=_t.accent,onMouseLeave:de=>de.currentTarget.style.background=_t.success,style:{background:_t.success},className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:"Previous"}),r<Qe.length?t.jsx("button",{type:"submit",disabled:!Nt(r),style:{background:Nt(r)?_t.success:"#9CA3AF"},onMouseEnter:de=>{Nt(r)&&(de.currentTarget.style.background=_t.accent)},onMouseLeave:de=>{Nt(r)&&(de.currentTarget.style.background=_t.success)},className:`px-6 py-3 rounded-lg font-semibold text-white ${Nt(r)?"transition-colors duration-300":"cursor-not-allowed"}`,children:r===Qe.length-1?"Review Application":"Next"}):t.jsx("button",{type:"button",onClick:async()=>{(await dt.fire({title:"Confirm Renewal Submission",html:`
                    <div style="text-align: left;">
                      <p style="margin-bottom: 15px;">You are about to submit your ${ae==="MTOP"?"MTOP":"Franchise Permit"} renewal application.</p>
                      ${P?`
                        <div style="background-color: #EFF6FF; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #BFDBFE;">
                          <p style="margin: 0; font-weight: 600; color: #1E40AF; margin-bottom: 8px;"> Existing Permit Verified</p>
                          <p style="margin: 0; font-size: 0.875rem;"><strong>Permit ID:</strong> ${P.application_id}</p>
                          <p style="margin: 0; font-size: 0.875rem;"><strong>Status:</strong> ${P.status}</p>
                          <p style="margin: 0; font-size: 0.875rem;"><strong>Expiry:</strong> ${P.expiry_date}</p>
                        </div>
                      `:""}
                      <div style="background-color: #F9FAFB; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <p style="margin: 0; font-weight: 600; margin-bottom: 8px;">Renewal Declaration:</p>
                        <p style="margin: 0; font-size: 0.875rem;">I hereby declare that all information provided is true and correct to the best of my knowledge. I understand that any false information may result in the rejection of my renewal application.</p>
                      </div>
                      <div style="background-color: #DBEAFE; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 2px solid #3B82F6;">
                        <div style="display: flex; align-items: start;">
                          <input type="checkbox" id="swal-confirm-checkbox" style="margin-top: 3px; margin-right: 10px; width: 18px; height: 18px; cursor: pointer;" />
                          <label for="swal-confirm-checkbox" style="cursor: pointer; font-weight: 600; color: #1E40AF; margin: 0;">
                            I confirm that I have reviewed all information and documents, and I am ready to submit this renewal application.
                          </label>
                        </div>
                      </div>
                      <p style="font-size: 0.875rem; color: #6B7280; margin: 0;">Please check the box above to proceed with submission.</p>
                    </div>
                  `,icon:"question",showCancelButton:!0,confirmButtonText:"Confirm & Submit",cancelButtonText:"Cancel",confirmButtonColor:_t.success,cancelButtonColor:_t.danger,reverseButtons:!0,preConfirm:()=>document.getElementById("swal-confirm-checkbox").checked?!0:(dt.showValidationMessage("You must confirm that you have reviewed all information before submitting"),!1)})).isConfirmed&&nt()},disabled:i||!P,onMouseEnter:de=>{!i&&P&&(de.currentTarget.style.background=_t.accent)},onMouseLeave:de=>{!i&&P&&(de.currentTarget.style.background=_t.success)},style:{background:i||!P?"#9CA3AF":_t.success},className:`px-6 py-3 rounded-lg font-semibold text-white ${i||!P?"cursor-not-allowed":"transition-colors duration-300"}`,children:i?"Submitting...":"Confirm & Submit Renewal"})]})]}),j.url&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"rounded-lg shadow-lg w-full max-w-4xl border border-gray-200 overflow-hidden",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:_t.font,backdropFilter:"blur(10px)",maxHeight:"90vh"},children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold",style:{color:_t.primary},children:"Preview Document"}),t.jsx("button",{onClick:closePreview,className:"text-gray-500 hover:text-gray-700 transition-colors duration-300",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 overflow-auto",style:{maxHeight:"calc(90vh - 80px)"},children:[t.jsxs("p",{className:"text-sm mb-4",style:{color:_t.secondary,fontFamily:_t.font},children:["File: ",t.jsx("span",{className:"font-medium",children:j.name})]}),t.jsx("div",{className:"bg-white rounded-lg border p-4",children:j.type==="image"?t.jsx("div",{className:"flex justify-center",children:t.jsx("img",{src:j.url,alt:"Preview",className:"max-w-full h-auto max-h-[500px]"})}):j.type==="application"&&j.name?.includes(".pdf")?t.jsx("iframe",{src:j.url,className:"w-full h-[500px] rounded",title:"PDF Preview"}):t.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[t.jsx(Kt,{className:"w-24 h-24 text-gray-400 mb-4"}),t.jsxs("p",{className:"text-gray-600 mb-2",children:["File: ",j.name]}),t.jsx("p",{className:"text-gray-500 mb-6",children:"Preview not available for this file type"}),t.jsx("a",{href:j.url,download:j.name,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors duration-300",children:"Download File"})]})}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsx("button",{onClick:closePreview,style:{background:_t.success},onMouseEnter:de=>de.currentTarget.style.background=_t.accent,onMouseLeave:de=>de.currentTarget.style.background=_t.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close Preview"})})]})]})})]})}const Ot={primary:"#4A90E2",secondary:"#000000",accent:"#FDA811",success:"#4CAF50",danger:"#E53935",background:"#FBFBFB",font:"Montserrat, Arial, sans-serif"},Pq=["Afghan","Albanian","Algerian","American","Andorran","Angolan","Antiguans","Argentinean","Armenian","Australian","Austrian","Azerbaijani","Bahamian","Bahraini","Bangladeshi","Barbadian","Barbudans","Batswana","Belarusian","Belgian","Belizean","Beninese","Bhutanese","Bolivian","Bosnian","Brazilian","British","Bruneian","Bulgarian","Burkinabe","Burmese","Burundian","Cambodian","Cameroonian","Canadian","Cape Verdean","Central African","Chadian","Chilean","Chinese","Colombian","Comoran","Congolese","Costa Rican","Croatian","Cuban","Cypriot","Czech","Danish","Djibouti","Dominican","Dutch","East Timorese","Ecuadorean","Egyptian","Emirian","Equatorial Guinean","Eritrean","Estonian","Ethiopian","Fijian","Filipino","Finnish","French","Gabonese","Gambian","Georgian","German","Ghanaian","Greek","Grenadian","Guatemalan","Guinea-Bissauan","Guinean","Guyanese","Haitian","Herzegovinian","Honduran","Hungarian","I-Kiribati","Icelander","Indian","Indonesian","Iranian","Iraqi","Irish","Israeli","Italian","Ivorian","Jamaican","Japanese","Jordanian","Kazakhstani","Kenyan","Kittian and Nevisian","Kuwaiti","Kyrgyz","Laotian","Latvian","Lebanese","Liberian","Libyan","Liechtensteiner","Lithuanian","Luxembourger","Macedonian","Malagasy","Malawian","Malaysian","Maldivan","Malian","Maltese","Marshallese","Mauritanian","Mauritian","Mexican","Micronesian","Moldovan","Monacan","Mongolian","Moroccan","Mosotho","Motswana","Mozambican","Namibian","Nauruan","Nepalese","New Zealander","Nicaraguan","Nigerian","Nigerien","North Korean","Northern Irish","Norwegian","Omani","Pakistani","Palauan","Palestinian","Panamanian","Papua New Guinean","Paraguayan","Peruvian","Polish","Portuguese","Qatari","Romanian","Russian","Rwandan","Saint Lucian","Salvadoran","Samoan","San Marinese","Sao Tomean","Saudi","Scottish","Senegalese","Serbian","Seychellois","Sierra Leonean","Singaporean","Slovakian","Slovenian","Solomon Islander","Somali","South African","South Korean","Spanish","Sri Lankan","Sudanese","Surinamer","Swazi","Swedish","Swiss","Syrian","Taiwanese","Tajik","Tanzanian","Thai","Togolese","Tongan","Trinidadian or Tobagonian","Tunisian","Turkish","Tuvaluan","Ugandan","Ukrainian","Uruguayan","Uzbekistani","Venezuelan","Vietnamese","Welsh","Yemenite","Zambian","Zimbabwean"],vS=a=>{if(!a)return null;const e=new Date,s=new Date(a);let r=e.getFullYear()-s.getFullYear();const n=e.getMonth()-s.getMonth();return(n<0||n===0&&e.getDate()<s.getDate())&&r--,r};function Iq(){const a=Ti(),e=ka(),s=a.state?.permitType||"NEW",[r,n]=C.useState(1),[i,o]=C.useState(!1),[l,c]=C.useState(!1),[u,m]=C.useState({}),[A,g]=C.useState({isVerifying:!1,isVerified:!1,verificationResults:null,verificationError:null,progress:0}),[p,v]=C.useState({permit_type:s,application_date:new Date().toISOString().split("T")[0],status:"pending",first_name:"",middle_name:"",last_name:"",suffix:"",mobile_number:"",email:"",birthdate:"",gender:"",civil_status:"",nationality:"",house_no:"",street:"",barangay:"",city_municipality:"Caloocan City",province:"Metro Manila",zip_code:"",purpose:"",duration:"",id_type:"",id_number:"",clearance_fee:0,receipt_number:"",user_id:null,applicant_signature:"",valid_id_file:null,proof_of_residence_file:null,receipt_file:null,signature_file:null,photo_fingerprint_file:null,attachments:""}),b=[{id:1,title:"Applicant Information",description:"Personal details"},{id:2,title:"Address Information",description:"Where you live"},{id:3,title:"Clearance Details",description:"Purpose, ID, Duration"},{id:4,title:"Uploads",description:"Required documents"},{id:5,title:"Review",description:"Review your application"}],y=async H=>{const{name:te,value:K,type:I,files:R}=H.target;if(I==="file"){const G=R[0];v(se=>({...se,[te]:G||null,...te==="signature_file"&&{applicant_signature:G?.name||""}})),te==="valid_id_file"&&G&&g({isVerifying:!1,isVerified:!1,verificationResults:null,verificationError:null,progress:0})}else if(te==="mobile_number"){const G=K.replace(/[^0-9]/g,"");G.length<=11&&v(se=>({...se,[te]:G}))}else v(G=>({...G,[te]:K}))},w=H=>{if(!H)return null;const te=URL.createObjectURL(H),K=H.type.split("/")[0];m({url:te,type:K,name:H.name})},B=()=>{u.url&&URL.revokeObjectURL(u.url),m({})},j=H=>H.toLowerCase().replace(/[^a-z0-9]/g,""),E=(H,te,K=.5)=>{const I=j(H),R=j(te);if(I===R)return 1;if(I.includes(R)||R.includes(I))return .9;const G=I.length>R.length?I:R,se=I.length>R.length?R:I;if(G.length===0)return 0;let le=0;for(let De=0;De<se.length;De++)G.includes(se[De])&&le++;const ye=le/G.length;return ye>=K?ye:0},S={"Philippine National ID (PhilSys ID)":["philsys","philippine national id","national id","phil id","republic of the philippines","pambansang pagkakakilanlan","philippine identification card","pcn"],"Passport (DFA)":["passport","dfa","department of foreign affairs","p <","republic of the philippines passport"],"Driver's License (LTO)":["driver","license","licence","lto","land transportation","dl no","department of transportation","driver's license","drivers license","license no","license number"],UMID:["umid","unified multi-purpose id","sss","gsis"],"PRC ID":["prc","professional regulation commission","professional id"],"Voter's ID":["voter","comelec","commission on elections","voter's identification"],"COMELEC Voter's Certificate":["comelec","voter","certificate","commission on elections"],"Postal ID (PhilPost)":["postal","philpost","philippine postal"],"Senior Citizen ID":["senior citizen","osca","office of senior citizen"],"PWD ID":["pwd","person with disability","disabled"],"SSS ID":["sss","social security system","social security"],"GSIS eCard":["gsis","government service insurance","ecard"],"PhilHealth ID":["philhealth","philippine health","health insurance"],"Pag-IBIG ID":["pag-ibig","pagibig","hdmf","home development mutual fund"],"TIN ID":["tin","tax identification number","bir","bureau of internal revenue"],"Barangay ID":["barangay id","barangay identification","brgy id"],"Barangay Clearance":["barangay clearance","brgy clearance"],"Police Clearance":["police clearance","pnp clearance","philippine national police"],"NBI Clearance":["nbi clearance","national bureau of investigation"],"Solo Parent ID":["solo parent","single parent"],"Indigenous People's (IP) ID":["indigenous people","ip id","ncip","national commission on indigenous"],"School ID":["school id","student id","university","college","student number"],"Company / Employee ID":["company id","employee id","employee no","emp no"],"Government Office ID":["government","office id","gov id"],"Firearms License ID":["firearms","license to own and possess firearms","ltopf"],"Seafarer's Identification Record Book (SIRB)":["seafarer","sirb","marina","maritime"],"OWWA ID":["owwa","overseas workers welfare","ofw"],"Alien Certificate of Registration (ACR I-Card)":["acr","alien certificate","i-card","bureau of immigration"]},T=H=>{const te=H.toLowerCase(),K=[];for(const[I,R]of Object.entries(S)){let G=0;for(const se of R)te.includes(se.toLowerCase())&&G++;G>0&&K.push({type:I,confidence:G/R.length,matchCount:G})}return K.sort((I,R)=>R.matchCount!==I.matchCount?R.matchCount-I.matchCount:R.confidence-I.confidence),K.length>0?K[0]:null},M=async()=>{if(!p.valid_id_file){g(H=>({...H,verificationError:"Please upload a valid ID first"}));return}if(!p.first_name||!p.last_name||!p.id_number){g(H=>({...H,verificationError:"Please fill in First Name, Last Name, and ID Number before verification"}));return}if(!p.id_type){g(H=>({...H,verificationError:"Please select an ID type before verification"}));return}g({isVerifying:!0,isVerified:!1,verificationResults:null,verificationError:null,progress:0});try{const H=await bA.createWorker("eng",1,{logger:Qt=>{Qt.status==="recognizing text"&&g(yt=>({...yt,progress:Math.round(Qt.progress*100)}))}});g(Qt=>({...Qt,progress:10}));const{data:{text:te}}=await H.recognize(p.valid_id_file);await H.terminate(),g(Qt=>({...Qt,progress:90}));const K=te.toLowerCase(),I=E(p.first_name,K),R=E(p.last_name,K);let G=null;if(p.middle_name){const Qt=E(p.middle_name,K),yt=p.middle_name.charAt(0).toLowerCase(),Oe=K.includes(yt);G=Qt>0||Oe}const se=j(p.id_number),ye=j(K).includes(se)||K.includes(se)||E(p.id_number,K)>.8;let De=null;if(p.birthdate){const Qt=new Date(p.birthdate),yt=String(Qt.getMonth()+1).padStart(2,"0"),Oe=String(Qt.getDate()).padStart(2,"0"),ze=String(Qt.getDate()),Le=Qt.getFullYear(),oe=["january","february","march","april","may","june","july","august","september","october","november","december"],he=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],W=oe[Qt.getMonth()],ve=he[Qt.getMonth()];De=[`${yt}/${Oe}/${Le}`,`${yt}-${Oe}-${Le}`,`${Oe}/${yt}/${Le}`,`${Oe}-${yt}-${Le}`,`${Le}/${yt}/${Oe}`,`${Le}-${yt}-${Oe}`,`${yt}${Oe}${Le}`,`${Oe}${yt}${Le}`,`${Le}${yt}${Oe}`,`${W} ${Oe}, ${Le}`,`${W} ${ze}, ${Le}`,`${Oe} ${W} ${Le}`,`${ze} ${W} ${Le}`,`${ve} ${Oe}, ${Le}`,`${ve} ${ze}, ${Le}`,`${Oe} ${ve} ${Le}`,`${ze} ${ve} ${Le}`,`${W} ${Oe} ${Le}`,`${W} ${ze} ${Le}`,`${Oe} ${W}, ${Le}`,`${ze} ${W}, ${Le}`,`${ve} ${Oe} ${Le}`,`${ve} ${ze} ${Le}`,`${Oe} ${ve}, ${Le}`,`${ze} ${ve}, ${Le}`].some(Ze=>te.includes(Ze)||K.includes(Ze.toLowerCase()))}const me=T(te),Te=me&&me.type===p.id_type;let we=null,st=!1;if(["expiry","expiration","valid until","expires","exp date","expiry date","expiration date"].some(Qt=>K.includes(Qt))){const Qt=new Date;Qt.setHours(0,0,0,0);const yt=[/(?:expiry|expiration|valid until|expires|exp date)\s*:?\s*(\d{1,2})[\/-](\d{1,2})[\/-](\d{4})/i,/(?:expiry|expiration|valid until|expires|exp date)\s*:?\s*(\d{4})[\/-](\d{1,2})[\/-](\d{1,2})/i,/(?:expiry|expiration|valid until|expires|exp date)\s*:?\s*(\w+)\s+(\d{1,2}),?\s+(\d{4})/i,/(?:expiry|expiration|valid until|expires|exp date)\s*:?\s*(\d{1,2})\s+(\w+)\s+(\d{4})/i,/(\d{1,2})[\/-](\d{1,2})[\/-](\d{4})(?=\s*(?:expiry|expiration|exp))/i,/(\d{4})[\/-](\d{1,2})[\/-](\d{1,2})(?=\s*(?:expiry|expiration|exp))/i];for(const Oe of yt){const ze=te.match(Oe);if(ze)try{let Le;if(ze[0].includes("/")||ze[0].includes("-")){const oe=ze[0].split(/[\/-]/);oe[0].length===4?Le=new Date(parseInt(oe[0]),parseInt(oe[1])-1,parseInt(oe[2])):Le=new Date(parseInt(oe[2]),parseInt(oe[0])-1,parseInt(oe[1]))}else{const oe=["january","february","march","april","may","june","july","august","september","october","november","december"],he=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],W=ze[1].toLowerCase();let ve=oe.indexOf(W);ve===-1&&(ve=he.indexOf(W.substring(0,3))),ve!==-1&&(Le=new Date(parseInt(ze[3]),ve,parseInt(ze[2])))}if(Le&&!isNaN(Le.getTime())){we=Le,st=Le<Qt;break}}catch(Le){console.log("Error parsing expiration date:",Le)}}}const Ae={firstName:{matched:I>0,confidence:I,value:p.first_name},lastName:{matched:R>0,confidence:R,value:p.last_name},middleName:p.middle_name?{matched:G===!0||G>0,confidence:G===!0?1:G||0,value:p.middle_name}:null,idNumber:{matched:ye,confidence:ye?1:0,value:p.id_number},birthdate:p.birthdate?{matched:De,value:p.birthdate}:null,idType:{detected:me?me.type:"Unknown",selected:p.id_type,matched:Te,confidence:me?me.confidence:0},expiration:{date:we,isExpired:st,found:we!==null},extractedText:te},gt=Ae.firstName.matched&&Ae.lastName.matched&&Ae.idNumber.matched&&Ae.idType.matched&&(!p.middle_name||Ae.middleName.matched)&&(!p.birthdate||Ae.birthdate.matched)&&!Ae.expiration.isExpired;let q=null;gt||(Ae.expiration.isExpired?q="ID document has expired and cannot be used":q="Some information does not match the ID"),g({isVerifying:!1,isVerified:gt,verificationResults:Ae,verificationError:q,progress:100})}catch(H){console.error("Verification error:",H),g({isVerifying:!1,isVerified:!1,verificationResults:null,verificationError:"Failed to verify document: "+H.message,progress:0})}},[D,P]=C.useState({}),Y=H=>{const te={};return H===1&&((!p.first_name||p.first_name.trim()==="")&&(te.first_name="First name is required"),(!p.last_name||p.last_name.trim()==="")&&(te.last_name="Last name is required"),!p.mobile_number||p.mobile_number.trim()===""?te.mobile_number="Mobile number is required":p.mobile_number.startsWith("09")?p.mobile_number.length!==11&&(te.mobile_number="Mobile number must be exactly 11 digits"):te.mobile_number="Mobile number must start with 09",p.birthdate?vS(p.birthdate)<18&&(te.birthdate="You must be at least 18 years old to apply"):te.birthdate="Birth date is required",p.gender||(te.gender="Gender is required"),p.civil_status||(te.civil_status="Civil status is required"),(!p.nationality||p.nationality.trim()==="")&&(te.nationality="Nationality is required")),H===2&&((!p.house_no||p.house_no.trim()==="")&&(te.house_no="House/Building No. is required"),(!p.street||p.street.trim()==="")&&(te.street="Street is required"),(!p.barangay||p.barangay.trim()==="")&&(te.barangay="Barangay is required"),(!p.city_municipality||p.city_municipality.trim()==="")&&(te.city_municipality="City/Municipality is required"),(!p.province||p.province.trim()==="")&&(te.province="Province is required")),H===3&&((!p.purpose||p.purpose.trim()==="")&&(te.purpose="Purpose is required"),(!p.id_type||p.id_type.trim()==="")&&(te.id_type="ID type is required"),(!p.id_number||p.id_number.trim()==="")&&(te.id_number="ID number is required")),H===4&&(p.valid_id_file||(te.valid_id_file="Valid ID is required"),p.signature_file||(te.signature_file="Applicant Signature is required"),p.valid_id_file&&!A.isVerified&&(te.verification_required="You must verify your ID and it must be VALID to proceed")),P(te),Object.keys(te).length===0},Q=H=>H===1?!(!p.first_name||p.first_name.trim()===""||!p.last_name||p.last_name.trim()===""||!p.mobile_number||p.mobile_number.trim()===""||!p.mobile_number.startsWith("09")||p.mobile_number.length!==11||!p.birthdate||!p.gender||!p.civil_status||!p.nationality||p.nationality.trim()===""):H===2?!(!p.house_no||p.house_no.trim()===""||!p.street||p.street.trim()===""||!p.barangay||p.barangay.trim()===""||!p.city_municipality||p.city_municipality.trim()===""||!p.province||p.province.trim()===""):H===3?!(!p.purpose||p.purpose.trim()===""||!p.id_type||p.id_type.trim()===""||!p.id_number||p.id_number.trim()===""):H===4?!(!p.valid_id_file||!p.signature_file||!A.isVerified):!0,L=()=>{r<b.length&&Y(r)&&(n(r+1),P({}))},ae=async H=>{H.preventDefault(),r<b.length-1?L():r===b.length-1?Y(r)&&(n(r+1),P({})):(await dt.fire({title:"Confirm Submission",html:`
          <div class="text-left">
            <p class="mb-3 text-sm">Are you sure you want to submit your barangay clearance application? Please review your information before submitting.</p>
            <div class="p-4 bg-gray-50 rounded-lg border mb-4">
              <p class="text-sm font-semibold mb-2">Declaration:</p>
              <p class="text-sm mb-3">I hereby declare that all information provided is true and correct to the best of my knowledge. I understand that any false information may result in the rejection of my application.</p>
            </div>
          </div>
        `,icon:"question",input:"checkbox",inputValue:0,inputPlaceholder:"I agree to the above declaration",confirmButtonText:"Confirm & Submit",confirmButtonColor:Ot.success,cancelButtonText:"Cancel",cancelButtonColor:Ot.danger,showCancelButton:!0,inputValidator:K=>!K&&"You must agree to the declaration!",customClass:{popup:"text-left",htmlContainer:"text-left"}})).isConfirmed&&await X()},ne=()=>{r>1&&n(r-1)},V=async H=>{await dt.fire({title:"Success!",html:`
        <div class="text-center">
          <p class="mb-3">${H}</p>
          <p class="text-xs text-gray-500">You will be redirected to your dashboard...</p>
        </div>
      `,icon:"success",confirmButtonText:"Track Application",confirmButtonColor:Ot.success,timer:3e3,timerProgressBar:!0}).then(te=>{(te.isConfirmed||te.dismiss===dt.DismissReason.timer)&&e("/user/permittracker")})},O=async H=>{await dt.fire({title:"Error",html:`
        <div class="text-center">
          <p class="mb-3">${H}</p>
          <p class="text-xs text-gray-500">Please check your information and try again.</p>
        </div>
      `,icon:"error",confirmButtonText:"Close",confirmButtonColor:Ot.danger})},X=async()=>{o(!0);const H=Y(1),te=Y(2),K=Y(3),I=Y(4);if(!(H&&te&&K&&I)){o(!1),n(H?te?K?4:3:2:1),setShowConfirmModal(!1);return}try{const R=new FormData;Object.entries({user_id:localStorage.getItem("user_id")||localStorage.getItem("goserveph_user_id")||"0",application_date:p.application_date,first_name:p.first_name,middle_name:p.middle_name||"",last_name:p.last_name,suffix:p.suffix||"",birthdate:p.birthdate,mobile_number:p.mobile_number,email:p.email||"",gender:p.gender,civil_status:p.civil_status,nationality:p.nationality,house_no:p.house_no,street:p.street,barangay:p.barangay,city_municipality:p.city_municipality,province:p.province,zip_code:p.zip_code||"",purpose:p.purpose,duration:p.duration||"",id_type:p.id_type,id_number:p.id_number,clearance_fee:p.clearance_fee||"0.00",receipt_number:p.receipt_number||"",status:p.status||"pending"}).forEach(([De,me])=>{R.append(De,me)}),["valid_id_file","proof_of_residence_file","receipt_file","signature_file","photo_fingerprint_file"].forEach(De=>{p[De]instanceof File&&R.append(De,p[De])}),console.log("Submitting barangay permit application...");const se=await fetch("/backend/barangay_permit/barangay_permit.php",{method:"POST",body:R});if(!se.ok)throw new Error(`HTTP error! status: ${se.status}`);const le=se.clone();let ye;try{ye=await se.json()}catch{const De=await le.text();throw console.error("Raw server response:",De),new Error("Server did not return valid JSON")}ye.success?(await V(ye.message||"Application submitted successfully!"),ql("Barangay Permit",ye.permit_id||"",{permit_type:p.permit_type}),v({permit_type:s,application_date:new Date().toISOString().split("T")[0],status:"pending",first_name:"",middle_name:"",last_name:"",suffix:"",mobile_number:"",email:"",birthdate:"",gender:"",civil_status:"",nationality:"",house_no:"",street:"",barangay:"",city_municipality:"Caloocan City",province:"Metro Manila",zip_code:"",purpose:"",duration:"",id_type:"",id_number:"",clearance_fee:0,receipt_number:"",user_id:null,applicant_signature:"",valid_id_file:null,proof_of_residence_file:null,receipt_file:null,signature_file:null,photo_fingerprint_file:null,attachments:""}),n(1),c(!1)):await O(ye.message||"Failed to submit application.")}catch(R){console.error("Submission error:",R),O("Network error: "+R.message)}finally{o(!1)}},$=()=>{switch(r){case 1:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:Ot.secondary},children:"Applicant Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"First Name *"}),t.jsx("input",{type:"text",name:"first_name",value:p.first_name,onChange:y,placeholder:"First Name",className:`w-full p-3 border border-black rounded-lg ${D.first_name?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font}}),D.first_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.first_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Middle Name"}),t.jsx("input",{type:"text",name:"middle_name",value:p.middle_name,onChange:y,placeholder:"Middle Name",className:"w-full p-3 border border-black rounded-lg",style:{color:Ot.secondary,fontFamily:Ot.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Last Name *"}),t.jsx("input",{type:"text",name:"last_name",value:p.last_name,onChange:y,placeholder:"Last Name",className:`w-full p-3 border border-black rounded-lg ${D.last_name?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font}}),D.last_name&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.last_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Suffix"}),t.jsx("input",{type:"text",name:"suffix",value:p.suffix,onChange:y,placeholder:"Suffix",className:"w-full p-3 border border-black rounded-lg",style:{color:Ot.secondary,fontFamily:Ot.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Mobile Number *"}),t.jsx("input",{type:"text",name:"mobile_number",value:p.mobile_number,onChange:y,placeholder:"09XXXXXXXXX",className:`w-full p-3 border border-black rounded-lg ${D.mobile_number?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font}}),D.mobile_number&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.mobile_number})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Email"}),t.jsx("input",{type:"email",name:"email",value:p.email,onChange:y,placeholder:"Email",className:"w-full p-3 border border-black rounded-lg",style:{color:Ot.secondary,fontFamily:Ot.font}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Birth Date *"}),t.jsx("input",{type:"date",name:"birthdate",value:p.birthdate,onChange:y,max:new Date(new Date().setFullYear(new Date().getFullYear()-18)).toISOString().split("T")[0],className:`w-full p-3 border border-black rounded-lg ${D.birthdate?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font}}),p.birthdate&&vS(p.birthdate)<18&&t.jsx("p",{className:"text-red-600 text-sm mt-1 font-semibold",style:{fontFamily:Ot.font},children:" You must be at least 18 years old to apply for a barangay clearance."}),D.birthdate&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.birthdate})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Gender *"}),t.jsxs("select",{name:"gender",value:p.gender,onChange:y,className:`w-full p-3 border border-black rounded-lg ${D.gender?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font},children:[t.jsx("option",{value:"",children:"Select gender"}),t.jsx("option",{value:"Male",children:"Male"}),t.jsx("option",{value:"Female",children:"Female"}),t.jsx("option",{value:"Other",children:"Other"})]}),D.gender&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.gender})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Civil Status *"}),t.jsxs("select",{name:"civil_status",value:p.civil_status,onChange:y,className:`w-full p-3 border border-black rounded-lg ${D.civil_status?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font},children:[t.jsx("option",{value:"",children:"Select civil status"}),t.jsx("option",{value:"Single",children:"Single"}),t.jsx("option",{value:"Married",children:"Married"}),t.jsx("option",{value:"Widowed",children:"Widowed"}),t.jsx("option",{value:"Separated",children:"Separated"})]}),D.civil_status&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.civil_status})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Nationality *"}),t.jsxs("select",{name:"nationality",value:p.nationality,onChange:y,className:`w-full p-3 border border-black rounded-lg ${D.nationality?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font},children:[t.jsx("option",{value:"",children:"Select nationality"}),Pq.map(H=>t.jsx("option",{value:H,children:H},H))]}),D.nationality&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.nationality})]})]})]});case 2:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:Ot.secondary},children:"Address Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"House/Building No. *"}),t.jsx("input",{type:"text",name:"house_no",value:p.house_no,onChange:y,placeholder:"House/Building No.",className:`w-full p-3 border border-black rounded-lg ${D.house_no?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font}}),D.house_no&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.house_no})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Street *"}),t.jsx("input",{type:"text",name:"street",value:p.street,onChange:y,placeholder:"Street",className:`w-full p-3 border border-black rounded-lg ${D.street?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font}}),D.street&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.street})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Barangay *"}),t.jsx("input",{type:"text",name:"barangay",value:p.barangay,onChange:y,placeholder:"Barangay",className:`w-full p-3 border border-black rounded-lg ${D.barangay?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font}}),D.barangay&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.barangay})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"City/Municipality *"}),t.jsx("input",{type:"text",name:"city_municipality",value:p.city_municipality,readOnly:!0,placeholder:"City/Municipality",className:`w-full p-3 border border-black rounded-lg bg-gray-100 cursor-not-allowed ${D.city_municipality?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font}}),D.city_municipality&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.city_municipality})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Province *"}),t.jsx("input",{type:"text",name:"province",value:p.province,readOnly:!0,placeholder:"Province",className:`w-full p-3 border border-black rounded-lg bg-gray-100 cursor-not-allowed ${D.province?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font}}),D.province&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.province})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"ZIP Code"}),t.jsx("input",{type:"text",name:"zip_code",value:p.zip_code,onChange:y,placeholder:"ZIP Code",className:"w-full p-3 border border-black rounded-lg",style:{color:Ot.secondary,fontFamily:Ot.font}})]})]})]});case 3:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:Ot.secondary},children:"Clearance Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Purpose of Clearance *"}),t.jsxs("select",{name:"purpose",value:p.purpose,onChange:y,className:`w-full p-3 border border-black rounded-lg ${D.purpose?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font},children:[t.jsx("option",{value:"",children:"Select purpose"}),t.jsxs("optgroup",{label:"Personal Purposes",children:[t.jsx("option",{value:"For personal identification",children:"For personal identification"}),t.jsx("option",{value:"For residency verification",children:"For residency verification"}),t.jsx("option",{value:"For school requirement",children:"For school requirement"}),t.jsx("option",{value:"For scholarship application",children:"For scholarship application"}),t.jsx("option",{value:"For government assistance",children:"For government assistance"}),t.jsx("option",{value:"For medical assistance application",children:"For medical assistance application"}),t.jsx("option",{value:"For financial assistance or aid",children:"For financial assistance or aid"}),t.jsx("option",{value:"For barangay ID application",children:"For barangay ID application"}),t.jsx("option",{value:"For court requirement / affidavit / legal matter",children:"For court requirement / affidavit / legal matter"}),t.jsx("option",{value:"For police clearance / NBI clearance requirement",children:"For police clearance / NBI clearance requirement"})]}),t.jsxs("optgroup",{label:"Employment-Related Purposes",children:[t.jsx("option",{value:"For local employment",children:"For local employment"}),t.jsx("option",{value:"For job application (private company)",children:"For job application (private company)"}),t.jsx("option",{value:"For government employment",children:"For government employment"}),t.jsx("option",{value:"For on-the-job training (OJT)",children:"For on-the-job training (OJT)"}),t.jsx("option",{value:"For job order / contractual employment",children:"For job order / contractual employment"}),t.jsx("option",{value:"For agency employment requirement",children:"For agency employment requirement"}),t.jsx("option",{value:"For renewal of work contract",children:"For renewal of work contract"}),t.jsx("option",{value:"For employment abroad (POEA / OFW)",children:"For employment abroad (POEA / OFW)"})]}),t.jsxs("optgroup",{label:"Business-Related Purposes",children:[t.jsx("option",{value:"For new business permit application",children:"For new business permit application"}),t.jsx("option",{value:"For renewal of business permit",children:"For renewal of business permit"}),t.jsx("option",{value:"For DTI / SEC business registration",children:"For DTI / SEC business registration"}),t.jsx("option",{value:"For business tax application",children:"For business tax application"}),t.jsx("option",{value:"For stall rental or space lease",children:"For stall rental or space lease"}),t.jsx("option",{value:"For business name registration",children:"For business name registration"}),t.jsx("option",{value:"For operation of new establishment",children:"For operation of new establishment"}),t.jsx("option",{value:"For business closure / cancellation",children:"For business closure / cancellation"}),t.jsx("option",{value:"For relocation / change of business address",children:"For relocation / change of business address"})]}),t.jsxs("optgroup",{label:"Residency / Property Purposes",children:[t.jsx("option",{value:"For proof of residency",children:"For proof of residency"}),t.jsx("option",{value:"For transfer of residence",children:"For transfer of residence"}),t.jsx("option",{value:"For lot / land ownership verification",children:"For lot / land ownership verification"}),t.jsx("option",{value:"For construction permit requirement",children:"For construction permit requirement"}),t.jsx("option",{value:"For fencing / excavation / building permit application",children:"For fencing / excavation / building permit application"}),t.jsx("option",{value:"For utility connection",children:"For utility connection"}),t.jsx("option",{value:"For barangay boundary certification",children:"For barangay boundary certification"})]}),t.jsxs("optgroup",{label:"Other Official / Legal Purposes",children:[t.jsx("option",{value:"For marriage license application",children:"For marriage license application"}),t.jsx("option",{value:"For travel / local mobility clearance",children:"For travel / local mobility clearance"}),t.jsx("option",{value:"For firearm license application",children:"For firearm license application"}),t.jsx("option",{value:"For barangay mediation / complaint settlement record",children:"For barangay mediation / complaint settlement record"}),t.jsx("option",{value:"For notarization requirement",children:"For notarization requirement"}),t.jsx("option",{value:"For business closure or transfer",children:"For business closure or transfer"}),t.jsx("option",{value:"For franchise or transport operation permit",children:"For franchise or transport operation permit"}),t.jsx("option",{value:"For cooperative registration",children:"For cooperative registration"}),t.jsx("option",{value:"For loan application",children:"For loan application"}),t.jsx("option",{value:"For SSS / Pag-IBIG / PhilHealth registration",children:"For SSS / Pag-IBIG / PhilHealth registration"})]})]}),D.purpose&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.purpose})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Valid ID Type *"}),t.jsxs("select",{name:"id_type",value:p.id_type,onChange:y,className:`w-full p-3 border border-black rounded-lg ${D.id_type?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font},children:[t.jsx("option",{value:"",children:"Select ID type"}),t.jsxs("optgroup",{label:"Primary Valid Government-Issued IDs",children:[t.jsx("option",{value:"Philippine National ID (PhilSys ID)",children:"Philippine National ID (PhilSys ID)"}),t.jsx("option",{value:"Passport (DFA)",children:"Passport (DFA)"}),t.jsx("option",{value:"Driver's License (LTO)",children:"Driver's License (LTO)"}),t.jsx("option",{value:"UMID",children:"UMID (SSS / GSIS)"}),t.jsx("option",{value:"PRC ID",children:"PRC ID"}),t.jsx("option",{value:"Voter's ID",children:"Voter's ID"}),t.jsx("option",{value:"COMELEC Voter's Certificate",children:"COMELEC Voter's Certificate"}),t.jsx("option",{value:"Postal ID (PhilPost)",children:"Postal ID (PhilPost)"}),t.jsx("option",{value:"Senior Citizen ID",children:"Senior Citizen ID"}),t.jsx("option",{value:"PWD ID",children:"PWD ID"})]}),t.jsxs("optgroup",{label:"Secondary / Supporting Government IDs",children:[t.jsx("option",{value:"SSS ID",children:"SSS ID"}),t.jsx("option",{value:"GSIS eCard",children:"GSIS eCard"}),t.jsx("option",{value:"PhilHealth ID",children:"PhilHealth ID"}),t.jsx("option",{value:"Pag-IBIG ID",children:"Pag-IBIG ID"}),t.jsx("option",{value:"TIN ID",children:"Tax Identification Number (TIN) ID"}),t.jsx("option",{value:"Barangay ID",children:"Barangay ID"}),t.jsx("option",{value:"Barangay Clearance",children:"Barangay Clearance"}),t.jsx("option",{value:"Police Clearance",children:"Police Clearance"}),t.jsx("option",{value:"NBI Clearance",children:"NBI Clearance"}),t.jsx("option",{value:"Solo Parent ID",children:"Solo Parent ID"}),t.jsx("option",{value:"Indigenous People's (IP) ID",children:"Indigenous People's (IP) ID"})]}),t.jsxs("optgroup",{label:"Other Acceptable IDs (Conditional)",children:[t.jsx("option",{value:"School ID",children:"School ID"}),t.jsx("option",{value:"Company / Employee ID",children:"Company / Employee ID"}),t.jsx("option",{value:"Government Office ID",children:"Government Office ID"}),t.jsx("option",{value:"Firearms License ID",children:"Firearms License ID"}),t.jsx("option",{value:"Seafarer's Identification Record Book (SIRB)",children:"Seafarer's Identification Record Book (SIRB)"}),t.jsx("option",{value:"OWWA ID",children:"OWWA ID"}),t.jsx("option",{value:"Alien Certificate of Registration (ACR I-Card)",children:"Alien Certificate of Registration (ACR I-Card)"})]})]}),D.id_type&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.id_type})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2 font-medium",style:{color:Ot.secondary},children:"Valid ID Number *"}),t.jsx("input",{type:"text",name:"id_number",value:p.id_number,onChange:y,placeholder:"ID Number",className:`w-full p-3 border border-black rounded-lg ${D.id_number?"border-red-500":""}`,style:{color:Ot.secondary,fontFamily:Ot.font}}),D.id_number&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.id_number})]})]})]});case 4:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:Ot.secondary},children:"Required Documents"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:Ot.secondary},children:"Valid ID (Government-issued, school, company ID) *"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"valid_id_file",onChange:y,accept:"image/*",className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:Ot.font}})]}),D.valid_id_file&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.valid_id_file}),p.valid_id_file&&t.jsxs("div",{className:"mt-4 p-4 border border-blue-200 rounded-lg bg-blue-50",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Pr,{className:"w-5 h-5 text-blue-600"}),t.jsx("h4",{className:"font-semibold text-blue-900",style:{fontFamily:Ot.font},children:"AI Document Verification"})]}),!A.isVerifying&&!A.isVerified&&t.jsxs("button",{type:"button",onClick:M,disabled:!p.first_name||!p.last_name||!p.id_number||!p.id_type,className:"px-4 py-2 rounded-lg font-medium text-white transition-colors duration-300 flex items-center gap-2",style:{background:!p.first_name||!p.last_name||!p.id_number||!p.id_type?"#9CA3AF":Ot.primary,cursor:!p.first_name||!p.last_name||!p.id_number||!p.id_type?"not-allowed":"pointer"},onMouseEnter:H=>{p.first_name&&p.last_name&&p.id_number&&p.id_type&&(H.currentTarget.style.background=Ot.accent)},onMouseLeave:H=>{p.first_name&&p.last_name&&p.id_number&&p.id_type&&(H.currentTarget.style.background=Ot.primary)},children:[t.jsx(Pr,{className:"w-4 h-4"}),"Verify ID"]})]}),A.isVerifying&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Or,{className:"w-5 h-5 text-blue-600 animate-spin"}),t.jsxs("p",{className:"text-sm text-blue-800",style:{fontFamily:Ot.font},children:["Verifying document... ",A.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${A.progress}%`}})})]}),A.verificationError&&!A.isVerifying&&t.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx(Ks,{className:"w-5 h-5 text-red-600 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-red-800",style:{fontFamily:Ot.font},children:"Verification Failed"}),t.jsx("p",{className:"text-xs text-red-600 mt-1",style:{fontFamily:Ot.font},children:A.verificationError})]})]}),A.verificationResults&&!A.isVerifying&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:`p-4 rounded-lg border-2 ${A.isVerified?"bg-green-50 border-green-500":"bg-red-50 border-red-500"}`,children:[t.jsx("div",{className:"flex items-center gap-3 mb-3",children:A.isVerified?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center",children:t.jsx(Ht,{className:"w-7 h-7 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xl font-bold text-green-800",style:{fontFamily:Ot.font},children:"VALID"}),t.jsx("p",{className:"text-sm text-green-700",style:{fontFamily:Ot.font},children:"ID verification successful"})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500 flex items-center justify-center",children:t.jsx(ls,{className:"w-7 h-7 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xl font-bold text-red-800",style:{fontFamily:Ot.font},children:"INVALID"}),t.jsx("p",{className:"text-sm text-red-700",style:{fontFamily:Ot.font},children:"Information does not match ID"})]})]})}),t.jsxs("div",{className:"border-t pt-3 space-y-1 text-xs",style:{fontFamily:Ot.font,borderColor:A.isVerified?"#22c55e":"#ef4444"},children:[t.jsx("p",{className:"font-semibold mb-2",style:{color:A.isVerified?"#166534":"#991b1b"},children:"Verification Details:"}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"ID Type:"}),t.jsxs("div",{className:"text-[10px] mt-0.5",children:[t.jsxs("div",{children:["Selected: ",A.verificationResults.idType.selected]}),t.jsxs("div",{children:["Detected: ",A.verificationResults.idType.detected]})]})]}),A.verificationResults.idType.matched?t.jsx(Ht,{className:"w-4 h-4 text-green-600"}):t.jsx(ls,{className:"w-4 h-4 text-red-600"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{children:["First Name: ",A.verificationResults.firstName.value]}),A.verificationResults.firstName.matched?t.jsx(Ht,{className:"w-4 h-4 text-green-600"}):t.jsx(ls,{className:"w-4 h-4 text-red-600"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{children:["Last Name: ",A.verificationResults.lastName.value]}),A.verificationResults.lastName.matched?t.jsx(Ht,{className:"w-4 h-4 text-green-600"}):t.jsx(ls,{className:"w-4 h-4 text-red-600"})]}),A.verificationResults.middleName&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{children:["Middle Name: ",A.verificationResults.middleName.value]}),A.verificationResults.middleName.matched?t.jsx(Ht,{className:"w-4 h-4 text-green-600"}):t.jsx(ls,{className:"w-4 h-4 text-red-600"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{children:["ID Number: ",A.verificationResults.idNumber.value]}),A.verificationResults.idNumber.matched?t.jsx(Ht,{className:"w-4 h-4 text-green-600"}):t.jsx(ls,{className:"w-4 h-4 text-red-600"})]}),A.verificationResults.birthdate&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{children:["Birthdate: ",new Date(A.verificationResults.birthdate.value).toLocaleDateString()]}),A.verificationResults.birthdate.matched?t.jsx(Ht,{className:"w-4 h-4 text-green-600"}):t.jsx(ls,{className:"w-4 h-4 text-red-600"})]}),A.verificationResults.expiration&&A.verificationResults.expiration.found&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:A.verificationResults.expiration.isExpired?"font-bold":"",children:["Expiration: ",A.verificationResults.expiration.date.toLocaleDateString(),A.verificationResults.expiration.isExpired&&" (EXPIRED)"]}),A.verificationResults.expiration.isExpired?t.jsx(ls,{className:"w-4 h-4 text-red-600"}):t.jsx(Ht,{className:"w-4 h-4 text-green-600"})]})]}),!A.isVerified&&t.jsxs("div",{className:"mt-3 p-2 bg-red-100 rounded border border-red-300",children:[t.jsx("p",{className:"text-xs text-red-800 font-medium",style:{fontFamily:Ot.font},children:" You cannot proceed until your ID is verified as VALID. Issues found:"}),t.jsxs("ul",{className:"text-xs text-red-700 mt-1 ml-4 list-disc",style:{fontFamily:Ot.font},children:[A.verificationResults.expiration&&A.verificationResults.expiration.isExpired&&t.jsxs("li",{className:"font-semibold text-red-900",children:[" ID DOCUMENT HAS EXPIRED on ",A.verificationResults.expiration.date.toLocaleDateString(),". You must use a valid, non-expired ID."]}),!A.verificationResults.idType.matched&&t.jsxs("li",{className:"font-semibold",children:['ID Type Mismatch: You selected "',A.verificationResults.idType.selected,'" but the system detected "',A.verificationResults.idType.detected,'". Please select the correct ID type.']}),!A.verificationResults.firstName.matched&&t.jsx("li",{children:"First Name does not match the ID"}),!A.verificationResults.lastName.matched&&t.jsx("li",{children:"Last Name does not match the ID"}),A.verificationResults.middleName&&!A.verificationResults.middleName.matched&&t.jsx("li",{children:"Middle Name does not match the ID"}),!A.verificationResults.idNumber.matched&&t.jsx("li",{children:"ID Number does not match the ID"}),A.verificationResults.birthdate&&!A.verificationResults.birthdate.matched&&t.jsx("li",{children:"Birthdate does not match the ID"}),!A.verificationResults.expiration.isExpired&&t.jsxs(t.Fragment,{children:[t.jsx("li",{className:"mt-1",children:"Ensure your ID image is clear and readable"}),t.jsx("li",{children:"Verify the information you entered exactly matches your ID"})]})]})]})]}),t.jsx("button",{type:"button",onClick:M,className:"text-xs text-blue-600 hover:text-blue-800 underline font-medium",style:{fontFamily:Ot.font},children:"Re-verify Document"})]})]}),D.verification_required&&t.jsxs("div",{className:"mt-2 flex items-start gap-2 p-3 bg-red-50 border-2 border-red-500 rounded-lg",children:[t.jsx(Ks,{className:"w-5 h-5 text-red-600 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-bold text-red-800",style:{fontFamily:Ot.font},children:"Verification Required"}),t.jsx("p",{className:"text-xs text-red-700 mt-1",style:{fontFamily:Ot.font},children:D.verification_required})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:Ot.secondary},children:"Proof of Residence (Utility bill, barangay certificate)"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"proof_of_residence_file",onChange:y,className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:Ot.font}})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:Ot.secondary},children:"Official Receipt or Proof of Payment"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"receipt_file",onChange:y,className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:Ot.font}})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:Ot.secondary},children:"Applicant's Signature *"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"signature_file",onChange:y,className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:Ot.font}})]}),D.signature_file&&t.jsx("p",{className:"text-red-600 text-sm mt-1",style:{fontFamily:Ot.font},children:D.signature_file})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:Ot.secondary},children:"Photo and Fingerprint (if required)"}),t.jsxs("div",{className:"flex items-center gap-3 p-3 border border-black rounded w-full bg-white",children:[t.jsx(er,{className:"w-5 h-5 text-gray-500"}),t.jsx("input",{type:"file",name:"photo_fingerprint_file",onChange:y,className:"w-full text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100",style:{fontFamily:Ot.font}})]})]})]})]});case 5:return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:Ot.secondary},children:"Review Your Application"}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6 border border-black",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:Ot.primary},children:"Applicant Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",style:{fontFamily:Ot.font},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"First Name:"}),t.jsx("span",{className:"flex-1",children:p.first_name})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"Middle Name:"}),t.jsx("span",{className:"flex-1",children:p.middle_name||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"Last Name:"}),t.jsx("span",{className:"flex-1",children:p.last_name})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"Suffix:"}),t.jsx("span",{className:"flex-1",children:p.suffix||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"Mobile Number:"}),t.jsx("span",{className:"flex-1",children:p.mobile_number})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"Email:"}),t.jsx("span",{className:"flex-1",children:p.email||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"Birth Date:"}),t.jsx("span",{className:"flex-1",children:p.birthdate})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"Gender:"}),t.jsx("span",{className:"flex-1",children:p.gender})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"Civil Status:"}),t.jsx("span",{className:"flex-1",children:p.civil_status})]}),t.jsxs("div",{className:"flex items-center md:col-span-2",children:[t.jsx("span",{className:"font-medium w-32",children:"Nationality:"}),t.jsx("span",{className:"flex-1",children:p.nationality})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:Ot.primary},children:"Address Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",style:{fontFamily:Ot.font},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"House/Building No.:"}),t.jsx("span",{className:"flex-1",children:p.house_no})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"Street:"}),t.jsx("span",{className:"flex-1",children:p.street})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"Barangay:"}),t.jsx("span",{className:"flex-1",children:p.barangay})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"City/Municipality:"}),t.jsx("span",{className:"flex-1",children:p.city_municipality})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"Province:"}),t.jsx("span",{className:"flex-1",children:p.province})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"ZIP Code:"}),t.jsx("span",{className:"flex-1",children:p.zip_code||"N/A"})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:Ot.primary},children:"Clearance Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",style:{fontFamily:Ot.font},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"Purpose:"}),t.jsx("span",{className:"flex-1",children:p.purpose})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"Duration:"}),t.jsx("span",{className:"flex-1",children:p.duration||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"ID Type:"}),t.jsx("span",{className:"flex-1",children:p.id_type})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"font-medium w-32",children:"ID Number:"}),t.jsx("span",{className:"flex-1",children:p.id_number})]})]})]}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold mb-3 text-lg",style:{color:Ot.primary},children:"Uploaded Documents"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center",children:[p.valid_id_file?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Valid ID:"}),t.jsx("p",{className:"text-sm text-gray-600",children:p.valid_id_file?p.valid_id_file.name:"Not uploaded"})]})]}),p.valid_id_file&&t.jsxs("button",{type:"button",onClick:()=>w(p.valid_id_file),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:Ot.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]}),p.valid_id_file&&t.jsx("div",{className:"mt-2",children:A.isVerified?t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-50 border-2 border-green-500 rounded",children:[t.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500 flex items-center justify-center",children:t.jsx(Ht,{className:"w-4 h-4 text-white"})}),t.jsx("span",{className:"text-sm text-green-800 font-bold",style:{fontFamily:Ot.font},children:"VALID - AI Verified"})]}):A.verificationResults?t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border-2 border-red-500 rounded",children:[t.jsx("div",{className:"w-6 h-6 rounded-full bg-red-500 flex items-center justify-center",children:t.jsx(ls,{className:"w-4 h-4 text-white"})}),t.jsx("span",{className:"text-sm text-red-800 font-bold",style:{fontFamily:Ot.font},children:"INVALID - Information does not match"})]}):t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border-2 border-red-500 rounded",children:[t.jsx(Ks,{className:"w-5 h-5 text-red-600"}),t.jsx("span",{className:"text-sm text-red-800 font-bold",style:{fontFamily:Ot.font},children:"NOT VERIFIED - Go back to step 4 to verify"})]})})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[p.proof_of_residence_file?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-gray-400 mr-3"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Proof of Residence:"}),t.jsx("p",{className:"text-sm text-gray-600",children:p.proof_of_residence_file?p.proof_of_residence_file.name:"Optional"})]})]}),p.proof_of_residence_file&&t.jsxs("button",{type:"button",onClick:()=>w(p.proof_of_residence_file),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:Ot.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[p.receipt_file?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-gray-400 mr-3"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Official Receipt:"}),t.jsx("p",{className:"text-sm text-gray-600",children:p.receipt_file?p.receipt_file.name:"Optional"})]})]}),p.receipt_file&&t.jsxs("button",{type:"button",onClick:()=>w(p.receipt_file),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:Ot.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[p.signature_file?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-red-600 mr-3"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Signature:"}),t.jsx("p",{className:"text-sm text-gray-600",children:p.signature_file?p.signature_file.name:"Not uploaded"})]})]}),p.signature_file&&t.jsxs("button",{type:"button",onClick:()=>w(p.signature_file),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:Ot.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-300 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[p.photo_fingerprint_file?t.jsx(Ht,{className:"w-5 h-5 text-green-600 mr-3"}):t.jsx(ls,{className:"w-5 h-5 text-gray-400 mr-3"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Photo & Fingerprint:"}),t.jsx("p",{className:"text-sm text-gray-600",children:p.photo_fingerprint_file?p.photo_fingerprint_file.name:"Optional"})]})]}),p.photo_fingerprint_file&&t.jsxs("button",{type:"button",onClick:()=>w(p.photo_fingerprint_file),className:"flex items-center gap-1 px-3 py-1 text-sm rounded hover:bg-gray-100 transition-colors duration-300",style:{color:Ot.secondary},children:[t.jsx(ws,{className:"w-4 h-4"}),"Preview"]})]})]})]})]})})]});default:return null}};return t.jsxs("div",{className:"mx-1 mt-1 p-6 rounded-lg min-h-screen",style:{background:Ot.background,color:Ot.secondary,fontFamily:Ot.font},children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-4xl font-bold",style:{color:Ot.primary},children:"BARANGAY CLEARANCE APPLICATION"}),t.jsx("p",{className:"mt-2",style:{color:Ot.secondary},children:"Apply for a barangay clearance for various personal, employment, or business purposes."})]}),t.jsx("button",{onClick:()=>e("/user/dashboard"),onMouseEnter:H=>H.currentTarget.style.background=Ot.accent,onMouseLeave:H=>H.currentTarget.style.background=Ot.success,style:{background:Ot.success},className:"px-4 py-2 rounded-lg font-medium text-white hover:bg-[#FDA811] transition-colors duration-300",children:"Back to Dashboard"})]}),t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"flex items-center justify-between",children:b.map((H,te)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`flex items-center justify-center rounded-full border-2 font-semibold transition-all duration-300 ${r>=H.id?"text-white":"text-gray-500"}`,style:{background:r>=H.id?Ot.success:"transparent",borderColor:r>=H.id?Ot.success:"#9CA3AF",width:"45px",height:"30px",borderRadius:"20px",fontFamily:Ot.font},children:H.id}),t.jsxs("div",{className:"ml-3 hidden md:block",children:[t.jsx("p",{className:"text-sm font-medium",style:{color:r>=H.id?Ot.success:Ot.secondary,fontFamily:Ot.font},children:H.title}),t.jsx("p",{className:"text-xs",style:{color:Ot.secondary,fontFamily:Ot.font},children:H.description})]}),te<b.length-1&&t.jsx("div",{className:"hidden md:block w-16 h-0.5 mx-4",style:{background:r>H.id?Ot.success:"#9CA3AF"}})]},H.id))})}),t.jsxs("form",{onSubmit:ae,className:"space-y-8",children:[$(),t.jsxs("div",{className:"flex justify-between pt-6",children:[r>1&&t.jsx("button",{type:"button",onClick:ne,onMouseEnter:H=>H.currentTarget.style.background=Ot.accent,onMouseLeave:H=>H.currentTarget.style.background=Ot.success,style:{background:Ot.success},className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:"Previous"}),r<b.length?t.jsx("button",{type:"submit",disabled:!Q(r),style:{background:Q(r)?Ot.success:"#9CA3AF"},onMouseEnter:H=>{Q(r)&&(H.currentTarget.style.background=Ot.accent)},onMouseLeave:H=>{Q(r)&&(H.currentTarget.style.background=Ot.success)},className:`px-6 py-3 rounded-lg font-semibold text-white ${Q(r)?"transition-colors duration-300":"cursor-not-allowed"}`,children:r===b.length-1?"Review Application":"Next"}):t.jsx("button",{type:"submit",disabled:i,onMouseEnter:H=>H.currentTarget.style.background=Ot.accent,onMouseLeave:H=>H.currentTarget.style.background=Ot.success,style:{background:Ot.success},className:"px-6 py-3 rounded-lg font-semibold text-white transition-colors duration-300",children:"Submit Application"})]})]}),u.url&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-sm z-50 p-4",children:t.jsxs("div",{className:"rounded-lg shadow-lg w-full max-w-4xl border border-gray-200 overflow-hidden",style:{background:"rgba(255, 255, 255, 0.95)",fontFamily:Ot.font,backdropFilter:"blur(10px)",maxHeight:"90vh"},children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h2",{className:"text-xl font-bold",style:{color:Ot.primary},children:"Preview Document"}),t.jsx("button",{onClick:B,className:"text-gray-500 hover:text-gray-700 transition-colors duration-300",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"p-6 overflow-auto",style:{maxHeight:"calc(90vh - 80px)"},children:[t.jsxs("p",{className:"text-sm mb-4",style:{color:Ot.secondary,fontFamily:Ot.font},children:["File: ",t.jsx("span",{className:"font-medium",children:u.name})]}),t.jsx("div",{className:"bg-white rounded-lg border p-4",children:u.type==="image"?t.jsx("div",{className:"flex justify-center",children:t.jsx("img",{src:u.url,alt:"Preview",className:"max-w-full h-auto max-h-[500px]"})}):u.type==="application"&&u.name?.includes(".pdf")?t.jsx("iframe",{src:u.url,className:"w-full h-[500px] rounded",title:"PDF Preview"}):t.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[t.jsx(Kt,{className:"w-24 h-24 text-gray-400 mb-4"}),t.jsxs("p",{className:"text-gray-600 mb-2",children:["File: ",u.name]}),t.jsx("p",{className:"text-gray-500 mb-6",children:"Preview not available for this file type"}),t.jsx("a",{href:u.url,download:u.name,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors duration-300",children:"Download File"})]})}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsx("button",{onClick:B,style:{background:Ot.success},onMouseEnter:H=>H.currentTarget.style.background=Ot.accent,onMouseLeave:H=>H.currentTarget.style.background=Ot.success,className:"px-6 py-2 rounded-lg font-semibold text-white transition-colors duration-300",children:"Close Preview"})})]})]})})]})}const Lq="modulepreload",Mq=function(a){return"/"+a},wS={},uN=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){let c=function(u){return Promise.all(u.map(m=>Promise.resolve(m).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");n=c(s.map(u=>{if(u=Mq(u),u in wS)return;wS[u]=!0;const m=u.endsWith(".css"),A=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${A}`))return;const g=document.createElement("link");if(g.rel=m?"stylesheet":Lq,m||(g.as="script"),g.crossOrigin="",g.href=u,l&&g.setAttribute("nonce",l),document.head.appendChild(g),m)return new Promise((p,v)=>{g.addEventListener("load",p),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function ha(a){"@babel/helpers - typeof";return ha=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ha(a)}var Cc=Uint8Array,ol=Uint16Array,R5=Int32Array,O5=new Cc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),U5=new Cc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),NS=new Cc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),NP=function(a,e){for(var s=new ol(31),r=0;r<31;++r)s[r]=e+=1<<a[r-1];for(var n=new R5(s[30]),r=1;r<30;++r)for(var i=s[r];i<s[r+1];++i)n[i]=i-s[r]<<5|r;return{b:s,r:n}},jP=NP(O5,2),Rq=jP.b,Zj=jP.r;Rq[28]=258,Zj[258]=28;var Oq=NP(U5,0),jS=Oq.r,e_=new ol(32768);for(var Ra=0;Ra<32768;++Ra){var Ah=(Ra&43690)>>1|(Ra&21845)<<1;Ah=(Ah&52428)>>2|(Ah&13107)<<2,Ah=(Ah&61680)>>4|(Ah&3855)<<4,e_[Ra]=((Ah&65280)>>8|(Ah&255)<<8)>>1}var Cx=(function(a,e,s){for(var r=a.length,n=0,i=new ol(e);n<r;++n)a[n]&&++i[a[n]-1];var o=new ol(e);for(n=1;n<e;++n)o[n]=o[n-1]+i[n-1]<<1;var l;if(s){l=new ol(1<<e);var c=15-e;for(n=0;n<r;++n)if(a[n])for(var u=n<<4|a[n],m=e-a[n],A=o[a[n]-1]++<<m,g=A|(1<<m)-1;A<=g;++A)l[e_[A]>>c]=u}else for(l=new ol(r),n=0;n<r;++n)a[n]&&(l[n]=e_[o[a[n]-1]++]>>15-a[n]);return l}),cA=new Cc(288);for(var Ra=0;Ra<144;++Ra)cA[Ra]=8;for(var Ra=144;Ra<256;++Ra)cA[Ra]=9;for(var Ra=256;Ra<280;++Ra)cA[Ra]=7;for(var Ra=280;Ra<288;++Ra)cA[Ra]=8;var yv=new Cc(32);for(var Ra=0;Ra<32;++Ra)yv[Ra]=5;var Uq=Cx(cA,9,0),Qq=Cx(yv,5,0),_P=function(a){return(a+7)/8|0},Hq=function(a,e,s){return(s==null||s>a.length)&&(s=a.length),new Cc(a.subarray(e,s))},ru=function(a,e,s){s<<=e&7;var r=e/8|0;a[r]|=s,a[r+1]|=s>>8},Hg=function(a,e,s){s<<=e&7;var r=e/8|0;a[r]|=s,a[r+1]|=s>>8,a[r+2]|=s>>16},hN=function(a,e){for(var s=[],r=0;r<a.length;++r)a[r]&&s.push({s:r,f:a[r]});var n=s.length,i=s.slice();if(!n)return{t:kP,l:0};if(n==1){var o=new Cc(s[0].s+1);return o[s[0].s]=1,{t:o,l:1}}s.sort(function(S,T){return S.f-T.f}),s.push({s:-1,f:25001});var l=s[0],c=s[1],u=0,m=1,A=2;for(s[0]={s:-1,f:l.f+c.f,l,r:c};m!=n-1;)l=s[s[u].f<s[A].f?u++:A++],c=s[u!=m&&s[u].f<s[A].f?u++:A++],s[m++]={s:-1,f:l.f+c.f,l,r:c};for(var g=i[0].s,r=1;r<n;++r)i[r].s>g&&(g=i[r].s);var p=new ol(g+1),v=t_(s[m-1],p,0);if(v>e){var r=0,b=0,y=v-e,w=1<<y;for(i.sort(function(T,M){return p[M.s]-p[T.s]||T.f-M.f});r<n;++r){var B=i[r].s;if(p[B]>e)b+=w-(1<<v-p[B]),p[B]=e;else break}for(b>>=y;b>0;){var j=i[r].s;p[j]<e?b-=1<<e-p[j]++-1:++r}for(;r>=0&&b;--r){var E=i[r].s;p[E]==e&&(--p[E],++b)}v=e}return{t:new Cc(p),l:v}},t_=function(a,e,s){return a.s==-1?Math.max(t_(a.l,e,s+1),t_(a.r,e,s+1)):e[a.s]=s},_S=function(a){for(var e=a.length;e&&!a[--e];);for(var s=new ol(++e),r=0,n=a[0],i=1,o=function(c){s[r++]=c},l=1;l<=e;++l)if(a[l]==n&&l!=e)++i;else{if(!n&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(n),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(n);i=1,n=a[l]}return{c:s.subarray(0,r),n:e}},Vg=function(a,e){for(var s=0,r=0;r<e.length;++r)s+=a[r]*e[r];return s},CP=function(a,e,s){var r=s.length,n=_P(e+2);a[n]=r&255,a[n+1]=r>>8,a[n+2]=a[n]^255,a[n+3]=a[n+1]^255;for(var i=0;i<r;++i)a[n+i+4]=s[i];return(n+4+r)*8},CS=function(a,e,s,r,n,i,o,l,c,u,m){ru(e,m++,s),++n[256];for(var A=hN(n,15),g=A.t,p=A.l,v=hN(i,15),b=v.t,y=v.l,w=_S(g),B=w.c,j=w.n,E=_S(b),S=E.c,T=E.n,M=new ol(19),D=0;D<B.length;++D)++M[B[D]&31];for(var D=0;D<S.length;++D)++M[S[D]&31];for(var P=hN(M,7),Y=P.t,Q=P.l,L=19;L>4&&!Y[NS[L-1]];--L);var ae=u+5<<3,ne=Vg(n,cA)+Vg(i,yv)+o,V=Vg(n,g)+Vg(i,b)+o+14+3*L+Vg(M,Y)+2*M[16]+3*M[17]+7*M[18];if(c>=0&&ae<=ne&&ae<=V)return CP(e,m,a.subarray(c,c+u));var O,X,$,H;if(ru(e,m,1+(V<ne)),m+=2,V<ne){O=Cx(g,p,0),X=g,$=Cx(b,y,0),H=b;var te=Cx(Y,Q,0);ru(e,m,j-257),ru(e,m+5,T-1),ru(e,m+10,L-4),m+=14;for(var D=0;D<L;++D)ru(e,m+3*D,Y[NS[D]]);m+=3*L;for(var K=[B,S],I=0;I<2;++I)for(var R=K[I],D=0;D<R.length;++D){var G=R[D]&31;ru(e,m,te[G]),m+=Y[G],G>15&&(ru(e,m,R[D]>>5&127),m+=R[D]>>12)}}else O=Uq,X=cA,$=Qq,H=yv;for(var D=0;D<l;++D){var se=r[D];if(se>255){var G=se>>18&31;Hg(e,m,O[G+257]),m+=X[G+257],G>7&&(ru(e,m,se>>23&31),m+=O5[G]);var le=se&31;Hg(e,m,$[le]),m+=H[le],le>3&&(Hg(e,m,se>>5&8191),m+=U5[le])}else Hg(e,m,O[se]),m+=X[se]}return Hg(e,m,O[256]),m+X[256]},Vq=new R5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),kP=new Cc(0),zq=function(a,e,s,r,n,i){var o=i.z||a.length,l=new Cc(r+o+5*(1+Math.ceil(o/7e3))+n),c=l.subarray(r,l.length-n),u=i.l,m=(i.r||0)&7;if(e){m&&(c[0]=i.r>>3);for(var A=Vq[e-1],g=A>>13,p=A&8191,v=(1<<s)-1,b=i.p||new ol(32768),y=i.h||new ol(v+1),w=Math.ceil(s/3),B=2*w,j=function(tt){return(a[tt]^a[tt+1]<<w^a[tt+2]<<B)&v},E=new R5(25e3),S=new ol(288),T=new ol(32),M=0,D=0,P=i.i||0,Y=0,Q=i.w||0,L=0;P+2<o;++P){var ae=j(P),ne=P&32767,V=y[ae];if(b[ne]=V,y[ae]=ne,Q<=P){var O=o-P;if((M>7e3||Y>24576)&&(O>423||!u)){m=CS(a,c,0,E,S,T,D,Y,L,P-L,m),Y=M=D=0,L=P;for(var X=0;X<286;++X)S[X]=0;for(var X=0;X<30;++X)T[X]=0}var $=2,H=0,te=p,K=ne-V&32767;if(O>2&&ae==j(P-K))for(var I=Math.min(g,O)-1,R=Math.min(32767,P),G=Math.min(258,O);K<=R&&--te&&ne!=V;){if(a[P+$]==a[P+$-K]){for(var se=0;se<G&&a[P+se]==a[P+se-K];++se);if(se>$){if($=se,H=K,se>I)break;for(var le=Math.min(K,se-2),ye=0,X=0;X<le;++X){var De=P-K+X&32767,me=b[De],Te=De-me&32767;Te>ye&&(ye=Te,V=De)}}}ne=V,V=b[ne],K+=ne-V&32767}if(H){E[Y++]=268435456|Zj[$]<<18|jS[H];var we=Zj[$]&31,st=jS[H]&31;D+=O5[we]+U5[st],++S[257+we],++T[st],Q=P+$,++M}else E[Y++]=a[P],++S[a[P]]}}for(P=Math.max(P,Q);P<o;++P)E[Y++]=a[P],++S[a[P]];m=CS(a,c,u,E,S,T,D,Y,L,P-L,m),u||(i.r=m&7|c[m/8|0]<<3,m-=7,i.h=y,i.p=b,i.i=P,i.w=Q)}else{for(var P=i.w||0;P<o+u;P+=65535){var ce=P+65535;ce>=o&&(c[m/8|0]=u,ce=o),m=CP(c,m+1,a.subarray(P,ce))}i.i=o}return Hq(l,0,r+_P(m)+n)},BP=function(){var a=1,e=0;return{p:function(s){for(var r=a,n=e,i=s.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)n+=r+=s[o];r=(r&65535)+15*(r>>16),n=(n&65535)+15*(n>>16)}a=r,e=n},d:function(){return a%=65521,e%=65521,(a&255)<<24|(a&65280)<<8|(e&255)<<8|e>>8}}},$q=function(a,e,s,r,n){if(!n&&(n={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new Cc(i.length+a.length);o.set(i),o.set(a,i.length),a=o,n.w=i.length}return zq(a,e.level==null?6:e.level,e.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(a.length)))*1.5):20:12+e.mem,s,r,n)},SP=function(a,e,s){for(;s;++e)a[e]=s,s>>>=8},qq=function(a,e){var s=e.level,r=s==0?0:s<6?1:s==9?3:2;if(a[0]=120,a[1]=r<<6|(e.dictionary&&32),a[1]|=31-(a[0]<<8|a[1])%31,e.dictionary){var n=BP();n.p(e.dictionary),SP(a,2,n.d())}};function s_(a,e){e||(e={});var s=BP();s.p(a);var r=$q(a,e,e.dictionary?6:2,4);return qq(r,e),SP(r,r.length-4,s.d()),r}var Gq=typeof TextDecoder<"u"&&new TextDecoder,Wq=0;try{Gq.decode(kP,{stream:!0}),Wq=1}catch{}function Yq(a){if(Array.isArray(a))return a}function Kq(a,e){var s=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(s!=null){var r,n,i,o,l=[],c=!0,u=!1;try{if(i=(s=s.call(a)).next,e!==0)for(;!(c=(r=i.call(s)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(m){u=!0,n=m}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(u)throw n}}return l}}function kS(a,e){(e==null||e>a.length)&&(e=a.length);for(var s=0,r=Array(e);s<e;s++)r[s]=a[s];return r}function Xq(a,e){if(a){if(typeof a=="string")return kS(a,e);var s={}.toString.call(a).slice(8,-1);return s==="Object"&&a.constructor&&(s=a.constructor.name),s==="Map"||s==="Set"?Array.from(a):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?kS(a,e):void 0}}function Jq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BS(a,e){return Yq(a)||Kq(a,e)||Xq(a,e)||Jq()}function SS(a,e="utf8"){return new TextDecoder(e).decode(a)}const Zq=new TextEncoder;function eG(a){return Zq.encode(a)}const tG=1024*8,sG=(()=>{const a=new Uint8Array(4),e=new Uint32Array(a.buffer);return!((e[0]=1)&a[0])})(),mN={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Q5{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=tG,s={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const n=s.offset?s.offset>>>0:0,i=e.byteLength-n;let o=n;(ArrayBuffer.isView(e)||e instanceof Q5)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+n),e=e.buffer),r?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,n=new Uint8Array(r);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,s){const r=mN[s].BYTES_PER_ELEMENT*e,n=this.byteOffset+this.offset,i=this.buffer.slice(n,n+r);if(this.littleEndian===sG&&s!=="uint8"&&s!=="int8"){const l=new Uint8Array(this.buffer.slice(n,n+r));l.reverse();const c=new mN[s](l.buffer);return this.offset+=r,c.reverse(),c}const o=new mN[s](i);return this.offset+=r,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let s="";for(let r=0;r<e;r++)s+=this.readChar();return s}readUtf8(e=1){return SS(this.readBytes(e))}decodeText(e=1,s="utf8"){return SS(this.readBytes(e),s)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let s=0;s<e.length;s++)this._data.setUint8(this.offset++,e[s]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let s=0;s<e.length;s++)this.writeUint8(e.charCodeAt(s));return this}writeUtf8(e){return this.writeBytes(eG(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Mp(a){let e=a.length;for(;--e>=0;)a[e]=0}const rG=3,aG=258,EP=29,nG=256,iG=nG+1+EP,FP=30,oG=512,lG=new Array((iG+2)*2);Mp(lG);const cG=new Array(FP*2);Mp(cG);const dG=new Array(oG);Mp(dG);const uG=new Array(aG-rG+1);Mp(uG);const hG=new Array(EP);Mp(hG);const mG=new Array(FP);Mp(mG);const AG=(a,e,s,r)=>{let n=a&65535|0,i=a>>>16&65535|0,o=0;for(;s!==0;){o=s>2e3?2e3:s,s-=o;do n=n+e[r++]|0,i=i+n|0;while(--o);n%=65521,i%=65521}return n|i<<16|0};var r_=AG;const fG=()=>{let a,e=[];for(var s=0;s<256;s++){a=s;for(var r=0;r<8;r++)a=a&1?3988292384^a>>>1:a>>>1;e[s]=a}return e},pG=new Uint32Array(fG()),gG=(a,e,s,r)=>{const n=pG,i=r+s;a^=-1;for(let o=r;o<i;o++)a=a>>>8^n[(a^e[o])&255];return a^-1};var td=gG,a_={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},DP={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const xG=(a,e)=>Object.prototype.hasOwnProperty.call(a,e);var bG=function(a){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const s=e.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(const r in s)xG(s,r)&&(a[r]=s[r])}}return a},yG=a=>{let e=0;for(let r=0,n=a.length;r<n;r++)e+=a[r].length;const s=new Uint8Array(e);for(let r=0,n=0,i=a.length;r<i;r++){let o=a[r];s.set(o,n),n+=o.length}return s},TP={assign:bG,flattenChunks:yG};let PP=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{PP=!1}const zx=new Uint8Array(256);for(let a=0;a<256;a++)zx[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;zx[254]=zx[254]=1;var vG=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let e,s,r,n,i,o=a.length,l=0;for(n=0;n<o;n++)s=a.charCodeAt(n),(s&64512)===55296&&n+1<o&&(r=a.charCodeAt(n+1),(r&64512)===56320&&(s=65536+(s-55296<<10)+(r-56320),n++)),l+=s<128?1:s<2048?2:s<65536?3:4;for(e=new Uint8Array(l),i=0,n=0;i<l;n++)s=a.charCodeAt(n),(s&64512)===55296&&n+1<o&&(r=a.charCodeAt(n+1),(r&64512)===56320&&(s=65536+(s-55296<<10)+(r-56320),n++)),s<128?e[i++]=s:s<2048?(e[i++]=192|s>>>6,e[i++]=128|s&63):s<65536?(e[i++]=224|s>>>12,e[i++]=128|s>>>6&63,e[i++]=128|s&63):(e[i++]=240|s>>>18,e[i++]=128|s>>>12&63,e[i++]=128|s>>>6&63,e[i++]=128|s&63);return e};const wG=(a,e)=>{if(e<65534&&a.subarray&&PP)return String.fromCharCode.apply(null,a.length===e?a:a.subarray(0,e));let s="";for(let r=0;r<e;r++)s+=String.fromCharCode(a[r]);return s};var NG=(a,e)=>{const s=e||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,e));let r,n;const i=new Array(s*2);for(n=0,r=0;r<s;){let o=a[r++];if(o<128){i[n++]=o;continue}let l=zx[o];if(l>4){i[n++]=65533,r+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&r<s;)o=o<<6|a[r++]&63,l--;if(l>1){i[n++]=65533;continue}o<65536?i[n++]=o:(o-=65536,i[n++]=55296|o>>10&1023,i[n++]=56320|o&1023)}return wG(i,n)},jG=(a,e)=>{e=e||a.length,e>a.length&&(e=a.length);let s=e-1;for(;s>=0&&(a[s]&192)===128;)s--;return s<0||s===0?e:s+zx[a[s]]>e?s:e},n_={string2buf:vG,buf2string:NG,utf8border:jG};function _G(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var CG=_G;const Ib=16209,kG=16191;var BG=function(e,s){let r,n,i,o,l,c,u,m,A,g,p,v,b,y,w,B,j,E,S,T,M,D,P,Y;const Q=e.state;r=e.next_in,P=e.input,n=r+(e.avail_in-5),i=e.next_out,Y=e.output,o=i-(s-e.avail_out),l=i+(e.avail_out-257),c=Q.dmax,u=Q.wsize,m=Q.whave,A=Q.wnext,g=Q.window,p=Q.hold,v=Q.bits,b=Q.lencode,y=Q.distcode,w=(1<<Q.lenbits)-1,B=(1<<Q.distbits)-1;e:do{v<15&&(p+=P[r++]<<v,v+=8,p+=P[r++]<<v,v+=8),j=b[p&w];t:for(;;){if(E=j>>>24,p>>>=E,v-=E,E=j>>>16&255,E===0)Y[i++]=j&65535;else if(E&16){S=j&65535,E&=15,E&&(v<E&&(p+=P[r++]<<v,v+=8),S+=p&(1<<E)-1,p>>>=E,v-=E),v<15&&(p+=P[r++]<<v,v+=8,p+=P[r++]<<v,v+=8),j=y[p&B];s:for(;;){if(E=j>>>24,p>>>=E,v-=E,E=j>>>16&255,E&16){if(T=j&65535,E&=15,v<E&&(p+=P[r++]<<v,v+=8,v<E&&(p+=P[r++]<<v,v+=8)),T+=p&(1<<E)-1,T>c){e.msg="invalid distance too far back",Q.mode=Ib;break e}if(p>>>=E,v-=E,E=i-o,T>E){if(E=T-E,E>m&&Q.sane){e.msg="invalid distance too far back",Q.mode=Ib;break e}if(M=0,D=g,A===0){if(M+=u-E,E<S){S-=E;do Y[i++]=g[M++];while(--E);M=i-T,D=Y}}else if(A<E){if(M+=u+A-E,E-=A,E<S){S-=E;do Y[i++]=g[M++];while(--E);if(M=0,A<S){E=A,S-=E;do Y[i++]=g[M++];while(--E);M=i-T,D=Y}}}else if(M+=A-E,E<S){S-=E;do Y[i++]=g[M++];while(--E);M=i-T,D=Y}for(;S>2;)Y[i++]=D[M++],Y[i++]=D[M++],Y[i++]=D[M++],S-=3;S&&(Y[i++]=D[M++],S>1&&(Y[i++]=D[M++]))}else{M=i-T;do Y[i++]=Y[M++],Y[i++]=Y[M++],Y[i++]=Y[M++],S-=3;while(S>2);S&&(Y[i++]=Y[M++],S>1&&(Y[i++]=Y[M++]))}}else if((E&64)===0){j=y[(j&65535)+(p&(1<<E)-1)];continue s}else{e.msg="invalid distance code",Q.mode=Ib;break e}break}}else if((E&64)===0){j=b[(j&65535)+(p&(1<<E)-1)];continue t}else if(E&32){Q.mode=kG;break e}else{e.msg="invalid literal/length code",Q.mode=Ib;break e}break}}while(r<n&&i<l);S=v>>3,r-=S,v-=S<<3,p&=(1<<v)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?5+(n-r):5-(r-n),e.avail_out=i<l?257+(l-i):257-(i-l),Q.hold=p,Q.bits=v};const gf=15,ES=852,FS=592,DS=0,AN=1,TS=2,SG=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),EG=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),FG=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),DG=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),TG=(a,e,s,r,n,i,o,l)=>{const c=l.bits;let u=0,m=0,A=0,g=0,p=0,v=0,b=0,y=0,w=0,B=0,j,E,S,T,M,D=null,P;const Y=new Uint16Array(gf+1),Q=new Uint16Array(gf+1);let L=null,ae,ne,V;for(u=0;u<=gf;u++)Y[u]=0;for(m=0;m<r;m++)Y[e[s+m]]++;for(p=c,g=gf;g>=1&&Y[g]===0;g--);if(p>g&&(p=g),g===0)return n[i++]=1<<24|64<<16|0,n[i++]=1<<24|64<<16|0,l.bits=1,0;for(A=1;A<g&&Y[A]===0;A++);for(p<A&&(p=A),y=1,u=1;u<=gf;u++)if(y<<=1,y-=Y[u],y<0)return-1;if(y>0&&(a===DS||g!==1))return-1;for(Q[1]=0,u=1;u<gf;u++)Q[u+1]=Q[u]+Y[u];for(m=0;m<r;m++)e[s+m]!==0&&(o[Q[e[s+m]]++]=m);if(a===DS?(D=L=o,P=20):a===AN?(D=SG,L=EG,P=257):(D=FG,L=DG,P=0),B=0,m=0,u=A,M=i,v=p,b=0,S=-1,w=1<<p,T=w-1,a===AN&&w>ES||a===TS&&w>FS)return 1;for(;;){ae=u-b,o[m]+1<P?(ne=0,V=o[m]):o[m]>=P?(ne=L[o[m]-P],V=D[o[m]-P]):(ne=96,V=0),j=1<<u-b,E=1<<v,A=E;do E-=j,n[M+(B>>b)+E]=ae<<24|ne<<16|V|0;while(E!==0);for(j=1<<u-1;B&j;)j>>=1;if(j!==0?(B&=j-1,B+=j):B=0,m++,--Y[u]===0){if(u===g)break;u=e[s+o[m]]}if(u>p&&(B&T)!==S){for(b===0&&(b=p),M+=A,v=u-b,y=1<<v;v+b<g&&(y-=Y[v+b],!(y<=0));)v++,y<<=1;if(w+=1<<v,a===AN&&w>ES||a===TS&&w>FS)return 1;S=B&T,n[S]=p<<24|v<<16|M-i|0}}return B!==0&&(n[M+B]=u-b<<24|64<<16|0),l.bits=p,0};var kx=TG;const PG=0,IP=1,LP=2,{Z_FINISH:PS,Z_BLOCK:IG,Z_TREES:Lb,Z_OK:dA,Z_STREAM_END:LG,Z_NEED_DICT:MG,Z_STREAM_ERROR:Vl,Z_DATA_ERROR:MP,Z_MEM_ERROR:RP,Z_BUF_ERROR:RG,Z_DEFLATED:IS}=DP,Bw=16180,LS=16181,MS=16182,RS=16183,OS=16184,US=16185,QS=16186,HS=16187,VS=16188,zS=16189,vv=16190,au=16191,fN=16192,$S=16193,pN=16194,qS=16195,GS=16196,WS=16197,YS=16198,Mb=16199,Rb=16200,KS=16201,XS=16202,JS=16203,ZS=16204,eE=16205,gN=16206,tE=16207,sE=16208,$a=16209,OP=16210,UP=16211,OG=852,UG=592,QG=15,HG=QG,rE=a=>(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24);function VG(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const wA=a=>{if(!a)return 1;const e=a.state;return!e||e.strm!==a||e.mode<Bw||e.mode>UP?1:0},QP=a=>{if(wA(a))return Vl;const e=a.state;return a.total_in=a.total_out=e.total=0,a.msg="",e.wrap&&(a.adler=e.wrap&1),e.mode=Bw,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(OG),e.distcode=e.distdyn=new Int32Array(UG),e.sane=1,e.back=-1,dA},HP=a=>{if(wA(a))return Vl;const e=a.state;return e.wsize=0,e.whave=0,e.wnext=0,QP(a)},VP=(a,e)=>{let s;if(wA(a))return Vl;const r=a.state;return e<0?(s=0,e=-e):(s=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Vl:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=s,r.wbits=e,HP(a))},zP=(a,e)=>{if(!a)return Vl;const s=new VG;a.state=s,s.strm=a,s.window=null,s.mode=Bw;const r=VP(a,e);return r!==dA&&(a.state=null),r},zG=a=>zP(a,HG);let aE=!0,xN,bN;const $G=a=>{if(aE){xN=new Int32Array(512),bN=new Int32Array(32);let e=0;for(;e<144;)a.lens[e++]=8;for(;e<256;)a.lens[e++]=9;for(;e<280;)a.lens[e++]=7;for(;e<288;)a.lens[e++]=8;for(kx(IP,a.lens,0,288,xN,0,a.work,{bits:9}),e=0;e<32;)a.lens[e++]=5;kx(LP,a.lens,0,32,bN,0,a.work,{bits:5}),aE=!1}a.lencode=xN,a.lenbits=9,a.distcode=bN,a.distbits=5},$P=(a,e,s,r)=>{let n;const i=a.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(e.subarray(s-i.wsize,s),0),i.wnext=0,i.whave=i.wsize):(n=i.wsize-i.wnext,n>r&&(n=r),i.window.set(e.subarray(s-r,s-r+n),i.wnext),r-=n,r?(i.window.set(e.subarray(s-r,s),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=n,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=n))),0},qG=(a,e)=>{let s,r,n,i,o,l,c,u,m,A,g,p,v,b,y=0,w,B,j,E,S,T,M,D;const P=new Uint8Array(4);let Y,Q;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(wA(a)||!a.output||!a.input&&a.avail_in!==0)return Vl;s=a.state,s.mode===au&&(s.mode=fN),o=a.next_out,n=a.output,c=a.avail_out,i=a.next_in,r=a.input,l=a.avail_in,u=s.hold,m=s.bits,A=l,g=c,D=dA;e:for(;;)switch(s.mode){case Bw:if(s.wrap===0){s.mode=fN;break}for(;m<16;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}if(s.wrap&2&&u===35615){s.wbits===0&&(s.wbits=15),s.check=0,P[0]=u&255,P[1]=u>>>8&255,s.check=td(s.check,P,2,0),u=0,m=0,s.mode=LS;break}if(s.head&&(s.head.done=!1),!(s.wrap&1)||(((u&255)<<8)+(u>>8))%31){a.msg="incorrect header check",s.mode=$a;break}if((u&15)!==IS){a.msg="unknown compression method",s.mode=$a;break}if(u>>>=4,m-=4,M=(u&15)+8,s.wbits===0&&(s.wbits=M),M>15||M>s.wbits){a.msg="invalid window size",s.mode=$a;break}s.dmax=1<<s.wbits,s.flags=0,a.adler=s.check=1,s.mode=u&512?zS:au,u=0,m=0;break;case LS:for(;m<16;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}if(s.flags=u,(s.flags&255)!==IS){a.msg="unknown compression method",s.mode=$a;break}if(s.flags&57344){a.msg="unknown header flags set",s.mode=$a;break}s.head&&(s.head.text=u>>8&1),s.flags&512&&s.wrap&4&&(P[0]=u&255,P[1]=u>>>8&255,s.check=td(s.check,P,2,0)),u=0,m=0,s.mode=MS;case MS:for(;m<32;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}s.head&&(s.head.time=u),s.flags&512&&s.wrap&4&&(P[0]=u&255,P[1]=u>>>8&255,P[2]=u>>>16&255,P[3]=u>>>24&255,s.check=td(s.check,P,4,0)),u=0,m=0,s.mode=RS;case RS:for(;m<16;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}s.head&&(s.head.xflags=u&255,s.head.os=u>>8),s.flags&512&&s.wrap&4&&(P[0]=u&255,P[1]=u>>>8&255,s.check=td(s.check,P,2,0)),u=0,m=0,s.mode=OS;case OS:if(s.flags&1024){for(;m<16;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}s.length=u,s.head&&(s.head.extra_len=u),s.flags&512&&s.wrap&4&&(P[0]=u&255,P[1]=u>>>8&255,s.check=td(s.check,P,2,0)),u=0,m=0}else s.head&&(s.head.extra=null);s.mode=US;case US:if(s.flags&1024&&(p=s.length,p>l&&(p=l),p&&(s.head&&(M=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(r.subarray(i,i+p),M)),s.flags&512&&s.wrap&4&&(s.check=td(s.check,r,p,i)),l-=p,i+=p,s.length-=p),s.length))break e;s.length=0,s.mode=QS;case QS:if(s.flags&2048){if(l===0)break e;p=0;do M=r[i+p++],s.head&&M&&s.length<65536&&(s.head.name+=String.fromCharCode(M));while(M&&p<l);if(s.flags&512&&s.wrap&4&&(s.check=td(s.check,r,p,i)),l-=p,i+=p,M)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=HS;case HS:if(s.flags&4096){if(l===0)break e;p=0;do M=r[i+p++],s.head&&M&&s.length<65536&&(s.head.comment+=String.fromCharCode(M));while(M&&p<l);if(s.flags&512&&s.wrap&4&&(s.check=td(s.check,r,p,i)),l-=p,i+=p,M)break e}else s.head&&(s.head.comment=null);s.mode=VS;case VS:if(s.flags&512){for(;m<16;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}if(s.wrap&4&&u!==(s.check&65535)){a.msg="header crc mismatch",s.mode=$a;break}u=0,m=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),a.adler=s.check=0,s.mode=au;break;case zS:for(;m<32;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}a.adler=s.check=rE(u),u=0,m=0,s.mode=vv;case vv:if(s.havedict===0)return a.next_out=o,a.avail_out=c,a.next_in=i,a.avail_in=l,s.hold=u,s.bits=m,MG;a.adler=s.check=1,s.mode=au;case au:if(e===IG||e===Lb)break e;case fN:if(s.last){u>>>=m&7,m-=m&7,s.mode=gN;break}for(;m<3;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}switch(s.last=u&1,u>>>=1,m-=1,u&3){case 0:s.mode=$S;break;case 1:if($G(s),s.mode=Mb,e===Lb){u>>>=2,m-=2;break e}break;case 2:s.mode=GS;break;case 3:a.msg="invalid block type",s.mode=$a}u>>>=2,m-=2;break;case $S:for(u>>>=m&7,m-=m&7;m<32;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}if((u&65535)!==(u>>>16^65535)){a.msg="invalid stored block lengths",s.mode=$a;break}if(s.length=u&65535,u=0,m=0,s.mode=pN,e===Lb)break e;case pN:s.mode=qS;case qS:if(p=s.length,p){if(p>l&&(p=l),p>c&&(p=c),p===0)break e;n.set(r.subarray(i,i+p),o),l-=p,i+=p,c-=p,o+=p,s.length-=p;break}s.mode=au;break;case GS:for(;m<14;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}if(s.nlen=(u&31)+257,u>>>=5,m-=5,s.ndist=(u&31)+1,u>>>=5,m-=5,s.ncode=(u&15)+4,u>>>=4,m-=4,s.nlen>286||s.ndist>30){a.msg="too many length or distance symbols",s.mode=$a;break}s.have=0,s.mode=WS;case WS:for(;s.have<s.ncode;){for(;m<3;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}s.lens[L[s.have++]]=u&7,u>>>=3,m-=3}for(;s.have<19;)s.lens[L[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,Y={bits:s.lenbits},D=kx(PG,s.lens,0,19,s.lencode,0,s.work,Y),s.lenbits=Y.bits,D){a.msg="invalid code lengths set",s.mode=$a;break}s.have=0,s.mode=YS;case YS:for(;s.have<s.nlen+s.ndist;){for(;y=s.lencode[u&(1<<s.lenbits)-1],w=y>>>24,B=y>>>16&255,j=y&65535,!(w<=m);){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}if(j<16)u>>>=w,m-=w,s.lens[s.have++]=j;else{if(j===16){for(Q=w+2;m<Q;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}if(u>>>=w,m-=w,s.have===0){a.msg="invalid bit length repeat",s.mode=$a;break}M=s.lens[s.have-1],p=3+(u&3),u>>>=2,m-=2}else if(j===17){for(Q=w+3;m<Q;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}u>>>=w,m-=w,M=0,p=3+(u&7),u>>>=3,m-=3}else{for(Q=w+7;m<Q;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}u>>>=w,m-=w,M=0,p=11+(u&127),u>>>=7,m-=7}if(s.have+p>s.nlen+s.ndist){a.msg="invalid bit length repeat",s.mode=$a;break}for(;p--;)s.lens[s.have++]=M}}if(s.mode===$a)break;if(s.lens[256]===0){a.msg="invalid code -- missing end-of-block",s.mode=$a;break}if(s.lenbits=9,Y={bits:s.lenbits},D=kx(IP,s.lens,0,s.nlen,s.lencode,0,s.work,Y),s.lenbits=Y.bits,D){a.msg="invalid literal/lengths set",s.mode=$a;break}if(s.distbits=6,s.distcode=s.distdyn,Y={bits:s.distbits},D=kx(LP,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,Y),s.distbits=Y.bits,D){a.msg="invalid distances set",s.mode=$a;break}if(s.mode=Mb,e===Lb)break e;case Mb:s.mode=Rb;case Rb:if(l>=6&&c>=258){a.next_out=o,a.avail_out=c,a.next_in=i,a.avail_in=l,s.hold=u,s.bits=m,BG(a,g),o=a.next_out,n=a.output,c=a.avail_out,i=a.next_in,r=a.input,l=a.avail_in,u=s.hold,m=s.bits,s.mode===au&&(s.back=-1);break}for(s.back=0;y=s.lencode[u&(1<<s.lenbits)-1],w=y>>>24,B=y>>>16&255,j=y&65535,!(w<=m);){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}if(B&&(B&240)===0){for(E=w,S=B,T=j;y=s.lencode[T+((u&(1<<E+S)-1)>>E)],w=y>>>24,B=y>>>16&255,j=y&65535,!(E+w<=m);){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}u>>>=E,m-=E,s.back+=E}if(u>>>=w,m-=w,s.back+=w,s.length=j,B===0){s.mode=eE;break}if(B&32){s.back=-1,s.mode=au;break}if(B&64){a.msg="invalid literal/length code",s.mode=$a;break}s.extra=B&15,s.mode=KS;case KS:if(s.extra){for(Q=s.extra;m<Q;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}s.length+=u&(1<<s.extra)-1,u>>>=s.extra,m-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=XS;case XS:for(;y=s.distcode[u&(1<<s.distbits)-1],w=y>>>24,B=y>>>16&255,j=y&65535,!(w<=m);){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}if((B&240)===0){for(E=w,S=B,T=j;y=s.distcode[T+((u&(1<<E+S)-1)>>E)],w=y>>>24,B=y>>>16&255,j=y&65535,!(E+w<=m);){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}u>>>=E,m-=E,s.back+=E}if(u>>>=w,m-=w,s.back+=w,B&64){a.msg="invalid distance code",s.mode=$a;break}s.offset=j,s.extra=B&15,s.mode=JS;case JS:if(s.extra){for(Q=s.extra;m<Q;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}s.offset+=u&(1<<s.extra)-1,u>>>=s.extra,m-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){a.msg="invalid distance too far back",s.mode=$a;break}s.mode=ZS;case ZS:if(c===0)break e;if(p=g-c,s.offset>p){if(p=s.offset-p,p>s.whave&&s.sane){a.msg="invalid distance too far back",s.mode=$a;break}p>s.wnext?(p-=s.wnext,v=s.wsize-p):v=s.wnext-p,p>s.length&&(p=s.length),b=s.window}else b=n,v=o-s.offset,p=s.length;p>c&&(p=c),c-=p,s.length-=p;do n[o++]=b[v++];while(--p);s.length===0&&(s.mode=Rb);break;case eE:if(c===0)break e;n[o++]=s.length,c--,s.mode=Rb;break;case gN:if(s.wrap){for(;m<32;){if(l===0)break e;l--,u|=r[i++]<<m,m+=8}if(g-=c,a.total_out+=g,s.total+=g,s.wrap&4&&g&&(a.adler=s.check=s.flags?td(s.check,n,g,o-g):r_(s.check,n,g,o-g)),g=c,s.wrap&4&&(s.flags?u:rE(u))!==s.check){a.msg="incorrect data check",s.mode=$a;break}u=0,m=0}s.mode=tE;case tE:if(s.wrap&&s.flags){for(;m<32;){if(l===0)break e;l--,u+=r[i++]<<m,m+=8}if(s.wrap&4&&u!==(s.total&4294967295)){a.msg="incorrect length check",s.mode=$a;break}u=0,m=0}s.mode=sE;case sE:D=LG;break e;case $a:D=MP;break e;case OP:return RP;case UP:default:return Vl}return a.next_out=o,a.avail_out=c,a.next_in=i,a.avail_in=l,s.hold=u,s.bits=m,(s.wsize||g!==a.avail_out&&s.mode<$a&&(s.mode<gN||e!==PS))&&$P(a,a.output,a.next_out,g-a.avail_out),A-=a.avail_in,g-=a.avail_out,a.total_in+=A,a.total_out+=g,s.total+=g,s.wrap&4&&g&&(a.adler=s.check=s.flags?td(s.check,n,g,a.next_out-g):r_(s.check,n,g,a.next_out-g)),a.data_type=s.bits+(s.last?64:0)+(s.mode===au?128:0)+(s.mode===Mb||s.mode===pN?256:0),(A===0&&g===0||e===PS)&&D===dA&&(D=RG),D},GG=a=>{if(wA(a))return Vl;let e=a.state;return e.window&&(e.window=null),a.state=null,dA},WG=(a,e)=>{if(wA(a))return Vl;const s=a.state;return(s.wrap&2)===0?Vl:(s.head=e,e.done=!1,dA)},YG=(a,e)=>{const s=e.length;let r,n,i;return wA(a)||(r=a.state,r.wrap!==0&&r.mode!==vv)?Vl:r.mode===vv&&(n=1,n=r_(n,e,s,0),n!==r.check)?MP:(i=$P(a,e,s,s),i?(r.mode=OP,RP):(r.havedict=1,dA))};var KG=HP,XG=VP,JG=QP,ZG=zG,eW=zP,tW=qG,sW=GG,rW=WG,aW=YG,nW="pako inflate (from Nodeca project)",hu={inflateReset:KG,inflateReset2:XG,inflateResetKeep:JG,inflateInit:ZG,inflateInit2:eW,inflate:tW,inflateEnd:sW,inflateGetHeader:rW,inflateSetDictionary:aW,inflateInfo:nW};function iW(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var oW=iW;const qP=Object.prototype.toString,{Z_NO_FLUSH:lW,Z_FINISH:cW,Z_OK:$x,Z_STREAM_END:yN,Z_NEED_DICT:vN,Z_STREAM_ERROR:dW,Z_DATA_ERROR:nE,Z_MEM_ERROR:uW}=DP;function w0(a){this.options=TP.assign({chunkSize:1024*64,windowBits:15,to:""},a||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(a&&a.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new CG,this.strm.avail_out=0;let s=hu.inflateInit2(this.strm,e.windowBits);if(s!==$x)throw new Error(a_[s]);if(this.header=new oW,hu.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=n_.string2buf(e.dictionary):qP.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(s=hu.inflateSetDictionary(this.strm,e.dictionary),s!==$x)))throw new Error(a_[s])}w0.prototype.push=function(a,e){const s=this.strm,r=this.options.chunkSize,n=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?cW:lW,qP.call(a)==="[object ArrayBuffer]"?s.input=new Uint8Array(a):s.input=a,s.next_in=0,s.avail_in=s.input.length;;){for(s.avail_out===0&&(s.output=new Uint8Array(r),s.next_out=0,s.avail_out=r),i=hu.inflate(s,o),i===vN&&n&&(i=hu.inflateSetDictionary(s,n),i===$x?i=hu.inflate(s,o):i===nE&&(i=vN));s.avail_in>0&&i===yN&&s.state.wrap>0&&a[s.next_in]!==0;)hu.inflateReset(s),i=hu.inflate(s,o);switch(i){case dW:case nE:case vN:case uW:return this.onEnd(i),this.ended=!0,!1}if(l=s.avail_out,s.next_out&&(s.avail_out===0||i===yN))if(this.options.to==="string"){let c=n_.utf8border(s.output,s.next_out),u=s.next_out-c,m=n_.buf2string(s.output,c);s.next_out=u,s.avail_out=r-u,u&&s.output.set(s.output.subarray(c,c+u),0),this.onData(m)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(!(i===$x&&l===0)){if(i===yN)return i=hu.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(s.avail_in===0)break}}return!0};w0.prototype.onData=function(a){this.chunks.push(a)};w0.prototype.onEnd=function(a){a===$x&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=TP.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function hW(a,e){const s=new w0(e);if(s.push(a),s.err)throw s.msg||a_[s.err];return s.result}var mW=w0,AW=hW,fW={Inflate:mW,inflate:AW};const{Inflate:pW,inflate:gW}=fW;var iE=pW,xW=gW;const GP=[];for(let a=0;a<256;a++){let e=a;for(let s=0;s<8;s++)e&1?e=3988292384^e>>>1:e=e>>>1;GP[a]=e}const oE=4294967295;function bW(a,e,s){let r=a;for(let n=0;n<s;n++)r=GP[(r^e[n])&255]^r>>>8;return r}function yW(a,e){return(bW(oE,a,e)^oE)>>>0}function lE(a,e,s){const r=a.readUint32(),n=yW(new Uint8Array(a.buffer,a.byteOffset+a.offset-e-4,e),e);if(n!==r)throw new Error(`CRC mismatch for chunk ${s}. Expected ${r}, found ${n}`)}function WP(a,e,s){for(let r=0;r<s;r++)e[r]=a[r]}function YP(a,e,s,r){let n=0;for(;n<r;n++)e[n]=a[n];for(;n<s;n++)e[n]=a[n]+e[n-r]&255}function KP(a,e,s,r){let n=0;if(s.length===0)for(;n<r;n++)e[n]=a[n];else for(;n<r;n++)e[n]=a[n]+s[n]&255}function XP(a,e,s,r,n){let i=0;if(s.length===0){for(;i<n;i++)e[i]=a[i];for(;i<r;i++)e[i]=a[i]+(e[i-n]>>1)&255}else{for(;i<n;i++)e[i]=a[i]+(s[i]>>1)&255;for(;i<r;i++)e[i]=a[i]+(e[i-n]+s[i]>>1)&255}}function JP(a,e,s,r,n){let i=0;if(s.length===0){for(;i<n;i++)e[i]=a[i];for(;i<r;i++)e[i]=a[i]+e[i-n]&255}else{for(;i<n;i++)e[i]=a[i]+s[i]&255;for(;i<r;i++)e[i]=a[i]+vW(e[i-n],s[i],s[i-n])&255}}function vW(a,e,s){const r=a+e-s,n=Math.abs(r-a),i=Math.abs(r-e),o=Math.abs(r-s);return n<=i&&n<=o?a:i<=o?e:s}function wW(a,e,s,r,n,i){switch(a){case 0:WP(e,s,n);break;case 1:YP(e,s,n,i);break;case 2:KP(e,s,r,n);break;case 3:XP(e,s,r,n,i);break;case 4:JP(e,s,r,n,i);break;default:throw new Error(`Unsupported filter: ${a}`)}}const NW=new Uint16Array([255]),jW=new Uint8Array(NW.buffer),_W=jW[0]===255;function CW(a){const{data:e,width:s,height:r,channels:n,depth:i}=a,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*n,c=new Uint8Array(r*s*l);let u=0;for(let m=0;m<7;m++){const A=o[m],g=Math.ceil((s-A.x)/A.xStep),p=Math.ceil((r-A.y)/A.yStep);if(g<=0||p<=0)continue;const v=g*l,b=new Uint8Array(v);for(let y=0;y<p;y++){const w=e[u++],B=e.subarray(u,u+v);u+=v;const j=new Uint8Array(v);wW(w,B,j,b,v,l),b.set(j);for(let E=0;E<g;E++){const S=A.x+E*A.xStep,T=A.y+y*A.yStep;if(!(S>=s||T>=r))for(let M=0;M<l;M++)c[(T*s+S)*l+M]=j[E*l+M]}}}if(i===16){const m=new Uint16Array(c.buffer);if(_W)for(let A=0;A<m.length;A++)m[A]=kW(m[A]);return m}else return c}function kW(a){return(a&255)<<8|a>>8&255}const BW=new Uint16Array([255]),SW=new Uint8Array(BW.buffer),EW=SW[0]===255,FW=new Uint8Array(0);function cE(a){const{data:e,width:s,height:r,channels:n,depth:i}=a,o=Math.ceil(i/8)*n,l=Math.ceil(i/8*n*s),c=new Uint8Array(r*l);let u=FW,m=0,A,g;for(let p=0;p<r;p++){switch(A=e.subarray(m+1,m+1+l),g=c.subarray(p*l,(p+1)*l),e[m]){case 0:WP(A,g,l);break;case 1:YP(A,g,l,o);break;case 2:KP(A,g,u,l);break;case 3:XP(A,g,u,l,o);break;case 4:JP(A,g,u,l,o);break;default:throw new Error(`Unsupported filter: ${e[m]}`)}u=g,m+=l+1}if(i===16){const p=new Uint16Array(c.buffer);if(EW)for(let v=0;v<p.length;v++)p[v]=DW(p[v]);return p}else return c}function DW(a){return(a&255)<<8|a>>8&255}const zy=Uint8Array.of(137,80,78,71,13,10,26,10);function dE(a){if(!TW(a.readBytes(zy.length)))throw new Error("wrong PNG signature")}function TW(a){if(a.length<zy.length)return!1;for(let e=0;e<zy.length;e++)if(a[e]!==zy[e])return!1;return!0}const PW="tEXt",IW=0,ZP=new TextDecoder("latin1");function LW(a){if(RW(a),a.length===0||a.length>79)throw new Error("keyword length must be between 1 and 79")}const MW=/^[\u0000-\u00FF]*$/;function RW(a){if(!MW.test(a))throw new Error("invalid latin1 text")}function OW(a,e,s){const r=eI(e);a[r]=UW(e,s-r.length-1)}function eI(a){for(a.mark();a.readByte()!==IW;);const e=a.offset;a.reset();const s=ZP.decode(a.readBytes(e-a.offset-1));return a.skip(1),LW(s),s}function UW(a,e){return ZP.decode(a.readBytes(e))}const Jo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},wN={UNKNOWN:-1,DEFLATE:0},uE={UNKNOWN:-1,ADAPTIVE:0},NN={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Ob={NONE:0,BACKGROUND:1,PREVIOUS:2},jN={SOURCE:0,OVER:1};class QW extends Q5{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,s={}){super(e);const{checkCrc:r=!1}=s;this._checkCrc=r,this._inflator=new iE,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=wN.UNKNOWN,this._filterMethod=uE.UNKNOWN,this._interlaceMethod=NN.UNKNOWN,this._colorType=Jo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(dE(this);!this._end;){const e=this.readUint32(),s=this.readChars(4);this.decodeChunk(e,s)}return this.decodeImage(),this._png}decodeApng(){for(dE(this);!this._end;){const e=this.readUint32(),s=this.readChars(4);this.decodeApngChunk(e,s)}return this.decodeApngImage(),this._apng}decodeChunk(e,s){const r=this.offset;switch(s){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case PW:OW(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?lE(this,e+4,s):this.skip(4)}decodeApngChunk(e,s){const r=this.offset;switch(s!=="fdAT"&&s!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),s){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,s),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?lE(this,e+4,s):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=HW(this.readUint8());const s=this.readUint8();this._colorType=s;let r;switch(s){case Jo.GREYSCALE:r=1;break;case Jo.TRUECOLOUR:r=3;break;case Jo.INDEXED_COLOUR:r=1;break;case Jo.GREYSCALE_ALPHA:r=2;break;case Jo.TRUECOLOUR_ALPHA:r=4;break;case Jo.UNKNOWN:default:throw new Error(`Unknown color type: ${s}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==wN.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const s=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let n=0;n<s;n++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const s=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let s=e,r=this.offset+this.byteOffset;if(r+=4,s-=4,this._inflator.push(new Uint8Array(this.buffer,r,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Jo.GREYSCALE:case Jo.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let s=0;s<e/2;s++)this._transparency[s]=this.readUint16();break}case Jo.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let s=0;for(;s<e;s++){const r=this.readByte();this._palette[s].push(r)}for(;s<this._palette.length;s++)this._palette[s].push(255);break}case Jo.UNKNOWN:case Jo.GREYSCALE_ALPHA:case Jo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const s=eI(this),r=this.readUint8();if(r!==wN.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const n=this.readBytes(e-s.length-2);this._png.iccEmbeddedProfile={name:s,profile:xW(n)}}decodepHYs(){const e=this.readUint32(),s=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:s,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const s={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=cE({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)s.data=r.data;else{const n=this._apng.frames.at(e-1);this.disposeFrame(r,n,s),this.addFrameDataToCanvas(s,r)}this._apng.frames.push(s)}}return this._apng}disposeFrame(e,s,r){switch(e.disposeOp){case Ob.NONE:break;case Ob.BACKGROUND:for(let n=0;n<this._png.height;n++)for(let i=0;i<this._png.width;i++){const o=(n*e.width+i)*this._png.channels;for(let l=0;l<this._png.channels;l++)r.data[o+l]=0}break;case Ob.PREVIOUS:r.data.set(s.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,s){const r=1<<this._png.depth,n=(i,o)=>{const l=((i+s.yOffset)*this._png.width+s.xOffset+o)*this._png.channels,c=(i*s.width+o)*this._png.channels;return{index:l,frameIndex:c}};switch(s.blendOp){case jN.SOURCE:for(let i=0;i<s.height;i++)for(let o=0;o<s.width;o++){const{index:l,frameIndex:c}=n(i,o);for(let u=0;u<this._png.channels;u++)e.data[l+u]=s.data[c+u]}break;case jN.OVER:for(let i=0;i<s.height;i++)for(let o=0;o<s.width;o++){const{index:l,frameIndex:c}=n(i,o);for(let u=0;u<this._png.channels;u++){const m=s.data[c+this._png.channels-1]/r,A=u%(this._png.channels-1)===0?1:s.data[c+u],g=Math.floor(m*A+(1-m)*e.data[l+u]);e.data[l+u]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==uE.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===NN.NO_INTERLACE)this._png.data=cE({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===NN.ADAM7)this._png.data=CW({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,s=this._frames.at(-1);s?s.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Ob.NONE,blendOp:jN.SOURCE,data:e}),this._inflator=new iE,this._writingDataChunks=!1}}function HW(a){if(a!==1&&a!==2&&a!==4&&a!==8&&a!==16)throw new Error(`invalid bit depth: ${a}`);return a}var hE;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.METRE=1]="METRE"})(hE||(hE={}));function VW(a,e){return new QW(a,e).decode()}var sr=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function _N(){sr.console&&typeof sr.console.log=="function"&&sr.console.log.apply(sr.console,arguments)}var Ca={log:_N,warn:function(a){sr.console&&(typeof sr.console.warn=="function"?sr.console.warn.apply(sr.console,arguments):_N.call(null,arguments))},error:function(a){sr.console&&(typeof sr.console.error=="function"?sr.console.error.apply(sr.console,arguments):_N(a))}};function CN(a,e,s){var r=new XMLHttpRequest;r.open("GET",a),r.responseType="blob",r.onload=function(){Pm(r.response,e,s)},r.onerror=function(){Ca.error("could not download file")},r.send()}function mE(a){var e=new XMLHttpRequest;e.open("HEAD",a,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Ub(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(e)}}var Pm=sr.saveAs||((typeof window>"u"?"undefined":ha(window))!=="object"||window!==sr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(a,e,s){var r=sr.URL||sr.webkitURL,n=document.createElement("a");e=e||a.name||"download",n.download=e,n.rel="noopener",typeof a=="string"?(n.href=a,n.origin!==location.origin?mE(n.href)?CN(a,e,s):Ub(n,n.target="_blank"):Ub(n)):(n.href=r.createObjectURL(a),setTimeout(function(){r.revokeObjectURL(n.href)},4e4),setTimeout(function(){Ub(n)},0))}:"msSaveOrOpenBlob"in navigator?function(a,e,s){if(e=e||a.name||"download",typeof a=="string")if(mE(a))CN(a,e,s);else{var r=document.createElement("a");r.href=a,r.target="_blank",setTimeout(function(){Ub(r)})}else navigator.msSaveOrOpenBlob((function(n,i){return i===void 0?i={autoBom:!1}:ha(i)!=="object"&&(Ca.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n})(a,s),e)}:function(a,e,s,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof a=="string")return CN(a,e,s);var n=a.type==="application/octet-stream",i=/constructor/i.test(sr.HTMLElement)||sr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||n&&i)&&(typeof FileReader>"u"?"undefined":ha(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var m=l.result;m=o?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=m:location=m,r=null},l.readAsDataURL(a)}else{var c=sr.URL||sr.webkitURL,u=c.createObjectURL(a);r?r.location=u:location.href=u,r=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});function tI(a){var e;a=a||"",this.ok=!1,a.charAt(0)=="#"&&(a=a.substr(1,6)),a={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[a=(a=a.replace(/ /g,"")).toLowerCase()]||a;for(var s=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<s.length;r++){var n=s[r].re,i=s[r].process,o=n.exec(a);o&&(e=i(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var $y=sr.atob.bind(sr),AE=sr.btoa.bind(sr);function kN(a,e){var s=a[0],r=a[1],n=a[2],i=a[3];s=Oi(s,r,n,i,e[0],7,-680876936),i=Oi(i,s,r,n,e[1],12,-389564586),n=Oi(n,i,s,r,e[2],17,606105819),r=Oi(r,n,i,s,e[3],22,-1044525330),s=Oi(s,r,n,i,e[4],7,-176418897),i=Oi(i,s,r,n,e[5],12,1200080426),n=Oi(n,i,s,r,e[6],17,-1473231341),r=Oi(r,n,i,s,e[7],22,-45705983),s=Oi(s,r,n,i,e[8],7,1770035416),i=Oi(i,s,r,n,e[9],12,-1958414417),n=Oi(n,i,s,r,e[10],17,-42063),r=Oi(r,n,i,s,e[11],22,-1990404162),s=Oi(s,r,n,i,e[12],7,1804603682),i=Oi(i,s,r,n,e[13],12,-40341101),n=Oi(n,i,s,r,e[14],17,-1502002290),s=Ui(s,r=Oi(r,n,i,s,e[15],22,1236535329),n,i,e[1],5,-165796510),i=Ui(i,s,r,n,e[6],9,-1069501632),n=Ui(n,i,s,r,e[11],14,643717713),r=Ui(r,n,i,s,e[0],20,-373897302),s=Ui(s,r,n,i,e[5],5,-701558691),i=Ui(i,s,r,n,e[10],9,38016083),n=Ui(n,i,s,r,e[15],14,-660478335),r=Ui(r,n,i,s,e[4],20,-405537848),s=Ui(s,r,n,i,e[9],5,568446438),i=Ui(i,s,r,n,e[14],9,-1019803690),n=Ui(n,i,s,r,e[3],14,-187363961),r=Ui(r,n,i,s,e[8],20,1163531501),s=Ui(s,r,n,i,e[13],5,-1444681467),i=Ui(i,s,r,n,e[2],9,-51403784),n=Ui(n,i,s,r,e[7],14,1735328473),s=Qi(s,r=Ui(r,n,i,s,e[12],20,-1926607734),n,i,e[5],4,-378558),i=Qi(i,s,r,n,e[8],11,-2022574463),n=Qi(n,i,s,r,e[11],16,1839030562),r=Qi(r,n,i,s,e[14],23,-35309556),s=Qi(s,r,n,i,e[1],4,-1530992060),i=Qi(i,s,r,n,e[4],11,1272893353),n=Qi(n,i,s,r,e[7],16,-155497632),r=Qi(r,n,i,s,e[10],23,-1094730640),s=Qi(s,r,n,i,e[13],4,681279174),i=Qi(i,s,r,n,e[0],11,-358537222),n=Qi(n,i,s,r,e[3],16,-722521979),r=Qi(r,n,i,s,e[6],23,76029189),s=Qi(s,r,n,i,e[9],4,-640364487),i=Qi(i,s,r,n,e[12],11,-421815835),n=Qi(n,i,s,r,e[15],16,530742520),s=Hi(s,r=Qi(r,n,i,s,e[2],23,-995338651),n,i,e[0],6,-198630844),i=Hi(i,s,r,n,e[7],10,1126891415),n=Hi(n,i,s,r,e[14],15,-1416354905),r=Hi(r,n,i,s,e[5],21,-57434055),s=Hi(s,r,n,i,e[12],6,1700485571),i=Hi(i,s,r,n,e[3],10,-1894986606),n=Hi(n,i,s,r,e[10],15,-1051523),r=Hi(r,n,i,s,e[1],21,-2054922799),s=Hi(s,r,n,i,e[8],6,1873313359),i=Hi(i,s,r,n,e[15],10,-30611744),n=Hi(n,i,s,r,e[6],15,-1560198380),r=Hi(r,n,i,s,e[13],21,1309151649),s=Hi(s,r,n,i,e[4],6,-145523070),i=Hi(i,s,r,n,e[11],10,-1120210379),n=Hi(n,i,s,r,e[2],15,718787259),r=Hi(r,n,i,s,e[9],21,-343485551),a[0]=Sh(s,a[0]),a[1]=Sh(r,a[1]),a[2]=Sh(n,a[2]),a[3]=Sh(i,a[3])}function Sw(a,e,s,r,n,i){return e=Sh(Sh(e,a),Sh(r,i)),Sh(e<<n|e>>>32-n,s)}function Oi(a,e,s,r,n,i,o){return Sw(e&s|~e&r,a,e,n,i,o)}function Ui(a,e,s,r,n,i,o){return Sw(e&r|s&~r,a,e,n,i,o)}function Qi(a,e,s,r,n,i,o){return Sw(e^s^r,a,e,n,i,o)}function Hi(a,e,s,r,n,i,o){return Sw(s^(e|~r),a,e,n,i,o)}function sI(a){var e,s=a.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=a.length;e+=64)kN(r,zW(a.substring(e-64,e)));a=a.substring(e-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<a.length;e++)n[e>>2]|=a.charCodeAt(e)<<(e%4<<3);if(n[e>>2]|=128<<(e%4<<3),e>55)for(kN(r,n),e=0;e<16;e++)n[e]=0;return n[14]=8*s,kN(r,n),r}function zW(a){var e,s=[];for(e=0;e<64;e+=4)s[e>>2]=a.charCodeAt(e)+(a.charCodeAt(e+1)<<8)+(a.charCodeAt(e+2)<<16)+(a.charCodeAt(e+3)<<24);return s}var fE="0123456789abcdef".split("");function $W(a){for(var e="",s=0;s<4;s++)e+=fE[a>>8*s+4&15]+fE[a>>8*s&15];return e}function qW(a){return String.fromCharCode(255&a,(65280&a)>>8,(16711680&a)>>16,(4278190080&a)>>24)}function i_(a){return sI(a).map(qW).join("")}var GW=(function(a){for(var e=0;e<a.length;e++)a[e]=$W(a[e]);return a.join("")})(sI("hello"))!="5d41402abc4b2a76b9719d911017c592";function Sh(a,e){if(GW){var s=(65535&a)+(65535&e);return(a>>16)+(e>>16)+(s>>16)<<16|65535&s}return a+e&4294967295}function o_(a,e){var s,r,n,i;if(a!==s){for(var o=(n=a,i=1+(256/a.length|0),new Array(i+1).join(n)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var m=l[c];u=(u+m+o.charCodeAt(c))%256,l[c]=l[u],l[u]=m}s=a,r=l}else l=r;var A=e.length,g=0,p=0,v="";for(c=0;c<A;c++)p=(p+(m=l[g=(g+1)%256]))%256,l[g]=l[p],l[p]=m,o=l[(l[g]+l[p])%256],v+=String.fromCharCode(e.charCodeAt(c)^o);return v}var pE={print:4,modify:8,copy:16,"annot-forms":32};function Rf(a,e,s,r){this.v=1,this.r=2;var n=192;a.forEach(function(l){if(pE.perm!==void 0)throw new Error("Invalid permission: "+l);n+=pE[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),o=(s+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^n)),this.encryptionKey=i_(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=o_(this.encryptionKey,this.padding)}function Of(a){if(/[^\u0000-\u00ff]/.test(a))throw new Error("Invalid PDF Name Object: "+a+", Only accept ASCII characters.");for(var e="",s=a.length,r=0;r<s;r++){var n=a.charCodeAt(r);e+=n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?"#"+("0"+n.toString(16)).slice(-2):a[r]}return e}function gE(a){if(ha(a)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(s,r,n){if(n=n||!1,typeof s!="string"||typeof r!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(s)||(e[s]={});var i=Math.random().toString(35);return e[s][i]=[r,!!n],i},this.unsubscribe=function(s){for(var r in e)if(e[r][s])return delete e[r][s],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(s){if(e.hasOwnProperty(s)){var r=Array.prototype.slice.call(arguments,1),n=[];for(var i in e[s]){var o=e[s][i];try{o[0].apply(a,r)}catch(l){sr.console&&Ca.error("jsPDF PubSub Error",l.message,l)}o[1]&&n.push(i)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function wv(a){if(!(this instanceof wv))return new wv(a);var e="opacity,stroke-opacity".split(",");for(var s in a)a.hasOwnProperty(s)&&e.indexOf(s)>=0&&(this[s]=a[s]);this.id="",this.objectNumber=-1}function rI(a,e){this.gState=a,this.matrix=e,this.id="",this.objectNumber=-1}function Om(a,e,s,r,n){if(!(this instanceof Om))return new Om(a,e,s,r,n);this.type=a==="axial"?2:3,this.coords=e,this.colors=s,rI.call(this,r,n)}function Gf(a,e,s,r,n){if(!(this instanceof Gf))return new Gf(a,e,s,r,n);this.boundingBox=a,this.xStep=e,this.yStep=s,this.stream="",this.cloneIndex=0,rI.call(this,r,n)}function Es(a){var e,s=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],n=arguments[2],i=arguments[3],o=[],l=1,c=16,u="S",m=null;ha(a=a||{})==="object"&&(s=a.orientation,r=a.unit||r,n=a.format||n,i=a.compress||a.compressPdf||i,(m=a.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),l=typeof a.userUnit=="number"?Math.abs(a.userUnit):1,a.precision!==void 0&&(e=a.precision),a.floatPrecision!==void 0&&(c=a.floatPrecision),u=a.defaultPathOperation||"S"),o=a.filters||(i===!0?["FlateEncode"]:o),r=r||"mm",s=(""+(s||"P")).toLowerCase();var A=a.putOnlyUsedFonts||!1,g={},p={internal:{},__private__:{}};p.__private__.PubSub=gE;var v="1.3",b=p.__private__.getPdfVersion=function(){return v};p.__private__.setPdfVersion=function(U){v=U};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return y};var w=p.__private__.getPageFormat=function(U){return y[U]};n=n||"a4";var B="compat",j="advanced",E=B;function S(){this.saveGraphicsState(),Ae(new ct(He,0,0,-He,0,Zl()*He).toString()+" cm"),this.setFontSize(this.getFontSize()/He),u="n",E=j}function T(){this.restoreGraphicsState(),u="S",E=B}var M=p.__private__.combineFontStyleAndFontWeight=function(U,pe){if(U=="bold"&&pe=="normal"||U=="bold"&&pe==400||U=="normal"&&pe=="italic"||U=="bold"&&pe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return pe&&(U=pe==400||pe==="normal"?U==="italic"?"italic":"normal":pe!=700&&pe!=="bold"||U!=="normal"?(pe==700?"bold":pe)+""+U:"bold"),U};p.advancedAPI=function(U){var pe=E===B;return pe&&S.call(this),typeof U!="function"||(U(this),pe&&T.call(this)),this},p.compatAPI=function(U){var pe=E===j;return pe&&T.call(this),typeof U!="function"||(U(this),pe&&S.call(this)),this},p.isAdvancedAPI=function(){return E===j};var D,P=function(U){if(E!==j)throw new Error(U+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Y=p.roundToPrecision=p.__private__.roundToPrecision=function(U,pe){var Ge=e||pe;if(isNaN(U)||isNaN(Ge))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return U.toFixed(Ge).replace(/0+$/,"")};D=p.hpf=p.__private__.hpf=typeof c=="number"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(U,c)}:c==="smart"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(U,U>-1&&U<1?16:5)}:function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(U,16)};var Q=p.f2=p.__private__.f2=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f2");return Y(U,2)},L=p.__private__.f3=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f3");return Y(U,3)},ae=p.scale=p.__private__.scale=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.scale");return E===B?U*He:E===j?U:void 0},ne=function(U){return ae((function(pe){return E===B?Zl()-pe:E===j?pe:void 0})(U))};p.__private__.setPrecision=p.setPrecision=function(U){typeof parseInt(U,10)=="number"&&(e=parseInt(U,10))};var V,O="00000000000000000000000000000000",X=p.__private__.getFileId=function(){return O},$=p.__private__.setFileId=function(U){return O=U!==void 0&&/^[a-fA-F0-9]{32}$/.test(U)?U.toUpperCase():O.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(vn=new Rf(m.userPermissions,m.userPassword,m.ownerPassword,O)),O};p.setFileId=function(U){return $(U),this},p.getFileId=function(){return X()};var H=p.__private__.convertDateToPDFDate=function(U){var pe=U.getTimezoneOffset(),Ge=pe<0?"+":"-",lt=Math.floor(Math.abs(pe/60)),Bt=Math.abs(pe%60),ss=[Ge,G(lt),"'",G(Bt),"'"].join("");return["D:",U.getFullYear(),G(U.getMonth()+1),G(U.getDate()),G(U.getHours()),G(U.getMinutes()),G(U.getSeconds()),ss].join("")},te=p.__private__.convertPDFDateToDate=function(U){var pe=parseInt(U.substr(2,4),10),Ge=parseInt(U.substr(6,2),10)-1,lt=parseInt(U.substr(8,2),10),Bt=parseInt(U.substr(10,2),10),ss=parseInt(U.substr(12,2),10),ms=parseInt(U.substr(14,2),10);return new Date(pe,Ge,lt,Bt,ss,ms,0)},K=p.__private__.setCreationDate=function(U){var pe;if(U===void 0&&(U=new Date),U instanceof Date)pe=H(U);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(U))throw new Error("Invalid argument passed to jsPDF.setCreationDate");pe=U}return V=pe},I=p.__private__.getCreationDate=function(U){var pe=V;return U==="jsDate"&&(pe=te(V)),pe};p.setCreationDate=function(U){return K(U),this},p.getCreationDate=function(U){return I(U)};var R,G=p.__private__.padd2=function(U){return("0"+parseInt(U)).slice(-2)},se=p.__private__.padd2Hex=function(U){return("00"+(U=U.toString())).substr(U.length)},le=0,ye=[],De=[],me=0,Te=[],we=[],st=!1,ce=De;p.__private__.setCustomOutputDestination=function(U){st=!0,ce=U};var tt=function(U){st||(ce=U)};p.__private__.resetCustomOutputDestination=function(){st=!1,ce=De};var Ae=p.__private__.out=function(U){return U=U.toString(),me+=U.length+1,ce.push(U),ce},gt=p.__private__.write=function(U){return Ae(arguments.length===1?U.toString():Array.prototype.join.call(arguments," "))},q=p.__private__.getArrayBuffer=function(U){for(var pe=U.length,Ge=new ArrayBuffer(pe),lt=new Uint8Array(Ge);pe--;)lt[pe]=U.charCodeAt(pe);return Ge},Qt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Qt};var yt=a.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(U){return yt=E===j?U/He:U,this};var Oe,ze=p.__private__.getFontSize=p.getFontSize=function(){return E===B?yt:yt*He},Le=a.R2L||!1;p.__private__.setR2L=p.setR2L=function(U){return Le=U,this},p.__private__.getR2L=p.getR2L=function(){return Le};var oe,he=p.__private__.setZoomMode=function(U){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(U))Oe=U;else if(isNaN(U)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(U)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+U+'" is not recognized.');Oe=U}else Oe=parseInt(U,10)};p.__private__.getZoomMode=function(){return Oe};var W,ve=p.__private__.setPageMode=function(U){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(U)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+U+'" is not recognized.');oe=U};p.__private__.getPageMode=function(){return oe};var Qe=p.__private__.setLayoutMode=function(U){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(U)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+U+'" is not recognized.');W=U};p.__private__.getLayoutMode=function(){return W},p.__private__.setDisplayMode=p.setDisplayMode=function(U,pe,Ge){return he(U),Qe(pe),ve(Ge),this};var Ze={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(U){if(Object.keys(Ze).indexOf(U)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ze[U]},p.__private__.getDocumentProperties=function(){return Ze},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(U){for(var pe in Ze)Ze.hasOwnProperty(pe)&&U[pe]&&(Ze[pe]=U[pe]);return this},p.__private__.setDocumentProperty=function(U,pe){if(Object.keys(Ze).indexOf(U)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ze[U]=pe};var J,He,xt,Xe,Ct,_e={},Se={},Ve=[],et={},vt={},Mt={},Ye={},Et=null,Gt=0,ee=[],Ie=new gE(p),ue=a.hotfixes||[],fe={},xe={},Me=[],ct=function U(pe,Ge,lt,Bt,ss,ms){if(!(this instanceof U))return new U(pe,Ge,lt,Bt,ss,ms);isNaN(pe)&&(pe=1),isNaN(Ge)&&(Ge=0),isNaN(lt)&&(lt=0),isNaN(Bt)&&(Bt=1),isNaN(ss)&&(ss=0),isNaN(ms)&&(ms=0),this._matrix=[pe,Ge,lt,Bt,ss,ms]};Object.defineProperty(ct.prototype,"sx",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(ct.prototype,"shy",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(ct.prototype,"shx",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(ct.prototype,"sy",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(ct.prototype,"tx",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(ct.prototype,"ty",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(ct.prototype,"a",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(ct.prototype,"b",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(ct.prototype,"c",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(ct.prototype,"d",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(ct.prototype,"e",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(ct.prototype,"f",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(ct.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ct.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ct.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ct.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ct.prototype.join=function(U){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(U)},ct.prototype.multiply=function(U){var pe=U.sx*this.sx+U.shy*this.shx,Ge=U.sx*this.shy+U.shy*this.sy,lt=U.shx*this.sx+U.sy*this.shx,Bt=U.shx*this.shy+U.sy*this.sy,ss=U.tx*this.sx+U.ty*this.shx+this.tx,ms=U.tx*this.shy+U.ty*this.sy+this.ty;return new ct(pe,Ge,lt,Bt,ss,ms)},ct.prototype.decompose=function(){var U=this.sx,pe=this.shy,Ge=this.shx,lt=this.sy,Bt=this.tx,ss=this.ty,ms=Math.sqrt(U*U+pe*pe),Ts=(U/=ms)*Ge+(pe/=ms)*lt;Ge-=U*Ts,lt-=pe*Ts;var Rs=Math.sqrt(Ge*Ge+lt*lt);return Ts/=Rs,U*(lt/=Rs)<pe*(Ge/=Rs)&&(U=-U,pe=-pe,Ts=-Ts,ms=-ms),{scale:new ct(ms,0,0,Rs,0,0),translate:new ct(1,0,0,1,Bt,ss),rotate:new ct(U,pe,-pe,U,0,0),skew:new ct(1,0,Ts,1,0,0)}},ct.prototype.toString=function(U){return this.join(" ")},ct.prototype.inversed=function(){var U=this.sx,pe=this.shy,Ge=this.shx,lt=this.sy,Bt=this.tx,ss=this.ty,ms=1/(U*lt-pe*Ge),Ts=lt*ms,Rs=-pe*ms,Zs=-Ge*ms,nr=U*ms;return new ct(Ts,Rs,Zs,nr,-Ts*Bt-Zs*ss,-Rs*Bt-nr*ss)},ct.prototype.applyToPoint=function(U){var pe=U.x*this.sx+U.y*this.shx+this.tx,Ge=U.x*this.shy+U.y*this.sy+this.ty;return new Ao(pe,Ge)},ct.prototype.applyToRectangle=function(U){var pe=this.applyToPoint(U),Ge=this.applyToPoint(new Ao(U.x+U.w,U.y+U.h));return new Wl(pe.x,pe.y,Ge.x-pe.x,Ge.y-pe.y)},ct.prototype.clone=function(){var U=this.sx,pe=this.shy,Ge=this.shx,lt=this.sy,Bt=this.tx,ss=this.ty;return new ct(U,pe,Ge,lt,Bt,ss)},p.Matrix=ct;var Pt=p.matrixMult=function(U,pe){return pe.multiply(U)},ts=new ct(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=ts;var as=function(U,pe){if(!vt[U]){var Ge=(pe instanceof Om?"Sh":"P")+(Object.keys(et).length+1).toString(10);pe.id=Ge,vt[U]=Ge,et[Ge]=pe,Ie.publish("addPattern",pe)}};p.ShadingPattern=Om,p.TilingPattern=Gf,p.addShadingPattern=function(U,pe){return P("addShadingPattern()"),as(U,pe),this},p.beginTilingPattern=function(U){P("beginTilingPattern()"),Id(U.boundingBox[0],U.boundingBox[1],U.boundingBox[2]-U.boundingBox[0],U.boundingBox[3]-U.boundingBox[1],U.matrix)},p.endTilingPattern=function(U,pe){P("endTilingPattern()"),pe.stream=we[R].join(`
`),as(U,pe),Ie.publish("endTilingPattern",pe),Me.pop().restore()};var Zt,Be=p.__private__.newObject=function(){var U=mt();return Nt(U,!0),U},mt=p.__private__.newObjectDeferred=function(){return le++,ye[le]=function(){return me},le},Nt=function(U,pe){return pe=typeof pe=="boolean"&&pe,ye[U]=me,pe&&Ae(U+" 0 obj"),U},Ne=p.__private__.newAdditionalObject=function(){var U={objId:mt(),content:""};return Te.push(U),U},Je=mt(),ht=mt(),It=p.__private__.decodeColorString=function(U){var pe=U.split(" ");if(pe.length!==2||pe[1]!=="g"&&pe[1]!=="G")pe.length!==5||pe[4]!=="k"&&pe[4]!=="K"||(pe=[(1-pe[0])*(1-pe[3]),(1-pe[1])*(1-pe[3]),(1-pe[2])*(1-pe[3]),"r"]);else{var Ge=parseFloat(pe[0]);pe=[Ge,Ge,Ge,"r"]}for(var lt="#",Bt=0;Bt<3;Bt++)lt+=("0"+Math.floor(255*parseFloat(pe[Bt])).toString(16)).slice(-2);return lt},Pe=p.__private__.encodeColorString=function(U){var pe;typeof U=="string"&&(U={ch1:U});var Ge=U.ch1,lt=U.ch2,Bt=U.ch3,ss=U.ch4,ms=U.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ge=="string"&&Ge.charAt(0)!=="#"){var Ts=new tI(Ge);if(Ts.ok)Ge=Ts.toHex();else if(!/^\d*\.?\d*$/.test(Ge))throw new Error('Invalid color "'+Ge+'" passed to jsPDF.encodeColorString.')}if(typeof Ge=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ge)&&(Ge="#"+Ge[1]+Ge[1]+Ge[2]+Ge[2]+Ge[3]+Ge[3]),typeof Ge=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ge)){var Rs=parseInt(Ge.substr(1),16);Ge=Rs>>16&255,lt=Rs>>8&255,Bt=255&Rs}if(lt===void 0||ss===void 0&&Ge===lt&&lt===Bt)pe=typeof Ge=="string"?Ge+" "+ms[0]:U.precision===2?Q(Ge/255)+" "+ms[0]:L(Ge/255)+" "+ms[0];else if(ss===void 0||ha(ss)==="object"){if(ss&&!isNaN(ss.a)&&ss.a===0)return["1.","1.","1.",ms[1]].join(" ");pe=typeof Ge=="string"?[Ge,lt,Bt,ms[1]].join(" "):U.precision===2?[Q(Ge/255),Q(lt/255),Q(Bt/255),ms[1]].join(" "):[L(Ge/255),L(lt/255),L(Bt/255),ms[1]].join(" ")}else pe=typeof Ge=="string"?[Ge,lt,Bt,ss,ms[2]].join(" "):U.precision===2?[Q(Ge),Q(lt),Q(Bt),Q(ss),ms[2]].join(" "):[L(Ge),L(lt),L(Bt),L(ss),ms[2]].join(" ");return pe},Ke=p.__private__.getFilters=function(){return o},nt=p.__private__.putStream=function(U){var pe=(U=U||{}).data||"",Ge=U.filters||Ke(),lt=U.alreadyAppliedFilters||[],Bt=U.addLength1||!1,ss=pe.length,ms=U.objectId,Ts=function(wn){return wn};if(m!==null&&ms===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(Ts=vn.encryptor(ms,0));var Rs={};Ge===!0&&(Ge=["FlateEncode"]);var Zs=U.additionalKeyValues||[],nr=(Rs=Es.API.processDataByFilters!==void 0?Es.API.processDataByFilters(pe,Ge):{data:pe,reverseChain:[]}).reverseChain+(Array.isArray(lt)?lt.join(" "):lt.toString());if(Rs.data.length!==0&&(Zs.push({key:"Length",value:Rs.data.length}),Bt===!0&&Zs.push({key:"Length1",value:ss})),nr.length!=0)if(nr.split("/").length-1==1)Zs.push({key:"Filter",value:nr});else{Zs.push({key:"Filter",value:"["+nr+"]"});for(var Er=0;Er<Zs.length;Er+=1)if(Zs[Er].key==="DecodeParms"){for(var Fa=[],Xa=0;Xa<Rs.reverseChain.split("/").length-1;Xa+=1)Fa.push("null");Fa.push(Zs[Er].value),Zs[Er].value="["+Fa.join(" ")+"]"}}Ae("<<");for(var fa=0;fa<Zs.length;fa++)Ae("/"+Zs[fa].key+" "+Zs[fa].value);Ae(">>"),Rs.data.length!==0&&(Ae("stream"),Ae(Ts(Rs.data)),Ae("endstream"))},zt=p.__private__.putPage=function(U){var pe=U.number,Ge=U.data,lt=U.objId,Bt=U.contentsObjId;Nt(lt,!0),Ae("<</Type /Page"),Ae("/Parent "+U.rootDictionaryObjId+" 0 R"),Ae("/Resources "+U.resourceDictionaryObjId+" 0 R"),Ae("/MediaBox ["+parseFloat(D(U.mediaBox.bottomLeftX))+" "+parseFloat(D(U.mediaBox.bottomLeftY))+" "+D(U.mediaBox.topRightX)+" "+D(U.mediaBox.topRightY)+"]"),U.cropBox!==null&&Ae("/CropBox ["+D(U.cropBox.bottomLeftX)+" "+D(U.cropBox.bottomLeftY)+" "+D(U.cropBox.topRightX)+" "+D(U.cropBox.topRightY)+"]"),U.bleedBox!==null&&Ae("/BleedBox ["+D(U.bleedBox.bottomLeftX)+" "+D(U.bleedBox.bottomLeftY)+" "+D(U.bleedBox.topRightX)+" "+D(U.bleedBox.topRightY)+"]"),U.trimBox!==null&&Ae("/TrimBox ["+D(U.trimBox.bottomLeftX)+" "+D(U.trimBox.bottomLeftY)+" "+D(U.trimBox.topRightX)+" "+D(U.trimBox.topRightY)+"]"),U.artBox!==null&&Ae("/ArtBox ["+D(U.artBox.bottomLeftX)+" "+D(U.artBox.bottomLeftY)+" "+D(U.artBox.topRightX)+" "+D(U.artBox.topRightY)+"]"),typeof U.userUnit=="number"&&U.userUnit!==1&&Ae("/UserUnit "+U.userUnit),Ie.publish("putPage",{objId:lt,pageContext:ee[pe],pageNumber:pe,page:Ge}),Ae("/Contents "+Bt+" 0 R"),Ae(">>"),Ae("endobj");var ss=Ge.join(`
`);return E===j&&(ss+=`
Q`),Nt(Bt,!0),nt({data:ss,filters:Ke(),objectId:Bt}),Ae("endobj"),lt},is=p.__private__.putPages=function(){var U,pe,Ge=[];for(U=1;U<=Gt;U++)ee[U].objId=mt(),ee[U].contentsObjId=mt();for(U=1;U<=Gt;U++)Ge.push(zt({number:U,data:we[U],objId:ee[U].objId,contentsObjId:ee[U].contentsObjId,mediaBox:ee[U].mediaBox,cropBox:ee[U].cropBox,bleedBox:ee[U].bleedBox,trimBox:ee[U].trimBox,artBox:ee[U].artBox,userUnit:ee[U].userUnit,rootDictionaryObjId:Je,resourceDictionaryObjId:ht}));Nt(Je,!0),Ae("<</Type /Pages");var lt="/Kids [";for(pe=0;pe<Gt;pe++)lt+=Ge[pe]+" 0 R ";Ae(lt+"]"),Ae("/Count "+Gt),Ae(">>"),Ae("endobj"),Ie.publish("postPutPages")},ke=function(U){Ie.publish("putFont",{font:U,out:Ae,newObject:Be,putStream:nt}),U.isAlreadyPutted!==!0&&(U.objectNumber=Be(),Ae("<<"),Ae("/Type /Font"),Ae("/BaseFont /"+Of(U.postScriptName)),Ae("/Subtype /Type1"),typeof U.encoding=="string"&&Ae("/Encoding /"+U.encoding),Ae("/FirstChar 32"),Ae("/LastChar 255"),Ae(">>"),Ae("endobj"))},de=function(U){U.objectNumber=Be();var pe=[];pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Form"}),pe.push({key:"BBox",value:"["+[D(U.x),D(U.y),D(U.x+U.width),D(U.y+U.height)].join(" ")+"]"}),pe.push({key:"Matrix",value:"["+U.matrix.toString()+"]"});var Ge=U.pages[1].join(`
`);nt({data:Ge,additionalKeyValues:pe,objectId:U.objectNumber}),Ae("endobj")},ie=function(U,pe){pe||(pe=21);var Ge=Be(),lt=(function(ms,Ts){var Rs,Zs=[],nr=1/(Ts-1);for(Rs=0;Rs<1;Rs+=nr)Zs.push(Rs);if(Zs.push(1),ms[0].offset!=0){var Er={offset:0,color:ms[0].color};ms.unshift(Er)}if(ms[ms.length-1].offset!=1){var Fa={offset:1,color:ms[ms.length-1].color};ms.push(Fa)}for(var Xa="",fa=0,wn=0;wn<Zs.length;wn++){for(Rs=Zs[wn];Rs>ms[fa+1].offset;)fa++;var dn=ms[fa].offset,Kn=(Rs-dn)/(ms[fa+1].offset-dn),ec=ms[fa].color,Vo=ms[fa+1].color;Xa+=se(Math.round((1-Kn)*ec[0]+Kn*Vo[0]).toString(16))+se(Math.round((1-Kn)*ec[1]+Kn*Vo[1]).toString(16))+se(Math.round((1-Kn)*ec[2]+Kn*Vo[2]).toString(16))}return Xa.trim()})(U.colors,pe),Bt=[];Bt.push({key:"FunctionType",value:"0"}),Bt.push({key:"Domain",value:"[0.0 1.0]"}),Bt.push({key:"Size",value:"["+pe+"]"}),Bt.push({key:"BitsPerSample",value:"8"}),Bt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Bt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nt({data:lt,additionalKeyValues:Bt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ge}),Ae("endobj"),U.objectNumber=Be(),Ae("<< /ShadingType "+U.type),Ae("/ColorSpace /DeviceRGB");var ss="/Coords ["+D(parseFloat(U.coords[0]))+" "+D(parseFloat(U.coords[1]))+" ";U.type===2?ss+=D(parseFloat(U.coords[2]))+" "+D(parseFloat(U.coords[3])):ss+=D(parseFloat(U.coords[2]))+" "+D(parseFloat(U.coords[3]))+" "+D(parseFloat(U.coords[4]))+" "+D(parseFloat(U.coords[5])),Ae(ss+="]"),U.matrix&&Ae("/Matrix ["+U.matrix.toString()+"]"),Ae("/Function "+Ge+" 0 R"),Ae("/Extend [true true]"),Ae(">>"),Ae("endobj")},Ue=function(U,pe){var Ge=mt(),lt=Be();pe.push({resourcesOid:Ge,objectOid:lt}),U.objectNumber=lt;var Bt=[];Bt.push({key:"Type",value:"/Pattern"}),Bt.push({key:"PatternType",value:"1"}),Bt.push({key:"PaintType",value:"1"}),Bt.push({key:"TilingType",value:"1"}),Bt.push({key:"BBox",value:"["+U.boundingBox.map(D).join(" ")+"]"}),Bt.push({key:"XStep",value:D(U.xStep)}),Bt.push({key:"YStep",value:D(U.yStep)}),Bt.push({key:"Resources",value:Ge+" 0 R"}),U.matrix&&Bt.push({key:"Matrix",value:"["+U.matrix.toString()+"]"}),nt({data:U.stream,additionalKeyValues:Bt,objectId:U.objectNumber}),Ae("endobj")},bt=function(U){for(var pe in U.objectNumber=Be(),Ae("<<"),U)switch(pe){case"opacity":Ae("/ca "+Q(U[pe]));break;case"stroke-opacity":Ae("/CA "+Q(U[pe]))}Ae(">>"),Ae("endobj")},ot=function(U){Nt(U.resourcesOid,!0),Ae("<<"),Ae("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var pe in Ae("/Font <<"),_e)_e.hasOwnProperty(pe)&&(A===!1||A===!0&&g.hasOwnProperty(pe))&&Ae("/"+pe+" "+_e[pe].objectNumber+" 0 R");Ae(">>")})(),(function(){if(Object.keys(et).length>0){for(var pe in Ae("/Shading <<"),et)et.hasOwnProperty(pe)&&et[pe]instanceof Om&&et[pe].objectNumber>=0&&Ae("/"+pe+" "+et[pe].objectNumber+" 0 R");Ie.publish("putShadingPatternDict"),Ae(">>")}})(),(function(pe){if(Object.keys(et).length>0){for(var Ge in Ae("/Pattern <<"),et)et.hasOwnProperty(Ge)&&et[Ge]instanceof p.TilingPattern&&et[Ge].objectNumber>=0&&et[Ge].objectNumber<pe&&Ae("/"+Ge+" "+et[Ge].objectNumber+" 0 R");Ie.publish("putTilingPatternDict"),Ae(">>")}})(U.objectOid),(function(){if(Object.keys(Mt).length>0){var pe;for(pe in Ae("/ExtGState <<"),Mt)Mt.hasOwnProperty(pe)&&Mt[pe].objectNumber>=0&&Ae("/"+pe+" "+Mt[pe].objectNumber+" 0 R");Ie.publish("putGStateDict"),Ae(">>")}})(),(function(){for(var pe in Ae("/XObject <<"),fe)fe.hasOwnProperty(pe)&&fe[pe].objectNumber>=0&&Ae("/"+pe+" "+fe[pe].objectNumber+" 0 R");Ie.publish("putXobjectDict"),Ae(">>")})(),Ae(">>"),Ae("endobj")},Dt=function(U){Se[U.fontName]=Se[U.fontName]||{},Se[U.fontName][U.fontStyle]=U.id},jt=function(U,pe,Ge,lt,Bt){var ss={id:"F"+(Object.keys(_e).length+1).toString(10),postScriptName:U,fontName:pe,fontStyle:Ge,encoding:lt,isStandardFont:Bt||!1,metadata:{}};return Ie.publish("addFont",{font:ss,instance:this}),_e[ss.id]=ss,Dt(ss),ss.id},kt=p.__private__.pdfEscape=p.pdfEscape=function(U,pe){return(function(Ge,lt){var Bt,ss,ms,Ts,Rs,Zs,nr,Er,Fa;if(ms=(lt=lt||{}).sourceEncoding||"Unicode",Rs=lt.outputEncoding,(lt.autoencode||Rs)&&_e[J].metadata&&_e[J].metadata[ms]&&_e[J].metadata[ms].encoding&&(Ts=_e[J].metadata[ms].encoding,!Rs&&_e[J].encoding&&(Rs=_e[J].encoding),!Rs&&Ts.codePages&&(Rs=Ts.codePages[0]),typeof Rs=="string"&&(Rs=Ts[Rs]),Rs)){for(nr=!1,Zs=[],Bt=0,ss=Ge.length;Bt<ss;Bt++)(Er=Rs[Ge.charCodeAt(Bt)])?Zs.push(String.fromCharCode(Er)):Zs.push(Ge[Bt]),Zs[Bt].charCodeAt(0)>>8&&(nr=!0);Ge=Zs.join("")}for(Bt=Ge.length;nr===void 0&&Bt!==0;)Ge.charCodeAt(Bt-1)>>8&&(nr=!0),Bt--;if(!nr)return Ge;for(Zs=lt.noBOM?[]:[254,255],Bt=0,ss=Ge.length;Bt<ss;Bt++){if((Fa=(Er=Ge.charCodeAt(Bt))>>8)>>8)throw new Error("Character at position "+Bt+" of string '"+Ge+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zs.push(Fa),Zs.push(Er-(Fa<<8))}return String.fromCharCode.apply(void 0,Zs)})(U,pe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},gs=p.__private__.beginPage=function(U){we[++Gt]=[],ee[Gt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(U[0]),topRightY:Number(U[1])}},Is(Gt),tt(we[R])},Xs=function(U,pe){var Ge,lt,Bt;switch(s=pe||s,typeof U=="string"&&(Ge=w(U.toLowerCase()),Array.isArray(Ge)&&(lt=Ge[0],Bt=Ge[1])),Array.isArray(U)&&(lt=U[0]*He,Bt=U[1]*He),isNaN(lt)&&(lt=n[0],Bt=n[1]),(lt>14400||Bt>14400)&&(Ca.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),lt=Math.min(14400,lt),Bt=Math.min(14400,Bt)),n=[lt,Bt],s.substr(0,1)){case"l":Bt>lt&&(n=[Bt,lt]);break;case"p":lt>Bt&&(n=[Bt,lt])}gs(n),Ws(Dd),Ae(Ji),Lu!==0&&Ae(Lu+" J"),Mn!==0&&Ae(Mn+" j"),Ie.publish("addPage",{pageNumber:Gt})},Ss=function(U){U>0&&U<=Gt&&(we.splice(U,1),ee.splice(U,1),Gt--,R>Gt&&(R=Gt),this.setPage(R))},Is=function(U){U>0&&U<=Gt&&(R=U)},bs=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return we.length-1},ds=function(U,pe,Ge){var lt,Bt=void 0;return Ge=Ge||{},U=U!==void 0?U:_e[J].fontName,pe=pe!==void 0?pe:_e[J].fontStyle,lt=U.toLowerCase(),Se[lt]!==void 0&&Se[lt][pe]!==void 0?Bt=Se[lt][pe]:Se[U]!==void 0&&Se[U][pe]!==void 0?Bt=Se[U][pe]:Ge.disableWarning===!1&&Ca.warn("Unable to look up font label for font '"+U+"', '"+pe+"'. Refer to getFontList() for available fonts."),Bt||Ge.noFallback||(Bt=Se.times[pe])==null&&(Bt=Se.times.normal),Bt},xs=p.__private__.putInfo=function(){var U=Be(),pe=function(lt){return lt};for(var Ge in m!==null&&(pe=vn.encryptor(U,0)),Ae("<<"),Ae("/Producer ("+kt(pe("jsPDF "+Es.version))+")"),Ze)Ze.hasOwnProperty(Ge)&&Ze[Ge]&&Ae("/"+Ge.substr(0,1).toUpperCase()+Ge.substr(1)+" ("+kt(pe(Ze[Ge]))+")");Ae("/CreationDate ("+kt(pe(V))+")"),Ae(">>"),Ae("endobj")},xr=p.__private__.putCatalog=function(U){var pe=(U=U||{}).rootDictionaryObjId||Je;switch(Be(),Ae("<<"),Ae("/Type /Catalog"),Ae("/Pages "+pe+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":Ae("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ae("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ae("/OpenAction [3 0 R /Fit]");break;case"original":Ae("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ge=""+Oe;Ge.substr(Ge.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&Ae("/OpenAction [3 0 R /XYZ null null "+Q(Oe)+"]")}switch(W||(W="continuous"),W){case"continuous":Ae("/PageLayout /OneColumn");break;case"single":Ae("/PageLayout /SinglePage");break;case"two":case"twoleft":Ae("/PageLayout /TwoColumnLeft");break;case"tworight":Ae("/PageLayout /TwoColumnRight")}oe&&Ae("/PageMode /"+oe),Ie.publish("putCatalog"),Ae(">>"),Ae("endobj")},qr=p.__private__.putTrailer=function(){Ae("trailer"),Ae("<<"),Ae("/Size "+(le+1)),Ae("/Root "+le+" 0 R"),Ae("/Info "+(le-1)+" 0 R"),m!==null&&Ae("/Encrypt "+vn.oid+" 0 R"),Ae("/ID [ <"+O+"> <"+O+"> ]"),Ae(">>")},mr=p.__private__.putHeader=function(){Ae("%PDF-"+v),Ae("%")},Uo=p.__private__.putXRef=function(){var U="0000000000";Ae("xref"),Ae("0 "+(le+1)),Ae("0000000000 65535 f ");for(var pe=1;pe<=le;pe++)typeof ye[pe]=="function"?Ae((U+ye[pe]()).slice(-10)+" 00000 n "):ye[pe]!==void 0?Ae((U+ye[pe]).slice(-10)+" 00000 n "):Ae("0000000000 00000 n ")},Ln=p.__private__.buildDocument=function(){var U;le=0,me=0,De=[],ye=[],Te=[],Je=mt(),ht=mt(),tt(De),Ie.publish("buildDocument"),mr(),is(),(function(){Ie.publish("putAdditionalObjects");for(var Ge=0;Ge<Te.length;Ge++){var lt=Te[Ge];Nt(lt.objId,!0),Ae(lt.content),Ae("endobj")}Ie.publish("postPutAdditionalObjects")})(),U=[],(function(){for(var Ge in _e)_e.hasOwnProperty(Ge)&&(A===!1||A===!0&&g.hasOwnProperty(Ge))&&ke(_e[Ge])})(),(function(){var Ge;for(Ge in Mt)Mt.hasOwnProperty(Ge)&&bt(Mt[Ge])})(),(function(){for(var Ge in fe)fe.hasOwnProperty(Ge)&&de(fe[Ge])})(),(function(Ge){var lt;for(lt in et)et.hasOwnProperty(lt)&&(et[lt]instanceof Om?ie(et[lt]):et[lt]instanceof Gf&&Ue(et[lt],Ge))})(U),Ie.publish("putResources"),U.forEach(ot),ot({resourcesOid:ht,objectOid:Number.MAX_SAFE_INTEGER}),Ie.publish("postPutResources"),m!==null&&(vn.oid=Be(),Ae("<<"),Ae("/Filter /Standard"),Ae("/V "+vn.v),Ae("/R "+vn.r),Ae("/U <"+vn.toHexString(vn.U)+">"),Ae("/O <"+vn.toHexString(vn.O)+">"),Ae("/P "+vn.P),Ae(">>"),Ae("endobj")),xs(),xr();var pe=me;return Uo(),qr(),Ae("startxref"),Ae(""+pe),Ae("%%EOF"),tt(we[R]),De.join(`
`)},ho=p.__private__.getBlob=function(U){return new Blob([q(U)],{type:"application/pdf"})},Xh=p.output=p.__private__.output=(Zt=function(U,pe){switch(typeof(pe=pe||{})=="string"?pe={filename:pe}:pe.filename=pe.filename||"generated.pdf",U){case void 0:return Ln();case"save":p.save(pe.filename);break;case"arraybuffer":return q(Ln());case"blob":return ho(Ln());case"bloburi":case"bloburl":if(sr.URL!==void 0&&typeof sr.URL.createObjectURL=="function")return sr.URL&&sr.URL.createObjectURL(ho(Ln()))||void 0;Ca.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ge="",lt=Ln();try{Ge=AE(lt)}catch{Ge=AE(unescape(encodeURIComponent(lt)))}return"data:application/pdf;filename="+pe.filename+";base64,"+Ge;case"pdfobjectnewwindow":if(Object.prototype.toString.call(sr)==="[object Window]"){var Bt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ss=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';pe.pdfObjectUrl&&(Bt=pe.pdfObjectUrl,ss="");var ms='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Bt+'"'+ss+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(pe)+");<\/script></body></html>",Ts=sr.open();return Ts!==null&&Ts.document.write(ms),Ts}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(sr)==="[object Window]"){var Rs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(pe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+pe.filename+'" width="500px" height="400px" /></body></html>',Zs=sr.open();if(Zs!==null){Zs.document.write(Rs);var nr=this;Zs.document.documentElement.querySelector("#pdfViewer").onload=function(){Zs.document.title=pe.filename,Zs.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(nr.output("bloburl"))}}return Zs}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(sr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Er='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",pe)+'"></iframe></body></html>',Fa=sr.open();if(Fa!==null&&(Fa.document.write(Er),Fa.document.title=pe.filename),Fa||typeof safari>"u")return Fa;break;case"datauri":case"dataurl":return sr.document.location.href=this.output("datauristring",pe);default:return null}},Zt.foo=function(){try{return Zt.apply(this,arguments)}catch(Ge){var U=Ge.stack||"";~U.indexOf(" at ")&&(U=U.split(" at ")[1]);var pe="Error in function "+U.split(`
`)[0].split("<")[0]+": "+Ge.message;if(!sr.console)throw new Error(pe);sr.console.error(pe,Ge),sr.alert&&alert(pe)}},Zt.foo.bar=Zt,Zt.foo),bi=function(U){return Array.isArray(ue)===!0&&ue.indexOf(U)>-1};switch(r){case"pt":He=1;break;case"mm":He=72/25.4;break;case"cm":He=72/2.54;break;case"in":He=72;break;case"px":He=bi("px_scaling")==1?.75:96/72;break;case"pc":case"em":He=12;break;case"ex":He=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);He=r}var vn=null;K(),$();var cn=p.__private__.getPageInfo=p.getPageInfo=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ee[U].objId,pageNumber:U,pageContext:ee[U]}},Pu=p.__private__.getPageInfoByObjId=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var pe in ee)if(ee[pe].objId===U)break;return cn(pe)},CA=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:ee[R].objId,pageNumber:R,pageContext:ee[R]}};p.addPage=function(){return Xs.apply(this,arguments),this},p.setPage=function(){return Is.apply(this,arguments),tt.call(this,we[R]),this},p.insertPage=function(U){return this.addPage(),this.movePage(R,U),this},p.movePage=function(U,pe){var Ge,lt;if(U>pe){Ge=we[U],lt=ee[U];for(var Bt=U;Bt>pe;Bt--)we[Bt]=we[Bt-1],ee[Bt]=ee[Bt-1];we[pe]=Ge,ee[pe]=lt,this.setPage(pe)}else if(U<pe){Ge=we[U],lt=ee[U];for(var ss=U;ss<pe;ss++)we[ss]=we[ss+1],ee[ss]=ee[ss+1];we[pe]=Ge,ee[pe]=lt,this.setPage(pe)}return this},p.deletePage=function(){return Ss.apply(this,arguments),this},p.__private__.text=p.text=function(U,pe,Ge,lt,Bt){var ss,ms,Ts,Rs,Zs,nr,Er,Fa,Xa,fa=(lt=lt||{}).scope||this;if(typeof U=="number"&&typeof pe=="number"&&(typeof Ge=="string"||Array.isArray(Ge))){var wn=Ge;Ge=pe,pe=U,U=wn}if(arguments[3]instanceof ct==0?(Ts=arguments[4],Rs=arguments[5],ha(Er=arguments[3])==="object"&&Er!==null||(typeof Ts=="string"&&(Rs=Ts,Ts=null),typeof Er=="string"&&(Rs=Er,Er=null),typeof Er=="number"&&(Ts=Er,Er=null),lt={flags:Er,angle:Ts,align:Rs})):(P("The transform parameter of text() with a Matrix value"),Xa=Bt),isNaN(pe)||isNaN(Ge)||U==null)throw new Error("Invalid arguments passed to jsPDF.text");if(U.length===0)return fa;var dn,Kn="",ec=typeof lt.lineHeightFactor=="number"?lt.lineHeightFactor:Gl,Vo=fa.internal.scaleFactor;function tc(Qr){return Qr=Qr.split("	").join(Array(lt.TabLen||9).join(" ")),kt(Qr,Er)}function im(Qr){for(var Fr,pa=Qr.concat(),Za=[],_l=pa.length;_l--;)typeof(Fr=pa.shift())=="string"?Za.push(Fr):Array.isArray(Qr)&&(Fr.length===1||Fr[1]===void 0&&Fr[2]===void 0)?Za.push(Fr[0]):Za.push([Fr[0],Fr[1],Fr[2]]);return Za}function Ru(Qr,Fr){var pa;if(typeof Qr=="string")pa=Fr(Qr)[0];else if(Array.isArray(Qr)){for(var Za,_l,Go=Qr.concat(),Od=[],cm=Go.length;cm--;)typeof(Za=Go.shift())=="string"?Od.push(Fr(Za)[0]):Array.isArray(Za)&&typeof Za[0]=="string"&&(_l=Fr(Za[0],Za[1],Za[2]),Od.push([_l[0],_l[1],_l[2]]));pa=Od}return pa}var xl=!1,zo=!0;if(typeof U=="string")xl=!0;else if(Array.isArray(U)){var Md=U.concat();ms=[];for(var sc,Rn=Md.length;Rn--;)(typeof(sc=Md.shift())!="string"||Array.isArray(sc)&&typeof sc[0]!="string")&&(zo=!1);xl=zo}if(xl===!1)throw new Error('Type of text must be string or Array. "'+U+'" is not recognized.');typeof U=="string"&&(U=U.match(/[\r?\n]/)?U.split(/\r\n|\r|\n/g):[U]);var Ic=yt/fa.internal.scaleFactor,Lc=Ic*(ec-1);switch(lt.baseline){case"bottom":Ge-=Lc;break;case"top":Ge+=Ic-Lc;break;case"hanging":Ge+=Ic-2*Lc;break;case"middle":Ge+=Ic/2-Lc}if((nr=lt.maxWidth||0)>0&&(typeof U=="string"?U=fa.splitTextToSize(U,nr):Object.prototype.toString.call(U)==="[object Array]"&&(U=U.reduce(function(Qr,Fr){return Qr.concat(fa.splitTextToSize(Fr,nr))},[]))),ss={text:U,x:pe,y:Ge,options:lt,mutex:{pdfEscape:kt,activeFontKey:J,fonts:_e,activeFontSize:yt}},Ie.publish("preProcessText",ss),U=ss.text,Ts=(lt=ss.options).angle,Xa instanceof ct==0&&Ts&&typeof Ts=="number"){Ts*=Math.PI/180,lt.rotationDirection===0&&(Ts=-Ts),E===j&&(Ts=-Ts);var Ou=Math.cos(Ts),bl=Math.sin(Ts);Xa=new ct(Ou,bl,-bl,Ou,0,0)}else Ts&&Ts instanceof ct&&(Xa=Ts);E!==j||Xa||(Xa=ts),(Zs=lt.charSpace||mo)!==void 0&&(Kn+=D(ae(Zs))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Fa=lt.horizontalScale)!==void 0&&(Kn+=D(100*Fa)+` Tz
`),lt.lang;var vi=-1,rc=lt.renderingMode!==void 0?lt.renderingMode:lt.stroke,Uu=fa.internal.getCurrentPageInfo().pageContext;switch(rc){case 0:case!1:case"fill":vi=0;break;case 1:case!0:case"stroke":vi=1;break;case 2:case"fillThenStroke":vi=2;break;case 3:case"invisible":vi=3;break;case 4:case"fillAndAddForClipping":vi=4;break;case 5:case"strokeAndAddPathForClipping":vi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":vi=6;break;case 7:case"addToPathForClipping":vi=7}var om=Uu.usedRenderingMode!==void 0?Uu.usedRenderingMode:-1;vi!==-1?Kn+=vi+` Tr
`:om!==-1&&(Kn+=`0 Tr
`),vi!==-1&&(Uu.usedRenderingMode=vi),Rs=lt.align||"left";var Zi,$o=yt*ec,ac=fa.internal.pageSize.getWidth(),lm=_e[J];Zs=lt.charSpace||mo,nr=lt.maxWidth||0,Er=Object.assign({autoencode:!0,noBOM:!0},lt.flags);var qo=[],Mc=function(Qr){return fa.getStringUnitWidth(Qr,{font:lm,charSpace:Zs,fontSize:yt,doKerning:!1})*yt/Vo};if(Object.prototype.toString.call(U)==="[object Array]"){var Li;ms=im(U),Rs!=="left"&&(Zi=ms.map(Mc));var wi,yl=0;if(Rs==="right"){pe-=Zi[0],U=[],Rn=ms.length;for(var vl=0;vl<Rn;vl++)vl===0?(wi=Xi(pe),Li=Yn(Ge)):(wi=ae(yl-Zi[vl]),Li=-$o),U.push([ms[vl],wi,Li]),yl=Zi[vl]}else if(Rs==="center"){pe-=Zi[0]/2,U=[],Rn=ms.length;for(var nc=0;nc<Rn;nc++)nc===0?(wi=Xi(pe),Li=Yn(Ge)):(wi=ae((yl-Zi[nc])/2),Li=-$o),U.push([ms[nc],wi,Li]),yl=Zi[nc]}else if(Rs==="left"){U=[],Rn=ms.length;for(var Qu=0;Qu<Rn;Qu++)U.push(ms[Qu])}else if(Rs==="justify"&&lm.encoding==="Identity-H"){U=[],Rn=ms.length,nr=nr!==0?nr:ac;for(var Hu=0,Ja=0;Ja<Rn;Ja++)if(Li=Ja===0?Yn(Ge):-$o,wi=Ja===0?Xi(pe):Hu,Ja<Rn-1){var IA=ae((nr-Zi[Ja])/(ms[Ja].split(" ").length-1)),wl=ms[Ja].split(" ");U.push([wl[0]+" ",wi,Li]),Hu=0;for(var Nl=1;Nl<wl.length;Nl++){var Xn=(Mc(wl[Nl-1]+" "+wl[Nl])-Mc(wl[Nl]))*Vo+IA;Nl==wl.length-1?U.push([wl[Nl],Xn,0]):U.push([wl[Nl]+" ",Xn,0]),Hu-=Xn}}else U.push([ms[Ja],wi,Li]);U.push(["",Hu,0])}else{if(Rs!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(U=[],Rn=ms.length,nr=nr!==0?nr:ac,Ja=0;Ja<Rn;Ja++){Li=Ja===0?Yn(Ge):-$o,wi=Ja===0?Xi(pe):0;var ic=ms[Ja].split(" ").length-1,Vu=ic>0?(nr-Zi[Ja])/ic:0;Ja<Rn-1?qo.push(D(ae(Vu))):qo.push(0),U.push([ms[Ja],wi,Li])}}}(typeof lt.R2L=="boolean"?lt.R2L:Le)===!0&&(U=Ru(U,function(Qr,Fr,pa){return[Qr.split("").reverse().join(""),Fr,pa]})),ss={text:U,x:pe,y:Ge,options:lt,mutex:{pdfEscape:kt,activeFontKey:J,fonts:_e,activeFontSize:yt}},Ie.publish("postProcessText",ss),U=ss.text,dn=ss.mutex.isHex||!1;var zu=_e[J].encoding;zu!=="WinAnsiEncoding"&&zu!=="StandardEncoding"||(U=Ru(U,function(Qr,Fr,pa){return[tc(Qr),Fr,pa]})),ms=im(U),U=[];for(var oc,lc,jl,Rd=Array.isArray(ms[0])?1:0,eo="",cc=function(Qr,Fr,pa){var Za="";return pa instanceof ct?(pa=typeof lt.angle=="number"?Pt(pa,new ct(1,0,0,1,Qr,Fr)):Pt(new ct(1,0,0,1,Qr,Fr),pa),E===j&&(pa=Pt(new ct(1,0,0,-1,0,0),pa)),Za=pa.join(" ")+` Tm
`):Za=D(Qr)+" "+D(Fr)+` Td
`,Za},li=0;li<ms.length;li++){switch(eo="",Rd){case 1:jl=(dn?"<":"(")+ms[li][0]+(dn?">":")"),oc=parseFloat(ms[li][1]),lc=parseFloat(ms[li][2]);break;case 0:jl=(dn?"<":"(")+ms[li]+(dn?">":")"),oc=Xi(pe),lc=Yn(Ge)}qo!==void 0&&qo[li]!==void 0&&(eo=qo[li]+` Tw
`),li===0?U.push(eo+cc(oc,lc,Xa)+jl):Rd===0?U.push(eo+jl):Rd===1&&U.push(eo+cc(oc,lc,Xa)+jl)}U=Rd===0?U.join(` Tj
T* `):U.join(` Tj
`),U+=` Tj
`;var fo=`BT
/`;return fo+=J+" "+yt+` Tf
`,fo+=D(yt*ec)+` TL
`,fo+=pl+`
`,fo+=Kn,fo+=U,Ae(fo+="ET"),g[J]=!0,fa};var Jh=p.__private__.clip=p.clip=function(U){return Ae(U==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Jh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Ae("n"),this};var yi=p.__private__.isValidStyle=function(U){var pe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(U)!==-1&&(pe=!0),pe};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(U){return yi(U)&&(u=U),this};var Zh=p.__private__.getStyle=p.getStyle=function(U){var pe=u;switch(U){case"D":case"S":pe="S";break;case"F":pe="f";break;case"FD":case"DF":pe="B";break;case"f":case"f*":case"B":case"B*":pe=U}return pe},em=p.close=function(){return Ae("h"),this};p.stroke=function(){return Ae("S"),this},p.fill=function(U){return Qo("f",U),this},p.fillEvenOdd=function(U){return Qo("f*",U),this},p.fillStroke=function(U){return Qo("B",U),this},p.fillStrokeEvenOdd=function(U){return Qo("B*",U),this};var Qo=function(U,pe){ha(pe)==="object"?BA(pe,U):Ae(U)},Fd=function(U){U===null||E===j&&U===void 0||(U=Zh(U),Ae(U))};function kA(U,pe,Ge,lt,Bt){var ss=new Gf(pe||this.boundingBox,Ge||this.xStep,lt||this.yStep,this.gState,Bt||this.matrix);ss.stream=this.stream;var ms=U+"$$"+this.cloneIndex+++"$$";return as(ms,ss),ss}var BA=function(U,pe){var Ge=vt[U.key],lt=et[Ge];if(lt instanceof Om)Ae("q"),Ae(tm(pe)),lt.gState&&p.setGState(lt.gState),Ae(U.matrix.toString()+" cm"),Ae("/"+Ge+" sh"),Ae("Q");else if(lt instanceof Gf){var Bt=new ct(1,0,0,-1,0,Zl());U.matrix&&(Bt=Bt.multiply(U.matrix||ts),Ge=kA.call(lt,U.key,U.boundingBox,U.xStep,U.yStep,Bt).id),Ae("q"),Ae("/Pattern cs"),Ae("/"+Ge+" scn"),lt.gState&&p.setGState(lt.gState),Ae(pe),Ae("Q")}},tm=function(U){switch(U){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},sm=p.moveTo=function(U,pe){return Ae(D(ae(U))+" "+D(ne(pe))+" m"),this},SA=p.lineTo=function(U,pe){return Ae(D(ae(U))+" "+D(ne(pe))+" l"),this},Ii=p.curveTo=function(U,pe,Ge,lt,Bt,ss){return Ae([D(ae(U)),D(ne(pe)),D(ae(Ge)),D(ne(lt)),D(ae(Bt)),D(ne(ss)),"c"].join(" ")),this};p.__private__.line=p.line=function(U,pe,Ge,lt,Bt){if(isNaN(U)||isNaN(pe)||isNaN(Ge)||isNaN(lt)||!yi(Bt))throw new Error("Invalid arguments passed to jsPDF.line");return E===B?this.lines([[Ge-U,lt-pe]],U,pe,[1,1],Bt||"S"):this.lines([[Ge-U,lt-pe]],U,pe,[1,1]).stroke()},p.__private__.lines=p.lines=function(U,pe,Ge,lt,Bt,ss){var ms,Ts,Rs,Zs,nr,Er,Fa,Xa,fa,wn,dn,Kn;if(typeof U=="number"&&(Kn=Ge,Ge=pe,pe=U,U=Kn),lt=lt||[1,1],ss=ss||!1,isNaN(pe)||isNaN(Ge)||!Array.isArray(U)||!Array.isArray(lt)||!yi(Bt)||typeof ss!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(sm(pe,Ge),ms=lt[0],Ts=lt[1],Zs=U.length,wn=pe,dn=Ge,Rs=0;Rs<Zs;Rs++)(nr=U[Rs]).length===2?(wn=nr[0]*ms+wn,dn=nr[1]*Ts+dn,SA(wn,dn)):(Er=nr[0]*ms+wn,Fa=nr[1]*Ts+dn,Xa=nr[2]*ms+wn,fa=nr[3]*Ts+dn,wn=nr[4]*ms+wn,dn=nr[5]*Ts+dn,Ii(Er,Fa,Xa,fa,wn,dn));return ss&&em(),Fd(Bt),this},p.path=function(U){for(var pe=0;pe<U.length;pe++){var Ge=U[pe],lt=Ge.c;switch(Ge.op){case"m":sm(lt[0],lt[1]);break;case"l":SA(lt[0],lt[1]);break;case"c":Ii.apply(this,lt);break;case"h":em()}}return this},p.__private__.rect=p.rect=function(U,pe,Ge,lt,Bt){if(isNaN(U)||isNaN(pe)||isNaN(Ge)||isNaN(lt)||!yi(Bt))throw new Error("Invalid arguments passed to jsPDF.rect");return E===B&&(lt=-lt),Ae([D(ae(U)),D(ne(pe)),D(ae(Ge)),D(ae(lt)),"re"].join(" ")),Fd(Bt),this},p.__private__.triangle=p.triangle=function(U,pe,Ge,lt,Bt,ss,ms){if(isNaN(U)||isNaN(pe)||isNaN(Ge)||isNaN(lt)||isNaN(Bt)||isNaN(ss)||!yi(ms))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ge-U,lt-pe],[Bt-Ge,ss-lt],[U-Bt,pe-ss]],U,pe,[1,1],ms,!0),this},p.__private__.roundedRect=p.roundedRect=function(U,pe,Ge,lt,Bt,ss,ms){if(isNaN(U)||isNaN(pe)||isNaN(Ge)||isNaN(lt)||isNaN(Bt)||isNaN(ss)||!yi(ms))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ts=4/3*(Math.SQRT2-1);return Bt=Math.min(Bt,.5*Ge),ss=Math.min(ss,.5*lt),this.lines([[Ge-2*Bt,0],[Bt*Ts,0,Bt,ss-ss*Ts,Bt,ss],[0,lt-2*ss],[0,ss*Ts,-Bt*Ts,ss,-Bt,ss],[2*Bt-Ge,0],[-Bt*Ts,0,-Bt,-ss*Ts,-Bt,-ss],[0,2*ss-lt],[0,-ss*Ts,Bt*Ts,-ss,Bt,-ss]],U+Bt,pe,[1,1],ms,!0),this},p.__private__.ellipse=p.ellipse=function(U,pe,Ge,lt,Bt){if(isNaN(U)||isNaN(pe)||isNaN(Ge)||isNaN(lt)||!yi(Bt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ss=4/3*(Math.SQRT2-1)*Ge,ms=4/3*(Math.SQRT2-1)*lt;return sm(U+Ge,pe),Ii(U+Ge,pe-ms,U+ss,pe-lt,U,pe-lt),Ii(U-ss,pe-lt,U-Ge,pe-ms,U-Ge,pe),Ii(U-Ge,pe+ms,U-ss,pe+lt,U,pe+lt),Ii(U+ss,pe+lt,U+Ge,pe+ms,U+Ge,pe),Fd(Bt),this},p.__private__.circle=p.circle=function(U,pe,Ge,lt){if(isNaN(U)||isNaN(pe)||isNaN(Ge)||!yi(lt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(U,pe,Ge,Ge,lt)},p.setFont=function(U,pe,Ge){return Ge&&(pe=M(pe,Ge)),J=ds(U,pe,{disableWarning:!1}),this};var Ho=p.__private__.getFont=p.getFont=function(){return _e[ds.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var U,pe,Ge={};for(U in Se)if(Se.hasOwnProperty(U))for(pe in Ge[U]=[],Se[U])Se[U].hasOwnProperty(pe)&&Ge[U].push(pe);return Ge},p.addFont=function(U,pe,Ge,lt,Bt){var ss=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ss.indexOf(arguments[3])!==-1?Bt=arguments[3]:arguments[3]&&ss.indexOf(arguments[3])==-1&&(Ge=M(Ge,lt)),jt.call(this,U,pe,Ge,Bt=Bt||"Identity-H")};var Gl,Dd=a.lineWidth||.200025,Pc=p.__private__.getLineWidth=p.getLineWidth=function(){return Dd},Ws=p.__private__.setLineWidth=p.setLineWidth=function(U){return Dd=U,Ae(D(ae(U))+" w"),this};p.__private__.setLineDash=Es.API.setLineDash=Es.API.setLineDashPattern=function(U,pe){if(U=U||[],pe=pe||0,isNaN(pe)||!Array.isArray(U))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return U=U.map(function(Ge){return D(ae(Ge))}).join(" "),pe=D(ae(pe)),Ae("["+U+"] "+pe+" d"),this};var EA=p.__private__.getLineHeight=p.getLineHeight=function(){return yt*Gl};p.__private__.getLineHeight=p.getLineHeight=function(){return yt*Gl};var rm=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(U){return typeof(U=U||1.15)=="number"&&(Gl=U),this},FA=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Gl};rm(a.lineHeight);var Xi=p.__private__.getHorizontalCoordinate=function(U){return ae(U)},Yn=p.__private__.getVerticalCoordinate=function(U){return E===j?U:ee[R].mediaBox.topRightY-ee[R].mediaBox.bottomLeftY-ae(U)},am=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(U){return D(Xi(U))},Td=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(U){return D(Yn(U))},Ji=a.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return It(Ji)},p.__private__.setStrokeColor=p.setDrawColor=function(U,pe,Ge,lt){return Ji=Pe({ch1:U,ch2:pe,ch3:Ge,ch4:lt,pdfColorType:"draw",precision:2}),Ae(Ji),this};var Pd=a.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return It(Pd)},p.__private__.setFillColor=p.setFillColor=function(U,pe,Ge,lt){return Pd=Pe({ch1:U,ch2:pe,ch3:Ge,ch4:lt,pdfColorType:"fill",precision:2}),Ae(Pd),this};var pl=a.textColor||"0 g",DA=p.__private__.getTextColor=p.getTextColor=function(){return It(pl)};p.__private__.setTextColor=p.setTextColor=function(U,pe,Ge,lt){return pl=Pe({ch1:U,ch2:pe,ch3:Ge,ch4:lt,pdfColorType:"text",precision:3}),this};var mo=a.charSpace,Iu=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(mo||0)};p.__private__.setCharSpace=p.setCharSpace=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return mo=U,this};var Lu=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(U){var pe=p.CapJoinStyles[U];if(pe===void 0)throw new Error("Line cap style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Lu=pe,Ae(pe+" J"),this};var Mn=0;p.__private__.setLineJoin=p.setLineJoin=function(U){var pe=p.CapJoinStyles[U];if(pe===void 0)throw new Error("Line join style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Mn=pe,Ae(pe+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(U){if(U=U||0,isNaN(U))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ae(D(ae(U))+" M"),this},p.GState=wv,p.setGState=function(U){(U=typeof U=="string"?Mt[Ye[U]]:gl(null,U)).equals(Et)||(Ae("/"+U.id+" gs"),Et=U)};var gl=function(U,pe){if(!U||!Ye[U]){var Ge=!1;for(var lt in Mt)if(Mt.hasOwnProperty(lt)&&Mt[lt].equals(pe)){Ge=!0;break}if(Ge)pe=Mt[lt];else{var Bt="GS"+(Object.keys(Mt).length+1).toString(10);Mt[Bt]=pe,pe.id=Bt}return U&&(Ye[U]=pe.id),Ie.publish("addGState",pe),pe}};p.addGState=function(U,pe){return gl(U,pe),this},p.saveGraphicsState=function(){return Ae("q"),Ve.push({key:J,size:yt,color:pl}),this},p.restoreGraphicsState=function(){Ae("Q");var U=Ve.pop();return J=U.key,yt=U.size,pl=U.color,Et=null,this},p.setCurrentTransformationMatrix=function(U){return Ae(U.toString()+" cm"),this},p.comment=function(U){return Ae("#"+U),this};var Ao=function(U,pe){var Ge=U||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ge},set:function(ss){isNaN(ss)||(Ge=parseFloat(ss))}});var lt=pe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return lt},set:function(ss){isNaN(ss)||(lt=parseFloat(ss))}});var Bt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Bt},set:function(ss){Bt=ss.toString()}}),this},Wl=function(U,pe,Ge,lt){Ao.call(this,U,pe),this.type="rect";var Bt=Ge||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Bt},set:function(ms){isNaN(ms)||(Bt=parseFloat(ms))}});var ss=lt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ss},set:function(ms){isNaN(ms)||(ss=parseFloat(ms))}}),this},Mu=function(){this.page=Gt,this.currentPage=R,this.pages=we.slice(0),this.pagesContext=ee.slice(0),this.x=xt,this.y=Xe,this.matrix=Ct,this.width=Kl(R),this.height=nm(R),this.outputDestination=ce,this.id="",this.objectNumber=-1};Mu.prototype.restore=function(){Gt=this.page,R=this.currentPage,ee=this.pagesContext,we=this.pages,xt=this.x,Xe=this.y,Ct=this.matrix,Ld(R,this.width),Xl(R,this.height),ce=this.outputDestination};var Id=function(U,pe,Ge,lt,Bt){Me.push(new Mu),Gt=R=0,we=[],xt=U,Xe=pe,Ct=Bt,gs([Ge,lt])};for(var Yl in p.beginFormObject=function(U,pe,Ge,lt,Bt){return Id(U,pe,Ge,lt,Bt),this},p.endFormObject=function(U){return(function(pe){if(xe[pe])Me.pop().restore();else{var Ge=new Mu,lt="Xo"+(Object.keys(fe).length+1).toString(10);Ge.id=lt,xe[pe]=lt,fe[lt]=Ge,Ie.publish("addFormObject",Ge),Me.pop().restore()}})(U),this},p.doFormObject=function(U,pe){var Ge=fe[xe[U]];return Ae("q"),Ae(pe.toString()+" cm"),Ae("/"+Ge.id+" Do"),Ae("Q"),this},p.getFormObject=function(U){var pe=fe[xe[U]];return{x:pe.x,y:pe.y,width:pe.width,height:pe.height,matrix:pe.matrix}},p.save=function(U,pe){return U=U||"generated.pdf",(pe=pe||{}).returnPromise=pe.returnPromise||!1,pe.returnPromise===!1?(Pm(ho(Ln()),U),typeof Pm.unload=="function"&&sr.setTimeout&&setTimeout(Pm.unload,911),this):new Promise(function(Ge,lt){try{var Bt=Pm(ho(Ln()),U);typeof Pm.unload=="function"&&sr.setTimeout&&setTimeout(Pm.unload,911),Ge(Bt)}catch(ss){lt(ss.message)}})},Es.API)Es.API.hasOwnProperty(Yl)&&(Yl==="events"&&Es.API.events.length?(function(U,pe){var Ge,lt,Bt;for(Bt=pe.length-1;Bt!==-1;Bt--)Ge=pe[Bt][0],lt=pe[Bt][1],U.subscribe.apply(U,[Ge].concat(typeof lt=="function"?[lt]:lt))})(Ie,Es.API.events):p[Yl]=Es.API[Yl]);function Kl(U){return ee[U].mediaBox.topRightX-ee[U].mediaBox.bottomLeftX}function Ld(U,pe){ee[U].mediaBox.topRightX=pe+ee[U].mediaBox.bottomLeftX}function nm(U){return ee[U].mediaBox.topRightY-ee[U].mediaBox.bottomLeftY}function Xl(U,pe){ee[U].mediaBox.topRightY=pe+ee[U].mediaBox.bottomLeftY}var Jl=p.getPageWidth=function(U){return Kl(U=U||R)/He},TA=p.setPageWidth=function(U,pe){Ld(U,pe*He)},Zl=p.getPageHeight=function(U){return nm(U=U||R)/He},PA=p.setPageHeight=function(U,pe){Xl(U,pe*He)};return p.internal={pdfEscape:kt,getStyle:Zh,getFont:Ho,getFontSize:ze,getCharSpace:Iu,getTextColor:DA,getLineHeight:EA,getLineHeightFactor:FA,getLineWidth:Pc,write:gt,getHorizontalCoordinate:Xi,getVerticalCoordinate:Yn,getCoordinateString:am,getVerticalCoordinateString:Td,collections:{},newObject:Be,newAdditionalObject:Ne,newObjectDeferred:mt,newObjectDeferredBegin:Nt,getFilters:Ke,putStream:nt,events:Ie,scaleFactor:He,pageSize:{getWidth:function(){return Jl(R)},setWidth:function(U){TA(R,U)},getHeight:function(){return Zl(R)},setHeight:function(U){PA(R,U)}},encryptionOptions:m,encryption:vn,getEncryptor:function(U){return m!==null?vn.encryptor(U,0):function(pe){return pe}},output:Xh,getNumberOfPages:bs,get pages(){return we},out:Ae,f2:Q,f3:L,getPageInfo:cn,getPageInfoByObjId:Pu,getCurrentPageInfo:CA,getPDFVersion:b,Point:Ao,Rectangle:Wl,Matrix:ct,hasHotfix:bi},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Jl(R)},set:function(U){TA(R,U)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Zl(R)},set:function(U){PA(R,U)},enumerable:!0,configurable:!0}),(function(U){for(var pe=0,Ge=Qt.length;pe<Ge;pe++){var lt=jt.call(this,U[pe][0],U[pe][1],U[pe][2],Qt[pe][3],!0);A===!1&&(g[lt]=!0);var Bt=U[pe][0].split("-");Dt({id:lt,fontName:Bt[0],fontStyle:Bt[1]||""})}Ie.publish("addFonts",{fonts:_e,dictionary:Se})}).call(p,Qt),J="F1",Xs(n,s),Ie.publish("initialized"),p}Rf.prototype.lsbFirstWord=function(a){return String.fromCharCode(255&a,a>>8&255,a>>16&255,a>>24&255)},Rf.prototype.toHexString=function(a){return a.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Rf.prototype.hexToBytes=function(a){for(var e=[],s=0;s<a.length;s+=2)e.push(String.fromCharCode(parseInt(a.substr(s,2),16)));return e.join("")},Rf.prototype.processOwnerPassword=function(a,e){return o_(i_(e).substr(0,5),a)},Rf.prototype.encryptor=function(a,e){var s=i_(this.encryptionKey+String.fromCharCode(255&a,a>>8&255,a>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return o_(s,r)}},wv.prototype.equals=function(a){var e,s="id,objectNumber,equals";if(!a||ha(a)!==ha(this))return!1;var r=0;for(e in this)if(!(s.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!a.hasOwnProperty(e)||this[e]!==a[e])return!1;r++}for(e in a)a.hasOwnProperty(e)&&s.indexOf(e)<0&&r--;return r===0},Es.API={events:[]},Es.version="4.1.0";var gn=Es.API,H5=1,NA=function(a){return a.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xf=function(a){return a.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Nv=function(a){return a.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(e){var s=e.charCodeAt(0).toString(16).toUpperCase();return"#"+(s.length===1?"0"+s:s)})},lr=function(a){return a.toFixed(2)},fh=function(a){return a.toFixed(5)};gn.__acroform__={};var Oo=function(a,e){a.prototype=Object.create(e.prototype),a.prototype.constructor=a},xE=function(a){return a*H5},ad=function(a){var e=new nI,s=Ms.internal.getHeight(a)||0,r=Ms.internal.getWidth(a)||0;return e.BBox=[0,0,Number(lr(r)),Number(lr(s))],e},WW=gn.__acroform__.setBit=function(a,e){if(a=a||0,e=e||0,isNaN(a)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return a|1<<e},YW=gn.__acroform__.clearBit=function(a,e){if(a=a||0,e=e||0,isNaN(a)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return a&~(1<<e)},KW=gn.__acroform__.getBit=function(a,e){if(isNaN(a)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return a&1<<e?1:0},Sn=gn.__acroform__.getBitForPdf=function(a,e){if(isNaN(a)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return KW(a,e-1)},En=gn.__acroform__.setBitForPdf=function(a,e){if(isNaN(a)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return WW(a,e-1)},Fn=gn.__acroform__.clearBitForPdf=function(a,e){if(isNaN(a)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return YW(a,e-1)},XW=gn.__acroform__.calculateCoordinates=function(a,e){var s=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,n=a[0],i=a[1],o=a[2],l=a[3],c={};return c.lowerLeft_X=s(n)||0,c.lowerLeft_Y=r(i+l)||0,c.upperRight_X=s(n+o)||0,c.upperRight_Y=r(i)||0,[Number(lr(c.lowerLeft_X)),Number(lr(c.lowerLeft_Y)),Number(lr(c.upperRight_X)),Number(lr(c.upperRight_Y))]},JW=function(a){if(a.appearanceStreamContent)return a.appearanceStreamContent;if(a.V||a.DV){var e=[],s=a._V||a.DV,r=l_(a,s),n=a.scope.internal.getFont(a.fontName,a.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(a.scope.__private__.encodeColorString(a.color)),e.push("/"+n+" "+lr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=ad(a);return i.scope=a.scope,i.stream=e.join(`
`),i}},l_=function(a,e){var s=a.fontSize===0?a.maxFontSize:a.fontSize,r={text:"",fontSize:""},n=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");n=a.multiline?n.map(function(Q){return Q.split(`
`)}):n.map(function(Q){return[Q]});var i=s,o=Ms.internal.getHeight(a)||0;o=o<0?-o:o;var l=Ms.internal.getWidth(a)||0;l=l<0?-l:l;var c=function(Q,L,ae){if(Q+1<n.length){var ne=L+" "+n[Q+1][0];return Qb(ne,a,ae).width<=l-4}return!1};i++;e:for(;i>0;){e="",i--;var u,m,A=Qb("3",a,i).height,g=a.multiline?o-i:(o-A)/2,p=g+=2,v=0,b=0,y=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+Qb(e,a,i=12).width+", FieldWidth:"+l+`
`;break}for(var w="",B=0,j=0;j<n.length;j++)if(n.hasOwnProperty(j)){var E=!1;if(n[j].length!==1&&y!==n[j].length-1){if((A+2)*(B+2)+2>o)continue e;w+=n[j][y],E=!0,b=j,j--}else{w=(w+=n[j][y]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var S=parseInt(j),T=c(S,w,i),M=j>=n.length-1;if(T&&!M){w+=" ",y=0;continue}if(T||M){if(M)b=S;else if(a.multiline&&(A+2)*(B+2)+2>o)continue e}else{if(!a.multiline||(A+2)*(B+2)+2>o)continue e;b=S}}for(var D="",P=v;P<=b;P++){var Y=n[P];if(a.multiline){if(P===b){D+=Y[y]+" ",y=(y+1)%Y.length;continue}if(P===v){D+=Y[Y.length-1]+" ";continue}}D+=Y[0]+" "}switch(D=D.substr(D.length-1)==" "?D.substr(0,D.length-1):D,m=Qb(D,a,i).width,a.textAlign){case"right":u=l-m-2;break;case"center":u=(l-m)/2;break;default:u=2}e+=lr(u)+" "+lr(p)+` Td
`,e+="("+NA(D)+`) Tj
`,e+=-lr(u)+` 0 Td
`,p=-(i+2),m=0,v=E?b:b+1,B++,w=""}break}return r.text=e,r.fontSize=i,r},Qb=function(a,e,s){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),n=e.scope.getStringUnitWidth(a,{font:r,fontSize:parseFloat(s),charSpace:0})*parseFloat(s);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(s),charSpace:0})*parseFloat(s)*1.5,width:n}},ZW={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},eY=function(a,e){var s={type:"reference",object:a};e.internal.getPageInfo(a.page).pageContext.annotations.find(function(r){return r.type===s.type&&r.object===s.object})===void 0&&e.internal.getPageInfo(a.page).pageContext.annotations.push(s)},tY=function(a,e){if(e.scope=a,a.internal!==void 0&&(a.internal.acroformPlugin===void 0||a.internal.acroformPlugin.isInitialized===!1)){if(Fc.FieldNum=0,a.internal.acroformPlugin=JSON.parse(JSON.stringify(ZW)),a.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");H5=a.internal.scaleFactor,a.internal.acroformPlugin.acroFormDictionaryRoot=new iI,a.internal.acroformPlugin.acroFormDictionaryRoot.scope=a,a.internal.acroformPlugin.acroFormDictionaryRoot._eventID=a.internal.events.subscribe("postPutResources",function(){(function(s){s.internal.events.unsubscribe(s.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete s.internal.acroformPlugin.acroFormDictionaryRoot._eventID,s.internal.acroformPlugin.printedOut=!0})(a)}),a.internal.events.subscribe("buildDocument",function(){(function(s){s.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=s.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in r)if(r.hasOwnProperty(n)){var i=r[n];i.objId=void 0,i.hasAnnotation&&eY(i,s)}})(a)}),a.internal.events.subscribe("putCatalog",function(){(function(s){if(s.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");s.internal.write("/AcroForm "+s.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(a)}),a.internal.events.subscribe("postPutPages",function(s){(function(r,n){var i=!r;for(var o in r||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var l=r[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=XW(l.Rect,n)),n.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Ms.createDefaultAppearanceStream(l),ha(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var m=JW(l);c.push({key:"AP",value:"<</N "+m+">>"}),n.internal.acroformPlugin.xForms.push(m)}if(l.appearanceStreamContent){var A="";for(var g in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(g)){var p=l.appearanceStreamContent[g];if(A+="/"+g+" ",A+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var v=p[o];typeof v=="function"&&(v=v.call(n,l)),A+="/"+o+" "+v+" ",n.internal.acroformPlugin.xForms.indexOf(v)>=0||n.internal.acroformPlugin.xForms.push(v)}}else typeof(v=p)=="function"&&(v=v.call(n,l)),A+="/"+o+" "+v,n.internal.acroformPlugin.xForms.indexOf(v)>=0||n.internal.acroformPlugin.xForms.push(v);A+=">>"}c.push({key:"AP",value:`<<
`+A+">>"})}n.internal.putStream({additionalKeyValues:c,objectId:l.objId}),n.internal.out("endobj")}i&&(function(b,y){for(var w in b)if(b.hasOwnProperty(w)){var B=w,j=b[w];y.internal.newObjectDeferredBegin(j.objId,!0),ha(j)==="object"&&typeof j.putStream=="function"&&j.putStream(),delete b[B]}})(n.internal.acroformPlugin.xForms,n)})(s,a)}),a.internal.acroformPlugin.isInitialized=!0}},aI=gn.__acroform__.arrayToPdfArray=function(a,e,s){var r=function(o){return o};if(Array.isArray(a)){for(var n="[",i=0;i<a.length;i++)switch(i!==0&&(n+=" "),ha(a[i])){case"boolean":case"number":case"object":n+=a[i].toString();break;case"string":a[i].substr(0,1)==="/"?n+="/"+Nv(a[i].substr(1)):(e!==void 0&&s&&(r=s.internal.getEncryptor(e)),n+="("+NA(r(a[i].toString()))+")")}return n+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},BN=function(a,e,s){var r=function(n){return n};return e!==void 0&&s&&(r=s.internal.getEncryptor(e)),(a=a||"").toString(),"("+NA(r(a))+")"},pd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(a){this._objId=a}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};pd.prototype.toString=function(){return this.objId+" 0 R"},pd.prototype.putStream=function(){var a=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:a,objectId:this.objId}),this.scope.internal.out("endobj")},pd.prototype.getKeyValueListForStream=function(){var a=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var s in e)if(Object.getOwnPropertyDescriptor(this,e[s]).configurable===!1){var r=e[s],n=this[r];n&&(Array.isArray(n)?a.push({key:r,value:aI(n,this.objId,this.scope)}):n instanceof pd?(n.scope=this.scope,a.push({key:r,value:n.objId+" 0 R"})):typeof n!="function"&&a.push({key:r,value:n}))}return a};var nI=function(){pd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var a,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(s){a=s.trim()},get:function(){return a||null}})};Oo(nI,pd);var iI=function(){pd.call(this);var a,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(a){var s=function(r){return r};return this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),"("+NA(s(a))+")"}},set:function(s){a=s}})};Oo(iI,pd);var Fc=function a(){pd.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Sn(e,3)},set:function(w){w?this.F=En(e,3):this.F=Fn(e,3)}});var s=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return s},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');s=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof jv)return;i="FieldObject"+a.FieldNum++}var w=function(B){return B};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+NA(w(i))+")"},set:function(w){i=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(w){i=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(w){c=w}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/H5:u},set:function(w){u=w}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(w){m=w}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof jv||this instanceof Km))return BN(A,this.objId,this.scope)},set:function(w){w=w.toString(),A=w}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof gi==0?BN(g,this.objId,this.scope):g},set:function(w){w=w.toString(),g=this instanceof gi==0?w.substr(0,1)==="("?xf(w.substr(1,w.length-2)):xf(w):w}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof gi==1?xf(g.substr(1,g.length-1)):g},set:function(w){w=w.toString(),g=this instanceof gi==1?"/"+Nv(w):w}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof gi==0?BN(p,this.objId,this.scope):p},set:function(w){w=w.toString(),p=this instanceof gi==0?w.substr(0,1)==="("?xf(w.substr(1,w.length-2)):xf(w):w}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof gi==1?xf(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof gi==1?"/"+Nv(w):w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(w){w=!!w,b=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(w){v=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,1)},set:function(w){w?this.Ff=En(this.Ff,1):this.Ff=Fn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,2)},set:function(w){w?this.Ff=En(this.Ff,2):this.Ff=Fn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,3)},set:function(w){w?this.Ff=En(this.Ff,3):this.Ff=Fn(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');y=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(y){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:y=2;break;case"center":case 1:y=1;break;default:y=0}}})};Oo(Fc,pd);var tp=function(){Fc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var a=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return a},set:function(s){a=s}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return a},set:function(s){a=s}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return aI(e,this.objId,this.scope)},set:function(s){var r,n;n=[],typeof(r=s)=="string"&&(n=(function(i,o,l){l||(l=1);for(var c,u=[];c=o.exec(i);)u.push(c[l]);return u})(r,/\((.*?)\)/g)),e=n}}),this.getOptions=function(){return e},this.setOptions=function(s){e=s,this.sort&&e.sort()},this.addOption=function(s){s=(s=s||"").toString(),e.push(s),this.sort&&e.sort()},this.removeOption=function(s,r){for(r=r||!1,s=(s=s||"").toString();e.indexOf(s)!==-1&&(e.splice(e.indexOf(s),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,18)},set:function(s){s?this.Ff=En(this.Ff,18):this.Ff=Fn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,19)},set:function(s){this.combo===!0&&(s?this.Ff=En(this.Ff,19):this.Ff=Fn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,20)},set:function(s){s?(this.Ff=En(this.Ff,20),e.sort()):this.Ff=Fn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,22)},set:function(s){s?this.Ff=En(this.Ff,22):this.Ff=Fn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,23)},set:function(s){s?this.Ff=En(this.Ff,23):this.Ff=Fn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,27)},set:function(s){s?this.Ff=En(this.Ff,27):this.Ff=Fn(this.Ff,27)}}),this.hasAppearanceStream=!1};Oo(tp,Fc);var sp=function(){tp.call(this),this.fontName="helvetica",this.combo=!1};Oo(sp,tp);var rp=function(){sp.call(this),this.combo=!0};Oo(rp,sp);var qy=function(){rp.call(this),this.edit=!0};Oo(qy,rp);var gi=function(){Fc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,15)},set:function(s){s?this.Ff=En(this.Ff,15):this.Ff=Fn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,16)},set:function(s){s?this.Ff=En(this.Ff,16):this.Ff=Fn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,17)},set:function(s){s?this.Ff=En(this.Ff,17):this.Ff=Fn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,26)},set:function(s){s?this.Ff=En(this.Ff,26):this.Ff=Fn(this.Ff,26)}});var a,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(i){return i};if(this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,n=[];for(r in n.push("<<"),e)n.push("/"+r+" ("+NA(s(e[r]))+")");return n.push(">>"),n.join(`
`)}},set:function(s){ha(s)==="object"&&(e=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(s){typeof s=="string"&&(e.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(s){a=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(s){a="/"+Nv(s)}})};Oo(gi,Fc);var Gy=function(){gi.call(this),this.pushButton=!0};Oo(Gy,gi);var ap=function(){gi.call(this),this.radio=!0,this.pushButton=!1;var a=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return a},set:function(e){a=e!==void 0?e:[]}})};Oo(ap,gi);var jv=function(){var a,e;Fc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return a},set:function(n){a=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(n){e=n}});var s,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+NA(n(r[i]))+")");return o.push(">>"),o.join(`
`)},set:function(n){ha(n)==="object"&&(r=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(n){typeof n=="string"&&(r.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(n){s=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(n){s="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ms.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Oo(jv,Fc),ap.prototype.setAppearance=function(a){if(!("createAppearanceStream"in a)||!("getCA"in a))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var s=this.Kids[e];s.appearanceStreamContent=a.createAppearanceStream(s.optionName),s.caption=a.getCA()}},ap.prototype.createOption=function(a){var e=new jv;return e.Parent=this,e.optionName=a,this.Kids.push(e),sY.call(this.scope,e),e};var Wy=function(){gi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ms.CheckBox.createAppearanceStream()};Oo(Wy,gi);var Km=function(){Fc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,13)},set:function(e){e?this.Ff=En(this.Ff,13):this.Ff=Fn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,21)},set:function(e){e?this.Ff=En(this.Ff,21):this.Ff=Fn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,23)},set:function(e){e?this.Ff=En(this.Ff,23):this.Ff=Fn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,24)},set:function(e){e?this.Ff=En(this.Ff,24):this.Ff=Fn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,25)},set:function(e){e?this.Ff=En(this.Ff,25):this.Ff=Fn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,26)},set:function(e){e?this.Ff=En(this.Ff,26):this.Ff=Fn(this.Ff,26)}});var a=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return a},set:function(e){a=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return a},set:function(e){Number.isInteger(e)&&(a=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Oo(Km,Fc);var Yy=function(){Km.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Sn(this.Ff,14)},set:function(a){a?this.Ff=En(this.Ff,14):this.Ff=Fn(this.Ff,14)}}),this.password=!0};Oo(Yy,Km);var Ms={CheckBox:{createAppearanceStream:function(){return{N:{On:Ms.CheckBox.YesNormal},D:{On:Ms.CheckBox.YesPushDown,Off:Ms.CheckBox.OffPushDown}}},YesPushDown:function(a){var e=ad(a);e.scope=a.scope;var s=[],r=a.scope.internal.getFont(a.fontName,a.fontStyle).id,n=a.scope.__private__.encodeColorString(a.color),i=l_(a,a.caption);return s.push("0.749023 g"),s.push("0 0 "+lr(Ms.internal.getWidth(a))+" "+lr(Ms.internal.getHeight(a))+" re"),s.push("f"),s.push("BMC"),s.push("q"),s.push("0 0 1 rg"),s.push("/"+r+" "+lr(i.fontSize)+" Tf "+n),s.push("BT"),s.push(i.text),s.push("ET"),s.push("Q"),s.push("EMC"),e.stream=s.join(`
`),e},YesNormal:function(a){var e=ad(a);e.scope=a.scope;var s=a.scope.internal.getFont(a.fontName,a.fontStyle).id,r=a.scope.__private__.encodeColorString(a.color),n=[],i=Ms.internal.getHeight(a),o=Ms.internal.getWidth(a),l=l_(a,a.caption);return n.push("1 g"),n.push("0 0 "+lr(o)+" "+lr(i)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+lr(o-1)+" "+lr(i-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+s+" "+lr(l.fontSize)+" Tf "+r),n.push(l.text),n.push("ET"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(a){var e=ad(a);e.scope=a.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+lr(Ms.internal.getWidth(a))+" "+lr(Ms.internal.getHeight(a))+" re"),s.push("f"),e.stream=s.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(a){var e={D:{Off:Ms.RadioButton.Circle.OffPushDown},N:{}};return e.N[a]=Ms.RadioButton.Circle.YesNormal,e.D[a]=Ms.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(a){var e=ad(a);e.scope=a.scope;var s=[],r=Ms.internal.getWidth(a)<=Ms.internal.getHeight(a)?Ms.internal.getWidth(a)/4:Ms.internal.getHeight(a)/4;r=Number((.9*r).toFixed(5));var n=Ms.internal.Bezier_C,i=Number((r*n).toFixed(5));return s.push("q"),s.push("1 0 0 1 "+fh(Ms.internal.getWidth(a)/2)+" "+fh(Ms.internal.getHeight(a)/2)+" cm"),s.push(r+" 0 m"),s.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),s.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),s.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),s.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),s.push("f"),s.push("Q"),e.stream=s.join(`
`),e},YesPushDown:function(a){var e=ad(a);e.scope=a.scope;var s=[],r=Ms.internal.getWidth(a)<=Ms.internal.getHeight(a)?Ms.internal.getWidth(a)/4:Ms.internal.getHeight(a)/4;r=Number((.9*r).toFixed(5));var n=Number((2*r).toFixed(5)),i=Number((n*Ms.internal.Bezier_C).toFixed(5)),o=Number((r*Ms.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+fh(Ms.internal.getWidth(a)/2)+" "+fh(Ms.internal.getHeight(a)/2)+" cm"),s.push(n+" 0 m"),s.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),s.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),s.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),s.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),s.push("f"),s.push("Q"),s.push("0 g"),s.push("q"),s.push("1 0 0 1 "+fh(Ms.internal.getWidth(a)/2)+" "+fh(Ms.internal.getHeight(a)/2)+" cm"),s.push(r+" 0 m"),s.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),s.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),s.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),s.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),s.push("f"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(a){var e=ad(a);e.scope=a.scope;var s=[],r=Ms.internal.getWidth(a)<=Ms.internal.getHeight(a)?Ms.internal.getWidth(a)/4:Ms.internal.getHeight(a)/4;r=Number((.9*r).toFixed(5));var n=Number((2*r).toFixed(5)),i=Number((n*Ms.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+fh(Ms.internal.getWidth(a)/2)+" "+fh(Ms.internal.getHeight(a)/2)+" cm"),s.push(n+" 0 m"),s.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),s.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),s.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),s.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),s.push("f"),s.push("Q"),e.stream=s.join(`
`),e}},Cross:{createAppearanceStream:function(a){var e={D:{Off:Ms.RadioButton.Cross.OffPushDown},N:{}};return e.N[a]=Ms.RadioButton.Cross.YesNormal,e.D[a]=Ms.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(a){var e=ad(a);e.scope=a.scope;var s=[],r=Ms.internal.calculateCross(a);return s.push("q"),s.push("1 1 "+lr(Ms.internal.getWidth(a)-2)+" "+lr(Ms.internal.getHeight(a)-2)+" re"),s.push("W"),s.push("n"),s.push(lr(r.x1.x)+" "+lr(r.x1.y)+" m"),s.push(lr(r.x2.x)+" "+lr(r.x2.y)+" l"),s.push(lr(r.x4.x)+" "+lr(r.x4.y)+" m"),s.push(lr(r.x3.x)+" "+lr(r.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},YesPushDown:function(a){var e=ad(a);e.scope=a.scope;var s=Ms.internal.calculateCross(a),r=[];return r.push("0.749023 g"),r.push("0 0 "+lr(Ms.internal.getWidth(a))+" "+lr(Ms.internal.getHeight(a))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+lr(Ms.internal.getWidth(a)-2)+" "+lr(Ms.internal.getHeight(a)-2)+" re"),r.push("W"),r.push("n"),r.push(lr(s.x1.x)+" "+lr(s.x1.y)+" m"),r.push(lr(s.x2.x)+" "+lr(s.x2.y)+" l"),r.push(lr(s.x4.x)+" "+lr(s.x4.y)+" m"),r.push(lr(s.x3.x)+" "+lr(s.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(a){var e=ad(a);e.scope=a.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+lr(Ms.internal.getWidth(a))+" "+lr(Ms.internal.getHeight(a))+" re"),s.push("f"),e.stream=s.join(`
`),e}}},createDefaultAppearanceStream:function(a){var e=a.scope.internal.getFont(a.fontName,a.fontStyle).id,s=a.scope.__private__.encodeColorString(a.color);return"/"+e+" "+a.fontSize+" Tf "+s}};Ms.internal={Bezier_C:.551915024494,calculateCross:function(a){var e=Ms.internal.getWidth(a),s=Ms.internal.getHeight(a),r=Math.min(e,s);return{x1:{x:(e-r)/2,y:(s-r)/2+r},x2:{x:(e-r)/2+r,y:(s-r)/2},x3:{x:(e-r)/2,y:(s-r)/2},x4:{x:(e-r)/2+r,y:(s-r)/2+r}}}},Ms.internal.getWidth=function(a){var e=0;return ha(a)==="object"&&(e=xE(a.Rect[2])),e},Ms.internal.getHeight=function(a){var e=0;return ha(a)==="object"&&(e=xE(a.Rect[3])),e};var sY=gn.addField=function(a){if(tY(this,a),!(a instanceof Fc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=a).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),a.page=a.scope.internal.getCurrentPageInfo().pageNumber,this};gn.AcroFormChoiceField=tp,gn.AcroFormListBox=sp,gn.AcroFormComboBox=rp,gn.AcroFormEditBox=qy,gn.AcroFormButton=gi,gn.AcroFormPushButton=Gy,gn.AcroFormRadioButton=ap,gn.AcroFormCheckBox=Wy,gn.AcroFormTextField=Km,gn.AcroFormPasswordField=Yy,gn.AcroFormAppearance=Ms,gn.AcroForm={ChoiceField:tp,ListBox:sp,ComboBox:rp,EditBox:qy,Button:gi,PushButton:Gy,RadioButton:ap,CheckBox:Wy,TextField:Km,PasswordField:Yy,Appearance:Ms},Es.AcroForm={ChoiceField:tp,ListBox:sp,ComboBox:rp,EditBox:qy,Button:gi,PushButton:Gy,RadioButton:ap,CheckBox:Wy,TextField:Km,PasswordField:Yy,Appearance:Ms};Es.AcroForm;function oI(a){return a.reduce(function(e,s,r){return e[s]=r,e},{})}(function(a){var e="addImage_";a.__addimage__={};var s="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=a.__addimage__.getImageFileTypeByImageData=function(Q,L){var ae,ne,V,O,X,$=s;if((L=L||s)==="RGBA"||Q.data!==void 0&&Q.data instanceof Uint8ClampedArray&&"height"in Q&&"width"in Q)return"RGBA";if(T(Q))for(X in r)for(V=r[X],ae=0;ae<V.length;ae+=1){for(O=!0,ne=0;ne<V[ae].length;ne+=1)if(V[ae][ne]!==void 0&&V[ae][ne]!==Q[ne]){O=!1;break}if(O===!0){$=X;break}}else for(X in r)for(V=r[X],ae=0;ae<V.length;ae+=1){for(O=!0,ne=0;ne<V[ae].length;ne+=1)if(V[ae][ne]!==void 0&&V[ae][ne]!==Q.charCodeAt(ne)){O=!1;break}if(O===!0){$=X;break}}return $===s&&L!==s&&($=L),$},i=function Q(L){for(var ae=this.internal.write,ne=this.internal.putStream,V=(0,this.internal.getFilters)();V.indexOf("FlateEncode")!==-1;)V.splice(V.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var O=[];if(O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Image"}),O.push({key:"Width",value:L.width}),O.push({key:"Height",value:L.height}),L.colorSpace===w.INDEXED?O.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(O.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===w.DEVICE_CMYK&&O.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),O.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&O.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var X="",$=0,H=L.transparency.length;$<H;$++)X+=L.transparency[$]+" "+L.transparency[$]+" ";O.push({key:"Mask",value:"["+X+"]"})}L.sMask!==void 0&&O.push({key:"SMask",value:L.objectId+1+" 0 R"});var te=L.filter!==void 0?["/"+L.filter]:void 0;if(ne({data:L.data,additionalKeyValues:O,alreadyAppliedFilters:te,objectId:L.objectId}),ae("endobj"),"sMask"in L&&L.sMask!==void 0){var K,I=(K=L.sMaskBitsPerComponent)!==null&&K!==void 0?K:L.bitsPerComponent,R={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:I,data:L.sMask};"filter"in L&&(R.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(I," /Columns ").concat(L.width),R.filter=L.filter),Q.call(this,R)}if(L.colorSpace===w.INDEXED){var G=this.internal.newObject();ne({data:D(new Uint8Array(L.palette)),objectId:G}),ae("endobj")}},o=function(){var Q=this.internal.collections[e+"images"];for(var L in Q)i.call(this,Q[L])},l=function(){var Q,L=this.internal.collections[e+"images"],ae=this.internal.write;for(var ne in L)ae("/I"+(Q=L[ne]).index,Q.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var Q=this.internal.collections[e+"images"];return c.call(this),Q},m=function(){return Object.keys(this.internal.collections[e+"images"]).length},A=function(Q){return typeof a["process"+Q.toUpperCase()]=="function"},g=function(Q){return ha(Q)==="object"&&Q.nodeType===1},p=function(Q,L){if(Q.nodeName==="IMG"&&Q.hasAttribute("src")){var ae=""+Q.getAttribute("src");if(ae.indexOf("data:image/")===0)return $y(unescape(ae).split("base64,").pop());var ne=a.loadFile(ae,!0);if(ne!==void 0)return ne}if(Q.nodeName==="CANVAS"){if(Q.width===0||Q.height===0)throw new Error("Given canvas must have data. Canvas width: "+Q.width+", height: "+Q.height);var V;switch(L){case"PNG":V="image/png";break;case"WEBP":V="image/webp";break;default:V="image/jpeg"}return $y(Q.toDataURL(V,1).split("base64,").pop())}},v=function(Q){var L=this.internal.collections[e+"images"];if(L){for(var ae in L)if(Q===L[ae].alias)return L[ae]}},b=function(Q,L,ae){return Q||L||(Q=-96,L=-96),Q<0&&(Q=-1*ae.width*72/Q/this.internal.scaleFactor),L<0&&(L=-1*ae.height*72/L/this.internal.scaleFactor),Q===0&&(Q=L*ae.width/ae.height),L===0&&(L=Q*ae.height/ae.width),[Q,L]},y=function(Q,L,ae,ne,V,O){var X=b.call(this,ae,ne,V),$=this.internal.getCoordinateString,H=this.internal.getVerticalCoordinateString,te=u.call(this);if(ae=X[0],ne=X[1],te[V.index]=V,O){O*=Math.PI/180;var K=Math.cos(O),I=Math.sin(O),R=function(se){return se.toFixed(4)},G=[R(K),R(I),R(-1*I),R(K),0,0,"cm"]}this.internal.write("q"),O?(this.internal.write([1,"0","0",1,$(Q),H(L+ne),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([$(ae),"0","0",$(ne),"0","0","cm"].join(" "))):this.internal.write([$(ae),"0","0",$(ne),$(Q),H(L+ne),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+V.index+" Do"),this.internal.write("Q")},w=a.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};a.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var B=a.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=a.__addimage__.sHashCode=function(Q){var L,ae,ne=0;if(typeof Q=="string")for(ae=Q.length,L=0;L<ae;L++)ne=(ne<<5)-ne+Q.charCodeAt(L),ne|=0;else if(T(Q))for(ae=Q.byteLength/2,L=0;L<ae;L++)ne=(ne<<5)-ne+Q[L],ne|=0;return ne},E=a.__addimage__.validateStringAsBase64=function(Q){(Q=Q||"").toString().trim();var L=!0;return Q.length===0&&(L=!1),Q.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(Q.substr(0,Q.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Q.substr(-2))===!1&&(L=!1),L},S=a.__addimage__.extractImageFromDataUrl=function(Q){if(Q==null||!(Q=Q.trim()).startsWith("data:"))return null;var L=Q.indexOf(",");return L<0?null:Q.substring(0,L).trim().endsWith("base64")?Q.substring(L+1):null};a.__addimage__.isArrayBuffer=function(Q){return Q instanceof ArrayBuffer};var T=a.__addimage__.isArrayBufferView=function(Q){return Q instanceof Int8Array||Q instanceof Uint8Array||Q instanceof Uint8ClampedArray||Q instanceof Int16Array||Q instanceof Uint16Array||Q instanceof Int32Array||Q instanceof Uint32Array||Q instanceof Float32Array||Q instanceof Float64Array},M=a.__addimage__.binaryStringToUint8Array=function(Q){for(var L=Q.length,ae=new Uint8Array(L),ne=0;ne<L;ne++)ae[ne]=Q.charCodeAt(ne);return ae},D=a.__addimage__.arrayBufferToBinaryString=function(Q){for(var L="",ae=T(Q)?Q:new Uint8Array(Q),ne=0;ne<ae.length;ne+=8192)L+=String.fromCharCode.apply(null,ae.subarray(ne,ne+8192));return L};a.addImage=function(){var Q,L,ae,ne,V,O,X,$,H;if(typeof arguments[1]=="number"?(L=s,ae=arguments[1],ne=arguments[2],V=arguments[3],O=arguments[4],X=arguments[5],$=arguments[6],H=arguments[7]):(L=arguments[1],ae=arguments[2],ne=arguments[3],V=arguments[4],O=arguments[5],X=arguments[6],$=arguments[7],H=arguments[8]),ha(Q=arguments[0])==="object"&&!g(Q)&&"imageData"in Q){var te=Q;Q=te.imageData,L=te.format||L||s,ae=te.x||ae||0,ne=te.y||ne||0,V=te.w||te.width||V,O=te.h||te.height||O,X=te.alias||X,$=te.compression||$,H=te.rotation||te.angle||H}var K=this.internal.getFilters();if($===void 0&&K.indexOf("FlateEncode")!==-1&&($="SLOW"),isNaN(ae)||isNaN(ne))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var I=P.call(this,Q,L,X,$);return y.call(this,ae,ne,V,O,I,H),this};var P=function(Q,L,ae,ne){var V,O,X;if(typeof Q=="string"&&n(Q)===s){Q=unescape(Q);var $=Y(Q,!1);($!==""||($=a.loadFile(Q,!0))!==void 0)&&(Q=$)}if(g(Q)&&(Q=p(Q,L)),L=n(Q,L),!A(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((X=ae)==null||X.length===0)&&(ae=(function(H){return typeof H=="string"||T(H)?j(H):T(H.data)?j(H.data):null})(Q)),(V=v.call(this,ae))||(Q instanceof Uint8Array||L==="RGBA"||(O=Q,Q=M(Q)),V=this["process"+L.toUpperCase()](Q,m.call(this),ae,(function(H){return H&&typeof H=="string"&&(H=H.toUpperCase()),H in a.image_compression?H:B.NONE})(ne),O)),!V)throw new Error("An unknown error occurred whilst processing the image.");return V},Y=a.__addimage__.convertBase64ToBinaryString=function(Q,L){L=typeof L!="boolean"||L;var ae,ne="";if(typeof Q=="string"){var V;ae=(V=S(Q))!==null&&V!==void 0?V:Q;try{ne=$y(ae)}catch(O){if(L)throw E(ae)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+O.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};a.getImageProperties=function(Q){var L,ae,ne="";if(g(Q)&&(Q=p(Q)),typeof Q=="string"&&n(Q)===s&&((ne=Y(Q,!1))===""&&(ne=a.loadFile(Q)||""),Q=ne),ae=n(Q),!A(ae))throw new Error("addImage does not support files of type '"+ae+"', please ensure that a plugin for '"+ae+"' support is added.");if(Q instanceof Uint8Array||(Q=M(Q)),!(L=this["process"+ae.toUpperCase()](Q)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=ae,L}})(Es.API),(function(a){var e=function(s){if(s!==void 0&&s!="")return!0};Es.API.events.push(["addPage",function(s){this.internal.getPageInfo(s.pageNumber).pageContext.annotations=[]}]),a.events.push(["putPage",function(s){for(var r,n,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(s.objId),u=s.pageContext.annotations,m=!1,A=0;A<u.length&&!m;A++)switch((r=u[A]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var g=0;g<u.length;g++){r=u[g];var p=this.internal.pdfEscape,v=this.internal.getEncryptor(s.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(b.objId),B=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+p(w(r.contents))+")",i+=" /Popup "+y.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(w(B))+") >>",b.content=i;var j=b.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+o(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(i+=" /Open true"),i+=" >>",y.content=i,this.internal.write(b.objId,"0 R",y.objId,"0 R");break;case"freetext":n="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var E=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+p(v(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var S=this.annotations._nameMap[r.options.name];r.options.pageNumber=S.page,r.options.top=S.y}else r.options.top||(r.options.top=0);if(n="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+p(v(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;default:var T=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+T+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),a.createAnnotation=function(s){var r=this.internal.getCurrentPageInfo();switch(s.type){case"link":this.link(s.bounds.x,s.bounds.y,s.bounds.w,s.bounds.h,s);break;case"text":case"freetext":r.pageContext.annotations.push(s)}},a.link=function(s,r,n,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(s),y:u(r),w:c(s+n),h:u(r+i)},options:o,type:"link"})},a.textWithLink=function(s,r,n,i){var o,l,c=this.getTextWidth(s),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var m=this.splitTextToSize(s,l).length;o=Math.ceil(u*m)}else l=c,o=u;return this.text(s,r,n,i),n+=.2*u,i.align==="center"&&(r-=c/2),i.align==="right"&&(r-=c),this.link(r,n-u,l,o,i),c},a.getTextWidth=function(s){var r=this.internal.getFontSize();return this.getStringUnitWidth(s)*r/this.internal.scaleFactor}})(Es.API),(function(a){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},s={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];a.__arabicParser__={};var i=a.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},o=a.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},l=a.__arabicParser__.isArabicEndLetter=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length<=2},c=a.__arabicParser__.isArabicAlfLetter=function(b){return o(b)&&n.indexOf(b.charCodeAt(0))>=0};a.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length>=1};var u=a.__arabicParser__.arabicLetterHasFinalForm=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length>=2};a.__arabicParser__.arabicLetterHasInitialForm=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length>=3};var m=a.__arabicParser__.arabicLetterHasMedialForm=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length==4},A=a.__arabicParser__.resolveLigatures=function(b){var y=0,w=s,B="",j=0;for(y=0;y<b.length;y+=1)w[b.charCodeAt(y)]!==void 0?(j++,typeof(w=w[b.charCodeAt(y)])=="number"&&(B+=String.fromCharCode(w),w=s,j=0),y===b.length-1&&(w=s,B+=b.charAt(y-(j-1)),y-=j-1,j=0)):(w=s,B+=b.charAt(y-j),y-=j,j=0);return B};a.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&r[b.charCodeAt(0)]!==void 0};var g=a.__arabicParser__.getCorrectForm=function(b,y,w){return o(b)?i(b)===!1?-1:!u(b)||!o(y)&&!o(w)||!o(w)&&l(y)||l(b)&&!o(y)||l(b)&&c(y)||l(b)&&l(y)?0:m(b)&&o(y)&&!l(y)&&o(w)&&u(w)?3:l(b)||!o(w)?1:2:-1},p=function(b){var y=0,w=0,B=0,j="",E="",S="",T=(b=b||"").split("\\s+"),M=[];for(y=0;y<T.length;y+=1){for(M.push(""),w=0;w<T[y].length;w+=1)j=T[y][w],E=T[y][w-1],S=T[y][w+1],o(j)?(B=g(j,E,S),M[y]+=B!==-1?String.fromCharCode(e[j.charCodeAt(0)][B]):j):M[y]+=j;M[y]=A(M[y])}return M.join(" ")},v=a.__arabicParser__.processArabic=a.processArabic=function(){var b,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(y)){var B=0;for(w=[],B=0;B<y.length;B+=1)Array.isArray(y[B])?w.push([p(y[B][0]),y[B][1],y[B][2]]):w.push([p(y[B])]);b=w}else b=p(y);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};a.events.push(["preProcessText",v])})(Es.API),Es.API.autoPrint=function(a){var e;return(a=a||{}).variant=a.variant||"non-conform",a.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(a){var e=function(){var s=void 0;Object.defineProperty(this,"pdf",{get:function(){return s},set:function(l){s=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(s,r){var n;if((s=s||"2d")!=="2d")return null;for(n in r)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=r[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},a.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Es.API),(function(a){var e={left:0,top:0,bottom:0,right:0},s=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(b){c=b}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(b){u=b}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var A=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return A},set:function(b){A=b}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(b){g=b}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(b){v=b}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},a.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},a.getTextDimensions=function(c,u){r.call(this);var m=(u=u||{}).fontSize||this.getFontSize(),A=u.font||this.getFont(),g=u.scaleFactor||this.internal.scaleFactor,p=0,v=0,b=0,y=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var w=u.maxWidth;w>0?typeof c=="string"?c=this.splitTextToSize(c,w):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(j,E){return j.concat(y.splitTextToSize(E,w))},[])):c=Array.isArray(c)?c:[c];for(var B=0;B<c.length;B++)p<(b=this.getStringUnitWidth(c[B],{font:A})*m)&&(p=b);return p!==0&&(v=c.length),{w:p/=g,h:Math.max((v*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/g,0)}},a.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=a.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var u=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,A=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+A.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=A.top,p&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,s===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-m,c.y+m,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+m,{align:"center",baseline:"top",maxWidth:c.width-m-m}):this.text(c.text,c.x+m,c.y+m,{align:"left",baseline:"top",maxWidth:c.width-m-m})),this.internal.__cell__.lastCell=c,this};a.table=function(c,u,m,A,g){if(r.call(this),!m)throw new Error("No data for PDF table.");var p,v,b,y,w=[],B=[],j=[],E={},S={},T=[],M=[],D=(g=g||{}).autoSize||!1,P=g.printHeaders!==!1,Y=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,Q=g.margins||Object.assign({width:this.getPageWidth()},e),L=typeof g.padding=="number"?g.padding:3,ae=g.headerBackgroundColor||"#c8c8c8",ne=g.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=P,this.internal.__cell__.margins=Q,this.internal.__cell__.table_font_size=Y,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=ae,this.internal.__cell__.headerTextColor=ne,this.setFontSize(Y),A==null)B=w=Object.keys(m[0]),j=w.map(function(){return"left"});else if(Array.isArray(A)&&ha(A[0])==="object")for(w=A.map(function(te){return te.name}),B=A.map(function(te){return te.prompt||te.name||""}),j=A.map(function(te){return te.align||"left"}),p=0;p<A.length;p+=1)S[A[p].name]=.7499990551181103*A[p].width;else Array.isArray(A)&&typeof A[0]=="string"&&(B=w=A,j=w.map(function(){return"left"}));if(D||Array.isArray(A)&&typeof A[0]=="string")for(p=0;p<w.length;p+=1){for(E[y=w[p]]=m.map(function(te){return te[y]}),this.setFont(void 0,"bold"),T.push(this.getTextDimensions(B[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=E[y],this.setFont(void 0,"normal"),b=0;b<v.length;b+=1)T.push(this.getTextDimensions(v[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[y]=Math.max.apply(null,T)+L+L,T=[]}if(P){var V={};for(p=0;p<w.length;p+=1)V[w[p]]={},V[w[p]].text=B[p],V[w[p]].align=j[p];var O=l.call(this,V,S);M=w.map(function(te){return new i(c,u,S[te],O,V[te].text,void 0,V[te].align)}),this.setTableHeaderRow(M),this.printHeaderRow(1,!1)}var X=A.reduce(function(te,K){return te[K.name]=K.align,te},{});for(p=0;p<m.length;p+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:p,data:m[p]},this);var $=l.call(this,m[p],S);for(b=0;b<w.length;b+=1){var H=m[p][w[b]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:p,col:b,data:H},this),o.call(this,new i(c,u,S[w[b]],$,H,p+2,X[w[b]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var m=this.internal.__cell__.padding,A=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(p){var v=c[p];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[p]-m-m)},this).map(function(p){return this.getLineHeightFactor()*p.length*A/g+m+m},this).reduce(function(p,v){return Math.max(p,v)},0)};a.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},a.printHeaderRow=function(c,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(s=!0,typeof this.internal.__cell__.headerFunction=="function"){var A=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(A[0],A[1],A[2],A[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){m=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(m.y=this.internal.__cell__.margins.top||0,g.push(m)),m.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,m),this.setTextColor(v)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),s=!1}})(Es.API);var lI={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},cI=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],c_=oI(cI),dI=[100,200,300,400,500,600,700,800,900],rY=oI(dI);function SN(a){var e=a.family.replace(/"|'/g,"").toLowerCase(),s=(function(i){return lI[i=i||"normal"]?i:"normal"})(a.style),r=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(a.weight),n=(function(i){return typeof c_[i=i||"normal"]=="number"?i:"normal"})(a.stretch);return{family:e,style:s,weight:r,stretch:n,src:a.src||[],ref:a.ref||{name:e,style:[n,s,r].join(" ")}}}function bE(a,e,s,r){var n;for(n=s;n>=0&&n<e.length;n+=r)if(a[e[n]])return a[e[n]];for(n=s;n>=0&&n<e.length;n-=r)if(a[e[n]])return a[e[n]]}var aY={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},yE={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function vE(a){return[a.stretch,a.style,a.weight,a.family].join(" ")}function wE(a){return a.trimLeft()}function nY(a,e){for(var s=0;s<a.length;){if(a.charAt(s)===e)return[a.substring(0,s),a.substring(s+1)];s+=1}return null}function iY(a){var e=a.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],a.substring(e[0].length)]}var bf,Hb,NE,jE,_E,EN=["times"];function CE(a,e,s,r,n){var i=4,o=BE;switch(n){case Es.API.image_compression.FAST:i=1,o=kE;break;case Es.API.image_compression.MEDIUM:i=6,o=SE;break;case Es.API.image_compression.SLOW:i=9,o=EE}a=(function(c,u,m,A){for(var g,p=c.length/u,v=new Uint8Array(c.length+p),b=[oY,kE,BE,SE,EE],y=0;y<p;y+=1){var w=y*u,B=c.subarray(w,w+u);if(A)v.set(A(B,m,g),w+y);else{for(var j=b.length,E=[],S=0;S<j;S+=1)E[S]=b[S](B,m,g);var T=cY(E.concat());v.set(E[T],w+y)}g=B}return v})(a,e,Math.ceil(s*r/8),o);var l=s_(a,{level:i});return Es.API.__addimage__.arrayBufferToBinaryString(l)}function oY(a){var e=Array.apply([],a);return e.unshift(0),e}function kE(a,e){var s=a.length,r=[];r[0]=1;for(var n=0;n<s;n+=1){var i=a[n-e]||0;r[n+1]=a[n]-i+256&255}return r}function BE(a,e,s){var r=a.length,n=[];n[0]=2;for(var i=0;i<r;i+=1){var o=s&&s[i]||0;n[i+1]=a[i]-o+256&255}return n}function SE(a,e,s){var r=a.length,n=[];n[0]=3;for(var i=0;i<r;i+=1){var o=a[i-e]||0,l=s&&s[i]||0;n[i+1]=a[i]+256-(o+l>>>1)&255}return n}function EE(a,e,s){var r=a.length,n=[];n[0]=4;for(var i=0;i<r;i+=1){var o=lY(a[i-e]||0,s&&s[i]||0,s&&s[i-e]||0);n[i+1]=a[i]-o+256&255}return n}function lY(a,e,s){if(a===e&&e===s)return a;var r=Math.abs(e-s),n=Math.abs(a-s),i=Math.abs(a+e-s-s);return r<=n&&r<=i?a:n<=i?e:s}function cY(a){var e=a.map(function(s){return s.reduce(function(r,n){return r+Math.abs(n)},0)});return e.indexOf(Math.min.apply(null,e))}function FN(a,e,s){var r=e*s,n=Math.floor(r/8),i=16-(r-8*n+s),o=(1<<s)-1;return uI(a,n)>>i&o}function FE(a,e,s,r){var n=s*r,i=Math.floor(n/8),o=16-(n-8*i+r),l=(1<<r)-1,c=(e&l)<<o;(function(u,m,A){if(m+1<u.byteLength)u.setUint16(m,A,!1);else{var g=A>>8&255;u.setUint8(m,g)}})(a,i,uI(a,i)&~(l<<o)&65535|c)}function uI(a,e){return e+1<a.byteLength?a.getUint16(e,!1):a.getUint8(e)<<8}function dY(a){var e=0;if(a[e++]!==71||a[e++]!==73||a[e++]!==70||a[e++]!==56||(a[e++]+1&253)!=56||a[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var s=a[e++]|a[e++]<<8,r=a[e++]|a[e++]<<8,n=a[e++],i=n>>7,o=1<<1+(7&n);a[e++],a[e++];var l=null,c=null;i&&(l=e,c=o,e+=3*o);var u=!0,m=[],A=0,g=null,p=0,v=null;for(this.width=s,this.height=r;u&&e<a.length;)switch(a[e++]){case 33:switch(a[e++]){case 255:if(a[e]!==11||a[e+1]==78&&a[e+2]==69&&a[e+3]==84&&a[e+4]==83&&a[e+5]==67&&a[e+6]==65&&a[e+7]==80&&a[e+8]==69&&a[e+9]==50&&a[e+10]==46&&a[e+11]==48&&a[e+12]==3&&a[e+13]==1&&a[e+16]==0)e+=14,v=a[e++]|a[e++]<<8,e++;else for(e+=12;;){if(!((Q=a[e++])>=0))throw Error("Invalid block size");if(Q===0)break;e+=Q}break;case 249:if(a[e++]!==4||a[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=a[e++];A=a[e++]|a[e++]<<8,g=a[e++],1&b||(g=null),p=b>>2&7,e++;break;case 254:for(;;){if(!((Q=a[e++])>=0))throw Error("Invalid block size");if(Q===0)break;e+=Q}break;default:throw new Error("Unknown graphic control label: 0x"+a[e-1].toString(16))}break;case 44:var y=a[e++]|a[e++]<<8,w=a[e++]|a[e++]<<8,B=a[e++]|a[e++]<<8,j=a[e++]|a[e++]<<8,E=a[e++],S=E>>6&1,T=1<<1+(7&E),M=l,D=c,P=!1;E>>7&&(P=!0,M=e,D=T,e+=3*T);var Y=e;for(e++;;){var Q;if(!((Q=a[e++])>=0))throw Error("Invalid block size");if(Q===0)break;e+=Q}m.push({x:y,y:w,width:B,height:j,has_local_palette:P,palette_offset:M,palette_size:D,data_offset:Y,data_length:e-Y,transparent_index:g,interlaced:!!S,delay:A,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+a[e-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return v},this.frameInfo=function(L){if(L<0||L>=m.length)throw new Error("Frame index out of range.");return m[L]},this.decodeAndBlitFrameBGRA=function(L,ae){var ne=this.frameInfo(L),V=ne.width*ne.height,O=new Uint8Array(V);DE(a,ne.data_offset,O,V);var X=ne.palette_offset,$=ne.transparent_index;$===null&&($=256);var H=ne.width,te=s-H,K=H,I=4*(ne.y*s+ne.x),R=4*((ne.y+ne.height)*s+ne.x),G=I,se=4*te;ne.interlaced===!0&&(se+=4*s*7);for(var le=8,ye=0,De=O.length;ye<De;++ye){var me=O[ye];if(K===0&&(K=H,(G+=se)>=R&&(se=4*te+4*s*(le-1),G=I+(H+te)*(le<<1),le>>=1)),me===$)G+=4;else{var Te=a[X+3*me],we=a[X+3*me+1],st=a[X+3*me+2];ae[G++]=st,ae[G++]=we,ae[G++]=Te,ae[G++]=255}--K}},this.decodeAndBlitFrameRGBA=function(L,ae){var ne=this.frameInfo(L),V=ne.width*ne.height,O=new Uint8Array(V);DE(a,ne.data_offset,O,V);var X=ne.palette_offset,$=ne.transparent_index;$===null&&($=256);var H=ne.width,te=s-H,K=H,I=4*(ne.y*s+ne.x),R=4*((ne.y+ne.height)*s+ne.x),G=I,se=4*te;ne.interlaced===!0&&(se+=4*s*7);for(var le=8,ye=0,De=O.length;ye<De;++ye){var me=O[ye];if(K===0&&(K=H,(G+=se)>=R&&(se=4*te+4*s*(le-1),G=I+(H+te)*(le<<1),le>>=1)),me===$)G+=4;else{var Te=a[X+3*me],we=a[X+3*me+1],st=a[X+3*me+2];ae[G++]=Te,ae[G++]=we,ae[G++]=st,ae[G++]=255}--K}}}function DE(a,e,s,r){for(var n=a[e++],i=1<<n,o=i+1,l=o+1,c=n+1,u=(1<<c)-1,m=0,A=0,g=0,p=a[e++],v=new Int32Array(4096),b=null;;){for(;m<16&&p!==0;)A|=a[e++]<<m,m+=8,p===1?p=a[e++]:--p;if(m<c)break;var y=A&u;if(A>>=c,m-=c,y!==i){if(y===o)break;for(var w=y<l?y:b,B=0,j=w;j>i;)j=v[j]>>8,++B;var E=j;if(g+B+(w!==y?1:0)>r)return void Ca.log("Warning, gif stream longer than expected.");s[g++]=E;var S=g+=B;for(w!==y&&(s[g++]=E),j=w;B--;)j=v[j],s[--S]=255&j,j>>=8;b!==null&&l<4096&&(v[l++]=b<<8|E,l>=u+1&&c<12&&(++c,u=u<<1|1)),b=y}else l=o+1,u=(1<<(c=n+1))-1,b=null}return g!==r&&Ca.log("Warning, gif stream shorter than expected."),s}function DN(a){var e,s,r,n,i,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),m=new Array(64),A=new Array(65535),g=new Array(65535),p=new Array(64),v=new Array(64),b=[],y=0,w=7,B=new Array(64),j=new Array(64),E=new Array(64),S=new Array(256),T=new Array(2048),M=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ae=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],V=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function O(I,R){for(var G=0,se=0,le=new Array,ye=1;ye<=16;ye++){for(var De=1;De<=I[ye];De++)le[R[se]]=[],le[R[se]][0]=G,le[R[se]][1]=ye,se++,G++;G*=2}return le}function X(I){for(var R=I[0],G=I[1]-1;G>=0;)R&1<<G&&(y|=1<<w),G--,--w<0&&(y==255?($(255),$(0)):$(y),w=7,y=0)}function $(I){b.push(I)}function H(I){$(I>>8&255),$(255&I)}function te(I,R,G,se,le){for(var ye,De=le[0],me=le[240],Te=(function(yt,Oe){var ze,Le,oe,he,W,ve,Qe,Ze,J,He,xt=0;for(J=0;J<8;++J){ze=yt[xt],Le=yt[xt+1],oe=yt[xt+2],he=yt[xt+3],W=yt[xt+4],ve=yt[xt+5],Qe=yt[xt+6];var Xe=ze+(Ze=yt[xt+7]),Ct=ze-Ze,_e=Le+Qe,Se=Le-Qe,Ve=oe+ve,et=oe-ve,vt=he+W,Mt=he-W,Ye=Xe+vt,Et=Xe-vt,Gt=_e+Ve,ee=_e-Ve;yt[xt]=Ye+Gt,yt[xt+4]=Ye-Gt;var Ie=.707106781*(ee+Et);yt[xt+2]=Et+Ie,yt[xt+6]=Et-Ie;var ue=.382683433*((Ye=Mt+et)-(ee=Se+Ct)),fe=.5411961*Ye+ue,xe=1.306562965*ee+ue,Me=.707106781*(Gt=et+Se),ct=Ct+Me,Pt=Ct-Me;yt[xt+5]=Pt+fe,yt[xt+3]=Pt-fe,yt[xt+1]=ct+xe,yt[xt+7]=ct-xe,xt+=8}for(xt=0,J=0;J<8;++J){ze=yt[xt],Le=yt[xt+8],oe=yt[xt+16],he=yt[xt+24],W=yt[xt+32],ve=yt[xt+40],Qe=yt[xt+48];var ts=ze+(Ze=yt[xt+56]),as=ze-Ze,Zt=Le+Qe,Be=Le-Qe,mt=oe+ve,Nt=oe-ve,Ne=he+W,Je=he-W,ht=ts+Ne,It=ts-Ne,Pe=Zt+mt,Ke=Zt-mt;yt[xt]=ht+Pe,yt[xt+32]=ht-Pe;var nt=.707106781*(Ke+It);yt[xt+16]=It+nt,yt[xt+48]=It-nt;var zt=.382683433*((ht=Je+Nt)-(Ke=Be+as)),is=.5411961*ht+zt,ke=1.306562965*Ke+zt,de=.707106781*(Pe=Nt+Be),ie=as+de,Ue=as-de;yt[xt+40]=Ue+is,yt[xt+24]=Ue-is,yt[xt+8]=ie+ke,yt[xt+56]=ie-ke,xt++}for(J=0;J<64;++J)He=yt[J]*Oe[J],p[J]=He>0?He+.5|0:He-.5|0;return p})(I,R),we=0;we<64;++we)v[M[we]]=Te[we];var st=v[0]-G;G=v[0],st==0?X(se[0]):(X(se[g[ye=32767+st]]),X(A[ye]));for(var ce=63;ce>0&&v[ce]==0;)ce--;if(ce==0)return X(De),G;for(var tt,Ae=1;Ae<=ce;){for(var gt=Ae;v[Ae]==0&&Ae<=ce;)++Ae;var q=Ae-gt;if(q>=16){tt=q>>4;for(var Qt=1;Qt<=tt;++Qt)X(me);q&=15}ye=32767+v[Ae],X(le[(q<<4)+g[ye]]),X(A[ye]),Ae++}return ce!=63&&X(De),G}function K(I){I=Math.min(Math.max(I,1),100),i!=I&&((function(R){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],se=0;se<64;se++){var le=o((G[se]*R+50)/100);le=Math.min(Math.max(le,1),255),l[M[se]]=le}for(var ye=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],De=0;De<64;De++){var me=o((ye[De]*R+50)/100);me=Math.min(Math.max(me,1),255),c[M[De]]=me}for(var Te=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],we=0,st=0;st<8;st++)for(var ce=0;ce<8;ce++)u[we]=1/(l[M[we]]*Te[st]*Te[ce]*8),m[we]=1/(c[M[we]]*Te[st]*Te[ce]*8),we++})(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),i=I)}this.encode=function(I,R){R&&K(R),b=new Array,y=0,w=7,H(65496),H(65504),H(16),$(74),$(70),$(73),$(70),$(0),$(1),$(1),$(0),H(1),H(1),$(0),$(0),(function(){H(65499),H(132),$(0);for(var Le=0;Le<64;Le++)$(l[Le]);$(1);for(var oe=0;oe<64;oe++)$(c[oe])})(),(function(Le,oe){H(65472),H(17),$(8),H(oe),H(Le),$(3),$(1),$(17),$(0),$(2),$(17),$(1),$(3),$(17),$(1)})(I.width,I.height),(function(){H(65476),H(418),$(0);for(var Le=0;Le<16;Le++)$(D[Le+1]);for(var oe=0;oe<=11;oe++)$(P[oe]);$(16);for(var he=0;he<16;he++)$(Y[he+1]);for(var W=0;W<=161;W++)$(Q[W]);$(1);for(var ve=0;ve<16;ve++)$(L[ve+1]);for(var Qe=0;Qe<=11;Qe++)$(ae[Qe]);$(17);for(var Ze=0;Ze<16;Ze++)$(ne[Ze+1]);for(var J=0;J<=161;J++)$(V[J])})(),H(65498),H(12),$(3),$(1),$(0),$(2),$(17),$(3),$(17),$(0),$(63),$(0);var G=0,se=0,le=0;y=0,w=7,this.encode.displayName="_encode_";for(var ye,De,me,Te,we,st,ce,tt,Ae,gt=I.data,q=I.width,Qt=I.height,yt=4*q,Oe=0;Oe<Qt;){for(ye=0;ye<yt;){for(we=yt*Oe+ye,ce=-1,tt=0,Ae=0;Ae<64;Ae++)st=we+(tt=Ae>>3)*yt+(ce=4*(7&Ae)),Oe+tt>=Qt&&(st-=yt*(Oe+1+tt-Qt)),ye+ce>=yt&&(st-=ye+ce-yt+4),De=gt[st++],me=gt[st++],Te=gt[st++],B[Ae]=(T[De]+T[me+256|0]+T[Te+512|0]>>16)-128,j[Ae]=(T[De+768|0]+T[me+1024|0]+T[Te+1280|0]>>16)-128,E[Ae]=(T[De+1280|0]+T[me+1536|0]+T[Te+1792|0]>>16)-128;G=te(B,u,G,e,r),se=te(j,m,se,s,n),le=te(E,m,le,s,n),ye+=32}Oe+=8}if(w>=0){var ze=[];ze[1]=w+1,ze[0]=(1<<w+1)-1,X(ze)}return H(65497),new Uint8Array(b)},a=a||50,(function(){for(var I=String.fromCharCode,R=0;R<256;R++)S[R]=I(R)})(),e=O(D,P),s=O(L,ae),r=O(Y,Q),n=O(ne,V),(function(){for(var I=1,R=2,G=1;G<=15;G++){for(var se=I;se<R;se++)g[32767+se]=G,A[32767+se]=[],A[32767+se][1]=G,A[32767+se][0]=se;for(var le=-(R-1);le<=-I;le++)g[32767+le]=G,A[32767+le]=[],A[32767+le][1]=G,A[32767+le][0]=R-1+le;I<<=1,R<<=1}})(),(function(){for(var I=0;I<256;I++)T[I]=19595*I,T[I+256|0]=38470*I,T[I+512|0]=7471*I+32768,T[I+768|0]=-11059*I,T[I+1024|0]=-21709*I,T[I+1280|0]=32768*I+8421375,T[I+1536|0]=-27439*I,T[I+1792|0]=-5329*I})(),K(a)}function xc(a,e){if(this.pos=0,this.buffer=a,this.datav=new DataView(a.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function TE(a){function e(P){if(!P)throw Error("assert :P")}function s(P,Y,Q){for(var L=0;4>L;L++)if(P[Y+L]!=Q.charCodeAt(L))return!0;return!1}function r(P,Y,Q,L,ae){for(var ne=0;ne<ae;ne++)P[Y+ne]=Q[L+ne]}function n(P,Y,Q,L){for(var ae=0;ae<L;ae++)P[Y+ae]=Q}function i(P){return new Int32Array(P)}function o(P,Y){for(var Q=[],L=0;L<P;L++)Q.push(new Y);return Q}function l(P,Y){var Q=[];return(function L(ae,ne,V){for(var O=V[ne],X=0;X<O&&(ae.push(V.length>ne+1?[]:new Y),!(V.length<ne+1));X++)L(ae[X],ne+1,V)})(Q,0,P),Q}var c=function(){var P=this;function Y(N,k){for(var z=1<<k-1>>>0;N&z;)z>>>=1;return z?(N&z-1)+z:N}function Q(N,k,z,Z,ge){e(!(Z%z));do N[k+(Z-=z)]=ge;while(0<Z)}function L(N,k,z,Z,ge){if(e(2328>=ge),512>=ge)var je=i(512);else if((je=i(ge))==null)return 0;return(function(Ce,Fe,Re,qe,ut,Lt){var $e,wt,Ft=Fe,Xt=1<<Re,Tt=i(16),Wt=i(16);for(e(ut!=0),e(qe!=null),e(Ce!=null),e(0<Re),wt=0;wt<ut;++wt){if(15<qe[wt])return 0;++Tt[qe[wt]]}if(Tt[0]==ut)return 0;for(Wt[1]=0,$e=1;15>$e;++$e){if(Tt[$e]>1<<$e)return 0;Wt[$e+1]=Wt[$e]+Tt[$e]}for(wt=0;wt<ut;++wt)$e=qe[wt],0<qe[wt]&&(Lt[Wt[$e]++]=wt);if(Wt[15]==1)return(qe=new ae).g=0,qe.value=Lt[0],Q(Ce,Ft,1,Xt,qe),Xt;var rs,fs=-1,us=Xt-1,Ls=0,_s=1,tr=1,Fs=1<<Re;for(wt=0,$e=1,ut=2;$e<=Re;++$e,ut<<=1){if(_s+=tr<<=1,0>(tr-=Tt[$e]))return 0;for(;0<Tt[$e];--Tt[$e])(qe=new ae).g=$e,qe.value=Lt[wt++],Q(Ce,Ft+Ls,ut,Fs,qe),Ls=Y(Ls,$e)}for($e=Re+1,ut=2;15>=$e;++$e,ut<<=1){if(_s+=tr<<=1,0>(tr-=Tt[$e]))return 0;for(;0<Tt[$e];--Tt[$e]){if(qe=new ae,(Ls&us)!=fs){for(Ft+=Fs,rs=1<<(fs=$e)-Re;15>fs&&!(0>=(rs-=Tt[fs]));)++fs,rs<<=1;Xt+=Fs=1<<(rs=fs-Re),Ce[Fe+(fs=Ls&us)].g=rs+Re,Ce[Fe+fs].value=Ft-Fe-fs}qe.g=$e-Re,qe.value=Lt[wt++],Q(Ce,Ft+(Ls>>Re),ut,Fs,qe),Ls=Y(Ls,$e)}}return _s!=2*Wt[15]-1?0:Xt})(N,k,z,Z,ge,je)}function ae(){this.value=this.g=0}function ne(){this.value=this.g=0}function V(){this.G=o(5,ae),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Mc,ne)}function O(N,k,z,Z){e(N!=null),e(k!=null),e(2147483648>Z),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=k,N.pa=z,N.Jd=k,N.Yc=z+Z,N.Zc=4<=Z?z+Z-4+1:z,De(N)}function X(N,k){for(var z=0;0<k--;)z|=Te(N,128)<<k;return z}function $(N,k){var z=X(N,k);return me(N)?-z:z}function H(N,k,z,Z){var ge,je=0;for(e(N!=null),e(k!=null),e(4294967288>Z),N.Sb=Z,N.Ra=0,N.u=0,N.h=0,4<Z&&(Z=4),ge=0;ge<Z;++ge)je+=k[z+ge]<<8*ge;N.Ra=je,N.bb=Z,N.oa=k,N.pa=z}function te(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<yl-8>>>0,++N.bb,N.u-=8;se(N)&&(N.h=1,N.u=0)}function K(N,k){if(e(0<=k),!N.h&&k<=wi){var z=G(N)&Li[k];return N.u+=k,te(N),z}return N.h=1,N.u=0}function I(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(N){return N.Ra>>>(N.u&yl-1)>>>0}function se(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>yl}function le(N,k){N.u=k,N.h=se(N)}function ye(N){N.u>=vl&&(e(N.u>=vl),te(N))}function De(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function me(N){return X(N,1)}function Te(N,k){var z=N.Ca;0>N.b&&De(N);var Z=N.b,ge=z*k>>>8,je=(N.I>>>Z>ge)+0;for(je?(z-=ge,N.I-=ge+1<<Z>>>0):z=ge+1,Z=z,ge=0;256<=Z;)ge+=8,Z>>=8;return Z=7^ge+nc[Z],N.b-=Z,N.Ca=(z<<Z)-1,je}function we(N,k,z){N[k+0]=z>>24&255,N[k+1]=z>>16&255,N[k+2]=z>>8&255,N[k+3]=255&z}function st(N,k){return N[k+0]|N[k+1]<<8}function ce(N,k){return st(N,k)|N[k+2]<<16}function tt(N,k){return st(N,k)|st(N,k+2)<<16}function Ae(N,k){var z=1<<k;return e(N!=null),e(0<k),N.X=i(z),N.X==null?0:(N.Mb=32-k,N.Xa=k,1)}function gt(N,k){e(N!=null),e(k!=null),e(N.Xa==k.Xa),r(k.X,0,N.X,0,1<<k.Xa)}function q(){this.X=[],this.Xa=this.Mb=0}function Qt(N,k,z,Z){e(z!=null),e(Z!=null);var ge=z[0],je=Z[0];return ge==0&&(ge=(N*je+k/2)/k),je==0&&(je=(k*ge+N/2)/N),0>=ge||0>=je?0:(z[0]=ge,Z[0]=je,1)}function yt(N,k){return N+(1<<k)-1>>>k}function Oe(N,k){return((4278255360&N)+(4278255360&k)>>>0&4278255360)+((16711935&N)+(16711935&k)>>>0&16711935)>>>0}function ze(N,k){P[k]=function(z,Z,ge,je,Ce,Fe,Re){var qe;for(qe=0;qe<Ce;++qe){var ut=P[N](Fe[Re+qe-1],ge,je+qe);Fe[Re+qe]=Oe(z[Z+qe],ut)}}}function Le(){this.ud=this.hd=this.jd=0}function oe(N,k){return((4278124286&(N^k))>>>1)+(N&k)>>>0}function he(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function W(N,k){return he(N+(N-k+.5>>1))}function ve(N,k,z){return Math.abs(k-z)-Math.abs(N-z)}function Qe(N,k,z,Z,ge,je,Ce){for(Z=je[Ce-1],z=0;z<ge;++z)je[Ce+z]=Z=Oe(N[k+z],Z)}function Ze(N,k,z,Z,ge){var je;for(je=0;je<z;++je){var Ce=N[k+je],Fe=Ce>>8&255,Re=16711935&(Re=(Re=16711935&Ce)+((Fe<<16)+Fe));Z[ge+je]=(4278255360&Ce)+Re>>>0}}function J(N,k){k.jd=255&N,k.hd=N>>8&255,k.ud=N>>16&255}function He(N,k,z,Z,ge,je){var Ce;for(Ce=0;Ce<Z;++Ce){var Fe=k[z+Ce],Re=Fe>>>8,qe=Fe,ut=255&(ut=(ut=Fe>>>16)+((N.jd<<24>>24)*(Re<<24>>24)>>>5));qe=255&(qe=(qe+=(N.hd<<24>>24)*(Re<<24>>24)>>>5)+((N.ud<<24>>24)*(ut<<24>>24)>>>5)),ge[je+Ce]=(4278255360&Fe)+(ut<<16)+qe}}function xt(N,k,z,Z,ge){P[k]=function(je,Ce,Fe,Re,qe,ut,Lt,$e,wt){for(Re=Lt;Re<$e;++Re)for(Lt=0;Lt<wt;++Lt)qe[ut++]=ge(Fe[Z(je[Ce++])])},P[N]=function(je,Ce,Fe,Re,qe,ut,Lt){var $e=8>>je.b,wt=je.Ea,Ft=je.K[0],Xt=je.w;if(8>$e)for(je=(1<<je.b)-1,Xt=(1<<$e)-1;Ce<Fe;++Ce){var Tt,Wt=0;for(Tt=0;Tt<wt;++Tt)Tt&je||(Wt=Z(Re[qe++])),ut[Lt++]=ge(Ft[Wt&Xt]),Wt>>=$e}else P["VP8LMapColor"+z](Re,qe,Ft,Xt,ut,Lt,Ce,Fe,wt)}}function Xe(N,k,z,Z,ge){for(z=k+z;k<z;){var je=N[k++];Z[ge++]=je>>16&255,Z[ge++]=je>>8&255,Z[ge++]=255&je}}function Ct(N,k,z,Z,ge){for(z=k+z;k<z;){var je=N[k++];Z[ge++]=je>>16&255,Z[ge++]=je>>8&255,Z[ge++]=255&je,Z[ge++]=je>>24&255}}function _e(N,k,z,Z,ge){for(z=k+z;k<z;){var je=(Ce=N[k++])>>16&240|Ce>>12&15,Ce=240&Ce|Ce>>28&15;Z[ge++]=je,Z[ge++]=Ce}}function Se(N,k,z,Z,ge){for(z=k+z;k<z;){var je=(Ce=N[k++])>>16&248|Ce>>13&7,Ce=Ce>>5&224|Ce>>3&31;Z[ge++]=je,Z[ge++]=Ce}}function Ve(N,k,z,Z,ge){for(z=k+z;k<z;){var je=N[k++];Z[ge++]=255&je,Z[ge++]=je>>8&255,Z[ge++]=je>>16&255}}function et(N,k,z,Z,ge,je){if(je==0)for(z=k+z;k<z;)we(Z,((je=N[k++])[0]>>24|je[1]>>8&65280|je[2]<<8&16711680|je[3]<<24)>>>0),ge+=32;else r(Z,ge,N,k,z)}function vt(N,k){P[k][0]=P[N+"0"],P[k][1]=P[N+"1"],P[k][2]=P[N+"2"],P[k][3]=P[N+"3"],P[k][4]=P[N+"4"],P[k][5]=P[N+"5"],P[k][6]=P[N+"6"],P[k][7]=P[N+"7"],P[k][8]=P[N+"8"],P[k][9]=P[N+"9"],P[k][10]=P[N+"10"],P[k][11]=P[N+"11"],P[k][12]=P[N+"12"],P[k][13]=P[N+"13"],P[k][14]=P[N+"0"],P[k][15]=P[N+"0"]}function Mt(N){return N==fm||N==UA||N==qu||N==QA}function Ye(){this.eb=[],this.size=this.A=this.fb=0}function Et(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Gt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ye,this.f.kb=new Et,this.sd=null}function ee(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ie(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ue(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function fe(N,k){var z=N.T,Z=k.ba.f.RGBA,ge=Z.eb,je=Z.fb+N.ka*Z.A,Ce=ei[k.ba.S],Fe=N.y,Re=N.O,qe=N.f,ut=N.N,Lt=N.ea,$e=N.W,wt=k.cc,Ft=k.dc,Xt=k.Mc,Tt=k.Nc,Wt=N.ka,rs=N.ka+N.T,fs=N.U,us=fs+1>>1;for(Wt==0?Ce(Fe,Re,null,null,qe,ut,Lt,$e,qe,ut,Lt,$e,ge,je,null,null,fs):(Ce(k.ec,k.fc,Fe,Re,wt,Ft,Xt,Tt,qe,ut,Lt,$e,ge,je-Z.A,ge,je,fs),++z);Wt+2<rs;Wt+=2)wt=qe,Ft=ut,Xt=Lt,Tt=$e,ut+=N.Rc,$e+=N.Rc,je+=2*Z.A,Ce(Fe,(Re+=2*N.fa)-N.fa,Fe,Re,wt,Ft,Xt,Tt,qe,ut,Lt,$e,ge,je-Z.A,ge,je,fs);return Re+=N.fa,N.j+rs<N.o?(r(k.ec,k.fc,Fe,Re,fs),r(k.cc,k.dc,qe,ut,us),r(k.Mc,k.Nc,Lt,$e,us),z--):1&rs||Ce(Fe,Re,null,null,qe,ut,Lt,$e,qe,ut,Lt,$e,ge,je+Z.A,null,null,fs),z}function xe(N,k,z){var Z=N.F,ge=[N.J];if(Z!=null){var je=N.U,Ce=k.ba.S,Fe=Ce==Am||Ce==qu;k=k.ba.f.RGBA;var Re=[0],qe=N.ka;Re[0]=N.T,N.Kb&&(qe==0?--Re[0]:(--qe,ge[0]-=N.width),N.j+N.ka+N.T==N.o&&(Re[0]=N.o-N.j-qe));var ut=k.eb;qe=k.fb+qe*k.A,N=dm(Z,ge[0],N.width,je,Re,ut,qe+(Fe?0:3),k.A),e(z==Re),N&&Mt(Ce)&&Ud(ut,qe,Fe,je,Re,k.A)}return 0}function Me(N){var k=N.ma,z=k.ba.S,Z=11>z,ge=z==di||z==go||z==Am||z==$u||z==12||Mt(z);if(k.memory=null,k.Ib=null,k.Jb=null,k.Nd=null,!ac(k.Oa,N,ge?11:12))return 0;if(ge&&Mt(z)&&im(),N.da)alert("todo:use_scaling");else{if(Z){if(k.Ib=ue,N.Kb){if(z=N.U+1>>1,k.memory=i(N.U+2*z),k.memory==null)return 0;k.ec=k.memory,k.fc=0,k.cc=k.ec,k.dc=k.fc+N.U,k.Mc=k.cc,k.Nc=k.dc+z,k.Ib=fe,im()}}else alert("todo:EmitYUV");ge&&(k.Jb=xe,Z&&Vo())}if(Z&&!zc){for(N=0;256>N;++N)ti[N]=89858*(N-128)+Yu>>No,u1[N]=-22014*(N-128)+Yu,L0[N]=-45773*(N-128),qA[N]=113618*(N-128)+Yu>>No;for(N=zd;N<Vc;++N)k=76283*(N-16)+Yu>>No,h1[N-zd]=xs(k,255),m1[N-zd]=xs(k+8>>4,15);zc=1}return 1}function ct(N){var k=N.ma,z=N.U,Z=N.T;return e(!(1&N.ka)),0>=z||0>=Z?0:(z=k.Ib(N,k),k.Jb!=null&&k.Jb(N,k,z),k.Dc+=z,1)}function Pt(N){N.ma.memory=null}function ts(N,k,z,Z){return K(N,8)!=47?0:(k[0]=K(N,14)+1,z[0]=K(N,14)+1,Z[0]=K(N,1),K(N,3)!=0?0:!N.h)}function as(N,k){if(4>N)return N+1;var z=N-2>>1;return(2+(1&N)<<z)+K(k,z)+1}function Zt(N,k){return 120<k?k-120:1<=(z=((z=bo[k-1])>>4)*N+(8-(15&z)))?z:1;var z}function Be(N,k,z){var Z=G(z),ge=N[k+=255&Z].g-8;return 0<ge&&(le(z,z.u+8),Z=G(z),k+=N[k].value,k+=Z&(1<<ge)-1),le(z,z.u+N[k].g),N[k].value}function mt(N,k,z){return z.g+=N.g,z.value+=N.value<<k>>>0,e(8>=z.g),N.g}function Nt(N,k,z){var Z=N.xc;return e((k=Z==0?0:N.vc[N.md*(z>>Z)+(k>>Z)])<N.Wb),N.Ya[k]}function Ne(N,k,z,Z){var ge=N.ab,je=N.c*k,Ce=N.C;k=Ce+k;var Fe=z,Re=Z;for(Z=N.Ta,z=N.Ua;0<ge--;){var qe=N.gc[ge],ut=Ce,Lt=k,$e=Fe,wt=Re,Ft=(Re=Z,Fe=z,qe.Ea);switch(e(ut<Lt),e(Lt<=qe.nc),qe.hc){case 2:Ja($e,wt,(Lt-ut)*Ft,Re,Fe);break;case 0:var Xt=ut,Tt=Lt,Wt=Re,rs=Fe,fs=(Fs=qe).Ea;Xt==0&&(Qu($e,wt,null,null,1,Wt,rs),Qe($e,wt+1,0,0,fs-1,Wt,rs+1),wt+=fs,rs+=fs,++Xt);for(var us=1<<Fs.b,Ls=us-1,_s=yt(fs,Fs.b),tr=Fs.K,Fs=Fs.w+(Xt>>Fs.b)*_s;Xt<Tt;){var pr=tr,ja=Fs,ir=1;for(Hu($e,wt,Wt,rs-fs,1,Wt,rs);ir<fs;){var Cs=(ir&~Ls)+us;Cs>fs&&(Cs=fs),(0,ic[pr[ja++]>>8&15])($e,wt+ +ir,Wt,rs+ir-fs,Cs-ir,Wt,rs+ir),ir=Cs}wt+=fs,rs+=fs,++Xt&Ls||(Fs+=_s)}Lt!=qe.nc&&r(Re,Fe-Ft,Re,Fe+(Lt-ut-1)*Ft,Ft);break;case 1:for(Ft=$e,Tt=wt,fs=($e=qe.Ea)-(rs=$e&~(Wt=(wt=1<<qe.b)-1)),Xt=yt($e,qe.b),us=qe.K,qe=qe.w+(ut>>qe.b)*Xt;ut<Lt;){for(Ls=us,_s=qe,tr=new Le,Fs=Tt+rs,pr=Tt+$e;Tt<Fs;)J(Ls[_s++],tr),Vu(tr,Ft,Tt,wt,Re,Fe),Tt+=wt,Fe+=wt;Tt<pr&&(J(Ls[_s++],tr),Vu(tr,Ft,Tt,fs,Re,Fe),Tt+=fs,Fe+=fs),++ut&Wt||(qe+=Xt)}break;case 3:if($e==Re&&wt==Fe&&0<qe.b){for(Tt=Re,$e=Ft=Fe+(Lt-ut)*Ft-(rs=(Lt-ut)*yt(qe.Ea,qe.b)),wt=Re,Wt=Fe,Xt=[],rs=(fs=rs)-1;0<=rs;--rs)Xt[rs]=wt[Wt+rs];for(rs=fs-1;0<=rs;--rs)Tt[$e+rs]=Xt[rs];IA(qe,ut,Lt,Re,Ft,Re,Fe)}else IA(qe,ut,Lt,$e,wt,Re,Fe)}Fe=Z,Re=z}Re!=z&&r(Z,z,Fe,Re,je)}function Je(N,k){var z=N.V,Z=N.Ba+N.c*N.C,ge=k-N.C;if(e(k<=N.l.o),e(16>=ge),0<ge){var je=N.l,Ce=N.Ta,Fe=N.Ua,Re=je.width;if(Ne(N,ge,z,Z),ge=Fe=[Fe],e((z=N.C)<(Z=k)),e(je.v<je.va),Z>je.o&&(Z=je.o),z<je.j){var qe=je.j-z;z=je.j,ge[0]+=qe*Re}if(z>=Z?z=0:(ge[0]+=4*je.v,je.ka=z-je.j,je.U=je.va-je.v,je.T=Z-z,z=1),z){if(Fe=Fe[0],11>(z=N.ca).S){var ut=z.f.RGBA,Lt=(Z=z.S,ge=je.U,je=je.T,qe=ut.eb,ut.A),$e=je;for(ut=ut.fb+N.Ma*ut.A;0<$e--;){var wt=Ce,Ft=Fe,Xt=ge,Tt=qe,Wt=ut;switch(Z){case RA:zu(wt,Ft,Xt,Tt,Wt);break;case di:oc(wt,Ft,Xt,Tt,Wt);break;case fm:oc(wt,Ft,Xt,Tt,Wt),Ud(Tt,Wt,0,Xt,1,0);break;case OA:Rd(wt,Ft,Xt,Tt,Wt);break;case go:et(wt,Ft,Xt,Tt,Wt,1);break;case UA:et(wt,Ft,Xt,Tt,Wt,1),Ud(Tt,Wt,0,Xt,1,0);break;case Am:et(wt,Ft,Xt,Tt,Wt,0);break;case qu:et(wt,Ft,Xt,Tt,Wt,0),Ud(Tt,Wt,1,Xt,1,0);break;case $u:lc(wt,Ft,Xt,Tt,Wt);break;case QA:lc(wt,Ft,Xt,Tt,Wt),po(Tt,Wt,Xt,1,0);break;case Rc:jl(wt,Ft,Xt,Tt,Wt);break;default:e(0)}Fe+=Re,ut+=Lt}N.Ma+=je}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=z.height)}}N.C=k,e(N.C<=N.i)}function ht(N){var k;if(0<N.ua)return 0;for(k=0;k<N.Wb;++k){var z=N.Ya[k].G,Z=N.Ya[k].H;if(0<z[1][Z[1]+0].g||0<z[2][Z[2]+0].g||0<z[3][Z[3]+0].g)return 0}return 1}function It(N,k,z,Z,ge,je){if(N.Z!=0){var Ce=N.qd,Fe=N.rd;for(e(uc[N.Z]!=null);k<z;++k)uc[N.Z](Ce,Fe,Z,ge,Z,ge,je),Ce=Z,Fe=ge,ge+=je;N.qd=Ce,N.rd=Fe}}function Pe(N,k){var z=N.l.ma,Z=z.Z==0||z.Z==1?N.l.j:N.C;if(Z=N.C<Z?Z:N.C,e(k<=N.l.o),k>Z){var ge=N.l.width,je=z.ca,Ce=z.tb+ge*Z,Fe=N.V,Re=N.Ba+N.c*Z,qe=N.gc;e(N.ab==1),e(qe[0].hc==3),Nl(qe[0],Z,k,Fe,Re,je,Ce),It(z,Z,k,je,Ce,ge)}N.C=N.Ma=k}function Ke(N,k,z,Z,ge,je,Ce){var Fe=N.$/Z,Re=N.$%Z,qe=N.m,ut=N.s,Lt=z+N.$,$e=Lt;ge=z+Z*ge;var wt=z+Z*je,Ft=280+ut.ua,Xt=N.Pb?Fe:16777216,Tt=0<ut.ua?ut.Wa:null,Wt=ut.wc,rs=Lt<wt?Nt(ut,Re,Fe):null;e(N.C<je),e(wt<=ge);var fs=!1;e:for(;;){for(;fs||Lt<wt;){var us=0;if(Fe>=Xt){var Ls=Lt-z;e((Xt=N).Pb),Xt.wd=Xt.m,Xt.xd=Ls,0<Xt.s.ua&&gt(Xt.s.Wa,Xt.s.vb),Xt=Fe+Oc}if(Re&Wt||(rs=Nt(ut,Re,Fe)),e(rs!=null),rs.Qb&&(k[Lt]=rs.qb,fs=!0),!fs)if(ye(qe),rs.jc){us=qe,Ls=k;var _s=Lt,tr=rs.pd[G(us)&Mc-1];e(rs.jc),256>tr.g?(le(us,us.u+tr.g),Ls[_s]=tr.value,us=0):(le(us,us.u+tr.g-256),e(256<=tr.value),us=tr.value),us==0&&(fs=!0)}else us=Be(rs.G[0],rs.H[0],qe);if(qe.h)break;if(fs||256>us){if(!fs)if(rs.nd)k[Lt]=(rs.qb|us<<8)>>>0;else{if(ye(qe),fs=Be(rs.G[1],rs.H[1],qe),ye(qe),Ls=Be(rs.G[2],rs.H[2],qe),_s=Be(rs.G[3],rs.H[3],qe),qe.h)break;k[Lt]=(_s<<24|fs<<16|us<<8|Ls)>>>0}if(fs=!1,++Lt,++Re>=Z&&(Re=0,++Fe,Ce!=null&&Fe<=je&&!(Fe%16)&&Ce(N,Fe),Tt!=null))for(;$e<Lt;)us=k[$e++],Tt.X[(506832829*us&4294967295)>>>Tt.Mb]=us}else if(280>us){if(us=as(us-256,qe),Ls=Be(rs.G[4],rs.H[4],qe),ye(qe),Ls=Zt(Z,Ls=as(Ls,qe)),qe.h)break;if(Lt-z<Ls||ge-Lt<us)break e;for(_s=0;_s<us;++_s)k[Lt+_s]=k[Lt+_s-Ls];for(Lt+=us,Re+=us;Re>=Z;)Re-=Z,++Fe,Ce!=null&&Fe<=je&&!(Fe%16)&&Ce(N,Fe);if(e(Lt<=ge),Re&Wt&&(rs=Nt(ut,Re,Fe)),Tt!=null)for(;$e<Lt;)us=k[$e++],Tt.X[(506832829*us&4294967295)>>>Tt.Mb]=us}else{if(!(us<Ft))break e;for(fs=us-280,e(Tt!=null);$e<Lt;)us=k[$e++],Tt.X[(506832829*us&4294967295)>>>Tt.Mb]=us;us=Lt,e(!(fs>>>(Ls=Tt).Xa)),k[us]=Ls.X[fs],fs=!0}fs||e(qe.h==se(qe))}if(N.Pb&&qe.h&&Lt<ge)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&gt(N.s.vb,N.s.Wa);else{if(qe.h)break e;Ce?.(N,Fe>je?je:Fe),N.a=0,N.$=Lt-z}return 1}return N.a=3,0}function nt(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var k=N.Wa;k!=null&&(k.X=null),N.vb=null,e(N!=null)}function zt(){var N=new Zs;return N==null?null:(N.a=0,N.xb=tg,vt("Predictor","VP8LPredictors"),vt("Predictor","VP8LPredictors_C"),vt("PredictorAdd","VP8LPredictorsAdd"),vt("PredictorAdd","VP8LPredictorsAdd_C"),Ja=Ze,Vu=He,zu=Xe,oc=Ct,lc=_e,jl=Se,Rd=Ve,P.VP8LMapColor32b=wl,P.VP8LMapColor8b=Xn,N)}function is(N,k,z,Z,ge){var je=1,Ce=[N],Fe=[k],Re=Z.m,qe=Z.s,ut=null,Lt=0;e:for(;;){if(z)for(;je&&K(Re,1);){var $e=Ce,wt=Fe,Ft=Z,Xt=1,Tt=Ft.m,Wt=Ft.gc[Ft.ab],rs=K(Tt,2);if(Ft.Oc&1<<rs)je=0;else{switch(Ft.Oc|=1<<rs,Wt.hc=rs,Wt.Ea=$e[0],Wt.nc=wt[0],Wt.K=[null],++Ft.ab,e(4>=Ft.ab),rs){case 0:case 1:Wt.b=K(Tt,3)+2,Xt=is(yt(Wt.Ea,Wt.b),yt(Wt.nc,Wt.b),0,Ft,Wt.K),Wt.K=Wt.K[0];break;case 3:var fs,us=K(Tt,8)+1,Ls=16<us?0:4<us?1:2<us?2:3;if($e[0]=yt(Wt.Ea,Ls),Wt.b=Ls,fs=Xt=is(us,1,0,Ft,Wt.K)){var _s,tr=us,Fs=Wt,pr=1<<(8>>Fs.b),ja=i(pr);if(ja==null)fs=0;else{var ir=Fs.K[0],Cs=Fs.w;for(ja[0]=Fs.K[0][0],_s=1;_s<1*tr;++_s)ja[_s]=Oe(ir[Cs+_s],ja[_s-1]);for(;_s<4*pr;++_s)ja[_s]=0;Fs.K[0]=null,Fs.K[0]=ja,fs=1}}Xt=fs;break;case 2:break;default:e(0)}je=Xt}}if(Ce=Ce[0],Fe=Fe[0],je&&K(Re,1)&&!(je=1<=(Lt=K(Re,4))&&11>=Lt)){Z.a=3;break e}var ys;if(ys=je)t:{var Da,Ys,cr,Gr=Z,Nn=Ce,si=Fe,ga=Lt,un=z,ui=Gr.m,hn=Gr.s,Ar=[null],Lr=1,Ta=0,Hr=yo[ga];s:for(;;){if(un&&K(ui,1)){var jn=K(ui,3)+2,Pa=yt(Nn,jn),Mr=yt(si,jn),tn=Pa*Mr;if(!is(Pa,Mr,0,Gr,Ar))break s;for(Ar=Ar[0],hn.xc=jn,Da=0;Da<tn;++Da){var Wr=Ar[Da]>>8&65535;Ar[Da]=Wr,Wr>=Lr&&(Lr=Wr+1)}}if(ui.h)break s;for(Ys=0;5>Ys;++Ys){var mn=Hd[Ys];!Ys&&0<ga&&(mn+=1<<ga),Ta<mn&&(Ta=mn)}var An=o(Lr*Hr,ae),oa=Lr,Dr=o(oa,V);if(Dr==null)var hi=null;else e(65536>=oa),hi=Dr;var Qa=i(Ta);if(hi==null||Qa==null||An==null){Gr.a=1;break s}var Vs=An;for(Da=cr=0;Da<Lr;++Da){var zs=hi[Da],Rr=zs.G,Mi=zs.H,jo=0,ji=1,fn=0;for(Ys=0;5>Ys;++Ys){mn=Hd[Ys],Rr[Ys]=Vs,Mi[Ys]=cr,!Ys&&0<ga&&(mn+=1<<ga);a:{var $c,qc=mn,WA=Gr,xa=Qa,rg=Vs,ag=cr,YA=0,hc=WA.m,A1=K(hc,1);if(n(xa,0,0,qc),A1){var ng=K(hc,1)+1,ig=K(hc,1),KA=K(hc,ig==0?1:8);xa[KA]=1,ng==2&&(xa[KA=K(hc,8)]=1);var On=1}else{var Ha=i(19),bm=K(hc,4)+4;if(19<bm){WA.a=3;var Gc=0;break a}for($c=0;$c<bm;++$c)Ha[pm[$c]]=K(hc,3);var Xu=void 0,$d=void 0,kl=WA,XA=Ha,Ju=qc,JA=xa,ZA=0,mc=kl.m,og=8,lg=o(128,ae);r:for(;L(lg,0,7,XA,19);){if(K(mc,1)){var M0=2+2*K(mc,3);if((Xu=2+K(mc,M0))>Ju)break r}else Xu=Ju;for($d=0;$d<Ju&&Xu--;){ye(mc);var cg=lg[0+(127&G(mc))];le(mc,mc.u+cg.g);var Wc=cg.value;if(16>Wc)JA[$d++]=Wc,Wc!=0&&(og=Wc);else{var R0=Wc==16,O0=Wc-16,U0=Gu[O0],dg=K(mc,xo[O0])+U0;if($d+dg>Ju)break r;for(var Q0=R0?og:0;0<dg--;)JA[$d++]=Q0}}ZA=1;break r}ZA||(kl.a=3),On=ZA}(On=On&&!hc.h)&&(YA=L(rg,ag,8,xa,qc)),On&&YA!=0?Gc=YA:(WA.a=3,Gc=0)}if(Gc==0)break s;if(ji&&HA[Ys]==1&&(ji=Vs[cr].g==0),jo+=Vs[cr].g,cr+=Gc,3>=Ys){var qd,ef=Qa[0];for(qd=1;qd<mn;++qd)Qa[qd]>ef&&(ef=Qa[qd]);fn+=ef}}if(zs.nd=ji,zs.Qb=0,ji&&(zs.qb=(Rr[3][Mi[3]+0].value<<24|Rr[1][Mi[1]+0].value<<16|Rr[2][Mi[2]+0].value)>>>0,jo==0&&256>Rr[0][Mi[0]+0].value&&(zs.Qb=1,zs.qb+=Rr[0][Mi[0]+0].value<<8)),zs.jc=!zs.Qb&&6>fn,zs.jc){var ym,Bl=zs;for(ym=0;ym<Mc;++ym){var Ac=ym,fc=Bl.pd[Ac],tf=Bl.G[0][Bl.H[0]+Ac];256<=tf.value?(fc.g=tf.g+256,fc.value=tf.value):(fc.g=0,fc.value=0,Ac>>=mt(tf,8,fc),Ac>>=mt(Bl.G[1][Bl.H[1]+Ac],16,fc),Ac>>=mt(Bl.G[2][Bl.H[2]+Ac],0,fc),mt(Bl.G[3][Bl.H[3]+Ac],24,fc))}}}hn.vc=Ar,hn.Wb=Lr,hn.Ya=hi,hn.yc=An,ys=1;break t}ys=0}if(!(je=ys)){Z.a=3;break e}if(0<Lt){if(qe.ua=1<<Lt,!Ae(qe.Wa,Lt)){Z.a=1,je=0;break e}}else qe.ua=0;var sf=Z,Gd=Ce,H0=Fe,Zu=sf.s,eh=Zu.xc;if(sf.c=Gd,sf.i=H0,Zu.md=yt(Gd,eh),Zu.wc=eh==0?-1:(1<<eh)-1,z){Z.xb=Uc;break e}if((ut=i(Ce*Fe))==null){Z.a=1,je=0;break e}je=(je=Ke(Z,ut,0,Ce,Fe,Fe,null))&&!Re.h;break e}return je?(ge!=null?ge[0]=ut:(e(ut==null),e(z)),Z.$=0,z||nt(qe)):nt(qe),je}function ke(N,k){var z=N.c*N.i,Z=z+k+16*k;return e(N.c<=k),N.V=i(Z),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+z+k,1)}function de(N,k){var z=N.C,Z=k-z,ge=N.V,je=N.Ba+N.c*z;for(e(k<=N.l.o);0<Z;){var Ce=16<Z?16:Z,Fe=N.l.ma,Re=N.l.width,qe=Re*Ce,ut=Fe.ca,Lt=Fe.tb+Re*z,$e=N.Ta,wt=N.Ua;Ne(N,Ce,ge,je),to($e,wt,ut,Lt,qe),It(Fe,z,z+Ce,ut,Lt,Re),Z-=Ce,ge+=Ce*N.c,z+=Ce}e(z==k),N.C=N.Ma=k}function ie(){this.ub=this.yd=this.td=this.Rb=0}function Ue(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function bt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ot(){this.Yb=(function(){var N=[];return(function k(z,Z,ge){for(var je=ge[Z],Ce=0;Ce<je&&(z.push(ge.length>Z+1?[]:0),!(ge.length<Z+1));Ce++)k(z[Ce],Z+1,ge)})(N,0,[3,11]),N})()}function Dt(){this.jb=i(3),this.Wc=l([4,8],ot),this.Xc=l([4,17],ot)}function jt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function kt(){this.ld=this.La=this.dd=this.tc=0}function gs(){this.Na=this.la=0}function Xs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ss(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Is(){this.uc=this.M=this.Nb=0,this.wa=Array(new kt),this.Y=0,this.ya=Array(new Ss),this.aa=0,this.l=new xr}function bs(){this.y=i(16),this.f=i(8),this.ea=i(8)}function ds(){this.cb=this.a=0,this.sc="",this.m=new I,this.Od=new ie,this.Kc=new Ue,this.ed=new jt,this.Qa=new bt,this.Ic=this.$c=this.Aa=0,this.D=new Is,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,I),this.ia=0,this.pb=o(4,Xs),this.Pa=new Dt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new bs),this.Hd=0,this.rb=Array(new gs),this.sb=0,this.wa=Array(new kt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ss),this.L=this.aa=0,this.gd=l([4,2],kt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function xs(N,k){return 0>N?0:N>k?k:N}function xr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function qr(){var N=new ds;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,so||(so=ho)),N}function mr(N,k,z){return N.a==0&&(N.a=k,N.sc=z,N.cb=0),0}function Uo(N,k,z){return 3<=z&&N[k+0]==157&&N[k+1]==1&&N[k+2]==42}function Ln(N,k){if(N==null)return 0;if(N.a=0,N.sc="OK",k==null)return mr(N,2,"null VP8Io passed to VP8GetHeaders()");var z=k.data,Z=k.w,ge=k.ha;if(4>ge)return mr(N,7,"Truncated header.");var je=z[Z+0]|z[Z+1]<<8|z[Z+2]<<16,Ce=N.Od;if(Ce.Rb=!(1&je),Ce.td=je>>1&7,Ce.yd=je>>4&1,Ce.ub=je>>5,3<Ce.td)return mr(N,3,"Incorrect keyframe parameters.");if(!Ce.yd)return mr(N,4,"Frame not displayable.");Z+=3,ge-=3;var Fe=N.Kc;if(Ce.Rb){if(7>ge)return mr(N,7,"cannot parse picture header");if(!Uo(z,Z,ge))return mr(N,3,"Bad code word");Fe.c=16383&(z[Z+4]<<8|z[Z+3]),Fe.Td=z[Z+4]>>6,Fe.i=16383&(z[Z+6]<<8|z[Z+5]),Fe.Ud=z[Z+6]>>6,Z+=7,ge-=7,N.za=Fe.c+15>>4,N.Ub=Fe.i+15>>4,k.width=Fe.c,k.height=Fe.i,k.Da=0,k.j=0,k.v=0,k.va=k.width,k.o=k.height,k.da=0,k.ib=k.width,k.hb=k.height,k.U=k.width,k.T=k.height,n((je=N.Pa).jb,0,255,je.jb.length),e((je=N.Qa)!=null),je.Cb=0,je.Bb=0,je.Fb=1,n(je.Zb,0,0,je.Zb.length),n(je.Lb,0,0,je.Lb)}if(Ce.ub>ge)return mr(N,7,"bad partition length");O(je=N.m,z,Z,Ce.ub),Z+=Ce.ub,ge-=Ce.ub,Ce.Rb&&(Fe.Ld=me(je),Fe.Kd=me(je)),Fe=N.Qa;var Re,qe=N.Pa;if(e(je!=null),e(Fe!=null),Fe.Cb=me(je),Fe.Cb){if(Fe.Bb=me(je),me(je)){for(Fe.Fb=me(je),Re=0;4>Re;++Re)Fe.Zb[Re]=me(je)?$(je,7):0;for(Re=0;4>Re;++Re)Fe.Lb[Re]=me(je)?$(je,6):0}if(Fe.Bb)for(Re=0;3>Re;++Re)qe.jb[Re]=me(je)?X(je,8):255}else Fe.Bb=0;if(je.Ka)return mr(N,3,"cannot parse segment header");if((Fe=N.ed).zd=me(je),Fe.Tb=X(je,6),Fe.wb=X(je,3),Fe.Pc=me(je),Fe.Pc&&me(je)){for(qe=0;4>qe;++qe)me(je)&&(Fe.vd[qe]=$(je,6));for(qe=0;4>qe;++qe)me(je)&&(Fe.od[qe]=$(je,6))}if(N.L=Fe.Tb==0?0:Fe.zd?1:2,je.Ka)return mr(N,3,"cannot parse filter header");var ut=ge;if(ge=Re=Z,Z=Re+ut,Fe=ut,N.Xb=(1<<X(N.m,2))-1,ut<3*(qe=N.Xb))z=7;else{for(Re+=3*qe,Fe-=3*qe,ut=0;ut<qe;++ut){var Lt=z[ge+0]|z[ge+1]<<8|z[ge+2]<<16;Lt>Fe&&(Lt=Fe),O(N.Jc[+ut],z,Re,Lt),Re+=Lt,Fe-=Lt,ge+=3}O(N.Jc[+qe],z,Re,Fe),z=Re<Z?0:5}if(z!=0)return mr(N,z,"cannot parse partitions");for(z=X(Re=N.m,7),ge=me(Re)?$(Re,4):0,Z=me(Re)?$(Re,4):0,Fe=me(Re)?$(Re,4):0,qe=me(Re)?$(Re,4):0,Re=me(Re)?$(Re,4):0,ut=N.Qa,Lt=0;4>Lt;++Lt){if(ut.Cb){var $e=ut.Zb[Lt];ut.Fb||($e+=z)}else{if(0<Lt){N.pb[Lt]=N.pb[0];continue}$e=z}var wt=N.pb[Lt];wt.Sc[0]=vo[xs($e+ge,127)],wt.Sc[1]=wo[xs($e+0,127)],wt.Eb[0]=2*vo[xs($e+Z,127)],wt.Eb[1]=101581*wo[xs($e+Fe,127)]>>16,8>wt.Eb[1]&&(wt.Eb[1]=8),wt.Qc[0]=vo[xs($e+qe,117)],wt.Qc[1]=wo[xs($e+Re,127)],wt.lc=$e+Re}if(!Ce.Rb)return mr(N,4,"Not a key frame.");for(me(je),Ce=N.Pa,z=0;4>z;++z){for(ge=0;8>ge;++ge)for(Z=0;3>Z;++Z)for(Fe=0;11>Fe;++Fe)qe=Te(je,Na[z][ge][Z][Fe])?X(je,8):I0[z][ge][Z][Fe],Ce.Wc[z][ge].Yb[Z][Fe]=qe;for(ge=0;17>ge;++ge)Ce.Xc[z][ge]=Ce.Wc[z][br[ge]]}return N.kc=me(je),N.kc&&(N.Bd=X(je,8)),N.cb=1}function ho(N,k,z,Z,ge,je,Ce){var Fe=k[ge].Yb[z];for(z=0;16>ge;++ge){if(!Te(N,Fe[z+0]))return ge;for(;!Te(N,Fe[z+1]);)if(Fe=k[++ge].Yb[0],z=0,ge==16)return 16;var Re=k[ge+1].Yb;if(Te(N,Fe[z+2])){var qe=N,ut=0;if(Te(qe,($e=Fe)[(Lt=z)+3]))if(Te(qe,$e[Lt+6])){for(Fe=0,Lt=2*(ut=Te(qe,$e[Lt+8]))+($e=Te(qe,$e[Lt+9+ut])),ut=0,$e=P0[Lt];$e[Fe];++Fe)ut+=ut+Te(qe,$e[Fe]);ut+=3+(8<<Lt)}else Te(qe,$e[Lt+7])?(ut=7+2*Te(qe,165),ut+=Te(qe,145)):ut=5+Te(qe,159);else ut=Te(qe,$e[Lt+4])?3+Te(qe,$e[Lt+5]):2;Fe=Re[2]}else ut=1,Fe=Re[1];Re=Ce+eg[ge],0>(qe=N).b&&De(qe);var Lt,$e=qe.b,wt=(Lt=qe.Ca>>1)-(qe.I>>$e)>>31;--qe.b,qe.Ca+=wt,qe.Ca|=1,qe.I-=(Lt+1&wt)<<$e,je[Re]=((ut^wt)-wt)*Z[(0<ge)+0]}return 16}function Xh(N){var k=N.rb[N.sb-1];k.la=0,k.Na=0,n(N.zc,0,0,N.zc.length),N.ja=0}function bi(N,k,z,Z,ge){ge=N[k+z+32*Z]+(ge>>3),N[k+z+32*Z]=-256&ge?0>ge?0:255:ge}function vn(N,k,z,Z,ge,je){bi(N,k,0,z,Z+ge),bi(N,k,1,z,Z+je),bi(N,k,2,z,Z-je),bi(N,k,3,z,Z-ge)}function cn(N){return(20091*N>>16)+N}function Pu(N,k,z,Z){var ge,je=0,Ce=i(16);for(ge=0;4>ge;++ge){var Fe=N[k+0]+N[k+8],Re=N[k+0]-N[k+8],qe=(35468*N[k+4]>>16)-cn(N[k+12]),ut=cn(N[k+4])+(35468*N[k+12]>>16);Ce[je+0]=Fe+ut,Ce[je+1]=Re+qe,Ce[je+2]=Re-qe,Ce[je+3]=Fe-ut,je+=4,k++}for(ge=je=0;4>ge;++ge)Fe=(N=Ce[je+0]+4)+Ce[je+8],Re=N-Ce[je+8],qe=(35468*Ce[je+4]>>16)-cn(Ce[je+12]),bi(z,Z,0,0,Fe+(ut=cn(Ce[je+4])+(35468*Ce[je+12]>>16))),bi(z,Z,1,0,Re+qe),bi(z,Z,2,0,Re-qe),bi(z,Z,3,0,Fe-ut),je++,Z+=32}function CA(N,k,z,Z){var ge=N[k+0]+4,je=35468*N[k+4]>>16,Ce=cn(N[k+4]),Fe=35468*N[k+1]>>16;vn(z,Z,0,ge+Ce,N=cn(N[k+1]),Fe),vn(z,Z,1,ge+je,N,Fe),vn(z,Z,2,ge-je,N,Fe),vn(z,Z,3,ge-Ce,N,Fe)}function Jh(N,k,z,Z,ge){Pu(N,k,z,Z),ge&&Pu(N,k+16,z,Z+4)}function yi(N,k,z,Z){cc(N,k+0,z,Z,1),cc(N,k+32,z,Z+128,1)}function Zh(N,k,z,Z){var ge;for(N=N[k+0]+4,ge=0;4>ge;++ge)for(k=0;4>k;++k)bi(z,Z,k,ge,N)}function em(N,k,z,Z){N[k+0]&&Qr(N,k+0,z,Z),N[k+16]&&Qr(N,k+16,z,Z+4),N[k+32]&&Qr(N,k+32,z,Z+128),N[k+48]&&Qr(N,k+48,z,Z+128+4)}function Qo(N,k,z,Z){var ge,je=i(16);for(ge=0;4>ge;++ge){var Ce=N[k+0+ge]+N[k+12+ge],Fe=N[k+4+ge]+N[k+8+ge],Re=N[k+4+ge]-N[k+8+ge],qe=N[k+0+ge]-N[k+12+ge];je[0+ge]=Ce+Fe,je[8+ge]=Ce-Fe,je[4+ge]=qe+Re,je[12+ge]=qe-Re}for(ge=0;4>ge;++ge)Ce=(N=je[0+4*ge]+3)+je[3+4*ge],Fe=je[1+4*ge]+je[2+4*ge],Re=je[1+4*ge]-je[2+4*ge],qe=N-je[3+4*ge],z[Z+0]=Ce+Fe>>3,z[Z+16]=qe+Re>>3,z[Z+32]=Ce-Fe>>3,z[Z+48]=qe-Re>>3,Z+=64}function Fd(N,k,z){var Z,ge=k-32,je=ci,Ce=255-N[ge-1];for(Z=0;Z<z;++Z){var Fe,Re=je,qe=Ce+N[k-1];for(Fe=0;Fe<z;++Fe)N[k+Fe]=Re[qe+N[ge+Fe]];k+=32}}function kA(N,k){Fd(N,k,4)}function BA(N,k){Fd(N,k,8)}function tm(N,k){Fd(N,k,16)}function sm(N,k){var z;for(z=0;16>z;++z)r(N,k+32*z,N,k-32,16)}function SA(N,k){var z;for(z=16;0<z;--z)n(N,k,N[k-1],16),k+=32}function Ii(N,k,z){var Z;for(Z=0;16>Z;++Z)n(k,z+32*Z,N,16)}function Ho(N,k){var z,Z=16;for(z=0;16>z;++z)Z+=N[k-1+32*z]+N[k+z-32];Ii(Z>>5,N,k)}function Gl(N,k){var z,Z=8;for(z=0;16>z;++z)Z+=N[k-1+32*z];Ii(Z>>4,N,k)}function Dd(N,k){var z,Z=8;for(z=0;16>z;++z)Z+=N[k+z-32];Ii(Z>>4,N,k)}function Pc(N,k){Ii(128,N,k)}function Ws(N,k,z){return N+2*k+z+2>>2}function EA(N,k){var z,Z=k-32;for(Z=new Uint8Array([Ws(N[Z-1],N[Z+0],N[Z+1]),Ws(N[Z+0],N[Z+1],N[Z+2]),Ws(N[Z+1],N[Z+2],N[Z+3]),Ws(N[Z+2],N[Z+3],N[Z+4])]),z=0;4>z;++z)r(N,k+32*z,Z,0,Z.length)}function rm(N,k){var z=N[k-1],Z=N[k-1+32],ge=N[k-1+64],je=N[k-1+96];we(N,k+0,16843009*Ws(N[k-1-32],z,Z)),we(N,k+32,16843009*Ws(z,Z,ge)),we(N,k+64,16843009*Ws(Z,ge,je)),we(N,k+96,16843009*Ws(ge,je,je))}function FA(N,k){var z,Z=4;for(z=0;4>z;++z)Z+=N[k+z-32]+N[k-1+32*z];for(Z>>=3,z=0;4>z;++z)n(N,k+32*z,Z,4)}function Xi(N,k){var z=N[k-1+0],Z=N[k-1+32],ge=N[k-1+64],je=N[k-1-32],Ce=N[k+0-32],Fe=N[k+1-32],Re=N[k+2-32],qe=N[k+3-32];N[k+0+96]=Ws(Z,ge,N[k-1+96]),N[k+1+96]=N[k+0+64]=Ws(z,Z,ge),N[k+2+96]=N[k+1+64]=N[k+0+32]=Ws(je,z,Z),N[k+3+96]=N[k+2+64]=N[k+1+32]=N[k+0+0]=Ws(Ce,je,z),N[k+3+64]=N[k+2+32]=N[k+1+0]=Ws(Fe,Ce,je),N[k+3+32]=N[k+2+0]=Ws(Re,Fe,Ce),N[k+3+0]=Ws(qe,Re,Fe)}function Yn(N,k){var z=N[k+1-32],Z=N[k+2-32],ge=N[k+3-32],je=N[k+4-32],Ce=N[k+5-32],Fe=N[k+6-32],Re=N[k+7-32];N[k+0+0]=Ws(N[k+0-32],z,Z),N[k+1+0]=N[k+0+32]=Ws(z,Z,ge),N[k+2+0]=N[k+1+32]=N[k+0+64]=Ws(Z,ge,je),N[k+3+0]=N[k+2+32]=N[k+1+64]=N[k+0+96]=Ws(ge,je,Ce),N[k+3+32]=N[k+2+64]=N[k+1+96]=Ws(je,Ce,Fe),N[k+3+64]=N[k+2+96]=Ws(Ce,Fe,Re),N[k+3+96]=Ws(Fe,Re,Re)}function am(N,k){var z=N[k-1+0],Z=N[k-1+32],ge=N[k-1+64],je=N[k-1-32],Ce=N[k+0-32],Fe=N[k+1-32],Re=N[k+2-32],qe=N[k+3-32];N[k+0+0]=N[k+1+64]=je+Ce+1>>1,N[k+1+0]=N[k+2+64]=Ce+Fe+1>>1,N[k+2+0]=N[k+3+64]=Fe+Re+1>>1,N[k+3+0]=Re+qe+1>>1,N[k+0+96]=Ws(ge,Z,z),N[k+0+64]=Ws(Z,z,je),N[k+0+32]=N[k+1+96]=Ws(z,je,Ce),N[k+1+32]=N[k+2+96]=Ws(je,Ce,Fe),N[k+2+32]=N[k+3+96]=Ws(Ce,Fe,Re),N[k+3+32]=Ws(Fe,Re,qe)}function Td(N,k){var z=N[k+0-32],Z=N[k+1-32],ge=N[k+2-32],je=N[k+3-32],Ce=N[k+4-32],Fe=N[k+5-32],Re=N[k+6-32],qe=N[k+7-32];N[k+0+0]=z+Z+1>>1,N[k+1+0]=N[k+0+64]=Z+ge+1>>1,N[k+2+0]=N[k+1+64]=ge+je+1>>1,N[k+3+0]=N[k+2+64]=je+Ce+1>>1,N[k+0+32]=Ws(z,Z,ge),N[k+1+32]=N[k+0+96]=Ws(Z,ge,je),N[k+2+32]=N[k+1+96]=Ws(ge,je,Ce),N[k+3+32]=N[k+2+96]=Ws(je,Ce,Fe),N[k+3+64]=Ws(Ce,Fe,Re),N[k+3+96]=Ws(Fe,Re,qe)}function Ji(N,k){var z=N[k-1+0],Z=N[k-1+32],ge=N[k-1+64],je=N[k-1+96];N[k+0+0]=z+Z+1>>1,N[k+2+0]=N[k+0+32]=Z+ge+1>>1,N[k+2+32]=N[k+0+64]=ge+je+1>>1,N[k+1+0]=Ws(z,Z,ge),N[k+3+0]=N[k+1+32]=Ws(Z,ge,je),N[k+3+32]=N[k+1+64]=Ws(ge,je,je),N[k+3+64]=N[k+2+64]=N[k+0+96]=N[k+1+96]=N[k+2+96]=N[k+3+96]=je}function Pd(N,k){var z=N[k-1+0],Z=N[k-1+32],ge=N[k-1+64],je=N[k-1+96],Ce=N[k-1-32],Fe=N[k+0-32],Re=N[k+1-32],qe=N[k+2-32];N[k+0+0]=N[k+2+32]=z+Ce+1>>1,N[k+0+32]=N[k+2+64]=Z+z+1>>1,N[k+0+64]=N[k+2+96]=ge+Z+1>>1,N[k+0+96]=je+ge+1>>1,N[k+3+0]=Ws(Fe,Re,qe),N[k+2+0]=Ws(Ce,Fe,Re),N[k+1+0]=N[k+3+32]=Ws(z,Ce,Fe),N[k+1+32]=N[k+3+64]=Ws(Z,z,Ce),N[k+1+64]=N[k+3+96]=Ws(ge,Z,z),N[k+1+96]=Ws(je,ge,Z)}function pl(N,k){var z;for(z=0;8>z;++z)r(N,k+32*z,N,k-32,8)}function DA(N,k){var z;for(z=0;8>z;++z)n(N,k,N[k-1],8),k+=32}function mo(N,k,z){var Z;for(Z=0;8>Z;++Z)n(k,z+32*Z,N,8)}function Iu(N,k){var z,Z=8;for(z=0;8>z;++z)Z+=N[k+z-32]+N[k-1+32*z];mo(Z>>4,N,k)}function Lu(N,k){var z,Z=4;for(z=0;8>z;++z)Z+=N[k+z-32];mo(Z>>3,N,k)}function Mn(N,k){var z,Z=4;for(z=0;8>z;++z)Z+=N[k-1+32*z];mo(Z>>3,N,k)}function gl(N,k){mo(128,N,k)}function Ao(N,k,z){var Z=N[k-z],ge=N[k+0],je=3*(ge-Z)+dc[1020+N[k-2*z]-N[k+z]],Ce=mm[112+(je+4>>3)];N[k-z]=ci[255+Z+mm[112+(je+3>>3)]],N[k+0]=ci[255+ge-Ce]}function Wl(N,k,z,Z){var ge=N[k+0],je=N[k+z];return Jn[255+N[k-2*z]-N[k-z]]>Z||Jn[255+je-ge]>Z}function Mu(N,k,z,Z){return 4*Jn[255+N[k-z]-N[k+0]]+Jn[255+N[k-2*z]-N[k+z]]<=Z}function Id(N,k,z,Z,ge){var je=N[k-3*z],Ce=N[k-2*z],Fe=N[k-z],Re=N[k+0],qe=N[k+z],ut=N[k+2*z],Lt=N[k+3*z];return 4*Jn[255+Fe-Re]+Jn[255+Ce-qe]>Z?0:Jn[255+N[k-4*z]-je]<=ge&&Jn[255+je-Ce]<=ge&&Jn[255+Ce-Fe]<=ge&&Jn[255+Lt-ut]<=ge&&Jn[255+ut-qe]<=ge&&Jn[255+qe-Re]<=ge}function Yl(N,k,z,Z){var ge=2*Z+1;for(Z=0;16>Z;++Z)Mu(N,k+Z,z,ge)&&Ao(N,k+Z,z)}function Kl(N,k,z,Z){var ge=2*Z+1;for(Z=0;16>Z;++Z)Mu(N,k+Z*z,1,ge)&&Ao(N,k+Z*z,1)}function Ld(N,k,z,Z){var ge;for(ge=3;0<ge;--ge)Yl(N,k+=4*z,z,Z)}function nm(N,k,z,Z){var ge;for(ge=3;0<ge;--ge)Kl(N,k+=4,z,Z)}function Xl(N,k,z,Z,ge,je,Ce,Fe){for(je=2*je+1;0<ge--;){if(Id(N,k,z,je,Ce))if(Wl(N,k,z,Fe))Ao(N,k,z);else{var Re=N,qe=k,ut=z,Lt=Re[qe-2*ut],$e=Re[qe-ut],wt=Re[qe+0],Ft=Re[qe+ut],Xt=Re[qe+2*ut],Tt=27*(rs=dc[1020+3*(wt-$e)+dc[1020+Lt-Ft]])+63>>7,Wt=18*rs+63>>7,rs=9*rs+63>>7;Re[qe-3*ut]=ci[255+Re[qe-3*ut]+rs],Re[qe-2*ut]=ci[255+Lt+Wt],Re[qe-ut]=ci[255+$e+Tt],Re[qe+0]=ci[255+wt-Tt],Re[qe+ut]=ci[255+Ft-Wt],Re[qe+2*ut]=ci[255+Xt-rs]}k+=Z}}function Jl(N,k,z,Z,ge,je,Ce,Fe){for(je=2*je+1;0<ge--;){if(Id(N,k,z,je,Ce))if(Wl(N,k,z,Fe))Ao(N,k,z);else{var Re=N,qe=k,ut=z,Lt=Re[qe-ut],$e=Re[qe+0],wt=Re[qe+ut],Ft=mm[112+(4+(Xt=3*($e-Lt))>>3)],Xt=mm[112+(Xt+3>>3)],Tt=Ft+1>>1;Re[qe-2*ut]=ci[255+Re[qe-2*ut]+Tt],Re[qe-ut]=ci[255+Lt+Xt],Re[qe+0]=ci[255+$e-Ft],Re[qe+ut]=ci[255+wt-Tt]}k+=Z}}function TA(N,k,z,Z,ge,je){Xl(N,k,z,1,16,Z,ge,je)}function Zl(N,k,z,Z,ge,je){Xl(N,k,1,z,16,Z,ge,je)}function PA(N,k,z,Z,ge,je){var Ce;for(Ce=3;0<Ce;--Ce)Jl(N,k+=4*z,z,1,16,Z,ge,je)}function U(N,k,z,Z,ge,je){var Ce;for(Ce=3;0<Ce;--Ce)Jl(N,k+=4,1,z,16,Z,ge,je)}function pe(N,k,z,Z,ge,je,Ce,Fe){Xl(N,k,ge,1,8,je,Ce,Fe),Xl(z,Z,ge,1,8,je,Ce,Fe)}function Ge(N,k,z,Z,ge,je,Ce,Fe){Xl(N,k,1,ge,8,je,Ce,Fe),Xl(z,Z,1,ge,8,je,Ce,Fe)}function lt(N,k,z,Z,ge,je,Ce,Fe){Jl(N,k+4*ge,ge,1,8,je,Ce,Fe),Jl(z,Z+4*ge,ge,1,8,je,Ce,Fe)}function Bt(N,k,z,Z,ge,je,Ce,Fe){Jl(N,k+4,1,ge,8,je,Ce,Fe),Jl(z,Z+4,1,ge,8,je,Ce,Fe)}function ss(){this.ba=new Gt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ie,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ms(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ts(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Rs(){this.ua=0,this.Wa=new q,this.vb=new q,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new ae}function Zs(){this.xb=this.a=0,this.l=new xr,this.ca=new Gt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Rs,this.ab=0,this.gc=o(4,Ts),this.Oc=0}function nr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new xr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Er(N,k,z,Z,ge,je,Ce){for(N=N==null?0:N[k+0],k=0;k<Ce;++k)ge[je+k]=N+z[Z+k]&255,N=ge[je+k]}function Fa(N,k,z,Z,ge,je,Ce){var Fe;if(N==null)Er(null,null,z,Z,ge,je,Ce);else for(Fe=0;Fe<Ce;++Fe)ge[je+Fe]=N[k+Fe]+z[Z+Fe]&255}function Xa(N,k,z,Z,ge,je,Ce){if(N==null)Er(null,null,z,Z,ge,je,Ce);else{var Fe,Re=N[k+0],qe=Re,ut=Re;for(Fe=0;Fe<Ce;++Fe)qe=ut+(Re=N[k+Fe])-qe,ut=z[Z+Fe]+(-256&qe?0>qe?0:255:qe)&255,qe=Re,ge[je+Fe]=ut}}function fa(N,k,z,Z){var ge=k.width,je=k.o;if(e(N!=null&&k!=null),0>z||0>=Z||z+Z>je)return null;if(!N.Cc){if(N.ga==null){var Ce;if(N.ga=new nr,(Ce=N.ga==null)||(Ce=k.width*k.o,e(N.Gb.length==0),N.Gb=i(Ce),N.Uc=0,N.Gb==null?Ce=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,Ce=1),Ce=!Ce),!Ce){Ce=N.ga;var Fe=N.Fa,Re=N.P,qe=N.qc,ut=N.mb,Lt=N.nb,$e=Re+1,wt=qe-1,Ft=Ce.l;if(e(Fe!=null&&ut!=null&&k!=null),uc[0]=null,uc[1]=Er,uc[2]=Fa,uc[3]=Xa,Ce.ca=ut,Ce.tb=Lt,Ce.c=k.width,Ce.i=k.height,e(0<Ce.c&&0<Ce.i),1>=qe)k=0;else if(Ce.$a=3&Fe[Re+0],Ce.Z=Fe[Re+0]>>2&3,Ce.Lc=Fe[Re+0]>>4&3,Re=Fe[Re+0]>>6&3,0>Ce.$a||1<Ce.$a||4<=Ce.Z||1<Ce.Lc||Re)k=0;else if(Ft.put=ct,Ft.ac=Me,Ft.bc=Pt,Ft.ma=Ce,Ft.width=k.width,Ft.height=k.height,Ft.Da=k.Da,Ft.v=k.v,Ft.va=k.va,Ft.j=k.j,Ft.o=k.o,Ce.$a)e:{e(Ce.$a==1),k=zt();t:for(;;){if(k==null){k=0;break e}if(e(Ce!=null),Ce.mc=k,k.c=Ce.c,k.i=Ce.i,k.l=Ce.l,k.l.ma=Ce,k.l.width=Ce.c,k.l.height=Ce.i,k.a=0,H(k.m,Fe,$e,wt),!is(Ce.c,Ce.i,1,k,null)||(k.ab==1&&k.gc[0].hc==3&&ht(k.s)?(Ce.ic=1,Fe=k.c*k.i,k.Ta=null,k.Ua=0,k.V=i(Fe),k.Ba=0,k.V==null?(k.a=1,k=0):k=1):(Ce.ic=0,k=ke(k,Ce.c)),!k))break t;k=1;break e}Ce.mc=null,k=0}else k=wt>=Ce.c*Ce.i;Ce=!k}if(Ce)return null;N.ga.Lc!=1?N.Ga=0:Z=je-z}e(N.ga!=null),e(z+Z<=je);e:{if(k=(Fe=N.ga).c,je=Fe.l.o,Fe.$a==0){if($e=N.rc,wt=N.Vc,Ft=N.Fa,Re=N.P+1+z*k,qe=N.mb,ut=N.nb+z*k,e(Re<=N.P+N.qc),Fe.Z!=0)for(e(uc[Fe.Z]!=null),Ce=0;Ce<Z;++Ce)uc[Fe.Z]($e,wt,Ft,Re,qe,ut,k),$e=qe,wt=ut,ut+=k,Re+=k;else for(Ce=0;Ce<Z;++Ce)r(qe,ut,Ft,Re,k),$e=qe,wt=ut,ut+=k,Re+=k;N.rc=$e,N.Vc=wt}else{if(e(Fe.mc!=null),k=z+Z,e((Ce=Fe.mc)!=null),e(k<=Ce.i),Ce.C>=k)k=1;else if(Fe.ic||Vo(),Fe.ic){Fe=Ce.V,$e=Ce.Ba,wt=Ce.c;var Xt=Ce.i,Tt=(Ft=1,Re=Ce.$/wt,qe=Ce.$%wt,ut=Ce.m,Lt=Ce.s,Ce.$),Wt=wt*Xt,rs=wt*k,fs=Lt.wc,us=Tt<rs?Nt(Lt,qe,Re):null;e(Tt<=Wt),e(k<=Xt),e(ht(Lt));t:for(;;){for(;!ut.h&&Tt<rs;){if(qe&fs||(us=Nt(Lt,qe,Re)),e(us!=null),ye(ut),256>(Xt=Be(us.G[0],us.H[0],ut)))Fe[$e+Tt]=Xt,++Tt,++qe>=wt&&(qe=0,++Re<=k&&!(Re%16)&&Pe(Ce,Re));else{if(!(280>Xt)){Ft=0;break t}Xt=as(Xt-256,ut);var Ls,_s=Be(us.G[4],us.H[4],ut);if(ye(ut),!(Tt>=(_s=Zt(wt,_s=as(_s,ut)))&&Wt-Tt>=Xt)){Ft=0;break t}for(Ls=0;Ls<Xt;++Ls)Fe[$e+Tt+Ls]=Fe[$e+Tt+Ls-_s];for(Tt+=Xt,qe+=Xt;qe>=wt;)qe-=wt,++Re<=k&&!(Re%16)&&Pe(Ce,Re);Tt<rs&&qe&fs&&(us=Nt(Lt,qe,Re))}e(ut.h==se(ut))}Pe(Ce,Re>k?k:Re);break t}!Ft||ut.h&&Tt<Wt?(Ft=0,Ce.a=ut.h?5:3):Ce.$=Tt,k=Ft}else k=Ke(Ce,Ce.V,Ce.Ba,Ce.c,Ce.i,k,de);if(!k){Z=0;break e}}z+Z>=je&&(N.Cc=1),Z=1}if(!Z)return null;if(N.Cc&&((Z=N.ga)!=null&&(Z.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+z*ge}function wn(N,k,z,Z,ge,je){for(;0<ge--;){var Ce,Fe=N,Re=k+(z?1:0),qe=N,ut=k+(z?0:3);for(Ce=0;Ce<Z;++Ce){var Lt=qe[ut+4*Ce];Lt!=255&&(Lt*=32897,Fe[Re+4*Ce+0]=Fe[Re+4*Ce+0]*Lt>>23,Fe[Re+4*Ce+1]=Fe[Re+4*Ce+1]*Lt>>23,Fe[Re+4*Ce+2]=Fe[Re+4*Ce+2]*Lt>>23)}k+=je}}function dn(N,k,z,Z,ge){for(;0<Z--;){var je;for(je=0;je<z;++je){var Ce=N[k+2*je+0],Fe=15&(qe=N[k+2*je+1]),Re=4369*Fe,qe=(240&qe|qe>>4)*Re>>16;N[k+2*je+0]=(240&Ce|Ce>>4)*Re>>16&240|(15&Ce|Ce<<4)*Re>>16>>4&15,N[k+2*je+1]=240&qe|Fe}k+=ge}}function Kn(N,k,z,Z,ge,je,Ce,Fe){var Re,qe,ut=255;for(qe=0;qe<ge;++qe){for(Re=0;Re<Z;++Re){var Lt=N[k+Re];je[Ce+4*Re]=Lt,ut&=Lt}k+=z,Ce+=Fe}return ut!=255}function ec(N,k,z,Z,ge){var je;for(je=0;je<ge;++je)z[Z+je]=N[k+je]>>8}function Vo(){Ud=wn,po=dn,dm=Kn,to=ec}function tc(N,k,z){P[N]=function(Z,ge,je,Ce,Fe,Re,qe,ut,Lt,$e,wt,Ft,Xt,Tt,Wt,rs,fs){var us,Ls=fs-1>>1,_s=Fe[Re+0]|qe[ut+0]<<16,tr=Lt[$e+0]|wt[Ft+0]<<16;e(Z!=null);var Fs=3*_s+tr+131074>>2;for(k(Z[ge+0],255&Fs,Fs>>16,Xt,Tt),je!=null&&(Fs=3*tr+_s+131074>>2,k(je[Ce+0],255&Fs,Fs>>16,Wt,rs)),us=1;us<=Ls;++us){var pr=Fe[Re+us]|qe[ut+us]<<16,ja=Lt[$e+us]|wt[Ft+us]<<16,ir=_s+pr+tr+ja+524296,Cs=ir+2*(pr+tr)>>3;Fs=Cs+_s>>1,_s=(ir=ir+2*(_s+ja)>>3)+pr>>1,k(Z[ge+2*us-1],255&Fs,Fs>>16,Xt,Tt+(2*us-1)*z),k(Z[ge+2*us-0],255&_s,_s>>16,Xt,Tt+(2*us-0)*z),je!=null&&(Fs=ir+tr>>1,_s=Cs+ja>>1,k(je[Ce+2*us-1],255&Fs,Fs>>16,Wt,rs+(2*us-1)*z),k(je[Ce+2*us+0],255&_s,_s>>16,Wt,rs+(2*us+0)*z)),_s=pr,tr=ja}1&fs||(Fs=3*_s+tr+131074>>2,k(Z[ge+fs-1],255&Fs,Fs>>16,Xt,Tt+(fs-1)*z),je!=null&&(Fs=3*tr+_s+131074>>2,k(je[Ce+fs-1],255&Fs,Fs>>16,Wt,rs+(fs-1)*z)))}}function im(){ei[RA]=Vd,ei[di]=Wu,ei[OA]=sg,ei[go]=zA,ei[Am]=Qc,ei[$u]=Cl,ei[Rc]=Hc,ei[fm]=Wu,ei[UA]=zA,ei[qu]=Qc,ei[QA]=Cl}function Ru(N){return N&-16384?0>N?0:255:N>>$A}function xl(N,k){return Ru((19077*N>>8)+(26149*k>>8)-14234)}function zo(N,k,z){return Ru((19077*N>>8)-(6419*k>>8)-(13320*z>>8)+8708)}function Md(N,k){return Ru((19077*N>>8)+(33050*k>>8)-17685)}function sc(N,k,z,Z,ge){Z[ge+0]=xl(N,z),Z[ge+1]=zo(N,k,z),Z[ge+2]=Md(N,k)}function Rn(N,k,z,Z,ge){Z[ge+0]=Md(N,k),Z[ge+1]=zo(N,k,z),Z[ge+2]=xl(N,z)}function Ic(N,k,z,Z,ge){var je=zo(N,k,z);k=je<<3&224|Md(N,k)>>3,Z[ge+0]=248&xl(N,z)|je>>5,Z[ge+1]=k}function Lc(N,k,z,Z,ge){var je=240&Md(N,k)|15;Z[ge+0]=240&xl(N,z)|zo(N,k,z)>>4,Z[ge+1]=je}function Ou(N,k,z,Z,ge){Z[ge+0]=255,sc(N,k,z,Z,ge+1)}function bl(N,k,z,Z,ge){Rn(N,k,z,Z,ge),Z[ge+3]=255}function vi(N,k,z,Z,ge){sc(N,k,z,Z,ge),Z[ge+3]=255}function rc(N,k,z){P[N]=function(Z,ge,je,Ce,Fe,Re,qe,ut,Lt){for(var $e=ut+(-2&Lt)*z;ut!=$e;)k(Z[ge+0],je[Ce+0],Fe[Re+0],qe,ut),k(Z[ge+1],je[Ce+0],Fe[Re+0],qe,ut+z),ge+=2,++Ce,++Re,ut+=2*z;1&Lt&&k(Z[ge+0],je[Ce+0],Fe[Re+0],qe,ut)}}function Uu(N,k,z){return z==0?N==0?k==0?6:5:k==0?4:0:z}function om(N,k,z,Z,ge){switch(N>>>30){case 3:cc(k,z,Z,ge,0);break;case 2:li(k,z,Z,ge);break;case 1:Qr(k,z,Z,ge)}}function Zi(N,k){var z,Z,ge=k.M,je=k.Nb,Ce=N.oc,Fe=N.pc+40,Re=N.oc,qe=N.pc+584,ut=N.oc,Lt=N.pc+600;for(z=0;16>z;++z)Ce[Fe+32*z-1]=129;for(z=0;8>z;++z)Re[qe+32*z-1]=129,ut[Lt+32*z-1]=129;for(0<ge?Ce[Fe-1-32]=Re[qe-1-32]=ut[Lt-1-32]=129:(n(Ce,Fe-32-1,127,21),n(Re,qe-32-1,127,9),n(ut,Lt-32-1,127,9)),Z=0;Z<N.za;++Z){var $e=k.ya[k.aa+Z];if(0<Z){for(z=-1;16>z;++z)r(Ce,Fe+32*z-4,Ce,Fe+32*z+12,4);for(z=-1;8>z;++z)r(Re,qe+32*z-4,Re,qe+32*z+4,4),r(ut,Lt+32*z-4,ut,Lt+32*z+4,4)}var wt=N.Gd,Ft=N.Hd+Z,Xt=$e.ad,Tt=$e.Hc;if(0<ge&&(r(Ce,Fe-32,wt[Ft].y,0,16),r(Re,qe-32,wt[Ft].f,0,8),r(ut,Lt-32,wt[Ft].ea,0,8)),$e.Za){var Wt=Ce,rs=Fe-32+16;for(0<ge&&(Z>=N.za-1?n(Wt,rs,wt[Ft].y[15],4):r(Wt,rs,wt[Ft+1].y,0,4)),z=0;4>z;z++)Wt[rs+128+z]=Wt[rs+256+z]=Wt[rs+384+z]=Wt[rs+0+z];for(z=0;16>z;++z,Tt<<=2)Wt=Ce,rs=Fe+en[z],Ua[$e.Ob[z]](Wt,rs),om(Tt,Xt,16*+z,Wt,rs)}else if(Wt=Uu(Z,ge,$e.Ob[0]),Ni[Wt](Ce,Fe),Tt!=0)for(z=0;16>z;++z,Tt<<=2)om(Tt,Xt,16*+z,Ce,Fe+en[z]);for(z=$e.Gc,Wt=Uu(Z,ge,$e.Dd),Wo[Wt](Re,qe),Wo[Wt](ut,Lt),Tt=Xt,Wt=Re,rs=qe,255&($e=0|z)&&(170&$e?fo(Tt,256,Wt,rs):Fr(Tt,256,Wt,rs)),$e=ut,Tt=Lt,255&(z>>=8)&&(170&z?fo(Xt,320,$e,Tt):Fr(Xt,320,$e,Tt)),ge<N.Ub-1&&(r(wt[Ft].y,0,Ce,Fe+480,16),r(wt[Ft].f,0,Re,qe+224,8),r(wt[Ft].ea,0,ut,Lt+224,8)),z=8*je*N.B,wt=N.sa,Ft=N.ta+16*Z+16*je*N.R,Xt=N.qa,$e=N.ra+8*Z+z,Tt=N.Ha,Wt=N.Ia+8*Z+z,z=0;16>z;++z)r(wt,Ft+z*N.R,Ce,Fe+32*z,16);for(z=0;8>z;++z)r(Xt,$e+z*N.B,Re,qe+32*z,8),r(Tt,Wt+z*N.B,ut,Lt+32*z,8)}}function $o(N,k,z,Z,ge,je,Ce,Fe,Re){var qe=[0],ut=[0],Lt=0,$e=Re!=null?Re.kd:0,wt=Re??new ms;if(N==null||12>z)return 7;wt.data=N,wt.w=k,wt.ha=z,k=[k],z=[z],wt.gb=[wt.gb];e:{var Ft=k,Xt=z,Tt=wt.gb;if(e(N!=null),e(Xt!=null),e(Tt!=null),Tt[0]=0,12<=Xt[0]&&!s(N,Ft[0],"RIFF")){if(s(N,Ft[0]+8,"WEBP")){Tt=3;break e}var Wt=tt(N,Ft[0]+4);if(12>Wt||4294967286<Wt){Tt=3;break e}if($e&&Wt>Xt[0]-8){Tt=7;break e}Tt[0]=Wt,Ft[0]+=12,Xt[0]-=12}Tt=0}if(Tt!=0)return Tt;for(Wt=0<wt.gb[0],z=z[0];;){e:{var rs=N;Xt=k,Tt=z;var fs=qe,us=ut,Ls=Ft=[0];if((Fs=Lt=[Lt])[0]=0,8>Tt[0])Tt=7;else{if(!s(rs,Xt[0],"VP8X")){if(tt(rs,Xt[0]+4)!=10){Tt=3;break e}if(18>Tt[0]){Tt=7;break e}var _s=tt(rs,Xt[0]+8),tr=1+ce(rs,Xt[0]+12);if(2147483648<=tr*(rs=1+ce(rs,Xt[0]+15))){Tt=3;break e}Ls!=null&&(Ls[0]=_s),fs!=null&&(fs[0]=tr),us!=null&&(us[0]=rs),Xt[0]+=18,Tt[0]-=18,Fs[0]=1}Tt=0}}if(Lt=Lt[0],Ft=Ft[0],Tt!=0)return Tt;if(Xt=!!(2&Ft),!Wt&&Lt)return 3;if(je!=null&&(je[0]=!!(16&Ft)),Ce!=null&&(Ce[0]=Xt),Fe!=null&&(Fe[0]=0),Ce=qe[0],Ft=ut[0],Lt&&Xt&&Re==null){Tt=0;break}if(4>z){Tt=7;break}if(Wt&&Lt||!Wt&&!Lt&&!s(N,k[0],"ALPH")){z=[z],wt.na=[wt.na],wt.P=[wt.P],wt.Sa=[wt.Sa];e:{_s=N,Tt=k,Wt=z;var Fs=wt.gb;fs=wt.na,us=wt.P,Ls=wt.Sa,tr=22,e(_s!=null),e(Wt!=null),rs=Tt[0];var pr=Wt[0];for(e(fs!=null),e(Ls!=null),fs[0]=null,us[0]=null,Ls[0]=0;;){if(Tt[0]=rs,Wt[0]=pr,8>pr){Tt=7;break e}var ja=tt(_s,rs+4);if(4294967286<ja){Tt=3;break e}var ir=8+ja+1&-2;if(tr+=ir,0<Fs&&tr>Fs){Tt=3;break e}if(!s(_s,rs,"VP8 ")||!s(_s,rs,"VP8L")){Tt=0;break e}if(pr[0]<ir){Tt=7;break e}s(_s,rs,"ALPH")||(fs[0]=_s,us[0]=rs+8,Ls[0]=ja),rs+=ir,pr-=ir}}if(z=z[0],wt.na=wt.na[0],wt.P=wt.P[0],wt.Sa=wt.Sa[0],Tt!=0)break}z=[z],wt.Ja=[wt.Ja],wt.xa=[wt.xa];e:if(Fs=N,Tt=k,Wt=z,fs=wt.gb[0],us=wt.Ja,Ls=wt.xa,_s=Tt[0],rs=!s(Fs,_s,"VP8 "),tr=!s(Fs,_s,"VP8L"),e(Fs!=null),e(Wt!=null),e(us!=null),e(Ls!=null),8>Wt[0])Tt=7;else{if(rs||tr){if(Fs=tt(Fs,_s+4),12<=fs&&Fs>fs-12){Tt=3;break e}if($e&&Fs>Wt[0]-8){Tt=7;break e}us[0]=Fs,Tt[0]+=8,Wt[0]-=8,Ls[0]=tr}else Ls[0]=5<=Wt[0]&&Fs[_s+0]==47&&!(Fs[_s+4]>>5),us[0]=Wt[0];Tt=0}if(z=z[0],wt.Ja=wt.Ja[0],wt.xa=wt.xa[0],k=k[0],Tt!=0)break;if(4294967286<wt.Ja)return 3;if(Fe==null||Xt||(Fe[0]=wt.xa?2:1),Ce=[Ce],Ft=[Ft],wt.xa){if(5>z){Tt=7;break}Fe=Ce,$e=Ft,Xt=je,N==null||5>z?N=0:5<=z&&N[k+0]==47&&!(N[k+4]>>5)?(Wt=[0],Fs=[0],fs=[0],H(us=new R,N,k,z),ts(us,Wt,Fs,fs)?(Fe!=null&&(Fe[0]=Wt[0]),$e!=null&&($e[0]=Fs[0]),Xt!=null&&(Xt[0]=fs[0]),N=1):N=0):N=0}else{if(10>z){Tt=7;break}Fe=Ft,N==null||10>z||!Uo(N,k+3,z-3)?N=0:($e=N[k+0]|N[k+1]<<8|N[k+2]<<16,Xt=16383&(N[k+7]<<8|N[k+6]),N=16383&(N[k+9]<<8|N[k+8]),1&$e||3<($e>>1&7)||!($e>>4&1)||$e>>5>=wt.Ja||!Xt||!N?N=0:(Ce&&(Ce[0]=Xt),Fe&&(Fe[0]=N),N=1))}if(!N||(Ce=Ce[0],Ft=Ft[0],Lt&&(qe[0]!=Ce||ut[0]!=Ft)))return 3;Re!=null&&(Re[0]=wt,Re.offset=k-Re.w,e(4294967286>k-Re.w),e(Re.offset==Re.ha-z));break}return Tt==0||Tt==7&&Lt&&Re==null?(je!=null&&(je[0]|=wt.na!=null&&0<wt.na.length),Z!=null&&(Z[0]=Ce),ge!=null&&(ge[0]=Ft),0):Tt}function ac(N,k,z){var Z=k.width,ge=k.height,je=0,Ce=0,Fe=Z,Re=ge;if(k.Da=N!=null&&0<N.Da,k.Da&&(Fe=N.cd,Re=N.bd,je=N.v,Ce=N.j,11>z||(je&=-2,Ce&=-2),0>je||0>Ce||0>=Fe||0>=Re||je+Fe>Z||Ce+Re>ge))return 0;if(k.v=je,k.j=Ce,k.va=je+Fe,k.o=Ce+Re,k.U=Fe,k.T=Re,k.da=N!=null&&0<N.da,k.da){if(!Qt(Fe,Re,z=[N.ib],je=[N.hb]))return 0;k.ib=z[0],k.hb=je[0]}return k.ob=N!=null&&N.ob,k.Kb=N==null||!N.Sd,k.da&&(k.ob=k.ib<3*Z/4&&k.hb<3*ge/4,k.Kb=0),1}function lm(N){if(N==null)return 2;if(11>N.S){var k=N.f.RGBA;k.fb+=(N.height-1)*k.A,k.A=-k.A}else k=N.f.kb,N=N.height,k.O+=(N-1)*k.fa,k.fa=-k.fa,k.N+=(N-1>>1)*k.Ab,k.Ab=-k.Ab,k.W+=(N-1>>1)*k.Db,k.Db=-k.Db,k.F!=null&&(k.J+=(N-1)*k.lb,k.lb=-k.lb);return 0}function qo(N,k,z,Z){if(Z==null||0>=N||0>=k)return 2;if(z!=null){if(z.Da){var ge=z.cd,je=z.bd,Ce=-2&z.v,Fe=-2&z.j;if(0>Ce||0>Fe||0>=ge||0>=je||Ce+ge>N||Fe+je>k)return 2;N=ge,k=je}if(z.da){if(!Qt(N,k,ge=[z.ib],je=[z.hb]))return 2;N=ge[0],k=je[0]}}Z.width=N,Z.height=k;e:{var Re=Z.width,qe=Z.height;if(N=Z.S,0>=Re||0>=qe||!(N>=RA&&13>N))N=2;else{if(0>=Z.Rd&&Z.sd==null){Ce=je=ge=k=0;var ut=(Fe=Re*GA[N])*qe;if(11>N||(je=(qe+1)/2*(k=(Re+1)/2),N==12&&(Ce=(ge=Re)*qe)),(qe=i(ut+2*je+Ce))==null){N=1;break e}Z.sd=qe,11>N?((Re=Z.f.RGBA).eb=qe,Re.fb=0,Re.A=Fe,Re.size=ut):((Re=Z.f.kb).y=qe,Re.O=0,Re.fa=Fe,Re.Fd=ut,Re.f=qe,Re.N=0+ut,Re.Ab=k,Re.Cd=je,Re.ea=qe,Re.W=0+ut+je,Re.Db=k,Re.Ed=je,N==12&&(Re.F=qe,Re.J=0+ut+2*je),Re.Tc=Ce,Re.lb=ge)}if(k=1,ge=Z.S,je=Z.width,Ce=Z.height,ge>=RA&&13>ge)if(11>ge)N=Z.f.RGBA,k&=(Fe=Math.abs(N.A))*(Ce-1)+je<=N.size,k&=Fe>=je*GA[ge],k&=N.eb!=null;else{N=Z.f.kb,Fe=(je+1)/2,ut=(Ce+1)/2,Re=Math.abs(N.fa),qe=Math.abs(N.Ab);var Lt=Math.abs(N.Db),$e=Math.abs(N.lb),wt=$e*(Ce-1)+je;k&=Re*(Ce-1)+je<=N.Fd,k&=qe*(ut-1)+Fe<=N.Cd,k=(k&=Lt*(ut-1)+Fe<=N.Ed)&Re>=je&qe>=Fe&Lt>=Fe,k&=N.y!=null,k&=N.f!=null,k&=N.ea!=null,ge==12&&(k&=$e>=je,k&=wt<=N.Tc,k&=N.F!=null)}else k=0;N=k?0:2}}return N!=0||z!=null&&z.fd&&(N=lm(Z)),N}var Mc=64,Li=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],wi=24,yl=32,vl=8,nc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ze("Predictor0","PredictorAdd0"),P.Predictor0=function(){return 4278190080},P.Predictor1=function(N){return N},P.Predictor2=function(N,k,z){return k[z+0]},P.Predictor3=function(N,k,z){return k[z+1]},P.Predictor4=function(N,k,z){return k[z-1]},P.Predictor5=function(N,k,z){return oe(oe(N,k[z+1]),k[z+0])},P.Predictor6=function(N,k,z){return oe(N,k[z-1])},P.Predictor7=function(N,k,z){return oe(N,k[z+0])},P.Predictor8=function(N,k,z){return oe(k[z-1],k[z+0])},P.Predictor9=function(N,k,z){return oe(k[z+0],k[z+1])},P.Predictor10=function(N,k,z){return oe(oe(N,k[z-1]),oe(k[z+0],k[z+1]))},P.Predictor11=function(N,k,z){var Z=k[z+0];return 0>=ve(Z>>24&255,N>>24&255,(k=k[z-1])>>24&255)+ve(Z>>16&255,N>>16&255,k>>16&255)+ve(Z>>8&255,N>>8&255,k>>8&255)+ve(255&Z,255&N,255&k)?Z:N},P.Predictor12=function(N,k,z){var Z=k[z+0];return(he((N>>24&255)+(Z>>24&255)-((k=k[z-1])>>24&255))<<24|he((N>>16&255)+(Z>>16&255)-(k>>16&255))<<16|he((N>>8&255)+(Z>>8&255)-(k>>8&255))<<8|he((255&N)+(255&Z)-(255&k)))>>>0},P.Predictor13=function(N,k,z){var Z=k[z-1];return(W((N=oe(N,k[z+0]))>>24&255,Z>>24&255)<<24|W(N>>16&255,Z>>16&255)<<16|W(N>>8&255,Z>>8&255)<<8|W(255&N,255&Z))>>>0};var Qu=P.PredictorAdd0;P.PredictorAdd1=Qe,ze("Predictor2","PredictorAdd2"),ze("Predictor3","PredictorAdd3"),ze("Predictor4","PredictorAdd4"),ze("Predictor5","PredictorAdd5"),ze("Predictor6","PredictorAdd6"),ze("Predictor7","PredictorAdd7"),ze("Predictor8","PredictorAdd8"),ze("Predictor9","PredictorAdd9"),ze("Predictor10","PredictorAdd10"),ze("Predictor11","PredictorAdd11"),ze("Predictor12","PredictorAdd12"),ze("Predictor13","PredictorAdd13");var Hu=P.PredictorAdd2;xt("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),xt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var Ja,IA=P.ColorIndexInverseTransform,wl=P.MapARGB,Nl=P.VP8LColorIndexInverseTransformAlpha,Xn=P.MapAlpha,ic=P.VP8LPredictorsAdd=[];ic.length=16,(P.VP8LPredictors=[]).length=16,(P.VP8LPredictorsAdd_C=[]).length=16,(P.VP8LPredictors_C=[]).length=16;var Vu,zu,oc,lc,jl,Rd,eo,cc,li,fo,Qr,Fr,pa,Za,_l,Go,Od,cm,Xp,F0,D0,T0,Jp,Zp,Ud,po,dm,to,Qd=i(511),LA=i(2041),um=i(225),hm=i(767),MA=0,dc=LA,mm=um,ci=hm,Jn=Qd,RA=0,di=1,OA=2,go=3,Am=4,$u=5,Rc=6,fm=7,UA=8,qu=9,QA=10,xo=[2,3,7],Gu=[3,3,11],Hd=[280,256,256,256,40],HA=[0,1,1,1,0],pm=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],bo=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],yo=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Oc=8,vo=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],wo=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],so=null,P0=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],eg=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],VA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],I0=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Zn=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Na=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],br=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ni=[],Ua=[],Wo=[],Uc=1,tg=2,uc=[],ei=[];tc("UpsampleRgbLinePair",sc,3),tc("UpsampleBgrLinePair",Rn,3),tc("UpsampleRgbaLinePair",vi,4),tc("UpsampleBgraLinePair",bl,4),tc("UpsampleArgbLinePair",Ou,4),tc("UpsampleRgba4444LinePair",Lc,2),tc("UpsampleRgb565LinePair",Ic,2);var Vd=P.UpsampleRgbLinePair,sg=P.UpsampleBgrLinePair,Wu=P.UpsampleRgbaLinePair,zA=P.UpsampleBgraLinePair,Qc=P.UpsampleArgbLinePair,Cl=P.UpsampleRgba4444LinePair,Hc=P.UpsampleRgb565LinePair,No=16,Yu=1<<No-1,zd=-227,Vc=482,$A=6,zc=0,ti=i(256),qA=i(256),L0=i(256),u1=i(256),h1=i(Vc-zd),m1=i(Vc-zd);rc("YuvToRgbRow",sc,3),rc("YuvToBgrRow",Rn,3),rc("YuvToRgbaRow",vi,4),rc("YuvToBgraRow",bl,4),rc("YuvToArgbRow",Ou,4),rc("YuvToRgba4444Row",Lc,2),rc("YuvToRgb565Row",Ic,2);var en=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ku=[0,2,8],gm=[8,7,6,4,4,2,2,2,1,1,1,1],xm=1;this.WebPDecodeRGBA=function(N,k,z,Z,ge){var je=di,Ce=new ss,Fe=new Gt;Ce.ba=Fe,Fe.S=je,Fe.width=[Fe.width],Fe.height=[Fe.height];var Re=Fe.width,qe=Fe.height,ut=new ee;if(ut==null||N==null)var Lt=2;else e(ut!=null),Lt=$o(N,k,z,ut.width,ut.height,ut.Pd,ut.Qd,ut.format,null);if(Lt!=0?Re=0:(Re!=null&&(Re[0]=ut.width[0]),qe!=null&&(qe[0]=ut.height[0]),Re=1),Re){Fe.width=Fe.width[0],Fe.height=Fe.height[0],Z!=null&&(Z[0]=Fe.width),ge!=null&&(ge[0]=Fe.height);e:{if(Z=new xr,(ge=new ms).data=N,ge.w=k,ge.ha=z,ge.kd=1,k=[0],e(ge!=null),((N=$o(ge.data,ge.w,ge.ha,null,null,null,k,null,ge))==0||N==7)&&k[0]&&(N=4),(k=N)==0){if(e(Ce!=null),Z.data=ge.data,Z.w=ge.w+ge.offset,Z.ha=ge.ha-ge.offset,Z.put=ct,Z.ac=Me,Z.bc=Pt,Z.ma=Ce,ge.xa){if((N=zt())==null){Ce=1;break e}if((function($e,wt){var Ft=[0],Xt=[0],Tt=[0];t:for(;;){if($e==null)return 0;if(wt==null)return $e.a=2,0;if($e.l=wt,$e.a=0,H($e.m,wt.data,wt.w,wt.ha),!ts($e.m,Ft,Xt,Tt)){$e.a=3;break t}if($e.xb=tg,wt.width=Ft[0],wt.height=Xt[0],!is(Ft[0],Xt[0],1,$e,null))break t;return 1}return e($e.a!=0),0})(N,Z)){if(Z=(k=qo(Z.width,Z.height,Ce.Oa,Ce.ba))==0){t:{Z=N;s:for(;;){if(Z==null){Z=0;break t}if(e(Z.s.yc!=null),e(Z.s.Ya!=null),e(0<Z.s.Wb),e((z=Z.l)!=null),e((ge=z.ma)!=null),Z.xb!=0){if(Z.ca=ge.ba,Z.tb=ge.tb,e(Z.ca!=null),!ac(ge.Oa,z,go)){Z.a=2;break s}if(!ke(Z,z.width)||z.da)break s;if((z.da||Mt(Z.ca.S))&&Vo(),11>Z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Z.ca.f.kb.F!=null&&Vo()),Z.Pb&&0<Z.s.ua&&Z.s.vb.X==null&&!Ae(Z.s.vb,Z.s.Wa.Xa)){Z.a=1;break s}Z.xb=0}if(!Ke(Z,Z.V,Z.Ba,Z.c,Z.i,z.o,Je))break s;ge.Dc=Z.Ma,Z=1;break t}e(Z.a!=0),Z=0}Z=!Z}Z&&(k=N.a)}else k=N.a}else{if((N=new qr)==null){Ce=1;break e}if(N.Fa=ge.na,N.P=ge.P,N.qc=ge.Sa,Ln(N,Z)){if((k=qo(Z.width,Z.height,Ce.Oa,Ce.ba))==0){if(N.Aa=0,z=Ce.Oa,e((ge=N)!=null),z!=null){if(0<(Re=0>(Re=z.Md)?0:100<Re?255:255*Re/100)){for(qe=ut=0;4>qe;++qe)12>(Lt=ge.pb[qe]).lc&&(Lt.ia=Re*gm[0>Lt.lc?0:Lt.lc]>>3),ut|=Lt.ia;ut&&(alert("todo:VP8InitRandom"),ge.ia=1)}ge.Ga=z.Id,100<ge.Ga?ge.Ga=100:0>ge.Ga&&(ge.Ga=0)}(function($e,wt){if($e==null)return 0;if(wt==null)return mr($e,2,"NULL VP8Io parameter in VP8Decode().");if(!$e.cb&&!Ln($e,wt))return 0;if(e($e.cb),wt.ac==null||wt.ac(wt)){wt.ob&&($e.L=0);var Ft=Ku[$e.L];if($e.L==2?($e.yb=0,$e.zb=0):($e.yb=wt.v-Ft>>4,$e.zb=wt.j-Ft>>4,0>$e.yb&&($e.yb=0),0>$e.zb&&($e.zb=0)),$e.Va=wt.o+15+Ft>>4,$e.Hb=wt.va+15+Ft>>4,$e.Hb>$e.za&&($e.Hb=$e.za),$e.Va>$e.Ub&&($e.Va=$e.Ub),0<$e.L){var Xt=$e.ed;for(Ft=0;4>Ft;++Ft){var Tt;if($e.Qa.Cb){var Wt=$e.Qa.Lb[Ft];$e.Qa.Fb||(Wt+=Xt.Tb)}else Wt=Xt.Tb;for(Tt=0;1>=Tt;++Tt){var rs=$e.gd[Ft][Tt],fs=Wt;if(Xt.Pc&&(fs+=Xt.vd[0],Tt&&(fs+=Xt.od[0])),0<(fs=0>fs?0:63<fs?63:fs)){var us=fs;0<Xt.wb&&(us=4<Xt.wb?us>>2:us>>1)>9-Xt.wb&&(us=9-Xt.wb),1>us&&(us=1),rs.dd=us,rs.tc=2*fs+us,rs.ld=40<=fs?2:15<=fs?1:0}else rs.tc=0;rs.La=Tt}}}Ft=0}else mr($e,6,"Frame setup failed"),Ft=$e.a;if(Ft=Ft==0){if(Ft){$e.$c=0,0<$e.Aa||($e.Ic=xm);t:{Ft=$e.Ic,Xt=4*(us=$e.za);var Ls=32*us,_s=us+1,tr=0<$e.L?us*(0<$e.Aa?2:1):0,Fs=($e.Aa==2?2:1)*us;if((rs=Xt+832+(Tt=3*(16*Ft+Ku[$e.L])/2*Ls)+(Wt=$e.Fa!=null&&0<$e.Fa.length?$e.Kc.c*$e.Kc.i:0))!=rs)Ft=0;else{if(rs>$e.Vb){if($e.Vb=0,$e.Ec=i(rs),$e.Fc=0,$e.Ec==null){Ft=mr($e,1,"no memory during frame initialization.");break t}$e.Vb=rs}rs=$e.Ec,fs=$e.Fc,$e.Ac=rs,$e.Bc=fs,fs+=Xt,$e.Gd=o(Ls,bs),$e.Hd=0,$e.rb=o(_s+1,gs),$e.sb=1,$e.wa=tr?o(tr,kt):null,$e.Y=0,$e.D.Nb=0,$e.D.wa=$e.wa,$e.D.Y=$e.Y,0<$e.Aa&&($e.D.Y+=us),e(!0),$e.oc=rs,$e.pc=fs,fs+=832,$e.ya=o(Fs,Ss),$e.aa=0,$e.D.ya=$e.ya,$e.D.aa=$e.aa,$e.Aa==2&&($e.D.aa+=us),$e.R=16*us,$e.B=8*us,us=(Ls=Ku[$e.L])*$e.R,Ls=Ls/2*$e.B,$e.sa=rs,$e.ta=fs+us,$e.qa=$e.sa,$e.ra=$e.ta+16*Ft*$e.R+Ls,$e.Ha=$e.qa,$e.Ia=$e.ra+8*Ft*$e.B+Ls,$e.$c=0,fs+=Tt,$e.mb=Wt?rs:null,$e.nb=Wt?fs:null,e(fs+Wt<=$e.Fc+$e.Vb),Xh($e),n($e.Ac,$e.Bc,0,Xt),Ft=1}}if(Ft){if(wt.ka=0,wt.y=$e.sa,wt.O=$e.ta,wt.f=$e.qa,wt.N=$e.ra,wt.ea=$e.Ha,wt.Vd=$e.Ia,wt.fa=$e.R,wt.Rc=$e.B,wt.F=null,wt.J=0,!MA){for(Ft=-255;255>=Ft;++Ft)Qd[255+Ft]=0>Ft?-Ft:Ft;for(Ft=-1020;1020>=Ft;++Ft)LA[1020+Ft]=-128>Ft?-128:127<Ft?127:Ft;for(Ft=-112;112>=Ft;++Ft)um[112+Ft]=-16>Ft?-16:15<Ft?15:Ft;for(Ft=-255;510>=Ft;++Ft)hm[255+Ft]=0>Ft?0:255<Ft?255:Ft;MA=1}eo=Qo,cc=Jh,fo=yi,Qr=Zh,Fr=em,li=CA,pa=TA,Za=Zl,_l=pe,Go=Ge,Od=PA,cm=U,Xp=lt,F0=Bt,D0=Yl,T0=Kl,Jp=Ld,Zp=nm,Ua[0]=FA,Ua[1]=kA,Ua[2]=EA,Ua[3]=rm,Ua[4]=Xi,Ua[5]=am,Ua[6]=Yn,Ua[7]=Td,Ua[8]=Pd,Ua[9]=Ji,Ni[0]=Ho,Ni[1]=tm,Ni[2]=sm,Ni[3]=SA,Ni[4]=Gl,Ni[5]=Dd,Ni[6]=Pc,Wo[0]=Iu,Wo[1]=BA,Wo[2]=pl,Wo[3]=DA,Wo[4]=Mn,Wo[5]=Lu,Wo[6]=gl,Ft=1}else Ft=0}Ft&&(Ft=(function(pr,ja){for(pr.M=0;pr.M<pr.Va;++pr.M){var ir,Cs=pr.Jc[pr.M&pr.Xb],ys=pr.m,Da=pr;for(ir=0;ir<Da.za;++ir){var Ys=ys,cr=Da,Gr=cr.Ac,Nn=cr.Bc+4*ir,si=cr.zc,ga=cr.ya[cr.aa+ir];if(cr.Qa.Bb?ga.$b=Te(Ys,cr.Pa.jb[0])?2+Te(Ys,cr.Pa.jb[2]):Te(Ys,cr.Pa.jb[1]):ga.$b=0,cr.kc&&(ga.Ad=Te(Ys,cr.Bd)),ga.Za=!Te(Ys,145)+0,ga.Za){var un=ga.Ob,ui=0;for(cr=0;4>cr;++cr){var hn,Ar=si[0+cr];for(hn=0;4>hn;++hn){Ar=Zn[Gr[Nn+hn]][Ar];for(var Lr=VA[Te(Ys,Ar[0])];0<Lr;)Lr=VA[2*Lr+Te(Ys,Ar[Lr])];Ar=-Lr,Gr[Nn+hn]=Ar}r(un,ui,Gr,Nn,4),ui+=4,si[0+cr]=Ar}}else Ar=Te(Ys,156)?Te(Ys,128)?1:3:Te(Ys,163)?2:0,ga.Ob[0]=Ar,n(Gr,Nn,Ar,4),n(si,0,Ar,4);ga.Dd=Te(Ys,142)?Te(Ys,114)?Te(Ys,183)?1:3:2:0}if(Da.m.Ka)return mr(pr,7,"Premature end-of-partition0 encountered.");for(;pr.ja<pr.za;++pr.ja){if(Da=Cs,Ys=(ys=pr).rb[ys.sb-1],Gr=ys.rb[ys.sb+ys.ja],ir=ys.ya[ys.aa+ys.ja],Nn=ys.kc?ir.Ad:0)Ys.la=Gr.la=0,ir.Za||(Ys.Na=Gr.Na=0),ir.Hc=0,ir.Gc=0,ir.ia=0;else{var Ta,Hr;if(Ys=Gr,Gr=Da,Nn=ys.Pa.Xc,si=ys.ya[ys.aa+ys.ja],ga=ys.pb[si.$b],cr=si.ad,un=0,ui=ys.rb[ys.sb-1],Ar=hn=0,n(cr,un,0,384),si.Za)var jn=0,Pa=Nn[3];else{Lr=i(16);var Mr=Ys.Na+ui.Na;if(Mr=so(Gr,Nn[1],Mr,ga.Eb,0,Lr,0),Ys.Na=ui.Na=(0<Mr)+0,1<Mr)eo(Lr,0,cr,un);else{var tn=Lr[0]+3>>3;for(Lr=0;256>Lr;Lr+=16)cr[un+Lr]=tn}jn=1,Pa=Nn[0]}var Wr=15&Ys.la,mn=15&ui.la;for(Lr=0;4>Lr;++Lr){var An=1&mn;for(tn=Hr=0;4>tn;++tn)Wr=Wr>>1|(An=(Mr=so(Gr,Pa,Mr=An+(1&Wr),ga.Sc,jn,cr,un))>jn)<<7,Hr=Hr<<2|(3<Mr?3:1<Mr?2:cr[un+0]!=0),un+=16;Wr>>=4,mn=mn>>1|An<<7,hn=(hn<<8|Hr)>>>0}for(Pa=Wr,jn=mn>>4,Ta=0;4>Ta;Ta+=2){for(Hr=0,Wr=Ys.la>>4+Ta,mn=ui.la>>4+Ta,Lr=0;2>Lr;++Lr){for(An=1&mn,tn=0;2>tn;++tn)Mr=An+(1&Wr),Wr=Wr>>1|(An=0<(Mr=so(Gr,Nn[2],Mr,ga.Qc,0,cr,un)))<<3,Hr=Hr<<2|(3<Mr?3:1<Mr?2:cr[un+0]!=0),un+=16;Wr>>=2,mn=mn>>1|An<<5}Ar|=Hr<<4*Ta,Pa|=Wr<<4<<Ta,jn|=(240&mn)<<Ta}Ys.la=Pa,ui.la=jn,si.Hc=hn,si.Gc=Ar,si.ia=43690&Ar?0:ga.ia,Nn=!(hn|Ar)}if(0<ys.L&&(ys.wa[ys.Y+ys.ja]=ys.gd[ir.$b][ir.Za],ys.wa[ys.Y+ys.ja].La|=!Nn),Da.Ka)return mr(pr,7,"Premature end-of-file encountered.")}if(Xh(pr),ys=ja,Da=1,ir=(Cs=pr).D,Ys=0<Cs.L&&Cs.M>=Cs.zb&&Cs.M<=Cs.Va,Cs.Aa==0)t:{if(ir.M=Cs.M,ir.uc=Ys,Zi(Cs,ir),Da=1,ir=(Hr=Cs.D).Nb,Ys=(Ar=Ku[Cs.L])*Cs.R,Gr=Ar/2*Cs.B,Lr=16*ir*Cs.R,tn=8*ir*Cs.B,Nn=Cs.sa,si=Cs.ta-Ys+Lr,ga=Cs.qa,cr=Cs.ra-Gr+tn,un=Cs.Ha,ui=Cs.Ia-Gr+tn,mn=(Wr=Hr.M)==0,hn=Wr>=Cs.Va-1,Cs.Aa==2&&Zi(Cs,Hr),Hr.uc)for(An=(Mr=Cs).D.M,e(Mr.D.uc),Hr=Mr.yb;Hr<Mr.Hb;++Hr){jn=Hr,Pa=An;var oa=(Dr=(fn=Mr).D).Nb;Ta=fn.R;var Dr=Dr.wa[Dr.Y+jn],hi=fn.sa,Qa=fn.ta+16*oa*Ta+16*jn,Vs=Dr.dd,zs=Dr.tc;if(zs!=0)if(e(3<=zs),fn.L==1)0<jn&&T0(hi,Qa,Ta,zs+4),Dr.La&&Zp(hi,Qa,Ta,zs),0<Pa&&D0(hi,Qa,Ta,zs+4),Dr.La&&Jp(hi,Qa,Ta,zs);else{var Rr=fn.B,Mi=fn.qa,jo=fn.ra+8*oa*Rr+8*jn,ji=fn.Ha,fn=fn.Ia+8*oa*Rr+8*jn;oa=Dr.ld,0<jn&&(Za(hi,Qa,Ta,zs+4,Vs,oa),Go(Mi,jo,ji,fn,Rr,zs+4,Vs,oa)),Dr.La&&(cm(hi,Qa,Ta,zs,Vs,oa),F0(Mi,jo,ji,fn,Rr,zs,Vs,oa)),0<Pa&&(pa(hi,Qa,Ta,zs+4,Vs,oa),_l(Mi,jo,ji,fn,Rr,zs+4,Vs,oa)),Dr.La&&(Od(hi,Qa,Ta,zs,Vs,oa),Xp(Mi,jo,ji,fn,Rr,zs,Vs,oa))}}if(Cs.ia&&alert("todo:DitherRow"),ys.put!=null){if(Hr=16*Wr,Wr=16*(Wr+1),mn?(ys.y=Cs.sa,ys.O=Cs.ta+Lr,ys.f=Cs.qa,ys.N=Cs.ra+tn,ys.ea=Cs.Ha,ys.W=Cs.Ia+tn):(Hr-=Ar,ys.y=Nn,ys.O=si,ys.f=ga,ys.N=cr,ys.ea=un,ys.W=ui),hn||(Wr-=Ar),Wr>ys.o&&(Wr=ys.o),ys.F=null,ys.J=null,Cs.Fa!=null&&0<Cs.Fa.length&&Hr<Wr&&(ys.J=fa(Cs,ys,Hr,Wr-Hr),ys.F=Cs.mb,ys.F==null&&ys.F.length==0)){Da=mr(Cs,3,"Could not decode alpha data.");break t}Hr<ys.j&&(Ar=ys.j-Hr,Hr=ys.j,e(!(1&Ar)),ys.O+=Cs.R*Ar,ys.N+=Cs.B*(Ar>>1),ys.W+=Cs.B*(Ar>>1),ys.F!=null&&(ys.J+=ys.width*Ar)),Hr<Wr&&(ys.O+=ys.v,ys.N+=ys.v>>1,ys.W+=ys.v>>1,ys.F!=null&&(ys.J+=ys.v),ys.ka=Hr-ys.j,ys.U=ys.va-ys.v,ys.T=Wr-Hr,Da=ys.put(ys))}ir+1!=Cs.Ic||hn||(r(Cs.sa,Cs.ta-Ys,Nn,si+16*Cs.R,Ys),r(Cs.qa,Cs.ra-Gr,ga,cr+8*Cs.B,Gr),r(Cs.Ha,Cs.Ia-Gr,un,ui+8*Cs.B,Gr))}if(!Da)return mr(pr,6,"Output aborted.")}return 1})($e,wt)),wt.bc!=null&&wt.bc(wt),Ft&=1}return Ft?($e.cb=0,Ft):0})(N,Z)||(k=N.a)}}else k=N.a}k==0&&Ce.Oa!=null&&Ce.Oa.fd&&(k=lm(Ce.ba))}Ce=k}je=Ce!=0?null:11>je?Fe.f.RGBA.eb:Fe.f.kb.y}else je=null;return je};var GA=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(P,Y){for(var Q="",L=0;L<4;L++)Q+=String.fromCharCode(P[Y++]);return Q}function m(P,Y){return P[Y+0]|P[Y+1]<<8}function A(P,Y){return(P[Y+0]|P[Y+1]<<8|P[Y+2]<<16)>>>0}function g(P,Y){return(P[Y+0]|P[Y+1]<<8|P[Y+2]<<16|P[Y+3]<<24)>>>0}new c;var p=[0],v=[0],b=[],y=new c,w=a,B=(function(P,Y){var Q={},L=0,ae=!1,ne=0,V=0;if(Q.frames=[],!(function(I,R){for(var G=0;G<4;G++)if(I[R+G]!="RIFF".charCodeAt(G))return!0;return!1})(P,Y)){for(g(P,Y+=4),Y+=8;Y<P.length;){var O=u(P,Y),X=g(P,Y+=4);Y+=4;var $=X+(1&X);switch(O){case"VP8 ":case"VP8L":Q.frames[L]===void 0&&(Q.frames[L]={}),(K=Q.frames[L]).src_off=ae?V:Y-8,K.src_size=ne+X+8,L++,ae&&(ae=!1,ne=0,V=0);break;case"VP8X":(K=Q.header={}).feature_flags=P[Y];var H=Y+4;K.canvas_width=1+A(P,H),H+=3,K.canvas_height=1+A(P,H),H+=3;break;case"ALPH":ae=!0,ne=$+8,V=Y-8;break;case"ANIM":(K=Q.header).bgcolor=g(P,Y),H=Y+4,K.loop_count=m(P,H),H+=2;break;case"ANMF":var te,K;(K=Q.frames[L]={}).offset_x=2*A(P,Y),Y+=3,K.offset_y=2*A(P,Y),Y+=3,K.width=1+A(P,Y),Y+=3,K.height=1+A(P,Y),Y+=3,K.duration=A(P,Y),Y+=3,te=P[Y++],K.dispose=1&te,K.blend=te>>1&1}O!="ANMF"&&(Y+=$)}return Q}})(w,0);B.response=w,B.rgbaoutput=!0,B.dataurl=!1;var j=B.header?B.header:null,E=B.frames?B.frames:null;if(j){j.loop_counter=j.loop_count,p=[j.canvas_height],v=[j.canvas_width];for(var S=0;S<E.length&&E[S].blend!=0;S++);}var T=E[0],M=y.WebPDecodeRGBA(w,T.src_off,T.src_size,v,p);T.rgba=M,T.imgwidth=v[0],T.imgheight=p[0];for(var D=0;D<v[0]*p[0]*4;D++)b[D]=M[D];return this.width=v,this.height=p,this.data=b,this}function uY(){var a,e=this.internal.__metadata__.metadata,s=unescape(encodeURIComponent(e));a=this.internal.__metadata__.rawXml?s:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+a.length+" >>"),this.internal.write("stream"),this.internal.write(a),this.internal.write("endstream"),this.internal.write("endobj")}function hY(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(a){var e,s,r,n,i,o,l,c,u,m=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new c,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new o,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new o,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};a.events.push(["initialized",function(){this.context2d=new A(this),e=this.internal.f2,s=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new m}]);var A=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var R=I;Object.defineProperty(this,"pdf",{get:function(){return R}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(Ae){G=!!Ae}});var se=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return se},set:function(Ae){se=!!Ae}});var le=0;Object.defineProperty(this,"posX",{get:function(){return le},set:function(Ae){isNaN(Ae)||(le=Ae)}});var ye=0;Object.defineProperty(this,"posY",{get:function(){return ye},set:function(Ae){isNaN(Ae)||(ye=Ae)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Ae){var gt;typeof Ae=="number"?gt=[Ae,Ae,Ae,Ae]:((gt=new Array(4))[0]=Ae[0],gt[1]=Ae.length>=2?Ae[1]:gt[0],gt[2]=Ae.length>=3?Ae[2]:gt[0],gt[3]=Ae.length>=4?Ae[3]:gt[1]),u.margin=gt}});var De=!1;Object.defineProperty(this,"autoPaging",{get:function(){return De},set:function(Ae){De=Ae}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(Ae){me=Ae}});var Te=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Te},set:function(Ae){Te=Ae}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Ae){Ae instanceof m&&(u=Ae)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Ae){u.path=Ae}});var we=[];Object.defineProperty(this,"ctxStack",{get:function(){return we},set:function(Ae){we=Ae}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ae){var gt;gt=g(Ae),this.ctx.fillStyle=gt.style,this.ctx.isFillTransparent=gt.a===0,this.ctx.fillOpacity=gt.a,this.pdf.setFillColor(gt.r,gt.g,gt.b,{a:gt.a}),this.pdf.setTextColor(gt.r,gt.g,gt.b,{a:gt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ae){var gt=g(Ae);this.ctx.strokeStyle=gt.style,this.ctx.isStrokeTransparent=gt.a===0,this.ctx.strokeOpacity=gt.a,gt.a===0?this.pdf.setDrawColor(255,255,255):(gt.a,this.pdf.setDrawColor(gt.r,gt.g,gt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ae){["butt","round","square"].indexOf(Ae)!==-1&&(this.ctx.lineCap=Ae,this.pdf.setLineCap(Ae))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ae){isNaN(Ae)||(this.ctx.lineWidth=Ae,this.pdf.setLineWidth(Ae))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ae){["bevel","round","miter"].indexOf(Ae)!==-1&&(this.ctx.lineJoin=Ae,this.pdf.setLineJoin(Ae))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ae){isNaN(Ae)||(this.ctx.miterLimit=Ae,this.pdf.setMiterLimit(Ae))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ae){this.ctx.textBaseline=Ae}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ae){["right","end","center","left","start"].indexOf(Ae)!==-1&&(this.ctx.textAlign=Ae)}});var st=null,ce=null,tt=null;Object.defineProperty(this,"fontFaces",{get:function(){return tt},set:function(Ae){st=null,ce=null,tt=Ae}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ae){var gt;if(this.ctx.font=Ae,(gt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Ae))!==null){var q=gt[1];gt[2];var Qt=gt[3],yt=gt[4];gt[5];var Oe=gt[6],ze=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(yt)[2];yt=Math.floor(ze==="px"?parseFloat(yt)*this.pdf.internal.scaleFactor:ze==="em"?parseFloat(yt)*this.pdf.getFontSize():parseFloat(yt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(yt);var Le=(function(xt){var Xe,Ct,_e=[],Se=xt.trim();if(Se==="")return EN;if(Se in yE)return[yE[Se]];for(;Se!=="";){switch(Ct=null,Xe=(Se=wE(Se)).charAt(0)){case'"':case"'":Ct=nY(Se.substring(1),Xe);break;default:Ct=iY(Se)}if(Ct===null||(_e.push(Ct[0]),(Se=wE(Ct[1]))!==""&&Se.charAt(0)!==","))return EN;Se=Se.replace(/^,/,"")}return _e})(Oe);if(this.fontFaces){var oe=(function(xt,Xe){var Ct=xt.getFontList(),_e=JSON.stringify(Ct);if(st===null||ce!==_e){var Se=(function(Ve){var et=[];return Object.keys(Ve).forEach(function(vt){Ve[vt].forEach(function(Mt){var Ye=null;switch(Mt){case"bold":Ye={family:vt,weight:"bold"};break;case"italic":Ye={family:vt,style:"italic"};break;case"bolditalic":Ye={family:vt,weight:"bold",style:"italic"};break;case"":case"normal":Ye={family:vt}}Ye!==null&&(Ye.ref={name:vt,style:Mt},et.push(Ye))})}),et})(Ct);st=(function(Ve){for(var et={},vt=0;vt<Ve.length;++vt){var Mt=SN(Ve[vt]),Ye=Mt.family,Et=Mt.stretch,Gt=Mt.style,ee=Mt.weight;et[Ye]=et[Ye]||{},et[Ye][Et]=et[Ye][Et]||{},et[Ye][Et][Gt]=et[Ye][Et][Gt]||{},et[Ye][Et][Gt][ee]=Mt}return et})(Se.concat(Xe)),ce=_e}return st})(this.pdf,this.fontFaces),he=Le.map(function(xt){return{family:xt,stretch:"normal",weight:Qt,style:q}}),W=(function(xt,Xe,Ct){for(var _e=(Ct=Ct||{}).defaultFontFamily||"times",Se=Object.assign({},aY,Ct.genericFontFamilies||{}),Ve=null,et=null,vt=0;vt<Xe.length;++vt)if(Se[(Ve=SN(Xe[vt])).family]&&(Ve.family=Se[Ve.family]),xt.hasOwnProperty(Ve.family)){et=xt[Ve.family];break}if(!(et=et||xt[_e]))throw new Error("Could not find a font-family for the rule '"+vE(Ve)+"' and default family '"+_e+"'.");if(et=(function(Mt,Ye){if(Ye[Mt])return Ye[Mt];var Et=c_[Mt],Gt=Et<=c_.normal?-1:1,ee=bE(Ye,cI,Et,Gt);if(!ee)throw new Error("Could not find a matching font-stretch value for "+Mt);return ee})(Ve.stretch,et),et=(function(Mt,Ye){if(Ye[Mt])return Ye[Mt];for(var Et=lI[Mt],Gt=0;Gt<Et.length;++Gt)if(Ye[Et[Gt]])return Ye[Et[Gt]];throw new Error("Could not find a matching font-style for "+Mt)})(Ve.style,et),!(et=(function(Mt,Ye){if(Ye[Mt])return Ye[Mt];if(Mt===400&&Ye[500])return Ye[500];if(Mt===500&&Ye[400])return Ye[400];var Et=rY[Mt],Gt=bE(Ye,dI,Et,Mt<400?-1:1);if(!Gt)throw new Error("Could not find a matching font-weight for value "+Mt);return Gt})(Ve.weight,et)))throw new Error("Failed to resolve a font for the rule '"+vE(Ve)+"'.");return et})(oe,he);this.pdf.setFont(W.ref.name,W.ref.style)}else{var ve="";(Qt==="bold"||parseInt(Qt,10)>=700||q==="bold")&&(ve="bold"),q==="italic"&&(ve+="italic"),ve.length===0&&(ve="normal");for(var Qe="",Ze={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},J=0;J<Le.length;J++){if(this.pdf.internal.getFont(Le[J],ve,{noFallback:!0,disableWarning:!0})!==void 0){Qe=Le[J];break}if(ve==="bolditalic"&&this.pdf.internal.getFont(Le[J],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Qe=Le[J],ve="bold";else if(this.pdf.internal.getFont(Le[J],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Qe=Le[J],ve="normal";break}}if(Qe===""){for(var He=0;He<Le.length;He++)if(Ze[Le[He]]){Qe=Ze[Le[He]];break}}Qe=Qe===""?"Times":Qe,this.pdf.setFont(Qe,ve)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ae){this.ctx.globalCompositeOperation=Ae}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ae){this.ctx.globalAlpha=Ae}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ae){this.ctx.lineDashOffset=Ae,K.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ae){this.ctx.lineDash=Ae,K.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ae){this.ctx.ignoreClearRect=!!Ae}})};A.prototype.setLineDash=function(I){this.lineDash=I},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){E.call(this,"fill",!1)},A.prototype.stroke=function(){E.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(I,R){if(isNaN(I)||isNaN(R))throw Ca.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new o(I,R));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(I,R)},A.prototype.closePath=function(){var I=new o(0,0),R=0;for(R=this.path.length-1;R!==-1;R--)if(this.path[R].type==="begin"&&ha(this.path[R+1])==="object"&&typeof this.path[R+1].x=="number"){I=new o(this.path[R+1].x,this.path[R+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(I.x,I.y)},A.prototype.lineTo=function(I,R){if(isNaN(I)||isNaN(R))throw Ca.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new o(I,R));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},A.prototype.quadraticCurveTo=function(I,R,G,se){if(isNaN(G)||isNaN(se)||isNaN(I)||isNaN(R))throw Ca.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var le=this.ctx.transform.applyToPoint(new o(G,se)),ye=this.ctx.transform.applyToPoint(new o(I,R));this.path.push({type:"qct",x1:ye.x,y1:ye.y,x:le.x,y:le.y}),this.ctx.lastPoint=new o(le.x,le.y)},A.prototype.bezierCurveTo=function(I,R,G,se,le,ye){if(isNaN(le)||isNaN(ye)||isNaN(I)||isNaN(R)||isNaN(G)||isNaN(se))throw Ca.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var De=this.ctx.transform.applyToPoint(new o(le,ye)),me=this.ctx.transform.applyToPoint(new o(I,R)),Te=this.ctx.transform.applyToPoint(new o(G,se));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:Te.x,y2:Te.y,x:De.x,y:De.y}),this.ctx.lastPoint=new o(De.x,De.y)},A.prototype.arc=function(I,R,G,se,le,ye){if(isNaN(I)||isNaN(R)||isNaN(G)||isNaN(se)||isNaN(le))throw Ca.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ye=!!ye,!this.ctx.transform.isIdentity){var De=this.ctx.transform.applyToPoint(new o(I,R));I=De.x,R=De.y;var me=this.ctx.transform.applyToPoint(new o(0,G)),Te=this.ctx.transform.applyToPoint(new o(0,0));G=Math.sqrt(Math.pow(me.x-Te.x,2)+Math.pow(me.y-Te.y,2))}Math.abs(le-se)>=2*Math.PI&&(se=0,le=2*Math.PI),this.path.push({type:"arc",x:I,y:R,radius:G,startAngle:se,endAngle:le,counterclockwise:ye})},A.prototype.arcTo=function(I,R,G,se,le){throw new Error("arcTo not implemented.")},A.prototype.rect=function(I,R,G,se){if(isNaN(I)||isNaN(R)||isNaN(G)||isNaN(se))throw Ca.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,R),this.lineTo(I+G,R),this.lineTo(I+G,R+se),this.lineTo(I,R+se),this.lineTo(I,R),this.lineTo(I+G,R),this.lineTo(I,R)},A.prototype.fillRect=function(I,R,G,se){if(isNaN(I)||isNaN(R)||isNaN(G)||isNaN(se))throw Ca.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var le={};this.lineCap!=="butt"&&(le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,R,G,se),this.fill(),le.hasOwnProperty("lineCap")&&(this.lineCap=le.lineCap),le.hasOwnProperty("lineJoin")&&(this.lineJoin=le.lineJoin)}},A.prototype.strokeRect=function(I,R,G,se){if(isNaN(I)||isNaN(R)||isNaN(G)||isNaN(se))throw Ca.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(I,R,G,se),this.stroke())},A.prototype.clearRect=function(I,R,G,se){if(isNaN(I)||isNaN(R)||isNaN(G)||isNaN(se))throw Ca.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,R,G,se))},A.prototype.save=function(I){I=typeof I!="boolean"||I;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(R),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var se=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=se}},A.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(R),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(I){var R,G,se,le;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))R=0,G=0,se=0,le=0;else{var ye=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(ye!==null)R=parseInt(ye[1]),G=parseInt(ye[2]),se=parseInt(ye[3]),le=1;else if((ye=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)R=parseInt(ye[1]),G=parseInt(ye[2]),se=parseInt(ye[3]),le=parseFloat(ye[4]);else{if(le=1,typeof I=="string"&&I.charAt(0)!=="#"){var De=new tI(I);I=De.ok?De.toHex():"#000000"}I.length===4?(R=I.substring(1,2),R+=R,G=I.substring(2,3),G+=G,se=I.substring(3,4),se+=se):(R=I.substring(1,3),G=I.substring(3,5),se=I.substring(5,7)),R=parseInt(R,16),G=parseInt(G,16),se=parseInt(se,16)}}return{r:R,g:G,b:se,a:le,style:I}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};A.prototype.fillText=function(I,R,G,se){if(isNaN(R)||isNaN(G)||typeof I!="string")throw Ca.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(se=isNaN(se)?void 0:se,!p.call(this)){var le=$(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;L.call(this,{text:I,x:R,y:G,scale:ye,angle:le,align:this.textAlign,maxWidth:se})}},A.prototype.strokeText=function(I,R,G,se){if(isNaN(R)||isNaN(G)||typeof I!="string")throw Ca.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){se=isNaN(se)?void 0:se;var le=$(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;L.call(this,{text:I,x:R,y:G,scale:ye,renderingMode:"stroke",angle:le,align:this.textAlign,maxWidth:se})}},A.prototype.measureText=function(I){if(typeof I!="string")throw Ca.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var R=this.pdf,G=this.pdf.internal.scaleFactor,se=R.internal.getFontSize(),le=R.getStringUnitWidth(I)*se/R.internal.scaleFactor;return new function(ye){var De=(ye=ye||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return De}}),this}({width:le*=Math.round(96*G/72*1e4)/1e4})},A.prototype.scale=function(I,R){if(isNaN(I)||isNaN(R))throw Ca.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new c(I,0,0,R,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},A.prototype.rotate=function(I){if(isNaN(I))throw Ca.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var R=new c(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(R)},A.prototype.translate=function(I,R){if(isNaN(I)||isNaN(R))throw Ca.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new c(1,0,0,1,I,R);this.ctx.transform=this.ctx.transform.multiply(G)},A.prototype.transform=function(I,R,G,se,le,ye){if(isNaN(I)||isNaN(R)||isNaN(G)||isNaN(se)||isNaN(le)||isNaN(ye))throw Ca.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var De=new c(I,R,G,se,le,ye);this.ctx.transform=this.ctx.transform.multiply(De)},A.prototype.setTransform=function(I,R,G,se,le,ye){I=isNaN(I)?1:I,R=isNaN(R)?0:R,G=isNaN(G)?0:G,se=isNaN(se)?1:se,le=isNaN(le)?0:le,ye=isNaN(ye)?0:ye,this.ctx.transform=new c(I,R,G,se,le,ye)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(I,R,G,se,le,ye,De,me,Te){var we=this.pdf.getImageProperties(I),st=1,ce=1,tt=1,Ae=1;se!==void 0&&me!==void 0&&(tt=me/se,Ae=Te/le,st=we.width/se*me/se,ce=we.height/le*Te/le),ye===void 0&&(ye=R,De=G,R=0,G=0),se!==void 0&&me===void 0&&(me=se,Te=le),se===void 0&&me===void 0&&(me=we.width,Te=we.height);var gt=this.ctx.transform.decompose(),q=$(gt.rotate.shx),Qt=new c,yt=(Qt=(Qt=(Qt=Qt.multiply(gt.translate)).multiply(gt.skew)).multiply(gt.scale)).applyToRectangle(new l(ye-R*tt,De-G*Ae,se*st,le*ce));if(this.autoPaging){for(var Oe,ze=y.call(this,yt),Le=[],oe=0;oe<ze.length;oe+=1)Le.indexOf(ze[oe])===-1&&Le.push(ze[oe]);j(Le);for(var he=Le[0],W=Le[Le.length-1],ve=he;ve<W+1;ve++){this.pdf.setPage(ve);var Qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ze=ve===1?this.posY+this.margin[0]:this.margin[0],J=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],He=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=ve===1?0:J+(ve-2)*He;if(this.ctx.clip_path.length!==0){var Xe=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Oe,this.posX+this.margin[3],-xt+Ze+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=Xe}var Ct=JSON.parse(JSON.stringify(yt));Ct=B([Ct],this.posX+this.margin[3],-xt+Ze+this.ctx.prevPageLastElemOffset)[0];var _e=(ve>he||ve<W)&&b.call(this);_e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qe,He,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",Ct.x,Ct.y,Ct.w,Ct.h,null,null,q),_e&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(I,"JPEG",yt.x,yt.y,yt.w,yt.h,null,null,q)};var y=function(I,R,G){var se=[];R=R||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var le=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":se.push(Math.floor((I.y+le)/G)+1);break;case"arc":se.push(Math.floor((I.y+le-I.radius)/G)+1),se.push(Math.floor((I.y+le+I.radius)/G)+1);break;case"qct":var ye=H(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);se.push(Math.floor((ye.y+le)/G)+1),se.push(Math.floor((ye.y+ye.h+le)/G)+1);break;case"bct":var De=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);se.push(Math.floor((De.y+le)/G)+1),se.push(Math.floor((De.y+De.h+le)/G)+1);break;case"rect":se.push(Math.floor((I.y+le)/G)+1),se.push(Math.floor((I.y+I.h+le)/G)+1)}for(var me=0;me<se.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<se[me];)w.call(this);return se},w=function(){var I=this.fillStyle,R=this.strokeStyle,G=this.font,se=this.lineCap,le=this.lineWidth,ye=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=R,this.font=G,this.lineCap=se,this.lineWidth=le,this.lineJoin=ye},B=function(I,R,G){for(var se=0;se<I.length;se++)switch(I[se].type){case"bct":I[se].x2+=R,I[se].y2+=G;case"qct":I[se].x1+=R,I[se].y1+=G;default:I[se].x+=R,I[se].y+=G}return I},j=function(I){return I.sort(function(R,G){return R-G})},E=function(I,R){var G=this.fillStyle,se=this.strokeStyle,le=this.lineCap,ye=this.lineWidth,De=Math.abs(ye*this.ctx.transform.scaleX),me=this.lineJoin;if(this.autoPaging){for(var Te,we,st=JSON.parse(JSON.stringify(this.path)),ce=JSON.parse(JSON.stringify(this.path)),tt=[],Ae=0;Ae<ce.length;Ae++)if(ce[Ae].x!==void 0)for(var gt=y.call(this,ce[Ae]),q=0;q<gt.length;q+=1)tt.indexOf(gt[q])===-1&&tt.push(gt[q]);for(var Qt=0;Qt<tt.length;Qt++)for(;this.pdf.internal.getNumberOfPages()<tt[Qt];)w.call(this);j(tt);for(var yt=tt[0],Oe=tt[tt.length-1],ze=yt;ze<Oe+1;ze++){this.pdf.setPage(ze),this.fillStyle=G,this.strokeStyle=se,this.lineCap=le,this.lineWidth=De,this.lineJoin=me;var Le=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],oe=ze===1?this.posY+this.margin[0]:this.margin[0],he=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],W=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ve=ze===1?0:he+(ze-2)*W;if(this.ctx.clip_path.length!==0){var Qe=this.path;Te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Te,this.posX+this.margin[3],-ve+oe+this.ctx.prevPageLastElemOffset),S.call(this,I,!0),this.path=Qe}if(we=JSON.parse(JSON.stringify(st)),this.path=B(we,this.posX+this.margin[3],-ve+oe+this.ctx.prevPageLastElemOffset),R===!1||ze===0){var Ze=(ze>yt||ze<Oe)&&b.call(this);Ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Le,W,null).clip().discardPath()),S.call(this,I,R),Ze&&this.pdf.restoreGraphicsState()}this.lineWidth=ye}this.path=st}else this.lineWidth=De,S.call(this,I,R),this.lineWidth=ye},S=function(I,R){if((I!=="stroke"||R||!v.call(this))&&(I==="stroke"||R||!p.call(this))){for(var G,se,le=[],ye=this.path,De=0;De<ye.length;De++){var me=ye[De];switch(me.type){case"begin":le.push({begin:!0});break;case"close":le.push({close:!0});break;case"mt":le.push({start:me,deltas:[],abs:[]});break;case"lt":var Te=le.length;if(ye[De-1]&&!isNaN(ye[De-1].x)&&(G=[me.x-ye[De-1].x,me.y-ye[De-1].y],Te>0)){for(;Te>=0;Te--)if(le[Te-1].close!==!0&&le[Te-1].begin!==!0){le[Te-1].deltas.push(G),le[Te-1].abs.push(me);break}}break;case"bct":G=[me.x1-ye[De-1].x,me.y1-ye[De-1].y,me.x2-ye[De-1].x,me.y2-ye[De-1].y,me.x-ye[De-1].x,me.y-ye[De-1].y],le[le.length-1].deltas.push(G);break;case"qct":var we=ye[De-1].x+2/3*(me.x1-ye[De-1].x),st=ye[De-1].y+2/3*(me.y1-ye[De-1].y),ce=me.x+2/3*(me.x1-me.x),tt=me.y+2/3*(me.y1-me.y),Ae=me.x,gt=me.y;G=[we-ye[De-1].x,st-ye[De-1].y,ce-ye[De-1].x,tt-ye[De-1].y,Ae-ye[De-1].x,gt-ye[De-1].y],le[le.length-1].deltas.push(G);break;case"arc":le.push({deltas:[],abs:[],arc:!0}),Array.isArray(le[le.length-1].abs)&&le[le.length-1].abs.push(me)}}se=R?null:I==="stroke"?"stroke":"fill";for(var q=!1,Qt=0;Qt<le.length;Qt++)if(le[Qt].arc)for(var yt=le[Qt].abs,Oe=0;Oe<yt.length;Oe++){var ze=yt[Oe];ze.type==="arc"?D.call(this,ze.x,ze.y,ze.radius,ze.startAngle,ze.endAngle,ze.counterclockwise,void 0,R,!q):ae.call(this,ze.x,ze.y),q=!0}else if(le[Qt].close===!0)this.pdf.internal.out("h"),q=!1;else if(le[Qt].begin!==!0){var Le=le[Qt].start.x,oe=le[Qt].start.y;ne.call(this,le[Qt].deltas,Le,oe),q=!0}se&&P.call(this,se),R&&Y.call(this)}},T=function(I){var R=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=R*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-G;case"top":return I+R-G;case"hanging":return I+R-2*G;case"middle":return I+R/2-G;default:return I}},M=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(R,G){this.colorStops.push([R,G])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var D=function(I,R,G,se,le,ye,De,me,Te){for(var we=O.call(this,G,se,le,ye),st=0;st<we.length;st++){var ce=we[st];st===0&&(Te?Q.call(this,ce.x1+I,ce.y1+R):ae.call(this,ce.x1+I,ce.y1+R)),V.call(this,I,R,ce.x2,ce.y2,ce.x3,ce.y3,ce.x4,ce.y4)}me?Y.call(this):P.call(this,De)},P=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Y=function(){this.pdf.clip(),this.pdf.discardPath()},Q=function(I,R){this.pdf.internal.out(s(I)+" "+r(R)+" m")},L=function(I){var R;switch(I.align){case"right":case"end":R="right";break;case"center":R="center";break;default:R="left"}var G,se,le,ye=this.pdf.getTextDimensions(I.text),De=T.call(this,I.y),me=M.call(this,De)-ye.h,Te=this.ctx.transform.applyToPoint(new o(I.x,De));if(this.autoPaging){var we=this.ctx.transform.decompose(),st=new c;st=(st=(st=st.multiply(we.translate)).multiply(we.skew)).multiply(we.scale);for(var ce=this.ctx.transform.applyToRectangle(new l(I.x,De,ye.w,ye.h)),tt=st.applyToRectangle(new l(I.x,me,ye.w,ye.h)),Ae=y.call(this,tt),gt=[],q=0;q<Ae.length;q+=1)gt.indexOf(Ae[q])===-1&&gt.push(Ae[q]);j(gt);for(var Qt=gt[0],yt=gt[gt.length-1],Oe=Qt;Oe<yt+1;Oe++){this.pdf.setPage(Oe);var ze=Oe===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],oe=this.pdf.internal.pageSize.height-this.margin[2],he=oe-this.margin[0],W=this.pdf.internal.pageSize.width-this.margin[1],ve=W-this.margin[3],Qe=Oe===1?0:Le+(Oe-2)*he;if(this.ctx.clip_path.length!==0){var Ze=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(G,this.posX+this.margin[3],-1*Qe+ze),S.call(this,"fill",!0),this.path=Ze}var J=B([JSON.parse(JSON.stringify(tt))],this.posX+this.margin[3],-Qe+ze+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(se*I.scale),le=this.lineWidth,this.lineWidth=le*I.scale);var He=this.autoPaging!=="text";if(He||J.y+J.h<=oe){if(He||J.y>=ze&&J.x<=W){var xt=He?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||W-J.x)[0],Xe=B([JSON.parse(JSON.stringify(ce))],this.posX+this.margin[3],-Qe+ze+this.ctx.prevPageLastElemOffset)[0],Ct=He&&(Oe>Qt||Oe<yt)&&b.call(this);Ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ve,he,null).clip().discardPath()),this.pdf.text(xt,Xe.x,Xe.y,{angle:I.angle,align:R,renderingMode:I.renderingMode}),Ct&&this.pdf.restoreGraphicsState()}}else J.y<oe&&(this.ctx.prevPageLastElemOffset+=oe-J.y);I.scale>=.01&&(this.pdf.setFontSize(se),this.lineWidth=le)}}else I.scale>=.01&&(se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(se*I.scale),le=this.lineWidth,this.lineWidth=le*I.scale),this.pdf.text(I.text,Te.x+this.posX,Te.y+this.posY,{angle:I.angle,align:R,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(se),this.lineWidth=le)},ae=function(I,R,G,se){G=G||0,se=se||0,this.pdf.internal.out(s(I+G)+" "+r(R+se)+" l")},ne=function(I,R,G){return this.pdf.lines(I,R,G,null,null)},V=function(I,R,G,se,le,ye,De,me){this.pdf.internal.out([e(n(G+I)),e(i(se+R)),e(n(le+I)),e(i(ye+R)),e(n(De+I)),e(i(me+R)),"c"].join(" "))},O=function(I,R,G,se){for(var le=2*Math.PI,ye=Math.PI/2;R>G;)R-=le;var De=Math.abs(G-R);De<le&&se&&(De=le-De);for(var me=[],Te=se?-1:1,we=R;De>1e-5;){var st=we+Te*Math.min(De,ye);me.push(X.call(this,I,we,st)),De-=Math.abs(st-we),we=st}return me},X=function(I,R,G){var se=(G-R)/2,le=I*Math.cos(se),ye=I*Math.sin(se),De=le,me=-ye,Te=De*De+me*me,we=Te+De*le+me*ye,st=4/3*(Math.sqrt(2*Te*we)-we)/(De*ye-me*le),ce=De-st*me,tt=me+st*De,Ae=ce,gt=-tt,q=se+R,Qt=Math.cos(q),yt=Math.sin(q);return{x1:I*Math.cos(R),y1:I*Math.sin(R),x2:ce*Qt-tt*yt,y2:ce*yt+tt*Qt,x3:Ae*Qt-gt*yt,y3:Ae*yt+gt*Qt,x4:I*Math.cos(G),y4:I*Math.sin(G)}},$=function(I){return 180*I/Math.PI},H=function(I,R,G,se,le,ye){var De=I+.5*(G-I),me=R+.5*(se-R),Te=le+.5*(G-le),we=ye+.5*(se-ye),st=Math.min(I,le,De,Te),ce=Math.max(I,le,De,Te),tt=Math.min(R,ye,me,we),Ae=Math.max(R,ye,me,we);return new l(st,tt,ce-st,Ae-tt)},te=function(I,R,G,se,le,ye,De,me){var Te,we,st,ce,tt,Ae,gt,q,Qt,yt,Oe,ze,Le,oe,he=G-I,W=se-R,ve=le-G,Qe=ye-se,Ze=De-le,J=me-ye;for(we=0;we<41;we++)Qt=(gt=(st=I+(Te=we/40)*he)+Te*((tt=G+Te*ve)-st))+Te*(tt+Te*(le+Te*Ze-tt)-gt),yt=(q=(ce=R+Te*W)+Te*((Ae=se+Te*Qe)-ce))+Te*(Ae+Te*(ye+Te*J-Ae)-q),we==0?(Oe=Qt,ze=yt,Le=Qt,oe=yt):(Oe=Math.min(Oe,Qt),ze=Math.min(ze,yt),Le=Math.max(Le,Qt),oe=Math.max(oe,yt));return new l(Math.round(Oe),Math.round(ze),Math.round(Le-Oe),Math.round(oe-ze))},K=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,R,G=(I=this.ctx.lineDash,R=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:R}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(Es.API),(function(a){var e=function(o){var l,c,u,m,A,g,p,v,b,y;for(c=[],u=0,m=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;m>u;u+=4)(A=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(g=(A=((A=((A=((A=(A-(y=A%85))/85)-(b=A%85))/85)-(v=A%85))/85)-(p=A%85))/85)%85,c.push(g+33,p+33,v+33,b+33,y+33)):c.push(122);return(function(w,B){for(var j=B;j>0;j--)w.pop()})(c,l.length),String.fromCharCode.apply(String,c)+"~>"},s=function(o){var l,c,u,m,A,g=String,p="length",v=255,b="charCodeAt",y="slice",w="replace";for(o[y](-2),o=o[y](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),u=[],m=0,A=(o+=l="uuuuu"[y](o[p]%5||5))[p];A>m;m+=5)c=52200625*(o[b](m)-33)+614125*(o[b](m+1)-33)+7225*(o[b](m+2)-33)+85*(o[b](m+3)-33)+(o[b](m+4)-33),u.push(v&c>>24,v&c>>16,v&c>>8,v&c);return(function(B,j){for(var E=j;E>0;E--)B.pop()})(u,l[p]),g.fromCharCode.apply(g,u)},r=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},n=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},i=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=s_(l)).reduce(function(u,m){return u+String.fromCharCode(m)},"")};a.processDataByFilters=function(o,l){var c=0,u=o||"",m=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=s(u),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=n(u),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=r(u),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:m.reverse().join(" ")}}})(Es.API),(function(a){a.loadFile=function(e,s,r){return(function(n,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(c,u,m){var A=new XMLHttpRequest,g=0,p=function(v){var b=v.length,y=[],w=String.fromCharCode;for(g=0;g<b;g+=1)y.push(w(255&v.charCodeAt(g)));return y.join("")};if(A.open("GET",c,!u),A.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(A.onload=function(){A.status===200?m(p(this.responseText)):m(void 0)}),A.send(null),u&&A.status===200)return p(A.responseText)})(n,i,o)}catch{}return l})(e,s,r)},a.allowFsRead=void 0,a.loadImageFile=a.loadFile})(Es.API),(function(a){function e(){return(sr.html2canvas?Promise.resolve(sr.html2canvas):uN(()=>Promise.resolve().then(()=>Pde),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function s(){return(sr.DOMPurify?Promise.resolve(sr.DOMPurify):uN(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var r=function(l){var c=ha(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},n=function(l,c){var u=document.createElement(l);for(var m in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[m]=c.style[m];return u},i=function l(c,u){for(var m=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),A=c.firstChild;A;A=A.nextSibling)u!==!0&&A.nodeType===1&&A.nodeName==="SCRIPT"||m.appendChild(l(A,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(m.width=c.width,m.height=c.height,m.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(m.value=c.value),m.addEventListener("load",function(){m.scrollTop=c.scrollTop,m.scrollLeft=c.scrollLeft},!0)),m},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),m=l.convert(Promise.resolve(),u);return(m=m.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||(function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),c){case"string":return this.then(s).then(function(u){return this.set({src:n("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,m=this.opt.fontFaces,A=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:A,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=m,m)for(var p=0;p<m.length;++p){var v=m[p],b=v.src.find(function(y){return y.format==="truetype"});b&&u.addFont(b.url,v.ref.name,v.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,u.context2d.save(!0),c(this.prop.container,g)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(r(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(r(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,m){return Math.floor(u*m/72*96)}return this.then(function(){(l=l||Es.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,m){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,m){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,m?this.progress.stack.concat(m):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(m,A){return u.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(g){return u.updateProgress(null,m),g}).then(m,A).then(function(g){return u.updateProgress(1),g})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var m=this;l&&(l=l.bind(m)),c&&(c=c.bind(m));var A=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:o.convert(Object.assign({},m),Promise.prototype),g=u.call(A,l,c);return o.convert(g,m.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Es.getPageSize=function(l,c,u){if(ha(l)==="object"){var m=l;l=m.orientation,c=m.unit||c,u=m.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var A,g=(""+u).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":A=1;break;case"mm":A=72/25.4;break;case"cm":A=72/2.54;break;case"in":A=72;break;case"px":A=.75;break;case"pc":case"em":A=12;break;case"ex":A=6;break;default:throw"Invalid unit: "+c}var v,b=0,y=0;if(p.hasOwnProperty(g))b=p[g][1]/A,y=p[g][0]/A;else try{b=u[1],y=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",y>b&&(v=y,y=b,b=v);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",b>y&&(v=y,y=b,b=v)}return{width:y,height:b,unit:c,k:A,orientation:l}},a.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(SN):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}})(Es.API),Es.API.addJS=function(a){var e,s,r=a;return this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(e+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),s=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+r+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){e!==void 0&&s!==void 0&&this.internal.out("/Names <</JavaScript "+e+" 0 R>>")}),this},(function(a){var e;a.events.push(["postPutResources",function(){var s=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=s.outline.render().split(/\r\n/),i=0;i<n.length;i++){var o=n[i],l=r.exec(o);if(l!=null){var c=l[1];s.internal.newObjectDeferredBegin(c,!1)}s.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,m=[];for(i=0;i<u;i++){var A=s.internal.newObject();m.push(A);var g=s.internal.getPageInfo(i+1);s.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var p=s.internal.newObject();for(s.internal.write("<< /Names [ "),i=0;i<m.length;i++)s.internal.write("(page_"+(i+1)+")"+m[i]+" 0 R");s.internal.write(" ] >>","endobj"),e=s.internal.newObject(),s.internal.write("<< /Dests "+p+" 0 R"),s.internal.write(">>","endobj")}}]),a.events.push(["putCatalog",function(){var s=this;s.outline.root.children.length>0&&(s.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&s.internal.write("/Names "+e+" 0 R"))}]),a.events.push(["initialized",function(){var s=this;s.outline={createNamedDestinations:!1,root:{children:[]}},s.outline.add=function(r,n,i){var o={title:n,options:i,children:[]};return r==null&&(r=this.root),r.children.push(o),o},s.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=s,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},s.outline.genIds_r=function(r){r.id=s.internal.newObjectDeferred();for(var n=0;n<r.children.length;n++)this.genIds_r(r.children[n])},s.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},s.outline.renderItems=function(r){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var o=r.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=s.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},s.outline.line=function(r){this.ctx.val+=r+`\r
`},s.outline.makeRef=function(r){return r.id+" 0 R"},s.outline.makeString=function(r){return"("+s.internal.pdfEscape(r)+")"},s.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},s.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},s.outline.count_r=function(r,n){for(var i=0;i<n.children.length;i++)r.count++,this.count_r(r,n.children[i]);return r.count}}])})(Es.API),(function(a){var e=[192,193,194,195,196,197,198,199];a.processJPEG=function(s,r,n,i,o,l){var c,u=this.decode.DCT_DECODE,m=null;if(typeof s=="string"||this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s)){switch(s=o||s,s=this.__addimage__.isArrayBuffer(s)?new Uint8Array(s):s,c=(function(A){for(var g,p=256*A.charCodeAt(4)+A.charCodeAt(5),v=A.length,b={width:0,height:0,numcomponents:1},y=4;y<v;y+=2){if(y+=p,e.indexOf(A.charCodeAt(y+1))!==-1){g=256*A.charCodeAt(y+5)+A.charCodeAt(y+6),b={width:256*A.charCodeAt(y+7)+A.charCodeAt(y+8),height:g,numcomponents:A.charCodeAt(y+9)};break}p=256*A.charCodeAt(y+2)+A.charCodeAt(y+3)}return b})(s=this.__addimage__.isArrayBufferView(s)?this.__addimage__.arrayBufferToBinaryString(s):s),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}m={data:s,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:r,alias:n}}return m}})(Es.API),Es.API.processPNG=function(a,e,s,r){if(this.__addimage__.isArrayBuffer(a)&&(a=new Uint8Array(a)),this.__addimage__.isArrayBufferView(a)){var n,i=VW(a,{checkCrc:!0}),o=i.width,l=i.height,c=i.channels,u=i.palette,m=i.depth;n=u&&c===1?(function(D){for(var P=D.width,Y=D.height,Q=D.data,L=D.palette,ae=D.depth,ne=!1,V=[],O=[],X=void 0,$=!1,H=0,te=0;te<L.length;te++){var K=BS(L[te],4),I=K[0],R=K[1],G=K[2],se=K[3];V.push(I,R,G),se!=null&&(se===0?(H++,O.length<1&&O.push(te)):se<255&&($=!0))}if($||H>1){ne=!0,O=void 0;var le=P*Y;X=new Uint8Array(le);for(var ye=new DataView(Q.buffer),De=0;De<le;De++){var me=FN(ye,De,ae),Te=BS(L[me],4)[3];X[De]=Te}}else H===0&&(O=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ne?8:void 0,colorBytes:Q,alphaBytes:X,needSMask:ne,palette:V,mask:O}})(i):c===2||c===4?(function(D){for(var P=D.data,Y=D.width,Q=D.height,L=D.channels,ae=D.depth,ne=L===2?"DeviceGray":"DeviceRGB",V=L-1,O=Y*Q,X=V,$=O*X,H=1*O,te=Math.ceil($*ae/8),K=Math.ceil(H*ae/8),I=new Uint8Array(te),R=new Uint8Array(K),G=new DataView(P.buffer),se=new DataView(I.buffer),le=new DataView(R.buffer),ye=!1,De=0;De<O;De++){for(var me=De*L,Te=0;Te<X;Te++)FE(se,FN(G,me+Te,ae),De*X+Te,ae);var we=FN(G,me+X,ae);we<(1<<ae)-1&&(ye=!0),FE(le,we,1*De,ae)}return{colorSpace:ne,colorsPerPixel:V,sMaskBitsPerComponent:ye?ae:void 0,colorBytes:I,alphaBytes:R,needSMask:ye}})(i):(function(D){var P=D.data,Y=D.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Y,colorsPerPixel:Y==="DeviceGray"?1:3,colorBytes:P instanceof Uint16Array?(function(Q){for(var L=Q.length,ae=new Uint8Array(2*L),ne=new DataView(ae.buffer,ae.byteOffset,ae.byteLength),V=0;V<L;V++)ne.setUint16(2*V,Q[V],!1);return ae})(P):P,needSMask:!1}})(i);var A,g,p,v=n,b=v.colorSpace,y=v.colorsPerPixel,w=v.sMaskBitsPerComponent,B=v.colorBytes,j=v.alphaBytes,E=v.needSMask,S=v.palette,T=v.mask,M=null;return r!==Es.API.image_compression.NONE&&typeof s_=="function"?(M=(function(D){var P;switch(D){case Es.API.image_compression.FAST:P=11;break;case Es.API.image_compression.MEDIUM:P=13;break;case Es.API.image_compression.SLOW:P=14;break;default:P=12}return P})(r),A=this.decode.FLATE_DECODE,g="/Predictor ".concat(M," /Colors ").concat(y," /BitsPerComponent ").concat(m," /Columns ").concat(o),a=CE(B,Math.ceil(o*y*m/8),y,m,r),E&&(p=CE(j,Math.ceil(o*w/8),1,w,r))):(A=void 0,g=void 0,a=B,E&&(p=j)),(this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a))&&(a=this.__addimage__.arrayBufferToBinaryString(a)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:s,data:a,index:e,filter:A,decodeParameters:g,transparency:T,palette:S,sMask:p,predictor:M,width:o,height:l,bitsPerComponent:m,sMaskBitsPerComponent:w,colorSpace:b}}},(function(a){a.processGIF89A=function(e,s,r,n){var i=new dY(e),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},m=new DN(100).encode(u,100);return a.processJPEG.call(this,m,s,r,n)},a.processGIF87A=a.processGIF89A})(Es.API),xc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var a=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(a);for(var e=0;e<a;e++){var s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:n,green:r,blue:s,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},xc.prototype.parseBGR=function(){this.pos=this.offset;var a="bit"+this.bitPP,e=this.width*this.height*4;if(e>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(e);try{this[a]()}catch(s){Ca.log("bit decode error:"+s)}},xc.prototype.bit1=function(){var a,e=Math.ceil(this.width/8),s=e%4;for(a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,n=0;n<e;n++)for(var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*n*4,l=0;l<8&&8*n+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}s!==0&&(this.pos+=4-s)}},xc.prototype.bit4=function(){for(var a=Math.ceil(this.width/2),e=a%4,s=this.height-1;s>=0;s--){for(var r=this.bottom_up?s:this.height-1-s,n=0;n<a;n++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*n*4,l=i>>4,c=15&i,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*n+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},xc.prototype.bit8=function(){for(var a=this.width%4,e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=s*this.width*4+4*r;if(n<this.palette.length){var o=this.palette[n];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}a!==0&&(this.pos+=4-a)}},xc.prototype.bit15=function(){for(var a=this.width%3,e=parseInt("11111",2),s=this.height-1;s>=0;s--){for(var r=this.bottom_up?s:this.height-1-s,n=0;n<this.width;n++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&e)/e*255|0,c=(i>>10&e)/e*255|0,u=i>>15?255:0,m=r*this.width*4+4*n;this.data[m]=c,this.data[m+1]=l,this.data[m+2]=o,this.data[m+3]=u}this.pos+=a}},xc.prototype.bit16=function(){for(var a=this.width%3,e=parseInt("11111",2),s=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&s)/s*255|0,u=(o>>11)/e*255|0,m=n*this.width*4+4*i;this.data[m]=u,this.data[m+1]=c,this.data[m+2]=l,this.data[m+3]=255}this.pos+=a}},xc.prototype.bit24=function(){for(var a=this.height-1;a>=0;a--){for(var e=this.bottom_up?a:this.height-1-a,s=0;s<this.width;s++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*s;this.data[o]=i,this.data[o+1]=n,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},xc.prototype.bit32=function(){for(var a=this.height-1;a>=0;a--)for(var e=this.bottom_up?a:this.height-1-a,s=0;s<this.width;s++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*s;this.data[l]=i,this.data[l+1]=n,this.data[l+2]=r,this.data[l+3]=o}},xc.prototype.getData=function(){return this.data},(function(a){a.processBMP=function(e,s,r,n){var i=new xc(e,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new DN(100).encode(c,100);return a.processJPEG.call(this,u,s,r,n)}})(Es.API),TE.prototype.getData=function(){return this.data},(function(a){a.processWEBP=function(e,s,r,n){var i=new TE(e),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new DN(100).encode(c,100);return a.processJPEG.call(this,u,s,r,n)}})(Es.API),Es.API.processRGBA=function(a,e,s){for(var r=a.data,n=r.length,i=new Uint8Array(n/4*3),o=new Uint8Array(n/4),l=0,c=0,u=0;u<n;u+=4){var m=r[u],A=r[u+1],g=r[u+2],p=r[u+3];i[l++]=m,i[l++]=A,i[l++]=g,o[c++]=p}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:e,alias:s,colorSpace:"DeviceRGB",bitsPerComponent:8,width:a.width,height:a.height}},Es.API.setLanguage=function(a){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[a]!==void 0&&(this.internal.languageSettings.languageCode=a,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},bf=Es.API,Hb=bf.getCharWidthsArray=function(a,e){var s,r,n=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:n.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:n.metadata.Unicode.kerning,m=u.fof?u.fof:1,A=e.doKerning!==!1,g=0,p=a.length,v=0,b=l[0]||c,y=[];for(s=0;s<p;s++)r=a.charCodeAt(s),typeof n.metadata.widthOfString=="function"?y.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(r))+o*(1e3/i)||0)/1e3):(g=A&&ha(u[r])==="object"&&!isNaN(parseInt(u[r][v],10))?u[r][v]/m:0,y.push((l[r]||b)/c+g)),v=r;return y},NE=bf.getStringUnitWidth=function(a,e){var s=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),n=e.charSpace||this.internal.getCharSpace();return bf.processArabic&&(a=bf.processArabic(a)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(a,s,n)/s:Hb.apply(this,arguments).reduce(function(i,o){return i+o},0)},jE=function(a,e,s,r){for(var n=[],i=0,o=a.length,l=0;i!==o&&l+e[i]<s;)l+=e[i],i++;n.push(a.slice(0,i));var c=i;for(l=0;i!==o;)l+e[i]>r&&(n.push(a.slice(c,i)),l=0,c=i),l+=e[i],i++;return c!==i&&n.push(a.slice(c,i)),n},_E=function(a,e,s){s||(s={});var r,n,i,o,l,c,u,m=[],A=[m],g=s.textIndent||0,p=0,v=0,b=a.split(" "),y=Hb.apply(this,[" ",s])[0];if(c=s.lineIndent===-1?b[0].length+2:s.lineIndent||0){var w=Array(c).join(" "),B=[];b.map(function(E){(E=E.split(/\s*\n/)).length>1?B=B.concat(E.map(function(S,T){return(T&&S.length?`
`:"")+S})):B.push(E[0])}),b=B,c=NE.apply(this,[w,s])}for(i=0,o=b.length;i<o;i++){var j=0;if(r=b[i],c&&r[0]==`
`&&(r=r.substr(1),j=1),g+p+(v=(n=Hb.apply(this,[r,s])).reduce(function(E,S){return E+S},0))>e||j){if(v>e){for(l=jE.apply(this,[r,n,e-(g+p),e]),m.push(l.shift()),m=[l.pop()];l.length;)A.push([l.shift()]);v=n.slice(r.length-(m[0]?m[0].length:0)).reduce(function(E,S){return E+S},0)}else m=[r];A.push(m),g=v+c,p=y}else m.push(r),g+=p+v,p=y}return u=c?function(E,S){return(S?w:"")+E.join(" ")}:function(E){return E.join(" ")},A.map(u)},bf.splitTextToSize=function(a,e,s){var r,n=(s=s||{}).fontSize||this.internal.getFontSize(),i=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var A=this.internal.getFont(m.fontName,m.fontStyle),g="Unicode";return A.metadata[g]?{widths:A.metadata[g].widths||{0:1},kerning:A.metadata[g].kerning||{}}:{font:A.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,s);r=Array.isArray(a)?a:String(a).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/n;i.textIndent=s.textIndent?1*s.textIndent*this.internal.scaleFactor/n:0,i.lineIndent=s.lineIndent;var l,c,u=[];for(l=0,c=r.length;l<c;l++)u=u.concat(_E.apply(this,[r[l],o,i]));return u},(function(a){a.__fontmetrics__=a.__fontmetrics__||{};for(var e="0123456789abcdef",s="klmnopqrstuvwxyz",r={},n={},i=0;i<16;i++)r[s[i]]=e[i],n[e[i]]=s[i];var o=function(g){return"0x"+parseInt(g,10).toString(16)},l=a.__fontmetrics__.compress=function(g){var p,v,b,y,w=["{"];for(var B in g){if(p=g[B],isNaN(parseInt(B,10))?v="'"+B+"'":(B=parseInt(B,10),v=(v=o(B).slice(2)).slice(0,-1)+n[v.slice(-1)]),typeof p=="number")p<0?(b=o(p).slice(3),y="-"):(b=o(p).slice(2),y=""),b=y+b.slice(0,-1)+n[b.slice(-1)];else{if(ha(p)!=="object")throw new Error("Don't know what to do with value type "+ha(p)+".");b=l(p)}w.push(v+b)}return w.push("}"),w.join("")},c=a.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,v,b,y,w={},B=1,j=w,E=[],S="",T="",M=g.length-1,D=1;D<M;D+=1)(y=g[D])=="'"?p?(b=p.join(""),p=void 0):p=[]:p?p.push(y):y=="{"?(E.push([j,b]),j={},b=void 0):y=="}"?((v=E.pop())[0][v[1]]=j,b=void 0,j=v[0]):y=="-"?B=-1:b===void 0?r.hasOwnProperty(y)?(S+=r[y],b=parseInt(S,16)*B,B=1,S=""):S+=y:r.hasOwnProperty(y)?(T+=r[y],j[b]=parseInt(T,16)*B,B=1,b=void 0,T=""):T+=y;return w},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},A={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};a.events.push(["addFont",function(g){var p=g.font,v=A.Unicode[p.postScriptName];v&&(p.metadata.Unicode={},p.metadata.Unicode.widths=v.widths,p.metadata.Unicode.kerning=v.kerning);var b=m.Unicode[p.postScriptName];b&&(p.metadata.Unicode.encoding=b,p.encoding=b.codePages[0])}])})(Es.API),(function(a){var e=function(s){for(var r=s.length,n=new Uint8Array(r),i=0;i<r;i++)n[i]=s.charCodeAt(i);return n};a.API.events.push(["addFont",function(s){var r=void 0,n=s.font,i=s.instance;if(!n.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(r=i.existsFileInVFS(n.postScriptName)===!1?i.loadFile(n.postScriptName):i.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e($y(l)),o.metadata=a.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(n,r)}}])})(Es),Es.API.addSvgAsImage=function(a,e,s,r,n,i,o,l){if(isNaN(e)||isNaN(s))throw Ca.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(n))throw Ca.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=n;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return(sr.canvg?Promise.resolve(sr.canvg):uN(()=>import("./index.es-HQyET_Se.js"),[])).catch(function(g){return Promise.reject(new Error("Could not load canvg: "+g))}).then(function(g){return g.default?g.default:g}).then(function(g){return g.fromString(u,a,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(m)}).then(function(){A.addImage(c.toDataURL("image/jpeg",1),e,s,r,n,o,l)})},Es.API.putTotalPages=function(a){var e,s=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(a,"g"),s=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(a,this.internal.getFont()),"g"),s=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var n=0;n<this.internal.pages[r].length;n++)this.internal.pages[r][n]=this.internal.pages[r][n].replace(e,s);return this},Es.API.viewerPreferences=function(a,e){var s;a=a||{},e=e||!1;var r,n,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,m=0,A=0;function g(v,b){var y,w=!1;for(y=0;y<v.length;y+=1)v[y]===b&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),s=this.internal.viewerpreferences.configuration,a==="reset"||e===!0){var p=l.length;for(A=0;A<p;A+=1)s[l[A]].value=s[l[A]].defaultValue,s[l[A]].explicitSet=!1}if(ha(a)==="object"){for(n in a)if(i=a[n],g(l,n)&&i!==void 0){if(s[n].type==="boolean"&&typeof i=="boolean")s[n].value=i;else if(s[n].type==="name"&&g(s[n].valueSet,i))s[n].value=i;else if(s[n].type==="integer"&&Number.isInteger(i))s[n].value=i;else if(s[n].type==="array"){for(u=0;u<i.length;u+=1)if(r=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(m=0;m<i[u].length;m+=1)typeof i[u][m]!="number"&&(r=!1);r===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}s[n].value="["+c.join(" ")+"]"}else s[n].value=s[n].defaultValue;s[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,b=[];for(v in s)s[v].explicitSet===!0&&(s[v].type==="name"?b.push("/"+v+" /"+s[v].value):b.push("/"+v+" "+s[v].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=s,this},Es.API.addMetadata=function(a,e){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceUri:e??"http://jspdf.default.namespaceuri/",rawXml:typeof e=="boolean"&&e},this.internal.events.subscribe("putCatalog",hY),this.internal.events.subscribe("postPutResources",uY)),this},(function(a){var e=a.API,s=e.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],m=[""],A=0,g=i.length;A<g;++A){if(l=o.metadata.characterToGlyph(i.charCodeAt(A)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(A),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return m.join("");l=l.toString(16),m.push(u[4-l.length],l)}return m.join("")},r=function(i){var o,l,c,u,m,A,g;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],A=0,g=(l=Object.keys(i).sort(function(p,v){return p-v})).length;A<g;A++)o=l[A],c.length>=100&&(m+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(m+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,m=o.putStream;if(l.metadata instanceof a.API.TTFFont&&l.encoding==="Identity-H"){for(var A=l.metadata.Unicode.widths,g=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",v=0;v<g.length;v++)p+=String.fromCharCode(g[v]);var b=u();m({data:p,addLength1:!0,objectId:b}),c("endobj");var y=u();m({data:r(l.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var w=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Of(l.fontName)),c("/FontFile2 "+b+" 0 R"),c("/FontBBox "+a.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var B=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Of(l.fontName)),c("/FontDescriptor "+w+" 0 R"),c("/W "+a.API.PDFObject.convert(A)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+y+" 0 R"),c("/BaseFont /"+Of(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+B+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,m=o.putStream;if(l.metadata instanceof a.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var A=l.metadata.rawData,g="",p=0;p<A.length;p++)g+=String.fromCharCode(A[p]);var v=u();m({data:g,addLength1:!0,objectId:v}),c("endobj");var b=u();m({data:r(l.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var y=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+a.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Of(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var w=0;w<l.metadata.hmtx.widths.length;w++)l.metadata.hmtx.widths[w]=parseInt(l.metadata.hmtx.widths[w]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+Of(l.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+a.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var n=function(i){var o,l=i.text||"",c=i.x,u=i.y,m=i.options||{},A=i.mutex||{},g=A.pdfEscape,p=A.activeFontKey,v=A.fonts,b=p,y="",w=0,B="",j=v[b].encoding;if(v[b].encoding!=="Identity-H")return{text:l,x:c,y:u,options:m,mutex:A};for(B=l,b=p,Array.isArray(l)&&(B=l[0]),w=0;w<B.length;w+=1)v[b].metadata.hasOwnProperty("cmap")&&(o=v[b].metadata.cmap.unicode.codeMap[B[w].charCodeAt(0)]),o||B[w].charCodeAt(0)<256&&v[b].metadata.hasOwnProperty("Unicode")?y+=B[w]:y+="";var E="";return parseInt(b.slice(1))<14||j==="WinAnsiEncoding"?E=g(y,b).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(E=s(y,v[b])),A.isHex=!0,{text:E,x:c,y:u,options:m,mutex:A}};e.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([n(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(n(Object.assign({},c,{text:o[u]})).text);i.text=l}else i.text=n(Object.assign({},c,{text:o})).text}])})(Es),(function(a){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};a.existsFileInVFS=function(s){return e.call(this),this.internal.vFS[s]!==void 0},a.addFileToVFS=function(s,r){return e.call(this),this.internal.vFS[s]=r,this},a.getFileFromVFS=function(s){return e.call(this),this.internal.vFS[s]!==void 0?this.internal.vFS[s]:null}})(Es.API),(function(a){a.__bidiEngine__=a.prototype.__bidiEngine__=function(r){var n,i,o,l,c,u,m,A=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),B=!1,j=0;this.__bidiEngine__={};var E=function(Q){var L=Q.charCodeAt(),ae=L>>8,ne=b[ae];return ne!==void 0?A[256*ne+(255&L)]:ae===252||ae===253?"AL":w.test(ae)?"L":ae===8?"R":"N"},S=function(Q){for(var L,ae=0;ae<Q.length;ae++){if((L=E(Q.charAt(ae)))==="L")return!1;if(L==="R")return!0}return!1},T=function(Q,L,ae,ne){var V,O,X,$,H=L[ne];switch(H){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":B=!1;break;case"N":case"AN":break;case"EN":B&&(H="AN");break;case"AL":B=!0,H="R";break;case"WS":case"BN":H="N";break;case"CS":ne<1||ne+1>=L.length||(V=ae[ne-1])!=="EN"&&V!=="AN"||(O=L[ne+1])!=="EN"&&O!=="AN"?H="N":B&&(O="AN"),H=O===V?O:"N";break;case"ES":H=(V=ne>0?ae[ne-1]:"B")==="EN"&&ne+1<L.length&&L[ne+1]==="EN"?"EN":"N";break;case"ET":if(ne>0&&ae[ne-1]==="EN"){H="EN";break}if(B){H="N";break}for(X=ne+1,$=L.length;X<$&&L[X]==="ET";)X++;H=X<$&&L[X]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for($=L.length,X=ne+1;X<$&&L[X]==="NSM";)X++;if(X<$){var te=Q[ne],K=te>=1425&&te<=2303||te===64286;if(V=L[X],K&&(V==="R"||V==="AL")){H="R";break}}}H=ne<1||(V=L[ne-1])==="B"?"N":ae[ne-1];break;case"B":B=!1,n=!0,H=j;break;case"S":i=!0,H="N"}return H},M=function(Q,L,ae){var ne=Q.split("");return ae&&D(ne,ae,{hiLevel:j}),ne.reverse(),L&&L.reverse(),ne.join("")},D=function(Q,L,ae){var ne,V,O,X,$,H=-1,te=Q.length,K=0,I=[],R=j?p:g,G=[];for(B=!1,n=!1,i=!1,V=0;V<te;V++)G[V]=E(Q[V]);for(O=0;O<te;O++){if($=K,I[O]=T(Q,G,I,O),ne=240&(K=R[$][v[I[O]]]),K&=15,L[O]=X=R[K][5],ne>0)if(ne===16){for(V=H;V<O;V++)L[V]=1;H=-1}else H=-1;if(R[K][6])H===-1&&(H=O);else if(H>-1){for(V=H;V<O;V++)L[V]=X;H=-1}G[O]==="B"&&(L[O]=0),ae.hiLevel|=X}i&&(function(se,le,ye){for(var De=0;De<ye;De++)if(se[De]==="S"){le[De]=j;for(var me=De-1;me>=0&&se[me]==="WS";me--)le[me]=j}})(G,L,te)},P=function(Q,L,ae,ne,V){if(!(V.hiLevel<Q)){if(Q===1&&j===1&&!n)return L.reverse(),void(ae&&ae.reverse());for(var O,X,$,H,te=L.length,K=0;K<te;){if(ne[K]>=Q){for($=K+1;$<te&&ne[$]>=Q;)$++;for(H=K,X=$-1;H<X;H++,X--)O=L[H],L[H]=L[X],L[X]=O,ae&&(O=ae[H],ae[H]=ae[X],ae[X]=O);K=$}K++}}},Y=function(Q,L,ae){var ne=Q.split(""),V={hiLevel:j};return ae||(ae=[]),D(ne,ae,V),(function(O,X,$){if($.hiLevel!==0&&m)for(var H,te=0;te<O.length;te++)X[te]===1&&(H=y.indexOf(O[te]))>=0&&(O[te]=y[H+1])})(ne,ae,V),P(2,ne,L,ae,V),P(1,ne,L,ae,V),ne.join("")};return this.__bidiEngine__.doBidiReorder=function(Q,L,ae){if((function(V,O){if(O)for(var X=0;X<V.length;X++)O[X]=X;l===void 0&&(l=S(V)),u===void 0&&(u=S(V))})(Q,L),o||!c||u)if(o&&c&&l^u)j=l?1:0,Q=M(Q,L,ae);else if(!o&&c&&u)j=l?1:0,Q=Y(Q,L,ae),Q=M(Q,L);else if(!o||l||c||u){if(o&&!c&&l^u)Q=M(Q,L),l?(j=0,Q=Y(Q,L,ae)):(j=1,Q=Y(Q,L,ae),Q=M(Q,L));else if(o&&l&&!c&&u)j=1,Q=Y(Q,L,ae),Q=M(Q,L);else if(!o&&!c&&l^u){var ne=m;l?(j=1,Q=Y(Q,L,ae),j=0,m=!1,Q=Y(Q,L,ae),m=ne):(j=0,Q=Y(Q,L,ae),Q=M(Q,L),j=1,m=!1,Q=Y(Q,L,ae),m=ne,Q=M(Q,L))}}else j=0,Q=Y(Q,L,ae);else j=l?1:0,Q=Y(Q,L,ae);return Q},this.__bidiEngine__.setOptions=function(Q){Q&&(o=Q.isInputVisual,c=Q.isOutputVisual,l=Q.isInputRtl,u=Q.isOutputRtl,m=Q.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],s=new a.__bidiEngine__({isInputVisual:!0});a.API.events.push(["postProcessText",function(r){var n=r.text;r.x,r.y;var i=r.options||{};r.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,s.setOptions(i),Object.prototype.toString.call(n)==="[object Array]"){var l=0;for(o=[],l=0;l<n.length;l+=1)Object.prototype.toString.call(n[l])==="[object Array]"?o.push([s.doBidiReorder(n[l][0]),n[l][1],n[l][2]]):o.push([s.doBidiReorder(n[l])]);r.text=o}else r.text=s.doBidiReorder(n);s.setOptions({isInputVisual:!0})}])})(Es),Es.API.TTFFont=(function(){function a(e){var s;if(this.rawData=e,s=this.contents=new qh(e),this.contents.pos=4,s.readString(4)==="ttcf")throw new Error("TTCF not supported.");s.pos=0,this.parse(),this.subset=new kY(this),this.registerTTF()}return a.open=function(e){return new a(e)},a.prototype.parse=function(){return this.directory=new mY(this.contents),this.head=new fY(this),this.name=new yY(this),this.cmap=new hI(this),this.toUnicode={},this.hhea=new pY(this),this.maxp=new vY(this),this.hmtx=new wY(this),this.post=new xY(this),this.os2=new gY(this),this.loca=new CY(this),this.glyf=new NY(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},a.prototype.registerTTF=function(){var e,s,r,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(n=this.post.italic_angle),32768&(s=n>>16)&&(s=-(1+(65535^s))),this.italicAngle=+(s+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},a.prototype.characterToGlyph=function(e){var s;return((s=this.cmap.unicode)!=null?s.codeMap[e]:void 0)||0},a.prototype.widthOfGlyph=function(e){var s;return s=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*s},a.prototype.widthOfString=function(e,s,r){var n,i,o,l;for(o=0,i=0,l=(e=""+e).length;0<=l?i<l:i>l;i=0<=l?++i:--i)n=e.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(n))+r*(1e3/s)||0;return o*(s/1e3)},a.prototype.lineHeight=function(e,s){var r;return s==null&&(s=!1),r=s?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},a})();var Dc,qh=(function(){function a(e){this.data=e??[],this.pos=0,this.length=this.data.length}return a.prototype.readByte=function(){return this.data[this.pos++]},a.prototype.writeByte=function(e){return this.data[this.pos++]=e},a.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},a.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},a.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},a.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},a.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},a.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},a.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},a.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},a.prototype.readString=function(e){var s,r;for(r=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)r[s]=String.fromCharCode(this.readByte());return r.join("")},a.prototype.writeString=function(e){var s,r,n;for(n=[],s=0,r=e.length;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push(this.writeByte(e.charCodeAt(s)));return n},a.prototype.readShort=function(){return this.readInt16()},a.prototype.writeShort=function(e){return this.writeInt16(e)},a.prototype.readLongLong=function(){var e,s,r,n,i,o,l,c;return e=this.readByte(),s=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^s)+1099511627776*(255^r)+4294967296*(255^n)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*s+1099511627776*r+4294967296*n+16777216*i+65536*o+256*l+c},a.prototype.writeLongLong=function(e){var s,r;return s=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},a.prototype.readInt=function(){return this.readInt32()},a.prototype.writeInt=function(e){return this.writeInt32(e)},a.prototype.read=function(e){var s,r;for(s=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)s.push(this.readByte());return s},a.prototype.write=function(e){var s,r,n,i;for(i=[],r=0,n=e.length;r<n;r++)s=e[r],i.push(this.writeByte(s));return i},a})(),mY=(function(){var a;function e(s){var r,n,i;for(this.scalarType=s.readInt(),this.tableCount=s.readShort(),this.searchRange=s.readShort(),this.entrySelector=s.readShort(),this.rangeShift=s.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)r={tag:s.readString(4),checksum:s.readInt(),offset:s.readInt(),length:s.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(s){var r,n,i,o,l,c,u,m,A,g,p,v,b;for(b in p=Object.keys(s).length,c=Math.log(2),A=16*Math.floor(Math.log(p)/c),o=Math.floor(A/c),m=16*p-A,(n=new qh).writeInt(this.scalarType),n.writeShort(p),n.writeShort(A),n.writeShort(o),n.writeShort(m),i=16*p,u=n.pos+i,l=null,v=[],s)for(g=s[b],n.writeString(b),n.writeInt(a(g)),n.writeInt(u),n.writeInt(g.length),v=v.concat(g),b==="head"&&(l=u),u+=g.length;u%4;)v.push(0),u++;return n.write(v),r=2981146554-a(n.data),n.pos=l+8,n.writeUInt32(r),n.data},a=function(s){var r,n,i,o;for(s=mI.call(s);s.length%4;)s.push(0);for(i=new qh(s),n=0,r=0,o=s.length;r<o;r=r+=4)n+=i.readUInt32();return 4294967295&n},e})(),AY={}.hasOwnProperty,kd=function(a,e){for(var s in e)AY.call(e,s)&&(a[s]=e[s]);function r(){this.constructor=a}return r.prototype=e.prototype,a.prototype=new r,a.__super__=e.prototype,a};Dc=(function(){function a(e){var s;this.file=e,s=this.file.directory.tables[this.tag],this.exists=!!s,s&&(this.offset=s.offset,this.length=s.length,this.parse(this.file.contents))}return a.prototype.parse=function(){},a.prototype.encode=function(){},a.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},a})();var fY=(function(){function a(){return a.__super__.constructor.apply(this,arguments)}return kd(a,Dc),a.prototype.tag="head",a.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},a.prototype.encode=function(e){var s;return(s=new qh).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(e),s.writeShort(this.glyphDataFormat),s.data},a})(),PE=(function(){function a(e,s){var r,n,i,o,l,c,u,m,A,g,p,v,b,y,w,B,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=s+e.readInt(),A=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(p=e.readUInt16(),g=p/2,e.pos+=6,i=(function(){var E,S;for(S=[],c=E=0;0<=g?E<g:E>g;c=0<=g?++E:--E)S.push(e.readUInt16());return S})(),e.pos+=2,b=(function(){var E,S;for(S=[],c=E=0;0<=g?E<g:E>g;c=0<=g?++E:--E)S.push(e.readUInt16());return S})(),u=(function(){var E,S;for(S=[],c=E=0;0<=g?E<g:E>g;c=0<=g?++E:--E)S.push(e.readUInt16());return S})(),m=(function(){var E,S;for(S=[],c=E=0;0<=g?E<g:E>g;c=0<=g?++E:--E)S.push(e.readUInt16());return S})(),n=(this.length-e.pos+this.offset)/2,l=(function(){var E,S;for(S=[],c=E=0;0<=n?E<n:E>n;c=0<=n?++E:--E)S.push(e.readUInt16());return S})(),c=w=0,j=i.length;w<j;c=++w)for(y=i[c],r=B=v=b[c];v<=y?B<=y:B>=y;r=v<=y?++B:--B)m[c]===0?o=r+u[c]:(o=l[m[c]/2+(r-v)-(g-c)]||0)!==0&&(o+=u[c]),this.codeMap[r]=65535&o}e.pos=A}return a.encode=function(e,s){var r,n,i,o,l,c,u,m,A,g,p,v,b,y,w,B,j,E,S,T,M,D,P,Y,Q,L,ae,ne,V,O,X,$,H,te,K,I,R,G,se,le,ye,De,me,Te,we,st;switch(ne=new qh,o=Object.keys(e).sort(function(ce,tt){return ce-tt}),s){case"macroman":for(b=0,y=(function(){var ce=[];for(v=0;v<256;++v)ce.push(0);return ce})(),B={0:0},i={},V=0,H=o.length;V<H;V++)B[me=e[n=o[V]]]==null&&(B[me]=++b),i[n]={old:e[n],new:B[e[n]]},y[n]=B[e[n]];return ne.writeUInt16(1),ne.writeUInt16(0),ne.writeUInt32(12),ne.writeUInt16(0),ne.writeUInt16(262),ne.writeUInt16(0),ne.write(y),{charMap:i,subtable:ne.data,maxGlyphID:b+1};case"unicode":for(L=[],A=[],j=0,B={},r={},w=u=null,O=0,te=o.length;O<te;O++)B[S=e[n=o[O]]]==null&&(B[S]=++j),r[n]={old:S,new:B[S]},l=B[S]-n,w!=null&&l===u||(w&&A.push(w),L.push(n),u=l),w=n;for(w&&A.push(w),A.push(65535),L.push(65535),Y=2*(P=L.length),D=2*Math.pow(Math.log(P)/Math.LN2,2),g=Math.log(D/2)/Math.LN2,M=2*P-D,c=[],T=[],p=[],v=X=0,K=L.length;X<K;v=++X){if(Q=L[v],m=A[v],Q===65535){c.push(0),T.push(0);break}if(Q-(ae=r[Q].new)>=32768)for(c.push(0),T.push(2*(p.length+P-v)),n=$=Q;Q<=m?$<=m:$>=m;n=Q<=m?++$:--$)p.push(r[n].new);else c.push(ae-Q),T.push(0)}for(ne.writeUInt16(3),ne.writeUInt16(1),ne.writeUInt32(12),ne.writeUInt16(4),ne.writeUInt16(16+8*P+2*p.length),ne.writeUInt16(0),ne.writeUInt16(Y),ne.writeUInt16(D),ne.writeUInt16(g),ne.writeUInt16(M),ye=0,I=A.length;ye<I;ye++)n=A[ye],ne.writeUInt16(n);for(ne.writeUInt16(0),De=0,R=L.length;De<R;De++)n=L[De],ne.writeUInt16(n);for(Te=0,G=c.length;Te<G;Te++)l=c[Te],ne.writeUInt16(l);for(we=0,se=T.length;we<se;we++)E=T[we],ne.writeUInt16(E);for(st=0,le=p.length;st<le;st++)b=p[st],ne.writeUInt16(b);return{charMap:r,subtable:ne.data,maxGlyphID:j+1}}},a})(),hI=(function(){function a(){return a.__super__.constructor.apply(this,arguments)}return kd(a,Dc),a.prototype.tag="cmap",a.prototype.parse=function(e){var s,r,n;for(e.pos=this.offset,this.version=e.readUInt16(),n=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)s=new PE(e,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},a.encode=function(e,s){var r,n;return s==null&&(s="macroman"),r=PE.encode(e,s),(n=new qh).writeUInt16(0),n.writeUInt16(1),r.table=n.data.concat(r.subtable),r},a})(),pY=(function(){function a(){return a.__super__.constructor.apply(this,arguments)}return kd(a,Dc),a.prototype.tag="hhea",a.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},a})(),gY=(function(){function a(){return a.__super__.constructor.apply(this,arguments)}return kd(a,Dc),a.prototype.tag="OS/2",a.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var s,r;for(r=[],s=0;s<10;++s)r.push(e.readByte());return r})(),this.charRange=(function(){var s,r;for(r=[],s=0;s<4;++s)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var s,r;for(r=[],s=0;s<2;s=++s)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},a})(),xY=(function(){function a(){return a.__super__.constructor.apply(this,arguments)}return kd(a,Dc),a.prototype.tag="post",a.prototype.parse=function(e){var s,r,n;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(r=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],n=[];e.pos<this.offset+this.length;)s=e.readByte(),n.push(this.names.push(e.readString(s)));return n;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var o,l,c;for(c=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},a})(),bY=function(a,e){this.raw=a,this.length=a.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},yY=(function(){function a(){return a.__super__.constructor.apply(this,arguments)}return kd(a,Dc),a.prototype.tag="name",a.prototype.parse=function(e){var s,r,n,i,o,l,c,u,m,A,g;for(e.pos=this.offset,e.readShort(),s=e.readShort(),l=e.readShort(),r=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},i=m=0,A=r.length;m<A;i=++m)n=r[i],e.pos=n.offset,u=e.readString(n.length),o=new bY(u,n),c[g=n.nameID]==null&&(c[g]=[]),c[n.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},a})(),vY=(function(){function a(){return a.__super__.constructor.apply(this,arguments)}return kd(a,Dc),a.prototype.tag="maxp",a.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},a})(),wY=(function(){function a(){return a.__super__.constructor.apply(this,arguments)}return kd(a,Dc),a.prototype.tag="hmtx",a.prototype.parse=function(e){var s,r,n,i,o,l,c;for(e.pos=this.offset,this.metrics=[],s=0,l=this.file.hhea.numberOfMetrics;0<=l?s<l:s>l;s=0<=l?++s:--s)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,m;for(m=[],s=u=0;0<=n?u<n:u>n;s=0<=n?++u:--u)m.push(e.readInt16());return m})(),this.widths=(function(){var u,m,A,g;for(g=[],u=0,m=(A=this.metrics).length;u<m;u++)i=A[u],g.push(i.advance);return g}).call(this),r=this.widths[this.widths.length-1],c=[],s=o=0;0<=n?o<n:o>n;s=0<=n?++o:--o)c.push(this.widths.push(r));return c},a.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},a})(),mI=[].slice,NY=(function(){function a(){return a.__super__.constructor.apply(this,arguments)}return kd(a,Dc),a.prototype.tag="glyf",a.prototype.parse=function(){return this.cache={}},a.prototype.glyphFor=function(e){var s,r,n,i,o,l,c,u,m,A;return e in this.cache?this.cache[e]:(i=this.file.loca,s=this.file.contents,r=i.indexOf(e),(n=i.lengthOf(e))===0?this.cache[e]=null:(s.pos=this.offset+r,o=(l=new qh(s.read(n))).readShort(),u=l.readShort(),A=l.readShort(),c=l.readShort(),m=l.readShort(),this.cache[e]=o===-1?new _Y(l,u,A,c,m):new jY(l,o,u,A,c,m),this.cache[e]))},a.prototype.encode=function(e,s,r){var n,i,o,l,c;for(o=[],i=[],l=0,c=s.length;l<c;l++)n=e[s[l]],i.push(o.length),n&&(o=o.concat(n.encode(r)));return i.push(o.length),{table:o,offsets:i}},a})(),jY=(function(){function a(e,s,r,n,i,o){this.raw=e,this.numberOfContours=s,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!1}return a.prototype.encode=function(){return this.raw.data},a})(),_Y=(function(){function a(e,s,r,n,i){var o,l;for(this.raw=e,this.xMin=s,this.yMin=r,this.xMax=n,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return a.prototype.encode=function(){var e,s,r;for(s=new qh(mI.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)s.pos=this.glyphOffsets[e];return s.data},a})(),CY=(function(){function a(){return a.__super__.constructor.apply(this,arguments)}return kd(a,Dc),a.prototype.tag="loca",a.prototype.parse=function(e){var s,r;return e.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var n,i;for(i=[],r=0,n=this.length;r<n;r+=2)i.push(2*e.readUInt16());return i}).call(this):(function(){var n,i;for(i=[],r=0,n=this.length;r<n;r+=4)i.push(e.readUInt32());return i}).call(this)},a.prototype.indexOf=function(e){return this.offsets[e]},a.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},a.prototype.encode=function(e,s){for(var r=new Uint32Array(this.offsets.length),n=0,i=0,o=0;o<r.length;++o)if(r[o]=n,i<s.length&&s[i]==o){++i,r[o]=n;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(n+=c)}for(var u=new Array(4*r.length),m=0;m<r.length;++m)u[4*m+3]=255&r[m],u[4*m+2]=(65280&r[m])>>8,u[4*m+1]=(16711680&r[m])>>16,u[4*m]=(4278190080&r[m])>>24;return u},a})(),kY=(function(){function a(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return a.prototype.generateCmap=function(){var e,s,r,n,i;for(s in n=this.font.cmap.tables[0].codeMap,e={},i=this.subset)r=i[s],e[s]=n[r];return e},a.prototype.glyphsFor=function(e){var s,r,n,i,o,l,c;for(n={},o=0,l=e.length;o<l;o++)n[i=e[o]]=this.font.glyf.glyphFor(i);for(i in s=[],n)(r=n[i])!=null&&r.compound&&s.push.apply(s,r.glyphIDs);if(s.length>0)for(i in c=this.glyphsFor(s))r=c[i],n[i]=r;return n},a.prototype.encode=function(e,s){var r,n,i,o,l,c,u,m,A,g,p,v,b,y,w;for(n in r=hI.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),p={0:0},w=r.charMap)p[(c=w[n]).old]=c.new;for(v in g=r.maxGlyphID,o)v in p||(p[v]=g++);return m=(function(B){var j,E;for(j in E={},B)E[B[j]]=j;return E})(p),A=Object.keys(m).sort(function(B,j){return B-j}),b=(function(){var B,j,E;for(E=[],B=0,j=A.length;B<j;B++)l=A[B],E.push(m[l]);return E})(),i=this.font.glyf.encode(o,b,p),u=this.font.loca.encode(i.offsets,b),y={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(s)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},a})();Es.API.PDFObject=(function(){var a;function e(){}return a=function(s,r){return(Array(r+1).join("0")+s).slice(-r)},e.convert=function(s){var r,n,i,o;if(Array.isArray(s))return"["+(function(){var l,c,u;for(u=[],l=0,c=s.length;l<c;l++)r=s[l],u.push(e.convert(r));return u})().join(" ")+"]";if(typeof s=="string")return"/"+s;if(s?.isString)return"("+s+")";if(s instanceof Date)return"(D:"+a(s.getUTCFullYear(),4)+a(s.getUTCMonth(),2)+a(s.getUTCDate(),2)+a(s.getUTCHours(),2)+a(s.getUTCMinutes(),2)+a(s.getUTCSeconds(),2)+"Z)";if({}.toString.call(s)==="[object Object]"){for(n in i=["<<"],s)o=s[n],i.push("/"+n+" "+e.convert(o));return i.push(">>"),i.join(`
`)}return""+s},e})();const BY="/assets/GSM_logo-Dw50wwQc.png",SY=new URL("/logoplms.png",window.location.origin).href,Wn=210,np=297,Ir=12,kc=Wn-2*Ir,Rp=[218,130,42],hl=[51,51,51],AI=[120,120,120],V5=[255,255,255],Vb={};async function IE(a){return Vb[a]?Vb[a]:new Promise(e=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{const r=document.createElement("canvas");r.width=s.naturalWidth,r.height=s.naturalHeight,r.getContext("2d").drawImage(s,0,0),Vb[a]=r.toDataURL("image/png"),e(Vb[a])},s.onerror=()=>e(null),s.src=a})}const Mh=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",z5=a=>"PHP "+(parseFloat(a)||0).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2});function Ew(a){a.setDrawColor(...Rp),a.setLineWidth(2.5),a.rect(Ir-3,Ir-3,kc+6,np-2*Ir+6),a.setLineWidth(.5),a.rect(Ir,Ir,kc,np-2*Ir)}function Fw(a){try{a.setTextColor(230,230,230),a.setFont("helvetica","bold"),a.setFontSize(55),a.text("DIGITAL COPY",Wn/2,np/2,{align:"center",angle:45})}catch{a.setTextColor(235,235,235),a.setFont("helvetica","bold"),a.setFontSize(48),a.text("DIGITAL COPY",Wn/2,np/2-10,{align:"center"}),a.setFontSize(48),a.text("DIGITAL COPY",Wn/2,np/2+10,{align:"center"})}a.setTextColor(...hl)}function Dw(a,e){const s=Wn-Ir-32,r=Ir+2;a.setDrawColor(...hl),a.setLineWidth(.5),a.rect(s,r,28,12,"S"),a.setFont("helvetica","normal"),a.setFontSize(6),a.setTextColor(...AI),a.text("Plate No.",s+2,r+3.5),a.setFont("helvetica","bold"),a.setFontSize(13),a.setTextColor(...hl);const n=String(e).replace(/\D/g,"").slice(-4).padStart(4,"0");a.text(n,s+14,r+10,{align:"center"})}function Tw(a,e,s,r,n){let i=n;return e&&a.addImage(e,"PNG",Ir+5,i-2,24,24),s&&a.addImage(s,"PNG",Wn-Ir-29,i-2,24,24),r.forEach(o=>{a.setFont("helvetica",o.b?"bold":"normal"),a.setFontSize(o.s||9),a.setTextColor(...hl),a.text(o.t,Wn/2,i+3,{align:"center"}),i+=(o.s||9)*.5+1}),i+2}function Pw(a,e,s){a.setFont("helvetica","bold"),a.setFontSize(20),a.setTextColor(...hl),a.text(e,Wn/2,s,{align:"center"});const r=a.getTextWidth(e);return a.setDrawColor(...Rp),a.setLineWidth(1),a.line(Wn/2-r/2-5,s+2,Wn/2+r/2+5,s+2),s+8}function fI(a,e,s){return a.setFont("helvetica","normal"),a.setFontSize(10),a.setTextColor(...hl),a.text(e,Wn/2,s,{align:"center"}),s+6}function uA(a,e,s){return a.setFillColor(...Rp),a.rect(Ir+4,s,kc-8,6,"F"),a.setFont("helvetica","bold"),a.setFontSize(8),a.setTextColor(...V5),a.text(e,Wn/2,s+4.2,{align:"center"}),a.setTextColor(...hl),s+8}function ur(a,e,s,r,n,i){return n=n||Ir+8,i=i||Ir+60,a.setFont("helvetica","bold"),a.setFontSize(9),a.setTextColor(...hl),a.text(e,n,r),a.setFont("helvetica","normal"),a.text(String(s??"N/A"),i,r),r+5.5}function Iw(a,e,s){a.setFillColor(...Rp),a.roundedRect(Wn/2-14,s,28,5,1,1,"F"),a.setFont("helvetica","bold"),a.setFontSize(6.5),a.setTextColor(...V5),a.text("IMPORTANT",Wn/2,s+3.7,{align:"center"}),s+=7,a.setDrawColor(180,0,0),a.setLineWidth(.3),a.setFont("helvetica","normal"),a.setFontSize(7),a.setTextColor(150,0,0);const r=a.splitTextToSize(e,kc-24),n=r.length*3.5+4;return a.rect(Ir+8,s,kc-16,n),a.text(r,Ir+10,s+4),a.setTextColor(...hl),s+n+3}function Lw(a,e,s){const r=(kc-16)/e.length;return e.forEach((n,i)=>{const o=Ir+8+r*i+r/2;a.setDrawColor(...hl),a.setLineWidth(.3),a.line(o-22,s+12,o+22,s+12),a.setFont("helvetica","bold"),a.setFontSize(8),a.setTextColor(...hl),a.text(n.name,o,s+16,{align:"center"}),a.setFont("helvetica","normal"),a.setFontSize(6.5),a.text(n.title,o,s+19.5,{align:"center"})}),s+24}function Mw(a,e){let s=np-Ir-18;a.setDrawColor(...Rp),a.setLineWidth(.5),a.line(Ir+4,s,Wn-Ir-4,s),s+=4,a.setFont("helvetica","normal"),a.setFontSize(6),a.setTextColor(...AI),a.text("This is a system-generated DIGITAL COPY of your permit. For the official/physical copy, please visit the respective office.",Wn/2,s,{align:"center"}),a.text("Generated: "+new Date().toLocaleString()+" | Ref: "+e.id+"-"+Date.now().toString(36).toUpperCase(),Wn/2,s+4,{align:"center"}),a.text("GoServePH - Permit & Licensing Management System | e-plms.goserveph.com",Wn/2,s+8,{align:"center"}),a.setTextColor(...hl)}function LE(a,e,s,r){Ew(a),Fw(a),Dw(a,e.id);let n=Tw(a,s,r,[{t:"Republic of the Philippines",s:9},{t:"CITY OF CALOOCAN",s:11,b:!0},{t:"Office of the City Mayor",s:8},{t:"BUSINESS PERMITS AND LICENSING OFFICE",s:9,b:!0}],Ir+6);n=Pw(a,"MAYOR'S PERMIT",n+2),n=fI(a," TAX YEAR "+new Date().getFullYear()+" ",n),n=ur(a,"BIN:",e.receiptNumber||"N/A",n),n=ur(a,"DATE ISSUED:",Mh(e.approvedDate||e.submittedDate),n),n+=2,a.setFont("helvetica","normal"),a.setFontSize(9),a.text("This certified that "+(e.businessName||"N/A"),Ir+8,n),n+=5,a.text("with registered trade name as "+(e.businessName||"N/A"),Ir+8,n),n+=5,a.text("with business address at: "+(e.address||"N/A"),Ir+8,n),n+=6;const i="has been granted a BUSINESS PERMIT to operate the following business, under the Revised Revenue Code of Caloocan City, subject to the provisions of amendments, official issuances and other administrative regulations.";a.setFontSize(8);const o=a.splitTextToSize(i,kc-16);a.text(o,Ir+8,n),n+=o.length*3.5+4,n=uA(a,"PERMIT DETAILS",n),n=ur(a,"Permit ID:",e.id,n),n=ur(a,"Application Type:",e.application_type||"New",n),n=ur(a,"Status:",e.status,n),n=ur(a,"Applicant:",e.applicantName||"N/A",n),n=ur(a,"Contact:",e.contactNumber||"N/A",n),n=ur(a,"Email:",e.email||"N/A",n),n+=2,n=uA(a,"PARTICULARS OF PAYMENT",n),n=ur(a,"Capital Investment:",z5(e.fees),n),n=ur(a,"O.R. No.:",e.receiptNumber||"N/A",n),n=ur(a,"Valid Until:",Mh(e.expirationDate),n),n+=4,n=Iw(a,"Failure to renew business/mayor's permit on or before the deadline shall subject the permittee to a SURCHARGE of 25% of the amount of yearly fees and INTEREST of 2% MONTHLY OF EVERY MONTH UNTIL FULLY PAID. This permit is NON-TRANSFERABLE.",n),n=Lw(a,[{name:e.applicantName||"N/A",title:"Permittee"},{name:"OSCAR OCA MALAPITAN",title:"City Mayor"},{name:"BUSINESS PERMITS OFFICER",title:"Licensing Officer"}],n),Mw(a,e)}function EY(a,e,s,r){Ew(a),Fw(a),Dw(a,e.id);let n=Tw(a,s,r,[{t:"Republic of the Philippines",s:9},{t:"CITY OF CALOOCAN",s:11,b:!0},{t:"Office of the City Mayor",s:8},{t:"TRICYCLE REGULATORY UNIT",s:9,b:!0}],Ir+6);n=Pw(a,"TODA PERMIT",n+2),n=ur(a,"Permit No.:",e.id,n),n=ur(a,"Date Issued:",Mh(e.approvedDate||e.submittedDate),n),n+=3,a.setFont("helvetica","bold"),a.setFontSize(12),a.text(e.applicantName||"N/A",Wn/2,n,{align:"center"}),n+=6,a.setFont("helvetica","normal"),a.setFontSize(9);const i="This certifies that "+(e.applicantName||"N/A")+", is a licensed tricycle driver/operator to operate a tricycle belonging to the "+(e.businessName||"N/A")+" Tricycle Operators and Drivers Association, Inc.",o=a.splitTextToSize(i,kc-16);a.text(o,Ir+8,n),n+=o.length*4+4,n=uA(a,"OPERATOR INFORMATION",n),n=ur(a,"NAME OF OPERATOR:",e.applicantName||"N/A",n),n=ur(a,"ADDRESS:",e.address||"N/A",n),n=ur(a,"CONTACT:",e.contactNumber||"N/A",n),n=ur(a,"EMAIL:",e.email||"N/A",n),n+=2,n=uA(a,"PERMIT DETAILS",n),n=ur(a,"Application Type:",e.application_type||"New",n),n=ur(a,"Status:",e.status,n),n=ur(a,"Receipt No.:",e.receiptNumber||"N/A",n),n=ur(a,"TODA Association:",e.businessName||"N/A",n),n=ur(a,"Valid Until:",Mh(e.expirationDate),n),n+=4,n=Iw(a,"This permit is NON-TRANSFERABLE and is VALID until "+Mh(e.expirationDate)+", unless sooner cancelled and/or revoked. Failure to renew this permit for the next calendar year until every 20th of January shall make the permittee liable to pay SURCHARGE of 25% of the amount of yearly fees and INTEREST of 2% MONTHLY OF EVERY MONTH UNTIL FULLY PAID.",n),n=Lw(a,[{name:e.applicantName||"N/A",title:"Permittee"},{name:"OSCAR OCA MALAPITAN",title:"City Mayor"},{name:"HEAD, TRU",title:"Tricycle Regulatory Unit"}],n),Mw(a,e)}function FY(a,e,s,r){Ew(a),Fw(a),Dw(a,e.id);let n=Tw(a,s,r,[{t:"Republic of the Philippines",s:9},{t:"CITY OF CALOOCAN",s:11,b:!0},{t:"Office of the City Mayor",s:8},{t:"OFFICE OF THE BUILDING OFFICIAL",s:9,b:!0}],Ir+6);n=Pw(a,"BUILDING PERMIT",n+2),n=fI(a," PERMIT No. "+e.id+" ",n),n=ur(a,"Application No.:",e.id,n),n=ur(a,"Date Issued:",Mh(e.approvedDate||e.submittedDate),n),n=ur(a,"Issued to:",e.applicantName||"N/A",n),n+=2,a.setFont("helvetica","normal"),a.setFontSize(9),a.text("with registered address at: "+(e.address||"N/A"),Ir+8,n),n+=5;const i="has been granted to erect/construct the specified project below, subject to the provisions of the National Building Code of the Philippines (P.D. 1096) and its implementing rules and regulations.";a.setFontSize(8);const o=a.splitTextToSize(i,kc-16);a.text(o,Ir+8,n),n+=o.length*3.5+4,n=uA(a,"PROJECT INFORMATION",n),n=ur(a,"Use/Purpose:",e.businessName||"N/A",n),n=ur(a,"Application Type:",e.application_type||"New",n),n=ur(a,"Total Estimated Cost:",z5(e.fees),n),n=ur(a,"Status:",e.status,n),n+=2,n=uA(a,"APPLICANT INFORMATION",n),n=ur(a,"Applicant/Owner:",e.applicantName||"N/A",n),n=ur(a,"Project Location:",e.address||"N/A",n),n=ur(a,"Contact:",e.contactNumber||"N/A",n),n=ur(a,"Email:",e.email||"N/A",n),n=ur(a,"Expected Completion:",Mh(e.expirationDate),n),n+=4,n=Iw(a,"This Permit may be revoked/cancelled should the grantee violate any provision of the National Building Code, its implementing rules, zoning ordinance, and other related laws, rules, and regulations. This permit is NON-TRANSFERABLE.",n),n=Lw(a,[{name:e.applicantName||"N/A",title:"Applicant/Owner"},{name:"OSCAR OCA MALAPITAN",title:"City Mayor"},{name:"CITY BUILDING OFFICIAL",title:"Building Official"}],n),Mw(a,e)}function DY(a,e,s,r){Ew(a),Fw(a),Dw(a,e.id);const n=e.address&&e.address.split(",").pop()?.trim()||"CALOOCAN CITY";let i=Tw(a,s,r,[{t:"Republic of the Philippines",s:9},{t:n.toUpperCase(),s:12,b:!0},{t:"CITY OF CALOOCAN",s:10,b:!0},{t:"OFFICE OF THE BARANGAY CAPTAIN",s:8}],Ir+6);i=Pw(a,"BARANGAY CLEARANCE",i+2),i=ur(a,"Document No.:",e.id,i),i=ur(a,"O.R. No.:",e.receiptNumber||"N/A",i),i=ur(a,"Date Issued:",Mh(e.approvedDate||e.submittedDate),i),i+=5,a.setFillColor(...Rp),a.roundedRect(Ir+20,i,kc-40,7,1,1,"F"),a.setFont("helvetica","bold"),a.setFontSize(9),a.setTextColor(...V5),a.text("TO WHOM IT MAY CONCERN",Wn/2,i+5,{align:"center"}),a.setTextColor(...hl),i+=12,a.setFont("helvetica","normal"),a.setFontSize(10);const o="This is to certify that "+(e.applicantName||"N/A").toUpperCase()+", of legal age, residing at "+(e.address||"N/A")+", Caloocan City, has requested for a BARANGAY CLEARANCE from this office.",l=a.splitTextToSize(o,kc-20);a.text(l,Ir+10,i),i+=l.length*5+4,a.setFontSize(10),a.text("Purpose: "+(e.remarks||"General Purpose"),Ir+10,i),i+=6,a.text("Clearance Fee: "+z5(e.fees),Ir+10,i),i+=8,i=uA(a,"APPLICANT DETAILS",i),i=ur(a,"Full Name:",e.applicantName||"N/A",i),i=ur(a,"Address:",e.address||"N/A",i),i=ur(a,"Contact:",e.contactNumber||"N/A",i),i=ur(a,"Email:",e.email||"N/A",i),i=ur(a,"Status:",e.status,i),i+=4,i=Iw(a,"This clearance is NON-TRANSFERABLE and is VALID until the date specified. Failure to renew shall subject the holder to penalties as provided by the Barangay ordinances. This clearance is issued upon the request of the above-named person for whatever legal purpose it may serve.",i),i=Lw(a,[{name:e.applicantName||"N/A",title:"Applicant"},{name:"BARANGAY CAPTAIN",title:"Barangay Captain"}],i),Mw(a,e)}async function TY(a){const[e,s]=await Promise.all([IE(BY),IE(SY)]),r=new Es({unit:"mm",format:"a4"}),n=(a.permitType||"").toLowerCase();n.includes("business")?LE(r,a,e,s):n.includes("franchise")||n.includes("toda")?EY(r,a,e,s):n.includes("building")?FY(r,a,e,s):n.includes("barangay")?DY(r,a,e,s):LE(r,a,e,s);const i=(a.permitType||"Permit").replace(/\s+/g,"-")+"-"+a.id+"-Digital-Copy.pdf";return r.save(i),i}const PY="/assets/filebrgy-DLin3plG.png",IY="/assets/filebuilding-DdV7BpfR.png",LY="/assets/filebusiness-8XuK4NFq.png",MY="/assets/filetoda-CjfZfXqw.png";function RY(){const[a,e]=C.useState([]),[s,r]=C.useState(""),[n,i]=C.useState(null),[o,l]=C.useState(!1),[c,u]=C.useState({}),[m,A]=C.useState(!1),[g,p]=C.useState(!1),[v,b]=C.useState(""),[y,w]=C.useState(""),[B,j]=C.useState(!1),[E,S]=C.useState(!0),[T,M]=C.useState(null),[D,P]=C.useState("all"),[Y,Q]=C.useState("all"),[L,ae]=C.useState(!1),[ne,V]=C.useState(!1),[O,X]=C.useState(""),[$,H]=C.useState(""),[te,K]=C.useState("submittedDate"),[I,R]=C.useState("desc"),[G,se]=C.useState(1),[le,ye]=C.useState(10),[De,me]=C.useState(!0),Te=ka(),{user:we}=nw();C.useEffect(()=>{st()},[we]);const st=async()=>{if(!we||!we.email){M("User not authenticated"),S(!1);return}try{S(!0),M(null);const Xe=we.email,Ct=localStorage.getItem("user_id")||0,_e=await fetch(`/backend/api/tracker.php?email=${encodeURIComponent(Xe)}&user_id=${Ct}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!_e.ok)throw new Error(`HTTP error! status: ${_e.status}`);const Se=await _e.json();console.log("[PermitTracker] API response:",{total:Se.total,appCount:Se.applications?.length,email:Se.user_email,userId:Se.user_id}),Se.success?e(Se.applications||[]):M(Se.message||"Failed to fetch applications")}catch(Xe){console.error("Error fetching applications:",Xe),M("Failed to load applications. Please try again.")}finally{S(!1)}},ce={total:a.length,approved:a.filter(Xe=>Xe.status==="Approved").length,pending:a.filter(Xe=>Xe.status==="Pending").length,forCompliance:a.filter(Xe=>Xe.status==="For Compliance").length,rejected:a.filter(Xe=>Xe.status==="Rejected").length},tt=Xe=>{const Ct=Xe?.toLowerCase()||"";return Ct.includes("business")?t.jsx(Ur,{className:"w-5 h-5"}):Ct.includes("barangay")?t.jsx(rn,{className:"w-5 h-5"}):Ct.includes("franchise")?t.jsx(Ba,{className:"w-5 h-5"}):Ct.includes("building")?t.jsx(ll,{className:"w-5 h-5"}):t.jsx(Kt,{className:"w-5 h-5"})},Ae=[...new Set(a.map(Xe=>Xe.permitType).filter(Boolean))],gt=a.filter(Xe=>{const Ct=`${Xe.permitType} ${Xe.status} ${Xe.application_type} ${Xe.applicantName} ${Xe.businessName} ${Xe.id}`.toLowerCase().includes(s.toLowerCase()),_e=D==="all"||Xe.permitType?.toLowerCase().includes(D.toLowerCase()),Se=Y==="all"||Xe.status===Y;let Ve=!0;if(O||$){const et=new Date(Xe.submittedDate);if(O){const vt=new Date(O);Ve=Ve&&et>=vt}if($){const vt=new Date($);vt.setHours(23,59,59,999),Ve=Ve&&et<=vt}}return Ct&&_e&&Se&&Ve}),q=[...gt].sort((Xe,Ct)=>{let _e=Xe[te],Se=Ct[te];return te.includes("Date")&&(_e=new Date(_e||0).getTime(),Se=new Date(Se||0).getTime()),typeof _e=="string"&&(_e=_e.toLowerCase(),Se=Se?.toLowerCase()||""),I==="asc"?_e>Se?1:-1:_e<Se?1:-1}),Qt=Math.ceil(q.length/le),yt=(G-1)*le,Oe=yt+le,ze=q.slice(yt,Oe),Le=Xe=>{te===Xe?R(I==="asc"?"desc":"asc"):(K(Xe),R("asc"))},oe=()=>{if(gt.length===0){dt.fire({icon:"warning",title:"No Data",text:"No applications to export.",confirmButtonColor:"#4A90E2"});return}const Xe=["Permit ID","Permit Type","Application Type","Status","Applicant Name","Business Name","Submitted Date","Expiration Date","Address","Contact"],Ct=gt.map(vt=>[vt.id,vt.permitType,vt.application_type,vt.status,vt.applicantName||"N/A",vt.businessName||"N/A",J(vt.submittedDate),J(vt.expirationDate),vt.address||"N/A",vt.contactNumber||"N/A"]),_e=[Xe.join(","),...Ct.map(vt=>vt.map(Mt=>`"${Mt}"`).join(","))].join(`
`),Se=new Blob([_e],{type:"text/csv"}),Ve=URL.createObjectURL(Se),et=document.createElement("a");et.href=Ve,et.download=`Permit-Applications-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(et),et.click(),document.body.removeChild(et),URL.revokeObjectURL(Ve),dt.fire({icon:"success",title:"Export Successful!",text:`Exported ${gt.length} application(s) to CSV.`,confirmButtonColor:"#4CAF50"})},he=()=>{r(""),P("all"),Q("all"),X(""),H(""),se(1)},W=Xe=>{i(Xe),l(!0)},ve=async Xe=>{if(Xe.status!=="Approved"){dt.fire({icon:"warning",title:"Cannot Download",text:"Permit can only be downloaded when approved.",confirmButtonColor:"#4A90E2"});return}try{V(!0);const Ct=await TY(Xe);dt.fire({icon:"success",title:"PDF Downloaded!",html:`
          <p>Your unofficial digital copy of <strong>${Xe.permitType}</strong> (${Xe.id}) has been downloaded as PDF.</p>
          <p class="text-sm text-gray-600 mt-2">File: <strong>${Ct}</strong></p>
          <p class="text-xs text-gray-400 mt-1">This is a digital copy. For the official permit, please visit the respective office.</p>
        `,confirmButtonColor:"#4CAF50"})}catch(Ct){console.error("Download error:",Ct),dt.fire({icon:"error",title:"Download Failed",text:Ct.message||"Unable to generate PDF. Please try again.",confirmButtonColor:"#E53935"})}finally{V(!1)}},Qe=async(Xe,Ct)=>{const _e=Ct.target.files;if(!(_e.length===0||!(await dt.fire({title:"Upload Compliance Documents",html:`
        <div class="text-left">
          <p class="mb-2">You are uploading <strong>${_e.length}</strong> file(s) for:</p>
          <p class="text-sm bg-gray-100 p-2 rounded mb-2"><strong>Permit ID:</strong> ${Xe.id}</p>
          <p class="text-sm bg-gray-100 p-2 rounded mb-3"><strong>Type:</strong> ${Xe.permitType}</p>
          <div class="text-xs text-gray-600">
            <p><strong>Files to upload:</strong></p>
            <ul class="list-disc pl-4 mt-1">
              ${Array.from(_e).map(Ve=>`<li>${Ve.name} (${(Ve.size/1024).toFixed(1)} KB)</li>`).join("")}
            </ul>
          </div>
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Upload Files",cancelButtonText:"Cancel",confirmButtonColor:"#4CAF50",cancelButtonColor:"#9CA3AF"})).isConfirmed))try{ae(!0);const Ve=new FormData;Ve.append("permit_id",Xe.id),Ve.append("permit_type",Xe.permitType),Ve.append("user_id",localStorage.getItem("user_id")||""),Array.from(_e).forEach((Mt,Ye)=>{Ve.append(`compliance_file_${Ye}`,Mt)});const et=await fetch("/backend/api/upload_compliance.php",{method:"POST",body:Ve});if(!et.ok)throw new Error(`HTTP error! status: ${et.status}`);const vt=await et.json();if(vt.success)dt.fire({icon:"success",title:"Upload Successful!",html:`
            <p>Your compliance documents have been uploaded successfully.</p>
            <p class="text-sm text-gray-600 mt-2">Permit ID: <strong>${Xe.id}</strong></p>
            <p class="text-sm text-gray-600">The admin team will review your documents shortly.</p>
          `,confirmButtonColor:"#4CAF50"}),st();else throw new Error(vt.message||"Upload failed")}catch(Ve){console.error("Upload error:",Ve),dt.fire({icon:"error",title:"Upload Failed",text:Ve.message||"Failed to upload compliance documents. Please try again.",confirmButtonColor:"#E53935"})}finally{ae(!1),Ct.target&&(Ct.target.value="")}},Ze=Xe=>{switch(Xe){case"Approved":return t.jsx(Us,{className:"w-4 h-4 text-green-500"});case"Rejected":return t.jsx(ls,{className:"w-4 h-4 text-red-500"});case"For Compliance":return t.jsx(jr,{className:"w-4 h-4 text-yellow-500"});default:return t.jsx(Kt,{className:"w-4 h-4 text-gray-500"})}},J=Xe=>Xe?new Date(Xe).toLocaleDateString():"N/A",He=Xe=>{const Ct=(Xe||"").toLowerCase();return Ct.includes("business")||Ct.includes("barangay")||Ct.includes("building")||Ct.includes("toda")||Ct.includes("franchise")},xt=Xe=>{const Ct=(Xe||"").toLowerCase();return Ct.includes("business")?LY:Ct.includes("barangay")?PY:Ct.includes("building")?IY:Ct.includes("toda")||Ct.includes("franchise")?MY:null};return t.jsxs("div",{className:"mx-1 mt-1 p-6 bg-[#FBFBFB] dark:bg-slate-900 text-[#4D4A4A] dark:text-slate-300 rounded-lg min-h-screen flex flex-col",children:[t.jsx("h1",{className:"text-xl md:text-3xl font-bold mb-2 text-center text-[#4D4A4A] dark:text-white",children:"E-Permit Tracker"}),t.jsxs("p",{className:"mb-6 text-center text-sm text-[#4D4A4A]/70 dark:text-gray-400",children:["Track the status of all your permit applications in one place. ",t.jsx("br",{}),"Search, filter, and manage your applications efficiently."]}),!E&&!T&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mb-6",children:[t.jsxs("div",{className:"bg-[#EBF3FC] border border-[#C9DDFB] rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(Kt,{className:"w-7 h-7 text-[#4A90E2]"}),t.jsx("span",{className:"text-2xl font-bold text-[#4A90E2]",children:ce.total})]}),t.jsx("p",{className:"text-xs font-medium text-[#4D4A4A]",children:"Total Applications"})]}),t.jsxs("div",{className:"bg-[#E8F5E9] border border-[#C8E6C9] rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(Us,{className:"w-7 h-7 text-[#4CAF50]"}),t.jsx("span",{className:"text-2xl font-bold text-[#4CAF50]",children:ce.approved})]}),t.jsx("p",{className:"text-xs font-medium text-[#4D4A4A]",children:"Approved"})]}),t.jsxs("div",{className:"bg-[#FFF8E1] border border-[#FFECB3] rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(jr,{className:"w-7 h-7 text-[#FDA811]"}),t.jsx("span",{className:"text-2xl font-bold text-[#FDA811]",children:ce.pending})]}),t.jsx("p",{className:"text-xs font-medium text-[#4D4A4A]",children:"Pending"})]}),t.jsxs("div",{className:"bg-[#FFF3E0] border border-[#FFE0B2] rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(Ks,{className:"w-7 h-7 text-[#F57C00]"}),t.jsx("span",{className:"text-2xl font-bold text-[#F57C00]",children:ce.forCompliance})]}),t.jsx("p",{className:"text-xs font-medium text-[#4D4A4A]",children:"For Compliance"})]}),t.jsxs("div",{className:"bg-[#FFEBEE] border border-[#FFCDD2] rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(ls,{className:"w-7 h-7 text-[#E53935]"}),t.jsx("span",{className:"text-2xl font-bold text-[#E53935]",children:ce.rejected})]}),t.jsx("p",{className:"text-xs font-medium text-[#4D4A4A]",children:"Rejected"})]})]}),t.jsx("div",{className:"w-full max-w-2xl mx-auto mb-6 p-4 bg-[#EBF3FC] dark:bg-blue-900/20 rounded-lg border border-[#C9DDFB] dark:border-blue-800",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"font-semibold text-[#4A90E2] dark:text-blue-300 text-sm",children:"Applicant Information"}),t.jsxs("p",{className:"text-sm",children:[t.jsx("strong",{children:"Name:"})," ",we?.fullName||we?.username||"N/A"]}),t.jsxs("p",{className:"text-sm",children:[t.jsx("strong",{children:"Email:"})," ",we?.email||"N/A"]})]})}),t.jsxs("div",{className:"mb-6 space-y-4",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-center justify-between",children:[t.jsx("div",{className:"w-full md:w-96",children:t.jsx("input",{type:"text",placeholder:"Search by permit type, status, name, or ID...",value:s,onChange:Xe=>r(Xe.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white text-sm"})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>me(!De),className:"flex items-center gap-2 px-4 py-2 bg-[#4A90E2] hover:bg-[#3A7BD5] text-white rounded-lg transition-colors text-sm",children:[t.jsx(Rx,{className:"w-4 h-4"}),De?"Hide":"Show"," Filters"]}),t.jsxs("button",{onClick:st,className:"flex items-center gap-2 px-4 py-2 bg-[#4CAF50] hover:bg-[#43A047] text-white rounded-lg transition-colors text-sm",disabled:E,children:[t.jsx(Ya,{className:`w-4 h-4 ${E?"animate-spin":""}`}),"Refresh"]}),t.jsxs("button",{onClick:oe,className:"flex items-center gap-2 px-4 py-2 bg-[#4A90E2]/80 hover:bg-[#4A90E2] text-white rounded-lg transition-colors text-sm",disabled:a.length===0,children:[t.jsx(n8,{className:"w-4 h-4"}),"Export CSV"]})]})]}),De&&t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-[#E9E7E7] dark:border-gray-700",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Permit Type"}),t.jsxs("select",{value:D,onChange:Xe=>{P(Xe.target.value),se(1)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white text-sm",children:[t.jsx("option",{value:"all",children:"All Types"}),Ae.map(Xe=>t.jsx("option",{value:Xe,children:Xe},Xe))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),t.jsxs("select",{value:Y,onChange:Xe=>{Q(Xe.target.value),se(1)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white text-sm",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"Pending",children:"Pending"}),t.jsx("option",{value:"Approved",children:"Approved"}),t.jsx("option",{value:"For Compliance",children:"For Compliance"}),t.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date From"}),t.jsx("input",{type:"date",value:O,onChange:Xe=>{X(Xe.target.value),se(1)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date To"}),t.jsx("input",{type:"date",value:$,onChange:Xe=>{H(Xe.target.value),se(1)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white text-sm"})]})]}),t.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[t.jsxs("p",{className:"text-xs text-[#4D4A4A]/70 dark:text-gray-400",children:["Showing ",q.length," of ",a.length," applications"]}),t.jsx("button",{onClick:he,className:"text-xs text-[#4A90E2] hover:text-[#3A7BD5] dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Clear All Filters"})]})]})]}),E?t.jsxs("div",{className:"flex flex-col items-center justify-center flex-grow py-12",children:[t.jsx(Or,{className:"w-12 h-12 text-[#4A90E2] animate-spin mb-4"}),t.jsx("p",{className:"text-[#4D4A4A]/70 dark:text-gray-400",children:"Loading your applications..."})]}):T?t.jsxs("div",{className:"flex flex-col items-center justify-center flex-grow py-12",children:[t.jsx(ls,{className:"w-12 h-12 text-[#E53935] mb-4"}),t.jsx("p",{className:"text-[#E53935] dark:text-red-400 mb-4",children:T}),t.jsx("button",{onClick:st,className:"px-4 py-2 bg-[#4A90E2] hover:bg-[#3A7BD5] text-white rounded-lg transition-colors",children:"Retry"})]}):a.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Kt,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg font-medium mb-2",children:"No permit applications found"}),t.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"Submit your first application to get started"})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"overflow-x-auto flex-grow",children:t.jsxs("table",{className:"w-full bg-white dark:bg-slate-800 rounded-lg border border-[#E9E7E7] dark:border-gray-700",children:[t.jsx("thead",{className:"bg-[#FBFBFB] dark:bg-slate-700",children:t.jsxs("tr",{children:[t.jsx("th",{onClick:()=>Le("id"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-600",children:t.jsxs("div",{className:"flex items-center gap-1",children:["Permit ID",te==="id"&&(I==="asc"?t.jsx(Vf,{className:"w-3 h-3"}):t.jsx(fd,{className:"w-3 h-3"})),te!=="id"&&t.jsx(lx,{className:"w-3 h-3 opacity-30"})]})}),t.jsx("th",{onClick:()=>Le("permitType"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-600",children:t.jsxs("div",{className:"flex items-center gap-1",children:["Permit Type",te==="permitType"&&(I==="asc"?t.jsx(Vf,{className:"w-3 h-3"}):t.jsx(fd,{className:"w-3 h-3"})),te!=="permitType"&&t.jsx(lx,{className:"w-3 h-3 opacity-30"})]})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Application Type"}),t.jsx("th",{onClick:()=>Le("status"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-600",children:t.jsxs("div",{className:"flex items-center gap-1",children:["Status",te==="status"&&(I==="asc"?t.jsx(Vf,{className:"w-3 h-3"}):t.jsx(fd,{className:"w-3 h-3"})),te!=="status"&&t.jsx(lx,{className:"w-3 h-3 opacity-30"})]})}),t.jsx("th",{onClick:()=>Le("submittedDate"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-600",children:t.jsxs("div",{className:"flex items-center gap-1",children:["Submitted Date",te==="submittedDate"&&(I==="asc"?t.jsx(Vf,{className:"w-3 h-3"}):t.jsx(fd,{className:"w-3 h-3"})),te!=="submittedDate"&&t.jsx(lx,{className:"w-3 h-3 opacity-30"})]})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Expiration Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:ze.length>0?ze.map(Xe=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[t.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white font-mono",children:Xe.id}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:Xe.permitType}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Xe.application_type==="New"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":Xe.application_type==="Renewal"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":Xe.application_type?.startsWith("Amendment")?"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-300":Xe.application_type==="Professional Registration"?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:Xe.application_type})}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsxs("div",{className:"flex items-center gap-2",children:[Ze(Xe.status),t.jsx("span",{className:`font-medium ${Xe.status==="Approved"?"text-green-600 dark:text-green-400":Xe.status==="Rejected"?"text-red-600 dark:text-red-400":"text-yellow-600 dark:text-yellow-400"}`,children:Xe.status})]})}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(bn,{className:"w-3 h-3"}),J(Xe.submittedDate)]})}),t.jsx("td",{className:"px-6 py-4 text-sm",children:Xe.expirationDate?(()=>{const Ct=new Date,_e=new Date(Xe.expirationDate),Se=Math.round((_e-Ct)/864e5),Ve=Se<0,et=!Ve&&Se<=30;return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-300",children:[t.jsx(bn,{className:"w-3 h-3"}),J(Xe.expirationDate)]}),Ve&&t.jsxs("span",{className:"inline-flex items-center gap-1 mt-1 px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",children:[t.jsx(ls,{className:"w-3 h-3"})," Expired (",Math.abs(Se),"d ago)"]}),et&&t.jsxs("span",{className:"inline-flex items-center gap-1 mt-1 px-2 py-0.5 text-xs font-semibold rounded-full bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",children:[t.jsx(Ks,{className:"w-3 h-3"})," ",Se,"d left"]}),!Ve&&!et&&t.jsxs("span",{className:"inline-flex items-center gap-1 mt-1 px-2 py-0.5 text-xs font-semibold rounded-full bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:[t.jsx(Us,{className:"w-3 h-3"})," Active"]})]})})():t.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-xs",children:"Not set"})}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>W(Xe),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:t.jsx(ws,{className:"w-4 h-4"})}),He(Xe.permitType)&&t.jsx("button",{onClick:()=>ve(Xe),className:`p-2 rounded-lg transition-colors ${Xe.status==="Approved"?"text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-900/20":"text-gray-400 cursor-not-allowed"}`,title:Xe.status==="Approved"?"Download Permit":"Available when approved",disabled:Xe.status!=="Approved",children:t.jsx(nn,{className:"w-4 h-4"})}),Xe.status==="For Compliance"&&t.jsxs("label",{className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors cursor-pointer",title:"Upload Compliance Documents",children:[t.jsx(er,{className:"w-4 h-4"}),t.jsx("input",{type:"file",multiple:!0,onChange:Ct=>Qe(Xe,Ct),className:"hidden",disabled:L})]})]})})]},Xe.id)):t.jsx("tr",{children:t.jsxs("td",{colSpan:"7",className:"text-center text-gray-500 dark:text-gray-400 py-8",children:[t.jsx(Rx,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{className:"font-medium",children:"No matching permits found"}),t.jsx("p",{className:"text-xs mt-1",children:"Try adjusting your filters or search criteria"})]})})})]})}),Qt>1&&t.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between bg-white dark:bg-slate-800 px-4 py-3 rounded-lg border border-[#E9E7E7] dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3 md:mb-0",children:[t.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Items per page:"}),t.jsxs("select",{value:le,onChange:Xe=>{ye(Number(Xe.target.value)),se(1)},className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded dark:bg-slate-700 dark:text-white text-sm",children:[t.jsx("option",{value:5,children:"5"}),t.jsx("option",{value:10,children:"10"}),t.jsx("option",{value:25,children:"25"}),t.jsx("option",{value:50,children:"50"})]}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",yt+1,"-",Math.min(Oe,q.length)," of ",q.length]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>se(1),disabled:G===1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-100 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"First"}),t.jsx("button",{onClick:()=>se(G-1),disabled:G===1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-100 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Previous"}),t.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,Qt)},(Xe,Ct)=>{let _e;return Qt<=5||G<=3?_e=Ct+1:G>=Qt-2?_e=Qt-4+Ct:_e=G-2+Ct,t.jsx("button",{onClick:()=>se(_e),className:`px-3 py-1 border rounded text-sm ${G===_e?"bg-[#4A90E2] text-white border-[#4A90E2]":"border-[#E9E7E7] dark:border-gray-600 hover:bg-[#EBF3FC] dark:hover:bg-slate-700"}`,children:_e},_e)})}),t.jsx("button",{onClick:()=>se(G+1),disabled:G===Qt,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-100 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Next"}),t.jsx("button",{onClick:()=>se(Qt),disabled:G===Qt,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-100 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Last"})]})]})]}),o&&n&&t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:()=>l(!1),children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden shadow-2xl flex flex-col",onClick:Xe=>Xe.stopPropagation(),children:[t.jsx("div",{className:`relative px-6 py-5 flex-shrink-0 ${n.status==="Approved"?"bg-gradient-to-r from-[#4CAF50] to-[#43A047]":n.status==="Rejected"?"bg-gradient-to-r from-[#E53935] to-[#C62828]":n.status==="For Compliance"?"bg-gradient-to-r from-[#F57C00] to-[#E65100]":"bg-gradient-to-r from-[#4A90E2] to-[#3A7BD5]"} text-white`,children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-11 h-11 bg-white/20 rounded-xl flex items-center justify-center",children:tt(n.permitType)}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold leading-tight",children:n.permitType||"Permit"}),t.jsx("p",{className:"text-sm text-white/80 font-mono",children:n.id})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"px-3 py-1 bg-white/20 rounded-full text-sm font-semibold flex items-center gap-1.5",children:[Ze(n.status),n.status]}),t.jsx("button",{onClick:()=>l(!1),className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:t.jsx(ls,{className:"w-5 h-5"})})]})]})}),t.jsxs("div",{className:"overflow-y-auto flex-1 p-6 space-y-5",children:[t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2.5",children:[t.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-100 dark:border-blue-800",children:[t.jsx(bn,{className:"w-5 h-5 mx-auto mb-1.5 text-blue-500"}),t.jsx("p",{className:"text-[10px] uppercase tracking-wide text-gray-500 dark:text-gray-400 mb-0.5",children:"Submitted"}),t.jsx("p",{className:"font-semibold text-xs",children:J(n.submittedDate)})]}),n.approvedDate&&t.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-100 dark:border-green-800",children:[t.jsx(Us,{className:"w-5 h-5 mx-auto mb-1.5 text-green-500"}),t.jsx("p",{className:"text-[10px] uppercase tracking-wide text-gray-500 dark:text-gray-400 mb-0.5",children:"Approved"}),t.jsx("p",{className:"font-semibold text-xs",children:J(n.approvedDate)})]}),n.expirationDate&&t.jsxs("div",{className:"text-center p-3 bg-orange-50 dark:bg-orange-900/20 rounded-xl border border-orange-100 dark:border-orange-800",children:[t.jsx(bn,{className:"w-5 h-5 mx-auto mb-1.5 text-orange-500"}),t.jsx("p",{className:"text-[10px] uppercase tracking-wide text-gray-500 dark:text-gray-400 mb-0.5",children:"Expires"}),t.jsx("p",{className:"font-semibold text-xs",children:J(n.expirationDate)})]}),n.fees&&t.jsxs("div",{className:"text-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl border border-purple-100 dark:border-purple-800",children:[t.jsx(Kt,{className:"w-5 h-5 mx-auto mb-1.5 text-purple-500"}),t.jsx("p",{className:"text-[10px] uppercase tracking-wide text-gray-500 dark:text-gray-400 mb-0.5",children:"Total Fees"}),t.jsx("p",{className:"font-semibold text-xs",children:n.fees})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 rounded-xl p-5 border border-gray-200 dark:border-gray-700",children:[t.jsxs("h3",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2 text-sm",children:[t.jsx(Kt,{className:"w-4 h-4 text-blue-500"}),"Application Details"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2.5",children:[t.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 dark:border-gray-600",children:[t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Permit Type"}),t.jsx("span",{className:"text-xs font-semibold",children:n.permitType||"N/A"})]}),t.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 dark:border-gray-600",children:[t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Application Type"}),t.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${n.application_type==="New"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":n.application_type==="Renewal"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300"}`,children:n.application_type||"N/A"})]}),t.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 dark:border-gray-600",children:[t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Receipt No."}),t.jsx("span",{className:"text-xs font-semibold font-mono",children:n.receiptNumber||"N/A"})]}),t.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 dark:border-gray-600",children:[t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Email"}),t.jsx("span",{className:"text-xs font-semibold",children:n.email||we?.email||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 rounded-xl p-5 border border-gray-200 dark:border-gray-700",children:[t.jsxs("h3",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2 text-sm",children:[t.jsx(Ur,{className:"w-4 h-4 text-blue-500"}),"Applicant & Business"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2.5",children:[t.jsxs("div",{className:"py-1 border-b border-gray-100 dark:border-gray-600",children:[t.jsx("p",{className:"text-[10px] uppercase tracking-wide text-gray-400 dark:text-gray-500",children:"Applicant Name"}),t.jsx("p",{className:"text-sm font-medium mt-0.5",children:n.applicantName||"N/A"})]}),t.jsxs("div",{className:"py-1 border-b border-gray-100 dark:border-gray-600",children:[t.jsx("p",{className:"text-[10px] uppercase tracking-wide text-gray-400 dark:text-gray-500",children:"Business/Establishment"}),t.jsx("p",{className:"text-sm font-medium mt-0.5",children:n.businessName||"N/A"})]}),t.jsxs("div",{className:"py-1 border-b border-gray-100 dark:border-gray-600 md:col-span-2",children:[t.jsx("p",{className:"text-[10px] uppercase tracking-wide text-gray-400 dark:text-gray-500",children:"Complete Address"}),t.jsx("p",{className:"text-sm font-medium mt-0.5",children:n.address||"N/A"})]}),t.jsxs("div",{className:"py-1 border-b border-gray-100 dark:border-gray-600",children:[t.jsx("p",{className:"text-[10px] uppercase tracking-wide text-gray-400 dark:text-gray-500",children:"Contact Number"}),t.jsx("p",{className:"text-sm font-medium mt-0.5",children:n.contactNumber||"N/A"})]}),n.tin&&t.jsxs("div",{className:"py-1 border-b border-gray-100 dark:border-gray-600",children:[t.jsx("p",{className:"text-[10px] uppercase tracking-wide text-gray-400 dark:text-gray-500",children:"TIN"}),t.jsx("p",{className:"text-sm font-medium font-mono mt-0.5",children:n.tin})]})]})]}),n.requirements&&n.requirements.length>0&&t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 rounded-xl p-5 border border-gray-200 dark:border-gray-700",children:[t.jsxs("h3",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2 text-sm",children:[t.jsx(Us,{className:"w-4 h-4 text-green-500"}),"Submitted Requirements"]}),t.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-1.5",children:n.requirements.map((Xe,Ct)=>t.jsxs("li",{className:"flex items-center gap-2 text-xs bg-green-50 dark:bg-green-900/10 px-3 py-2 rounded-lg",children:[t.jsx(Ht,{className:"w-3.5 h-3.5 text-green-500 flex-shrink-0"}),t.jsx("span",{children:Xe})]},Ct))})]}),n.complianceNotes&&t.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-xl p-5 border-l-4 border-amber-500",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Ks,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold text-amber-800 dark:text-amber-300 text-sm mb-1",children:"Compliance Required"}),t.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400 mb-3",children:n.complianceNotes}),t.jsxs("label",{className:"inline-flex items-center px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg cursor-pointer transition-colors text-xs font-semibold",children:[t.jsx(er,{className:"w-3.5 h-3.5 mr-1.5"}),"Upload Documents",t.jsx("input",{type:"file",multiple:!0,onChange:Xe=>Qe(n,Xe),className:"hidden",disabled:L})]})]})]})}),n.rejectionReason&&t.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-5 border-l-4 border-red-500",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(ls,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold text-red-800 dark:text-red-300 text-sm mb-1",children:"Application Rejected"}),t.jsx("p",{className:"text-xs text-red-700 dark:text-red-400",children:n.rejectionReason})]})]})}),n.status==="Approved"&&He(n.permitType)&&t.jsxs("div",{className:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-green-900/20 dark:via-emerald-900/20 dark:to-teal-900/20 rounded-2xl border-2 border-green-200 dark:border-green-700 overflow-hidden",children:[t.jsxs("div",{className:"bg-green-600 dark:bg-green-700 px-5 py-3 flex items-center gap-2",children:[t.jsx(Us,{className:"w-5 h-5 text-white"}),t.jsx("h3",{className:"font-bold text-white text-sm",children:"Your Permit Has Been Approved!"})]}),t.jsx("div",{className:"p-5",children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 items-center",children:[xt(n.permitType)&&t.jsx("div",{className:"flex-shrink-0 w-40 sm:w-44",children:t.jsxs("div",{className:"relative rounded-xl overflow-hidden shadow-lg border-2 border-white dark:border-gray-600 group",children:[t.jsx("img",{src:xt(n.permitType),alt:`${n.permitType} Preview`,className:"w-full h-auto object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all"}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2",children:t.jsx("p",{className:"text-white text-[10px] font-semibold text-center",children:"Sample Preview"})})]})}),t.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[t.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300 mb-1 font-medium",children:["Download your digital copy of ",t.jsx("strong",{children:n.permitType})]}),t.jsx("p",{className:"text-xs text-green-700/70 dark:text-green-400/70 mb-4",children:'System-generated PDF with "DIGITAL COPY" watermark. For the official/physical permit, please visit the respective office.'}),t.jsxs("button",{onClick:()=>ve(n),disabled:ne,className:"inline-flex items-center justify-center gap-2 px-6 py-2.5 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-xl font-semibold transition-all shadow-md hover:shadow-lg text-sm",children:[ne?t.jsx(Or,{className:"w-4 h-4 animate-spin"}):t.jsx(nn,{className:"w-4 h-4"}),ne?"Generating PDF...":"Download PDF Permit"]})]})]})})]}),Object.keys(n).filter(Xe=>!["id","permitType","application_type","status","applicantName","businessName","address","contactNumber","submittedDate","approvedDate","rejectedDate","expirationDate","fees","requirements","complianceNotes","rejectionReason","email","receiptNumber","tin"].includes(Xe)&&n[Xe]&&n[Xe]!=="N/A"&&typeof n[Xe]!="object").length>0&&t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 rounded-xl p-5 border border-gray-200 dark:border-gray-700",children:[t.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-200 mb-3 text-sm",children:"Additional Information"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2",children:Object.entries(n).map(([Xe,Ct])=>["id","permitType","application_type","status","applicantName","businessName","address","contactNumber","submittedDate","approvedDate","rejectedDate","expirationDate","fees","requirements","complianceNotes","rejectionReason","email","receiptNumber","tin"].includes(Xe)||!Ct||Ct==="N/A"||typeof Ct=="object"?null:t.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 dark:border-gray-600",children:[t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:Xe.replace(/([A-Z])/g," $1").trim()}),t.jsx("span",{className:"text-xs font-semibold",children:Ct})]},Xe))})]})]}),t.jsxs("div",{className:"flex-shrink-0 px-6 py-4 bg-gray-50 dark:bg-slate-700/50 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between gap-3",children:[n.status==="Approved"&&He(n.permitType)?t.jsxs("button",{onClick:()=>ve(n),disabled:ne,className:"flex items-center gap-2 px-5 py-2.5 bg-[#4CAF50] hover:bg-[#43A047] disabled:bg-green-400 text-white rounded-xl font-semibold transition-colors text-sm",children:[ne?t.jsx(Or,{className:"w-4 h-4 animate-spin"}):t.jsx(nn,{className:"w-4 h-4"}),ne?"Generating...":"Download Permit"]}):t.jsx("div",{}),t.jsx("button",{onClick:()=>l(!1),className:"px-5 py-2.5 bg-gray-200 hover:bg-gray-300 dark:bg-slate-600 dark:hover:bg-slate-500 text-gray-700 dark:text-gray-200 rounded-xl font-semibold transition-colors text-sm",children:"Close"})]})]})}),m&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg max-w-md w-full p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:t.jsx(Ht,{className:"h-6 w-6 text-green-600"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Download Complete!"}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["Permit ",t.jsx("strong",{children:v})," has been successfully downloaded to your device."]}),t.jsx("button",{onClick:()=>A(!1),className:"w-full bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg transition-colors",children:"OK"})]})})}),g&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg max-w-md w-full p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 mb-4",children:t.jsx(Ht,{className:"h-6 w-6 text-blue-600"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Files Submitted!"}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["Your compliance documents for permit ",t.jsx("strong",{children:y})," have been successfully submitted for review."]}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:"You will be notified once your documents have been reviewed."}),t.jsx("button",{onClick:()=>p(!1),className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition-colors",children:"Continue"})]})})}),t.jsx("div",{className:"mt-8 text-center",children:t.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center gap-2 bg-[#4CAF50] hover:bg-[#43A047] text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:[t.jsx(Vh,{size:18}),"Back to Dashboard"]})}),B&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-[1px]",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-lg w-full p-8 text-center",children:[t.jsx("h3",{className:"text-2xl font-semibold mb-6",children:"Are you sure you want to go back?"}),t.jsxs("div",{className:"flex justify-center gap-6",children:[t.jsx("button",{onClick:()=>j(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-3 px-6 rounded-lg transition-colors",children:"Cancel"}),t.jsx("button",{onClick:()=>Te("/user/dashboard"),className:"bg-[#4CAF50] hover:bg-[#43A047] text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Yes, Go Back"})]})]})})]})}function OY(){return t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold mb-4 dark:text-white",children:"General Settings"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"General application settings"})]})}function UY(){return t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold mb-4 dark:text-white",children:"Security Settings"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Security and privacy settings"})]})}function N0(a){return a+.5|0}const Eh=(a,e,s)=>Math.max(Math.min(a,s),e);function hx(a){return Eh(N0(a*2.55),0,255)}function Rh(a){return Eh(N0(a*255),0,255)}function mu(a){return Eh(N0(a/2.55)/100,0,1)}function ME(a){return Eh(N0(a*100),0,100)}const Tl={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},d_=[..."0123456789ABCDEF"],QY=a=>d_[a&15],HY=a=>d_[(a&240)>>4]+d_[a&15],zb=a=>(a&240)>>4===(a&15),VY=a=>zb(a.r)&&zb(a.g)&&zb(a.b)&&zb(a.a);function zY(a){var e=a.length,s;return a[0]==="#"&&(e===4||e===5?s={r:255&Tl[a[1]]*17,g:255&Tl[a[2]]*17,b:255&Tl[a[3]]*17,a:e===5?Tl[a[4]]*17:255}:(e===7||e===9)&&(s={r:Tl[a[1]]<<4|Tl[a[2]],g:Tl[a[3]]<<4|Tl[a[4]],b:Tl[a[5]]<<4|Tl[a[6]],a:e===9?Tl[a[7]]<<4|Tl[a[8]]:255})),s}const $Y=(a,e)=>a<255?e(a):"";function qY(a){var e=VY(a)?QY:HY;return a?"#"+e(a.r)+e(a.g)+e(a.b)+$Y(a.a,e):void 0}const GY=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function pI(a,e,s){const r=e*Math.min(s,1-s),n=(i,o=(i+a/30)%12)=>s-r*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function WY(a,e,s){const r=(n,i=(n+a/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function YY(a,e,s){const r=pI(a,1,.5);let n;for(e+s>1&&(n=1/(e+s),e*=n,s*=n),n=0;n<3;n++)r[n]*=1-e-s,r[n]+=e;return r}function KY(a,e,s,r,n){return a===n?(e-s)/r+(e<s?6:0):e===n?(s-a)/r+2:(a-e)/r+4}function $5(a){const s=a.r/255,r=a.g/255,n=a.b/255,i=Math.max(s,r,n),o=Math.min(s,r,n),l=(i+o)/2;let c,u,m;return i!==o&&(m=i-o,u=l>.5?m/(2-i-o):m/(i+o),c=KY(s,r,n,m,i),c=c*60+.5),[c|0,u||0,l]}function q5(a,e,s,r){return(Array.isArray(e)?a(e[0],e[1],e[2]):a(e,s,r)).map(Rh)}function G5(a,e,s){return q5(pI,a,e,s)}function XY(a,e,s){return q5(YY,a,e,s)}function JY(a,e,s){return q5(WY,a,e,s)}function gI(a){return(a%360+360)%360}function ZY(a){const e=GY.exec(a);let s=255,r;if(!e)return;e[5]!==r&&(s=e[6]?hx(+e[5]):Rh(+e[5]));const n=gI(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=XY(n,i,o):e[1]==="hsv"?r=JY(n,i,o):r=G5(n,i,o),{r:r[0],g:r[1],b:r[2],a:s}}function eK(a,e){var s=$5(a);s[0]=gI(s[0]+e),s=G5(s),a.r=s[0],a.g=s[1],a.b=s[2]}function tK(a){if(!a)return;const e=$5(a),s=e[0],r=ME(e[1]),n=ME(e[2]);return a.a<255?`hsla(${s}, ${r}%, ${n}%, ${mu(a.a)})`:`hsl(${s}, ${r}%, ${n}%)`}const RE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},OE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function sK(){const a={},e=Object.keys(OE),s=Object.keys(RE);let r,n,i,o,l;for(r=0;r<e.length;r++){for(o=l=e[r],n=0;n<s.length;n++)i=s[n],l=l.replace(i,RE[i]);i=parseInt(OE[o],16),a[l]=[i>>16&255,i>>8&255,i&255]}return a}let $b;function rK(a){$b||($b=sK(),$b.transparent=[0,0,0,0]);const e=$b[a.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const aK=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function nK(a){const e=aK.exec(a);let s=255,r,n,i;if(e){if(e[7]!==r){const o=+e[7];s=e[8]?hx(o):Eh(o*255,0,255)}return r=+e[1],n=+e[3],i=+e[5],r=255&(e[2]?hx(r):Eh(r,0,255)),n=255&(e[4]?hx(n):Eh(n,0,255)),i=255&(e[6]?hx(i):Eh(i,0,255)),{r,g:n,b:i,a:s}}}function iK(a){return a&&(a.a<255?`rgba(${a.r}, ${a.g}, ${a.b}, ${mu(a.a)})`:`rgb(${a.r}, ${a.g}, ${a.b})`)}const TN=a=>a<=.0031308?a*12.92:Math.pow(a,1/2.4)*1.055-.055,yf=a=>a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4);function oK(a,e,s){const r=yf(mu(a.r)),n=yf(mu(a.g)),i=yf(mu(a.b));return{r:Rh(TN(r+s*(yf(mu(e.r))-r))),g:Rh(TN(n+s*(yf(mu(e.g))-n))),b:Rh(TN(i+s*(yf(mu(e.b))-i))),a:a.a+s*(e.a-a.a)}}function qb(a,e,s){if(a){let r=$5(a);r[e]=Math.max(0,Math.min(r[e]+r[e]*s,e===0?360:1)),r=G5(r),a.r=r[0],a.g=r[1],a.b=r[2]}}function xI(a,e){return a&&Object.assign(e||{},a)}function UE(a){var e={r:0,g:0,b:0,a:255};return Array.isArray(a)?a.length>=3&&(e={r:a[0],g:a[1],b:a[2],a:255},a.length>3&&(e.a=Rh(a[3]))):(e=xI(a,{r:0,g:0,b:0,a:1}),e.a=Rh(e.a)),e}function lK(a){return a.charAt(0)==="r"?nK(a):ZY(a)}class qx{constructor(e){if(e instanceof qx)return e;const s=typeof e;let r;s==="object"?r=UE(e):s==="string"&&(r=zY(e)||rK(e)||lK(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=xI(this._rgb);return e&&(e.a=mu(e.a)),e}set rgb(e){this._rgb=UE(e)}rgbString(){return this._valid?iK(this._rgb):void 0}hexString(){return this._valid?qY(this._rgb):void 0}hslString(){return this._valid?tK(this._rgb):void 0}mix(e,s){if(e){const r=this.rgb,n=e.rgb;let i;const o=s===i?.5:s,l=2*o-1,c=r.a-n.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,r.r=255&u*r.r+i*n.r+.5,r.g=255&u*r.g+i*n.g+.5,r.b=255&u*r.b+i*n.b+.5,r.a=o*r.a+(1-o)*n.a,this.rgb=r}return this}interpolate(e,s){return e&&(this._rgb=oK(this._rgb,e._rgb,s)),this}clone(){return new qx(this.rgb)}alpha(e){return this._rgb.a=Rh(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=N0(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return qb(this._rgb,2,e),this}darken(e){return qb(this._rgb,2,-e),this}saturate(e){return qb(this._rgb,1,e),this}desaturate(e){return qb(this._rgb,1,-e),this}rotate(e){return eK(this._rgb,e),this}}function nu(){}const cK=(()=>{let a=0;return()=>a++})();function ia(a){return a==null}function Gn(a){if(Array.isArray&&Array.isArray(a))return!0;const e=Object.prototype.toString.call(a);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Sr(a){return a!==null&&Object.prototype.toString.call(a)==="[object Object]"}function Ki(a){return(typeof a=="number"||a instanceof Number)&&isFinite(+a)}function sd(a,e){return Ki(a)?a:e}function fr(a,e){return typeof a>"u"?e:a}const dK=(a,e)=>typeof a=="string"&&a.endsWith("%")?parseFloat(a)/100:+a/e,bI=(a,e)=>typeof a=="string"&&a.endsWith("%")?parseFloat(a)/100*e:+a;function Ma(a,e,s){if(a&&typeof a.call=="function")return a.apply(s,e)}function ua(a,e,s,r){let n,i,o;if(Gn(a))for(i=a.length,n=0;n<i;n++)e.call(s,a[n],n);else if(Sr(a))for(o=Object.keys(a),i=o.length,n=0;n<i;n++)e.call(s,a[o[n]],o[n])}function _v(a,e){let s,r,n,i;if(!a||!e||a.length!==e.length)return!1;for(s=0,r=a.length;s<r;++s)if(n=a[s],i=e[s],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function Cv(a){if(Gn(a))return a.map(Cv);if(Sr(a)){const e=Object.create(null),s=Object.keys(a),r=s.length;let n=0;for(;n<r;++n)e[s[n]]=Cv(a[s[n]]);return e}return a}function yI(a){return["__proto__","prototype","constructor"].indexOf(a)===-1}function uK(a,e,s,r){if(!yI(a))return;const n=e[a],i=s[a];Sr(n)&&Sr(i)?Gx(n,i,r):e[a]=Cv(i)}function Gx(a,e,s){const r=Gn(e)?e:[e],n=r.length;if(!Sr(a))return a;s=s||{};const i=s.merger||uK;let o;for(let l=0;l<n;++l){if(o=r[l],!Sr(o))continue;const c=Object.keys(o);for(let u=0,m=c.length;u<m;++u)i(c[u],a,o,s)}return a}function Bx(a,e){return Gx(a,e,{merger:hK})}function hK(a,e,s){if(!yI(a))return;const r=e[a],n=s[a];Sr(r)&&Sr(n)?Bx(r,n):Object.prototype.hasOwnProperty.call(e,a)||(e[a]=Cv(n))}const QE={"":a=>a,x:a=>a.x,y:a=>a.y};function mK(a){const e=a.split("."),s=[];let r="";for(const n of e)r+=n,r.endsWith("\\")?r=r.slice(0,-1)+".":(s.push(r),r="");return s}function AK(a){const e=mK(a);return s=>{for(const r of e){if(r==="")break;s=s&&s[r]}return s}}function hA(a,e){return(QE[e]||(QE[e]=AK(e)))(a)}function W5(a){return a.charAt(0).toUpperCase()+a.slice(1)}const Wx=a=>typeof a<"u",Gh=a=>typeof a=="function",HE=(a,e)=>{if(a.size!==e.size)return!1;for(const s of a)if(!e.has(s))return!1;return!0};function fK(a){return a.type==="mouseup"||a.type==="click"||a.type==="contextmenu"}const ma=Math.PI,on=2*ma,pK=on+ma,kv=Number.POSITIVE_INFINITY,gK=ma/180,ii=ma/2,km=ma/4,VE=ma*2/3,vI=Math.log10,wd=Math.sign;function Sx(a,e,s){return Math.abs(a-e)<s}function zE(a){const e=Math.round(a);a=Sx(a,e,a/1e3)?e:a;const s=Math.pow(10,Math.floor(vI(a))),r=a/s;return(r<=1?1:r<=2?2:r<=5?5:10)*s}function xK(a){const e=[],s=Math.sqrt(a);let r;for(r=1;r<s;r++)a%r===0&&(e.push(r),e.push(a/r));return s===(s|0)&&e.push(s),e.sort((n,i)=>n-i).pop(),e}function bK(a){return typeof a=="symbol"||typeof a=="object"&&a!==null&&!(Symbol.toPrimitive in a||"toString"in a||"valueOf"in a)}function Yx(a){return!bK(a)&&!isNaN(parseFloat(a))&&isFinite(a)}function yK(a,e){const s=Math.round(a);return s-e<=a&&s+e>=a}function vK(a,e,s){let r,n,i;for(r=0,n=a.length;r<n;r++)i=a[r][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function pu(a){return a*(ma/180)}function wK(a){return a*(180/ma)}function $E(a){if(!Ki(a))return;let e=1,s=0;for(;Math.round(a*e)/e!==a;)e*=10,s++;return s}function wI(a,e){const s=e.x-a.x,r=e.y-a.y,n=Math.sqrt(s*s+r*r);let i=Math.atan2(r,s);return i<-.5*ma&&(i+=on),{angle:i,distance:n}}function u_(a,e){return Math.sqrt(Math.pow(e.x-a.x,2)+Math.pow(e.y-a.y,2))}function NK(a,e){return(a-e+pK)%on-ma}function nl(a){return(a%on+on)%on}function Kx(a,e,s,r){const n=nl(a),i=nl(e),o=nl(s),l=nl(i-n),c=nl(o-n),u=nl(n-i),m=nl(n-o);return n===i||n===o||r&&i===o||l>c&&u<m}function qi(a,e,s){return Math.max(e,Math.min(s,a))}function jK(a){return qi(a,-32768,32767)}function gu(a,e,s,r=1e-6){return a>=Math.min(e,s)-r&&a<=Math.max(e,s)+r}function Y5(a,e,s){s=s||(o=>a[o]<e);let r=a.length-1,n=0,i;for(;r-n>1;)i=n+r>>1,s(i)?n=i:r=i;return{lo:n,hi:r}}const Hm=(a,e,s,r)=>Y5(a,s,r?n=>{const i=a[n][e];return i<s||i===s&&a[n+1][e]===s}:n=>a[n][e]<s),_K=(a,e,s)=>Y5(a,s,r=>a[r][e]>=s);function CK(a,e,s){let r=0,n=a.length;for(;r<n&&a[r]<e;)r++;for(;n>r&&a[n-1]>s;)n--;return r>0||n<a.length?a.slice(r,n):a}const NI=["push","pop","shift","splice","unshift"];function kK(a,e){if(a._chartjs){a._chartjs.listeners.push(e);return}Object.defineProperty(a,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),NI.forEach(s=>{const r="_onData"+W5(s),n=a[s];Object.defineProperty(a,s,{configurable:!0,enumerable:!1,value(...i){const o=n.apply(this,i);return a._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...i)}),o}})})}function qE(a,e){const s=a._chartjs;if(!s)return;const r=s.listeners,n=r.indexOf(e);n!==-1&&r.splice(n,1),!(r.length>0)&&(NI.forEach(i=>{delete a[i]}),delete a._chartjs)}function jI(a){const e=new Set(a);return e.size===a.length?a:Array.from(e)}const _I=(function(){return typeof window>"u"?function(a){return a()}:window.requestAnimationFrame})();function CI(a,e){let s=[],r=!1;return function(...n){s=n,r||(r=!0,_I.call(window,()=>{r=!1,a.apply(e,s)}))}}function BK(a,e){let s;return function(...r){return e?(clearTimeout(s),s=setTimeout(a,e,r)):a.apply(this,r),e}}const K5=a=>a==="start"?"left":a==="end"?"right":"center",zi=(a,e,s)=>a==="start"?e:a==="end"?s:(e+s)/2,SK=(a,e,s,r)=>a===(r?"left":"right")?s:a==="center"?(e+s)/2:e;function EK(a,e,s){const r=e.length;let n=0,i=r;if(a._sorted){const{iScale:o,vScale:l,_parsed:c}=a,u=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null,m=o.axis,{min:A,max:g,minDefined:p,maxDefined:v}=o.getUserBounds();if(p){if(n=Math.min(Hm(c,m,A).lo,s?r:Hm(e,m,o.getPixelForValue(A)).lo),u){const b=c.slice(0,n+1).reverse().findIndex(y=>!ia(y[l.axis]));n-=Math.max(0,b)}n=qi(n,0,r-1)}if(v){let b=Math.max(Hm(c,o.axis,g,!0).hi+1,s?0:Hm(e,m,o.getPixelForValue(g),!0).hi+1);if(u){const y=c.slice(b-1).findIndex(w=>!ia(w[l.axis]));b+=Math.max(0,y)}i=qi(b,n,r)-n}else i=r-n}return{start:n,count:i}}function FK(a){const{xScale:e,yScale:s,_scaleRanges:r}=a,n={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!r)return a._scaleRanges=n,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==s.min||r.ymax!==s.max;return Object.assign(r,n),i}const Gb=a=>a===0||a===1,GE=(a,e,s)=>-(Math.pow(2,10*(a-=1))*Math.sin((a-e)*on/s)),WE=(a,e,s)=>Math.pow(2,-10*a)*Math.sin((a-e)*on/s)+1,Ex={linear:a=>a,easeInQuad:a=>a*a,easeOutQuad:a=>-a*(a-2),easeInOutQuad:a=>(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1),easeInCubic:a=>a*a*a,easeOutCubic:a=>(a-=1)*a*a+1,easeInOutCubic:a=>(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2),easeInQuart:a=>a*a*a*a,easeOutQuart:a=>-((a-=1)*a*a*a-1),easeInOutQuart:a=>(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2),easeInQuint:a=>a*a*a*a*a,easeOutQuint:a=>(a-=1)*a*a*a*a+1,easeInOutQuint:a=>(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2),easeInSine:a=>-Math.cos(a*ii)+1,easeOutSine:a=>Math.sin(a*ii),easeInOutSine:a=>-.5*(Math.cos(ma*a)-1),easeInExpo:a=>a===0?0:Math.pow(2,10*(a-1)),easeOutExpo:a=>a===1?1:-Math.pow(2,-10*a)+1,easeInOutExpo:a=>Gb(a)?a:a<.5?.5*Math.pow(2,10*(a*2-1)):.5*(-Math.pow(2,-10*(a*2-1))+2),easeInCirc:a=>a>=1?a:-(Math.sqrt(1-a*a)-1),easeOutCirc:a=>Math.sqrt(1-(a-=1)*a),easeInOutCirc:a=>(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1),easeInElastic:a=>Gb(a)?a:GE(a,.075,.3),easeOutElastic:a=>Gb(a)?a:WE(a,.075,.3),easeInOutElastic(a){return Gb(a)?a:a<.5?.5*GE(a*2,.1125,.45):.5+.5*WE(a*2-1,.1125,.45)},easeInBack(a){return a*a*((1.70158+1)*a-1.70158)},easeOutBack(a){return(a-=1)*a*((1.70158+1)*a+1.70158)+1},easeInOutBack(a){let e=1.70158;return(a/=.5)<1?.5*(a*a*(((e*=1.525)+1)*a-e)):.5*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)},easeInBounce:a=>1-Ex.easeOutBounce(1-a),easeOutBounce(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInOutBounce:a=>a<.5?Ex.easeInBounce(a*2)*.5:Ex.easeOutBounce(a*2-1)*.5+.5};function X5(a){if(a&&typeof a=="object"){const e=a.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function YE(a){return X5(a)?a:new qx(a)}function PN(a){return X5(a)?a:new qx(a).saturate(.5).darken(.1).hexString()}const DK=["x","y","borderWidth","radius","tension"],TK=["color","borderColor","backgroundColor"];function PK(a){a.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),a.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),a.set("animations",{colors:{type:"color",properties:TK},numbers:{type:"number",properties:DK}}),a.describe("animations",{_fallback:"animation"}),a.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function IK(a){a.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const KE=new Map;function LK(a,e){e=e||{};const s=a+JSON.stringify(e);let r=KE.get(s);return r||(r=new Intl.NumberFormat(a,e),KE.set(s,r)),r}function J5(a,e,s){return LK(e,s).format(a)}const MK={values(a){return Gn(a)?a:""+a},numeric(a,e,s){if(a===0)return"0";const r=this.chart.options.locale;let n,i=a;if(s.length>1){const u=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(u<1e-4||u>1e15)&&(n="scientific"),i=RK(a,s)}const o=vI(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),J5(a,r,c)}};function RK(a,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&a!==Math.floor(a)&&(s=a-Math.floor(a)),s}var kI={formatters:MK};function OK(a){a.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:kI.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),a.route("scale.ticks","color","","color"),a.route("scale.grid","color","","borderColor"),a.route("scale.border","color","","borderColor"),a.route("scale.title","color","","color"),a.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),a.describe("scales",{_fallback:"scale"}),a.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const mA=Object.create(null),h_=Object.create(null);function Fx(a,e){if(!e)return a;const s=e.split(".");for(let r=0,n=s.length;r<n;++r){const i=s[r];a=a[i]||(a[i]=Object.create(null))}return a}function IN(a,e,s){return typeof e=="string"?Gx(Fx(a,e),s):Gx(Fx(a,""),e)}class UK{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,n)=>PN(n.backgroundColor),this.hoverBorderColor=(r,n)=>PN(n.borderColor),this.hoverColor=(r,n)=>PN(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return IN(this,e,s)}get(e){return Fx(this,e)}describe(e,s){return IN(h_,e,s)}override(e,s){return IN(mA,e,s)}route(e,s,r,n){const i=Fx(this,e),o=Fx(this,r),l="_"+s;Object.defineProperties(i,{[l]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[l],u=o[n];return Sr(c)?Object.assign({},u,c):fr(c,u)},set(c){this[l]=c}}})}apply(e){e.forEach(s=>s(this))}}var Dn=new UK({_scriptable:a=>!a.startsWith("on"),_indexable:a=>a!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[PK,IK,OK]);function QK(a){return!a||ia(a.size)||ia(a.family)?null:(a.style?a.style+" ":"")+(a.weight?a.weight+" ":"")+a.size+"px "+a.family}function XE(a,e,s,r,n){let i=e[n];return i||(i=e[n]=a.measureText(n).width,s.push(n)),i>r&&(r=i),r}function Bm(a,e,s){const r=a.currentDevicePixelRatio,n=s!==0?Math.max(s/2,.5):0;return Math.round((e-n)*r)/r+n}function JE(a,e){!e&&!a||(e=e||a.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,a.width,a.height),e.restore())}function m_(a,e,s,r){BI(a,e,s,r,null)}function BI(a,e,s,r,n){let i,o,l,c,u,m,A,g;const p=e.pointStyle,v=e.rotation,b=e.radius;let y=(v||0)*gK;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){a.save(),a.translate(s,r),a.rotate(y),a.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),a.restore();return}if(!(isNaN(b)||b<=0)){switch(a.beginPath(),p){default:n?a.ellipse(s,r,n/2,b,0,0,on):a.arc(s,r,b,0,on),a.closePath();break;case"triangle":m=n?n/2:b,a.moveTo(s+Math.sin(y)*m,r-Math.cos(y)*b),y+=VE,a.lineTo(s+Math.sin(y)*m,r-Math.cos(y)*b),y+=VE,a.lineTo(s+Math.sin(y)*m,r-Math.cos(y)*b),a.closePath();break;case"rectRounded":u=b*.516,c=b-u,o=Math.cos(y+km)*c,A=Math.cos(y+km)*(n?n/2-u:c),l=Math.sin(y+km)*c,g=Math.sin(y+km)*(n?n/2-u:c),a.arc(s-A,r-l,u,y-ma,y-ii),a.arc(s+g,r-o,u,y-ii,y),a.arc(s+A,r+l,u,y,y+ii),a.arc(s-g,r+o,u,y+ii,y+ma),a.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*b,m=n?n/2:c,a.rect(s-m,r-c,2*m,2*c);break}y+=km;case"rectRot":A=Math.cos(y)*(n?n/2:b),o=Math.cos(y)*b,l=Math.sin(y)*b,g=Math.sin(y)*(n?n/2:b),a.moveTo(s-A,r-l),a.lineTo(s+g,r-o),a.lineTo(s+A,r+l),a.lineTo(s-g,r+o),a.closePath();break;case"crossRot":y+=km;case"cross":A=Math.cos(y)*(n?n/2:b),o=Math.cos(y)*b,l=Math.sin(y)*b,g=Math.sin(y)*(n?n/2:b),a.moveTo(s-A,r-l),a.lineTo(s+A,r+l),a.moveTo(s+g,r-o),a.lineTo(s-g,r+o);break;case"star":A=Math.cos(y)*(n?n/2:b),o=Math.cos(y)*b,l=Math.sin(y)*b,g=Math.sin(y)*(n?n/2:b),a.moveTo(s-A,r-l),a.lineTo(s+A,r+l),a.moveTo(s+g,r-o),a.lineTo(s-g,r+o),y+=km,A=Math.cos(y)*(n?n/2:b),o=Math.cos(y)*b,l=Math.sin(y)*b,g=Math.sin(y)*(n?n/2:b),a.moveTo(s-A,r-l),a.lineTo(s+A,r+l),a.moveTo(s+g,r-o),a.lineTo(s-g,r+o);break;case"line":o=n?n/2:Math.cos(y)*b,l=Math.sin(y)*b,a.moveTo(s-o,r-l),a.lineTo(s+o,r+l);break;case"dash":a.moveTo(s,r),a.lineTo(s+Math.cos(y)*(n?n/2:b),r+Math.sin(y)*b);break;case!1:a.closePath();break}a.fill(),e.borderWidth>0&&a.stroke()}}function Xx(a,e,s){return s=s||.5,!e||a&&a.x>e.left-s&&a.x<e.right+s&&a.y>e.top-s&&a.y<e.bottom+s}function Rw(a,e){a.save(),a.beginPath(),a.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),a.clip()}function Ow(a){a.restore()}function HK(a,e,s,r,n){if(!e)return a.lineTo(s.x,s.y);if(n==="middle"){const i=(e.x+s.x)/2;a.lineTo(i,e.y),a.lineTo(i,s.y)}else n==="after"!=!!r?a.lineTo(e.x,s.y):a.lineTo(s.x,e.y);a.lineTo(s.x,s.y)}function VK(a,e,s,r){if(!e)return a.lineTo(s.x,s.y);a.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?s.cp2x:s.cp1x,r?s.cp2y:s.cp1y,s.x,s.y)}function zK(a,e){e.translation&&a.translate(e.translation[0],e.translation[1]),ia(e.rotation)||a.rotate(e.rotation),e.color&&(a.fillStyle=e.color),e.textAlign&&(a.textAlign=e.textAlign),e.textBaseline&&(a.textBaseline=e.textBaseline)}function $K(a,e,s,r,n){if(n.strikethrough||n.underline){const i=a.measureText(r),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=s-i.actualBoundingBoxAscent,u=s+i.actualBoundingBoxDescent,m=n.strikethrough?(c+u)/2:u;a.strokeStyle=a.fillStyle,a.beginPath(),a.lineWidth=n.decorationWidth||2,a.moveTo(o,m),a.lineTo(l,m),a.stroke()}}function qK(a,e){const s=a.fillStyle;a.fillStyle=e.color,a.fillRect(e.left,e.top,e.width,e.height),a.fillStyle=s}function Jx(a,e,s,r,n,i={}){const o=Gn(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(a.save(),a.font=n.string,zK(a,i),c=0;c<o.length;++c)u=o[c],i.backdrop&&qK(a,i.backdrop),l&&(i.strokeColor&&(a.strokeStyle=i.strokeColor),ia(i.strokeWidth)||(a.lineWidth=i.strokeWidth),a.strokeText(u,s,r,i.maxWidth)),a.fillText(u,s,r,i.maxWidth),$K(a,s,r,u,i),r+=Number(n.lineHeight);a.restore()}function Bv(a,e){const{x:s,y:r,w:n,h:i,radius:o}=e;a.arc(s+o.topLeft,r+o.topLeft,o.topLeft,1.5*ma,ma,!0),a.lineTo(s,r+i-o.bottomLeft),a.arc(s+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,ma,ii,!0),a.lineTo(s+n-o.bottomRight,r+i),a.arc(s+n-o.bottomRight,r+i-o.bottomRight,o.bottomRight,ii,0,!0),a.lineTo(s+n,r+o.topRight),a.arc(s+n-o.topRight,r+o.topRight,o.topRight,0,-ii,!0),a.lineTo(s+o.topLeft,r)}const GK=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,WK=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function YK(a,e){const s=(""+a).match(GK);if(!s||s[1]==="normal")return e*1.2;switch(a=+s[2],s[3]){case"px":return a;case"%":a/=100;break}return e*a}const KK=a=>+a||0;function Z5(a,e){const s={},r=Sr(e),n=r?Object.keys(e):e,i=Sr(a)?r?o=>fr(a[o],a[e[o]]):o=>a[o]:()=>a;for(const o of n)s[o]=KK(i(o));return s}function SI(a){return Z5(a,{top:"y",right:"x",bottom:"y",left:"x"})}function ip(a){return Z5(a,["topLeft","topRight","bottomLeft","bottomRight"])}function zl(a){const e=SI(a);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Gi(a,e){a=a||{},e=e||Dn.font;let s=fr(a.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let r=fr(a.style,e.style);r&&!(""+r).match(WK)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const n={family:fr(a.family,e.family),lineHeight:YK(fr(a.lineHeight,e.lineHeight),s),size:s,style:r,weight:fr(a.weight,e.weight),string:""};return n.string=QK(n),n}function Wb(a,e,s,r){let n,i,o;for(n=0,i=a.length;n<i;++n)if(o=a[n],o!==void 0&&o!==void 0)return o}function XK(a,e,s){const{min:r,max:n}=a,i=bI(e,(n-r)/2),o=(l,c)=>s&&l===0?0:l+c;return{min:o(r,-Math.abs(i)),max:o(n,i)}}function jA(a,e){return Object.assign(Object.create(a),e)}function eC(a,e=[""],s,r,n=()=>a[0]){const i=s||a;typeof r>"u"&&(r=TI("_fallback",a));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:a,_rootScopes:i,_fallback:r,_getTarget:n,override:l=>eC([l,...a],e,i,r)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete a[0][c],!0},get(l,c){return FI(l,c,()=>nX(c,e,a,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(a[0])},has(l,c){return e3(l).includes(c)},ownKeys(l){return e3(l)},set(l,c,u){const m=l._storage||(l._storage=n());return l[c]=m[c]=u,delete l._keys,!0}})}function xp(a,e,s,r){const n={_cacheable:!1,_proxy:a,_context:e,_subProxy:s,_stack:new Set,_descriptors:EI(a,r),setContext:i=>xp(a,i,s,r),override:i=>xp(a.override(i),e,s,r)};return new Proxy(n,{deleteProperty(i,o){return delete i[o],delete a[o],!0},get(i,o,l){return FI(i,o,()=>ZK(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(a,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(a,o)},getPrototypeOf(){return Reflect.getPrototypeOf(a)},has(i,o){return Reflect.has(a,o)},ownKeys(){return Reflect.ownKeys(a)},set(i,o,l){return a[o]=l,delete i[o],!0}})}function EI(a,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:r=e.indexable,_allKeys:n=e.allKeys}=a;return{allKeys:n,scriptable:s,indexable:r,isScriptable:Gh(s)?s:()=>s,isIndexable:Gh(r)?r:()=>r}}const JK=(a,e)=>a?a+W5(e):e,tC=(a,e)=>Sr(e)&&a!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function FI(a,e,s){if(Object.prototype.hasOwnProperty.call(a,e)||e==="constructor")return a[e];const r=s();return a[e]=r,r}function ZK(a,e,s){const{_proxy:r,_context:n,_subProxy:i,_descriptors:o}=a;let l=r[e];return Gh(l)&&o.isScriptable(e)&&(l=eX(e,l,a,s)),Gn(l)&&l.length&&(l=tX(e,l,a,o.isIndexable)),tC(e,l)&&(l=xp(l,n,i&&i[e],o)),l}function eX(a,e,s,r){const{_proxy:n,_context:i,_subProxy:o,_stack:l}=s;if(l.has(a))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+a);l.add(a);let c=e(i,o||r);return l.delete(a),tC(a,c)&&(c=sC(n._scopes,n,a,c)),c}function tX(a,e,s,r){const{_proxy:n,_context:i,_subProxy:o,_descriptors:l}=s;if(typeof i.index<"u"&&r(a))return e[i.index%e.length];if(Sr(e[0])){const c=e,u=n._scopes.filter(m=>m!==c);e=[];for(const m of c){const A=sC(u,n,a,m);e.push(xp(A,i,o&&o[a],l))}}return e}function DI(a,e,s){return Gh(a)?a(e,s):a}const sX=(a,e)=>a===!0?e:typeof a=="string"?hA(e,a):void 0;function rX(a,e,s,r,n){for(const i of e){const o=sX(s,i);if(o){a.add(o);const l=DI(o._fallback,s,n);if(typeof l<"u"&&l!==s&&l!==r)return l}else if(o===!1&&typeof r<"u"&&s!==r)return null}return!1}function sC(a,e,s,r){const n=e._rootScopes,i=DI(e._fallback,s,r),o=[...a,...n],l=new Set;l.add(r);let c=ZE(l,o,s,i||s,r);return c===null||typeof i<"u"&&i!==s&&(c=ZE(l,o,i,c,r),c===null)?!1:eC(Array.from(l),[""],n,i,()=>aX(e,s,r))}function ZE(a,e,s,r,n){for(;s;)s=rX(a,e,s,r,n);return s}function aX(a,e,s){const r=a._getTarget();e in r||(r[e]={});const n=r[e];return Gn(n)&&Sr(s)?s:n||{}}function nX(a,e,s,r){let n;for(const i of e)if(n=TI(JK(i,a),s),typeof n<"u")return tC(a,n)?sC(s,r,a,n):n}function TI(a,e){for(const s of e){if(!s)continue;const r=s[a];if(typeof r<"u")return r}}function e3(a){let e=a._keys;return e||(e=a._keys=iX(a._scopes)),e}function iX(a){const e=new Set;for(const s of a)for(const r of Object.keys(s).filter(n=>!n.startsWith("_")))e.add(r);return Array.from(e)}const oX=Number.EPSILON||1e-14,bp=(a,e)=>e<a.length&&!a[e].skip&&a[e],PI=a=>a==="x"?"y":"x";function lX(a,e,s,r){const n=a.skip?e:a,i=e,o=s.skip?e:s,l=u_(i,n),c=u_(o,i);let u=l/(l+c),m=c/(l+c);u=isNaN(u)?0:u,m=isNaN(m)?0:m;const A=r*u,g=r*m;return{previous:{x:i.x-A*(o.x-n.x),y:i.y-A*(o.y-n.y)},next:{x:i.x+g*(o.x-n.x),y:i.y+g*(o.y-n.y)}}}function cX(a,e,s){const r=a.length;let n,i,o,l,c,u=bp(a,0);for(let m=0;m<r-1;++m)if(c=u,u=bp(a,m+1),!(!c||!u)){if(Sx(e[m],0,oX)){s[m]=s[m+1]=0;continue}n=s[m]/e[m],i=s[m+1]/e[m],l=Math.pow(n,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),s[m]=n*o*e[m],s[m+1]=i*o*e[m])}}function dX(a,e,s="x"){const r=PI(s),n=a.length;let i,o,l,c=bp(a,0);for(let u=0;u<n;++u){if(o=l,l=c,c=bp(a,u+1),!l)continue;const m=l[s],A=l[r];o&&(i=(m-o[s])/3,l[`cp1${s}`]=m-i,l[`cp1${r}`]=A-i*e[u]),c&&(i=(c[s]-m)/3,l[`cp2${s}`]=m+i,l[`cp2${r}`]=A+i*e[u])}}function uX(a,e="x"){const s=PI(e),r=a.length,n=Array(r).fill(0),i=Array(r);let o,l,c,u=bp(a,0);for(o=0;o<r;++o)if(l=c,c=u,u=bp(a,o+1),!!c){if(u){const m=u[e]-c[e];n[o]=m!==0?(u[s]-c[s])/m:0}i[o]=l?u?wd(n[o-1])!==wd(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}cX(a,n,i),dX(a,i,e)}function Yb(a,e,s){return Math.max(Math.min(a,s),e)}function hX(a,e){let s,r,n,i,o,l=Xx(a[0],e);for(s=0,r=a.length;s<r;++s)o=i,i=l,l=s<r-1&&Xx(a[s+1],e),i&&(n=a[s],o&&(n.cp1x=Yb(n.cp1x,e.left,e.right),n.cp1y=Yb(n.cp1y,e.top,e.bottom)),l&&(n.cp2x=Yb(n.cp2x,e.left,e.right),n.cp2y=Yb(n.cp2y,e.top,e.bottom)))}function mX(a,e,s,r,n){let i,o,l,c;if(e.spanGaps&&(a=a.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")uX(a,n);else{let u=r?a[a.length-1]:a[0];for(i=0,o=a.length;i<o;++i)l=a[i],c=lX(u,l,a[Math.min(i+1,o-(r?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}e.capBezierPoints&&hX(a,s)}function rC(){return typeof window<"u"&&typeof document<"u"}function aC(a){let e=a.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Sv(a,e,s){let r;return typeof a=="string"?(r=parseInt(a,10),a.indexOf("%")!==-1&&(r=r/100*e.parentNode[s])):r=a,r}const Uw=a=>a.ownerDocument.defaultView.getComputedStyle(a,null);function AX(a,e){return Uw(a).getPropertyValue(e)}const fX=["top","right","bottom","left"];function Xm(a,e,s){const r={};s=s?"-"+s:"";for(let n=0;n<4;n++){const i=fX[n];r[i]=parseFloat(a[e+"-"+i+s])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const pX=(a,e,s)=>(a>0||e>0)&&(!s||!s.shadowRoot);function gX(a,e){const s=a.touches,r=s&&s.length?s[0]:a,{offsetX:n,offsetY:i}=r;let o=!1,l,c;if(pX(n,i,a.target))l=n,c=i;else{const u=e.getBoundingClientRect();l=r.clientX-u.left,c=r.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function Im(a,e){if("native"in a)return a;const{canvas:s,currentDevicePixelRatio:r}=e,n=Uw(s),i=n.boxSizing==="border-box",o=Xm(n,"padding"),l=Xm(n,"border","width"),{x:c,y:u,box:m}=gX(a,s),A=o.left+(m&&l.left),g=o.top+(m&&l.top);let{width:p,height:v}=e;return i&&(p-=o.width+l.width,v-=o.height+l.height),{x:Math.round((c-A)/p*s.width/r),y:Math.round((u-g)/v*s.height/r)}}function xX(a,e,s){let r,n;if(e===void 0||s===void 0){const i=a&&aC(a);if(!i)e=a.clientWidth,s=a.clientHeight;else{const o=i.getBoundingClientRect(),l=Uw(i),c=Xm(l,"border","width"),u=Xm(l,"padding");e=o.width-u.width-c.width,s=o.height-u.height-c.height,r=Sv(l.maxWidth,i,"clientWidth"),n=Sv(l.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:r||kv,maxHeight:n||kv}}const Fh=a=>Math.round(a*10)/10;function bX(a,e,s,r){const n=Uw(a),i=Xm(n,"margin"),o=Sv(n.maxWidth,a,"clientWidth")||kv,l=Sv(n.maxHeight,a,"clientHeight")||kv,c=xX(a,e,s);let{width:u,height:m}=c;if(n.boxSizing==="content-box"){const g=Xm(n,"border","width"),p=Xm(n,"padding");u-=p.width+g.width,m-=p.height+g.height}return u=Math.max(0,u-i.width),m=Math.max(0,r?u/r:m-i.height),u=Fh(Math.min(u,o,c.maxWidth)),m=Fh(Math.min(m,l,c.maxHeight)),u&&!m&&(m=Fh(u/2)),(e!==void 0||s!==void 0)&&r&&c.height&&m>c.height&&(m=c.height,u=Fh(Math.floor(m*r))),{width:u,height:m}}function t3(a,e,s){const r=e||1,n=Fh(a.height*r),i=Fh(a.width*r);a.height=Fh(a.height),a.width=Fh(a.width);const o=a.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height=`${a.height}px`,o.style.width=`${a.width}px`),a.currentDevicePixelRatio!==r||o.height!==n||o.width!==i?(a.currentDevicePixelRatio=r,o.height=n,o.width=i,a.ctx.setTransform(r,0,0,r,0,0),!0):!1}const yX=(function(){let a=!1;try{const e={get passive(){return a=!0,!1}};rC()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return a})();function s3(a,e){const s=AX(a,e),r=s&&s.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Lm(a,e,s,r){return{x:a.x+s*(e.x-a.x),y:a.y+s*(e.y-a.y)}}function vX(a,e,s,r){return{x:a.x+s*(e.x-a.x),y:r==="middle"?s<.5?a.y:e.y:r==="after"?s<1?a.y:e.y:s>0?e.y:a.y}}function wX(a,e,s,r){const n={x:a.cp2x,y:a.cp2y},i={x:e.cp1x,y:e.cp1y},o=Lm(a,n,s),l=Lm(n,i,s),c=Lm(i,e,s),u=Lm(o,l,s),m=Lm(l,c,s);return Lm(u,m,s)}const NX=function(a,e){return{x(s){return a+a+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,r){return s-r},leftForLtr(s,r){return s-r}}},jX=function(){return{x(a){return a},setWidth(a){},textAlign(a){return a},xPlus(a,e){return a+e},leftForLtr(a,e){return a}}};function op(a,e,s){return a?NX(e,s):jX()}function II(a,e){let s,r;(e==="ltr"||e==="rtl")&&(s=a.canvas.style,r=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),a.prevTextDirection=r)}function LI(a,e){e!==void 0&&(delete a.prevTextDirection,a.canvas.style.setProperty("direction",e[0],e[1]))}function MI(a){return a==="angle"?{between:Kx,compare:NK,normalize:nl}:{between:gu,compare:(e,s)=>e-s,normalize:e=>e}}function r3({start:a,end:e,count:s,loop:r,style:n}){return{start:a%s,end:e%s,loop:r&&(e-a+1)%s===0,style:n}}function _X(a,e,s){const{property:r,start:n,end:i}=s,{between:o,normalize:l}=MI(r),c=e.length;let{start:u,end:m,loop:A}=a,g,p;if(A){for(u+=c,m+=c,g=0,p=c;g<p&&o(l(e[u%c][r]),n,i);++g)u--,m--;u%=c,m%=c}return m<u&&(m+=c),{start:u,end:m,loop:A,style:a.style}}function RI(a,e,s){if(!s)return[a];const{property:r,start:n,end:i}=s,o=e.length,{compare:l,between:c,normalize:u}=MI(r),{start:m,end:A,loop:g,style:p}=_X(a,e,s),v=[];let b=!1,y=null,w,B,j;const E=()=>c(n,j,w)&&l(n,j)!==0,S=()=>l(i,w)===0||c(i,j,w),T=()=>b||E(),M=()=>!b||S();for(let D=m,P=m;D<=A;++D)B=e[D%o],!B.skip&&(w=u(B[r]),w!==j&&(b=c(w,n,i),y===null&&T()&&(y=l(w,n)===0?D:P),y!==null&&M()&&(v.push(r3({start:y,end:D,loop:g,count:o,style:p})),y=null),P=D,j=w));return y!==null&&v.push(r3({start:y,end:A,loop:g,count:o,style:p})),v}function OI(a,e){const s=[],r=a.segments;for(let n=0;n<r.length;n++){const i=RI(r[n],a.points,e);i.length&&s.push(...i)}return s}function CX(a,e,s,r){let n=0,i=e-1;if(s&&!r)for(;n<e&&!a[n].skip;)n++;for(;n<e&&a[n].skip;)n++;for(n%=e,s&&(i+=n);i>n&&a[i%e].skip;)i--;return i%=e,{start:n,end:i}}function kX(a,e,s,r){const n=a.length,i=[];let o=e,l=a[e],c;for(c=e+1;c<=s;++c){const u=a[c%n];u.skip||u.stop?l.skip||(r=!1,i.push({start:e%n,end:(c-1)%n,loop:r}),e=o=u.stop?c:null):(o=c,l.skip&&(e=c)),l=u}return o!==null&&i.push({start:e%n,end:o%n,loop:r}),i}function BX(a,e){const s=a.points,r=a.options.spanGaps,n=s.length;if(!n)return[];const i=!!a._loop,{start:o,end:l}=CX(s,n,i,r);if(r===!0)return a3(a,[{start:o,end:l,loop:i}],s,e);const c=l<o?l+n:l,u=!!a._fullLoop&&o===0&&l===n-1;return a3(a,kX(s,o,c,u),s,e)}function a3(a,e,s,r){return!r||!r.setContext||!s?e:SX(a,e,s,r)}function SX(a,e,s,r){const n=a._chart.getContext(),i=n3(a.options),{_datasetIndex:o,options:{spanGaps:l}}=a,c=s.length,u=[];let m=i,A=e[0].start,g=A;function p(v,b,y,w){const B=l?-1:1;if(v!==b){for(v+=c;s[v%c].skip;)v-=B;for(;s[b%c].skip;)b+=B;v%c!==b%c&&(u.push({start:v%c,end:b%c,loop:y,style:w}),m=w,A=b%c)}}for(const v of e){A=l?A:v.start;let b=s[A%c],y;for(g=A+1;g<=v.end;g++){const w=s[g%c];y=n3(r.setContext(jA(n,{type:"segment",p0:b,p1:w,p0DataIndex:(g-1)%c,p1DataIndex:g%c,datasetIndex:o}))),EX(y,m)&&p(A,g-1,v.loop,m),b=w,m=y}A<g-1&&p(A,g-1,v.loop,m)}return u}function n3(a){return{backgroundColor:a.backgroundColor,borderCapStyle:a.borderCapStyle,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderJoinStyle:a.borderJoinStyle,borderWidth:a.borderWidth,borderColor:a.borderColor}}function EX(a,e){if(!e)return!1;const s=[],r=function(n,i){return X5(i)?(s.includes(i)||s.push(i),s.indexOf(i)):i};return JSON.stringify(a,r)!==JSON.stringify(e,r)}function Kb(a,e,s){return a.options.clip?a[s]:e[s]}function FX(a,e){const{xScale:s,yScale:r}=a;return s&&r?{left:Kb(s,e,"left"),right:Kb(s,e,"right"),top:Kb(r,e,"top"),bottom:Kb(r,e,"bottom")}:e}function UI(a,e){const s=e._clip;if(s.disabled)return!1;const r=FX(e,a.chartArea);return{left:s.left===!1?0:r.left-(s.left===!0?0:s.left),right:s.right===!1?a.width:r.right+(s.right===!0?0:s.right),top:s.top===!1?0:r.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?a.height:r.bottom+(s.bottom===!0?0:s.bottom)}}class DX{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,r,n){const i=s.listeners[n],o=s.duration;i.forEach(l=>l({chart:e,initial:s.initial,numSteps:o,currentStep:Math.min(r-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=_I.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((r,n)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(n.draw(),this._notify(n,r,e,"progress")),i.length||(r.running=!1,this._notify(n,r,e,"complete"),r.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let r=s.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,r)),r}listen(e,s,r){this._getAnims(e).listeners[s].push(r)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((r,n)=>Math.max(r,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const r=s.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var cu=new DX;const i3="transparent",TX={boolean(a,e,s){return s>.5?e:a},color(a,e,s){const r=YE(a||i3),n=r.valid&&YE(e||i3);return n&&n.valid?n.mix(r,s).hexString():e},number(a,e,s){return a+(e-a)*s}};class PX{constructor(e,s,r,n){const i=s[r];n=Wb([e.to,n,i,e.from]);const o=Wb([e.from,i,n]);this._active=!0,this._fn=e.fn||TX[e.type||typeof o],this._easing=Ex[e.easing]||Ex.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=r,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(e,s,r){if(this._active){this._notify(!1);const n=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Wb([e.to,s,n,e.from]),this._from=Wb([e.from,n,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,r=this._duration,n=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||s<r),!this._active){this._target[n]=l,this._notify(!0);return}if(s<0){this._target[n]=i;return}c=s/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,r)=>{e.push({res:s,rej:r})})}_notify(e){const s=e?"res":"rej",r=this._promises||[];for(let n=0;n<r.length;n++)r[n][s]()}}class QI{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!Sr(e))return;const s=Object.keys(Dn.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const i=e[n];if(!Sr(i))return;const o={};for(const l of s)o[l]=i[l];(Gn(i.properties)&&i.properties||[n]).forEach(l=>{(l===n||!r.has(l))&&r.set(l,o)})})}_animateOptions(e,s){const r=s.options,n=LX(e,r);if(!n)return[];const i=this._createAnimations(n,r);return r.$shared&&IX(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,s){const r=this._properties,n=[],i=e.$animations||(e.$animations={}),o=Object.keys(s),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){n.push(...this._animateOptions(e,s));continue}const m=s[u];let A=i[u];const g=r.get(u);if(A)if(g&&A.active()){A.update(g,m,l);continue}else A.cancel();if(!g||!g.duration){e[u]=m;continue}i[u]=A=new PX(g,e,u,m),n.push(A)}return n}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const r=this._createAnimations(e,s);if(r.length)return cu.add(this._chart,r),!0}}function IX(a,e){const s=[],r=Object.keys(e);for(let n=0;n<r.length;n++){const i=a[r[n]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function LX(a,e){if(!e)return;let s=a.options;if(!s){a.options=e;return}return s.$shared&&(a.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function o3(a,e){const s=a&&a.options||{},r=s.reverse,n=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:r?i:n,end:r?n:i}}function MX(a,e,s){if(s===!1)return!1;const r=o3(a,s),n=o3(e,s);return{top:n.end,right:r.end,bottom:n.start,left:r.start}}function RX(a){let e,s,r,n;return Sr(a)?(e=a.top,s=a.right,r=a.bottom,n=a.left):e=s=r=n=a,{top:e,right:s,bottom:r,left:n,disabled:a===!1}}function HI(a,e){const s=[],r=a._getSortedDatasetMetas(e);let n,i;for(n=0,i=r.length;n<i;++n)s.push(r[n].index);return s}function l3(a,e,s,r={}){const n=a.keys,i=r.mode==="single";let o,l,c,u;if(e===null)return;let m=!1;for(o=0,l=n.length;o<l;++o){if(c=+n[o],c===s){if(m=!0,r.all)continue;break}u=a.values[c],Ki(u)&&(i||e===0||wd(e)===wd(u))&&(e+=u)}return!m&&!r.all?0:e}function OX(a,e){const{iScale:s,vScale:r}=e,n=s.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(a),l=new Array(o.length);let c,u,m;for(c=0,u=o.length;c<u;++c)m=o[c],l[c]={[n]:m,[i]:a[m]};return l}function LN(a,e){const s=a&&a.options.stacked;return s||s===void 0&&e.stack!==void 0}function UX(a,e,s){return`${a.id}.${e.id}.${s.stack||s.type}`}function QX(a){const{min:e,max:s,minDefined:r,maxDefined:n}=a.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:n?s:Number.POSITIVE_INFINITY}}function HX(a,e,s){const r=a[e]||(a[e]={});return r[s]||(r[s]={})}function c3(a,e,s,r){for(const n of e.getMatchingVisibleMetas(r).reverse()){const i=a[n.index];if(s&&i>0||!s&&i<0)return n.index}return null}function d3(a,e){const{chart:s,_cachedMeta:r}=a,n=s._stacks||(s._stacks={}),{iScale:i,vScale:o,index:l}=r,c=i.axis,u=o.axis,m=UX(i,o,r),A=e.length;let g;for(let p=0;p<A;++p){const v=e[p],{[c]:b,[u]:y}=v,w=v._stacks||(v._stacks={});g=w[u]=HX(n,m,b),g[l]=y,g._top=c3(g,o,!0,r.type),g._bottom=c3(g,o,!1,r.type);const B=g._visualValues||(g._visualValues={});B[l]=y}}function MN(a,e){const s=a.scales;return Object.keys(s).filter(r=>s[r].axis===e).shift()}function VX(a,e){return jA(a,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function zX(a,e,s){return jA(a,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function zg(a,e){const s=a.controller.index,r=a.vScale&&a.vScale.axis;if(r){e=e||a._parsed;for(const n of e){const i=n._stacks;if(!i||i[r]===void 0||i[r][s]===void 0)return;delete i[r][s],i[r]._visualValues!==void 0&&i[r]._visualValues[s]!==void 0&&delete i[r]._visualValues[s]}}}const RN=a=>a==="reset"||a==="none",u3=(a,e)=>e?a:Object.assign({},a),$X=(a,e,s)=>a&&!e.hidden&&e._stacked&&{keys:HI(s,!0),values:null};class Qw{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=LN(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&zg(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,r=this.getDataset(),n=(A,g,p,v)=>A==="x"?g:A==="r"?v:p,i=s.xAxisID=fr(r.xAxisID,MN(e,"x")),o=s.yAxisID=fr(r.yAxisID,MN(e,"y")),l=s.rAxisID=fr(r.rAxisID,MN(e,"r")),c=s.indexAxis,u=s.iAxisID=n(c,i,o,l),m=s.vAxisID=n(c,o,i,l);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(u),s.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&qE(this._data,this),e._stacked&&zg(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),r=this._data;if(Sr(s)){const n=this._cachedMeta;this._data=OX(s,n)}else if(r!==s){if(r){qE(r,this);const n=this._cachedMeta;zg(n),n._parsed=[]}s&&Object.isExtensible(s)&&kK(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const i=s._stacked;s._stacked=LN(s.vScale,s),s.stack!==r.stack&&(n=!0,zg(s),s.stack=r.stack),this._resyncElements(e),(n||i!==s._stacked)&&(d3(this,s._parsed),s._stacked=LN(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:r,_data:n}=this,{iScale:i,_stacked:o}=r,l=i.axis;let c=e===0&&s===n.length?!0:r._sorted,u=e>0&&r._parsed[e-1],m,A,g;if(this._parsing===!1)r._parsed=n,r._sorted=!0,g=n;else{Gn(n[e])?g=this.parseArrayData(r,n,e,s):Sr(n[e])?g=this.parseObjectData(r,n,e,s):g=this.parsePrimitiveData(r,n,e,s);const p=()=>A[l]===null||u&&A[l]<u[l];for(m=0;m<s;++m)r._parsed[m+e]=A=g[m],c&&(p()&&(c=!1),u=A);r._sorted=c}o&&d3(this,g)}parsePrimitiveData(e,s,r,n){const{iScale:i,vScale:o}=e,l=i.axis,c=o.axis,u=i.getLabels(),m=i===o,A=new Array(n);let g,p,v;for(g=0,p=n;g<p;++g)v=g+r,A[g]={[l]:m||i.parse(u[v],v),[c]:o.parse(s[v],v)};return A}parseArrayData(e,s,r,n){const{xScale:i,yScale:o}=e,l=new Array(n);let c,u,m,A;for(c=0,u=n;c<u;++c)m=c+r,A=s[m],l[c]={x:i.parse(A[0],m),y:o.parse(A[1],m)};return l}parseObjectData(e,s,r,n){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(n);let m,A,g,p;for(m=0,A=n;m<A;++m)g=m+r,p=s[g],u[m]={x:i.parse(hA(p,l),g),y:o.parse(hA(p,c),g)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,r){const n=this.chart,i=this._cachedMeta,o=s[e.axis],l={keys:HI(n,!0),values:s._stacks[e.axis]._visualValues};return l3(l,o,i.index,{mode:r})}updateRangeFromParsed(e,s,r,n){const i=r[s.axis];let o=i===null?NaN:i;const l=n&&r._stacks[s.axis];n&&l&&(n.values=l,o=l3(n,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,s){const r=this._cachedMeta,n=r._parsed,i=r._sorted&&e===r.iScale,o=n.length,l=this._getOtherScale(e),c=$X(s,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:A}=QX(l);let g,p;function v(){p=n[g];const b=p[l.axis];return!Ki(p[e.axis])||m>b||A<b}for(g=0;g<o&&!(!v()&&(this.updateRangeFromParsed(u,e,p,c),i));++g);if(i){for(g=o-1;g>=0;--g)if(!v()){this.updateRangeFromParsed(u,e,p,c);break}}return u}getAllParsedValues(e){const s=this._cachedMeta._parsed,r=[];let n,i,o;for(n=0,i=s.length;n<i;++n)o=s[n][e.axis],Ki(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,r=s.iScale,n=s.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=RX(fr(this.options.clip,MX(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,r=this._cachedMeta,n=r.data||[],i=s.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||n.length-l,u=this.options.drawActiveElementsOnTop;let m;for(r.dataset&&r.dataset.draw(e,i,l,c),m=l;m<l+c;++m){const A=n[m];A.hidden||(A.active&&u?o.push(A):A.draw(e,i))}for(m=0;m<o.length;++m)o[m].draw(e,i)}getStyle(e,s){const r=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,s,r){const n=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=zX(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=n.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=VX(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",r){const n=s==="active",i=this._cachedDataOpts,o=e+"-"+s,l=i[o],c=this.enableOptionSharing&&Wx(r);if(l)return u3(l,c);const u=this.chart.config,m=u.datasetElementScopeKeys(this._type,e),A=n?[`${e}Hover`,"hover",e,""]:[e,""],g=u.getOptionScopes(this.getDataset(),m),p=Object.keys(Dn.elements[e]),v=()=>this.getContext(r,n,s),b=u.resolveNamedOptions(g,p,v,A);return b.$shared&&(b.$shared=c,i[o]=Object.freeze(u3(b,c))),b}_resolveAnimations(e,s,r){const n=this.chart,i=this._cachedDataOpts,o=`animation-${s}`,l=i[o];if(l)return l;let c;if(n.options.animation!==!1){const m=this.chart.config,A=m.datasetAnimationScopeKeys(this._type,s),g=m.getOptionScopes(this.getDataset(),A);c=m.createResolver(g,this.getContext(e,r,s))}const u=new QI(n,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||RN(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const r=this.resolveDataElementOptions(e,s),n=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(s,i)||i!==n;return this.updateSharedOptions(i,s,r),{sharedOptions:i,includeOptions:o}}updateElement(e,s,r,n){RN(n)?Object.assign(e,r):this._resolveAnimations(s,n).update(e,r)}updateSharedOptions(e,s,r){e&&!RN(s)&&this._resolveAnimations(void 0,s).update(e,r)}_setStyle(e,s,r,n){e.active=n;const i=this.getStyle(s,n);this._resolveAnimations(s,r,n).update(e,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,s,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,r=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const n=r.length,i=s.length,o=Math.min(i,n);o&&this.parse(0,o),i>n?this._insertElements(n,i-n,e):i<n&&this._removeElements(i,n-i)}_insertElements(e,s,r=!0){const n=this._cachedMeta,i=n.data,o=e+s;let l;const c=u=>{for(u.length+=s,l=u.length-1;l>=o;l--)u[l]=u[l-s]};for(c(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(n._parsed),this.parse(e,s),r&&this.updateElements(i,e,s,"reset")}updateElements(e,s,r,n){}_removeElements(e,s){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(e,s);r._stacked&&zg(r,n)}r.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,r,n]=e;this[s](r,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function qX(a,e){if(!a._cache.$bar){const s=a.getMatchingVisibleMetas(e);let r=[];for(let n=0,i=s.length;n<i;n++)r=r.concat(s[n].controller.getAllParsedValues(a));a._cache.$bar=jI(r.sort((n,i)=>n-i))}return a._cache.$bar}function GX(a){const e=a.iScale,s=qX(e,a.type);let r=e._length,n,i,o,l;const c=()=>{o===32767||o===-32768||(Wx(l)&&(r=Math.min(r,Math.abs(o-l)||r)),l=o)};for(n=0,i=s.length;n<i;++n)o=e.getPixelForValue(s[n]),c();for(l=void 0,n=0,i=e.ticks.length;n<i;++n)o=e.getPixelForTick(n),c();return r}function WX(a,e,s,r){const n=s.barThickness;let i,o;return ia(n)?(i=e.min*s.categoryPercentage,o=s.barPercentage):(i=n*r,o=1),{chunk:i/r,ratio:o,start:e.pixels[a]-i/2}}function YX(a,e,s,r){const n=e.pixels,i=n[a];let o=a>0?n[a-1]:null,l=a<n.length-1?n[a+1]:null;const c=s.categoryPercentage;o===null&&(o=i-(l===null?e.end-e.start:l-i)),l===null&&(l=i+i-o);const u=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/r,ratio:s.barPercentage,start:u}}function KX(a,e,s,r){const n=s.parse(a[0],r),i=s.parse(a[1],r),o=Math.min(n,i),l=Math.max(n,i);let c=o,u=l;Math.abs(o)>Math.abs(l)&&(c=l,u=o),e[s.axis]=u,e._custom={barStart:c,barEnd:u,start:n,end:i,min:o,max:l}}function VI(a,e,s,r){return Gn(a)?KX(a,e,s,r):e[s.axis]=s.parse(a,r),e}function h3(a,e,s,r){const n=a.iScale,i=a.vScale,o=n.getLabels(),l=n===i,c=[];let u,m,A,g;for(u=s,m=s+r;u<m;++u)g=e[u],A={},A[n.axis]=l||n.parse(o[u],u),c.push(VI(g,A,i,u));return c}function ON(a){return a&&a.barStart!==void 0&&a.barEnd!==void 0}function XX(a,e,s){return a!==0?wd(a):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function JX(a){let e,s,r,n,i;return a.horizontal?(e=a.base>a.x,s="left",r="right"):(e=a.base<a.y,s="bottom",r="top"),e?(n="end",i="start"):(n="start",i="end"),{start:s,end:r,reverse:e,top:n,bottom:i}}function ZX(a,e,s,r){let n=e.borderSkipped;const i={};if(!n){a.borderSkipped=i;return}if(n===!0){a.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:u,bottom:m}=JX(a);n==="middle"&&s&&(a.enableBorderRadius=!0,(s._top||0)===r?n=u:(s._bottom||0)===r?n=m:(i[m3(m,o,l,c)]=!0,n=u)),i[m3(n,o,l,c)]=!0,a.borderSkipped=i}function m3(a,e,s,r){return r?(a=eJ(a,e,s),a=A3(a,s,e)):a=A3(a,e,s),a}function eJ(a,e,s){return a===e?s:a===s?e:a}function A3(a,e,s){return a==="start"?e:a==="end"?s:a}function tJ(a,{inflateAmount:e},s){a.inflateAmount=e==="auto"?s===1?.33:0:e}class sJ extends Qw{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,s,r,n){return h3(e,s,r,n)}parseArrayData(e,s,r,n){return h3(e,s,r,n)}parseObjectData(e,s,r,n){const{iScale:i,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=i.axis==="x"?l:c,m=o.axis==="x"?l:c,A=[];let g,p,v,b;for(g=r,p=r+n;g<p;++g)b=s[g],v={},v[i.axis]=i.parse(hA(b,u),g),A.push(VI(hA(b,m),v,o,g));return A}updateRangeFromParsed(e,s,r,n){super.updateRangeFromParsed(e,s,r,n);const i=r._custom;i&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:r,vScale:n}=s,i=this.getParsed(e),o=i._custom,l=ON(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,r,n){const i=n==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),m=this._getRuler(),{sharedOptions:A,includeOptions:g}=this._getSharedOptions(s,n);for(let p=s;p<s+r;p++){const v=this.getParsed(p),b=i||ia(v[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,m),w=(v._stacks||{})[l.axis],B={horizontal:u,base:b.base,enableBorderRadius:!w||ON(v._custom)||o===w._top||o===w._bottom,x:u?b.head:y.center,y:u?y.center:b.head,height:u?y.size:Math.abs(b.size),width:u?Math.abs(b.size):y.size};g&&(B.options=A||this.resolveDataElementOptions(p,e[p].active?"active":n));const j=B.options||e[p].options;ZX(B,j,w,o),tJ(B,j,m.ratio),this.updateElement(e[p],p,B,n)}}_getStacks(e,s){const{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),i=r.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(s),c=l&&l[r.axis],u=m=>{const A=m._parsed.find(p=>p[r.axis]===c),g=A&&A[m.vScale.axis];if(ia(g)||isNaN(g))return!0};for(const m of n)if(!(s!==void 0&&u(m))&&((i===!1||o.indexOf(m.stack)===-1||i===void 0&&m.stack===void 0)&&o.push(m.stack),m.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[fr(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,r){const n=this._getStacks(e,r),i=s!==void 0?n.indexOf(s):-1;return i===-1?n.length-1:i}_getRuler(){const e=this.options,s=this._cachedMeta,r=s.iScale,n=[];let i,o;for(i=0,o=s.data.length;i<o;++i)n.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const l=e.barThickness;return{min:l||GX(s),pixels:n,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:r,index:n},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(e),u=c._custom,m=ON(u);let A=c[s.axis],g=0,p=r?this.applyStack(s,c,r):A,v,b;p!==A&&(g=p-A,p=A),m&&(A=u.barStart,p=u.barEnd-u.barStart,A!==0&&wd(A)!==wd(u.barEnd)&&(g=0),g+=A);const y=!ia(i)&&!m?i:g;let w=s.getPixelForValue(y);if(this.chart.getDataVisibility(e)?v=s.getPixelForValue(g+p):v=w,b=v-w,Math.abs(b)<o){b=XX(b,s,l)*o,A===l&&(w-=b/2);const B=s.getPixelForDecimal(0),j=s.getPixelForDecimal(1),E=Math.min(B,j),S=Math.max(B,j);w=Math.max(Math.min(w,S),E),v=w+b,r&&!m&&(c._stacks[s.axis]._visualValues[n]=s.getValueForPixel(v)-s.getValueForPixel(w))}if(w===s.getPixelForValue(l)){const B=wd(b)*s.getLineWidthForValue(l)/2;w+=B,b-=B}return{size:b,base:w,head:v,center:v+b/2}}_calculateBarIndexPixels(e,s){const r=s.scale,n=this.options,i=n.skipNull,o=fr(n.maxBarThickness,1/0);let l,c;const u=this._getAxisCount();if(s.grouped){const m=i?this._getStackCount(e):s.stackCount,A=n.barThickness==="flex"?YX(e,s,n,m*u):WX(e,s,n,m*u),g=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(fr(g,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+p;l=A.start+A.chunk*v+A.chunk/2,c=Math.min(o,A.chunk*A.ratio)}else l=r.getPixelForValue(this.getParsed(e)[r.axis],e),c=Math.min(o,s.min*s.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,s=e.vScale,r=e.data,n=r.length;let i=0;for(;i<n;++i)this.getParsed(i)[s.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}function rJ(a,e,s){let r=1,n=1,i=0,o=0;if(e<on){const l=a,c=l+e,u=Math.cos(l),m=Math.sin(l),A=Math.cos(c),g=Math.sin(c),p=(j,E,S)=>Kx(j,l,c,!0)?1:Math.max(E,E*s,S,S*s),v=(j,E,S)=>Kx(j,l,c,!0)?-1:Math.min(E,E*s,S,S*s),b=p(0,u,A),y=p(ii,m,g),w=v(ma,u,A),B=v(ma+ii,m,g);r=(b-w)/2,n=(y-B)/2,i=-(b+w)/2,o=-(y+B)/2}return{ratioX:r,ratioY:n,offsetX:i,offsetY:o}}class zI extends Qw{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const s=e.data,{labels:{pointStyle:r,textAlign:n,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return s.labels.length&&s.datasets.length?s.labels.map((c,u)=>{const A=e.getDatasetMeta(0).controller.getStyle(u);return{text:c,fillStyle:A.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(u),lineDash:A.borderDash,lineDashOffset:A.borderDashOffset,lineJoin:A.borderJoinStyle,lineWidth:A.borderWidth,strokeStyle:A.borderColor,textAlign:n,pointStyle:r,borderRadius:o&&(l||A.borderRadius),index:u}}):[]}},onClick(e,s,r){r.chart.toggleDataVisibility(s.index),r.chart.update()}}}};constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){const r=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=r;else{let i=c=>+r[c];if(Sr(r[e])){const{key:c="value"}=this._parsing;i=u=>+hA(r[u],c)}let o,l;for(o=e,l=e+s;o<l;++o)n._parsed[o]=i(o)}}_getRotation(){return pu(this.options.rotation-90)}_getCircumference(){return pu(this.options.circumference)}_getRotationExtents(){let e=on,s=-on;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const n=this.chart.getDatasetMeta(r).controller,i=n._getRotation(),o=n._getCircumference();e=Math.min(e,i),s=Math.max(s,i+o)}return{rotation:e,circumference:s-e}}update(e){const s=this.chart,{chartArea:r}=s,n=this._cachedMeta,i=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-o)/2,0),c=Math.min(dK(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:m,rotation:A}=this._getRotationExtents(),{ratioX:g,ratioY:p,offsetX:v,offsetY:b}=rJ(A,m,c),y=(r.width-o)/g,w=(r.height-o)/p,B=Math.max(Math.min(y,w)/2,0),j=bI(this.options.radius,B),E=Math.max(j*c,0),S=(j-E)/this._getVisibleDatasetWeightTotal();this.offsetX=v*j,this.offsetY=b*j,n.total=this.calculateTotal(),this.outerRadius=j-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,s){const r=this.options,n=this._cachedMeta,i=this._getCircumference();return s&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*i/on)}updateElements(e,s,r,n){const i=n==="reset",o=this.chart,l=o.chartArea,u=o.options.animation,m=(l.left+l.right)/2,A=(l.top+l.bottom)/2,g=i&&u.animateScale,p=g?0:this.innerRadius,v=g?0:this.outerRadius,{sharedOptions:b,includeOptions:y}=this._getSharedOptions(s,n);let w=this._getRotation(),B;for(B=0;B<s;++B)w+=this._circumference(B,i);for(B=s;B<s+r;++B){const j=this._circumference(B,i),E=e[B],S={x:m+this.offsetX,y:A+this.offsetY,startAngle:w,endAngle:w+j,circumference:j,outerRadius:v,innerRadius:p};y&&(S.options=b||this.resolveDataElementOptions(B,E.active?"active":n)),w+=j,this.updateElement(E,B,S,n)}}calculateTotal(){const e=this._cachedMeta,s=e.data;let r=0,n;for(n=0;n<s.length;n++){const i=e._parsed[n];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(n)&&!s[n].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const s=this._cachedMeta.total;return s>0&&!isNaN(e)?on*(Math.abs(e)/s):0}getLabelAndValue(e){const s=this._cachedMeta,r=this.chart,n=r.data.labels||[],i=J5(s._parsed[e],r.options.locale);return{label:n[e]||"",value:i}}getMaxBorderWidth(e){let s=0;const r=this.chart;let n,i,o,l,c;if(!e){for(n=0,i=r.data.datasets.length;n<i;++n)if(r.isDatasetVisible(n)){o=r.getDatasetMeta(n),e=o.data,l=o.controller;break}}if(!e)return 0;for(n=0,i=e.length;n<i;++n)c=l.resolveDataElementOptions(n),c.borderAlign!=="inner"&&(s=Math.max(s,c.borderWidth||0,c.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let r=0,n=e.length;r<n;++r){const i=this.resolveDataElementOptions(r);s=Math.max(s,i.offset||0,i.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(s+=this._getRingWeight(r));return s}_getRingWeight(e){return Math.max(fr(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class aJ extends Qw{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:r,data:n=[],_dataset:i}=s,o=this.chart._animationsDisabled;let{start:l,count:c}=EK(s,n,o);this._drawStart=l,this._drawCount=c,FK(s)&&(l=0,c=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=n;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(n,l,c,e)}updateElements(e,s,r,n){const i=n==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:m,includeOptions:A}=this._getSharedOptions(s,n),g=o.axis,p=l.axis,{spanGaps:v,segment:b}=this.options,y=Yx(v)?v:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||i||n==="none",B=s+r,j=e.length;let E=s>0&&this.getParsed(s-1);for(let S=0;S<j;++S){const T=e[S],M=w?T:{};if(S<s||S>=B){M.skip=!0;continue}const D=this.getParsed(S),P=ia(D[p]),Y=M[g]=o.getPixelForValue(D[g],S),Q=M[p]=i||P?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,D,c):D[p],S);M.skip=isNaN(Y)||isNaN(Q)||P,M.stop=S>0&&Math.abs(D[g]-E[g])>y,b&&(M.parsed=D,M.raw=u.data[S]),A&&(M.options=m||this.resolveDataElementOptions(S,T.active?"active":n)),w||this.updateElement(T,S,M,n),E=D}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,r=s.options&&s.options.borderWidth||0,n=e.data||[];if(!n.length)return r;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class nJ extends zI{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Sm(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class nC{static override(e){Object.assign(nC.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Sm()}parse(){return Sm()}format(){return Sm()}add(){return Sm()}diff(){return Sm()}startOf(){return Sm()}endOf(){return Sm()}}var iJ={_date:nC};function oJ(a,e,s,r){const{controller:n,data:i,_sorted:o}=a,l=n._cachedMeta.iScale,c=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const u=l._reversePixels?_K:Hm;if(r){if(n._sharedOptions){const m=i[0],A=typeof m.getRange=="function"&&m.getRange(e);if(A){const g=u(i,e,s-A),p=u(i,e,s+A);return{lo:g.lo,hi:p.hi}}}}else{const m=u(i,e,s);if(c){const{vScale:A}=n._cachedMeta,{_parsed:g}=a,p=g.slice(0,m.lo+1).reverse().findIndex(b=>!ia(b[A.axis]));m.lo-=Math.max(0,p);const v=g.slice(m.hi).findIndex(b=>!ia(b[A.axis]));m.hi+=Math.max(0,v)}return m}}return{lo:0,hi:i.length-1}}function Hw(a,e,s,r,n){const i=a.getSortedVisibleDatasetMetas(),o=s[e];for(let l=0,c=i.length;l<c;++l){const{index:u,data:m}=i[l],{lo:A,hi:g}=oJ(i[l],e,o,n);for(let p=A;p<=g;++p){const v=m[p];v.skip||r(v,u,p)}}}function lJ(a){const e=a.indexOf("x")!==-1,s=a.indexOf("y")!==-1;return function(r,n){const i=e?Math.abs(r.x-n.x):0,o=s?Math.abs(r.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function UN(a,e,s,r,n){const i=[];return!n&&!a.isPointInArea(e)||Hw(a,s,e,function(l,c,u){!n&&!Xx(l,a.chartArea,0)||l.inRange(e.x,e.y,r)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function cJ(a,e,s,r){let n=[];function i(o,l,c){const{startAngle:u,endAngle:m}=o.getProps(["startAngle","endAngle"],r),{angle:A}=wI(o,{x:e.x,y:e.y});Kx(A,u,m)&&n.push({element:o,datasetIndex:l,index:c})}return Hw(a,s,e,i),n}function dJ(a,e,s,r,n,i){let o=[];const l=lJ(s);let c=Number.POSITIVE_INFINITY;function u(m,A,g){const p=m.inRange(e.x,e.y,n);if(r&&!p)return;const v=m.getCenterPoint(n);if(!(!!i||a.isPointInArea(v))&&!p)return;const y=l(e,v);y<c?(o=[{element:m,datasetIndex:A,index:g}],c=y):y===c&&o.push({element:m,datasetIndex:A,index:g})}return Hw(a,s,e,u),o}function QN(a,e,s,r,n,i){return!i&&!a.isPointInArea(e)?[]:s==="r"&&!r?cJ(a,e,s,n):dJ(a,e,s,r,n,i)}function f3(a,e,s,r,n){const i=[],o=s==="x"?"inXRange":"inYRange";let l=!1;return Hw(a,s,e,(c,u,m)=>{c[o]&&c[o](e[s],n)&&(i.push({element:c,datasetIndex:u,index:m}),l=l||c.inRange(e.x,e.y,n))}),r&&!l?[]:i}var uJ={modes:{index(a,e,s,r){const n=Im(e,a),i=s.axis||"x",o=s.includeInvisible||!1,l=s.intersect?UN(a,n,i,r,o):QN(a,n,i,!1,r,o),c=[];return l.length?(a.getSortedVisibleDatasetMetas().forEach(u=>{const m=l[0].index,A=u.data[m];A&&!A.skip&&c.push({element:A,datasetIndex:u.index,index:m})}),c):[]},dataset(a,e,s,r){const n=Im(e,a),i=s.axis||"xy",o=s.includeInvisible||!1;let l=s.intersect?UN(a,n,i,r,o):QN(a,n,i,!1,r,o);if(l.length>0){const c=l[0].datasetIndex,u=a.getDatasetMeta(c).data;l=[];for(let m=0;m<u.length;++m)l.push({element:u[m],datasetIndex:c,index:m})}return l},point(a,e,s,r){const n=Im(e,a),i=s.axis||"xy",o=s.includeInvisible||!1;return UN(a,n,i,r,o)},nearest(a,e,s,r){const n=Im(e,a),i=s.axis||"xy",o=s.includeInvisible||!1;return QN(a,n,i,s.intersect,r,o)},x(a,e,s,r){const n=Im(e,a);return f3(a,n,"x",s.intersect,r)},y(a,e,s,r){const n=Im(e,a);return f3(a,n,"y",s.intersect,r)}}};const $I=["left","top","right","bottom"];function $g(a,e){return a.filter(s=>s.pos===e)}function p3(a,e){return a.filter(s=>$I.indexOf(s.pos)===-1&&s.box.axis===e)}function qg(a,e){return a.sort((s,r)=>{const n=e?r:s,i=e?s:r;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function hJ(a){const e=[];let s,r,n,i,o,l;for(s=0,r=(a||[]).length;s<r;++s)n=a[s],{position:i,options:{stack:o,stackWeight:l=1}}=n,e.push({index:s,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&i+o,stackWeight:l});return e}function mJ(a){const e={};for(const s of a){const{stack:r,pos:n,stackWeight:i}=s;if(!r||!$I.includes(n))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function AJ(a,e){const s=mJ(a),{vBoxMaxWidth:r,hBoxMaxHeight:n}=e;let i,o,l;for(i=0,o=a.length;i<o;++i){l=a[i];const{fullSize:c}=l.box,u=s[l.stack],m=u&&l.stackWeight/u.weight;l.horizontal?(l.width=m?m*r:c&&e.availableWidth,l.height=n):(l.width=r,l.height=m?m*n:c&&e.availableHeight)}return s}function fJ(a){const e=hJ(a),s=qg(e.filter(u=>u.box.fullSize),!0),r=qg($g(e,"left"),!0),n=qg($g(e,"right")),i=qg($g(e,"top"),!0),o=qg($g(e,"bottom")),l=p3(e,"x"),c=p3(e,"y");return{fullSize:s,leftAndTop:r.concat(i),rightAndBottom:n.concat(c).concat(o).concat(l),chartArea:$g(e,"chartArea"),vertical:r.concat(n).concat(c),horizontal:i.concat(o).concat(l)}}function g3(a,e,s,r){return Math.max(a[s],e[s])+Math.max(a[r],e[r])}function qI(a,e){a.top=Math.max(a.top,e.top),a.left=Math.max(a.left,e.left),a.bottom=Math.max(a.bottom,e.bottom),a.right=Math.max(a.right,e.right)}function pJ(a,e,s,r){const{pos:n,box:i}=s,o=a.maxPadding;if(!Sr(n)){s.size&&(a[n]-=s.size);const A=r[s.stack]||{size:0,count:1};A.size=Math.max(A.size,s.horizontal?i.height:i.width),s.size=A.size/A.count,a[n]+=s.size}i.getPadding&&qI(o,i.getPadding());const l=Math.max(0,e.outerWidth-g3(o,a,"left","right")),c=Math.max(0,e.outerHeight-g3(o,a,"top","bottom")),u=l!==a.w,m=c!==a.h;return a.w=l,a.h=c,s.horizontal?{same:u,other:m}:{same:m,other:u}}function gJ(a){const e=a.maxPadding;function s(r){const n=Math.max(e[r]-a[r],0);return a[r]+=n,n}a.y+=s("top"),a.x+=s("left"),s("right"),s("bottom")}function xJ(a,e){const s=e.maxPadding;function r(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{i[o]=Math.max(e[o],s[o])}),i}return r(a?["left","right"]:["top","bottom"])}function mx(a,e,s,r){const n=[];let i,o,l,c,u,m;for(i=0,o=a.length,u=0;i<o;++i){l=a[i],c=l.box,c.update(l.width||e.w,l.height||e.h,xJ(l.horizontal,e));const{same:A,other:g}=pJ(e,s,l,r);u|=A&&n.length,m=m||g,c.fullSize||n.push(l)}return u&&mx(n,e,s,r)||m}function Xb(a,e,s,r,n){a.top=s,a.left=e,a.right=e+r,a.bottom=s+n,a.width=r,a.height=n}function x3(a,e,s,r){const n=s.padding;let{x:i,y:o}=e;for(const l of a){const c=l.box,u=r[l.stack]||{placed:0,weight:1},m=l.stackWeight/u.weight||1;if(l.horizontal){const A=e.w*m,g=u.size||c.height;Wx(u.start)&&(o=u.start),c.fullSize?Xb(c,n.left,o,s.outerWidth-n.right-n.left,g):Xb(c,e.left+u.placed,o,A,g),u.start=o,u.placed+=A,o=c.bottom}else{const A=e.h*m,g=u.size||c.width;Wx(u.start)&&(i=u.start),c.fullSize?Xb(c,i,n.top,g,s.outerHeight-n.bottom-n.top):Xb(c,i,e.top+u.placed,g,A),u.start=i,u.placed+=A,i=c.right}}e.x=i,e.y=o}var Rl={addBox(a,e){a.boxes||(a.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},a.boxes.push(e)},removeBox(a,e){const s=a.boxes?a.boxes.indexOf(e):-1;s!==-1&&a.boxes.splice(s,1)},configure(a,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(a,e,s,r){if(!a)return;const n=zl(a.options.layout.padding),i=Math.max(e-n.width,0),o=Math.max(s-n.height,0),l=fJ(a.boxes),c=l.vertical,u=l.horizontal;ua(a.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const m=c.reduce((b,y)=>y.box.options&&y.box.options.display===!1?b:b+1,0)||1,A=Object.freeze({outerWidth:e,outerHeight:s,padding:n,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/m,hBoxMaxHeight:o/2}),g=Object.assign({},n);qI(g,zl(r));const p=Object.assign({maxPadding:g,w:i,h:o,x:n.left,y:n.top},n),v=AJ(c.concat(u),A);mx(l.fullSize,p,A,v),mx(c,p,A,v),mx(u,p,A,v)&&mx(c,p,A,v),gJ(p),x3(l.leftAndTop,p,A,v),p.x+=p.w,p.y+=p.h,x3(l.rightAndBottom,p,A,v),a.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},ua(l.chartArea,b=>{const y=b.box;Object.assign(y,a.chartArea),y.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class GI{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,r){}removeEventListener(e,s,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,r,n){return s=Math.max(0,s||e.width),r=r||e.height,{width:s,height:Math.max(0,n?Math.floor(s/n):r)}}isAttached(e){return!0}updateConfig(e){}}class bJ extends GI{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ky="$chartjs",yJ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},b3=a=>a===null||a==="";function vJ(a,e){const s=a.style,r=a.getAttribute("height"),n=a.getAttribute("width");if(a[Ky]={initial:{height:r,width:n,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",b3(n)){const i=s3(a,"width");i!==void 0&&(a.width=i)}if(b3(r))if(a.style.height==="")a.height=a.width/(e||2);else{const i=s3(a,"height");i!==void 0&&(a.height=i)}return a}const WI=yX?{passive:!0}:!1;function wJ(a,e,s){a&&a.addEventListener(e,s,WI)}function NJ(a,e,s){a&&a.canvas&&a.canvas.removeEventListener(e,s,WI)}function jJ(a,e){const s=yJ[a.type]||a.type,{x:r,y:n}=Im(a,e);return{type:s,chart:e,native:a,x:r!==void 0?r:null,y:n!==void 0?n:null}}function Ev(a,e){for(const s of a)if(s===e||s.contains(e))return!0}function _J(a,e,s){const r=a.canvas,n=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Ev(l.addedNodes,r),o=o&&!Ev(l.removedNodes,r);o&&s()});return n.observe(document,{childList:!0,subtree:!0}),n}function CJ(a,e,s){const r=a.canvas,n=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Ev(l.removedNodes,r),o=o&&!Ev(l.addedNodes,r);o&&s()});return n.observe(document,{childList:!0,subtree:!0}),n}const Zx=new Map;let y3=0;function YI(){const a=window.devicePixelRatio;a!==y3&&(y3=a,Zx.forEach((e,s)=>{s.currentDevicePixelRatio!==a&&e()}))}function kJ(a,e){Zx.size||window.addEventListener("resize",YI),Zx.set(a,e)}function BJ(a){Zx.delete(a),Zx.size||window.removeEventListener("resize",YI)}function SJ(a,e,s){const r=a.canvas,n=r&&aC(r);if(!n)return;const i=CI((l,c)=>{const u=n.clientWidth;s(l,c),u<n.clientWidth&&s()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,m=c.contentRect.height;u===0&&m===0||i(u,m)});return o.observe(n),kJ(a,i),o}function HN(a,e,s){s&&s.disconnect(),e==="resize"&&BJ(a)}function EJ(a,e,s){const r=a.canvas,n=CI(i=>{a.ctx!==null&&s(jJ(i,a))},a);return wJ(r,e,n),n}class FJ extends GI{acquireContext(e,s){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(vJ(e,s),r):null}releaseContext(e){const s=e.canvas;if(!s[Ky])return!1;const r=s[Ky].initial;["height","width"].forEach(i=>{const o=r[i];ia(o)?s.removeAttribute(i):s.setAttribute(i,o)});const n=r.style||{};return Object.keys(n).forEach(i=>{s.style[i]=n[i]}),s.width=s.width,delete s[Ky],!0}addEventListener(e,s,r){this.removeEventListener(e,s);const n=e.$proxies||(e.$proxies={}),o={attach:_J,detach:CJ,resize:SJ}[s]||EJ;n[s]=o(e,s,r)}removeEventListener(e,s){const r=e.$proxies||(e.$proxies={}),n=r[s];if(!n)return;({attach:HN,detach:HN,resize:HN}[s]||NJ)(e,s,n),r[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,r,n){return bX(e,s,r,n)}isAttached(e){const s=e&&aC(e);return!!(s&&s.isConnected)}}function DJ(a){return!rC()||typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas?bJ:FJ}let Su=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:s,y:r}=this.getProps(["x","y"],e);return{x:s,y:r}}hasValue(){return Yx(this.x)&&Yx(this.y)}getProps(e,s){const r=this.$animations;if(!s||!r)return this;const n={};return e.forEach(i=>{n[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),n}};function TJ(a,e){const s=a.options.ticks,r=PJ(a),n=Math.min(s.maxTicksLimit||r,r),i=s.major.enabled?LJ(e):[],o=i.length,l=i[0],c=i[o-1],u=[];if(o>n)return MJ(e,u,i,o/n),u;const m=IJ(i,e,n);if(o>0){let A,g;const p=o>1?Math.round((c-l)/(o-1)):null;for(Jb(e,u,m,ia(p)?0:l-p,l),A=0,g=o-1;A<g;A++)Jb(e,u,m,i[A],i[A+1]);return Jb(e,u,m,c,ia(p)?e.length:c+p),u}return Jb(e,u,m),u}function PJ(a){const e=a.options.offset,s=a._tickSize(),r=a._length/s+(e?0:1),n=a._maxLength/s;return Math.floor(Math.min(r,n))}function IJ(a,e,s){const r=RJ(a),n=e.length/s;if(!r)return Math.max(n,1);const i=xK(r);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>n)return c}return Math.max(n,1)}function LJ(a){const e=[];let s,r;for(s=0,r=a.length;s<r;s++)a[s].major&&e.push(s);return e}function MJ(a,e,s,r){let n=0,i=s[0],o;for(r=Math.ceil(r),o=0;o<a.length;o++)o===i&&(e.push(a[o]),n++,i=s[n*r])}function Jb(a,e,s,r,n){const i=fr(r,0),o=Math.min(fr(n,a.length),a.length);let l=0,c,u,m;for(s=Math.ceil(s),n&&(c=n-r,s=c/Math.floor(c/s)),m=i;m<0;)l++,m=Math.round(i+l*s);for(u=Math.max(i,0);u<o;u++)u===m&&(e.push(a[u]),l++,m=Math.round(i+l*s))}function RJ(a){const e=a.length;let s,r;if(e<2)return!1;for(r=a[0],s=1;s<e;++s)if(a[s]-a[s-1]!==r)return!1;return r}const OJ=a=>a==="left"?"right":a==="right"?"left":a,v3=(a,e,s)=>e==="top"||e==="left"?a[e]+s:a[e]-s,w3=(a,e)=>Math.min(e||a,a);function N3(a,e){const s=[],r=a.length/e,n=a.length;let i=0;for(;i<n;i+=r)s.push(a[Math.floor(i)]);return s}function UJ(a,e,s){const r=a.ticks.length,n=Math.min(e,r-1),i=a._startPixel,o=a._endPixel,l=1e-6;let c=a.getPixelForTick(n),u;if(!(s&&(r===1?u=Math.max(c-i,o-c):e===0?u=(a.getPixelForTick(1)-c)/2:u=(c-a.getPixelForTick(n-1))/2,c+=n<e?u:-u,c<i-l||c>o+l)))return c}function QJ(a,e){ua(a,s=>{const r=s.gc,n=r.length/2;let i;if(n>e){for(i=0;i<n;++i)delete s.data[r[i]];r.splice(0,n)}})}function Gg(a){return a.drawTicks?a.tickLength:0}function j3(a,e){if(!a.display)return 0;const s=Gi(a.font,e),r=zl(a.padding);return(Gn(a.text)?a.text.length:1)*s.lineHeight+r.height}function HJ(a,e){return jA(a,{scale:e,type:"scale"})}function VJ(a,e,s){return jA(a,{tick:s,index:e,type:"tick"})}function zJ(a,e,s){let r=K5(a);return(s&&e!=="right"||!s&&e==="right")&&(r=OJ(r)),r}function $J(a,e,s,r){const{top:n,left:i,bottom:o,right:l,chart:c}=a,{chartArea:u,scales:m}=c;let A=0,g,p,v;const b=o-n,y=l-i;if(a.isHorizontal()){if(p=zi(r,i,l),Sr(s)){const w=Object.keys(s)[0],B=s[w];v=m[w].getPixelForValue(B)+b-e}else s==="center"?v=(u.bottom+u.top)/2+b-e:v=v3(a,s,e);g=l-i}else{if(Sr(s)){const w=Object.keys(s)[0],B=s[w];p=m[w].getPixelForValue(B)-y+e}else s==="center"?p=(u.left+u.right)/2-y+e:p=v3(a,s,e);v=zi(r,o,n),A=s==="left"?-ii:ii}return{titleX:p,titleY:v,maxWidth:g,rotation:A}}class Op extends Su{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:r,_suggestedMax:n}=this;return e=sd(e,Number.POSITIVE_INFINITY),s=sd(s,Number.NEGATIVE_INFINITY),r=sd(r,Number.POSITIVE_INFINITY),n=sd(n,Number.NEGATIVE_INFINITY),{min:sd(e,r),max:sd(s,n),minDefined:Ki(e),maxDefined:Ki(s)}}getMinMax(e){let{min:s,max:r,minDefined:n,maxDefined:i}=this.getUserBounds(),o;if(n&&i)return{min:s,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,e),n||(s=Math.min(s,o.min)),i||(r=Math.max(r,o.max));return s=i&&s>r?r:s,r=n&&s>r?s:r,{min:sd(s,sd(r,s)),max:sd(r,sd(s,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ma(this.options.beforeUpdate,[this])}update(e,s,r){const{beginAtZero:n,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=XK(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?N3(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=TJ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,r;this.isHorizontal()?(s=this.left,r=this.right):(s=this.top,r=this.bottom,e=!e),this._startPixel=s,this._endPixel=r,this._reversePixels=e,this._length=r-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ma(this.options.afterUpdate,[this])}beforeSetDimensions(){Ma(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ma(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ma(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ma(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let r,n,i;for(r=0,n=e.length;r<n;r++)i=e[r],i.label=Ma(s.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Ma(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ma(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,r=w3(this.ticks.length,e.ticks.maxTicksLimit),n=s.minRotation||0,i=s.maxRotation;let o=n,l,c,u;if(!this._isVisible()||!s.display||n>=i||r<=1||!this.isHorizontal()){this.labelRotation=n;return}const m=this._getLabelSizes(),A=m.widest.width,g=m.highest.height,p=qi(this.chart.width-A,0,this.maxWidth);l=e.offset?this.maxWidth/r:p/(r-1),A+6>l&&(l=p/(r-(e.offset?.5:1)),c=this.maxHeight-Gg(e.grid)-s.padding-j3(e.title,this.chart.options.font),u=Math.sqrt(A*A+g*g),o=wK(Math.min(Math.asin(qi((m.highest.height+6)/l,-1,1)),Math.asin(qi(c/u,-1,1))-Math.asin(qi(g/u,-1,1)))),o=Math.max(n,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ma(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ma(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:r,title:n,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=j3(n,s.options.font);if(l?(e.width=this.maxWidth,e.height=Gg(i)+c):(e.height=this.maxHeight,e.width=Gg(i)+c),r.display&&this.ticks.length){const{first:u,last:m,widest:A,highest:g}=this._getLabelSizes(),p=r.padding*2,v=pu(this.labelRotation),b=Math.cos(v),y=Math.sin(v);if(l){const w=r.mirror?0:y*A.width+b*g.height;e.height=Math.min(this.maxHeight,e.height+w+p)}else{const w=r.mirror?0:b*A.width+y*g.height;e.width=Math.min(this.maxWidth,e.width+w+p)}this._calculatePadding(u,m,y,b)}}this._handleMargins(),l?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,r,n){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,A=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,p=0;c?u?(g=n*e.width,p=r*s.height):(g=r*e.height,p=n*s.width):i==="start"?p=s.width:i==="end"?g=e.width:i!=="inner"&&(g=e.width/2,p=s.width/2),this.paddingLeft=Math.max((g-m+o)*this.width/(this.width-m),0),this.paddingRight=Math.max((p-A+o)*this.width/(this.width-A),0)}else{let m=s.height/2,A=e.height/2;i==="start"?(m=0,A=e.height):i==="end"&&(m=s.height,A=0),this.paddingTop=m+o,this.paddingBottom=A+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ma(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,r;for(s=0,r=e.length;s<r;s++)ia(e[s].label)&&(e.splice(s,1),r--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let r=this.ticks;s<r.length&&(r=N3(r,s)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,r){const{ctx:n,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(s/w3(s,r));let u=0,m=0,A,g,p,v,b,y,w,B,j,E,S;for(A=0;A<s;A+=c){if(v=e[A].label,b=this._resolveTickFontOptions(A),n.font=y=b.string,w=i[y]=i[y]||{data:{},gc:[]},B=b.lineHeight,j=E=0,!ia(v)&&!Gn(v))j=XE(n,w.data,w.gc,j,v),E=B;else if(Gn(v))for(g=0,p=v.length;g<p;++g)S=v[g],!ia(S)&&!Gn(S)&&(j=XE(n,w.data,w.gc,j,S),E+=B);o.push(j),l.push(E),u=Math.max(j,u),m=Math.max(E,m)}QJ(i,s);const T=o.indexOf(u),M=l.indexOf(m),D=P=>({width:o[P]||0,height:l[P]||0});return{first:D(0),last:D(s-1),widest:D(T),highest:D(M),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return jK(this._alignToPixels?Bm(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const r=s[e];return r.$context||(r.$context=VJ(this.getContext(),e,r))}return this.$context||(this.$context=HJ(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=pu(this.labelRotation),r=Math.abs(Math.cos(s)),n=Math.abs(Math.sin(s)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*r>l*n?l/r:c/n:c*n<l*r?c/r:l/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,r=this.chart,n=this.options,{grid:i,position:o,border:l}=n,c=i.offset,u=this.isHorizontal(),A=this.ticks.length+(c?1:0),g=Gg(i),p=[],v=l.setContext(this.getContext()),b=v.display?v.width:0,y=b/2,w=function(O){return Bm(r,O,b)};let B,j,E,S,T,M,D,P,Y,Q,L,ae;if(o==="top")B=w(this.bottom),M=this.bottom-g,P=B-y,Q=w(e.top)+y,ae=e.bottom;else if(o==="bottom")B=w(this.top),Q=e.top,ae=w(e.bottom)-y,M=B+y,P=this.top+g;else if(o==="left")B=w(this.right),T=this.right-g,D=B-y,Y=w(e.left)+y,L=e.right;else if(o==="right")B=w(this.left),Y=e.left,L=w(e.right)-y,T=B+y,D=this.left+g;else if(s==="x"){if(o==="center")B=w((e.top+e.bottom)/2+.5);else if(Sr(o)){const O=Object.keys(o)[0],X=o[O];B=w(this.chart.scales[O].getPixelForValue(X))}Q=e.top,ae=e.bottom,M=B+y,P=M+g}else if(s==="y"){if(o==="center")B=w((e.left+e.right)/2);else if(Sr(o)){const O=Object.keys(o)[0],X=o[O];B=w(this.chart.scales[O].getPixelForValue(X))}T=B-y,D=T-g,Y=e.left,L=e.right}const ne=fr(n.ticks.maxTicksLimit,A),V=Math.max(1,Math.ceil(A/ne));for(j=0;j<A;j+=V){const O=this.getContext(j),X=i.setContext(O),$=l.setContext(O),H=X.lineWidth,te=X.color,K=$.dash||[],I=$.dashOffset,R=X.tickWidth,G=X.tickColor,se=X.tickBorderDash||[],le=X.tickBorderDashOffset;E=UJ(this,j,c),E!==void 0&&(S=Bm(r,E,H),u?T=D=Y=L=S:M=P=Q=ae=S,p.push({tx1:T,ty1:M,tx2:D,ty2:P,x1:Y,y1:Q,x2:L,y2:ae,width:H,color:te,borderDash:K,borderDashOffset:I,tickWidth:R,tickColor:G,tickBorderDash:se,tickBorderDashOffset:le}))}return this._ticksLength=A,this._borderValue=B,p}_computeLabelItems(e){const s=this.axis,r=this.options,{position:n,ticks:i}=r,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:m,mirror:A}=i,g=Gg(r.grid),p=g+m,v=A?-m:p,b=-pu(this.labelRotation),y=[];let w,B,j,E,S,T,M,D,P,Y,Q,L,ae="middle";if(n==="top")T=this.bottom-v,M=this._getXAxisLabelAlignment();else if(n==="bottom")T=this.top+v,M=this._getXAxisLabelAlignment();else if(n==="left"){const V=this._getYAxisLabelAlignment(g);M=V.textAlign,S=V.x}else if(n==="right"){const V=this._getYAxisLabelAlignment(g);M=V.textAlign,S=V.x}else if(s==="x"){if(n==="center")T=(e.top+e.bottom)/2+p;else if(Sr(n)){const V=Object.keys(n)[0],O=n[V];T=this.chart.scales[V].getPixelForValue(O)+p}M=this._getXAxisLabelAlignment()}else if(s==="y"){if(n==="center")S=(e.left+e.right)/2-p;else if(Sr(n)){const V=Object.keys(n)[0],O=n[V];S=this.chart.scales[V].getPixelForValue(O)}M=this._getYAxisLabelAlignment(g).textAlign}s==="y"&&(c==="start"?ae="top":c==="end"&&(ae="bottom"));const ne=this._getLabelSizes();for(w=0,B=l.length;w<B;++w){j=l[w],E=j.label;const V=i.setContext(this.getContext(w));D=this.getPixelForTick(w)+i.labelOffset,P=this._resolveTickFontOptions(w),Y=P.lineHeight,Q=Gn(E)?E.length:1;const O=Q/2,X=V.color,$=V.textStrokeColor,H=V.textStrokeWidth;let te=M;o?(S=D,M==="inner"&&(w===B-1?te=this.options.reverse?"left":"right":w===0?te=this.options.reverse?"right":"left":te="center"),n==="top"?u==="near"||b!==0?L=-Q*Y+Y/2:u==="center"?L=-ne.highest.height/2-O*Y+Y:L=-ne.highest.height+Y/2:u==="near"||b!==0?L=Y/2:u==="center"?L=ne.highest.height/2-O*Y:L=ne.highest.height-Q*Y,A&&(L*=-1),b!==0&&!V.showLabelBackdrop&&(S+=Y/2*Math.sin(b))):(T=D,L=(1-Q)*Y/2);let K;if(V.showLabelBackdrop){const I=zl(V.backdropPadding),R=ne.heights[w],G=ne.widths[w];let se=L-I.top,le=0-I.left;switch(ae){case"middle":se-=R/2;break;case"bottom":se-=R;break}switch(M){case"center":le-=G/2;break;case"right":le-=G;break;case"inner":w===B-1?le-=G:w>0&&(le-=G/2);break}K={left:le,top:se,width:G+I.width,height:R+I.height,color:V.backdropColor}}y.push({label:E,font:P,textOffset:L,options:{rotation:b,color:X,strokeColor:$,strokeWidth:H,textAlign:te,textBaseline:ae,translation:[S,T],backdrop:K}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-pu(this.labelRotation))return e==="top"?"left":"right";let n="center";return s.align==="start"?n="left":s.align==="end"?n="right":s.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:r,mirror:n,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,c=o.widest.width;let u,m;return s==="left"?n?(m=this.right+i,r==="near"?u="left":r==="center"?(u="center",m+=c/2):(u="right",m+=c)):(m=this.right-l,r==="near"?u="right":r==="center"?(u="center",m-=c/2):(u="left",m=this.left)):s==="right"?n?(m=this.left+i,r==="near"?u="right":r==="center"?(u="center",m-=c/2):(u="left",m-=c)):(m=this.left+l,r==="near"?u="left":r==="center"?(u="center",m+=c/2):(u="right",m=this.right)):u="right",{textAlign:u,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:r,top:n,width:i,height:o}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(r,n,i,o),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const n=this.ticks.findIndex(i=>i.value===e);return n>=0?s.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const s=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(c,u,m)=>{!m.width||!m.color||(r.save(),r.lineWidth=m.width,r.strokeStyle=m.color,r.setLineDash(m.borderDash||[]),r.lineDashOffset=m.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(s.display)for(i=0,o=n.length;i<o;++i){const c=n[i];s.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:r,grid:n}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const l=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,m,A,g;this.isHorizontal()?(u=Bm(e,this.left,o)-o/2,m=Bm(e,this.right,l)+l/2,A=g=c):(A=Bm(e,this.top,o)-o/2,g=Bm(e,this.bottom,l)+l/2,u=m=c),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(u,A),s.lineTo(m,g),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,n=this._computeLabelArea();n&&Rw(r,n);const i=this.getLabelItems(e);for(const o of i){const l=o.options,c=o.font,u=o.label,m=o.textOffset;Jx(r,u,0,m,c,l)}n&&Ow(r)}drawTitle(){const{ctx:e,options:{position:s,title:r,reverse:n}}=this;if(!r.display)return;const i=Gi(r.font),o=zl(r.padding),l=r.align;let c=i.lineHeight/2;s==="bottom"||s==="center"||Sr(s)?(c+=o.bottom,Gn(r.text)&&(c+=i.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:u,titleY:m,maxWidth:A,rotation:g}=$J(this,c,s,l);Jx(e,r.text,0,0,i,{color:r.color,maxWidth:A,rotation:g,textAlign:zJ(l,s,n),textBaseline:"middle",translation:[u,m]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,r=fr(e.grid&&e.grid.z,-1),n=fr(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Op.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let i,o;for(i=0,o=s.length;i<o;++i){const l=s[i];l[r]===this.id&&(!e||l.type===e)&&n.push(l)}return n}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Gi(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Zb{constructor(e,s,r){this.type=e,this.scope=s,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let r;WJ(s)&&(r=this.register(s));const n=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in n||(n[i]=e,qJ(e,o,r),this.override&&Dn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const s=this.items,r=e.id,n=this.scope;r in s&&delete s[r],n&&r in Dn[n]&&(delete Dn[n][r],this.override&&delete mA[r])}}function qJ(a,e,s){const r=Gx(Object.create(null),[s?Dn.get(s):{},Dn.get(e),a.defaults]);Dn.set(e,r),a.defaultRoutes&&GJ(e,a.defaultRoutes),a.descriptors&&Dn.describe(e,a.descriptors)}function GJ(a,e){Object.keys(e).forEach(s=>{const r=s.split("."),n=r.pop(),i=[a].concat(r).join("."),o=e[s].split("."),l=o.pop(),c=o.join(".");Dn.route(i,n,c,l)})}function WJ(a){return"id"in a&&"defaults"in a}class YJ{constructor(){this.controllers=new Zb(Qw,"datasets",!0),this.elements=new Zb(Su,"elements"),this.plugins=new Zb(Object,"plugins"),this.scales=new Zb(Op,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,r){[...s].forEach(n=>{const i=r||this._getRegistryForType(n);r||i.isForType(n)||i===this.plugins&&n.id?this._exec(e,i,n):ua(n,o=>{const l=r||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,s,r){const n=W5(e);Ma(r["before"+n],[],r),s[e](r),Ma(r["after"+n],[],r)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const r=this._typedRegistries[s];if(r.isForType(e))return r}return this.plugins}_get(e,s,r){const n=s.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return n}}var od=new YJ;class KJ{constructor(){this._init=void 0}notify(e,s,r,n){if(s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=n?this._descriptors(e).filter(n):this._descriptors(e),o=this._notify(i,e,s,r);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,s,r,n){n=n||{};for(const i of e){const o=i.plugin,l=o[r],c=[s,n,i.options];if(Ma(l,c,o)===!1&&n.cancelable)return!1}return!0}invalidate(){ia(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const r=e&&e.config,n=fr(r.options&&r.options.plugins,{}),i=XJ(r);return n===!1&&!s?[]:ZJ(e,i,n,s)}_notifyStateChanges(e){const s=this._oldCache||[],r=this._cache,n=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(n(s,r),e,"stop"),this._notify(n(r,s),e,"start")}}function XJ(a){const e={},s=[],r=Object.keys(od.plugins.items);for(let i=0;i<r.length;i++)s.push(od.getPlugin(r[i]));const n=a.plugins||[];for(let i=0;i<n.length;i++){const o=n[i];s.indexOf(o)===-1&&(s.push(o),e[o.id]=!0)}return{plugins:s,localIds:e}}function JJ(a,e){return!e&&a===!1?null:a===!0?{}:a}function ZJ(a,{plugins:e,localIds:s},r,n){const i=[],o=a.getContext();for(const l of e){const c=l.id,u=JJ(r[c],n);u!==null&&i.push({plugin:l,options:eZ(a.config,{plugin:l,local:s[c]},u,o)})}return i}function eZ(a,{plugin:e,local:s},r,n){const i=a.pluginScopeKeys(e),o=a.getOptionScopes(r,i);return s&&e.defaults&&o.push(e.defaults),a.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function A_(a,e){const s=Dn.datasets[a]||{};return((e.datasets||{})[a]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function tZ(a,e){let s=a;return a==="_index_"?s=e:a==="_value_"&&(s=e==="x"?"y":"x"),s}function sZ(a,e){return a===e?"_index_":"_value_"}function _3(a){if(a==="x"||a==="y"||a==="r")return a}function rZ(a){if(a==="top"||a==="bottom")return"x";if(a==="left"||a==="right")return"y"}function f_(a,...e){if(_3(a))return a;for(const s of e){const r=s.axis||rZ(s.position)||a.length>1&&_3(a[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${a}' axis. Please provide 'axis' or 'position' option.`)}function C3(a,e,s){if(s[e+"AxisID"]===a)return{axis:e}}function aZ(a,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(r=>r.xAxisID===a||r.yAxisID===a);if(s.length)return C3(a,"x",s[0])||C3(a,"y",s[0])}return{}}function nZ(a,e){const s=mA[a.type]||{scales:{}},r=e.scales||{},n=A_(a.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!Sr(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=f_(o,l,aZ(o,a),Dn.scales[l.type]),u=sZ(c,n),m=s.scales||{};i[o]=Bx(Object.create(null),[{axis:c},l,m[c],m[u]])}),a.data.datasets.forEach(o=>{const l=o.type||a.type,c=o.indexAxis||A_(l,e),m=(mA[l]||{}).scales||{};Object.keys(m).forEach(A=>{const g=tZ(A,c),p=o[g+"AxisID"]||g;i[p]=i[p]||Object.create(null),Bx(i[p],[{axis:g},r[p],m[A]])})}),Object.keys(i).forEach(o=>{const l=i[o];Bx(l,[Dn.scales[l.type],Dn.scale])}),i}function KI(a){const e=a.options||(a.options={});e.plugins=fr(e.plugins,{}),e.scales=nZ(a,e)}function XI(a){return a=a||{},a.datasets=a.datasets||[],a.labels=a.labels||[],a}function iZ(a){return a=a||{},a.data=XI(a.data),KI(a),a}const k3=new Map,JI=new Set;function ey(a,e){let s=k3.get(a);return s||(s=e(),k3.set(a,s),JI.add(s)),s}const Wg=(a,e,s)=>{const r=hA(e,s);r!==void 0&&a.add(r)};class oZ{constructor(e){this._config=iZ(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=XI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),KI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ey(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return ey(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return ey(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,r=this.type;return ey(`${r}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const r=this._scopeCache;let n=r.get(e);return(!n||s)&&(n=new Map,r.set(e,n)),n}getOptionScopes(e,s,r){const{options:n,type:i}=this,o=this._cachedScopes(e,r),l=o.get(s);if(l)return l;const c=new Set;s.forEach(m=>{e&&(c.add(e),m.forEach(A=>Wg(c,e,A))),m.forEach(A=>Wg(c,n,A)),m.forEach(A=>Wg(c,mA[i]||{},A)),m.forEach(A=>Wg(c,Dn,A)),m.forEach(A=>Wg(c,h_,A))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),JI.has(s)&&o.set(s,u),u}chartOptionScopes(){const{options:e,type:s}=this;return[e,mA[s]||{},Dn.datasets[s]||{},{type:s},Dn,h_]}resolveNamedOptions(e,s,r,n=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=B3(this._resolverCache,e,n);let c=o;if(cZ(o,s)){i.$shared=!1,r=Gh(r)?r():r;const u=this.createResolver(e,r,l);c=xp(o,r,u)}for(const u of s)i[u]=c[u];return i}createResolver(e,s,r=[""],n){const{resolver:i}=B3(this._resolverCache,e,r);return Sr(s)?xp(i,s,void 0,n):i}}function B3(a,e,s){let r=a.get(e);r||(r=new Map,a.set(e,r));const n=s.join();let i=r.get(n);return i||(i={resolver:eC(e,s),subPrefixes:s.filter(l=>!l.toLowerCase().includes("hover"))},r.set(n,i)),i}const lZ=a=>Sr(a)&&Object.getOwnPropertyNames(a).some(e=>Gh(a[e]));function cZ(a,e){const{isScriptable:s,isIndexable:r}=EI(a);for(const n of e){const i=s(n),o=r(n),l=(o||i)&&a[n];if(i&&(Gh(l)||lZ(l))||o&&Gn(l))return!0}return!1}var dZ="4.5.1";const uZ=["top","bottom","left","right","chartArea"];function S3(a,e){return a==="top"||a==="bottom"||uZ.indexOf(a)===-1&&e==="x"}function E3(a,e){return function(s,r){return s[a]===r[a]?s[e]-r[e]:s[a]-r[a]}}function F3(a){const e=a.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Ma(s&&s.onComplete,[a],e)}function hZ(a){const e=a.chart,s=e.options.animation;Ma(s&&s.onProgress,[a],e)}function ZI(a){return rC()&&typeof a=="string"?a=document.getElementById(a):a&&a.length&&(a=a[0]),a&&a.canvas&&(a=a.canvas),a}const Xy={},D3=a=>{const e=ZI(a);return Object.values(Xy).filter(s=>s.canvas===e).pop()};function mZ(a,e,s){const r=Object.keys(a);for(const n of r){const i=+n;if(i>=e){const o=a[n];delete a[n],(s>0||i>e)&&(a[i+s]=o)}}}function AZ(a,e,s,r){return!s||a.type==="mouseout"?null:r?e:a}let Eu=class{static defaults=Dn;static instances=Xy;static overrides=mA;static registry=od;static version=dZ;static getChart=D3;static register(...e){od.add(...e),T3()}static unregister(...e){od.remove(...e),T3()}constructor(e,s){const r=this.config=new oZ(s),n=ZI(e),i=D3(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||DJ(n)),this.platform.updateConfig(r);const l=this.platform.acquireContext(n,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,m=c&&c.width;if(this.id=cK(),this.ctx=l,this.canvas=c,this.width=m,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new KJ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=BK(A=>this.update(A),o.resizeDelay||0),this._dataChanges=[],Xy[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}cu.listen(this,"complete",F3),cu.listen(this,"progress",hZ),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:r,height:n,_aspectRatio:i}=this;return ia(e)?s&&i?i:n?r/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return od}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():t3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return JE(this.canvas,this.ctx),this}stop(){return cu.stop(this),this}resize(e,s){cu.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const r=this.options,n=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,e,s,i),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,t3(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Ma(r.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};ua(s,(r,n)=>{r.id=n})}buildOrUpdateScales(){const e=this.options,s=e.scales,r=this.scales,n=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let i=[];s&&(i=i.concat(Object.keys(s).map(o=>{const l=s[o],c=f_(o,l),u=c==="r",m=c==="x";return{options:l,dposition:u?"chartArea":m?"bottom":"left",dtype:u?"radialLinear":m?"category":"linear"}}))),ua(i,o=>{const l=o.options,c=l.id,u=f_(c,l),m=fr(l.type,o.dtype);(l.position===void 0||S3(l.position,u)!==S3(o.dposition))&&(l.position=o.dposition),n[c]=!0;let A=null;if(c in r&&r[c].type===m)A=r[c];else{const g=od.getScale(m);A=new g({id:c,type:m,ctx:this.ctx,chart:this}),r[A.id]=A}A.init(l,e)}),ua(n,(o,l)=>{o||delete r[l]}),ua(r,o=>{Rl.configure(this,o,o.options),Rl.addBox(this,o)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,r=e.length;if(e.sort((n,i)=>n.index-i.index),r>s){for(let n=s;n<r;++n)this._destroyDatasetMeta(n);e.splice(s,r-s)}this._sortedMetasets=e.slice(0).sort(E3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((r,n)=>{s.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=s.length;r<n;r++){const i=s[r];let o=this.getDatasetMeta(r);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=i.indexAxis||A_(l,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const c=od.getController(l),{datasetElementType:u,dataElementType:m}=Dn.datasets[l];Object.assign(c,{dataElementType:od.getElement(m),datasetElementType:u&&od.getElement(u)}),o.controller=new c(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ua(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const r=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,m=this.data.datasets.length;u<m;u++){const{controller:A}=this.getDatasetMeta(u),g=!n&&i.indexOf(A)===-1;A.buildOrUpdateElements(g),o=Math.max(+A.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),n||ua(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(E3("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){ua(this.scales,e=>{Rl.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!HE(s,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:i}of s){const o=r==="_removeElements"?-i:i;mZ(e,n,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),n=r(0);for(let i=1;i<s;i++)if(!HE(n,r(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Rl.update(this,this.width,this.height,e);const s=this.chartArea,r=s.width<=0||s.height<=0;this._layers=[],ua(this.boxes,n=>{r&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,r=this.data.datasets.length;s<r;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,r=this.data.datasets.length;s<r;++s)this._updateDataset(s,Gh(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const r=this.getDatasetMeta(e),n={meta:r,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(r.controller._update(s),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(cu.has(this)?this.attached&&!cu.running(this)&&cu.start(this):(this.draw(),F3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,r=[];let n,i;for(n=0,i=s.length;n<i;++n){const o=s[n];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,r={meta:e,index:e.index,cancelable:!0},n=UI(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(n&&Rw(s,n),e.controller.draw(),n&&Ow(s),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Xx(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,r,n){const i=uJ.modes[s];return typeof i=="function"?i(this,e,r,n):[]}getDatasetMeta(e){const s=this.data.datasets[e],r=this._metasets;let n=r.filter(i=>i&&i._dataset===s).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=jA(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!s.hidden}setDatasetVisibility(e,s){const r=this.getDatasetMeta(e);r.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,r){const n=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,n);Wx(s)?(i.data[s].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(l=>l.datasetIndex===e?n:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),cu.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),JE(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Xy[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,r=(i,o)=>{s.addEventListener(this,i,o),e[i]=o},n=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};ua(this.options.events,i=>r(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,r=(c,u)=>{s.addEventListener(this,c,u),e[c]=u},n=(c,u)=>{e[c]&&(s.removeEventListener(this,c,u),delete e[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{n("attach",l),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),r("attach",l)},s.isAttached(this.canvas)?l():o()}unbindEvents(){ua(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},ua(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,r){const n=r?"set":"remove";let i,o,l,c;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!_v(r,s)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,s))}notifyPlugins(e,s,r){return this._plugins.notify(this,e,s,r)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,r){const n=this.options.hover,i=(c,u)=>c.filter(m=>!u.some(A=>m.datasetIndex===A.datasetIndex&&m.index===A.index)),o=i(s,e),l=r?e:i(e,s);o.length&&this.updateHoverStyle(o,n.mode,!1),l.length&&n.mode&&this.updateHoverStyle(l,n.mode,!0)}_eventHandler(e,s){const r={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},n=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,n)===!1)return;const i=this._handleEvent(e,s,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(i||r.changed)&&this.render(),this}_handleEvent(e,s,r){const{_active:n=[],options:i}=this,o=s,l=this._getActiveElements(e,n,r,o),c=fK(e),u=AZ(e,this._lastEvent,r,c);r&&(this._lastEvent=null,Ma(i.onHover,[e,l,this],this),c&&Ma(i.onClick,[e,l,this],this));const m=!_v(l,n);return(m||s)&&(this._active=l,this._updateHoverStyles(l,n,s)),this._lastEvent=u,m}_getActiveElements(e,s,r,n){if(e.type==="mouseout")return[];if(!r)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,n)}};function T3(){return ua(Eu.instances,a=>a._plugins.invalidate())}function fZ(a,e,s){const{startAngle:r,x:n,y:i,outerRadius:o,innerRadius:l,options:c}=e,{borderWidth:u,borderJoinStyle:m}=c,A=Math.min(u/o,nl(r-s));if(a.beginPath(),a.arc(n,i,o-u/2,r+A/2,s-A/2),l>0){const g=Math.min(u/l,nl(r-s));a.arc(n,i,l+u/2,s-g/2,r+g/2,!0)}else{const g=Math.min(u/2,o*nl(r-s));if(m==="round")a.arc(n,i,g,s-ma/2,r+ma/2,!0);else if(m==="bevel"){const p=2*g*g,v=-p*Math.cos(s+ma/2)+n,b=-p*Math.sin(s+ma/2)+i,y=p*Math.cos(r+ma/2)+n,w=p*Math.sin(r+ma/2)+i;a.lineTo(v,b),a.lineTo(y,w)}}a.closePath(),a.moveTo(0,0),a.rect(0,0,a.canvas.width,a.canvas.height),a.clip("evenodd")}function pZ(a,e,s){const{startAngle:r,pixelMargin:n,x:i,y:o,outerRadius:l,innerRadius:c}=e;let u=n/l;a.beginPath(),a.arc(i,o,l,r-u,s+u),c>n?(u=n/c,a.arc(i,o,c,s+u,r-u,!0)):a.arc(i,o,n,s+ii,r-ii),a.closePath(),a.clip()}function gZ(a){return Z5(a,["outerStart","outerEnd","innerStart","innerEnd"])}function xZ(a,e,s,r){const n=gZ(a.options.borderRadius),i=(s-e)/2,o=Math.min(i,r*e/2),l=c=>{const u=(s-Math.min(i,c))*r/2;return qi(c,0,Math.min(i,u))};return{outerStart:l(n.outerStart),outerEnd:l(n.outerEnd),innerStart:qi(n.innerStart,0,o),innerEnd:qi(n.innerEnd,0,o)}}function vf(a,e,s,r){return{x:s+a*Math.cos(e),y:r+a*Math.sin(e)}}function Fv(a,e,s,r,n,i){const{x:o,y:l,startAngle:c,pixelMargin:u,innerRadius:m}=e,A=Math.max(e.outerRadius+r+s-u,0),g=m>0?m+r+s+u:0;let p=0;const v=n-c;if(r){const V=m>0?m-r:0,O=A>0?A-r:0,X=(V+O)/2,$=X!==0?v*X/(X+r):v;p=(v-$)/2}const b=Math.max(.001,v*A-s/ma)/A,y=(v-b)/2,w=c+y+p,B=n-y-p,{outerStart:j,outerEnd:E,innerStart:S,innerEnd:T}=xZ(e,g,A,B-w),M=A-j,D=A-E,P=w+j/M,Y=B-E/D,Q=g+S,L=g+T,ae=w+S/Q,ne=B-T/L;if(a.beginPath(),i){const V=(P+Y)/2;if(a.arc(o,l,A,P,V),a.arc(o,l,A,V,Y),E>0){const H=vf(D,Y,o,l);a.arc(H.x,H.y,E,Y,B+ii)}const O=vf(L,B,o,l);if(a.lineTo(O.x,O.y),T>0){const H=vf(L,ne,o,l);a.arc(H.x,H.y,T,B+ii,ne+Math.PI)}const X=(B-T/g+(w+S/g))/2;if(a.arc(o,l,g,B-T/g,X,!0),a.arc(o,l,g,X,w+S/g,!0),S>0){const H=vf(Q,ae,o,l);a.arc(H.x,H.y,S,ae+Math.PI,w-ii)}const $=vf(M,w,o,l);if(a.lineTo($.x,$.y),j>0){const H=vf(M,P,o,l);a.arc(H.x,H.y,j,w-ii,P)}}else{a.moveTo(o,l);const V=Math.cos(P)*A+o,O=Math.sin(P)*A+l;a.lineTo(V,O);const X=Math.cos(Y)*A+o,$=Math.sin(Y)*A+l;a.lineTo(X,$)}a.closePath()}function bZ(a,e,s,r,n){const{fullCircles:i,startAngle:o,circumference:l}=e;let c=e.endAngle;if(i){Fv(a,e,s,r,c,n);for(let u=0;u<i;++u)a.fill();isNaN(l)||(c=o+(l%on||on))}return Fv(a,e,s,r,c,n),a.fill(),c}function yZ(a,e,s,r,n){const{fullCircles:i,startAngle:o,circumference:l,options:c}=e,{borderWidth:u,borderJoinStyle:m,borderDash:A,borderDashOffset:g,borderRadius:p}=c,v=c.borderAlign==="inner";if(!u)return;a.setLineDash(A||[]),a.lineDashOffset=g,v?(a.lineWidth=u*2,a.lineJoin=m||"round"):(a.lineWidth=u,a.lineJoin=m||"bevel");let b=e.endAngle;if(i){Fv(a,e,s,r,b,n);for(let y=0;y<i;++y)a.stroke();isNaN(l)||(b=o+(l%on||on))}v&&pZ(a,e,b),c.selfJoin&&b-o>=ma&&p===0&&m!=="miter"&&fZ(a,e,b),i||(Fv(a,e,s,r,b,n),a.stroke())}class Up extends Su{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,s,r){const n=this.getProps(["x","y"],r),{angle:i,distance:o}=wI(n,{x:e,y:s}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:m,circumference:A}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),g=(this.options.spacing+this.options.borderWidth)/2,p=fr(A,c-l),v=Kx(i,l,c)&&l!==c,b=p>=on||v,y=gu(o,u+g,m+g);return b&&y}getCenterPoint(e){const{x:s,y:r,startAngle:n,endAngle:i,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:u}=this.options,m=(n+i)/2,A=(o+l+u+c)/2;return{x:s+Math.cos(m)*A,y:r+Math.sin(m)*A}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:s,circumference:r}=this,n=(s.offset||0)/4,i=(s.spacing||0)/2,o=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=r>on?Math.floor(r/on):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*n,Math.sin(l)*n);const c=1-Math.sin(Math.min(ma,r||0)),u=n*c;e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,bZ(e,this,u,i,o),yZ(e,this,u,i,o),e.restore()}}function eL(a,e,s=e){a.lineCap=fr(s.borderCapStyle,e.borderCapStyle),a.setLineDash(fr(s.borderDash,e.borderDash)),a.lineDashOffset=fr(s.borderDashOffset,e.borderDashOffset),a.lineJoin=fr(s.borderJoinStyle,e.borderJoinStyle),a.lineWidth=fr(s.borderWidth,e.borderWidth),a.strokeStyle=fr(s.borderColor,e.borderColor)}function vZ(a,e,s){a.lineTo(s.x,s.y)}function wZ(a){return a.stepped?HK:a.tension||a.cubicInterpolationMode==="monotone"?VK:vZ}function tL(a,e,s={}){const r=a.length,{start:n=0,end:i=r-1}=s,{start:o,end:l}=e,c=Math.max(n,o),u=Math.min(i,l),m=n<o&&i<o||n>l&&i>l;return{count:r,start:c,loop:e.loop,ilen:u<c&&!m?r+u-c:u-c}}function NZ(a,e,s,r){const{points:n,options:i}=e,{count:o,start:l,loop:c,ilen:u}=tL(n,s,r),m=wZ(i);let{move:A=!0,reverse:g}=r||{},p,v,b;for(p=0;p<=u;++p)v=n[(l+(g?u-p:p))%o],!v.skip&&(A?(a.moveTo(v.x,v.y),A=!1):m(a,b,v,g,i.stepped),b=v);return c&&(v=n[(l+(g?u:0))%o],m(a,b,v,g,i.stepped)),!!c}function jZ(a,e,s,r){const n=e.points,{count:i,start:o,ilen:l}=tL(n,s,r),{move:c=!0,reverse:u}=r||{};let m=0,A=0,g,p,v,b,y,w;const B=E=>(o+(u?l-E:E))%i,j=()=>{b!==y&&(a.lineTo(m,y),a.lineTo(m,b),a.lineTo(m,w))};for(c&&(p=n[B(0)],a.moveTo(p.x,p.y)),g=0;g<=l;++g){if(p=n[B(g)],p.skip)continue;const E=p.x,S=p.y,T=E|0;T===v?(S<b?b=S:S>y&&(y=S),m=(A*m+E)/++A):(j(),a.lineTo(E,S),v=T,A=0,b=y=S),w=S}j()}function p_(a){const e=a.options,s=e.borderDash&&e.borderDash.length;return!a._decimated&&!a._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?jZ:NZ}function _Z(a){return a.stepped?vX:a.tension||a.cubicInterpolationMode==="monotone"?wX:Lm}function CZ(a,e,s,r){let n=e._path;n||(n=e._path=new Path2D,e.path(n,s,r)&&n.closePath()),eL(a,e.options),a.stroke(n)}function kZ(a,e,s,r){const{segments:n,options:i}=e,o=p_(e);for(const l of n)eL(a,i,l.style),a.beginPath(),o(a,e,l,{start:s,end:s+r-1})&&a.closePath(),a.stroke()}const BZ=typeof Path2D=="function";function SZ(a,e,s,r){BZ&&!e.options.segment?CZ(a,e,s,r):kZ(a,e,s,r)}class Fu extends Su{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const n=r.spanGaps?this._loop:this._fullLoop;mX(this._points,r,e,n,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=BX(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,r=e.length;return r&&s[e[r-1].end]}interpolate(e,s){const r=this.options,n=e[s],i=this.points,o=OI(this,{property:s,start:n,end:n});if(!o.length)return;const l=[],c=_Z(r);let u,m;for(u=0,m=o.length;u<m;++u){const{start:A,end:g}=o[u],p=i[A],v=i[g];if(p===v){l.push(p);continue}const b=Math.abs((n-p[s])/(v[s]-p[s])),y=c(p,v,b,r.stepped);y[s]=e[s],l.push(y)}return l.length===1?l[0]:l}pathSegment(e,s,r){return p_(this)(e,this,s,r)}path(e,s,r){const n=this.segments,i=p_(this);let o=this._loop;s=s||0,r=r||this.points.length-s;for(const l of n)o&=i(e,this,l,{start:s,end:s+r-1});return!!o}draw(e,s,r,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),SZ(e,this,r,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function P3(a,e,s,r){const n=a.options,{[s]:i}=a.getProps([s],r);return Math.abs(e-i)<n.radius+n.hitRadius}class Qp extends Su{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,r){const n=this.options,{x:i,y:o}=this.getProps(["x","y"],r);return Math.pow(e-i,2)+Math.pow(s-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,s){return P3(this,e,"x",s)}inYRange(e,s){return P3(this,e,"y",s)}getCenterPoint(e){const{x:s,y:r}=this.getProps(["x","y"],e);return{x:s,y:r}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);const r=s&&e.borderWidth||0;return(s+r)*2}draw(e,s){const r=this.options;this.skip||r.radius<.1||!Xx(this,s,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,m_(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function sL(a,e){const{x:s,y:r,base:n,width:i,height:o}=a.getProps(["x","y","base","width","height"],e);let l,c,u,m,A;return a.horizontal?(A=o/2,l=Math.min(s,n),c=Math.max(s,n),u=r-A,m=r+A):(A=i/2,l=s-A,c=s+A,u=Math.min(r,n),m=Math.max(r,n)),{left:l,top:u,right:c,bottom:m}}function Dh(a,e,s,r){return a?0:qi(e,s,r)}function EZ(a,e,s){const r=a.options.borderWidth,n=a.borderSkipped,i=SI(r);return{t:Dh(n.top,i.top,0,s),r:Dh(n.right,i.right,0,e),b:Dh(n.bottom,i.bottom,0,s),l:Dh(n.left,i.left,0,e)}}function FZ(a,e,s){const{enableBorderRadius:r}=a.getProps(["enableBorderRadius"]),n=a.options.borderRadius,i=ip(n),o=Math.min(e,s),l=a.borderSkipped,c=r||Sr(n);return{topLeft:Dh(!c||l.top||l.left,i.topLeft,0,o),topRight:Dh(!c||l.top||l.right,i.topRight,0,o),bottomLeft:Dh(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:Dh(!c||l.bottom||l.right,i.bottomRight,0,o)}}function DZ(a){const e=sL(a),s=e.right-e.left,r=e.bottom-e.top,n=EZ(a,s/2,r/2),i=FZ(a,s/2,r/2);return{outer:{x:e.left,y:e.top,w:s,h:r,radius:i},inner:{x:e.left+n.l,y:e.top+n.t,w:s-n.l-n.r,h:r-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function VN(a,e,s,r){const n=e===null,i=s===null,l=a&&!(n&&i)&&sL(a,r);return l&&(n||gu(e,l.left,l.right))&&(i||gu(s,l.top,l.bottom))}function TZ(a){return a.topLeft||a.topRight||a.bottomLeft||a.bottomRight}function PZ(a,e){a.rect(e.x,e.y,e.w,e.h)}function zN(a,e,s={}){const r=a.x!==s.x?-e:0,n=a.y!==s.y?-e:0,i=(a.x+a.w!==s.x+s.w?e:0)-r,o=(a.y+a.h!==s.y+s.h?e:0)-n;return{x:a.x+r,y:a.y+n,w:a.w+i,h:a.h+o,radius:a.radius}}class Hp extends Su{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:r,backgroundColor:n}}=this,{inner:i,outer:o}=DZ(this),l=TZ(o.radius)?Bv:PZ;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),l(e,zN(o,s,i)),e.clip(),l(e,zN(i,-s,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),l(e,zN(i,s)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,s,r){return VN(this,e,s,r)}inXRange(e,s){return VN(this,e,null,s)}inYRange(e,s){return VN(this,null,e,s)}getCenterPoint(e){const{x:s,y:r,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(s+n)/2:s,y:i?r:(r+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}function IZ(a,e,s){const r=a.segments,n=a.points,i=e.points,o=[];for(const l of r){let{start:c,end:u}=l;u=Vw(c,u,n);const m=g_(s,n[c],n[u],l.loop);if(!e.segments){o.push({source:l,target:m,start:n[c],end:n[u]});continue}const A=OI(e,m);for(const g of A){const p=g_(s,i[g.start],i[g.end],g.loop),v=RI(l,n,p);for(const b of v)o.push({source:b,target:g,start:{[s]:I3(m,p,"start",Math.max)},end:{[s]:I3(m,p,"end",Math.min)}})}}return o}function g_(a,e,s,r){if(r)return;let n=e[a],i=s[a];return a==="angle"&&(n=nl(n),i=nl(i)),{property:a,start:n,end:i}}function LZ(a,e){const{x:s=null,y:r=null}=a||{},n=e.points,i=[];return e.segments.forEach(({start:o,end:l})=>{l=Vw(o,l,n);const c=n[o],u=n[l];r!==null?(i.push({x:c.x,y:r}),i.push({x:u.x,y:r})):s!==null&&(i.push({x:s,y:c.y}),i.push({x:s,y:u.y}))}),i}function Vw(a,e,s){for(;e>a;e--){const r=s[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function I3(a,e,s,r){return a&&e?r(a[s],e[s]):a?a[s]:e?e[s]:0}function rL(a,e){let s=[],r=!1;return Gn(a)?(r=!0,s=a):s=LZ(a,e),s.length?new Fu({points:s,options:{tension:0},_loop:r,_fullLoop:r}):null}function L3(a){return a&&a.fill!==!1}function MZ(a,e,s){let n=a[e].fill;const i=[e];let o;if(!s)return n;for(;n!==!1&&i.indexOf(n)===-1;){if(!Ki(n))return n;if(o=a[n],!o)return!1;if(o.visible)return n;i.push(n),n=o.fill}return!1}function RZ(a,e,s){const r=HZ(a);if(Sr(r))return isNaN(r.value)?!1:r;let n=parseFloat(r);return Ki(n)&&Math.floor(n)===n?OZ(r[0],e,n,s):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function OZ(a,e,s,r){return(a==="-"||a==="+")&&(s=e+s),s===e||s<0||s>=r?!1:s}function UZ(a,e){let s=null;return a==="start"?s=e.bottom:a==="end"?s=e.top:Sr(a)?s=e.getPixelForValue(a.value):e.getBasePixel&&(s=e.getBasePixel()),s}function QZ(a,e,s){let r;return a==="start"?r=s:a==="end"?r=e.options.reverse?e.min:e.max:Sr(a)?r=a.value:r=e.getBaseValue(),r}function HZ(a){const e=a.options,s=e.fill;let r=fr(s&&s.target,s);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function VZ(a){const{scale:e,index:s,line:r}=a,n=[],i=r.segments,o=r.points,l=zZ(e,s);l.push(rL({x:null,y:e.bottom},r));for(let c=0;c<i.length;c++){const u=i[c];for(let m=u.start;m<=u.end;m++)$Z(n,o[m],l)}return new Fu({points:n,options:{}})}function zZ(a,e){const s=[],r=a.getMatchingVisibleMetas("line");for(let n=0;n<r.length;n++){const i=r[n];if(i.index===e)break;i.hidden||s.unshift(i.dataset)}return s}function $Z(a,e,s){const r=[];for(let n=0;n<s.length;n++){const i=s[n],{first:o,last:l,point:c}=qZ(i,e,"x");if(!(!c||o&&l)){if(o)r.unshift(c);else if(a.push(c),!l)break}}a.push(...r)}function qZ(a,e,s){const r=a.interpolate(e,s);if(!r)return{};const n=r[s],i=a.segments,o=a.points;let l=!1,c=!1;for(let u=0;u<i.length;u++){const m=i[u],A=o[m.start][s],g=o[m.end][s];if(gu(n,A,g)){l=n===A,c=n===g;break}}return{first:l,last:c,point:r}}class aL{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,r){const{x:n,y:i,radius:o}=this;return s=s||{start:0,end:on},e.arc(n,i,o,s.end,s.start,!0),!r.bounds}interpolate(e){const{x:s,y:r,radius:n}=this,i=e.angle;return{x:s+Math.cos(i)*n,y:r+Math.sin(i)*n,angle:i}}}function GZ(a){const{chart:e,fill:s,line:r}=a;if(Ki(s))return WZ(e,s);if(s==="stack")return VZ(a);if(s==="shape")return!0;const n=YZ(a);return n instanceof aL?n:rL(n,r)}function WZ(a,e){const s=a.getDatasetMeta(e);return s&&a.isDatasetVisible(e)?s.dataset:null}function YZ(a){return(a.scale||{}).getPointPositionForValue?XZ(a):KZ(a)}function KZ(a){const{scale:e={},fill:s}=a,r=UZ(s,e);if(Ki(r)){const n=e.isHorizontal();return{x:n?r:null,y:n?null:r}}return null}function XZ(a){const{scale:e,fill:s}=a,r=e.options,n=e.getLabels().length,i=r.reverse?e.max:e.min,o=QZ(s,e,i),l=[];if(r.grid.circular){const c=e.getPointPositionForValue(0,i);return new aL({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<n;++c)l.push(e.getPointPositionForValue(c,o));return l}function $N(a,e,s){const r=GZ(e),{chart:n,index:i,line:o,scale:l,axis:c}=e,u=o.options,m=u.fill,A=u.backgroundColor,{above:g=A,below:p=A}=m||{},v=n.getDatasetMeta(i),b=UI(n,v);r&&o.points.length&&(Rw(a,s),JZ(a,{line:o,target:r,above:g,below:p,area:s,scale:l,axis:c,clip:b}),Ow(a))}function JZ(a,e){const{line:s,target:r,above:n,below:i,area:o,scale:l,clip:c}=e,u=s._loop?"angle":e.axis;a.save();let m=i;i!==n&&(u==="x"?(M3(a,r,o.top),qN(a,{line:s,target:r,color:n,scale:l,property:u,clip:c}),a.restore(),a.save(),M3(a,r,o.bottom)):u==="y"&&(R3(a,r,o.left),qN(a,{line:s,target:r,color:i,scale:l,property:u,clip:c}),a.restore(),a.save(),R3(a,r,o.right),m=n)),qN(a,{line:s,target:r,color:m,scale:l,property:u,clip:c}),a.restore()}function M3(a,e,s){const{segments:r,points:n}=e;let i=!0,o=!1;a.beginPath();for(const l of r){const{start:c,end:u}=l,m=n[c],A=n[Vw(c,u,n)];i?(a.moveTo(m.x,m.y),i=!1):(a.lineTo(m.x,s),a.lineTo(m.x,m.y)),o=!!e.pathSegment(a,l,{move:o}),o?a.closePath():a.lineTo(A.x,s)}a.lineTo(e.first().x,s),a.closePath(),a.clip()}function R3(a,e,s){const{segments:r,points:n}=e;let i=!0,o=!1;a.beginPath();for(const l of r){const{start:c,end:u}=l,m=n[c],A=n[Vw(c,u,n)];i?(a.moveTo(m.x,m.y),i=!1):(a.lineTo(s,m.y),a.lineTo(m.x,m.y)),o=!!e.pathSegment(a,l,{move:o}),o?a.closePath():a.lineTo(s,A.y)}a.lineTo(s,e.first().y),a.closePath(),a.clip()}function qN(a,e){const{line:s,target:r,property:n,color:i,scale:o,clip:l}=e,c=IZ(s,r,n);for(const{source:u,target:m,start:A,end:g}of c){const{style:{backgroundColor:p=i}={}}=u,v=r!==!0;a.save(),a.fillStyle=p,ZZ(a,o,l,v&&g_(n,A,g)),a.beginPath();const b=!!s.pathSegment(a,u);let y;if(v){b?a.closePath():O3(a,r,g,n);const w=!!r.pathSegment(a,m,{move:b,reverse:!0});y=b&&w,y||O3(a,r,A,n)}a.closePath(),a.fill(y?"evenodd":"nonzero"),a.restore()}}function ZZ(a,e,s,r){const n=e.chart.chartArea,{property:i,start:o,end:l}=r||{};if(i==="x"||i==="y"){let c,u,m,A;i==="x"?(c=o,u=n.top,m=l,A=n.bottom):(c=n.left,u=o,m=n.right,A=l),a.beginPath(),s&&(c=Math.max(c,s.left),m=Math.min(m,s.right),u=Math.max(u,s.top),A=Math.min(A,s.bottom)),a.rect(c,u,m-c,A-u),a.clip()}}function O3(a,e,s,r){const n=e.interpolate(s,r);n&&a.lineTo(n.x,n.y)}var Vp={id:"filler",afterDatasetsUpdate(a,e,s){const r=(a.data.datasets||[]).length,n=[];let i,o,l,c;for(o=0;o<r;++o)i=a.getDatasetMeta(o),l=i.dataset,c=null,l&&l.options&&l instanceof Fu&&(c={visible:a.isDatasetVisible(o),index:o,fill:RZ(l,o,r),chart:a,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,n.push(c);for(o=0;o<r;++o)c=n[o],!(!c||c.fill===!1)&&(c.fill=MZ(n,o,s.propagate))},beforeDraw(a,e,s){const r=s.drawTime==="beforeDraw",n=a.getSortedVisibleDatasetMetas(),i=a.chartArea;for(let o=n.length-1;o>=0;--o){const l=n[o].$filler;l&&(l.line.updateControlPoints(i,l.axis),r&&l.fill&&$N(a.ctx,l,i))}},beforeDatasetsDraw(a,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const r=a.getSortedVisibleDatasetMetas();for(let n=r.length-1;n>=0;--n){const i=r[n].$filler;L3(i)&&$N(a.ctx,i,a.chartArea)}},beforeDatasetDraw(a,e,s){const r=e.meta.$filler;!L3(r)||s.drawTime!=="beforeDatasetDraw"||$N(a.ctx,r,a.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const U3=(a,e)=>{let{boxHeight:s=e,boxWidth:r=e}=a;return a.usePointStyle&&(s=Math.min(s,e),r=a.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:s,itemHeight:Math.max(e,s)}},eee=(a,e)=>a!==null&&e!==null&&a.datasetIndex===e.datasetIndex&&a.index===e.index;class Q3 extends Su{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,r){this.maxWidth=e,this.maxHeight=s,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Ma(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(r=>e.filter(r,this.chart.data))),e.sort&&(s=s.sort((r,n)=>e.sort(r,n,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,n=Gi(r.font),i=n.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=U3(r,i);let u,m;s.font=n.string,this.isHorizontal()?(u=this.maxWidth,m=this._fitRows(o,i,l,c)+10):(m=this.maxHeight,u=this._fitCols(o,n,l,c)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(m,e.maxHeight||this.maxHeight)}_fitRows(e,s,r,n){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],m=n+l;let A=e;i.textAlign="left",i.textBaseline="middle";let g=-1,p=-m;return this.legendItems.forEach((v,b)=>{const y=r+s/2+i.measureText(v.text).width;(b===0||u[u.length-1]+y+2*l>o)&&(A+=m,u[u.length-(b>0?0:1)]=0,p+=m,g++),c[b]={left:0,top:p,row:g,width:y,height:n},u[u.length-1]+=y+l}),A}_fitCols(e,s,r,n){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],m=o-e;let A=l,g=0,p=0,v=0,b=0;return this.legendItems.forEach((y,w)=>{const{itemWidth:B,itemHeight:j}=tee(r,s,i,y,n);w>0&&p+j+2*l>m&&(A+=g+l,u.push({width:g,height:p}),v+=g+l,b++,g=p=0),c[w]={left:v,top:p,col:b,width:B,height:j},g=Math.max(g,B),p+=j+l}),A+=g,u.push({width:g,height:p}),A}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:r,labels:{padding:n},rtl:i}}=this,o=op(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=zi(r,this.left+n,this.right-this.lineWidths[l]);for(const u of s)l!==u.row&&(l=u.row,c=zi(r,this.left+n,this.right-this.lineWidths[l])),u.top+=this.top+e+n,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+n}else{let l=0,c=zi(r,this.top+e+n,this.bottom-this.columnSizes[l].height);for(const u of s)u.col!==l&&(l=u.col,c=zi(r,this.top+e+n,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+n,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Rw(e,this),this._draw(),Ow(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:r,ctx:n}=this,{align:i,labels:o}=e,l=Dn.color,c=op(e.rtl,this.left,this.width),u=Gi(o.font),{padding:m}=o,A=u.size,g=A/2;let p;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=u.string;const{boxWidth:v,boxHeight:b,itemHeight:y}=U3(o,A),w=function(T,M,D){if(isNaN(v)||v<=0||isNaN(b)||b<0)return;n.save();const P=fr(D.lineWidth,1);if(n.fillStyle=fr(D.fillStyle,l),n.lineCap=fr(D.lineCap,"butt"),n.lineDashOffset=fr(D.lineDashOffset,0),n.lineJoin=fr(D.lineJoin,"miter"),n.lineWidth=P,n.strokeStyle=fr(D.strokeStyle,l),n.setLineDash(fr(D.lineDash,[])),o.usePointStyle){const Y={radius:b*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:P},Q=c.xPlus(T,v/2),L=M+g;BI(n,Y,Q,L,o.pointStyleWidth&&v)}else{const Y=M+Math.max((A-b)/2,0),Q=c.leftForLtr(T,v),L=ip(D.borderRadius);n.beginPath(),Object.values(L).some(ae=>ae!==0)?Bv(n,{x:Q,y:Y,w:v,h:b,radius:L}):n.rect(Q,Y,v,b),n.fill(),P!==0&&n.stroke()}n.restore()},B=function(T,M,D){Jx(n,D.text,T,M+y/2,u,{strikethrough:D.hidden,textAlign:c.textAlign(D.textAlign)})},j=this.isHorizontal(),E=this._computeTitleHeight();j?p={x:zi(i,this.left+m,this.right-r[0]),y:this.top+m+E,line:0}:p={x:this.left+m,y:zi(i,this.top+E+m,this.bottom-s[0].height),line:0},II(this.ctx,e.textDirection);const S=y+m;this.legendItems.forEach((T,M)=>{n.strokeStyle=T.fontColor,n.fillStyle=T.fontColor;const D=n.measureText(T.text).width,P=c.textAlign(T.textAlign||(T.textAlign=o.textAlign)),Y=v+g+D;let Q=p.x,L=p.y;c.setWidth(this.width),j?M>0&&Q+Y+m>this.right&&(L=p.y+=S,p.line++,Q=p.x=zi(i,this.left+m,this.right-r[p.line])):M>0&&L+S>this.bottom&&(Q=p.x=Q+s[p.line].width+m,p.line++,L=p.y=zi(i,this.top+E+m,this.bottom-s[p.line].height));const ae=c.x(Q);if(w(ae,L,T),Q=SK(P,Q+v+g,j?Q+Y:this.right,e.rtl),B(c.x(Q),L,T),j)p.x+=Y+m;else if(typeof T.text!="string"){const ne=u.lineHeight;p.y+=nL(T,ne)+m}else p.y+=S}),LI(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,r=Gi(s.font),n=zl(s.padding);if(!s.display)return;const i=op(e.rtl,this.left,this.width),o=this.ctx,l=s.position,c=r.size/2,u=n.top+c;let m,A=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),m=this.top+u,A=zi(e.align,A,this.right-g);else{const v=this.columnSizes.reduce((b,y)=>Math.max(b,y.height),0);m=u+zi(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const p=zi(l,A,A+g);o.textAlign=i.textAlign(K5(l)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=r.string,Jx(o,s.text,p,m,r)}_computeTitleHeight(){const e=this.options.title,s=Gi(e.font),r=zl(e.padding);return e.display?s.lineHeight+r.height:0}_getLegendItemAt(e,s){let r,n,i;if(gu(e,this.left,this.right)&&gu(s,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(n=i[r],gu(e,n.left,n.left+n.width)&&gu(s,n.top,n.top+n.height))return this.legendItems[r]}return null}handleEvent(e){const s=this.options;if(!aee(e.type,s))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,i=eee(n,r);n&&!i&&Ma(s.onLeave,[e,n,this],this),this._hoveredItem=r,r&&!i&&Ma(s.onHover,[e,r,this],this)}else r&&Ma(s.onClick,[e,r,this],this)}}function tee(a,e,s,r,n){const i=see(r,a,e,s),o=ree(n,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function see(a,e,s,r){let n=a.text;return n&&typeof n!="string"&&(n=n.reduce((i,o)=>i.length>o.length?i:o)),e+s.size/2+r.measureText(n).width}function ree(a,e,s){let r=a;return typeof e.text!="string"&&(r=nL(e,s)),r}function nL(a,e){const s=a.text?a.text.length:0;return e*s}function aee(a,e){return!!((a==="mousemove"||a==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(a==="click"||a==="mouseup"))}var zp={id:"legend",_element:Q3,start(a,e,s){const r=a.legend=new Q3({ctx:a.ctx,options:s,chart:a});Rl.configure(a,r,s),Rl.addBox(a,r)},stop(a){Rl.removeBox(a,a.legend),delete a.legend},beforeUpdate(a,e,s){const r=a.legend;Rl.configure(a,r,s),r.options=s},afterUpdate(a){const e=a.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(a,e){e.replay||a.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(a,e,s){const r=e.datasetIndex,n=s.chart;n.isDatasetVisible(r)?(n.hide(r),e.hidden=!0):(n.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:a=>a.chart.options.color,boxWidth:40,padding:10,generateLabels(a){const e=a.data.datasets,{labels:{usePointStyle:s,pointStyle:r,textAlign:n,color:i,useBorderRadius:o,borderRadius:l}}=a.legend.options;return a._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(s?0:void 0),m=zl(u.borderWidth);return{text:e[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:n||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:a=>a.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:a=>!a.startsWith("on"),labels:{_scriptable:a=>!["generateLabels","filter","sort"].includes(a)}}};class iL extends Su{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const n=Gn(r.text)?r.text.length:1;this._padding=zl(r.padding);const i=n*Gi(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:r,bottom:n,right:i,options:o}=this,l=o.align;let c=0,u,m,A;return this.isHorizontal()?(m=zi(l,r,i),A=s+e,u=i-r):(o.position==="left"?(m=r+e,A=zi(l,n,s),c=ma*-.5):(m=i-e,A=zi(l,s,n),c=ma*.5),u=n-s),{titleX:m,titleY:A,maxWidth:u,rotation:c}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const r=Gi(s.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);Jx(e,s.text,0,0,r,{color:s.color,maxWidth:c,rotation:u,textAlign:K5(s.align),textBaseline:"middle",translation:[o,l]})}}function nee(a,e){const s=new iL({ctx:a.ctx,options:e,chart:a});Rl.configure(a,s,e),Rl.addBox(a,s),a.titleBlock=s}var $p={id:"title",_element:iL,start(a,e,s){nee(a,s)},stop(a){const e=a.titleBlock;Rl.removeBox(a,e),delete a.titleBlock},beforeUpdate(a,e,s){const r=a.titleBlock;Rl.configure(a,r,s),r.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ax={average(a){if(!a.length)return!1;let e,s,r=new Set,n=0,i=0;for(e=0,s=a.length;e<s;++e){const l=a[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();r.add(c.x),n+=c.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((l,c)=>l+c)/r.size,y:n/i}},nearest(a,e){if(!a.length)return!1;let s=e.x,r=e.y,n=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=a.length;i<o;++i){const c=a[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),m=u_(e,u);m<n&&(n=m,l=c)}}if(l){const c=l.tooltipPosition();s=c.x,r=c.y}return{x:s,y:r}}};function nd(a,e){return e&&(Gn(e)?Array.prototype.push.apply(a,e):a.push(e)),a}function du(a){return(typeof a=="string"||a instanceof String)&&a.indexOf(`
`)>-1?a.split(`
`):a}function iee(a,e){const{element:s,datasetIndex:r,index:n}=e,i=a.getDatasetMeta(r).controller,{label:o,value:l}=i.getLabelAndValue(n);return{chart:a,label:o,parsed:i.getParsed(n),raw:a.data.datasets[r].data[n],formattedValue:l,dataset:i.getDataset(),dataIndex:n,datasetIndex:r,element:s}}function H3(a,e){const s=a.chart.ctx,{body:r,footer:n,title:i}=a,{boxWidth:o,boxHeight:l}=e,c=Gi(e.bodyFont),u=Gi(e.titleFont),m=Gi(e.footerFont),A=i.length,g=n.length,p=r.length,v=zl(e.padding);let b=v.height,y=0,w=r.reduce((E,S)=>E+S.before.length+S.lines.length+S.after.length,0);if(w+=a.beforeBody.length+a.afterBody.length,A&&(b+=A*u.lineHeight+(A-1)*e.titleSpacing+e.titleMarginBottom),w){const E=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;b+=p*E+(w-p)*c.lineHeight+(w-1)*e.bodySpacing}g&&(b+=e.footerMarginTop+g*m.lineHeight+(g-1)*e.footerSpacing);let B=0;const j=function(E){y=Math.max(y,s.measureText(E).width+B)};return s.save(),s.font=u.string,ua(a.title,j),s.font=c.string,ua(a.beforeBody.concat(a.afterBody),j),B=e.displayColors?o+2+e.boxPadding:0,ua(r,E=>{ua(E.before,j),ua(E.lines,j),ua(E.after,j)}),B=0,s.font=m.string,ua(a.footer,j),s.restore(),y+=v.width,{width:y,height:b}}function oee(a,e){const{y:s,height:r}=e;return s<r/2?"top":s>a.height-r/2?"bottom":"center"}function lee(a,e,s,r){const{x:n,width:i}=r,o=s.caretSize+s.caretPadding;if(a==="left"&&n+i+o>e.width||a==="right"&&n-i-o<0)return!0}function cee(a,e,s,r){const{x:n,width:i}=s,{width:o,chartArea:{left:l,right:c}}=a;let u="center";return r==="center"?u=n<=(l+c)/2?"left":"right":n<=i/2?u="left":n>=o-i/2&&(u="right"),lee(u,a,e,s)&&(u="center"),u}function V3(a,e,s){const r=s.yAlign||e.yAlign||oee(a,s);return{xAlign:s.xAlign||e.xAlign||cee(a,e,s,r),yAlign:r}}function dee(a,e){let{x:s,width:r}=a;return e==="right"?s-=r:e==="center"&&(s-=r/2),s}function uee(a,e,s){let{y:r,height:n}=a;return e==="top"?r+=s:e==="bottom"?r-=n+s:r-=n/2,r}function z3(a,e,s,r){const{caretSize:n,caretPadding:i,cornerRadius:o}=a,{xAlign:l,yAlign:c}=s,u=n+i,{topLeft:m,topRight:A,bottomLeft:g,bottomRight:p}=ip(o);let v=dee(e,l);const b=uee(e,c,u);return c==="center"?l==="left"?v+=u:l==="right"&&(v-=u):l==="left"?v-=Math.max(m,g)+n:l==="right"&&(v+=Math.max(A,p)+n),{x:qi(v,0,r.width-e.width),y:qi(b,0,r.height-e.height)}}function ty(a,e,s){const r=zl(s.padding);return e==="center"?a.x+a.width/2:e==="right"?a.x+a.width-r.right:a.x+r.left}function $3(a){return nd([],du(a))}function hee(a,e,s){return jA(a,{tooltip:e,tooltipItems:s,type:"tooltip"})}function q3(a,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?a.override(s):a}const oL={beforeTitle:nu,title(a){if(a.length>0){const e=a[0],s=e.chart.data.labels,r=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return s[e.dataIndex]}return""},afterTitle:nu,beforeBody:nu,beforeLabel:nu,label(a){if(this&&this.options&&this.options.mode==="dataset")return a.label+": "+a.formattedValue||a.formattedValue;let e=a.dataset.label||"";e&&(e+=": ");const s=a.formattedValue;return ia(s)||(e+=s),e},labelColor(a){const s=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(a){const s=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:nu,afterBody:nu,beforeFooter:nu,footer:nu,afterFooter:nu};function Do(a,e,s,r){const n=a[e].call(s,r);return typeof n>"u"?oL[e].call(s,r):n}class G3 extends Su{static positioners=Ax;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&s.options.animation&&r.animations,i=new QI(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=hee(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:r}=s,n=Do(r,"beforeTitle",this,e),i=Do(r,"title",this,e),o=Do(r,"afterTitle",this,e);let l=[];return l=nd(l,du(n)),l=nd(l,du(i)),l=nd(l,du(o)),l}getBeforeBody(e,s){return $3(Do(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:r}=s,n=[];return ua(e,i=>{const o={before:[],lines:[],after:[]},l=q3(r,i);nd(o.before,du(Do(l,"beforeLabel",this,i))),nd(o.lines,Do(l,"label",this,i)),nd(o.after,du(Do(l,"afterLabel",this,i))),n.push(o)}),n}getAfterBody(e,s){return $3(Do(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:r}=s,n=Do(r,"beforeFooter",this,e),i=Do(r,"footer",this,e),o=Do(r,"afterFooter",this,e);let l=[];return l=nd(l,du(n)),l=nd(l,du(i)),l=nd(l,du(o)),l}_createItems(e){const s=this._active,r=this.chart.data,n=[],i=[],o=[];let l=[],c,u;for(c=0,u=s.length;c<u;++c)l.push(iee(this.chart,s[c]));return e.filter&&(l=l.filter((m,A,g)=>e.filter(m,A,g,r))),e.itemSort&&(l=l.sort((m,A)=>e.itemSort(m,A,r))),ua(l,m=>{const A=q3(e.callbacks,m);n.push(Do(A,"labelColor",this,m)),i.push(Do(A,"labelPointStyle",this,m)),o.push(Do(A,"labelTextColor",this,m))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,s){const r=this.options.setContext(this.getContext()),n=this._active;let i,o=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const l=Ax[r.position].call(this,n,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const c=this._size=H3(this,r),u=Object.assign({},l,c),m=V3(this.chart,r,u),A=z3(r,u,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,i={opacity:1,x:A.x,y:A.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,r,n){const i=this.getCaretPosition(e,r,n);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,r){const{xAlign:n,yAlign:i}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:m,bottomRight:A}=ip(l),{x:g,y:p}=e,{width:v,height:b}=s;let y,w,B,j,E,S;return i==="center"?(E=p+b/2,n==="left"?(y=g,w=y-o,j=E+o,S=E-o):(y=g+v,w=y+o,j=E-o,S=E+o),B=y):(n==="left"?w=g+Math.max(c,m)+o:n==="right"?w=g+v-Math.max(u,A)-o:w=this.caretX,i==="top"?(j=p,E=j-o,y=w-o,B=w+o):(j=p+b,E=j+o,y=w+o,B=w-o),S=j),{x1:y,x2:w,x3:B,y1:j,y2:E,y3:S}}drawTitle(e,s,r){const n=this.title,i=n.length;let o,l,c;if(i){const u=op(r.rtl,this.x,this.width);for(e.x=ty(this,r.titleAlign,r),s.textAlign=u.textAlign(r.titleAlign),s.textBaseline="middle",o=Gi(r.titleFont),l=r.titleSpacing,s.fillStyle=r.titleColor,s.font=o.string,c=0;c<i;++c)s.fillText(n[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===i&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,s,r,n,i){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=i,m=Gi(i.bodyFont),A=ty(this,"left",i),g=n.x(A),p=c<m.lineHeight?(m.lineHeight-c)/2:0,v=s.y+p;if(i.usePointStyle){const b={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},y=n.leftForLtr(g,u)+u/2,w=v+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,m_(e,b,y,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,m_(e,b,y,w)}else{e.lineWidth=Sr(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=n.leftForLtr(g,u),y=n.leftForLtr(n.xPlus(g,1),u-2),w=ip(o.borderRadius);Object.values(w).some(B=>B!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Bv(e,{x:b,y:v,w:u,h:c,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Bv(e,{x:y,y:v+1,w:u-2,h:c-2,radius:w}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(b,v,u,c),e.strokeRect(b,v,u,c),e.fillStyle=o.backgroundColor,e.fillRect(y,v+1,u-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,s,r){const{body:n}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:m}=r,A=Gi(r.bodyFont);let g=A.lineHeight,p=0;const v=op(r.rtl,this.x,this.width),b=function(D){s.fillText(D,v.x(e.x+p),e.y+g/2),e.y+=g+i},y=v.textAlign(o);let w,B,j,E,S,T,M;for(s.textAlign=o,s.textBaseline="middle",s.font=A.string,e.x=ty(this,y,r),s.fillStyle=r.bodyColor,ua(this.beforeBody,b),p=l&&y!=="right"?o==="center"?u/2+m:u+2+m:0,E=0,T=n.length;E<T;++E){for(w=n[E],B=this.labelTextColors[E],s.fillStyle=B,ua(w.before,b),j=w.lines,l&&j.length&&(this._drawColorBox(s,e,E,v,r),g=Math.max(A.lineHeight,c)),S=0,M=j.length;S<M;++S)b(j[S]),g=A.lineHeight;ua(w.after,b)}p=0,g=A.lineHeight,ua(this.afterBody,b),e.y-=i}drawFooter(e,s,r){const n=this.footer,i=n.length;let o,l;if(i){const c=op(r.rtl,this.x,this.width);for(e.x=ty(this,r.footerAlign,r),e.y+=r.footerMarginTop,s.textAlign=c.textAlign(r.footerAlign),s.textBaseline="middle",o=Gi(r.footerFont),s.fillStyle=r.footerColor,s.font=o.string,l=0;l<i;++l)s.fillText(n[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,s,r,n){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=e,{width:u,height:m}=r,{topLeft:A,topRight:g,bottomLeft:p,bottomRight:v}=ip(n.cornerRadius);s.fillStyle=n.backgroundColor,s.strokeStyle=n.borderColor,s.lineWidth=n.borderWidth,s.beginPath(),s.moveTo(l+A,c),o==="top"&&this.drawCaret(e,s,r,n),s.lineTo(l+u-g,c),s.quadraticCurveTo(l+u,c,l+u,c+g),o==="center"&&i==="right"&&this.drawCaret(e,s,r,n),s.lineTo(l+u,c+m-v),s.quadraticCurveTo(l+u,c+m,l+u-v,c+m),o==="bottom"&&this.drawCaret(e,s,r,n),s.lineTo(l+p,c+m),s.quadraticCurveTo(l,c+m,l,c+m-p),o==="center"&&i==="left"&&this.drawCaret(e,s,r,n),s.lineTo(l,c+A),s.quadraticCurveTo(l,c,l+A,c),s.closePath(),s.fill(),n.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,r=this.$animations,n=r&&r.x,i=r&&r.y;if(n||i){const o=Ax[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=H3(this,e),c=Object.assign({},o,this._size),u=V3(s,e,c),m=z3(e,c,u,s);(n._to!==m.x||i._to!==m.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(s);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=zl(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,n,s),II(e,s.textDirection),i.y+=o.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),LI(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const r=this._active,n=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!_v(r,n),o=this._positionChanged(n,s);(i||o)&&(this._active=n,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,r=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],o=this._getActiveElements(e,i,s,r),l=this._positionChanged(o,e),c=s||!_v(o,i)||l;return c&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,r,n){const i=this.options;if(e.type==="mouseout")return[];if(!n)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,s){const{caretX:r,caretY:n,options:i}=this,o=Ax[i.position].call(this,e,s);return o!==!1&&(r!==o.x||n!==o.y)}}var qp={id:"tooltip",_element:G3,positioners:Ax,afterInit(a,e,s){s&&(a.tooltip=new G3({chart:a,options:s}))},beforeUpdate(a,e,s){a.tooltip&&a.tooltip.initialize(s)},reset(a,e,s){a.tooltip&&a.tooltip.initialize(s)},afterDraw(a){const e=a.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(a.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(a.ctx),a.notifyPlugins("afterTooltipDraw",s)}},afterEvent(a,e){if(a.tooltip){const s=e.replay;a.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(a,e)=>e.bodyFont.size,boxWidth:(a,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:oL},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:a=>a!=="filter"&&a!=="itemSort"&&a!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const mee=(a,e,s,r)=>(typeof e=="string"?(s=a.push(e)-1,r.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function Aee(a,e,s,r){const n=a.indexOf(e);if(n===-1)return mee(a,e,s,r);const i=a.lastIndexOf(e);return n!==i?s:n}const fee=(a,e)=>a===null?null:qi(Math.round(a),0,e);function W3(a){const e=this.getLabels();return a>=0&&a<e.length?e[a]:a}class Gp extends Op{static id="category";static defaults={ticks:{callback:W3}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const r=this.getLabels();for(const{index:n,label:i}of s)r[n]===i&&r.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(ia(e))return null;const r=this.getLabels();return s=isFinite(s)&&r[s]===e?s:Aee(r,e,fr(s,e),this._addedLabels),fee(s,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),s||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const e=this.min,s=this.max,r=this.options.offset,n=[];let i=this.getLabels();i=e===0&&s===i.length-1?i:i.slice(e,s+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=s;o++)n.push({value:o});return n}getLabelForValue(e){return W3.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function pee(a,e){const s=[],{bounds:n,step:i,min:o,max:l,precision:c,count:u,maxTicks:m,maxDigits:A,includeBounds:g}=a,p=i||1,v=m-1,{min:b,max:y}=e,w=!ia(o),B=!ia(l),j=!ia(u),E=(y-b)/(A+1);let S=zE((y-b)/v/p)*p,T,M,D,P;if(S<1e-14&&!w&&!B)return[{value:b},{value:y}];P=Math.ceil(y/S)-Math.floor(b/S),P>v&&(S=zE(P*S/v/p)*p),ia(c)||(T=Math.pow(10,c),S=Math.ceil(S*T)/T),n==="ticks"?(M=Math.floor(b/S)*S,D=Math.ceil(y/S)*S):(M=b,D=y),w&&B&&i&&yK((l-o)/i,S/1e3)?(P=Math.round(Math.min((l-o)/S,m)),S=(l-o)/P,M=o,D=l):j?(M=w?o:M,D=B?l:D,P=u-1,S=(D-M)/P):(P=(D-M)/S,Sx(P,Math.round(P),S/1e3)?P=Math.round(P):P=Math.ceil(P));const Y=Math.max($E(S),$E(M));T=Math.pow(10,ia(c)?Y:c),M=Math.round(M*T)/T,D=Math.round(D*T)/T;let Q=0;for(w&&(g&&M!==o?(s.push({value:o}),M<o&&Q++,Sx(Math.round((M+Q*S)*T)/T,o,Y3(o,E,a))&&Q++):M<o&&Q++);Q<P;++Q){const L=Math.round((M+Q*S)*T)/T;if(B&&L>l)break;s.push({value:L})}return B&&g&&D!==l?s.length&&Sx(s[s.length-1].value,l,Y3(l,E,a))?s[s.length-1].value=l:s.push({value:l}):(!B||D===l)&&s.push({value:D}),s}function Y3(a,e,{horizontal:s,minRotation:r}){const n=pu(r),i=(s?Math.sin(n):Math.cos(n))||.001,o=.75*e*(""+a).length;return Math.min(e/i,o)}class gee extends Op{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return ia(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:r}=this.getUserBounds();let{min:n,max:i}=this;const o=c=>n=s?n:c,l=c=>i=r?i:c;if(e){const c=wd(n),u=wd(i);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(n===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||o(n-c)}this.min=n,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:r}=e,n;return r?(n=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),s=s||11),s&&(n=Math.min(s,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,o=pee(n,i);return e.bounds==="ticks"&&vK(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let s=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const n=(r-s)/Math.max(e.length-1,1)/2;s-=n,r+=n}this._startValue=s,this._endValue=r,this._valueRange=r-s}getLabelForValue(e){return J5(e,this.chart.options.locale,this.options.ticks.format)}}class Wp extends gee{static id="linear";static defaults={ticks:{callback:kI.formatters.numeric}};determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Ki(e)?e:0,this.max=Ki(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,r=pu(this.options.ticks.minRotation),n=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,i.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const zw={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Lo=Object.keys(zw);function K3(a,e){return a-e}function X3(a,e){if(ia(e))return null;const s=a._adapter,{parser:r,round:n,isoWeekday:i}=a._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Ki(o)||(o=typeof r=="string"?s.parse(o,r):s.parse(o)),o===null?null:(n&&(o=n==="week"&&(Yx(i)||i===!0)?s.startOf(o,"isoWeek",i):s.startOf(o,n)),+o)}function J3(a,e,s,r){const n=Lo.length;for(let i=Lo.indexOf(a);i<n-1;++i){const o=zw[Lo[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-e)/(l*o.size))<=r)return Lo[i]}return Lo[n-1]}function xee(a,e,s,r,n){for(let i=Lo.length-1;i>=Lo.indexOf(s);i--){const o=Lo[i];if(zw[o].common&&a._adapter.diff(n,r,o)>=e-1)return o}return Lo[s?Lo.indexOf(s):0]}function bee(a){for(let e=Lo.indexOf(a)+1,s=Lo.length;e<s;++e)if(zw[Lo[e]].common)return Lo[e]}function Z3(a,e,s){if(!s)a[e]=!0;else if(s.length){const{lo:r,hi:n}=Y5(s,e),i=s[r]>=e?s[r]:s[n];a[i]=!0}}function yee(a,e,s,r){const n=a._adapter,i=+n.startOf(e[0].value,r),o=e[e.length-1].value;let l,c;for(l=i;l<=o;l=+n.add(l,1,r))c=s[l],c>=0&&(e[c].major=!0);return e}function eF(a,e,s){const r=[],n={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],n[l]=o,r.push({value:l,major:!1});return i===0||!s?r:yee(a,r,n,s)}class tF extends Op{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const r=e.time||(e.time={}),n=this._adapter=new iJ._date(e.adapters.date);n.init(s),Bx(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:X3(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,r=e.time.unit||"day";let{min:n,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(n=Math.min(n,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),n=Ki(n)&&!isNaN(n)?n:+s.startOf(Date.now(),r),i=Ki(i)&&!isNaN(i)?i:+s.endOf(Date.now(),r)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],r=e[e.length-1]),{min:s,max:r}}buildTicks(){const e=this.options,s=e.time,r=e.ticks,n=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,o=this.max,l=CK(n,i,o);return this._unit=s.unit||(r.autoSkip?J3(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):xee(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:bee(this._unit),this.initOffsets(n),e.reverse&&l.reverse(),eF(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,r=0,n,i;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?s=1-n:s=(this.getDecimalForValue(e[1])-n)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;s=qi(s,0,o),r=qi(r,0,o),this._offsets={start:s,end:r,factor:1/(s+1+r)}}_generate(){const e=this._adapter,s=this.min,r=this.max,n=this.options,i=n.time,o=i.unit||J3(i.minUnit,s,r,this._getLabelCapacity(s)),l=fr(n.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,u=Yx(c)||c===!0,m={};let A=s,g,p;if(u&&(A=+e.startOf(A,"isoWeek",c)),A=+e.startOf(A,u?"day":o),e.diff(r,s,o)>1e5*l)throw new Error(s+" and "+r+" are too far apart with stepSize of "+l+" "+o);const v=n.ticks.source==="data"&&this.getDataTimestamps();for(g=A,p=0;g<r;g=+e.add(g,l,o),p++)Z3(m,g,v);return(g===r||n.bounds==="ticks"||p===1)&&Z3(m,g,v),Object.keys(m).sort(K3).map(b=>+b)}getLabelForValue(e){const s=this._adapter,r=this.options.time;return r.tooltipFormat?s.format(e,r.tooltipFormat):s.format(e,r.displayFormats.datetime)}format(e,s){const n=this.options.time.displayFormats,i=this._unit,o=s||n[i];return this._adapter.format(e,o)}_tickFormatFunction(e,s,r,n){const i=this.options,o=i.ticks.callback;if(o)return Ma(o,[e,s,r],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,m=c&&l[c],A=u&&l[u],g=r[s],p=u&&A&&g&&g.major;return this._adapter.format(e,n||(p?A:m))}generateTickLabels(e){let s,r,n;for(s=0,r=e.length;s<r;++s)n=e[s],n.label=this._tickFormatFunction(n.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+r)*s.factor)}getValueForPixel(e){const s=this._offsets,r=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,r=this.ctx.measureText(e).width,n=pu(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(n),o=Math.sin(n),l=this._resolveTickFontOptions(0).size;return{w:r*i+l*o,h:r*o+l*i}}_getLabelCapacity(e){const s=this.options.time,r=s.displayFormats,n=r[s.unit]||r.millisecond,i=this._tickFormatFunction(e,0,eF(this,[e],this._majorUnit),n),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,r;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(s=0,r=n.length;s<r;++s)e=e.concat(n[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,r;if(e.length)return e;const n=this.getLabels();for(s=0,r=n.length;s<r;++s)e.push(X3(this,n[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return jI(e.sort(K3))}}function sy(a,e,s){let r=0,n=a.length-1,i,o,l,c;s?(e>=a[r].pos&&e<=a[n].pos&&({lo:r,hi:n}=Hm(a,"pos",e)),{pos:i,time:l}=a[r],{pos:o,time:c}=a[n]):(e>=a[r].time&&e<=a[n].time&&({lo:r,hi:n}=Hm(a,"time",e)),{time:i,pos:l}=a[r],{time:o,pos:c}=a[n]);const u=o-i;return u?l+(c-l)*(e-i)/u:l}class fue extends tF{static id="timeseries";static defaults=tF.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=sy(s,this.min),this._tableRange=sy(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:r}=this,n=[],i=[];let o,l,c,u,m;for(o=0,l=e.length;o<l;++o)u=e[o],u>=s&&u<=r&&n.push(u);if(n.length<2)return[{time:s,pos:0},{time:r,pos:1}];for(o=0,l=n.length;o<l;++o)m=n[o+1],c=n[o-1],u=n[o],Math.round((m+c)/2)!==u&&i.push({time:u,pos:o/(l-1)});return i}_generate(){const e=this.min,s=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(s)||r.length===1)&&r.push(s),r.sort((n,i)=>n-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),r=this.getLabelTimestamps();return s.length&&r.length?e=this.normalize(s.concat(r)):e=s.length?s:r,e=this._cache.all=e,e}getDecimalForValue(e){return(sy(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,r=this.getDecimalForPixel(e)/s.factor-s.end;return sy(this._table,r*this._tableRange+this._minPos,!0)}}const lL="label";function sF(a,e){typeof a=="function"?a(e):a&&(a.current=e)}function vee(a,e){const s=a.options;s&&e&&Object.assign(s,e)}function cL(a,e){a.labels=e}function dL(a,e,s=lL){const r=[];a.datasets=e.map(n=>{const i=a.datasets.find(o=>o[s]===n[s]);return!i||!n.data||r.includes(i)?{...n}:(r.push(i),Object.assign(i,n),i)})}function wee(a,e=lL){const s={labels:[],datasets:[]};return cL(s,a.labels),dL(s,a.datasets,e),s}function Nee(a,e){const{height:s=150,width:r=300,redraw:n=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:u=[],fallbackContent:m,updateMode:A,...g}=a,p=C.useRef(null),v=C.useRef(null),b=()=>{p.current&&(v.current=new Eu(p.current,{type:o,data:wee(l,i),options:c&&{...c},plugins:u}),sF(e,v.current))},y=()=>{sF(e,null),v.current&&(v.current.destroy(),v.current=null)};return C.useEffect(()=>{!n&&v.current&&c&&vee(v.current,c)},[n,c]),C.useEffect(()=>{!n&&v.current&&cL(v.current.config.data,l.labels)},[n,l.labels]),C.useEffect(()=>{!n&&v.current&&l.datasets&&dL(v.current.config.data,l.datasets,i)},[n,l.datasets]),C.useEffect(()=>{v.current&&(n?(y(),setTimeout(b)):v.current.update(A))},[n,c,l.labels,l.datasets,A]),C.useEffect(()=>{v.current&&(y(),setTimeout(b))},[o]),C.useEffect(()=>(b(),()=>y()),[]),t.jsx("canvas",{ref:p,role:"img",height:s,width:r,...g,children:m})}const jee=C.forwardRef(Nee);function $w(a,e){return Eu.register(e),C.forwardRef((s,r)=>t.jsx(jee,{...s,ref:r,type:a}))}const Wi=$w("line",aJ),vc=$w("bar",sJ),Cu=$w("doughnut",zI),_ee=$w("pie",nJ);Eu.register(Gp,Wp,Hp,Up,Fu,Qp,$p,qp,zp,Vp);const rF="/backend/api",GN={Business:"#4CAF50",Franchise:"#4A90E2",Building:"#FDA811",Barangay:"#9C27B0"},Cee={Business:Ba,Franchise:yd,Building:Ur,Barangay:rn},wf={Approved:"#4CAF50",Pending:"#FDA811",Rejected:"#E53935",Compliance:"#4A90E2"},aF=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ry=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};function nF(){const[a,e]=C.useState("dashboard"),[s,r]=C.useState(!0),[n,i]=C.useState(null),[o,l]=C.useState(null),[c,u]=C.useState(""),[m,A]=C.useState("all"),[g,p]=C.useState(!1),[v,b]=C.useState(""),y=C.useRef(null),w=C.useRef(null),B=C.useCallback(async()=>{try{r(!0),i(null),console.log("Fetching dashboard data from:",`${rF}/dashboard_stats.php`);const V=await fetch(`${rF}/dashboard_stats.php`,{method:"GET",headers:{Accept:"application/json"}});if(console.log("Response status:",V.status),!V.ok)throw new Error(`Server error: ${V.status}`);const O=await V.json();if(console.log("Dashboard API Response:",O),O.success)console.log("Business stats:",O.business),console.log("Franchise stats:",O.franchise),console.log("Barangay stats:",O.barangay),console.log("Building stats:",O.building),l(O);else throw new Error(O.message||"Failed to fetch dashboard data")}catch(V){console.error("Error fetching dashboard data:",V),i(V.message)}finally{r(!1)}},[]);C.useEffect(()=>{B()},[B]);const j=C.useMemo(()=>{if(!o)return{total:0,approved:0,pending:0,rejected:0,business:{},franchise:{},barangay:{},building:{}};const V=o.business||{},O=o.franchise||{},X=o.barangay||{},$=o.building||{},H=(V.total||0)+(O.total||0)+(X.total||0)+($.total||0),te=(V.approved||0)+(O.approved||0)+(X.approved||0)+($.approved||0),K=(V.pending||0)+(O.pending||0)+(X.pending||0)+($.pending||0),I=(V.rejected||0)+(O.rejected||0)+(X.rejected||0)+($.rejected||0);return{total:H,approved:te,pending:K,rejected:I,business:V,franchise:O,barangay:X,building:$}},[o]),E=C.useMemo(()=>{if(!o)return[];const V=[...o.business?.recent||[],...o.franchise?.recent||[],...o.barangay?.recent||[],...o.building?.recent||[]];V.sort((X,$)=>{const H=new Date(X.date||0);return new Date($.date||0)-H});let O=V;if(m!=="all"&&(O=O.filter(X=>X.permit_type===m)),c.trim()){const X=c.toLowerCase();O=O.filter($=>$.applicant?.toLowerCase().includes(X)||$.id?.toLowerCase().includes(X)||$.business_name?.toLowerCase().includes(X)||$.type?.toLowerCase().includes(X))}return O},[o,m,c]),S=C.useMemo(()=>{if(!o)return null;const V=[...o.business?.recent||[],...o.franchise?.recent||[],...o.barangay?.recent||[],...o.building?.recent||[]];return V.length===0?null:(V.sort((O,X)=>{const $=new Date(O.date||0);return new Date(X.date||0)-$}),V[0])},[o]),T=C.useMemo(()=>{if(!o)return[];const V=[...o.business?.recent||[],...o.franchise?.recent||[],...o.barangay?.recent||[],...o.building?.recent||[]],O=new Date;return O.setHours(0,0,0,0),V.filter(X=>{if(!X.date)return!1;const $=new Date(X.date);return $.setHours(0,0,0,0),$.getTime()===O.getTime()})},[o]),M=C.useMemo(()=>{if(!o)return{labels:[],applications:[],approvals:[],rejections:[]};const V={},O=H=>{H&&H.forEach(te=>{te.month&&(V[te.month]||(V[te.month]={count:0,approved:0,rejected:0}),V[te.month].count+=parseInt(te.count||0),V[te.month].approved+=parseInt(te.approved||0),V[te.month].rejected+=parseInt(te.rejected||0))})};O(o.business?.monthly),O(o.franchise?.monthly),O(o.barangay?.monthly),O(o.building?.monthly);const X=Object.keys(V).sort();return{labels:X.map(H=>{const te=H.split("-");return aF[parseInt(te[1])-1]+" "+te[0].slice(2)}),applications:X.map(H=>V[H].count),approvals:X.map(H=>V[H].approved),rejections:X.map(H=>V[H].rejected)}},[o]),D=C.useMemo(()=>{if(!o)return{labels:[],data:[]};const V={},O=($,H)=>{$&&$.forEach(te=>{const K=te.week_start||te.week_num;K&&(V[K]||(V[K]={total:0,label:te.week_start?ry(te.week_start):`W${te.week_num}`}),V[K].total+=parseInt(te.count||0))})};O(o.business?.weekly),O(o.franchise?.weekly),O(o.barangay?.weekly),O(o.building?.weekly);const X=Object.keys(V).sort();return{labels:X.map($=>V[$].label),data:X.map($=>V[$].total)}},[o]),P=C.useMemo(()=>{if(!o)return{labels:[],business:[],franchise:[],barangay:[],building:[]};const V=new Set,O={business:{},franchise:{},barangay:{},building:{}},X=(te,K)=>{te&&te.forEach(I=>{I.month&&(V.add(I.month),O[K][I.month]=parseInt(I.count||0))})};X(o.business?.monthly,"business"),X(o.franchise?.monthly,"franchise"),X(o.barangay?.monthly,"barangay"),X(o.building?.monthly,"building");const $=Array.from(V).sort();return{labels:$.map(te=>{const K=te.split("-");return aF[parseInt(K[1])-1]+" "+K[0].slice(2)}),business:$.map(te=>O.business[te]||0),franchise:$.map(te=>O.franchise[te]||0),barangay:$.map(te=>O.barangay[te]||0),building:$.map(te=>O.building[te]||0)}},[o]),Y=async()=>{p(!0),b("pdf");try{const V=new Es("p","mm","a4"),O=V.internal.pageSize.getWidth(),X=V.internal.pageSize.getHeight(),$=14,H=O-$*2,te=H/4,K=H/2;let I=0,R=1;const G=3,se=He=>{V.setDrawColor(200,200,200),V.line($,X-13,O-$,X-13),V.setFontSize(7),V.setFont("helvetica","normal"),V.setTextColor(150,150,150),V.text("Permit Licensing Management System  Admin Dashboard Report",$,X-8),V.text(`Page ${He} of ${G}`,O-$,X-8,{align:"right"})},le=(He,xt)=>(V.setFillColor(240,240,240),V.roundedRect($,xt,H,8,1,1,"F"),V.setFontSize(10),V.setFont("helvetica","bold"),V.setTextColor(77,74,74),V.text(He,$+4,xt+5.5),xt+12),ye=(He,xt,Xe,Ct)=>{let _e=Ct;V.setFillColor(76,175,80),V.rect($,_e,H,7,"F"),V.setTextColor(255,255,255),V.setFontSize(7),V.setFont("helvetica","bold");let Se=$+2;return He.forEach((Ve,et)=>{V.text(Ve,Se,_e+5),Se+=Xe[et]}),_e+=7,xt.forEach((Ve,et)=>{_e>X-20&&(se(R),V.addPage(),R++,_e=15),V.setFillColor(et%2===0?255:248,et%2===0?255:248,et%2===0?255:248),V.rect($,_e,H,6.5,"F"),V.setTextColor(77,74,74),V.setFontSize(6.5),V.setFont("helvetica","normal"),Se=$+2,Ve.forEach((vt,Mt)=>{const Ye=String(vt);if(He[Mt]==="Status"){const Et=Ye.toLowerCase();Et==="approved"?V.setTextColor(76,175,80):Et==="pending"?V.setTextColor(253,168,17):Et==="rejected"&&V.setTextColor(229,57,53),V.setFont("helvetica","bold")}V.text(Ye.substring(0,Math.floor(Xe[Mt]/1.8)),Se,_e+4.5),V.setTextColor(77,74,74),V.setFont("helvetica","normal"),Se+=Xe[Mt]}),_e+=6.5}),_e},De=[{name:"Business",...j.business},{name:"Franchise",...j.franchise},{name:"Barangay",...j.barangay},{name:"Building",...j.building}].sort((He,xt)=>(xt.total||0)-(He.total||0)),me=De[0]||{},Te=De[De.length-1]||{},we=[...De].sort((He,xt)=>{const Xe=(He.total||0)>0?(He.approved||0)/He.total:0;return((xt.total||0)>0?(xt.approved||0)/xt.total:0)-Xe})[0]||{},st=(we.total||0)>0?((we.approved||0)/we.total*100).toFixed(1):"0";V.setFillColor(76,175,80),V.rect(0,0,O,30,"F"),V.setFillColor(56,142,60),V.rect(0,30,O,3,"F"),V.setTextColor(255,255,255),V.setFontSize(22),V.setFont("helvetica","bold"),V.text("Admin Dashboard Report",$,15),V.setFontSize(10),V.setFont("helvetica","normal"),V.text("Permit Licensing Management System  Comprehensive Analytics",$,24),V.setFontSize(8),V.text(`Generated: ${new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})} at ${new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}`,O-$,15,{align:"right"}),V.text(`Total Records: ${j.total} applications across 4 permit types`,O-$,24,{align:"right"}),I=le("1. Summary Statistics",40),[{label:"Total Applications",value:j.total.toString(),color:[76,175,80]},{label:"Approved",value:j.approved.toString(),color:[76,175,80]},{label:"Pending",value:j.pending.toString(),color:[253,168,17]},{label:"Rejected",value:j.rejected.toString(),color:[229,57,53]}].forEach((He,xt)=>{const Xe=$+xt*te;V.setFillColor(248,248,248),V.roundedRect(Xe,I,te-3,18,2,2,"F"),V.setFontSize(7.5),V.setFont("helvetica","normal"),V.setTextColor(120,120,120),V.text(He.label,Xe+4,I+7),V.setFontSize(16),V.setFont("helvetica","bold"),V.setTextColor(...He.color),V.text(He.value,Xe+4,I+15.5)}),I=le("2. Performance Rates",I+24),[{label:"Approval Rate",value:`${L}%`,color:[76,175,80]},{label:"Pending Rate",value:`${ne}%`,color:[253,168,17]},{label:"Rejection Rate",value:`${ae}%`,color:[229,57,53]},{label:"Compliance / Under Review",value:String((j.business.compliance||0)+(j.franchise.under_review||0)),color:[74,144,226]}].forEach((He,xt)=>{const Xe=$+xt*te;V.setFillColor(248,248,248),V.roundedRect(Xe,I,te-3,18,2,2,"F"),V.setFontSize(7.5),V.setFont("helvetica","normal"),V.setTextColor(120,120,120),V.text(He.label,Xe+4,I+7),V.setFontSize(14),V.setFont("helvetica","bold"),V.setTextColor(...He.color),V.text(He.value,Xe+4,I+15.5)}),I=le("3. Key Insights",I+24),[{label:"Highest Volume Permit",value:`${me.name||"N/A"} (${me.total||0} applications)`,color:[76,175,80]},{label:"Lowest Volume Permit",value:`${Te.name||"N/A"} (${Te.total||0} applications)`,color:[229,57,53]},{label:"Best Approval Rate",value:`${we.name||"N/A"} (${st}%)`,color:[74,144,226]},{label:"Active Permit Types",value:`${De.filter(He=>(He.total||0)>0).length} of 4 types have data`,color:[156,39,176]}].forEach((He,xt)=>{const Xe=$+xt*te;V.setFillColor(248,248,248),V.roundedRect(Xe,I,te-3,18,2,2,"F"),V.setFontSize(7),V.setFont("helvetica","normal"),V.setTextColor(120,120,120),V.text(He.label,Xe+4,I+7),V.setFontSize(9),V.setFont("helvetica","bold"),V.setTextColor(...He.color);const Ct=V.splitTextToSize(He.value,te-10);V.text(Ct,Xe+4,I+13)}),I=le("4. Per Permit Type Breakdown",I+24);const gt={Business:[76,175,80],Franchise:[74,144,226],Barangay:[156,39,176],Building:[253,168,17]},q=["Permit Type","Total","Approved","Pending","Rejected","Approval Rate","Share of Total"],Qt=[30,22,22,22,22,28,28],yt=De.map(He=>{const xt=He.total||0,Xe=He.approved||0,Ct=He.pending||0,_e=He.rejected||0,Se=xt>0?(Xe/xt*100).toFixed(1)+"%":"0%",Ve=j.total>0?(xt/j.total*100).toFixed(1)+"%":"0%";return[He.name,String(xt),String(Xe),String(Ct),String(_e),Se,Ve]});if(yt.push(["TOTAL",String(j.total),String(j.approved),String(j.pending),String(j.rejected),`${L}%`,"100%"]),I=ye(q,yt,Qt,I),I+=4,[{name:"Business",data:j.business,color:[76,175,80]},{name:"Franchise",data:j.franchise,color:[74,144,226]},{name:"Barangay",data:j.barangay,color:[156,39,176]},{name:"Building",data:j.building,color:[253,168,17]}].forEach((He,xt)=>{const Xe=$+xt*te;V.setFillColor(...He.color),V.roundedRect(Xe,I,te-3,22,2,2,"F"),V.setTextColor(255,255,255),V.setFontSize(9),V.setFont("helvetica","bold"),V.text(He.name,Xe+4,I+7),V.setFontSize(14),V.text(String(He.data.total||0),Xe+4,I+15),V.setFontSize(6.5),V.setFont("helvetica","normal");const Ct=(He.data.total||0)>0?((He.data.approved||0)/He.data.total*100).toFixed(0):0;V.text(`A:${He.data.approved||0}(${Ct}%) P:${He.data.pending||0} R:${He.data.rejected||0}`,Xe+4,I+20)}),se(R),V.addPage(),R++,I=15,I=le("5. Monthly Application Trends (Last 12 Months)",I),M.labels.length>0){const He=["Month","Total Apps","Approved","Rejected","Pending (est.)","Approval Rate"],xt=[28,28,28,28,28,28],Xe=M.labels.map((ee,Ie)=>{const ue=M.applications[Ie]||0,fe=M.approvals[Ie]||0,xe=M.rejections[Ie]||0,Me=Math.max(0,ue-fe-xe),ct=ue>0?(fe/ue*100).toFixed(1)+"%":"";return[ee,String(ue),String(fe),String(xe),String(Me),ct]}),Ct=M.applications.reduce((ee,Ie)=>ee+Ie,0),_e=M.approvals.reduce((ee,Ie)=>ee+Ie,0),Se=M.rejections.reduce((ee,Ie)=>ee+Ie,0),Ve=Math.max(0,Ct-_e-Se),et=Ct>0?(_e/Ct*100).toFixed(1)+"%":"";Xe.push(["TOTAL",String(Ct),String(_e),String(Se),String(Ve),et]);let vt="",Mt=0,Ye="",Et=1/0;M.labels.forEach((ee,Ie)=>{const ue=M.applications[Ie]||0;ue>Mt&&(Mt=ue,vt=ee),ue<Et&&(Et=ue,Ye=ee)}),I=ye(He,Xe,xt,I),I+=4,V.setFontSize(8),V.setFont("helvetica","bold"),V.setTextColor(76,175,80),V.text(`Peak Month: ${vt} (${Mt} applications)`,$,I),V.setTextColor(229,57,53),V.text(`Lowest Month: ${Ye} (${Et} applications)`,$+H/2,I),I+=5,V.setFont("helvetica","normal"),V.setTextColor(100,100,100);const Gt=M.labels.length>0?(Ct/M.labels.length).toFixed(1):"0";V.text(`Average per month: ${Gt} applications | Data covers ${M.labels.length} month(s)`,$,I)}else V.setFontSize(9),V.setTextColor(150,150,150),V.text("No monthly trend data available.",$,I+5),I+=12;if(I+=8,I=le("6. Weekly Application Trends (Last 8 Weeks)",I),D.labels.length>0){const He=["Week Starting","Total Applications","Avg Daily (est.)"],xt=[60,55,55],Xe=D.labels.map((Mt,Ye)=>{const Et=D.data[Ye]||0,Gt=(Et/7).toFixed(1);return[Mt,String(Et),Gt]}),Ct=D.data.reduce((Mt,Ye)=>Mt+Ye,0),_e=D.labels.length>0?(Ct/D.labels.length).toFixed(1):"0";Xe.push(["TOTAL / AVG",String(Ct),_e]);let Se="",Ve=0,et="",vt=1/0;D.labels.forEach((Mt,Ye)=>{const Et=D.data[Ye]||0;Et>Ve&&(Ve=Et,Se=Mt),Et<vt&&(vt=Et,et=Mt)}),I=ye(He,Xe,xt,I),I+=4,V.setFontSize(8),V.setFont("helvetica","bold"),V.setTextColor(76,175,80),V.text(`Busiest Week: ${Se} (${Ve} applications)`,$,I),V.setTextColor(229,57,53),V.text(`Slowest Week: ${et} (${vt} applications)`,$+H/2,I),I+=5,V.setFont("helvetica","normal"),V.setTextColor(100,100,100),V.text(`Weekly average: ${_e} applications | Data covers ${D.labels.length} week(s)`,$,I)}else V.setFontSize(9),V.setTextColor(150,150,150),V.text("No weekly trend data available.",$,I+5),I+=12;if(I+=8,I=le("7. Monthly Breakdown by Permit Type",I),P.labels.length>0){const He=["Month","Business","Franchise","Barangay","Building","Total"],xt=[28,28,28,28,28,28],Xe=P.labels.map((_e,Se)=>{const Ve=P.business[Se]||0,et=P.franchise[Se]||0,vt=P.barangay[Se]||0,Mt=P.building[Se]||0;return[_e,String(Ve),String(et),String(vt),String(Mt),String(Ve+et+vt+Mt)]}),Ct=["TOTAL",String(P.business.reduce((_e,Se)=>_e+Se,0)),String(P.franchise.reduce((_e,Se)=>_e+Se,0)),String(P.barangay.reduce((_e,Se)=>_e+Se,0)),String(P.building.reduce((_e,Se)=>_e+Se,0)),String(P.business.reduce((_e,Se)=>_e+Se,0)+P.franchise.reduce((_e,Se)=>_e+Se,0)+P.barangay.reduce((_e,Se)=>_e+Se,0)+P.building.reduce((_e,Se)=>_e+Se,0))];Xe.push(Ct),I=ye(He,Xe,xt,I)}else V.setFontSize(9),V.setTextColor(150,150,150),V.text("No per-type monthly data available.",$,I+5);se(R),V.addPage(),R++,I=15,I=le("8. Recent Applications (All Permit Types)",I);const ze=["#","ID","Applicant","Permit Type","App. Type","Date","Status"],Le=[8,22,42,26,30,26,20],oe=E.slice(0,20).map((He,xt)=>[String(xt+1),He.id||"",He.applicant||"N/A",He.permit_type||"",He.type||"N/A",He.date?new Date(He.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"}):"N/A",He.status||""]);oe.length>0?I=ye(ze,oe,Le,I):(V.setFontSize(9),V.setTextColor(150,150,150),V.text("No recent applications to display.",$,I+5),I+=12),I+=6,I=le("9. Application Status Summary",I);const he=[["Approved",String(j.approved),`${L}%`,"Applications that have been reviewed and approved"],["Pending",String(j.pending),`${ne}%`,"Applications awaiting review or action"],["Rejected",String(j.rejected),`${ae}%`,"Applications that were denied or returned"]];(j.business.compliance||0)>0&&he.push(["Compliance",String(j.business.compliance),`${j.total>0?(j.business.compliance/j.total*100).toFixed(1):0}%`,"Business permits under compliance review"]),(j.franchise.under_review||0)>0&&he.push(["Under Review",String(j.franchise.under_review),`${j.total>0?(j.franchise.under_review/j.total*100).toFixed(1):0}%`,"Franchise permits under detailed review"]),I=ye(["Status","Count","Percentage","Description"],he,[30,25,25,94],I),I+=6,I=le("10. Permit Type Rankings & Analysis",I);const Qe=["Rank","Permit Type","Total","Approved","Approval Rate","Share"],Ze=[15,35,25,25,35,30],J=De.map((He,xt)=>{const Xe=He.total||0,Ct=He.approved||0,_e=Xe>0?(Ct/Xe*100).toFixed(1)+"%":"0%",Se=j.total>0?(Xe/j.total*100).toFixed(1)+"%":"0%";return[`#${xt+1}`,He.name,String(Xe),String(Ct),_e,Se]});I=ye(Qe,J,Ze,I),I+=8,V.setFillColor(248,248,248),V.roundedRect($,I,H,20,2,2,"F"),V.setFontSize(8),V.setFont("helvetica","bold"),V.setTextColor(77,74,74),V.text("Report Notes:",$+4,I+6),V.setFont("helvetica","normal"),V.setTextColor(120,120,120),V.setFontSize(7),V.text(` This report was auto-generated from live database records on ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}.`,$+4,I+11),V.text(` Data covers ${M.labels.length} months and ${D.labels.length} weeks of application history across 4 permit databases.`,$+4,I+15),se(R),V.save(`admin-dashboard-report-${new Date().toISOString().split("T")[0]}.pdf`)}catch(V){console.error("PDF export error:",V),alert("Failed to generate PDF. Please try again.")}finally{p(!1),b("")}},Q=()=>{p(!0),b("csv");try{const V=["ID","Applicant","Permit Type","Application Type","Status","Date","Business Name"],O=E.map(I=>[I.id,I.applicant,I.permit_type,I.type,I.status,I.date,I.business_name||""]),X=[[],["=== DASHBOARD SUMMARY ==="],["Total Applications",j.total],["Approved",j.approved],["Pending",j.pending],["Rejected",j.rejected],[],["=== PER TYPE BREAKDOWN ==="],["Type","Total","Approved","Pending","Rejected"],["Business",j.business.total||0,j.business.approved||0,j.business.pending||0,j.business.rejected||0],["Franchise",j.franchise.total||0,j.franchise.approved||0,j.franchise.pending||0,j.franchise.rejected||0],["Barangay",j.barangay.total||0,j.barangay.approved||0,j.barangay.pending||0,j.barangay.rejected||0],["Building",j.building.total||0,j.building.approved||0,j.building.pending||0,j.building.rejected||0]],$=[V.join(","),...O.map(I=>I.map(R=>`"${String(R).replace(/"/g,'""')}"`).join(",")),...X.map(I=>I.join(","))].join(`
`),H=new Blob(["\uFEFF"+$],{type:"text/csv;charset=utf-8;"}),te=URL.createObjectURL(H),K=document.createElement("a");K.href=te,K.download=`admin-dashboard-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(K),K.click(),document.body.removeChild(K),URL.revokeObjectURL(te)}catch(V){console.error("CSV export error:",V)}finally{p(!1),b("")}};if(s)return t.jsx("div",{className:"min-h-screen p-4 md:p-6 bg-[#FBFBFB] font-poppins flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-[#4CAF50] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-[#4D4A4A] font-montserrat",children:"Loading dashboard data..."})]})});if(n&&!o)return t.jsx("div",{className:"min-h-screen p-4 md:p-6 bg-[#FBFBFB] font-poppins flex items-center justify-center",children:t.jsxs("div",{className:"text-center bg-white rounded-lg p-8 shadow-sm border border-[#E9E7E7] max-w-md",children:[t.jsx(Ks,{className:"w-12 h-12 text-[#E53935] mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat mb-2",children:"Failed to Load Dashboard"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 mb-4",children:n}),t.jsxs("button",{onClick:B,className:"bg-[#4CAF50] text-white px-6 py-2 rounded-lg hover:bg-[#45a049] transition-colors font-montserrat",children:[t.jsx(Ya,{className:"w-4 h-4 inline mr-2"}),"Retry"]})]})});const L=j.total>0?(j.approved/j.total*100).toFixed(1):0,ae=j.total>0?(j.rejected/j.total*100).toFixed(1):0,ne=j.total>0?(j.pending/j.total*100).toFixed(1):0;return t.jsxs("div",{className:"min-h-screen p-4 md:p-6 bg-[#FBFBFB] font-poppins",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-[#4D4A4A] font-montserrat",children:"Admin Dashboard"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 mt-2",children:"Real-time overview of all permit types and system-wide analytics"})]}),t.jsxs("div",{className:"flex items-center space-x-3 mt-3 md:mt-0",children:[t.jsxs("button",{onClick:B,disabled:s,className:"flex items-center space-x-2 bg-white border border-[#E9E7E7] text-[#4D4A4A] px-4 py-2 rounded-lg hover:bg-[#FBFBFB] transition-colors font-montserrat text-sm",children:[t.jsx(Ya,{className:`w-4 h-4 ${s?"animate-spin":""}`}),t.jsx("span",{children:"Refresh"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>p(!g),className:"flex items-center space-x-2 bg-[#4CAF50] text-white px-4 py-2 rounded-lg hover:bg-[#45a049] transition-colors font-montserrat text-sm",children:[t.jsx(nn,{className:"w-4 h-4"}),t.jsx("span",{children:"Export"})]}),g&&!v&&t.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-[#E9E7E7] py-2 z-50",children:[t.jsxs("button",{onClick:Y,className:"w-full text-left px-4 py-2 text-sm text-[#4D4A4A] hover:bg-[#FBFBFB] font-poppins flex items-center",children:[t.jsx(Kt,{className:"w-4 h-4 mr-2 text-[#E53935]"})," Export as PDF"]}),t.jsxs("button",{onClick:Q,className:"w-full text-left px-4 py-2 text-sm text-[#4D4A4A] hover:bg-[#FBFBFB] font-poppins flex items-center",children:[t.jsx(oB,{className:"w-4 h-4 mr-2 text-[#4CAF50]"})," Export as CSV"]})]})]})]})]})}),t.jsx("div",{className:"flex border-b border-[#E9E7E7] mb-6 bg-white rounded-lg p-1",children:[{key:"dashboard",label:"Dashboard",icon:T2},{key:"analytics",label:"Analytics",icon:bd},{key:"reports",label:"Reports",icon:Kt}].map(V=>t.jsxs("button",{className:`py-2 px-6 font-medium font-montserrat rounded-lg transition-all flex items-center space-x-2 ${a===V.key?"bg-[#4CAF50] text-white":"text-[#4D4A4A] hover:bg-[#FBFBFB]"}`,onClick:()=>e(V.key),children:[t.jsx(V.icon,{className:"w-4 h-4"}),t.jsx("span",{children:V.label})]},V.key))}),a==="dashboard"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[{title:"Total Applications",value:j.total,icon:Kt,color:"#4CAF50",sub:"Across all permit types"},{title:"Approved",value:j.approved,icon:Us,color:"#4CAF50",sub:`${L}% approval rate`},{title:"Pending",value:j.pending,icon:jr,color:"#FDA811",sub:`${ne}% awaiting review`},{title:"Rejected",value:j.rejected,icon:Ka,color:"#E53935",sub:`${ae}% rejection rate`}].map((V,O)=>t.jsx("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] transition-all hover:shadow-md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:V.title}),t.jsx("p",{className:"text-2xl font-bold text-[#4D4A4A] mt-2 font-montserrat",children:V.value}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60 mt-1",children:V.sub})]}),t.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:V.color},children:t.jsx(V.icon,{className:"w-6 h-6 text-white"})})]})},O))}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[{name:"Business",data:j.business,icon:Ba,color:"#4CAF50"},{name:"Franchise",data:j.franchise,icon:yd,color:"#4A90E2"},{name:"Barangay",data:j.barangay,icon:rn,color:"#9C27B0"},{name:"Building",data:j.building,icon:Ur,color:"#FDA811"}].map((V,O)=>t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] hover:shadow-md transition-all",style:{borderTopWidth:"3px",borderTopColor:V.color},children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${V.color}15`},children:t.jsx(V.icon,{className:"w-5 h-5",style:{color:V.color}})}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-semibold text-[#4D4A4A] font-montserrat",children:[V.name," Permit"]}),t.jsx("p",{className:"text-xl font-bold font-montserrat",style:{color:V.color},children:V.data.total||0})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[t.jsxs("div",{className:"bg-[#4CAF50]/10 rounded-lg py-1.5",children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60",children:"Approved"}),t.jsx("p",{className:"text-sm font-bold text-[#4CAF50]",children:V.data.approved||0})]}),t.jsxs("div",{className:"bg-[#FDA811]/10 rounded-lg py-1.5",children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60",children:"Pending"}),t.jsx("p",{className:"text-sm font-bold text-[#FDA811]",children:V.data.pending||0})]}),t.jsxs("div",{className:"bg-[#E53935]/10 rounded-lg py-1.5",children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60",children:"Rejected"}),t.jsx("p",{className:"text-sm font-bold text-[#E53935]",children:V.data.rejected||0})]})]})]},O))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Applications by Permit Type"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Distribution across all permit categories"})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(vc,{data:{labels:["Business","Franchise","Building","Barangay"],datasets:[{label:"Total",data:[j.business.total||0,j.franchise.total||0,j.building.total||0,j.barangay.total||0],backgroundColor:["#4CAF50","#4A90E2","#FDA811","#9C27B0"],borderRadius:8,borderWidth:0},{label:"Approved",data:[j.business.approved||0,j.franchise.approved||0,j.building.approved||0,j.barangay.approved||0],backgroundColor:["#4CAF5080","#4A90E280","#FDA81180","#9C27B080"],borderRadius:8,borderWidth:0}]},options:{maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#4D4A4A",font:{family:"Poppins"},usePointStyle:!0}}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Status Distribution"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Overall approval status"})]}),t.jsx("div",{className:"h-[250px] flex items-center justify-center",children:t.jsx(Cu,{data:{labels:["Approved","Pending","Rejected"],datasets:[{data:[j.approved,j.pending,j.rejected],backgroundColor:["#4CAF50","#FDA811","#E53935"],hoverBackgroundColor:["#45a049","#fc9d0b","#d32f2f"],borderColor:"#ffffff",borderWidth:3}]},options:{maintainAspectRatio:!1,cutout:"65%",plugins:{legend:{position:"bottom",labels:{color:"#4D4A4A",font:{family:"Poppins"},padding:15,usePointStyle:!0}}}}})}),t.jsxs("div",{className:"text-center -mt-2",children:[t.jsx("p",{className:"text-2xl font-bold text-[#4D4A4A] font-montserrat",children:j.total}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60",children:"Total"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] mb-6",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Monthly Application Trends"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Total applications, approvals, and rejections over time"})]}),t.jsx("div",{className:"h-[280px]",children:t.jsx(Wi,{data:{labels:M.labels,datasets:[{label:"Total Applications",data:M.applications,borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.08)",tension:.4,fill:!0,pointRadius:4,pointBackgroundColor:"#4CAF50",borderWidth:2},{label:"Approved",data:M.approvals,borderColor:"#4A90E2",backgroundColor:"rgba(74, 144, 226, 0.08)",tension:.4,fill:!0,pointRadius:4,pointBackgroundColor:"#4A90E2",borderWidth:2},{label:"Rejected",data:M.rejections,borderColor:"#E53935",backgroundColor:"rgba(229, 57, 53, 0.05)",tension:.4,fill:!0,pointRadius:4,pointBackgroundColor:"#E53935",borderWidth:2}]},options:{maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#4D4A4A",font:{family:"Poppins"},usePointStyle:!0}}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins",size:10}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-[#4D4A4A] font-montserrat",children:"Most Recent Application"}),t.jsx(jr,{className:"w-4 h-4 text-[#4CAF50]"})]}),S?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-mono font-semibold text-[#4D4A4A]",children:S.id}),t.jsxs("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 mt-1",children:[S.permit_type," Permit"]})]}),t.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full",style:{backgroundColor:`${wf[S.status]||"#4D4A4A"}15`,color:wf[S.status]||"#4D4A4A"},children:S.status})]}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(gr,{className:"w-4 h-4 text-[#4D4A4A] text-opacity-50 mr-2"}),t.jsx("span",{className:"text-[#4D4A4A] truncate",children:S.applicant||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Kt,{className:"w-4 h-4 text-[#4D4A4A] text-opacity-50 mr-2"}),t.jsx("span",{className:"text-[#4D4A4A] text-opacity-70 text-xs truncate",children:S.type||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(bn,{className:"w-4 h-4 text-[#4D4A4A] text-opacity-50 mr-2"}),t.jsx("span",{className:"text-[#4D4A4A] text-opacity-70 text-xs",children:ry(S.date)})]})]})]}):t.jsxs("div",{className:"text-center py-6",children:[t.jsx(Kt,{className:"w-8 h-8 text-[#4D4A4A] text-opacity-30 mx-auto mb-2"}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60 font-poppins",children:"No applications yet"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-[#4D4A4A] font-montserrat",children:"Today's Applications"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(bn,{className:"w-4 h-4 text-[#4A90E2]"}),t.jsx("span",{className:"text-lg font-bold text-[#4A90E2] font-montserrat",children:T.length})]})]}),T.length>0?t.jsxs("div",{className:"space-y-2",children:[T.slice(0,3).map((V,O)=>t.jsxs("div",{className:"flex items-center justify-between p-2 bg-[#FBFBFB] rounded-lg border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[t.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:GN[V.permit_type]||"#4D4A4A"}}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-xs font-mono font-semibold text-[#4D4A4A] truncate",children:V.id}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 truncate",children:V.applicant})]})]}),t.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full flex-shrink-0 ml-2",style:{backgroundColor:`${wf[V.status]||"#4D4A4A"}15`,color:wf[V.status]||"#4D4A4A"},children:V.status})]},O)),T.length>3&&t.jsxs("p",{className:"text-xs text-center text-[#4D4A4A] text-opacity-60 mt-2",children:["+",T.length-3," more today"]})]}):t.jsxs("div",{className:"text-center py-6",children:[t.jsx(bn,{className:"w-8 h-8 text-[#4D4A4A] text-opacity-30 mx-auto mb-2"}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60 font-poppins",children:"No applications today"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"text-sm font-semibold text-[#4D4A4A] font-montserrat",children:"Permit Type Share"}),t.jsx(T2,{className:"w-4 h-4 text-[#4D4A4A] text-opacity-50"})]}),t.jsx("div",{className:"space-y-2",children:[{name:"Business",count:j.business.total||0,color:"#4CAF50"},{name:"Franchise",count:j.franchise.total||0,color:"#4A90E2"},{name:"Barangay",count:j.barangay.total||0,color:"#9C27B0"},{name:"Building",count:j.building.total||0,color:"#FDA811"}].map((V,O)=>{const X=j.total>0?(V.count/j.total*100).toFixed(0):0;return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[t.jsx("span",{className:"text-[#4D4A4A] font-poppins",children:V.name}),t.jsxs("span",{className:"font-bold",style:{color:V.color},children:[V.count," (",X,"%)"]})]}),t.jsx("div",{className:"bg-gray-100 rounded-full h-1.5",children:t.jsx("div",{className:"h-1.5 rounded-full transition-all",style:{width:`${X}%`,backgroundColor:V.color}})})]},O)})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"text-sm font-semibold text-[#4D4A4A] font-montserrat",children:"Status Overview"}),t.jsx(bd,{className:"w-4 h-4 text-[#4D4A4A] text-opacity-50"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-[#4CAF50] mr-2"}),t.jsx("span",{className:"text-xs text-[#4D4A4A] font-poppins",children:"Approved"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-sm font-bold text-[#4CAF50] font-montserrat",children:j.approved}),t.jsxs("span",{className:"text-xs text-[#4D4A4A] text-opacity-60 ml-1",children:["(",L,"%)"]})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-[#FDA811] mr-2"}),t.jsx("span",{className:"text-xs text-[#4D4A4A] font-poppins",children:"Pending"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-sm font-bold text-[#FDA811] font-montserrat",children:j.pending}),t.jsxs("span",{className:"text-xs text-[#4D4A4A] text-opacity-60 ml-1",children:["(",ne,"%)"]})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-[#E53935] mr-2"}),t.jsx("span",{className:"text-xs text-[#4D4A4A] font-poppins",children:"Rejected"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-sm font-bold text-[#E53935] font-montserrat",children:j.rejected}),t.jsxs("span",{className:"text-xs text-[#4D4A4A] text-opacity-60 ml-1",children:["(",ae,"%)"]})]})]}),(j.business.compliance>0||j.franchise.under_review>0)&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-[#4A90E2] mr-2"}),t.jsx("span",{className:"text-xs text-[#4D4A4A] font-poppins",children:"Compliance/Review"})]}),t.jsx("div",{className:"text-right",children:t.jsx("span",{className:"text-sm font-bold text-[#4A90E2] font-montserrat",children:(j.business.compliance||0)+(j.franchise.under_review||0)})})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"text-sm font-semibold text-[#4D4A4A] font-montserrat",children:"System Summary"}),t.jsx(oB,{className:"w-4 h-4 text-[#4D4A4A] text-opacity-50"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins",children:"Total Applications"}),t.jsx("span",{className:"text-lg font-bold text-[#4D4A4A] font-montserrat",children:j.total})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins",children:"Active Permit Types"}),t.jsx("span",{className:"text-lg font-bold text-[#4A90E2] font-montserrat",children:"4"})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins",children:"Approval Rate"}),t.jsxs("span",{className:"text-lg font-bold text-[#4CAF50] font-montserrat",children:[L,"%"]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins",children:"Data Points (Months)"}),t.jsx("span",{className:"text-lg font-bold text-[#FDA811] font-montserrat",children:M.labels.length})]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-[#E9E7E7] p-5",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Recent Permit Applications"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Latest applications across all permit types"})]}),t.jsxs("div",{className:"flex items-center space-x-3 mt-3 md:mt-0",children:[t.jsxs("div",{className:"relative",children:[t.jsx(sa,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-[#4D4A4A] text-opacity-50"}),t.jsx("input",{type:"text",placeholder:"Search applications...",value:c,onChange:V=>u(V.target.value),className:"pl-9 pr-4 py-2 bg-white border border-[#E9E7E7] rounded-lg text-sm text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins w-56"})]}),t.jsxs("select",{value:m,onChange:V=>A(V.target.value),className:"bg-white border border-[#E9E7E7] rounded-lg px-3 py-2 text-sm text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Types"}),t.jsx("option",{value:"Business",children:"Business"}),t.jsx("option",{value:"Franchise",children:"Franchise"}),t.jsx("option",{value:"Barangay",children:"Barangay"}),t.jsx("option",{value:"Building",children:"Building"})]})]})]}),E.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Kt,{className:"w-12 h-12 text-[#4D4A4A] text-opacity-30 mx-auto mb-3"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-60 font-poppins",children:"No recent applications found"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:E.slice(0,10).map((V,O)=>{const X=Cee[V.permit_type]||Kt,$=GN[V.permit_type]||"#4D4A4A",H=wf[V.status]||"#4D4A4A";return t.jsxs("div",{className:"border border-[#E9E7E7] rounded-lg p-4 hover:shadow-md transition-all cursor-pointer",style:{borderLeftWidth:"4px",borderLeftColor:$},children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${$}15`},children:t.jsx(X,{className:"w-5 h-5",style:{color:$}})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-mono font-semibold text-[#4D4A4A]",children:V.id}),t.jsxs("p",{className:"text-xs text-[#4D4A4A] text-opacity-70",children:[V.permit_type," Permit"]})]})]}),t.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full",style:{backgroundColor:`${H}15`,color:H},children:V.status})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(gr,{className:"w-4 h-4 text-[#4D4A4A] text-opacity-50 mr-2 flex-shrink-0"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] font-poppins truncate",children:V.applicant||"N/A"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(jr,{className:"w-4 h-4 text-[#4D4A4A] text-opacity-50 mr-2 flex-shrink-0"}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins",children:ry(V.date)})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Kt,{className:"w-4 h-4 text-[#4D4A4A] text-opacity-50 mr-2 flex-shrink-0"}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins truncate",children:V.type||"N/A"})]})]})]},`${V.id}-${O}`)})})]})]}),a==="analytics"&&t.jsxs("div",{className:"space-y-6",ref:y,children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("h2",{className:"text-xl font-bold text-[#4D4A4A] font-montserrat",children:"Analytics Overview"})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] border-l-4 border-l-[#4CAF50]",children:[t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 text-sm font-poppins",children:"Approval Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-[#4CAF50] font-montserrat mt-1",children:[L,"%"]}),t.jsx("div",{className:"mt-2 bg-gray-100 rounded-full h-2",children:t.jsx("div",{className:"bg-[#4CAF50] h-2 rounded-full",style:{width:`${L}%`}})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] border-l-4 border-l-[#FDA811]",children:[t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 text-sm font-poppins",children:"Pending Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-[#FDA811] font-montserrat mt-1",children:[ne,"%"]}),t.jsx("div",{className:"mt-2 bg-gray-100 rounded-full h-2",children:t.jsx("div",{className:"bg-[#FDA811] h-2 rounded-full",style:{width:`${ne}%`}})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] border-l-4 border-l-[#E53935]",children:[t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 text-sm font-poppins",children:"Rejection Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-[#E53935] font-montserrat mt-1",children:[ae,"%"]}),t.jsx("div",{className:"mt-2 bg-gray-100 rounded-full h-2",children:t.jsx("div",{className:"bg-[#E53935] h-2 rounded-full",style:{width:`${ae}%`}})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] border-l-4 border-l-[#4A90E2]",children:[t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 text-sm font-poppins",children:"Most Active Type"}),t.jsx("p",{className:"text-2xl font-bold text-[#4A90E2] font-montserrat mt-1",children:[{name:"Business",count:j.business.total||0},{name:"Franchise",count:j.franchise.total||0},{name:"Barangay",count:j.barangay.total||0},{name:"Building",count:j.building.total||0}].sort((O,X)=>X.count-O.count)[0]?.name||"N/A"}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60 mt-1",children:"Highest application volume"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Monthly Application Trends"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Applications, approvals, and rejections over time"})]}),t.jsx("div",{className:"h-80",children:t.jsx(Wi,{ref:w,data:{labels:M.labels,datasets:[{label:"Applications",data:M.applications,borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.4,fill:!0,pointRadius:4,pointBackgroundColor:"#4CAF50"},{label:"Approved",data:M.approvals,borderColor:"#4A90E2",backgroundColor:"rgba(74, 144, 226, 0.1)",tension:.4,fill:!0,pointRadius:4,pointBackgroundColor:"#4A90E2"},{label:"Rejected",data:M.rejections,borderColor:"#E53935",backgroundColor:"rgba(229, 57, 53, 0.05)",tension:.4,fill:!0,pointRadius:4,pointBackgroundColor:"#E53935"}]},options:{maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#4D4A4A",font:{family:"Poppins"},usePointStyle:!0}}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins",size:10}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Weekly Applications Trend"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Last 8 weeks application volume"})]}),t.jsx("div",{className:"h-80",children:t.jsx(Wi,{data:{labels:D.labels,datasets:[{label:"Applications",data:D.data,borderColor:"#4A90E2",backgroundColor:"rgba(74, 144, 226, 0.15)",tension:.4,fill:!0,pointRadius:5,pointBackgroundColor:"#4A90E2",pointBorderColor:"#fff",pointBorderWidth:2}]},options:{maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#4D4A4A",font:{family:"Poppins"},usePointStyle:!0}}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins",size:9},maxRotation:45},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Applications by Type (Monthly)"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Stacked breakdown per permit type"})]}),t.jsx("div",{className:"h-80",children:t.jsx(vc,{data:{labels:P.labels,datasets:[{label:"Business",data:P.business,backgroundColor:"#4CAF50",borderRadius:4},{label:"Franchise",data:P.franchise,backgroundColor:"#4A90E2",borderRadius:4},{label:"Barangay",data:P.barangay,backgroundColor:"#9C27B0",borderRadius:4},{label:"Building",data:P.building,backgroundColor:"#FDA811",borderRadius:4}]},options:{maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#4D4A4A",font:{family:"Poppins",size:11},usePointStyle:!0}}},scales:{x:{stacked:!0,ticks:{color:"#4D4A4A",font:{family:"Poppins",size:10}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{stacked:!0,ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Permit Type Distribution"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Proportion of each permit category"})]}),t.jsx("div",{className:"h-80",children:t.jsx(_ee,{data:{labels:["Business","Franchise","Barangay","Building"],datasets:[{data:[j.business.total||0,j.franchise.total||0,j.barangay.total||0,j.building.total||0],backgroundColor:["#4CAF50","#4A90E2","#9C27B0","#FDA811"],borderWidth:3,borderColor:"#fff"}]},options:{maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"#4D4A4A",font:{family:"Poppins",size:12},padding:15,usePointStyle:!0}}}}})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Status Comparison by Type"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Approved vs Pending vs Rejected per permit type"})]}),t.jsx("div",{className:"h-80",children:t.jsx(vc,{data:{labels:["Business","Franchise","Barangay","Building"],datasets:[{label:"Approved",data:[j.business.approved||0,j.franchise.approved||0,j.barangay.approved||0,j.building.approved||0],backgroundColor:"#4CAF50",borderRadius:4},{label:"Pending",data:[j.business.pending||0,j.franchise.pending||0,j.barangay.pending||0,j.building.pending||0],backgroundColor:"#FDA811",borderRadius:4},{label:"Rejected",data:[j.business.rejected||0,j.franchise.rejected||0,j.barangay.rejected||0,j.building.rejected||0],backgroundColor:"#E53935",borderRadius:4}]},options:{maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{labels:{color:"#4D4A4A",font:{family:"Poppins"},usePointStyle:!0}}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins",size:11}},grid:{display:!1}}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Approval Rate Comparison"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Approval percentage per permit type"})]}),t.jsx("div",{className:"h-80",children:t.jsx(vc,{data:{labels:["Business","Franchise","Barangay","Building"],datasets:[{label:"Approval Rate (%)",data:[j.business.total>0?((j.business.approved||0)/j.business.total*100).toFixed(1):0,j.franchise.total>0?((j.franchise.approved||0)/j.franchise.total*100).toFixed(1):0,j.barangay.total>0?((j.barangay.approved||0)/j.barangay.total*100).toFixed(1):0,j.building.total>0?((j.building.approved||0)/j.building.total*100).toFixed(1):0],backgroundColor:["#4CAF50","#4A90E2","#9C27B0","#FDA811"],borderRadius:8,borderWidth:0,barThickness:40}]},options:{maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:V=>`${V.parsed.y}%`}}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"},callback:V=>V+"%"},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0,max:100}}}})})]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat mb-4",children:"Per-Type Status Breakdown"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{name:"Business",data:j.business,color:"#4CAF50",icon:Ba},{name:"Franchise",data:j.franchise,color:"#4A90E2",icon:yd},{name:"Barangay",data:j.barangay,color:"#9C27B0",icon:rn},{name:"Building",data:j.building,color:"#FDA811",icon:Ur}].map((V,O)=>{const X=V.data.total||0,$=V.data.approved||0,H=V.data.pending||0,te=V.data.rejected||0,K=X>0?($/X*100).toFixed(0):0;return t.jsxs("div",{className:"border border-[#E9E7E7] rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[t.jsx(V.icon,{className:"w-5 h-5",style:{color:V.color}}),t.jsx("span",{className:"font-semibold text-[#4D4A4A] font-montserrat",children:V.name})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-[#4D4A4A] text-opacity-70",children:"Total"}),t.jsx("span",{className:"font-bold text-[#4D4A4A]",children:X})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-[#4CAF50]",children:"Approved"}),t.jsx("span",{className:"font-bold text-[#4CAF50]",children:$})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-[#FDA811]",children:"Pending"}),t.jsx("span",{className:"font-bold text-[#FDA811]",children:H})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-[#E53935]",children:"Rejected"}),t.jsx("span",{className:"font-bold text-[#E53935]",children:te})]}),t.jsxs("div",{className:"mt-2 pt-2 border-t border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[t.jsx("span",{className:"text-[#4D4A4A] text-opacity-60",children:"Approval Rate"}),t.jsxs("span",{className:"font-bold",style:{color:V.color},children:[K,"%"]})]}),t.jsx("div",{className:"bg-gray-100 rounded-full h-2",children:t.jsx("div",{className:"h-2 rounded-full",style:{width:`${K}%`,backgroundColor:V.color}})})]})]})]},O)})})]})]}),a==="reports"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-xl font-bold text-[#4D4A4A] font-montserrat",children:"Reports & Exports"}),t.jsxs("div",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:["Last generated: ",new Date().toLocaleDateString()]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-[#4CAF50]/10 rounded-lg flex items-center justify-center mr-4",children:t.jsx(Kt,{className:"w-6 h-6 text-[#4CAF50]"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-[#4D4A4A] font-montserrat",children:"Summary Report"}),t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:["Overview of all ",j.total," applications"]})]})]}),t.jsxs("div",{className:"mb-4 text-sm text-[#4D4A4A] text-opacity-70 space-y-1",children:[t.jsxs("p",{children:["Business: ",j.business.total||0," | Franchise: ",j.franchise.total||0]}),t.jsxs("p",{children:["Barangay: ",j.barangay.total||0," | Building: ",j.building.total||0]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:Y,className:"flex-1 bg-[#E53935] hover:bg-[#d32f2f] text-white py-2 px-3 rounded-lg text-sm transition-colors font-montserrat flex items-center justify-center",children:[t.jsx(rA,{className:"w-4 h-4 mr-1"})," PDF"]}),t.jsxs("button",{onClick:Q,className:"flex-1 bg-[#4CAF50] hover:bg-[#45a049] text-white py-2 px-3 rounded-lg text-sm transition-colors font-montserrat flex items-center justify-center",children:[t.jsx(Kf,{className:"w-4 h-4 mr-1"})," CSV"]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-[#4A90E2]/10 rounded-lg flex items-center justify-center mr-4",children:t.jsx(dl,{className:"w-6 h-6 text-[#4A90E2]"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-[#4D4A4A] font-montserrat",children:"Analytics Report"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:"Charts & trends analysis"})]})]}),t.jsxs("div",{className:"mb-4 text-sm text-[#4D4A4A] text-opacity-70 space-y-1",children:[t.jsxs("p",{children:["Approval Rate: ",L,"%"]}),t.jsxs("p",{children:["Monthly data points: ",M.labels.length," months"]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:Y,className:"flex-1 bg-[#E53935] hover:bg-[#d32f2f] text-white py-2 px-3 rounded-lg text-sm transition-colors font-montserrat flex items-center justify-center",children:[t.jsx(rA,{className:"w-4 h-4 mr-1"})," PDF"]}),t.jsxs("button",{onClick:Q,className:"flex-1 bg-[#4CAF50] hover:bg-[#45a049] text-white py-2 px-3 rounded-lg text-sm transition-colors font-montserrat flex items-center justify-center",children:[t.jsx(Kf,{className:"w-4 h-4 mr-1"})," CSV"]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-[#FDA811]/10 rounded-lg flex items-center justify-center mr-4",children:t.jsx(T2,{className:"w-6 h-6 text-[#FDA811]"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-[#4D4A4A] font-montserrat",children:"Per-Type Report"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:"Breakdown by permit type"})]})]}),t.jsxs("div",{className:"mb-4 text-sm text-[#4D4A4A] text-opacity-70 space-y-1",children:[t.jsx("p",{children:"4 permit categories analyzed"}),t.jsx("p",{children:"Status & trend breakdowns included"})]}),t.jsxs("button",{onClick:Q,className:"w-full bg-[#4CAF50] hover:bg-[#45a049] text-white py-2 rounded-lg text-sm transition-colors font-montserrat flex items-center justify-center",children:[t.jsx(Kf,{className:"w-4 h-4 mr-1"})," Generate Report"]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-[#E9E7E7] overflow-hidden",children:[t.jsxs("div",{className:"p-5 border-b border-[#E9E7E7]",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"All Recent Applications (Top 10)"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:"Live data from all permit databases"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-[#FBFBFB]",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"ID"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Applicant"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Permit Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Application Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Status"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-[#E9E7E7]",children:E.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-sm text-[#4D4A4A] text-opacity-60 font-poppins",children:"No applications found"})}):E.slice(0,10).map((V,O)=>{const X=GN[V.permit_type]||"#4D4A4A",$=wf[V.status]||"#4D4A4A";return t.jsxs("tr",{className:"hover:bg-[#FBFBFB] transition-colors",children:[t.jsx("td",{className:"px-6 py-4 text-sm font-mono font-semibold text-[#4D4A4A]",children:V.id}),t.jsx("td",{className:"px-6 py-4 text-sm text-[#4D4A4A] font-poppins",children:V.applicant||"N/A"}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:`${X}15`,color:X},children:V.permit_type})}),t.jsx("td",{className:"px-6 py-4 text-sm text-[#4D4A4A] font-poppins",children:V.type||"N/A"}),t.jsx("td",{className:"px-6 py-4 text-sm text-[#4D4A4A] font-poppins",children:ry(V.date)}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:`${$}15`,color:$},children:V.status})})]},`${V.id}-${O}`)})})]})})]})]}),g&&v&&t.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-xl text-center",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-[#4CAF50] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsxs("p",{className:"text-[#4D4A4A] font-montserrat",children:["Generating ",v.toUpperCase()," report..."]})]})})]})}function uL(a){var e,s,r="";if(typeof a=="string"||typeof a=="number")r+=a;else if(typeof a=="object")if(Array.isArray(a)){var n=a.length;for(e=0;e<n;e++)a[e]&&(s=uL(a[e]))&&(r&&(r+=" "),r+=s)}else for(s in a)a[s]&&(r&&(r+=" "),r+=s);return r}function Fi(){for(var a,e,s=0,r="",n=arguments.length;s<n;s++)(a=arguments[s])&&(e=uL(a))&&(r&&(r+=" "),r+=e);return r}const hL=6048e5,kee=864e5,qw=6e4,Gw=36e5,Bee=1e3,iF=Symbol.for("constructDateFrom");function Aa(a,e){return typeof a=="function"?a(e):a&&typeof a=="object"&&iF in a?a[iF](e):a instanceof Date?new a.constructor(e):new Date(e)}function Qs(a,e){return Aa(e||a,a)}function jc(a,e,s){const r=Qs(a,s?.in);return isNaN(e)?Aa(s?.in||a,NaN):(e&&r.setDate(r.getDate()+e),r)}function Bc(a,e,s){const r=Qs(a,s?.in);if(isNaN(e))return Aa(a,NaN);if(!e)return r;const n=r.getDate(),i=Aa(a,r.getTime());i.setMonth(r.getMonth()+e+1,0);const o=i.getDate();return n>=o?i:(r.setFullYear(i.getFullYear(),i.getMonth(),n),r)}function mL(a,e,s){return Aa(a,+Qs(a)+e)}function See(a,e,s){return mL(a,e*Gw)}let Eee={};function _A(){return Eee}function ku(a,e){const s=_A(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,n=Qs(a,e?.in),i=n.getDay(),o=(i<r?7:0)+i-r;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function yp(a,e){return ku(a,{...e,weekStartsOn:1})}function AL(a,e){const s=Qs(a,e?.in),r=s.getFullYear(),n=Aa(s,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=yp(n),o=Aa(s,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const l=yp(o);return s.getTime()>=i.getTime()?r+1:s.getTime()>=l.getTime()?r:r-1}function Dv(a){const e=Qs(a),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return s.setUTCFullYear(e.getFullYear()),+a-+s}function Du(a,...e){const s=Aa.bind(null,e.find(r=>typeof r=="object"));return e.map(s)}function AA(a,e){const s=Qs(a,e?.in);return s.setHours(0,0,0,0),s}function vp(a,e,s){const[r,n]=Du(s?.in,a,e),i=AA(r),o=AA(n),l=+i-Dv(i),c=+o-Dv(o);return Math.round((l-c)/kee)}function Fee(a,e){const s=AL(a,e),r=Aa(a,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),yp(r)}function e0(a,e,s){const r=Qs(a,s?.in);return r.setTime(r.getTime()+e*qw),r}function iC(a,e,s){return Bc(a,e*3,s)}function Dee(a,e,s){return mL(a,e*1e3)}function Tv(a,e,s){return jc(a,e*7,s)}function vu(a,e,s){return Bc(a,e*12,s)}function oF(a,e){let s,r=e?.in;return a.forEach(n=>{!r&&typeof n=="object"&&(r=Aa.bind(null,n));const i=Qs(n,r);(!s||s<i||isNaN(+i))&&(s=i)}),Aa(r,s||NaN)}function lF(a,e){let s,r=e?.in;return a.forEach(n=>{!r&&typeof n=="object"&&(r=Aa.bind(null,n));const i=Qs(n,r);(!s||s>i||isNaN(+i))&&(s=i)}),Aa(r,s||NaN)}function Tee(a,e,s){const[r,n]=Du(s?.in,a,e);return+AA(r)==+AA(n)}function wu(a){return a instanceof Date||typeof a=="object"&&Object.prototype.toString.call(a)==="[object Date]"}function Pv(a){return!(!wu(a)&&typeof a!="number"||isNaN(+Qs(a)))}function Iv(a,e,s){const[r,n]=Du(s?.in,a,e),i=r.getFullYear()-n.getFullYear(),o=r.getMonth()-n.getMonth();return i*12+o}function Th(a,e){const s=Qs(a,e?.in);return Math.trunc(s.getMonth()/3)+1}function Lv(a,e,s){const[r,n]=Du(s?.in,a,e),i=r.getFullYear()-n.getFullYear(),o=Th(r)-Th(n);return i*4+o}function Mv(a,e,s){const[r,n]=Du(s?.in,a,e);return r.getFullYear()-n.getFullYear()}function Pee(a,e,s){const[r,n]=Du(s?.in,a,e),i=cF(r,n),o=Math.abs(vp(r,n));r.setDate(r.getDate()-i*o);const l=+(cF(r,n)===-i),c=i*(o-l);return c===0?0:c}function cF(a,e){const s=a.getFullYear()-e.getFullYear()||a.getMonth()-e.getMonth()||a.getDate()-e.getDate()||a.getHours()-e.getHours()||a.getMinutes()-e.getMinutes()||a.getSeconds()-e.getSeconds()||a.getMilliseconds()-e.getMilliseconds();return s<0?-1:s>0?1:s}function fL(a,e){const s=Qs(a,e?.in);return s.setHours(23,59,59,999),s}function pL(a,e){const s=Qs(a,e?.in),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(23,59,59,999),s}function x_(a,e){const s=Qs(a,e?.in),r=s.getMonth(),n=r-r%3;return s.setMonth(n,1),s.setHours(0,0,0,0),s}function gL(a,e){const s=Qs(a,e?.in);return s.setDate(1),s.setHours(0,0,0,0),s}function xL(a,e){const s=Qs(a,e?.in),r=s.getFullYear();return s.setFullYear(r+1,0,0),s.setHours(23,59,59,999),s}function Ww(a,e){const s=Qs(a,e?.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}function Iee(a,e){const s=_A(),r=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,n=Qs(a,e?.in),i=n.getDay(),o=(i<r?-7:0)+6-(i-r);return n.setDate(n.getDate()+o),n.setHours(23,59,59,999),n}const Lee={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Mee=(a,e,s)=>{let r;const n=Lee[a];return typeof n=="string"?r=n:e===1?r=n.one:r=n.other.replace("{{count}}",e.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function WN(a){return(e={})=>{const s=e.width?String(e.width):a.defaultWidth;return a.formats[s]||a.formats[a.defaultWidth]}}const Ree={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Oee={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Uee={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Qee={date:WN({formats:Ree,defaultWidth:"full"}),time:WN({formats:Oee,defaultWidth:"full"}),dateTime:WN({formats:Uee,defaultWidth:"full"})},Hee={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Vee=(a,e,s,r)=>Hee[a];function Yg(a){return(e,s)=>{const r=s?.context?String(s.context):"standalone";let n;if(r==="formatting"&&a.formattingValues){const o=a.defaultFormattingWidth||a.defaultWidth,l=s?.width?String(s.width):o;n=a.formattingValues[l]||a.formattingValues[o]}else{const o=a.defaultWidth,l=s?.width?String(s.width):a.defaultWidth;n=a.values[l]||a.values[o]}const i=a.argumentCallback?a.argumentCallback(e):e;return n[i]}}const zee={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$ee={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Gee={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Wee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Yee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Kee=(a,e)=>{const s=Number(a),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},Xee={ordinalNumber:Kee,era:Yg({values:zee,defaultWidth:"wide"}),quarter:Yg({values:$ee,defaultWidth:"wide",argumentCallback:a=>a-1}),month:Yg({values:qee,defaultWidth:"wide"}),day:Yg({values:Gee,defaultWidth:"wide"}),dayPeriod:Yg({values:Wee,defaultWidth:"wide",formattingValues:Yee,defaultFormattingWidth:"wide"})};function Kg(a){return(e,s={})=>{const r=s.width,n=r&&a.matchPatterns[r]||a.matchPatterns[a.defaultMatchWidth],i=e.match(n);if(!i)return null;const o=i[0],l=r&&a.parsePatterns[r]||a.parsePatterns[a.defaultParseWidth],c=Array.isArray(l)?Zee(l,A=>A.test(o)):Jee(l,A=>A.test(o));let u;u=a.valueCallback?a.valueCallback(c):c,u=s.valueCallback?s.valueCallback(u):u;const m=e.slice(o.length);return{value:u,rest:m}}}function Jee(a,e){for(const s in a)if(Object.prototype.hasOwnProperty.call(a,s)&&e(a[s]))return s}function Zee(a,e){for(let s=0;s<a.length;s++)if(e(a[s]))return s}function ete(a){return(e,s={})=>{const r=e.match(a.matchPattern);if(!r)return null;const n=r[0],i=e.match(a.parsePattern);if(!i)return null;let o=a.valueCallback?a.valueCallback(i[0]):i[0];o=s.valueCallback?s.valueCallback(o):o;const l=e.slice(n.length);return{value:o,rest:l}}}const tte=/^(\d+)(th|st|nd|rd)?/i,ste=/\d+/i,rte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ate={any:[/^b/i,/^(a|c)/i]},nte={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ite={any:[/1/i,/2/i,/3/i,/4/i]},ote={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},lte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dte={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ute={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hte={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mte={ordinalNumber:ete({matchPattern:tte,parsePattern:ste,valueCallback:a=>parseInt(a,10)}),era:Kg({matchPatterns:rte,defaultMatchWidth:"wide",parsePatterns:ate,defaultParseWidth:"any"}),quarter:Kg({matchPatterns:nte,defaultMatchWidth:"wide",parsePatterns:ite,defaultParseWidth:"any",valueCallback:a=>a+1}),month:Kg({matchPatterns:ote,defaultMatchWidth:"wide",parsePatterns:lte,defaultParseWidth:"any"}),day:Kg({matchPatterns:cte,defaultMatchWidth:"wide",parsePatterns:dte,defaultParseWidth:"any"}),dayPeriod:Kg({matchPatterns:ute,defaultMatchWidth:"any",parsePatterns:hte,defaultParseWidth:"any"})},bL={code:"en-US",formatDistance:Mee,formatLong:Qee,formatRelative:Vee,localize:Xee,match:mte,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ate(a,e){const s=Qs(a,e?.in);return vp(s,Ww(s))+1}function oC(a,e){const s=Qs(a,e?.in),r=+yp(s)-+Fee(s);return Math.round(r/hL)+1}function lC(a,e){const s=Qs(a,e?.in),r=s.getFullYear(),n=_A(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=Aa(e?.in||a,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=ku(o,e),c=Aa(e?.in||a,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=ku(c,e);return+s>=+l?r+1:+s>=+u?r:r-1}function fte(a,e){const s=_A(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,n=lC(a,e),i=Aa(e?.in||a,0);return i.setFullYear(n,0,r),i.setHours(0,0,0,0),ku(i,e)}function yL(a,e){const s=Qs(a,e?.in),r=+ku(s,e)-+fte(s,e);return Math.round(r/hL)+1}function da(a,e){const s=a<0?"-":"",r=Math.abs(a).toString().padStart(e,"0");return s+r}const ph={y(a,e){const s=a.getFullYear(),r=s>0?s:1-s;return da(e==="yy"?r%100:r,e.length)},M(a,e){const s=a.getMonth();return e==="M"?String(s+1):da(s+1,2)},d(a,e){return da(a.getDate(),e.length)},a(a,e){const s=a.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];default:return s==="am"?"a.m.":"p.m."}},h(a,e){return da(a.getHours()%12||12,e.length)},H(a,e){return da(a.getHours(),e.length)},m(a,e){return da(a.getMinutes(),e.length)},s(a,e){return da(a.getSeconds(),e.length)},S(a,e){const s=e.length,r=a.getMilliseconds(),n=Math.trunc(r*Math.pow(10,s-3));return da(n,e.length)}},Nf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},dF={G:function(a,e,s){const r=a.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});default:return s.era(r,{width:"wide"})}},y:function(a,e,s){if(e==="yo"){const r=a.getFullYear(),n=r>0?r:1-r;return s.ordinalNumber(n,{unit:"year"})}return ph.y(a,e)},Y:function(a,e,s,r){const n=lC(a,r),i=n>0?n:1-n;if(e==="YY"){const o=i%100;return da(o,2)}return e==="Yo"?s.ordinalNumber(i,{unit:"year"}):da(i,e.length)},R:function(a,e){const s=AL(a);return da(s,e.length)},u:function(a,e){const s=a.getFullYear();return da(s,e.length)},Q:function(a,e,s){const r=Math.ceil((a.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return da(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(a,e,s){const r=Math.ceil((a.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return da(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(a,e,s){const r=a.getMonth();switch(e){case"M":case"MM":return ph.M(a,e);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(a,e,s){const r=a.getMonth();switch(e){case"L":return String(r+1);case"LL":return da(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(a,e,s,r){const n=yL(a,r);return e==="wo"?s.ordinalNumber(n,{unit:"week"}):da(n,e.length)},I:function(a,e,s){const r=oC(a);return e==="Io"?s.ordinalNumber(r,{unit:"week"}):da(r,e.length)},d:function(a,e,s){return e==="do"?s.ordinalNumber(a.getDate(),{unit:"date"}):ph.d(a,e)},D:function(a,e,s){const r=Ate(a);return e==="Do"?s.ordinalNumber(r,{unit:"dayOfYear"}):da(r,e.length)},E:function(a,e,s){const r=a.getDay();switch(e){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(a,e,s,r){const n=a.getDay(),i=(n-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return da(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"});default:return s.day(n,{width:"wide",context:"formatting"})}},c:function(a,e,s,r){const n=a.getDay(),i=(n-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return da(i,e.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"});default:return s.day(n,{width:"wide",context:"standalone"})}},i:function(a,e,s){const r=a.getDay(),n=r===0?7:r;switch(e){case"i":return String(n);case"ii":return da(n,e.length);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(a,e,s){const n=a.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(a,e,s){const r=a.getHours();let n;switch(r===12?n=Nf.noon:r===0?n=Nf.midnight:n=r/12>=1?"pm":"am",e){case"b":case"bb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(a,e,s){const r=a.getHours();let n;switch(r>=17?n=Nf.evening:r>=12?n=Nf.afternoon:r>=4?n=Nf.morning:n=Nf.night,e){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(a,e,s){if(e==="ho"){let r=a.getHours()%12;return r===0&&(r=12),s.ordinalNumber(r,{unit:"hour"})}return ph.h(a,e)},H:function(a,e,s){return e==="Ho"?s.ordinalNumber(a.getHours(),{unit:"hour"}):ph.H(a,e)},K:function(a,e,s){const r=a.getHours()%12;return e==="Ko"?s.ordinalNumber(r,{unit:"hour"}):da(r,e.length)},k:function(a,e,s){let r=a.getHours();return r===0&&(r=24),e==="ko"?s.ordinalNumber(r,{unit:"hour"}):da(r,e.length)},m:function(a,e,s){return e==="mo"?s.ordinalNumber(a.getMinutes(),{unit:"minute"}):ph.m(a,e)},s:function(a,e,s){return e==="so"?s.ordinalNumber(a.getSeconds(),{unit:"second"}):ph.s(a,e)},S:function(a,e){return ph.S(a,e)},X:function(a,e,s){const r=a.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return hF(r);case"XXXX":case"XX":return Mm(r);default:return Mm(r,":")}},x:function(a,e,s){const r=a.getTimezoneOffset();switch(e){case"x":return hF(r);case"xxxx":case"xx":return Mm(r);default:return Mm(r,":")}},O:function(a,e,s){const r=a.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+uF(r,":");default:return"GMT"+Mm(r,":")}},z:function(a,e,s){const r=a.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+uF(r,":");default:return"GMT"+Mm(r,":")}},t:function(a,e,s){const r=Math.trunc(+a/1e3);return da(r,e.length)},T:function(a,e,s){return da(+a,e.length)}};function uF(a,e=""){const s=a>0?"-":"+",r=Math.abs(a),n=Math.trunc(r/60),i=r%60;return i===0?s+String(n):s+String(n)+e+da(i,2)}function hF(a,e){return a%60===0?(a>0?"-":"+")+da(Math.abs(a)/60,2):Mm(a,e)}function Mm(a,e=""){const s=a>0?"-":"+",r=Math.abs(a),n=da(Math.trunc(r/60),2),i=da(r%60,2);return s+n+e+i}const mF=(a,e)=>{switch(a){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},vL=(a,e)=>{switch(a){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},pte=(a,e)=>{const s=a.match(/(P+)(p+)?/)||[],r=s[1],n=s[2];if(!n)return mF(a,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",mF(r,e)).replace("{{time}}",vL(n,e))},b_={p:vL,P:pte},gte=/^D+$/,xte=/^Y+$/,bte=["D","DD","YY","YYYY"];function yte(a){return gte.test(a)}function vte(a){return xte.test(a)}function wte(a,e,s){const r=Nte(a,e,s);if(console.warn(r),bte.includes(a))throw new RangeError(r)}function Nte(a,e,s){const r=a[0]==="Y"?"years":"days of the month";return`Use \`${a.toLowerCase()}\` instead of \`${a}\` (in \`${e}\`) for formatting ${r} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jte=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_te=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cte=/^'([^]*?)'?$/,kte=/''/g,Bte=/[a-zA-Z]/;function AF(a,e,s){const r=_A(),n=s?.locale??r.locale??bL,i=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,l=Qs(a,s?.in);if(!Pv(l))throw new RangeError("Invalid time value");let c=e.match(_te).map(m=>{const A=m[0];if(A==="p"||A==="P"){const g=b_[A];return g(m,n.formatLong)}return m}).join("").match(jte).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const A=m[0];if(A==="'")return{isToken:!1,value:Ste(m)};if(dF[A])return{isToken:!0,value:m};if(A.match(Bte))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:m}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return c.map(m=>{if(!m.isToken)return m.value;const A=m.value;(!s?.useAdditionalWeekYearTokens&&vte(A)||!s?.useAdditionalDayOfYearTokens&&yte(A))&&wte(A,e,String(a));const g=dF[A[0]];return g(l,A,n.localize,u)}).join("")}function Ste(a){const e=a.match(Cte);return e?e[1].replace(kte,"'"):a}function fF(a,e){return Qs(a,e?.in).getDate()}function Ete(a,e){return Qs(a,e?.in).getDay()}function Fte(a,e){const s=Qs(a,e?.in),r=s.getFullYear(),n=s.getMonth(),i=Aa(s,0);return i.setFullYear(r,n+1,0),i.setHours(0,0,0,0),i.getDate()}function Dte(){return Object.assign({},_A())}function wc(a,e){return Qs(a,e?.in).getHours()}function Tte(a,e){const s=Qs(a,e?.in).getDay();return s===0?7:s}function Nc(a,e){return Qs(a,e?.in).getMinutes()}function Mo(a,e){return Qs(a,e?.in).getMonth()}function Oh(a){return Qs(a).getSeconds()}function y_(a){return+Qs(a)}function Nr(a,e){return Qs(a,e?.in).getFullYear()}function Wh(a,e){return+Qs(a)>+Qs(e)}function gd(a,e){return+Qs(a)<+Qs(e)}function Pte(a,e){return+Qs(a)==+Qs(e)}function Ite(a,e){const s=Lte(e)?new e(0):Aa(e,0);return s.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),s.setHours(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()),s}function Lte(a){return typeof a=="function"&&a.prototype?.constructor===a}const Mte=10;class wL{subPriority=0;validate(e,s){return!0}}class Rte extends wL{constructor(e,s,r,n,i){super(),this.value=e,this.validateValue=s,this.setValue=r,this.priority=n,i&&(this.subPriority=i)}validate(e,s){return this.validateValue(e,this.value,s)}set(e,s,r){return this.setValue(e,s,this.value,r)}}class Ote extends wL{priority=Mte;subPriority=-1;constructor(e,s){super(),this.context=e||(r=>Aa(s,r))}set(e,s){return s.timestampIsSet?e:Aa(e,Ite(e,this.context))}}let aa=class{run(e,s,r,n){const i=this.parse(e,s,r,n);return i?{setter:new Rte(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,s,r){return!0}};class Ute extends aa{priority=140;parse(e,s,r){switch(s){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,s,r){return s.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const Tn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},hd={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Pn(a,e){return a&&{value:e(a.value),rest:a.rest}}function an(a,e){const s=e.match(a);return s?{value:parseInt(s[0],10),rest:e.slice(s[0].length)}:null}function md(a,e){const s=e.match(a);if(!s)return null;if(s[0]==="Z")return{value:0,rest:e.slice(1)};const r=s[1]==="+"?1:-1,n=s[2]?parseInt(s[2],10):0,i=s[3]?parseInt(s[3],10):0,o=s[5]?parseInt(s[5],10):0;return{value:r*(n*Gw+i*qw+o*Bee),rest:e.slice(s[0].length)}}function NL(a){return an(Tn.anyDigitsSigned,a)}function yn(a,e){switch(a){case 1:return an(Tn.singleDigit,e);case 2:return an(Tn.twoDigits,e);case 3:return an(Tn.threeDigits,e);case 4:return an(Tn.fourDigits,e);default:return an(new RegExp("^\\d{1,"+a+"}"),e)}}function Rv(a,e){switch(a){case 1:return an(Tn.singleDigitSigned,e);case 2:return an(Tn.twoDigitsSigned,e);case 3:return an(Tn.threeDigitsSigned,e);case 4:return an(Tn.fourDigitsSigned,e);default:return an(new RegExp("^-?\\d{1,"+a+"}"),e)}}function cC(a){switch(a){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function jL(a,e){const s=e>0,r=s?e:1-e;let n;if(r<=50)n=a||100;else{const i=r+50,o=Math.trunc(i/100)*100,l=a>=i%100;n=a+o-(l?100:0)}return s?n:1-n}function _L(a){return a%400===0||a%4===0&&a%100!==0}class Qte extends aa{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,s,r){const n=i=>({year:i,isTwoDigitYear:s==="yy"});switch(s){case"y":return Pn(yn(4,e),n);case"yo":return Pn(r.ordinalNumber(e,{unit:"year"}),n);default:return Pn(yn(s.length,e),n)}}validate(e,s){return s.isTwoDigitYear||s.year>0}set(e,s,r){const n=e.getFullYear();if(r.isTwoDigitYear){const o=jL(r.year,n);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}const i=!("era"in s)||s.era===1?r.year:1-r.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class Hte extends aa{priority=130;parse(e,s,r){const n=i=>({year:i,isTwoDigitYear:s==="YY"});switch(s){case"Y":return Pn(yn(4,e),n);case"Yo":return Pn(r.ordinalNumber(e,{unit:"year"}),n);default:return Pn(yn(s.length,e),n)}}validate(e,s){return s.isTwoDigitYear||s.year>0}set(e,s,r,n){const i=lC(e,n);if(r.isTwoDigitYear){const l=jL(r.year,i);return e.setFullYear(l,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),ku(e,n)}const o=!("era"in s)||s.era===1?r.year:1-r.year;return e.setFullYear(o,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),ku(e,n)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Vte extends aa{priority=130;parse(e,s){return Rv(s==="R"?4:s.length,e)}set(e,s,r){const n=Aa(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),yp(n)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class zte extends aa{priority=130;parse(e,s){return Rv(s==="u"?4:s.length,e)}set(e,s,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class $te extends aa{priority=120;parse(e,s,r){switch(s){case"Q":case"QQ":return yn(s.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,s){return s>=1&&s<=4}set(e,s,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class qte extends aa{priority=120;parse(e,s,r){switch(s){case"q":case"qq":return yn(s.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,s){return s>=1&&s<=4}set(e,s,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Gte extends aa{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,s,r){const n=i=>i-1;switch(s){case"M":return Pn(an(Tn.month,e),n);case"MM":return Pn(yn(2,e),n);case"Mo":return Pn(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,s){return s>=0&&s<=11}set(e,s,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class Wte extends aa{priority=110;parse(e,s,r){const n=i=>i-1;switch(s){case"L":return Pn(an(Tn.month,e),n);case"LL":return Pn(yn(2,e),n);case"Lo":return Pn(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,s){return s>=0&&s<=11}set(e,s,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function Yte(a,e,s){const r=Qs(a,s?.in),n=yL(r,s)-e;return r.setDate(r.getDate()-n*7),Qs(r,s?.in)}class Kte extends aa{priority=100;parse(e,s,r){switch(s){case"w":return an(Tn.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return yn(s.length,e)}}validate(e,s){return s>=1&&s<=53}set(e,s,r,n){return ku(Yte(e,r,n),n)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function Xte(a,e,s){const r=Qs(a,s?.in),n=oC(r,s)-e;return r.setDate(r.getDate()-n*7),r}class Jte extends aa{priority=100;parse(e,s,r){switch(s){case"I":return an(Tn.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return yn(s.length,e)}}validate(e,s){return s>=1&&s<=53}set(e,s,r){return yp(Xte(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Zte=[31,28,31,30,31,30,31,31,30,31,30,31],ese=[31,29,31,30,31,30,31,31,30,31,30,31];class tse extends aa{priority=90;subPriority=1;parse(e,s,r){switch(s){case"d":return an(Tn.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return yn(s.length,e)}}validate(e,s){const r=e.getFullYear(),n=_L(r),i=e.getMonth();return n?s>=1&&s<=ese[i]:s>=1&&s<=Zte[i]}set(e,s,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class sse extends aa{priority=90;subpriority=1;parse(e,s,r){switch(s){case"D":case"DD":return an(Tn.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return yn(s.length,e)}}validate(e,s){const r=e.getFullYear();return _L(r)?s>=1&&s<=366:s>=1&&s<=365}set(e,s,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function dC(a,e,s){const r=_A(),n=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=Qs(a,s?.in),o=i.getDay(),c=(e%7+7)%7,u=7-n,m=e<0||e>6?e-(o+u)%7:(c+u)%7-(o+u)%7;return jc(i,m,s)}class rse extends aa{priority=90;parse(e,s,r){switch(s){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,s){return s>=0&&s<=6}set(e,s,r,n){return e=dC(e,r,n),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class ase extends aa{priority=90;parse(e,s,r,n){const i=o=>{const l=Math.floor((o-1)/7)*7;return(o+n.weekStartsOn+6)%7+l};switch(s){case"e":case"ee":return Pn(yn(s.length,e),i);case"eo":return Pn(r.ordinalNumber(e,{unit:"day"}),i);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,s){return s>=0&&s<=6}set(e,s,r,n){return e=dC(e,r,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class nse extends aa{priority=90;parse(e,s,r,n){const i=o=>{const l=Math.floor((o-1)/7)*7;return(o+n.weekStartsOn+6)%7+l};switch(s){case"c":case"cc":return Pn(yn(s.length,e),i);case"co":return Pn(r.ordinalNumber(e,{unit:"day"}),i);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,s){return s>=0&&s<=6}set(e,s,r,n){return e=dC(e,r,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function ise(a,e,s){const r=Qs(a,s?.in),n=Tte(r,s),i=e-n;return jc(r,i,s)}class ose extends aa{priority=90;parse(e,s,r){const n=i=>i===0?7:i;switch(s){case"i":case"ii":return yn(s.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Pn(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return Pn(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return Pn(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);default:return Pn(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,s){return s>=1&&s<=7}set(e,s,r){return e=ise(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class lse extends aa{priority=80;parse(e,s,r){switch(s){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,s,r){return e.setHours(cC(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class cse extends aa{priority=80;parse(e,s,r){switch(s){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,s,r){return e.setHours(cC(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class dse extends aa{priority=80;parse(e,s,r){switch(s){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,s,r){return e.setHours(cC(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class use extends aa{priority=70;parse(e,s,r){switch(s){case"h":return an(Tn.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return yn(s.length,e)}}validate(e,s){return s>=1&&s<=12}set(e,s,r){const n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):!n&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class hse extends aa{priority=70;parse(e,s,r){switch(s){case"H":return an(Tn.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return yn(s.length,e)}}validate(e,s){return s>=0&&s<=23}set(e,s,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class mse extends aa{priority=70;parse(e,s,r){switch(s){case"K":return an(Tn.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return yn(s.length,e)}}validate(e,s){return s>=0&&s<=11}set(e,s,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Ase extends aa{priority=70;parse(e,s,r){switch(s){case"k":return an(Tn.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return yn(s.length,e)}}validate(e,s){return s>=1&&s<=24}set(e,s,r){const n=r<=24?r%24:r;return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class fse extends aa{priority=60;parse(e,s,r){switch(s){case"m":return an(Tn.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return yn(s.length,e)}}validate(e,s){return s>=0&&s<=59}set(e,s,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class pse extends aa{priority=50;parse(e,s,r){switch(s){case"s":return an(Tn.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return yn(s.length,e)}}validate(e,s){return s>=0&&s<=59}set(e,s,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class gse extends aa{priority=30;parse(e,s){const r=n=>Math.trunc(n*Math.pow(10,-s.length+3));return Pn(yn(s.length,e),r)}set(e,s,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class xse extends aa{priority=10;parse(e,s){switch(s){case"X":return md(hd.basicOptionalMinutes,e);case"XX":return md(hd.basic,e);case"XXXX":return md(hd.basicOptionalSeconds,e);case"XXXXX":return md(hd.extendedOptionalSeconds,e);default:return md(hd.extended,e)}}set(e,s,r){return s.timestampIsSet?e:Aa(e,e.getTime()-Dv(e)-r)}incompatibleTokens=["t","T","x"]}class bse extends aa{priority=10;parse(e,s){switch(s){case"x":return md(hd.basicOptionalMinutes,e);case"xx":return md(hd.basic,e);case"xxxx":return md(hd.basicOptionalSeconds,e);case"xxxxx":return md(hd.extendedOptionalSeconds,e);default:return md(hd.extended,e)}}set(e,s,r){return s.timestampIsSet?e:Aa(e,e.getTime()-Dv(e)-r)}incompatibleTokens=["t","T","X"]}class yse extends aa{priority=40;parse(e){return NL(e)}set(e,s,r){return[Aa(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class vse extends aa{priority=20;parse(e){return NL(e)}set(e,s,r){return[Aa(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const wse={G:new Ute,y:new Qte,Y:new Hte,R:new Vte,u:new zte,Q:new $te,q:new qte,M:new Gte,L:new Wte,w:new Kte,I:new Jte,d:new tse,D:new sse,E:new rse,e:new ase,c:new nse,i:new ose,a:new lse,b:new cse,B:new dse,h:new use,H:new hse,K:new mse,k:new Ase,m:new fse,s:new pse,S:new gse,X:new xse,x:new bse,t:new yse,T:new vse},Nse=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jse=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_se=/^'([^]*?)'?$/,Cse=/''/g,kse=/\S/,Bse=/[a-zA-Z]/;function Sse(a,e,s,r){const n=()=>Aa(r?.in||s,NaN),i=Dte(),o=r?.locale??i.locale??bL,l=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0;if(!e)return a?n():Qs(s,r?.in);const u={firstWeekContainsDate:l,weekStartsOn:c,locale:o},m=[new Ote(r?.in,s)],A=e.match(jse).map(y=>{const w=y[0];if(w in b_){const B=b_[w];return B(y,o.formatLong)}return y}).join("").match(Nse),g=[];for(let y of A){const w=y[0],B=wse[w];if(B){const{incompatibleTokens:j}=B;if(Array.isArray(j)){const S=g.find(T=>j.includes(T.token)||T.token===w);if(S)throw new RangeError(`The format string mustn't contain \`${S.fullToken}\` and \`${y}\` at the same time`)}else if(B.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${y}\` and any other token at the same time`);g.push({token:w,fullToken:y});const E=B.run(a,y,o.match,u);if(!E)return n();m.push(E.setter),a=E.rest}else{if(w.match(Bse))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");if(y==="''"?y="'":w==="'"&&(y=Ese(y)),a.indexOf(y)===0)a=a.slice(y.length);else return n()}}if(a.length>0&&kse.test(a))return n();const p=m.map(y=>y.priority).sort((y,w)=>w-y).filter((y,w,B)=>B.indexOf(y)===w).map(y=>m.filter(w=>w.priority===y).sort((w,B)=>B.subPriority-w.subPriority)).map(y=>y[0]);let v=Qs(s,r?.in);if(isNaN(+v))return n();const b={};for(const y of p){if(!y.validate(v,u))return n();const w=y.set(v,b,u);Array.isArray(w)?(v=w[0],Object.assign(b,w[1])):v=w}return v}function Ese(a){return a.match(_se)[1].replace(Cse,"'")}function Fse(a,e,s){const[r,n]=Du(s?.in,a,e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Dse(a,e,s){const[r,n]=Du(s?.in,a,e);return+x_(r)==+x_(n)}function Tse(a,e,s){const[r,n]=Du(s?.in,a,e);return r.getFullYear()===n.getFullYear()}function t0(a,e,s){const r=+Qs(a,s?.in),[n,i]=[+Qs(e.start,s?.in),+Qs(e.end,s?.in)].sort((o,l)=>o-l);return r>=n&&r<=i}function Pse(a,e,s){return jc(a,-1,s)}function Ise(a,e){const s=()=>Aa(e?.in,NaN),n=Ose(a);let i;if(n.date){const u=Use(n.date,2);i=Qse(u.restDateString,u.year)}if(!i||isNaN(+i))return s();const o=+i;let l=0,c;if(n.time&&(l=Hse(n.time),isNaN(l)))return s();if(n.timezone){if(c=Vse(n.timezone),isNaN(c))return s()}else{const u=new Date(o+l),m=Qs(0,e?.in);return m.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),m.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),m}return Qs(o+l+c,e?.in)}const ay={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Lse=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Mse=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Rse=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ose(a){const e={},s=a.split(ay.dateTimeDelimiter);let r;if(s.length>2)return e;if(/:/.test(s[0])?r=s[0]:(e.date=s[0],r=s[1],ay.timeZoneDelimiter.test(e.date)&&(e.date=a.split(ay.timeZoneDelimiter)[0],r=a.substr(e.date.length,a.length))),r){const n=ay.timezone.exec(r);n?(e.time=r.replace(n[1],""),e.timezone=n[1]):e.time=r}return e}function Use(a,e){const s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=a.match(s);if(!r)return{year:NaN,restDateString:""};const n=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?n:i*100,restDateString:a.slice((r[1]||r[2]).length)}}function Qse(a,e){if(e===null)return new Date(NaN);const s=a.match(Lse);if(!s)return new Date(NaN);const r=!!s[4],n=Xg(s[1]),i=Xg(s[2])-1,o=Xg(s[3]),l=Xg(s[4]),c=Xg(s[5])-1;if(r)return Wse(e,l,c)?zse(e,l,c):new Date(NaN);{const u=new Date(0);return!qse(e,i,o)||!Gse(e,n)?new Date(NaN):(u.setUTCFullYear(e,i,Math.max(n,o)),u)}}function Xg(a){return a?parseInt(a):1}function Hse(a){const e=a.match(Mse);if(!e)return NaN;const s=YN(e[1]),r=YN(e[2]),n=YN(e[3]);return Yse(s,r,n)?s*Gw+r*qw+n*1e3:NaN}function YN(a){return a&&parseFloat(a.replace(",","."))||0}function Vse(a){if(a==="Z")return 0;const e=a.match(Rse);if(!e)return 0;const s=e[1]==="+"?-1:1,r=parseInt(e[2]),n=e[3]&&parseInt(e[3])||0;return Kse(r,n)?s*(r*Gw+n*qw):NaN}function zse(a,e,s){const r=new Date(0);r.setUTCFullYear(a,0,4);const n=r.getUTCDay()||7,i=(e-1)*7+s+1-n;return r.setUTCDate(r.getUTCDate()+i),r}const $se=[31,null,31,30,31,30,31,31,30,31,30,31];function CL(a){return a%400===0||a%4===0&&a%100!==0}function qse(a,e,s){return e>=0&&e<=11&&s>=1&&s<=($se[e]||(CL(a)?29:28))}function Gse(a,e){return e>=1&&e<=(CL(a)?366:365)}function Wse(a,e,s){return e>=1&&e<=53&&s>=0&&s<=6}function Yse(a,e,s){return a===24?e===0&&s===0:s>=0&&s<60&&e>=0&&e<60&&a>=0&&a<25}function Kse(a,e){return e>=0&&e<=59}function rl(a,e,s){const r=Qs(a,s?.in),n=r.getFullYear(),i=r.getDate(),o=Aa(a,0);o.setFullYear(n,e,15),o.setHours(0,0,0,0);const l=Fte(o);return r.setMonth(e,Math.min(i,l)),r}function Jy(a,e,s){const r=Qs(a,s?.in);return r.setHours(e),r}function Zy(a,e,s){const r=Qs(a,s?.in);return r.setMinutes(e),r}function Uf(a,e,s){const r=Qs(a,s?.in),n=Math.trunc(r.getMonth()/3)+1,i=e-n;return rl(r,r.getMonth()+i*3)}function ev(a,e,s){const r=Qs(a,s?.in);return r.setSeconds(e),r}function dd(a,e,s){const r=Qs(a,s?.in);return isNaN(+r)?Aa(a,NaN):(r.setFullYear(e),r)}function Jm(a,e,s){return Bc(a,-e,s)}function kL(a,e,s){return iC(a,-1,s)}function pF(a,e,s){return Tv(a,-1,s)}function wp(a,e,s){return vu(a,-e,s)}function Yw(){return typeof window<"u"}function Yp(a){return BL(a)?(a.nodeName||"").toLowerCase():"#document"}function cl(a){var e;return(a==null||(e=a.ownerDocument)==null?void 0:e.defaultView)||window}function Bd(a){var e;return(e=(BL(a)?a.ownerDocument:a.document)||window.document)==null?void 0:e.documentElement}function BL(a){return Yw()?a instanceof Node||a instanceof cl(a).Node:!1}function oo(a){return Yw()?a instanceof Element||a instanceof cl(a).Element:!1}function Cd(a){return Yw()?a instanceof HTMLElement||a instanceof cl(a).HTMLElement:!1}function gF(a){return!Yw()||typeof ShadowRoot>"u"?!1:a instanceof ShadowRoot||a instanceof cl(a).ShadowRoot}const Xse=new Set(["inline","contents"]);function j0(a){const{overflow:e,overflowX:s,overflowY:r,display:n}=$l(a);return/auto|scroll|overlay|hidden|clip/.test(e+r+s)&&!Xse.has(n)}const Jse=new Set(["table","td","th"]);function Zse(a){return Jse.has(Yp(a))}const ere=[":popover-open",":modal"];function Kw(a){return ere.some(e=>{try{return a.matches(e)}catch{return!1}})}const tre=["transform","translate","scale","rotate","perspective"],sre=["transform","translate","scale","rotate","perspective","filter"],rre=["paint","layout","strict","content"];function uC(a){const e=hC(),s=oo(a)?$l(a):a;return tre.some(r=>s[r]?s[r]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!e&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!e&&(s.filter?s.filter!=="none":!1)||sre.some(r=>(s.willChange||"").includes(r))||rre.some(r=>(s.contain||"").includes(r))}function are(a){let e=Yh(a);for(;Cd(e)&&!Np(e);){if(uC(e))return e;if(Kw(e))return null;e=Yh(e)}return null}function hC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const nre=new Set(["html","body","#document"]);function Np(a){return nre.has(Yp(a))}function $l(a){return cl(a).getComputedStyle(a)}function Xw(a){return oo(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function Yh(a){if(Yp(a)==="html")return a;const e=a.assignedSlot||a.parentNode||gF(a)&&a.host||Bd(a);return gF(e)?e.host:e}function SL(a){const e=Yh(a);return Np(e)?a.ownerDocument?a.ownerDocument.body:a.body:Cd(e)&&j0(e)?e:SL(e)}function s0(a,e,s){var r;e===void 0&&(e=[]),s===void 0&&(s=!0);const n=SL(a),i=n===((r=a.ownerDocument)==null?void 0:r.body),o=cl(n);if(i){const l=v_(o);return e.concat(o,o.visualViewport||[],j0(n)?n:[],l&&s?s0(l):[])}return e.concat(n,s0(n,[],s))}function v_(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}const jp=Math.min,Zm=Math.max,Ov=Math.round,ny=Math.floor,Nd=a=>({x:a,y:a}),ire={left:"right",right:"left",bottom:"top",top:"bottom"},ore={start:"end",end:"start"};function lre(a,e,s){return Zm(a,jp(e,s))}function Jw(a,e){return typeof a=="function"?a(e):a}function _p(a){return a.split("-")[0]}function _0(a){return a.split("-")[1]}function cre(a){return a==="x"?"y":"x"}function mC(a){return a==="y"?"height":"width"}const dre=new Set(["top","bottom"]);function Vm(a){return dre.has(_p(a))?"y":"x"}function AC(a){return cre(Vm(a))}function ure(a,e,s){s===void 0&&(s=!1);const r=_0(a),n=AC(a),i=mC(n);let o=n==="x"?r===(s?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Uv(o)),[o,Uv(o)]}function hre(a){const e=Uv(a);return[w_(a),e,w_(e)]}function w_(a){return a.replace(/start|end/g,e=>ore[e])}const xF=["left","right"],bF=["right","left"],mre=["top","bottom"],Are=["bottom","top"];function fre(a,e,s){switch(a){case"top":case"bottom":return s?e?bF:xF:e?xF:bF;case"left":case"right":return e?mre:Are;default:return[]}}function pre(a,e,s,r){const n=_0(a);let i=fre(_p(a),s==="start",r);return n&&(i=i.map(o=>o+"-"+n),e&&(i=i.concat(i.map(w_)))),i}function Uv(a){return a.replace(/left|right|bottom|top/g,e=>ire[e])}function gre(a){return{top:0,right:0,bottom:0,left:0,...a}}function EL(a){return typeof a!="number"?gre(a):{top:a,right:a,bottom:a,left:a}}function Qv(a){const{x:e,y:s,width:r,height:n}=a;return{width:r,height:n,top:s,left:e,right:e+r,bottom:s+n,x:e,y:s}}var xre=typeof document<"u",bre=function(){},Hv=xre?C.useLayoutEffect:bre;const yre={...l6},vre=yre.useInsertionEffect,wre=vre||(a=>a());function Nre(a){const e=C.useRef(()=>{});return wre(()=>{e.current=a}),C.useCallback(function(){for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return e.current==null?void 0:e.current(...r)},[])}function yF(a,e,s){let{reference:r,floating:n}=a;const i=Vm(e),o=AC(e),l=mC(o),c=_p(e),u=i==="y",m=r.x+r.width/2-n.width/2,A=r.y+r.height/2-n.height/2,g=r[l]/2-n[l]/2;let p;switch(c){case"top":p={x:m,y:r.y-n.height};break;case"bottom":p={x:m,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:A};break;case"left":p={x:r.x-n.width,y:A};break;default:p={x:r.x,y:r.y}}switch(_0(e)){case"start":p[o]-=g*(s&&u?-1:1);break;case"end":p[o]+=g*(s&&u?-1:1);break}return p}async function jre(a,e){var s;e===void 0&&(e={});const{x:r,y:n,platform:i,rects:o,elements:l,strategy:c}=a,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:A="floating",altBoundary:g=!1,padding:p=0}=Jw(e,a),v=EL(p),y=l[g?A==="floating"?"reference":"floating":A],w=Qv(await i.getClippingRect({element:(s=await(i.isElement==null?void 0:i.isElement(y)))==null||s?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:m,strategy:c})),B=A==="floating"?{x:r,y:n,width:o.floating.width,height:o.floating.height}:o.reference,j=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),E=await(i.isElement==null?void 0:i.isElement(j))?await(i.getScale==null?void 0:i.getScale(j))||{x:1,y:1}:{x:1,y:1},S=Qv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:B,offsetParent:j,strategy:c}):B);return{top:(w.top-S.top+v.top)/E.y,bottom:(S.bottom-w.bottom+v.bottom)/E.y,left:(w.left-S.left+v.left)/E.x,right:(S.right-w.right+v.right)/E.x}}const _re=async(a,e,s)=>{const{placement:r="bottom",strategy:n="absolute",middleware:i=[],platform:o}=s,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:a,floating:e,strategy:n}),{x:m,y:A}=yF(u,r,c),g=r,p={},v=0;for(let y=0;y<l.length;y++){var b;const{name:w,fn:B}=l[y],{x:j,y:E,data:S,reset:T}=await B({x:m,y:A,initialPlacement:r,placement:g,strategy:n,middlewareData:p,rects:u,platform:{...o,detectOverflow:(b=o.detectOverflow)!=null?b:jre},elements:{reference:a,floating:e}});m=j??m,A=E??A,p={...p,[w]:{...p[w],...S}},T&&v<=50&&(v++,typeof T=="object"&&(T.placement&&(g=T.placement),T.rects&&(u=T.rects===!0?await o.getElementRects({reference:a,floating:e,strategy:n}):T.rects),{x:m,y:A}=yF(u,g,c)),y=-1)}return{x:m,y:A,placement:g,strategy:n,middlewareData:p}},Cre=a=>({name:"arrow",options:a,async fn(e){const{x:s,y:r,placement:n,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:m=0}=Jw(a,e)||{};if(u==null)return{};const A=EL(m),g={x:s,y:r},p=AC(n),v=mC(p),b=await o.getDimensions(u),y=p==="y",w=y?"top":"left",B=y?"bottom":"right",j=y?"clientHeight":"clientWidth",E=i.reference[v]+i.reference[p]-g[p]-i.floating[v],S=g[p]-i.reference[p],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let M=T?T[j]:0;(!M||!await(o.isElement==null?void 0:o.isElement(T)))&&(M=l.floating[j]||i.floating[v]);const D=E/2-S/2,P=M/2-b[v]/2-1,Y=jp(A[w],P),Q=jp(A[B],P),L=Y,ae=M-b[v]-Q,ne=M/2-b[v]/2+D,V=lre(L,ne,ae),O=!c.arrow&&_0(n)!=null&&ne!==V&&i.reference[v]/2-(ne<L?Y:Q)-b[v]/2<0,X=O?ne<L?ne-L:ne-ae:0;return{[p]:g[p]+X,data:{[p]:V,centerOffset:ne-V-X,...O&&{alignmentOffset:X}},reset:O}}}),kre=function(a){return a===void 0&&(a={}),{name:"flip",options:a,async fn(e){var s,r;const{placement:n,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:m=!0,crossAxis:A=!0,fallbackPlacements:g,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,...y}=Jw(a,e);if((s=i.arrow)!=null&&s.alignmentOffset)return{};const w=_p(n),B=Vm(l),j=_p(l)===l,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=g||(j||!b?[Uv(l)]:hre(l)),T=v!=="none";!g&&T&&S.push(...pre(l,b,v,E));const M=[l,...S],D=await c.detectOverflow(e,y),P=[];let Y=((r=i.flip)==null?void 0:r.overflows)||[];if(m&&P.push(D[w]),A){const ne=ure(n,o,E);P.push(D[ne[0]],D[ne[1]])}if(Y=[...Y,{placement:n,overflows:P}],!P.every(ne=>ne<=0)){var Q,L;const ne=(((Q=i.flip)==null?void 0:Q.index)||0)+1,V=M[ne];if(V&&(!(A==="alignment"?B!==Vm(V):!1)||Y.every($=>Vm($.placement)===B?$.overflows[0]>0:!0)))return{data:{index:ne,overflows:Y},reset:{placement:V}};let O=(L=Y.filter(X=>X.overflows[0]<=0).sort((X,$)=>X.overflows[1]-$.overflows[1])[0])==null?void 0:L.placement;if(!O)switch(p){case"bestFit":{var ae;const X=(ae=Y.filter($=>{if(T){const H=Vm($.placement);return H===B||H==="y"}return!0}).map($=>[$.placement,$.overflows.filter(H=>H>0).reduce((H,te)=>H+te,0)]).sort(($,H)=>$[1]-H[1])[0])==null?void 0:ae[0];X&&(O=X);break}case"initialPlacement":O=l;break}if(n!==O)return{reset:{placement:O}}}return{}}}},Bre=new Set(["left","top"]);async function Sre(a,e){const{placement:s,platform:r,elements:n}=a,i=await(r.isRTL==null?void 0:r.isRTL(n.floating)),o=_p(s),l=_0(s),c=Vm(s)==="y",u=Bre.has(o)?-1:1,m=i&&c?-1:1,A=Jw(e,a);let{mainAxis:g,crossAxis:p,alignmentAxis:v}=typeof A=="number"?{mainAxis:A,crossAxis:0,alignmentAxis:null}:{mainAxis:A.mainAxis||0,crossAxis:A.crossAxis||0,alignmentAxis:A.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*m,y:g*u}:{x:g*u,y:p*m}}const Ere=function(a){return a===void 0&&(a=0),{name:"offset",options:a,async fn(e){var s,r;const{x:n,y:i,placement:o,middlewareData:l}=e,c=await Sre(e,a);return o===((s=l.offset)==null?void 0:s.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:n+c.x,y:i+c.y,data:{...c,placement:o}}}}};function FL(a){const e=$l(a);let s=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const n=Cd(a),i=n?a.offsetWidth:s,o=n?a.offsetHeight:r,l=Ov(s)!==i||Ov(r)!==o;return l&&(s=i,r=o),{width:s,height:r,$:l}}function fC(a){return oo(a)?a:a.contextElement}function lp(a){const e=fC(a);if(!Cd(e))return Nd(1);const s=e.getBoundingClientRect(),{width:r,height:n,$:i}=FL(e);let o=(i?Ov(s.width):s.width)/r,l=(i?Ov(s.height):s.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Fre=Nd(0);function DL(a){const e=cl(a);return!hC()||!e.visualViewport?Fre:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Dre(a,e,s){return e===void 0&&(e=!1),!s||e&&s!==cl(a)?!1:e}function fA(a,e,s,r){e===void 0&&(e=!1),s===void 0&&(s=!1);const n=a.getBoundingClientRect(),i=fC(a);let o=Nd(1);e&&(r?oo(r)&&(o=lp(r)):o=lp(a));const l=Dre(i,s,r)?DL(i):Nd(0);let c=(n.left+l.x)/o.x,u=(n.top+l.y)/o.y,m=n.width/o.x,A=n.height/o.y;if(i){const g=cl(i),p=r&&oo(r)?cl(r):r;let v=g,b=v_(v);for(;b&&r&&p!==v;){const y=lp(b),w=b.getBoundingClientRect(),B=$l(b),j=w.left+(b.clientLeft+parseFloat(B.paddingLeft))*y.x,E=w.top+(b.clientTop+parseFloat(B.paddingTop))*y.y;c*=y.x,u*=y.y,m*=y.x,A*=y.y,c+=j,u+=E,v=cl(b),b=v_(v)}}return Qv({width:m,height:A,x:c,y:u})}function Zw(a,e){const s=Xw(a).scrollLeft;return e?e.left+s:fA(Bd(a)).left+s}function TL(a,e){const s=a.getBoundingClientRect(),r=s.left+e.scrollLeft-Zw(a,s),n=s.top+e.scrollTop;return{x:r,y:n}}function Tre(a){let{elements:e,rect:s,offsetParent:r,strategy:n}=a;const i=n==="fixed",o=Bd(r),l=e?Kw(e.floating):!1;if(r===o||l&&i)return s;let c={scrollLeft:0,scrollTop:0},u=Nd(1);const m=Nd(0),A=Cd(r);if((A||!A&&!i)&&((Yp(r)!=="body"||j0(o))&&(c=Xw(r)),Cd(r))){const p=fA(r);u=lp(r),m.x=p.x+r.clientLeft,m.y=p.y+r.clientTop}const g=o&&!A&&!i?TL(o,c):Nd(0);return{width:s.width*u.x,height:s.height*u.y,x:s.x*u.x-c.scrollLeft*u.x+m.x+g.x,y:s.y*u.y-c.scrollTop*u.y+m.y+g.y}}function Pre(a){return Array.from(a.getClientRects())}function Ire(a){const e=Bd(a),s=Xw(a),r=a.ownerDocument.body,n=Zm(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Zm(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-s.scrollLeft+Zw(a);const l=-s.scrollTop;return $l(r).direction==="rtl"&&(o+=Zm(e.clientWidth,r.clientWidth)-n),{width:n,height:i,x:o,y:l}}const vF=25;function Lre(a,e){const s=cl(a),r=Bd(a),n=s.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(n){i=n.width,o=n.height;const m=hC();(!m||m&&e==="fixed")&&(l=n.offsetLeft,c=n.offsetTop)}const u=Zw(r);if(u<=0){const m=r.ownerDocument,A=m.body,g=getComputedStyle(A),p=m.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,v=Math.abs(r.clientWidth-A.clientWidth-p);v<=vF&&(i-=v)}else u<=vF&&(i+=u);return{width:i,height:o,x:l,y:c}}const Mre=new Set(["absolute","fixed"]);function Rre(a,e){const s=fA(a,!0,e==="fixed"),r=s.top+a.clientTop,n=s.left+a.clientLeft,i=Cd(a)?lp(a):Nd(1),o=a.clientWidth*i.x,l=a.clientHeight*i.y,c=n*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function wF(a,e,s){let r;if(e==="viewport")r=Lre(a,s);else if(e==="document")r=Ire(Bd(a));else if(oo(e))r=Rre(e,s);else{const n=DL(a);r={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return Qv(r)}function PL(a,e){const s=Yh(a);return s===e||!oo(s)||Np(s)?!1:$l(s).position==="fixed"||PL(s,e)}function Ore(a,e){const s=e.get(a);if(s)return s;let r=s0(a,[],!1).filter(l=>oo(l)&&Yp(l)!=="body"),n=null;const i=$l(a).position==="fixed";let o=i?Yh(a):a;for(;oo(o)&&!Np(o);){const l=$l(o),c=uC(o);!c&&l.position==="fixed"&&(n=null),(i?!c&&!n:!c&&l.position==="static"&&!!n&&Mre.has(n.position)||j0(o)&&!c&&PL(a,o))?r=r.filter(m=>m!==o):n=l,o=Yh(o)}return e.set(a,r),r}function Ure(a){let{element:e,boundary:s,rootBoundary:r,strategy:n}=a;const o=[...s==="clippingAncestors"?Kw(e)?[]:Ore(e,this._c):[].concat(s),r],l=o[0],c=o.reduce((u,m)=>{const A=wF(e,m,n);return u.top=Zm(A.top,u.top),u.right=jp(A.right,u.right),u.bottom=jp(A.bottom,u.bottom),u.left=Zm(A.left,u.left),u},wF(e,l,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Qre(a){const{width:e,height:s}=FL(a);return{width:e,height:s}}function Hre(a,e,s){const r=Cd(e),n=Bd(e),i=s==="fixed",o=fA(a,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Nd(0);function u(){c.x=Zw(n)}if(r||!r&&!i)if((Yp(e)!=="body"||j0(n))&&(l=Xw(e)),r){const p=fA(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else n&&u();i&&!r&&n&&u();const m=n&&!r&&!i?TL(n,l):Nd(0),A=o.left+l.scrollLeft-c.x-m.x,g=o.top+l.scrollTop-c.y-m.y;return{x:A,y:g,width:o.width,height:o.height}}function KN(a){return $l(a).position==="static"}function NF(a,e){if(!Cd(a)||$l(a).position==="fixed")return null;if(e)return e(a);let s=a.offsetParent;return Bd(a)===s&&(s=s.ownerDocument.body),s}function IL(a,e){const s=cl(a);if(Kw(a))return s;if(!Cd(a)){let n=Yh(a);for(;n&&!Np(n);){if(oo(n)&&!KN(n))return n;n=Yh(n)}return s}let r=NF(a,e);for(;r&&Zse(r)&&KN(r);)r=NF(r,e);return r&&Np(r)&&KN(r)&&!uC(r)?s:r||are(a)||s}const Vre=async function(a){const e=this.getOffsetParent||IL,s=this.getDimensions,r=await s(a.floating);return{reference:Hre(a.reference,await e(a.floating),a.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function zre(a){return $l(a).direction==="rtl"}const $re={convertOffsetParentRelativeRectToViewportRelativeRect:Tre,getDocumentElement:Bd,getClippingRect:Ure,getOffsetParent:IL,getElementRects:Vre,getClientRects:Pre,getDimensions:Qre,getScale:lp,isElement:oo,isRTL:zre};function LL(a,e){return a.x===e.x&&a.y===e.y&&a.width===e.width&&a.height===e.height}function qre(a,e){let s=null,r;const n=Bd(a);function i(){var l;clearTimeout(r),(l=s)==null||l.disconnect(),s=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=a.getBoundingClientRect(),{left:m,top:A,width:g,height:p}=u;if(l||e(),!g||!p)return;const v=ny(A),b=ny(n.clientWidth-(m+g)),y=ny(n.clientHeight-(A+p)),w=ny(m),j={rootMargin:-v+"px "+-b+"px "+-y+"px "+-w+"px",threshold:Zm(0,jp(1,c))||1};let E=!0;function S(T){const M=T[0].intersectionRatio;if(M!==c){if(!E)return o();M?o(!1,M):r=setTimeout(()=>{o(!1,1e-7)},1e3)}M===1&&!LL(u,a.getBoundingClientRect())&&o(),E=!1}try{s=new IntersectionObserver(S,{...j,root:n.ownerDocument})}catch{s=new IntersectionObserver(S,j)}s.observe(a)}return o(!0),i}function Gre(a,e,s,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=fC(a),m=n||i?[...u?s0(u):[],...s0(e)]:[];m.forEach(w=>{n&&w.addEventListener("scroll",s,{passive:!0}),i&&w.addEventListener("resize",s)});const A=u&&l?qre(u,s):null;let g=-1,p=null;o&&(p=new ResizeObserver(w=>{let[B]=w;B&&B.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var j;(j=p)==null||j.observe(e)})),s()}),u&&!c&&p.observe(u),p.observe(e));let v,b=c?fA(a):null;c&&y();function y(){const w=fA(a);b&&!LL(b,w)&&s(),b=w,v=requestAnimationFrame(y)}return s(),()=>{var w;m.forEach(B=>{n&&B.removeEventListener("scroll",s),i&&B.removeEventListener("resize",s)}),A?.(),(w=p)==null||w.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const Wre=Ere,Yre=kre,jF=Cre,Kre=(a,e,s)=>{const r=new Map,n={platform:$re,...s},i={...n.platform,_c:r};return _re(a,e,{...n,platform:i})};var Xre=typeof document<"u",Jre=function(){},tv=Xre?C.useLayoutEffect:Jre;function Vv(a,e){if(a===e)return!0;if(typeof a!=typeof e)return!1;if(typeof a=="function"&&a.toString()===e.toString())return!0;let s,r,n;if(a&&e&&typeof a=="object"){if(Array.isArray(a)){if(s=a.length,s!==e.length)return!1;for(r=s;r--!==0;)if(!Vv(a[r],e[r]))return!1;return!0}if(n=Object.keys(a),s=n.length,s!==Object.keys(e).length)return!1;for(r=s;r--!==0;)if(!{}.hasOwnProperty.call(e,n[r]))return!1;for(r=s;r--!==0;){const i=n[r];if(!(i==="_owner"&&a.$$typeof)&&!Vv(a[i],e[i]))return!1}return!0}return a!==a&&e!==e}function ML(a){return typeof window>"u"?1:(a.ownerDocument.defaultView||window).devicePixelRatio||1}function _F(a,e){const s=ML(a);return Math.round(e*s)/s}function XN(a){const e=C.useRef(a);return tv(()=>{e.current=a}),e}function Zre(a){a===void 0&&(a={});const{placement:e="bottom",strategy:s="absolute",middleware:r=[],platform:n,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=a,[m,A]=C.useState({x:0,y:0,strategy:s,placement:e,middlewareData:{},isPositioned:!1}),[g,p]=C.useState(r);Vv(g,r)||p(r);const[v,b]=C.useState(null),[y,w]=C.useState(null),B=C.useCallback($=>{$!==T.current&&(T.current=$,b($))},[]),j=C.useCallback($=>{$!==M.current&&(M.current=$,w($))},[]),E=i||v,S=o||y,T=C.useRef(null),M=C.useRef(null),D=C.useRef(m),P=c!=null,Y=XN(c),Q=XN(n),L=XN(u),ae=C.useCallback(()=>{if(!T.current||!M.current)return;const $={placement:e,strategy:s,middleware:g};Q.current&&($.platform=Q.current),Kre(T.current,M.current,$).then(H=>{const te={...H,isPositioned:L.current!==!1};ne.current&&!Vv(D.current,te)&&(D.current=te,B6.flushSync(()=>{A(te)}))})},[g,e,s,Q,L]);tv(()=>{u===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,A($=>({...$,isPositioned:!1})))},[u]);const ne=C.useRef(!1);tv(()=>(ne.current=!0,()=>{ne.current=!1}),[]),tv(()=>{if(E&&(T.current=E),S&&(M.current=S),E&&S){if(Y.current)return Y.current(E,S,ae);ae()}},[E,S,ae,Y,P]);const V=C.useMemo(()=>({reference:T,floating:M,setReference:B,setFloating:j}),[B,j]),O=C.useMemo(()=>({reference:E,floating:S}),[E,S]),X=C.useMemo(()=>{const $={position:s,left:0,top:0};if(!O.floating)return $;const H=_F(O.floating,m.x),te=_F(O.floating,m.y);return l?{...$,transform:"translate("+H+"px, "+te+"px)",...ML(O.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:H,top:te}},[s,l,O.floating,m.x,m.y]);return C.useMemo(()=>({...m,update:ae,refs:V,elements:O,floatingStyles:X}),[m,ae,V,O,X])}const eae=a=>{function e(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:a,fn(s){const{element:r,padding:n}=typeof a=="function"?a(s):a;return r&&e(r)?r.current!=null?jF({element:r.current,padding:n}).fn(s):{}:r?jF({element:r,padding:n}).fn(s):{}}}},tae=(a,e)=>({...Wre(a),options:[a,e]}),sae=(a,e)=>({...Yre(a),options:[a,e]}),rae=(a,e)=>({...eae(a),options:[a,e]}),aae={...l6};let CF=!1,nae=0;const kF=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+nae++;function iae(){const[a,e]=C.useState(()=>CF?kF():void 0);return Hv(()=>{a==null&&e(kF())},[]),C.useEffect(()=>{CF=!0},[]),a}const oae=aae.useId,RL=oae||iae,lae=C.forwardRef(function(e,s){const{context:{placement:r,elements:{floating:n},middlewareData:{arrow:i,shift:o}},width:l=14,height:c=7,tipRadius:u=0,strokeWidth:m=0,staticOffset:A,stroke:g,d:p,style:{transform:v,...b}={},...y}=e,w=RL(),[B,j]=C.useState(!1);if(Hv(()=>{if(!n)return;$l(n).direction==="rtl"&&j(!0)},[n]),!n)return null;const[E,S]=r.split("-"),T=E==="top"||E==="bottom";let M=A;(T&&o!=null&&o.x||!T&&o!=null&&o.y)&&(M=null);const D=m*2,P=D/2,Y=l/2*(u/-8+1),Q=c/2*u/4,L=!!p,ae=M&&S==="end"?"bottom":"top";let ne=M&&S==="end"?"right":"left";M&&B&&(ne=S==="end"?"left":"right");const V=i?.x!=null?M||i.x:"",O=i?.y!=null?M||i.y:"",X=p||"M0,0"+(" H"+l)+(" L"+(l-Y)+","+(c-Q))+(" Q"+l/2+","+c+" "+Y+","+(c-Q))+" Z",$={top:L?"rotate(180deg)":"",left:L?"rotate(90deg)":"rotate(-90deg)",bottom:L?"":"rotate(180deg)",right:L?"rotate(-90deg)":"rotate(90deg)"}[E];return t.jsxs("svg",{...y,"aria-hidden":!0,ref:s,width:L?l:l+D,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[ne]:V,[ae]:O,[E]:T||L?"100%":"calc(100% - "+D/2+"px)",transform:[$,v].filter(H=>!!H).join(" "),...b},children:[D>0&&t.jsx("path",{clipPath:"url(#"+w+")",fill:"none",stroke:g,strokeWidth:D+(p?0:1),d:X}),t.jsx("path",{stroke:D&&!p?y.fill:"none",d:X}),t.jsx("clipPath",{id:w,children:t.jsx("rect",{x:-P,y:P*(L?-1:1),width:l+D,height:l})})]})});function cae(){const a=new Map;return{emit(e,s){var r;(r=a.get(e))==null||r.forEach(n=>n(s))},on(e,s){a.has(e)||a.set(e,new Set),a.get(e).add(s)},off(e,s){var r;(r=a.get(e))==null||r.delete(s)}}}const dae=C.createContext(null),uae=C.createContext(null),hae=()=>{var a;return((a=C.useContext(dae))==null?void 0:a.id)||null},mae=()=>C.useContext(uae);function Aae(a){const{open:e=!1,onOpenChange:s,elements:r}=a,n=RL(),i=C.useRef({}),[o]=C.useState(()=>cae()),l=hae()!=null,[c,u]=C.useState(r.reference),m=Nre((p,v,b)=>{i.current.openEvent=p?v:void 0,o.emit("openchange",{open:p,event:v,reason:b,nested:l}),s?.(p,v,b)}),A=C.useMemo(()=>({setPositionReference:u}),[]),g=C.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return C.useMemo(()=>({dataRef:i,open:e,onOpenChange:m,elements:g,events:o,floatingId:n,refs:A}),[e,m,g,o,n,A])}function fae(a){a===void 0&&(a={});const{nodeId:e}=a,s=Aae({...a,elements:{reference:null,floating:null,...a.elements}}),r=a.rootContext||s,n=r.elements,[i,o]=C.useState(null),[l,c]=C.useState(null),m=n?.domReference||i,A=C.useRef(null),g=mae();Hv(()=>{m&&(A.current=m)},[m]);const p=Zre({...a,elements:{...n,...l&&{reference:l}}}),v=C.useCallback(j=>{const E=oo(j)?{getBoundingClientRect:()=>j.getBoundingClientRect(),getClientRects:()=>j.getClientRects(),contextElement:j}:j;c(E),p.refs.setReference(E)},[p.refs]),b=C.useCallback(j=>{(oo(j)||j===null)&&(A.current=j,o(j)),(oo(p.refs.reference.current)||p.refs.reference.current===null||j!==null&&!oo(j))&&p.refs.setReference(j)},[p.refs]),y=C.useMemo(()=>({...p.refs,setReference:b,setPositionReference:v,domReference:A}),[p.refs,b,v]),w=C.useMemo(()=>({...p.elements,domReference:m}),[p.elements,m]),B=C.useMemo(()=>({...p,...r,refs:y,elements:w,nodeId:e}),[p,y,w,e,r]);return Hv(()=>{r.dataRef.current.floatingContext=B;const j=g?.nodesRef.current.find(E=>E.id===e);j&&(j.context=B)}),C.useMemo(()=>({...p,context:B,refs:y,elements:w}),[p,y,w,B])}var N_=function(e,s){return N_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},N_(e,s)};function Pi(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");N_(a,e);function s(){this.constructor=a}a.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}var wr=function(){return wr=Object.assign||function(s){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},wr.apply(this,arguments)};function xd(a,e,s){if(s||arguments.length===2)for(var r=0,n=e.length,i;r<n;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return a.concat(i||Array.prototype.slice.call(e))}var pae=function(a){var e=a.showTimeSelectOnly,s=e===void 0?!1:e,r=a.showTime,n=r===void 0?!1:r,i=a.className,o=a.children,l=a.inline,c=s?"Choose Time":"Choose Date".concat(n?" and Time":"");return qt.createElement("div",{className:i,"aria-label":c,role:l?void 0:"dialog","aria-modal":l?void 0:"true"},o)},gae=function(a,e){var s=C.useRef(null),r=C.useRef(a);C.useEffect(function(){r.current=a},[a]);var n=C.useCallback(function(i){var o,l=i.composed&&i.composedPath&&i.composedPath().find(function(c){return c instanceof Node})||i.target;s.current&&!s.current.contains(l)&&(e&&l instanceof HTMLElement&&l.classList.contains(e)||(o=r.current)===null||o===void 0||o.call(r,i))},[e]);return C.useEffect(function(){return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}},[n]),s},e1=function(a){var e=a.children,s=a.onClickOutside,r=a.className,n=a.containerRef,i=a.style,o=a.ignoreClass,l=gae(s,o);return qt.createElement("div",{className:r,style:i,ref:function(c){l.current=c,n&&(n.current=c)}},e)},vs;(function(a){a.ArrowUp="ArrowUp",a.ArrowDown="ArrowDown",a.ArrowLeft="ArrowLeft",a.ArrowRight="ArrowRight",a.PageUp="PageUp",a.PageDown="PageDown",a.Home="Home",a.End="End",a.Enter="Enter",a.Space=" ",a.Tab="Tab",a.Escape="Escape",a.Backspace="Backspace",a.X="x"})(vs||(vs={}));function OL(){var a=typeof window<"u"?window:globalThis;return a}var C0=12;function $r(a){if(a==null)return new Date;var e=typeof a=="string"?Ise(a):Qs(a);return il(e)?e:new Date}function jf(a,e,s,r,n){n===void 0&&(n=$r());for(var i=Cp(s)||Cp(pC()),o=Array.isArray(e)?e:[e],l=0,c=o;l<c.length;l++){var u=c[l],m=Sse(a,u,n,{locale:i});if(il(m)&&(!r||a===Oa(m,u,s)))return m}return null}function il(a,e){return Pv(a)&&!gd(a,new Date("1/1/1800"))}function Oa(a,e,s){if(s==="en")return AF(a,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=s?Cp(s):void 0;return s&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(s,'"].')),r=r||Cp(pC()),AF(a,e,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function sl(a,e){var s=e.dateFormat,r=e.locale,n=Array.isArray(s)&&s.length>0?s[0]:s;return a&&Oa(a,n,r)||""}var UL=" - ";function xae(a,e,s){if(!a&&!e)return"";var r=a?sl(a,s):"",n=e?sl(e,s):"",i=s.rangeSeparator||UL;return"".concat(r).concat(i).concat(n)}function bae(a,e){if(!a?.length)return"";var s=a[0]?sl(a[0],e):"";if(a.length===1)return s;if(a.length===2&&a[1]){var r=sl(a[1],e);return"".concat(s,", ").concat(r)}var n=a.length-1;return"".concat(s," (+").concat(n,")")}function iy(a,e){var s=e.hour,r=s===void 0?0:s,n=e.minute,i=n===void 0?0:n,o=e.second,l=o===void 0?0:o;return Jy(Zy(ev(a,l),i),r)}function yae(a){return oC(a)}function vae(a,e){return Oa(a,"ddd",e)}function fx(a){return AA(a)}function Uh(a,e,s){var r=Cp(e||pC());return ku(a,{locale:r,weekStartsOn:s})}function Nu(a){return gL(a)}function px(a){return Ww(a)}function BF(a){return x_(a)}function SF(){return AA($r())}function EF(a){return fL(a)}function wae(a){return Iee(a)}function Nae(a){return pL(a)}function ud(a,e){return a&&e?Tse(a,e):!a&&!e}function no(a,e){return a&&e?Fse(a,e):!a&&!e}function zv(a,e){return a&&e?Dse(a,e):!a&&!e}function Br(a,e){return a&&e?Tee(a,e):!a&&!e}function zm(a,e){return a&&e?Pte(a,e):!a&&!e}function Rm(a,e,s){var r,n=AA(e),i=fL(s);try{r=t0(a,{start:n,end:i})}catch{r=!1}return r}function pC(){var a=OL();return a.__localeId__}function Cp(a){if(typeof a=="string"){var e=OL();return e.__localeData__?e.__localeData__[a]:void 0}else return a}function jae(a,e,s){return e(Oa(a,"EEEE",s))}function _ae(a,e){return Oa(a,"EEEEEE",e)}function Cae(a,e){return Oa(a,"EEE",e)}function gC(a,e){return Oa(rl($r(),a),"LLLL",e)}function QL(a,e){return Oa(rl($r(),a),"LLL",e)}function kae(a,e){return Oa(Uf($r(),a),"QQQ",e)}function Ll(a,e){var s=e===void 0?{}:e,r=s.minDate,n=s.maxDate,i=s.excludeDates,o=s.excludeDateIntervals,l=s.includeDates,c=s.includeDateIntervals,u=s.filterDate,m=s.disabled;return m?!0:k0(a,{minDate:r,maxDate:n})||i&&i.some(function(A){return A instanceof Date?Br(a,A):Br(a,A.date)})||o&&o.some(function(A){var g=A.start,p=A.end;return t0(a,{start:g,end:p})})||l&&!l.some(function(A){return Br(a,A)})||c&&!c.some(function(A){var g=A.start,p=A.end;return t0(a,{start:g,end:p})})||u&&!u($r(a))||!1}function xC(a,e){var s=e===void 0?{}:e,r=s.excludeDates,n=s.excludeDateIntervals;return n&&n.length>0?n.some(function(i){var o=i.start,l=i.end;return t0(a,{start:o,end:l})}):r&&r.some(function(i){var o;return i instanceof Date?Br(a,i):Br(a,(o=i.date)!==null&&o!==void 0?o:new Date)})||!1}function HL(a,e){var s=e===void 0?{}:e,r=s.minDate,n=s.maxDate,i=s.excludeDates,o=s.includeDates,l=s.filterDate;return k0(a,{minDate:r?gL(r):void 0,maxDate:n?pL(n):void 0})||i?.some(function(c){return no(a,c instanceof Date?c:c.date)})||o&&!o.some(function(c){return no(a,c)})||l&&!l($r(a))||!1}function oy(a,e,s,r){var n=Nr(a),i=Mo(a),o=Nr(e),l=Mo(e),c=Nr(r);return n===o&&n===c?i<=s&&s<=l:n<o?c===n&&i<=s||c===o&&l>=s||c<o&&c>n:!1}function Bae(a,e){var s=e===void 0?{}:e,r=s.minDate,n=s.maxDate,i=s.excludeDates,o=s.includeDates;return k0(a,{minDate:r,maxDate:n})||i&&i.some(function(l){return no(l instanceof Date?l:l.date,a)})||o&&!o.some(function(l){return no(l,a)})||!1}function ly(a,e){var s=e===void 0?{}:e,r=s.minDate,n=s.maxDate,i=s.excludeDates,o=s.includeDates,l=s.filterDate,c=s.disabled;return c?!0:k0(a,{minDate:r,maxDate:n})||i?.some(function(u){return zv(a,u instanceof Date?u:u.date)})||o&&!o.some(function(u){return zv(a,u)})||l&&!l($r(a))||!1}function cy(a,e,s){if(!e||!s||!Pv(e)||!Pv(s))return!1;var r=Nr(e),n=Nr(s);return r<=a&&n>=a}function sv(a,e){var s=e===void 0?{}:e,r=s.minDate,n=s.maxDate,i=s.excludeDates,o=s.includeDates,l=s.filterDate,c=s.disabled;if(c)return!0;var u=new Date(a,0,1);return k0(u,{minDate:r?Ww(r):void 0,maxDate:n?xL(n):void 0})||i?.some(function(m){return ud(u,m instanceof Date?m:m.date)})||o&&!o.some(function(m){return ud(u,m)})||l&&!l($r(u))||!1}function dy(a,e,s,r){var n=Nr(a),i=Th(a),o=Nr(e),l=Th(e),c=Nr(r);return n===o&&n===c?i<=s&&s<=l:n<o?c===n&&i<=s||c===o&&l>=s||c<o&&c>n:!1}function k0(a,e){var s,r=e===void 0?{}:e,n=r.minDate,i=r.maxDate;return(s=n&&vp(a,n)<0||i&&vp(a,i)>0)!==null&&s!==void 0?s:!1}function FF(a,e){return e.some(function(s){return wc(s)===wc(a)&&Nc(s)===Nc(a)&&Oh(s)===Oh(a)})}function DF(a,e){var s=e===void 0?{}:e,r=s.excludeTimes,n=s.includeTimes,i=s.filterTime;return r&&FF(a,r)||n&&!FF(a,n)||i&&!i(a)||!1}function TF(a,e){var s=e.minTime,r=e.maxTime;if(!s||!r)throw new Error("Both minTime and maxTime props required");var n=$r();n=Jy(n,wc(a)),n=Zy(n,Nc(a)),n=ev(n,Oh(a));var i=$r();i=Jy(i,wc(s)),i=Zy(i,Nc(s)),i=ev(i,Oh(s));var o=$r();o=Jy(o,wc(r)),o=Zy(o,Nc(r)),o=ev(o,Oh(r));var l;try{l=!t0(n,{start:i,end:o})}catch{l=!1}return l}function PF(a,e){var s=e===void 0?{}:e,r=s.minDate,n=s.includeDates,i=Jm(a,1);return r&&Iv(r,i)>0||n&&n.every(function(o){return Iv(o,i)>0})||!1}function IF(a,e){var s=e===void 0?{}:e,r=s.maxDate,n=s.includeDates,i=Bc(a,1);return r&&Iv(i,r)>0||n&&n.every(function(o){return Iv(i,o)>0})||!1}function Sae(a,e){var s=e===void 0?{}:e,r=s.minDate,n=s.includeDates,i=Ww(a),o=kL(i);return r&&Lv(r,o)>0||n&&n.every(function(l){return Lv(l,o)>0})||!1}function Eae(a,e){var s=e===void 0?{}:e,r=s.maxDate,n=s.includeDates,i=xL(a),o=iC(i,1);return r&&Lv(o,r)>0||n&&n.every(function(l){return Lv(o,l)>0})||!1}function LF(a,e){var s=e===void 0?{}:e,r=s.minDate,n=s.includeDates,i=wp(a,1);return r&&Mv(r,i)>0||n&&n.every(function(o){return Mv(o,i)>0})||!1}function Fae(a,e){var s=e===void 0?{}:e,r=s.minDate,n=s.yearItemNumber,i=n===void 0?C0:n,o=px(wp(a,i)),l=xu(o,i).endPeriod,c=r&&Nr(r);return c&&c>l||!1}function MF(a,e){var s=e===void 0?{}:e,r=s.maxDate,n=s.includeDates,i=vu(a,1);return r&&Mv(i,r)>0||n&&n.every(function(o){return Mv(i,o)>0})||!1}function Dae(a,e){var s=e===void 0?{}:e,r=s.maxDate,n=s.yearItemNumber,i=n===void 0?C0:n,o=vu(a,i),l=xu(o,i).startPeriod,c=r&&Nr(r);return c&&c<l||!1}function VL(a){var e=a.minDate,s=a.includeDates;if(s&&e){var r=s.filter(function(n){return vp(n,e)>=0});return lF(r)}else return s?lF(s):e}function zL(a){var e=a.maxDate,s=a.includeDates;if(s&&e){var r=s.filter(function(n){return vp(n,e)<=0});return oF(r)}else return s?oF(s):e}function RF(a,e){var s;a===void 0&&(a=[]),e===void 0&&(e="react-datepicker__day--highlighted");for(var r=new Map,n=0,i=a.length;n<i;n++){var o=a[n];if(wu(o)){var l=Oa(o,"MM.dd.yyyy"),c=r.get(l)||[];c.includes(e)||(c.push(e),r.set(l,c))}else if(typeof o=="object"){var u=Object.keys(o),m=(s=u[0])!==null&&s!==void 0?s:"",A=o[m];if(typeof m=="string"&&Array.isArray(A))for(var g=0,p=A.length;g<p;g++){var v=A[g];if(v){var l=Oa(v,"MM.dd.yyyy"),c=r.get(l)||[];c.includes(m)||(c.push(m),r.set(l,c))}}}}return r}function Tae(a,e){return a.length!==e.length?!1:a.every(function(s,r){return s===e[r]})}function Pae(a,e){a===void 0&&(a=[]),e===void 0&&(e="react-datepicker__day--holidays");var s=new Map;return a.forEach(function(r){var n=r.date,i=r.holidayName;if(wu(n)){var o=Oa(n,"MM.dd.yyyy"),l=s.get(o)||{className:"",holidayNames:[]};if(!("className"in l&&l.className===e&&Tae(l.holidayNames,[i]))){l.className=e;var c=l.holidayNames;l.holidayNames=c?xd(xd([],c,!0),[i],!1):[i],s.set(o,l)}}}),s}function Iae(a,e,s,r,n){for(var i=n.length,o=[],l=0;l<i;l++){var c=a,u=n[l];u&&(c=See(c,wc(u)),c=e0(c,Nc(u)),c=Dee(c,Oh(u)));var m=e0(a,(s+1)*r);Wh(c,e)&&gd(c,m)&&u!=null&&o.push(u)}return o}function OF(a){return a<10?"0".concat(a):"".concat(a)}function xu(a,e){e===void 0&&(e=C0);var s=Math.ceil(Nr(a)/e)*e,r=s-(e-1);return{startPeriod:r,endPeriod:s}}function Lae(a){var e=new Date(a.getFullYear(),a.getMonth(),a.getDate()),s=new Date(a.getFullYear(),a.getMonth(),a.getDate(),24);return Math.round((+s-+e)/36e5)}function UF(a){var e=a.getSeconds(),s=a.getMilliseconds();return Qs(a.getTime()-e*1e3-s)}function $L(a,e){return UF(a).getTime()===UF(e).getTime()}function QF(a){if(!wu(a))throw new Error("Invalid date");var e=new Date(a);return e.setHours(0,0,0,0),e}function JN(a,e){if(!wu(a)||!wu(e))throw new Error("Invalid date received");var s=QF(a),r=QF(e);return gd(s,r)}function qL(a){return a.key===vs.Space}var Mae=(function(a){Pi(e,a);function e(s){var r=a.call(this,s)||this;return r.inputRef=qt.createRef(),r.onTimeChange=function(n){var i,o;r.setState({time:n});var l=r.props.date,c=l instanceof Date&&!isNaN(+l),u=c?l:new Date;if(n?.includes(":")){var m=n.split(":"),A=m[0],g=m[1];u.setHours(Number(A)),u.setMinutes(Number(g))}(o=(i=r.props).onChange)===null||o===void 0||o.call(i,u)},r.renderTimeInput=function(){var n=r.state.time,i=r.props,o=i.date,l=i.timeString,c=i.customTimeInput;return c?C.cloneElement(c,{date:o,value:n,onChange:r.onTimeChange}):qt.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var u;(u=r.inputRef.current)===null||u===void 0||u.focus()},required:!0,value:n,onChange:function(u){r.onTimeChange(u.target.value||l)}})},r.state={time:r.props.timeString},r}return e.getDerivedStateFromProps=function(s,r){return s.timeString!==r.time?{time:s.timeString}:null},e.prototype.render=function(){return qt.createElement("div",{className:"react-datepicker__input-time-container"},qt.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),qt.createElement("div",{className:"react-datepicker-time__input-container"},qt.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},e})(C.Component),Rae=(function(a){Pi(e,a);function e(){var s=a!==null&&a.apply(this,arguments)||this;return s.dayEl=C.createRef(),s.handleClick=function(r){!s.isDisabled()&&s.props.onClick&&s.props.onClick(r)},s.handleMouseEnter=function(r){!s.isDisabled()&&s.props.onMouseEnter&&s.props.onMouseEnter(r)},s.handleOnKeyDown=function(r){var n,i,o=r.key;o===vs.Space&&(r.preventDefault(),r.key=vs.Enter),(i=(n=s.props).handleOnKeyDown)===null||i===void 0||i.call(n,r)},s.isSameDay=function(r){return Br(s.props.day,r)},s.isKeyboardSelected=function(){var r;if(s.props.disabledKeyboardNavigation)return!1;var n=s.props.selectsMultiple?(r=s.props.selectedDates)===null||r===void 0?void 0:r.some(function(o){return s.isSameDayOrWeek(o)}):s.isSameDayOrWeek(s.props.selected),i=s.props.preSelection&&s.isDisabled(s.props.preSelection);return!n&&s.isSameDayOrWeek(s.props.preSelection)&&!i},s.isDisabled=function(r){return r===void 0&&(r=s.props.day),Ll(r,{minDate:s.props.minDate,maxDate:s.props.maxDate,excludeDates:s.props.excludeDates,excludeDateIntervals:s.props.excludeDateIntervals,includeDateIntervals:s.props.includeDateIntervals,includeDates:s.props.includeDates,filterDate:s.props.filterDate,disabled:s.props.disabled})},s.isExcluded=function(){return xC(s.props.day,{excludeDates:s.props.excludeDates,excludeDateIntervals:s.props.excludeDateIntervals})},s.isStartOfWeek=function(){return Br(s.props.day,Uh(s.props.day,s.props.locale,s.props.calendarStartDay))},s.isSameWeek=function(r){return s.props.showWeekPicker&&Br(r,Uh(s.props.day,s.props.locale,s.props.calendarStartDay))},s.isSameDayOrWeek=function(r){return s.isSameDay(r)||s.isSameWeek(r)},s.getHighLightedClass=function(){var r=s.props,n=r.day,i=r.highlightDates;if(!i)return!1;var o=Oa(n,"MM.dd.yyyy");return i.get(o)},s.getHolidaysClass=function(){var r,n=s.props,i=n.day,o=n.holidays;if(!o)return[void 0];var l=Oa(i,"MM.dd.yyyy");return o.has(l)?[(r=o.get(l))===null||r===void 0?void 0:r.className]:[void 0]},s.isInRange=function(){var r=s.props,n=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:Rm(n,i,o)},s.isInSelectingRange=function(){var r,n=s.props,i=n.day,o=n.selectsStart,l=n.selectsEnd,c=n.selectsRange,u=n.selectsDisabledDaysInRange,m=n.startDate,A=n.swapRange,g=n.endDate,p=(r=s.props.selectingDate)!==null&&r!==void 0?r:s.props.preSelection;if(!(o||l||c)||!p||!u&&s.isDisabled())return!1;if(o&&g&&(gd(p,g)||zm(p,g)))return Rm(i,p,g);if(l&&m&&(Wh(p,m)||zm(p,m)))return Rm(i,m,p);if(c&&m&&!g){if(zm(p,m)||Wh(p,m))return Rm(i,m,p);if(A&&gd(p,m))return Rm(i,p,m)}return!1},s.isSelectingRangeStart=function(){var r;if(!s.isInSelectingRange())return!1;var n=s.props,i=n.day,o=n.startDate,l=n.selectsStart,c=n.swapRange,u=n.selectsRange,m=(r=s.props.selectingDate)!==null&&r!==void 0?r:s.props.preSelection;return l?Br(i,m):u&&c&&o&&m?Br(i,gd(m,o)?m:o):Br(i,o)},s.isSelectingRangeEnd=function(){var r;if(!s.isInSelectingRange())return!1;var n=s.props,i=n.day,o=n.endDate,l=n.selectsEnd,c=n.selectsRange,u=n.swapRange,m=n.startDate,A=(r=s.props.selectingDate)!==null&&r!==void 0?r:s.props.preSelection;return l?Br(i,A):c&&u&&m&&A?Br(i,gd(A,m)?m:A):c?Br(i,A):Br(i,o)},s.isRangeStart=function(){var r=s.props,n=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:Br(i,n)},s.isRangeEnd=function(){var r=s.props,n=r.day,i=r.startDate,o=r.endDate;return!i||!o?!1:Br(o,n)},s.isWeekend=function(){var r=Ete(s.props.day);return r===0||r===6},s.isAfterMonth=function(){return s.props.month!==void 0&&(s.props.month+1)%12===Mo(s.props.day)},s.isBeforeMonth=function(){return s.props.month!==void 0&&(Mo(s.props.day)+1)%12===s.props.month},s.isCurrentDay=function(){return s.isSameDay($r())},s.isSelected=function(){var r;return s.props.selectsMultiple?(r=s.props.selectedDates)===null||r===void 0?void 0:r.some(function(n){return s.isSameDayOrWeek(n)}):s.isSameDayOrWeek(s.props.selected)},s.getClassNames=function(r){var n=s.props.dayClassName?s.props.dayClassName(r):void 0;return Fi("react-datepicker__day",n,"react-datepicker__day--"+vae(s.props.day),{"react-datepicker__day--disabled":s.isDisabled(),"react-datepicker__day--excluded":s.isExcluded(),"react-datepicker__day--selected":s.isSelected(),"react-datepicker__day--keyboard-selected":s.isKeyboardSelected(),"react-datepicker__day--range-start":s.isRangeStart(),"react-datepicker__day--range-end":s.isRangeEnd(),"react-datepicker__day--in-range":s.isInRange(),"react-datepicker__day--in-selecting-range":s.isInSelectingRange(),"react-datepicker__day--selecting-range-start":s.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":s.isSelectingRangeEnd(),"react-datepicker__day--today":s.isCurrentDay(),"react-datepicker__day--weekend":s.isWeekend(),"react-datepicker__day--outside-month":s.isAfterMonth()||s.isBeforeMonth()},s.getHighLightedClass(),s.getHolidaysClass())},s.getAriaLabel=function(){var r=s.props,n=r.day,i=r.ariaLabelPrefixWhenEnabled,o=i===void 0?"Choose":i,l=r.ariaLabelPrefixWhenDisabled,c=l===void 0?"Not available":l,u=s.isDisabled()||s.isExcluded()?c:o;return"".concat(u," ").concat(Oa(n,"PPPP",s.props.locale))},s.getTitle=function(){var r=s.props,n=r.day,i=r.holidays,o=i===void 0?new Map:i,l=r.excludeDates,c=Oa(n,"MM.dd.yyyy"),u=[];return o.has(c)&&u.push.apply(u,o.get(c).holidayNames),s.isExcluded()&&u.push(l?.filter(function(m){return m instanceof Date?Br(m,n):Br(m?.date,n)}).map(function(m){if(!(m instanceof Date))return m?.message})),u.join(", ")},s.getTabIndex=function(){var r=s.props.selected,n=s.props.preSelection,i=!(s.props.showWeekPicker&&(s.props.showWeekNumber||!s.isStartOfWeek()))&&(s.isKeyboardSelected()||s.isSameDay(r)&&Br(n,r))?0:-1;return i},s.handleFocusDay=function(){var r;s.shouldFocusDay()&&((r=s.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},s.renderDayContents=function(){return s.props.monthShowsDuplicateDaysEnd&&s.isAfterMonth()||s.props.monthShowsDuplicateDaysStart&&s.isBeforeMonth()?null:s.props.renderDayContents?s.props.renderDayContents(fF(s.props.day),s.props.day):fF(s.props.day)},s.render=function(){return qt.createElement("div",{ref:s.dayEl,className:s.getClassNames(s.props.day),onKeyDown:s.handleOnKeyDown,onClick:s.handleClick,onMouseEnter:s.props.usePointerEvent?void 0:s.handleMouseEnter,onPointerEnter:s.props.usePointerEvent?s.handleMouseEnter:void 0,tabIndex:s.getTabIndex(),"aria-label":s.getAriaLabel(),role:"gridcell",title:s.getTitle(),"aria-disabled":s.isDisabled(),"aria-current":s.isCurrentDay()?"date":void 0,"aria-selected":s.isSelected()||s.isInRange()},s.renderDayContents(),s.getTitle()!==""&&qt.createElement("span",{className:"overlay"},s.getTitle()))},s}return e.prototype.componentDidMount=function(){this.handleFocusDay()},e.prototype.componentDidUpdate=function(){this.handleFocusDay()},e.prototype.shouldFocusDay=function(){var s=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(s=!1),this.isDayActiveElement()&&(s=!0),this.isDuplicateDay()&&(s=!1)),s},e.prototype.isDayActiveElement=function(){var s,r,n;return((r=(s=this.props.containerRef)===null||s===void 0?void 0:s.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((n=document.activeElement)===null||n===void 0?void 0:n.classList.contains("react-datepicker__day"))},e.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},e})(C.Component),Oae=(function(a){Pi(e,a);function e(){var s=a!==null&&a.apply(this,arguments)||this;return s.weekNumberEl=C.createRef(),s.handleClick=function(r){s.props.onClick&&s.props.onClick(r)},s.handleOnKeyDown=function(r){var n,i,o=r.key;o===vs.Space&&(r.preventDefault(),r.key=vs.Enter),(i=(n=s.props).handleOnKeyDown)===null||i===void 0||i.call(n,r)},s.isKeyboardSelected=function(){return!s.props.disabledKeyboardNavigation&&!Br(s.props.date,s.props.selected)&&Br(s.props.date,s.props.preSelection)},s.getTabIndex=function(){return s.props.showWeekPicker&&s.props.showWeekNumber&&(s.isKeyboardSelected()||Br(s.props.date,s.props.selected)&&Br(s.props.preSelection,s.props.selected))?0:-1},s.handleFocusWeekNumber=function(r){var n=!1;s.getTabIndex()===0&&!r?.isInputFocused&&Br(s.props.date,s.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),s.props.inline&&!s.props.shouldFocusDayInline&&(n=!1),s.props.containerRef&&s.props.containerRef.current&&s.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(n=!0)),n&&s.weekNumberEl.current&&s.weekNumberEl.current.focus({preventScroll:!0})},s}return Object.defineProperty(e,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},e.prototype.componentDidUpdate=function(s){this.handleFocusWeekNumber(s)},e.prototype.render=function(){var s=this.props,r=s.weekNumber,n=s.isWeekDisabled,i=s.ariaLabelPrefix,o=i===void 0?e.defaultProps.ariaLabelPrefix:i,l=s.onClick,c={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!l&&!n,"react-datepicker__week-number--selected":!!l&&Br(this.props.date,this.props.selected)};return qt.createElement("div",{ref:this.weekNumberEl,className:Fi(c),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},r)},e})(C.Component),Uae=(function(a){Pi(e,a);function e(){var s=a!==null&&a.apply(this,arguments)||this;return s.isDisabled=function(r){return Ll(r,{minDate:s.props.minDate,maxDate:s.props.maxDate,excludeDates:s.props.excludeDates,excludeDateIntervals:s.props.excludeDateIntervals,includeDateIntervals:s.props.includeDateIntervals,includeDates:s.props.includeDates,filterDate:s.props.filterDate})},s.handleDayClick=function(r,n){s.props.onDayClick&&s.props.onDayClick(r,n)},s.handleDayMouseEnter=function(r){s.props.onDayMouseEnter&&s.props.onDayMouseEnter(r)},s.handleWeekClick=function(r,n,i){for(var o,l,c,u=new Date(r),m=0;m<7;m++){var A=new Date(r);A.setDate(A.getDate()+m);var g=!s.isDisabled(A);if(g){u=A;break}}typeof s.props.onWeekSelect=="function"&&s.props.onWeekSelect(u,n,i),s.props.showWeekPicker&&s.handleDayClick(u,i),((o=s.props.shouldCloseOnSelect)!==null&&o!==void 0?o:e.defaultProps.shouldCloseOnSelect)&&((c=(l=s.props).setOpen)===null||c===void 0||c.call(l,!1))},s.formatWeekNumber=function(r){return s.props.formatWeekNumber?s.props.formatWeekNumber(r):yae(r)},s.isWeekDisabled=function(){for(var r=s.startOfWeek(),n=jc(r,6),i=new Date(r);i<=n;){if(!s.isDisabled(i))return!1;i=jc(i,1)}return!0},s.renderDays=function(){var r=s.startOfWeek(),n=[],i=s.formatWeekNumber(r);if(s.props.showWeekNumber){var o=s.props.onWeekSelect||s.props.showWeekPicker?s.handleWeekClick.bind(s,r,i):void 0;n.push(qt.createElement(Oae,wr({key:"W"},e.defaultProps,s.props,{weekNumber:i,isWeekDisabled:s.isWeekDisabled(),date:r,onClick:o})))}return n.concat([0,1,2,3,4,5,6].map(function(l){var c=jc(r,l);return qt.createElement(Rae,wr({},e.defaultProps,s.props,{ariaLabelPrefixWhenEnabled:s.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:s.props.disabledDayAriaLabelPrefix,key:c.valueOf(),day:c,onClick:s.handleDayClick.bind(s,c),onMouseEnter:s.handleDayMouseEnter.bind(s,c)}))}))},s.startOfWeek=function(){return Uh(s.props.day,s.props.locale,s.props.calendarStartDay)},s.isKeyboardSelected=function(){return!s.props.disabledKeyboardNavigation&&!Br(s.startOfWeek(),s.props.selected)&&Br(s.startOfWeek(),s.props.preSelection)},s}return Object.defineProperty(e,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var s={"react-datepicker__week":!0,"react-datepicker__week--selected":Br(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},r=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return qt.createElement("div",{className:Fi(s,r),role:"row"},this.renderDays())},e})(C.Component),Jg,Qae=6,cp={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},ZN=(Jg={},Jg[cp.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Jg[cp.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Jg[cp.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Jg),uy=1;function HF(a,e){return a?cp.FOUR_COLUMNS:e?cp.TWO_COLUMNS:cp.THREE_COLUMNS}var Hae=(function(a){Pi(e,a);function e(){var s=a!==null&&a.apply(this,arguments)||this;return s.MONTH_REFS=xd([],Array(12),!0).map(function(){return C.createRef()}),s.QUARTER_REFS=xd([],Array(4),!0).map(function(){return C.createRef()}),s.isDisabled=function(r){return Ll(r,{minDate:s.props.minDate,maxDate:s.props.maxDate,excludeDates:s.props.excludeDates,excludeDateIntervals:s.props.excludeDateIntervals,includeDateIntervals:s.props.includeDateIntervals,includeDates:s.props.includeDates,filterDate:s.props.filterDate,disabled:s.props.disabled})},s.isExcluded=function(r){return xC(r,{excludeDates:s.props.excludeDates,excludeDateIntervals:s.props.excludeDateIntervals})},s.handleDayClick=function(r,n){var i,o;(o=(i=s.props).onDayClick)===null||o===void 0||o.call(i,r,n,s.props.orderInDisplay)},s.handleDayMouseEnter=function(r){var n,i;(i=(n=s.props).onDayMouseEnter)===null||i===void 0||i.call(n,r)},s.handleMouseLeave=function(){var r,n;(n=(r=s.props).onMouseLeave)===null||n===void 0||n.call(r)},s.isRangeStartMonth=function(r){var n=s.props,i=n.day,o=n.startDate,l=n.endDate;return!o||!l?!1:no(rl(i,r),o)},s.isRangeStartQuarter=function(r){var n=s.props,i=n.day,o=n.startDate,l=n.endDate;return!o||!l?!1:zv(Uf(i,r),o)},s.isRangeEndMonth=function(r){var n=s.props,i=n.day,o=n.startDate,l=n.endDate;return!o||!l?!1:no(rl(i,r),l)},s.isRangeEndQuarter=function(r){var n=s.props,i=n.day,o=n.startDate,l=n.endDate;return!o||!l?!1:zv(Uf(i,r),l)},s.isInSelectingRangeMonth=function(r){var n,i=s.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,u=i.selectsRange,m=i.startDate,A=i.endDate,g=(n=s.props.selectingDate)!==null&&n!==void 0?n:s.props.preSelection;return!(l||c||u)||!g?!1:l&&A?oy(g,A,r,o):c&&m||u&&m&&!A?oy(m,g,r,o):!1},s.isSelectingMonthRangeStart=function(r){var n;if(!s.isInSelectingRangeMonth(r))return!1;var i=s.props,o=i.day,l=i.startDate,c=i.selectsStart,u=rl(o,r),m=(n=s.props.selectingDate)!==null&&n!==void 0?n:s.props.preSelection;return c?no(u,m):no(u,l)},s.isSelectingMonthRangeEnd=function(r){var n;if(!s.isInSelectingRangeMonth(r))return!1;var i=s.props,o=i.day,l=i.endDate,c=i.selectsEnd,u=i.selectsRange,m=rl(o,r),A=(n=s.props.selectingDate)!==null&&n!==void 0?n:s.props.preSelection;return c||u?no(m,A):no(m,l)},s.isInSelectingRangeQuarter=function(r){var n,i=s.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,u=i.selectsRange,m=i.startDate,A=i.endDate,g=(n=s.props.selectingDate)!==null&&n!==void 0?n:s.props.preSelection;return!(l||c||u)||!g?!1:l&&A?dy(g,A,r,o):c&&m||u&&m&&!A?dy(m,g,r,o):!1},s.isWeekInMonth=function(r){var n=s.props.day,i=jc(r,6);return no(r,n)||no(i,n)},s.isCurrentMonth=function(r,n){return Nr(r)===Nr($r())&&n===Mo($r())},s.isCurrentQuarter=function(r,n){return Nr(r)===Nr($r())&&n===Th($r())},s.isSelectedMonth=function(r,n,i){return Mo(i)===n&&Nr(r)===Nr(i)},s.isSelectMonthInList=function(r,n,i){return i.some(function(o){return s.isSelectedMonth(r,n,o)})},s.isSelectedQuarter=function(r,n,i){return Th(i)===n&&Nr(r)===Nr(i)},s.isSelectQuarterInList=function(r,n,i){return i.some(function(o){return s.isSelectedQuarter(r,n,o)})},s.isMonthSelected=function(){var r=s.props,n=r.day,i=r.selected,o=r.selectedDates,l=r.selectsMultiple,c=Mo(n);return l?o?.some(function(u){return s.isSelectedMonth(n,c,u)}):!!i&&s.isSelectedMonth(n,c,i)},s.isQuarterSelected=function(){var r=s.props,n=r.day,i=r.selected,o=r.selectedDates,l=r.selectsMultiple,c=Th(n);return l?o?.some(function(u){return s.isSelectedQuarter(n,c,u)}):!!i&&s.isSelectedQuarter(n,c,i)},s.renderWeeks=function(){if(!il(s.props.day))return[];for(var r=[],n=s.props.fixedHeight,i=0,o=!1,l=Uh(Nu(s.props.day),s.props.locale,s.props.calendarStartDay),c=function(v){return s.props.showWeekPicker?Uh(v,s.props.locale,s.props.calendarStartDay):s.props.preSelection},u=function(v){return s.props.showWeekPicker?Uh(v,s.props.locale,s.props.calendarStartDay):s.props.selected},m=s.props.selected?u(s.props.selected):void 0,A=s.props.preSelection?c(s.props.preSelection):void 0;r.push(qt.createElement(Uae,wr({},s.props,{ariaLabelPrefix:s.props.weekAriaLabelPrefix,key:i,day:l,month:Mo(s.props.day),onDayClick:s.handleDayClick,onDayMouseEnter:s.handleDayMouseEnter,selected:m,preSelection:A,showWeekNumber:s.props.showWeekNumbers}))),!o;){i++,l=Tv(l,1);var g=n&&i>=Qae,p=!n&&!s.isWeekInMonth(l);if(g||p)if(s.props.peekNextMonth)o=!0;else break}return r},s.onMonthClick=function(r,n){var i=s.isMonthDisabledForLabelDate(n),o=i.isDisabled,l=i.labelDate;o||s.handleDayClick(Nu(l),r)},s.onMonthMouseEnter=function(r){var n=s.isMonthDisabledForLabelDate(r),i=n.isDisabled,o=n.labelDate;i||s.handleDayMouseEnter(Nu(o))},s.handleMonthNavigation=function(r,n){var i,o,l,c;(o=(i=s.props).setPreSelection)===null||o===void 0||o.call(i,n),(c=(l=s.MONTH_REFS[r])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus()},s.handleKeyboardNavigation=function(r,n,i){var o,l=s.props,c=l.selected,u=l.preSelection,m=l.setPreSelection,A=l.minDate,g=l.maxDate,p=l.showFourColumnMonthYearPicker,v=l.showTwoColumnMonthYearPicker;if(u){var b=HF(p,v),y=s.getVerticalOffset(b),w=(o=ZN[b])===null||o===void 0?void 0:o.grid,B=function(M,D,P){var Y,Q,L=D,ae=P;switch(M){case vs.ArrowRight:L=Bc(D,uy),ae=P===11?0:P+uy;break;case vs.ArrowLeft:L=Jm(D,uy),ae=P===0?11:P-uy;break;case vs.ArrowUp:L=Jm(D,y),ae=!((Y=w?.[0])===null||Y===void 0)&&Y.includes(P)?P+12-y:P-y;break;case vs.ArrowDown:L=Bc(D,y),ae=!((Q=w?.[w.length-1])===null||Q===void 0)&&Q.includes(P)?P-12+y:P+y;break}return{newCalculatedDate:L,newCalculatedMonth:ae}},j=function(M,D,P){for(var Y=40,Q=M,L=!1,ae=0,ne=B(Q,D,P),V=ne.newCalculatedDate,O=ne.newCalculatedMonth;!L;){if(ae>=Y){V=D,O=P;break}if(A&&V<A){Q=vs.ArrowRight;var X=B(Q,V,O);V=X.newCalculatedDate,O=X.newCalculatedMonth}if(g&&V>g){Q=vs.ArrowLeft;var X=B(Q,V,O);V=X.newCalculatedDate,O=X.newCalculatedMonth}if(Bae(V,s.props)){var X=B(Q,V,O);V=X.newCalculatedDate,O=X.newCalculatedMonth}else L=!0;ae++}return{newCalculatedDate:V,newCalculatedMonth:O}};if(n===vs.Enter){s.isMonthDisabled(i)||(s.onMonthClick(r,i),m?.(c));return}var E=j(n,u,i),S=E.newCalculatedDate,T=E.newCalculatedMonth;switch(n){case vs.ArrowRight:case vs.ArrowLeft:case vs.ArrowUp:case vs.ArrowDown:s.handleMonthNavigation(T,S);break}}},s.getVerticalOffset=function(r){var n,i;return(i=(n=ZN[r])===null||n===void 0?void 0:n.verticalNavigationOffset)!==null&&i!==void 0?i:0},s.onMonthKeyDown=function(r,n){var i=s.props,o=i.disabledKeyboardNavigation,l=i.handleOnMonthKeyDown,c=r.key;c!==vs.Tab&&r.preventDefault(),o||s.handleKeyboardNavigation(r,c,n),l&&l(r)},s.onQuarterClick=function(r,n){var i=Uf(s.props.day,n);ly(i,s.props)||s.handleDayClick(BF(i),r)},s.onQuarterMouseEnter=function(r){var n=Uf(s.props.day,r);ly(n,s.props)||s.handleDayMouseEnter(BF(n))},s.handleQuarterNavigation=function(r,n){var i,o,l,c;s.isDisabled(n)||s.isExcluded(n)||((o=(i=s.props).setPreSelection)===null||o===void 0||o.call(i,n),(c=(l=s.QUARTER_REFS[r-1])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())},s.onQuarterKeyDown=function(r,n){var i,o,l=r.key;if(!s.props.disabledKeyboardNavigation)switch(l){case vs.Enter:s.onQuarterClick(r,n),(o=(i=s.props).setPreSelection)===null||o===void 0||o.call(i,s.props.selected);break;case vs.ArrowRight:if(!s.props.preSelection)break;s.handleQuarterNavigation(n===4?1:n+1,iC(s.props.preSelection,1));break;case vs.ArrowLeft:if(!s.props.preSelection)break;s.handleQuarterNavigation(n===1?4:n-1,kL(s.props.preSelection));break}},s.isMonthDisabledForLabelDate=function(r){var n,i=s.props,o=i.day,l=i.disabled,c=i.minDate,u=i.maxDate,m=i.excludeDates,A=i.includeDates,g=rl(o,r);return l?{isDisabled:!0,labelDate:rl(o,r)}:{isDisabled:(n=(c||u||m||A)&&HL(g,s.props))!==null&&n!==void 0?n:!1,labelDate:g}},s.isMonthDisabled=function(r){var n=s.isMonthDisabledForLabelDate(r).isDisabled;return n},s.getMonthClassNames=function(r){var n=s.props,i=n.day,o=n.startDate,l=n.endDate,c=n.preSelection,u=n.monthClassName,m=u?u(rl(i,r)):void 0,A=s.getSelection();return Fi("react-datepicker__month-text","react-datepicker__month-".concat(r),m,{"react-datepicker__month-text--disabled":s.isMonthDisabled(r),"react-datepicker__month-text--selected":A?s.isSelectMonthInList(i,r,A):void 0,"react-datepicker__month-text--keyboard-selected":!s.props.disabledKeyboardNavigation&&c&&s.isSelectedMonth(i,r,c)&&!s.isMonthSelected()&&!s.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":s.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":o&&l?oy(o,l,r,i):void 0,"react-datepicker__month-text--range-start":s.isRangeStartMonth(r),"react-datepicker__month-text--range-end":s.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":s.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":s.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":s.isCurrentMonth(i,r)})},s.getTabIndex=function(r){if(s.props.preSelection==null)return"-1";var n=Mo(s.props.preSelection),i=s.isMonthDisabledForLabelDate(n).isDisabled,o=r===n&&!(i||s.props.disabledKeyboardNavigation)?"0":"-1";return o},s.getQuarterTabIndex=function(r){if(s.props.preSelection==null)return"-1";var n=Th(s.props.preSelection),i=ly(s.props.day,s.props),o=r===n&&!(i||s.props.disabledKeyboardNavigation)?"0":"-1";return o},s.getAriaLabel=function(r){var n=s.props,i=n.chooseDayAriaLabelPrefix,o=i===void 0?"Choose":i,l=n.disabledDayAriaLabelPrefix,c=l===void 0?"Not available":l,u=n.day,m=n.locale,A=rl(u,r),g=s.isDisabled(A)||s.isExcluded(A)?c:o;return"".concat(g," ").concat(Oa(A,"MMMM yyyy",m))},s.getQuarterClassNames=function(r){var n=s.props,i=n.day,o=n.startDate,l=n.endDate,c=n.minDate,u=n.maxDate,m=n.excludeDates,A=n.includeDates,g=n.filterDate,p=n.preSelection,v=n.disabledKeyboardNavigation,b=n.disabled,y=(c||u||m||A||g||b)&&ly(Uf(i,r),s.props),w=s.getSelection();return Fi("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":y,"react-datepicker__quarter-text--selected":w?s.isSelectQuarterInList(i,r,w):void 0,"react-datepicker__quarter-text--keyboard-selected":!v&&p&&s.isSelectedQuarter(i,r,p)&&!s.isQuarterSelected()&&!y,"react-datepicker__quarter-text--in-selecting-range":s.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":o&&l?dy(o,l,r,i):void 0,"react-datepicker__quarter-text--range-start":s.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":s.isRangeEndQuarter(r),"react-datepicker__quarter-text--today":s.isCurrentQuarter(i,r)})},s.getMonthContent=function(r){var n=s.props,i=n.showFullMonthYearPicker,o=n.renderMonthContent,l=n.locale,c=n.day,u=QL(r,l),m=gC(r,l);return o?o(r,u,m,c):i?m:u},s.getQuarterContent=function(r){var n,i=s.props,o=i.renderQuarterContent,l=i.locale,c=kae(r,l);return(n=o?.(r,c))!==null&&n!==void 0?n:c},s.renderMonths=function(){var r,n=s.props,i=n.showTwoColumnMonthYearPicker,o=n.showFourColumnMonthYearPicker,l=n.day,c=n.selected,u=(r=ZN[HF(o,i)])===null||r===void 0?void 0:r.grid;return u?.map(function(m,A){return qt.createElement("div",{className:"react-datepicker__month-wrapper",key:A},m.map(function(g,p){return qt.createElement("div",{ref:s.MONTH_REFS[g],key:p,onClick:function(v){s.onMonthClick(v,g)},onKeyDown:function(v){qL(v)&&(v.preventDefault(),v.key=vs.Enter),s.onMonthKeyDown(v,g)},onMouseEnter:s.props.usePointerEvent?void 0:function(){return s.onMonthMouseEnter(g)},onPointerEnter:s.props.usePointerEvent?function(){return s.onMonthMouseEnter(g)}:void 0,tabIndex:Number(s.getTabIndex(g)),className:s.getMonthClassNames(g),"aria-disabled":s.isMonthDisabled(g),role:"option","aria-label":s.getAriaLabel(g),"aria-current":s.isCurrentMonth(l,g)?"date":void 0,"aria-selected":c?s.isSelectedMonth(l,g,c):void 0},s.getMonthContent(g))}))})},s.renderQuarters=function(){var r=s.props,n=r.day,i=r.selected,o=[1,2,3,4];return qt.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(l,c){return qt.createElement("div",{key:c,ref:s.QUARTER_REFS[c],role:"option",onClick:function(u){s.onQuarterClick(u,l)},onKeyDown:function(u){s.onQuarterKeyDown(u,l)},onMouseEnter:s.props.usePointerEvent?void 0:function(){return s.onQuarterMouseEnter(l)},onPointerEnter:s.props.usePointerEvent?function(){return s.onQuarterMouseEnter(l)}:void 0,className:s.getQuarterClassNames(l),"aria-selected":i?s.isSelectedQuarter(n,l,i):void 0,tabIndex:Number(s.getQuarterTabIndex(l)),"aria-current":s.isCurrentQuarter(n,l)?"date":void 0},s.getQuarterContent(l))}))},s.getClassNames=function(){var r=s.props,n=r.selectingDate,i=r.selectsStart,o=r.selectsEnd,l=r.showMonthYearPicker,c=r.showQuarterYearPicker,u=r.showWeekPicker;return Fi("react-datepicker__month",{"react-datepicker__month--selecting-range":n&&(i||o)},{"react-datepicker__monthPicker":l},{"react-datepicker__quarterPicker":c},{"react-datepicker__weekPicker":u})},s}return e.prototype.getSelection=function(){var s=this.props,r=s.selected,n=s.selectedDates,i=s.selectsMultiple;if(i)return n;if(r)return[r]},e.prototype.render=function(){var s=this.props,r=s.showMonthYearPicker,n=s.showQuarterYearPicker,i=s.day,o=s.ariaLabelPrefix,l=o===void 0?"Month ":o,c=l?l.trim()+" ":"",u=il(i)?"".concat(c).concat(Oa(i,"MMMM, yyyy",this.props.locale)):"",m=r||n;return m?qt.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":u,role:"listbox"},r?this.renderMonths():this.renderQuarters()):qt.createElement("div",{role:"table"},this.props.dayNamesHeader&&qt.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),qt.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":u,role:"rowgroup"},this.renderWeeks()))},e})(C.Component),Vae=(function(a){Pi(e,a);function e(){var s=a!==null&&a.apply(this,arguments)||this;return s.monthOptionButtonsRef={},s.isSelectedMonth=function(r){return s.props.month===r},s.handleOptionKeyDown=function(r,n){var i;switch(n.key){case"Enter":n.preventDefault(),s.onChange(r);break;case"Escape":n.preventDefault(),s.props.onCancel();break;case"ArrowUp":case"ArrowDown":{n.preventDefault();var o=(r+(n.key==="ArrowUp"?-1:1)+s.props.monthNames.length)%s.props.monthNames.length;(i=s.monthOptionButtonsRef[o])===null||i===void 0||i.focus();break}}},s.renderOptions=function(){return s.monthOptionButtonsRef={},s.props.monthNames.map(function(r,n){return qt.createElement("div",{ref:function(i){s.monthOptionButtonsRef[n]=i,s.isSelectedMonth(n)&&i?.focus()},role:"button",tabIndex:0,className:s.isSelectedMonth(n)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:s.onChange.bind(s,n),onKeyDown:s.handleOptionKeyDown.bind(s,n),"aria-selected":s.isSelectedMonth(n)?"true":void 0},s.isSelectedMonth(n)?qt.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",r)})},s.onChange=function(r){return s.props.onChange(r)},s.handleClickOutside=function(){return s.props.onCancel()},s}return e.prototype.render=function(){return qt.createElement(e1,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},e})(C.Component),zae=(function(a){Pi(e,a);function e(){var s=a!==null&&a.apply(this,arguments)||this;return s.state={dropdownVisible:!1},s.renderSelectOptions=function(r){return r.map(function(n,i){return qt.createElement("option",{key:n,value:i},n)})},s.renderSelectMode=function(r){return qt.createElement("select",{value:s.props.month,className:"react-datepicker__month-select",onChange:function(n){return s.onChange(parseInt(n.target.value))}},s.renderSelectOptions(r))},s.renderReadView=function(r,n){return qt.createElement("button",{key:"read",type:"button",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:s.toggleDropdown},qt.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),qt.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},n[s.props.month]))},s.renderDropdown=function(r){return qt.createElement(Vae,wr({key:"dropdown"},s.props,{monthNames:r,onChange:s.onChange,onCancel:s.toggleDropdown}))},s.renderScrollMode=function(r){var n=s.state.dropdownVisible,i=[s.renderReadView(!n,r)];return n&&i.unshift(s.renderDropdown(r)),i},s.onChange=function(r){s.toggleDropdown(),r!==s.props.month&&s.props.onChange(r)},s.toggleDropdown=function(){return s.setState({dropdownVisible:!s.state.dropdownVisible})},s}return e.prototype.render=function(){var s=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return QL(i,s.props.locale)}:function(i){return gC(i,s.props.locale)}),n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode(r);break;case"select":n=this.renderSelectMode(r);break}return qt.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},n)},e})(C.Component);function $ae(a,e){for(var s=[],r=Nu(a),n=Nu(e);!Wh(r,n);)s.push($r(r)),r=Bc(r,1);return s}var qae=(function(a){Pi(e,a);function e(s){var r=a.call(this,s)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(n){var i=y_(n),o=ud(r.props.date,n)&&no(r.props.date,n);return qt.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:r.onChange.bind(r,i),"aria-selected":o?"true":void 0},o?qt.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",Oa(n,r.props.dateFormat,r.props.locale))})},r.onChange=function(n){return r.props.onChange(n)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:$ae(r.props.minDate,r.props.maxDate)},r}return e.prototype.render=function(){var s=Fi({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return qt.createElement(e1,{className:s,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(C.Component),Gae=(function(a){Pi(e,a);function e(){var s=a!==null&&a.apply(this,arguments)||this;return s.state={dropdownVisible:!1},s.renderSelectOptions=function(){for(var r=Nu(s.props.minDate),n=Nu(s.props.maxDate),i=[];!Wh(r,n);){var o=y_(r);i.push(qt.createElement("option",{key:o,value:o},Oa(r,s.props.dateFormat,s.props.locale))),r=Bc(r,1)}return i},s.onSelectChange=function(r){s.onChange(parseInt(r.target.value))},s.renderSelectMode=function(){return qt.createElement("select",{value:y_(Nu(s.props.date)),className:"react-datepicker__month-year-select",onChange:s.onSelectChange},s.renderSelectOptions())},s.renderReadView=function(r){var n=Oa(s.props.date,s.props.dateFormat,s.props.locale);return qt.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:s.toggleDropdown},qt.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),qt.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},n))},s.renderDropdown=function(){return qt.createElement(qae,wr({key:"dropdown"},s.props,{onChange:s.onChange,onCancel:s.toggleDropdown}))},s.renderScrollMode=function(){var r=s.state.dropdownVisible,n=[s.renderReadView(!r)];return r&&n.unshift(s.renderDropdown()),n},s.onChange=function(r){s.toggleDropdown();var n=$r(r);ud(s.props.date,n)&&no(s.props.date,n)||s.props.onChange(n)},s.toggleDropdown=function(){return s.setState({dropdownVisible:!s.state.dropdownVisible})},s}return e.prototype.render=function(){var s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode();break;case"select":s=this.renderSelectMode();break}return qt.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},s)},e})(C.Component),Wae=(function(a){Pi(e,a);function e(){var s=a!==null&&a.apply(this,arguments)||this;return s.state={height:null},s.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,n,i;s.list&&(s.list.scrollTop=(i=s.centerLi&&e.calcCenterPosition(s.props.monthRef?s.props.monthRef.clientHeight-((n=(r=s.header)===null||r===void 0?void 0:r.clientHeight)!==null&&n!==void 0?n:0):s.list.clientHeight,s.centerLi))!==null&&i!==void 0?i:0)})},s.handleClick=function(r){var n,i;(s.props.minTime||s.props.maxTime)&&TF(r,s.props)||(s.props.excludeTimes||s.props.includeTimes||s.props.filterTime)&&DF(r,s.props)||(i=(n=s.props).onChange)===null||i===void 0||i.call(n,r)},s.isSelectedTime=function(r){return s.props.selected&&$L(s.props.selected,r)},s.isDisabledTime=function(r){return(s.props.minTime||s.props.maxTime)&&TF(r,s.props)||(s.props.excludeTimes||s.props.includeTimes||s.props.filterTime)&&DF(r,s.props)},s.liClasses=function(r){var n,i=["react-datepicker__time-list-item",s.props.timeClassName?s.props.timeClassName(r):void 0];return s.isSelectedTime(r)&&i.push("react-datepicker__time-list-item--selected"),s.isDisabledTime(r)&&i.push("react-datepicker__time-list-item--disabled"),s.props.injectTimes&&(wc(r)*3600+Nc(r)*60+Oh(r))%(((n=s.props.intervals)!==null&&n!==void 0?n:e.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},s.handleOnKeyDown=function(r,n){var i,o;r.key===vs.Space&&(r.preventDefault(),r.key=vs.Enter),(r.key===vs.ArrowUp||r.key===vs.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===vs.ArrowDown||r.key===vs.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===vs.Enter&&s.handleClick(n),(o=(i=s.props).handleOnKeyDown)===null||o===void 0||o.call(i,r)},s.renderTimes=function(){for(var r,n=[],i=typeof s.props.format=="string"?s.props.format:"p",o=(r=s.props.intervals)!==null&&r!==void 0?r:e.defaultProps.intervals,l=s.props.selected||s.props.openToDate||$r(),c=fx(l),u=s.props.injectTimes&&s.props.injectTimes.sort(function(y,w){return y.getTime()-w.getTime()}),m=60*Lae(l),A=m/o,g=0;g<A;g++){var p=e0(c,g*o);if(n.push(p),u){var v=Iae(c,p,g,o,u);n=n.concat(v)}}var b=n.reduce(function(y,w){return w.getTime()<=l.getTime()?w:y},n[0]);return n.map(function(y){return qt.createElement("li",{key:y.valueOf(),onClick:s.handleClick.bind(s,y),className:s.liClasses(y),ref:function(w){y===b&&(s.centerLi=w)},onKeyDown:function(w){s.handleOnKeyDown(w,y)},tabIndex:y===b?0:-1,role:"option","aria-selected":s.isSelectedTime(y)?"true":void 0,"aria-disabled":s.isDisabledTime(y)?"true":void 0},Oa(y,i,s.props.locale))})},s.renderTimeCaption=function(){return s.props.showTimeCaption===!1?qt.createElement(qt.Fragment,null):qt.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(s.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){s.header=r}},qt.createElement("div",{className:"react-datepicker-time__header"},s.props.timeCaption))},s}return Object.defineProperty(e,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},e.prototype.componentWillUnmount=function(){var s;(s=this.resizeObserver)===null||s===void 0||s.disconnect()},e.prototype.observeDatePickerHeightChanges=function(){var s=this,r=this.props.monthRef;this.updateContainerHeight(),r&&(this.resizeObserver=new ResizeObserver(function(){s.updateContainerHeight()}),this.resizeObserver.observe(r))},e.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},e.prototype.render=function(){var s=this,r,n=this.state.height;return qt.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:e.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),qt.createElement("div",{className:"react-datepicker__time"},qt.createElement("div",{className:"react-datepicker__time-box"},qt.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){s.list=i},style:n?{height:n}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},e.calcCenterPosition=function(s,r){return r.offsetTop-(s/2-r.clientHeight/2)},e})(C.Component),VF=3,Yae=(function(a){Pi(e,a);function e(s){var r=a.call(this,s)||this;return r.YEAR_REFS=xd([],Array(r.props.yearItemNumber),!0).map(function(){return C.createRef()}),r.isDisabled=function(n){return Ll(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(n){return xC(n,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var n;return(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection},r.updateFocusOnPaginate=function(n){var i=function(){var o,l;(l=(o=r.YEAR_REFS[n])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus()};window.requestAnimationFrame(i)},r.handleYearClick=function(n,i){r.props.onDayClick&&r.props.onDayClick(n,i)},r.handleYearNavigation=function(n,i){var o,l,c,u,m=r.props,A=m.date,g=m.yearItemNumber;if(!(A===void 0||g===void 0)){var p=xu(A,g).startPeriod;r.isDisabled(i)||r.isExcluded(i)||((l=(o=r.props).setPreSelection)===null||l===void 0||l.call(o,i),n-p<0?r.updateFocusOnPaginate(g-(p-n)):n-p>=g?r.updateFocusOnPaginate(Math.abs(g-(n-p))):(u=(c=r.YEAR_REFS[n-p])===null||c===void 0?void 0:c.current)===null||u===void 0||u.focus())}},r.isSameDay=function(n,i){return Br(n,i)},r.isCurrentYear=function(n){return n===Nr($r())},r.isRangeStart=function(n){return r.props.startDate&&r.props.endDate&&ud(dd($r(),n),r.props.startDate)},r.isRangeEnd=function(n){return r.props.startDate&&r.props.endDate&&ud(dd($r(),n),r.props.endDate)},r.isInRange=function(n){return cy(n,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(n){var i=r.props,o=i.selectsStart,l=i.selectsEnd,c=i.selectsRange,u=i.startDate,m=i.endDate;return!(o||l||c)||!r.selectingDate()?!1:o&&m?cy(n,r.selectingDate(),m):l&&u||c&&u&&!m?cy(n,u,r.selectingDate()):!1},r.isSelectingRangeStart=function(n){var i;if(!r.isInSelectingRange(n))return!1;var o=r.props,l=o.startDate,c=o.selectsStart,u=dd($r(),n);return c?ud(u,(i=r.selectingDate())!==null&&i!==void 0?i:null):ud(u,l??null)},r.isSelectingRangeEnd=function(n){var i;if(!r.isInSelectingRange(n))return!1;var o=r.props,l=o.endDate,c=o.selectsEnd,u=o.selectsRange,m=dd($r(),n);return c||u?ud(m,(i=r.selectingDate())!==null&&i!==void 0?i:null):ud(m,l??null)},r.isKeyboardSelected=function(n){if(!(r.props.disabledKeyboardNavigation||r.props.date===void 0||r.props.preSelection==null)){var i=r.props,o=i.minDate,l=i.maxDate,c=i.excludeDates,u=i.includeDates,m=i.filterDate,A=i.selected,g=px(dd(r.props.date,n)),p=(o||l||c||u||m)&&sv(n,r.props),v=!!A&&Br(g,px(A)),b=Br(g,px(r.props.preSelection));return!r.props.inline&&!v&&b&&!p}},r.isSelectedYear=function(n){var i=r.props,o=i.selectsMultiple,l=i.selected,c=i.selectedDates;return o?c?.some(function(u){return n===Nr(u)}):!!l&&n===Nr(l)},r.onYearClick=function(n,i){var o=r.props.date;o!==void 0&&r.handleYearClick(px(dd(o,i)),n)},r.onYearKeyDown=function(n,i){var o,l,c=n.key,u=r.props,m=u.date,A=u.yearItemNumber,g=u.handleOnKeyDown;if(c!==vs.Tab&&n.preventDefault(),!r.props.disabledKeyboardNavigation)switch(c){case vs.Enter:if(r.props.selected==null)break;r.onYearClick(n,i),(l=(o=r.props).setPreSelection)===null||l===void 0||l.call(o,r.props.selected);break;case vs.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(i+1,vu(r.props.preSelection,1));break;case vs.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(i-1,wp(r.props.preSelection,1));break;case vs.ArrowUp:{if(m===void 0||A===void 0||r.props.preSelection==null)break;var p=xu(m,A).startPeriod,v=VF,b=i-v;if(b<p){var y=A%v;i>=p&&i<p+y?v=y:v+=y,b=i-v}r.handleYearNavigation(b,wp(r.props.preSelection,v));break}case vs.ArrowDown:{if(m===void 0||A===void 0||r.props.preSelection==null)break;var w=xu(m,A).endPeriod,v=VF,b=i+v;if(b>w){var y=A%v;i<=w&&i>w-y?v=y:v+=y,b=i+v}r.handleYearNavigation(b,vu(r.props.preSelection,v));break}}g&&g(n)},r.getYearClassNames=function(n){var i=r.props,o=i.date,l=i.disabled,c=i.minDate,u=i.maxDate,m=i.excludeDates,A=i.includeDates,g=i.filterDate,p=i.yearClassName;return Fi("react-datepicker__year-text","react-datepicker__year-".concat(n),o?p?.(dd(o,n)):void 0,{"react-datepicker__year-text--selected":r.isSelectedYear(n),"react-datepicker__year-text--disabled":(c||u||m||A||g||l)&&sv(n,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(n),"react-datepicker__year-text--range-start":r.isRangeStart(n),"react-datepicker__year-text--range-end":r.isRangeEnd(n),"react-datepicker__year-text--in-range":r.isInRange(n),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(n),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(n),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(n),"react-datepicker__year-text--today":r.isCurrentYear(n)})},r.getYearTabIndex=function(n){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var i=Nr(r.props.preSelection),o=sv(n,r.props);return n===i&&!o?"0":"-1"},r.getYearContent=function(n){return r.props.renderYearContent?r.props.renderYearContent(n):n},r}return e.prototype.render=function(){var s=this,r=[],n=this.props,i=n.date,o=n.yearItemNumber,l=n.onYearMouseEnter,c=n.onYearMouseLeave;if(i===void 0)return null;for(var u=xu(i,o),m=u.startPeriod,A=u.endPeriod,g=function(b){r.push(qt.createElement("div",{ref:p.YEAR_REFS[b-m],onClick:function(y){s.onYearClick(y,b)},onKeyDown:function(y){qL(y)&&(y.preventDefault(),y.key=vs.Enter),s.onYearKeyDown(y,b)},tabIndex:Number(p.getYearTabIndex(b)),className:p.getYearClassNames(b),onMouseEnter:p.props.usePointerEvent?void 0:function(y){return l(y,b)},onPointerEnter:p.props.usePointerEvent?function(y){return l(y,b)}:void 0,onMouseLeave:p.props.usePointerEvent?void 0:function(y){return c(y,b)},onPointerLeave:p.props.usePointerEvent?function(y){return c(y,b)}:void 0,key:b,"aria-current":p.isCurrentYear(b)?"date":void 0},p.getYearContent(b)))},p=this,v=m;v<=A;v++)g(v);return qt.createElement("div",{className:"react-datepicker__year"},qt.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},e})(C.Component);function Kae(a,e,s,r){for(var n=[],i=0;i<2*e+1;i++){var o=a+e-i,l=!0;s&&(l=Nr(s)<=o),r&&l&&(l=Nr(r)>=o),l&&n.push(o)}return n}var Xae=(function(a){Pi(e,a);function e(s){var r=a.call(this,s)||this;r.yearOptionButtonsRef={},r.handleOptionKeyDown=function(l,c){var u;switch(c.key){case"Enter":c.preventDefault(),r.onChange(l);break;case"Escape":c.preventDefault(),r.props.onCancel();break;case"ArrowUp":case"ArrowDown":{c.preventDefault();var m=l+(c.key==="ArrowUp"?1:-1);r.yearOptionButtonsRef[m]&&((u=r.yearOptionButtonsRef[m])===null||u===void 0||u.focus());break}}},r.renderOptions=function(){r.yearOptionButtonsRef={};var l=r.props.year,c=r.state.yearsList.map(function(A){return qt.createElement("div",{ref:function(g){r.yearOptionButtonsRef[A]=g,A===l&&g?.focus()},role:"button",tabIndex:0,className:l===A?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:A,onClick:r.onChange.bind(r,A),onKeyDown:r.handleOptionKeyDown.bind(r,A),"aria-selected":l===A?"true":void 0},l===A?qt.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",A)}),u=r.props.minDate?Nr(r.props.minDate):null,m=r.props.maxDate?Nr(r.props.maxDate):null;return(!m||!r.state.yearsList.find(function(A){return A===m}))&&c.unshift(qt.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},qt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!u||!r.state.yearsList.find(function(A){return A===u}))&&c.push(qt.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},qt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),c},r.onChange=function(l){r.props.onChange(l)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(l){var c=r.state.yearsList.map(function(u){return u+l});r.setState({yearsList:c})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var n=s.yearDropdownItemNumber,i=s.scrollableYearDropdown,o=n||(i?10:5);return r.state={yearsList:Kae(r.props.year,o,r.props.minDate,r.props.maxDate)},r.dropdownRef=C.createRef(),r}return e.prototype.componentDidMount=function(){var s=this.dropdownRef.current;if(s){var r=s.children?Array.from(s.children):null,n=r?r.find(function(i){return i.ariaSelected}):null;s.scrollTop=n&&n instanceof HTMLElement?n.offsetTop+(n.clientHeight-s.clientHeight)/2:(s.scrollHeight-s.clientHeight)/2}},e.prototype.render=function(){var s=Fi({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return qt.createElement(e1,{className:s,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(C.Component),Jae=(function(a){Pi(e,a);function e(){var s=a!==null&&a.apply(this,arguments)||this;return s.state={dropdownVisible:!1},s.renderSelectOptions=function(){for(var r=s.props.minDate?Nr(s.props.minDate):1900,n=s.props.maxDate?Nr(s.props.maxDate):2100,i=[],o=r;o<=n;o++)i.push(qt.createElement("option",{key:o,value:o},o));return i},s.onSelectChange=function(r){s.onChange(parseInt(r.target.value))},s.renderSelectMode=function(){return qt.createElement("select",{value:s.props.year,className:"react-datepicker__year-select",onChange:s.onSelectChange},s.renderSelectOptions())},s.renderReadView=function(r){return qt.createElement("button",{key:"read",type:"button",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:s.toggleDropdown},qt.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),qt.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},s.props.year))},s.renderDropdown=function(){return qt.createElement(Xae,wr({key:"dropdown"},s.props,{onChange:s.onChange,onCancel:s.toggleDropdown}))},s.renderScrollMode=function(){var r=s.state.dropdownVisible,n=[s.renderReadView(!r)];return r&&n.unshift(s.renderDropdown()),n},s.onChange=function(r){s.toggleDropdown(),r!==s.props.year&&s.props.onChange(r)},s.toggleDropdown=function(r){s.setState({dropdownVisible:!s.state.dropdownVisible},function(){s.props.adjustDateOnChange&&s.handleYearChange(s.props.date,r)})},s.handleYearChange=function(r,n){var i;(i=s.onSelect)===null||i===void 0||i.call(s,r,n),s.setOpen()},s.onSelect=function(r,n){var i,o;(o=(i=s.props).onSelect)===null||o===void 0||o.call(i,r,n)},s.setOpen=function(){var r,n;(n=(r=s.props).setOpen)===null||n===void 0||n.call(r,!0)},s}return e.prototype.render=function(){var s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode();break;case"select":s=this.renderSelectMode();break}return qt.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},s)},e})(C.Component),Zae=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],GL="react-datepicker-ignore-onclickoutside",ene=function(a){var e=(a.className||"").split(/\s+/);return Zae.some(function(s){return e.indexOf(s)>=0})},tne=(function(a){Pi(e,a);function e(s){var r=a.call(this,s)||this;return r.monthContainer=void 0,r.handleClickOutside=function(n){r.props.onClickOutside(n)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(n){var i,o;ene(n.target)&&((o=(i=r.props).onDropdownFocus)===null||o===void 0||o.call(i,n))},r.getDateInView=function(){var n=r.props,i=n.preSelection,o=n.selected,l=n.openToDate,c=VL(r.props),u=zL(r.props),m=$r(),A=l||o||i;return A||(c&&gd(m,c)?c:u&&Wh(m,u)?u:m)},r.increaseMonth=function(){r.setState(function(n){var i=n.date;return{date:Bc(i,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(n){var i=n.date;return{date:Jm(i,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(n,i,o){r.props.onSelect(n,i,o),r.props.setPreSelection&&r.props.setPreSelection(n)},r.handleDayMouseEnter=function(n){r.setState({selectingDate:n}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(n)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(n,i){r.setState({selectingDate:dd($r(),i)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(n,i)},r.handleYearMouseLeave=function(n,i){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(n,i)},r.handleYearChange=function(n){var i,o,l,c;(o=(i=r.props).onYearChange)===null||o===void 0||o.call(i,n),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(n),(c=(l=r.props).setOpen)===null||c===void 0||c.call(l,!0)),r.props.setPreSelection&&r.props.setPreSelection(n)},r.getEnabledPreSelectionDateForMonth=function(n){if(!Ll(n,r.props))return n;for(var i=Nu(n),o=Nae(n),l=Pee(o,i),c=null,u=0;u<=l;u++){var m=jc(i,u);if(!Ll(m,r.props)){c=m;break}}return c},r.handleMonthChange=function(n){var i,o,l,c=(i=r.getEnabledPreSelectionDateForMonth(n))!==null&&i!==void 0?i:n;r.handleCustomMonthChange(c),r.props.adjustDateOnChange&&(r.props.onSelect(c),(l=(o=r.props).setOpen)===null||l===void 0||l.call(o,!0)),r.props.setPreSelection&&r.props.setPreSelection(c)},r.handleCustomMonthChange=function(n){var i,o;(o=(i=r.props).onMonthChange)===null||o===void 0||o.call(i,n),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(n){r.handleYearChange(n),r.handleMonthChange(n)},r.changeYear=function(n){r.setState(function(i){var o=i.date;return{date:dd(o,Number(n))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(n){r.setState(function(i){var o=i.date;return{date:rl(o,Number(n))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(n){r.setState(function(i){var o=i.date;return{date:dd(rl(o,Mo(n)),Nr(n))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(n){if(n===void 0&&(n=r.state.date),!il(n))return[];var i=r.props.disabled,o=Uh(n,r.props.locale,r.props.calendarStartDay),l=[];return r.props.showWeekNumbers&&l.push(qt.createElement("div",{key:"W",className:"react-datepicker__day-name ".concat(i?"react-datepicker__day-name--disabled":""),role:"columnheader"},qt.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),qt.createElement("span",{"aria-hidden":"true"},r.props.weekLabel||"#"))),l.concat([0,1,2,3,4,5,6].map(function(c){var u=jc(o,c),m=r.formatWeekday(u,r.props.locale),A=r.props.weekDayClassName?r.props.weekDayClassName(u):void 0;return qt.createElement("div",{key:c,role:"columnheader",className:Fi("react-datepicker__day-name",A,i?"react-datepicker__day-name--disabled":"")},qt.createElement("span",{className:"react-datepicker__sr-only"},Oa(u,"EEEE",r.props.locale)),qt.createElement("span",{"aria-hidden":"true"},m))}))},r.formatWeekday=function(n,i){return r.props.formatWeekDay?jae(n,r.props.formatWeekDay,i):r.props.useWeekdaysShort?Cae(n,i):_ae(n,i)},r.decreaseYear=function(){r.setState(function(n){var i,o=n.date;return{date:wp(o,r.props.showYearPicker?(i=r.props.yearItemNumber)!==null&&i!==void 0?i:e.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var n,i,o;if(!r.props.renderCustomHeader){var l=(n=r.props.monthsShown)!==null&&n!==void 0?n:e.defaultProps.monthsShown,c=r.props.showPreviousMonths?l-1:0,u=(i=r.props.monthSelectedIn)!==null&&i!==void 0?i:c,m=Jm(r.state.date,u),A;switch(!0){case r.props.disabled:A=!0;break;case r.props.showMonthYearPicker:A=LF(r.state.date,r.props);break;case r.props.showYearPicker:A=Fae(r.state.date,r.props);break;case r.props.showQuarterYearPicker:A=Sae(r.state.date,r.props);break;default:A=PF(m,r.props);break}if(!(!((o=r.props.forceShowMonthNavigation)!==null&&o!==void 0?o:e.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&A||r.props.showTimeSelectOnly)){var g=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],p=["react-datepicker__navigation","react-datepicker__navigation--previous"],v=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(v=r.decreaseYear),A&&r.props.showDisabledMonthNavigation&&(p.push("react-datepicker__navigation--previous--disabled"),v=void 0);var b=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,y=r.props,w=y.previousMonthButtonLabel,B=w===void 0?e.defaultProps.previousMonthButtonLabel:w,j=y.previousYearButtonLabel,E=j===void 0?e.defaultProps.previousYearButtonLabel:j,S=r.props,T=S.previousMonthAriaLabel,M=T===void 0?typeof B=="string"?B:"Previous Month":T,D=S.previousYearAriaLabel,P=D===void 0?typeof E=="string"?E:"Previous Year":D;return qt.createElement("button",{type:"button",className:p.join(" "),onClick:v,onKeyDown:r.props.handleOnKeyDown,"aria-label":b?P:M},qt.createElement("span",{className:g.join(" ")},b?E:B))}}},r.increaseYear=function(){r.setState(function(n){var i,o=n.date;return{date:vu(o,r.props.showYearPicker?(i=r.props.yearItemNumber)!==null&&i!==void 0?i:e.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var n;if(!r.props.renderCustomHeader){var i;switch(!0){case r.props.disabled:i=!0;break;case r.props.showMonthYearPicker:i=MF(r.state.date,r.props);break;case r.props.showYearPicker:i=Dae(r.state.date,r.props);break;case r.props.showQuarterYearPicker:i=Eae(r.state.date,r.props);break;default:i=IF(r.state.date,r.props);break}if(!(!((n=r.props.forceShowMonthNavigation)!==null&&n!==void 0?n:e.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&i||r.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],l=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var c=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(c=r.increaseYear),i&&r.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),c=void 0);var u=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,m=r.props,A=m.nextMonthButtonLabel,g=A===void 0?e.defaultProps.nextMonthButtonLabel:A,p=m.nextYearButtonLabel,v=p===void 0?e.defaultProps.nextYearButtonLabel:p,b=r.props,y=b.nextMonthAriaLabel,w=y===void 0?typeof g=="string"?g:"Next Month":y,B=b.nextYearAriaLabel,j=B===void 0?typeof v=="string"?v:"Next Year":B;return qt.createElement("button",{type:"button",className:o.join(" "),onClick:c,onKeyDown:r.props.handleOnKeyDown,"aria-label":u?j:w},qt.createElement("span",{className:l.join(" ")},u?v:g))}}},r.renderCurrentMonth=function(n){n===void 0&&(n=r.state.date);var i=["react-datepicker__current-month"];return r.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),qt.createElement("h2",{className:i.join(" ")},il(n)?Oa(n,r.props.dateFormat,r.props.locale):"")},r.renderYearDropdown=function(n){if(n===void 0&&(n=!1),!(!r.props.showYearDropdown||n))return qt.createElement(Jae,wr({},e.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:Nr(r.state.date)}))},r.renderMonthDropdown=function(n){if(n===void 0&&(n=!1),!(!r.props.showMonthDropdown||n))return qt.createElement(zae,wr({},e.defaultProps,r.props,{month:Mo(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(n){if(n===void 0&&(n=!1),!(!r.props.showMonthYearDropdown||n))return qt.createElement(Gae,wr({},e.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(n){r.props.onSelect(SF(),n),r.props.setPreSelection&&r.props.setPreSelection(SF())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return qt.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDayNamesHeader=function(n){return qt.createElement("div",{className:"react-datepicker__day-names",role:"row"},r.header(n))},r.renderDefaultHeader=function(n){var i=n.monthDate,o=n.i;return qt.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(i),qt.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(o!==0),r.renderMonthYearDropdown(o!==0),r.renderYearDropdown(o!==0)))},r.renderCustomHeader=function(n){var i,o,l=n.monthDate,c=n.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var u=r.props,m=u.showYearPicker,A=u.yearItemNumber,g;if(m){var p=xu(l,A),v=p.startPeriod,b=p.endPeriod;g={startYear:v,endYear:b}}var y=PF(r.state.date,r.props),w=IF(r.state.date,r.props),B=LF(r.state.date,r.props),j=MF(r.state.date,r.props);return qt.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(o=(i=r.props).renderCustomHeader)===null||o===void 0?void 0:o.call(i,wr(wr(wr({},r.state),m&&{visibleYearsRange:g}),{customHeaderCount:c,monthDate:l,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:y,nextMonthButtonDisabled:w,prevYearButtonDisabled:B,nextYearButtonDisabled:j})))},r.renderYearHeader=function(n){var i=n.monthDate,o=r.props,l=o.showYearPicker,c=o.yearItemNumber,u=c===void 0?e.defaultProps.yearItemNumber:c,m=xu(i,u),A=m.startPeriod,g=m.endPeriod;return qt.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(A," - ").concat(g):Nr(i))},r.renderHeader=function(n){var i=n.monthDate,o=n.i,l=o===void 0?0:o,c={monthDate:i,i:l};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(c);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(c);default:return r.renderDefaultHeader(c)}},r.renderMonths=function(){var n,i;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var o=[],l=(n=r.props.monthsShown)!==null&&n!==void 0?n:e.defaultProps.monthsShown,c=r.props.showPreviousMonths?l-1:0,u=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?vu(r.state.date,c):Jm(r.state.date,c),m=(i=r.props.monthSelectedIn)!==null&&i!==void 0?i:c,A=0;A<l;++A){var g=A-m+c,p=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?vu(u,g):Bc(u,g),v="month-".concat(A),b=A<l-1,y=A>0;o.push(qt.createElement("div",{key:v,ref:function(w){r.monthContainer=w??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:p,i:A}),qt.createElement(Hae,wr({},e.defaultProps,r.props,{containerRef:r.containerRef,ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:p,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:A,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:b,monthShowsDuplicateDaysStart:y,dayNamesHeader:r.renderDayNamesHeader(p)}))))}return o}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return qt.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),qt.createElement(Yae,wr({},e.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return qt.createElement(Wae,wr({},e.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var n=r.props.selected?new Date(r.props.selected):void 0,i=n&&il(n)&&!!r.props.selected,o=i?"".concat(OF(n.getHours()),":").concat(OF(n.getMinutes())):"";if(r.props.showTimeInput)return qt.createElement(Mae,wr({},e.defaultProps,r.props,{date:n,timeString:o,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var n;if(!il(r.state.date))return qt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"});var i=xu(r.state.date,(n=r.props.yearItemNumber)!==null&&n!==void 0?n:e.defaultProps.yearItemNumber),o=i.startPeriod,l=i.endPeriod,c;return r.props.showYearPicker?c="".concat(o," - ").concat(l):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?c=Nr(r.state.date):c="".concat(gC(Mo(r.state.date),r.props.locale)," ").concat(Nr(r.state.date)),qt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&c)},r.renderChildren=function(){if(r.props.children)return qt.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=C.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(e,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:GL,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:C0}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){var s=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){s.setState({monthContainer:s.monthContainer})})())},e.prototype.componentDidUpdate=function(s){var r=this;if(this.props.preSelection&&il(this.props.preSelection)&&(!Br(this.props.preSelection,s.preSelection)||this.props.monthSelectedIn!==s.monthSelectedIn)){var n=!no(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return n&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!Br(this.props.openToDate,s.openToDate)&&this.setState({date:this.props.openToDate})},e.prototype.render=function(){var s=this.props.container||pae;return qt.createElement(e1,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},qt.createElement("div",{style:{display:"contents"},ref:this.containerRef},qt.createElement(s,{className:Fi("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly,inline:this.props.inline},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},e})(C.Component),sne=function(a){var e=a.icon,s=a.className,r=s===void 0?"":s,n=a.onClick,i="react-datepicker__calendar-icon";if(typeof e=="string")return qt.createElement("i",{className:"".concat(i," ").concat(e," ").concat(r),"aria-hidden":"true",onClick:n});if(qt.isValidElement(e)){var o=e;return qt.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(i," ").concat(r),onClick:function(l){typeof o.props.onClick=="function"&&o.props.onClick(l),typeof n=="function"&&n(l)}})}return qt.createElement("svg",{className:"".concat(i," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:n},qt.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},WL=(function(a){Pi(e,a);function e(s){var r=a.call(this,s)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return e.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},e.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},e.prototype.render=function(){return Y7.createPortal(this.props.children,this.el)},e})(C.Component),rne="[tabindex], a, button, input, select, textarea",ane=function(a){return(a instanceof HTMLAnchorElement||!a.disabled)&&a.tabIndex!==-1},YL=(function(a){Pi(e,a);function e(s){var r=a.call(this,s)||this;return r.getTabChildren=function(){var n;return Array.prototype.slice.call((n=r.tabLoopRef.current)===null||n===void 0?void 0:n.querySelectorAll(rne),1,-1).filter(ane)},r.handleFocusStart=function(){var n=r.getTabChildren();n&&n.length>1&&n[n.length-1].focus()},r.handleFocusEnd=function(){var n=r.getTabChildren();n&&n.length>1&&n[0].focus()},r.tabLoopRef=C.createRef(),r}return e.prototype.render=function(){var s;return((s=this.props.enableTabLoop)!==null&&s!==void 0?s:e.defaultProps.enableTabLoop)?qt.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},qt.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,qt.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},e.defaultProps={enableTabLoop:!0},e})(C.Component);function nne(a){function e(s){var r,n=typeof s.hidePopper=="boolean"?s.hidePopper:!0,i=C.useRef(null),o=fae(wr({open:!n,whileElementsMounted:Gre,placement:s.popperPlacement,middleware:xd([sae({padding:15}),tae(10),rae({element:i})],(r=s.popperModifiers)!==null&&r!==void 0?r:[],!0)},s.popperProps)),l=wr(wr({},s),{hidePopper:n,popperProps:wr(wr({},o),{arrowRef:i})});return qt.createElement(a,wr({},l))}return e.displayName="withFloating(".concat(a.displayName||a.name||"Component",")"),e}var ine=function(a){var e=a.className,s=a.wrapperClassName,r=a.hidePopper,n=r===void 0?!0:r,i=a.popperComponent,o=a.targetComponent,l=a.enableTabLoop,c=a.popperOnKeyDown,u=a.portalId,m=a.portalHost,A=a.popperProps,g=a.showArrow,p=void 0;if(!n){var v=Fi("react-datepicker-popper",e);p=qt.createElement(YL,{enableTabLoop:l},qt.createElement("div",{ref:A.refs.setFloating,style:A.floatingStyles,className:v,"data-placement":A.placement,onKeyDown:c},i,g&&qt.createElement(lae,{ref:A.arrowRef,context:A.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}a.popperContainer&&(p=C.createElement(a.popperContainer,{},p)),u&&!n&&(p=qt.createElement(WL,{portalId:u,portalHost:m},p));var b=Fi("react-datepicker-wrapper",s);return qt.createElement(qt.Fragment,null,qt.createElement("div",{ref:A.refs.setReference,className:b},o),p)},one=nne(ine);function lne(a,e){return a&&e?Mo(a)!==Mo(e)||Nr(a)!==Nr(e):a!==e}var ej="Date input not valid.",B0=(function(a){Pi(e,a);function e(s){var r=a.call(this,s)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:$r()},r.modifyHolidays=function(){var n;return(n=r.props.holidays)===null||n===void 0?void 0:n.reduce(function(i,o){var l=new Date(o.date);return il(l)?xd(xd([],i,!0),[wr(wr({},o),{date:l})],!1):i},[])},r.calcInitialState=function(){var n,i=r.getPreSelection(),o=VL(r.props),l=zL(r.props),c=o&&gd(i,fx(o))?o:l&&Wh(i,EF(l))?l:i;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(n=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&n!==void 0?n:c,highlightDates:RF(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.getInputValue=function(){var n,i=r.props,o=i.locale,l=i.startDate,c=i.endDate,u=i.rangeSeparator,m=i.selected,A=i.selectedDates,g=i.selectsMultiple,p=i.selectsRange,v=i.value,b=(n=r.props.dateFormat)!==null&&n!==void 0?n:e.defaultProps.dateFormat,y=r.state.inputValue;return typeof v=="string"?v:typeof y=="string"?y:p?xae(l,c,{dateFormat:b,locale:o,rangeSeparator:u}):g?bae(A??[],{dateFormat:b,locale:o}):sl(m,{dateFormat:b,locale:o})},r.resetHiddenStatus=function(){r.setState(wr(wr({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(wr(wr({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){var n,i;(i=(n=r.input)===null||n===void 0?void 0:n.focus)===null||i===void 0||i.call(n,{preventScroll:!0})},r.setBlur=function(){var n,i;(i=(n=r.input)===null||n===void 0?void 0:n.blur)===null||i===void 0||i.call(n),r.cancelFocusInput()},r.deferBlur=function(){requestAnimationFrame(function(){r.setBlur()})},r.setOpen=function(n,i){i===void 0&&(i=!1),r.setState({open:n,preSelection:n&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:tj},function(){n||r.setState(function(o){return{focused:i?o.focused:!1}},function(){!i&&r.deferBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return wu(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(n){var i,o,l=r.state.wasHidden,c=l?r.state.open:!0;l&&r.resetHiddenStatus(),r.state.preventFocus||((o=(i=r.props).onFocus)===null||o===void 0||o.call(i,n),c&&!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.resetInputValue=function(){r.setState(wr(wr({},r.state),{inputValue:null}))},r.handleBlur=function(n){var i,o;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((o=(i=r.props).onBlur)===null||o===void 0||o.call(i,n)),r.resetInputValue(),r.state.open&&r.props.open===!1&&r.setOpen(!1),r.setState({focused:!1})},r.handleCalendarClickOutside=function(n){var i,o;r.props.inline||r.setOpen(!1),(o=(i=r.props).onClickOutside)===null||o===void 0||o.call(i,n),r.props.withPortal&&n.preventDefault()},r.handleChange=function(){for(var n,i,o,l,c,u=[],m=0;m<arguments.length;m++)u[m]=arguments[m];var A=u[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,u),!A||typeof A.isDefaultPrevented!="function"||A.isDefaultPrevented()))){r.setState({inputValue:A?.target instanceof HTMLInputElement?A.target.value:null,lastPreSelectChange:cne});var g=r.props,p=g.selectsRange,v=g.startDate,b=g.endDate,y=(n=r.props.dateFormat)!==null&&n!==void 0?n:e.defaultProps.dateFormat,w=(i=r.props.strictParsing)!==null&&i!==void 0?i:e.defaultProps.strictParsing,B=A?.target instanceof HTMLInputElement?A.target.value:"";if(p){var j=r.props.rangeSeparator,E=j.trim(),S=B.split(y.includes(E)?j:E,2).map(function(ae){return ae.trim()}),T=S[0],M=S[1],D=jf(T??"",y,r.props.locale,w),P=D?jf(M??"",y,r.props.locale,w):null,Y=v?.getTime()!==D?.getTime(),Q=b?.getTime()!==P?.getTime();if(!Y&&!Q||D&&Ll(D,r.props)||P&&Ll(P,r.props))return;(l=(o=r.props).onChange)===null||l===void 0||l.call(o,[D,P],A)}else{var L=jf(B,y,r.props.locale,w,(c=r.props.selected)!==null&&c!==void 0?c:void 0);(L||!B)&&r.setSelected(L,A,!0)}}},r.handleSelect=function(n,i,o){var l;if(!r.props.readOnly){var c=r.props,u=c.selectsRange,m=c.startDate,A=c.endDate,g=c.locale,p=c.swapRange,v=(l=r.props.dateFormat)!==null&&l!==void 0?l:e.defaultProps.dateFormat,b=!u||m&&!A&&(p||!JN(n,m));if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&b&&r.sendFocusBackToInput(),r.props.onChangeRaw){var y=sl(n,{dateFormat:v,locale:g});r.props.onChangeRaw(i,{date:n,formattedDate:y})}r.setSelected(n,i,!1,o),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect?r.setPreSelection(n):b&&r.setOpen(!1)}},r.setSelected=function(n,i,o,l){var c,u,m=n;if(r.props.showYearPicker){if(m!==null&&sv(Nr(m),r.props))return}else if(r.props.showMonthYearPicker){if(m!==null&&HL(m,r.props))return}else if(m!==null&&Ll(m,r.props))return;var A=r.props,g=A.onChange,p=A.selectsRange,v=A.startDate,b=A.endDate,y=A.selectsMultiple,w=A.selectedDates,B=A.minTime,j=A.swapRange;if(!zm(r.props.selected,m)||r.props.allowSameDay||p||y)if(m!==null&&(r.props.selected&&(!o||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(m=iy(m,{hour:wc(r.props.selected),minute:Nc(r.props.selected),second:Oh(r.props.selected)})),!o&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&B&&(m=iy(m,{hour:B.getHours(),minute:B.getMinutes(),second:B.getSeconds()})),r.props.inline||r.setState({preSelection:m}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:l})),p){var E=!v&&!b,S=v&&!b,T=!v&&!!b,M=v&&b;E?g?.([m,null],i):S?m===null?g?.([null,null],i):JN(m,v)?g?.(j?[m,v]:[m,null],i):g?.([v,m],i):T&&(m&&JN(m,b)?g?.([m,b],i):g?.([m,null],i)),M&&g?.([m,null],i)}else if(y){if(m!==null)if(!w?.length)g?.([m],i);else{var D=w.some(function(Y){return Br(Y,m)});if(D){var P=w.filter(function(Y){return!Br(Y,m)});g?.(P,i)}else g?.(xd(xd([],w,!0),[m],!1),i)}}else g?.(m,i);o||((u=(c=r.props).onSelect)===null||u===void 0||u.call(c,m,i),r.setState({inputValue:null}))},r.setPreSelection=function(n){if(!r.props.readOnly){var i=wu(r.props.minDate),o=wu(r.props.maxDate),l=!0;if(n){var c=fx(n);if(i&&o)l=Rm(n,r.props.minDate,r.props.maxDate);else if(i){var u=fx(r.props.minDate);l=Wh(n,u)||zm(c,u)}else if(o){var m=EF(r.props.maxDate);l=gd(n,m)||zm(c,m)}}l&&r.setState({preSelection:n})}},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(n){var i,o;if(!(r.props.selectsRange||r.props.selectsMultiple)){var l=r.props.selected?r.props.selected:r.getPreSelection(),c=r.props.selected?n:iy(l,{hour:wc(n),minute:Nc(n)});r.setState({preSelection:c}),(o=(i=r.props).onChange)===null||o===void 0||o.call(i,c),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var n,i;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(i=(n=r.props).onInputClick)===null||i===void 0||i.call(n)},r.handleTimeOnlyArrowKey=function(n){var i,o,l,c,u=r.props.selected||r.state.preSelection||$r(),m=(i=r.props.timeIntervals)!==null&&i!==void 0?i:30,A=(o=r.props.dateFormat)!==null&&o!==void 0?o:e.defaultProps.dateFormat,g=Array.isArray(A)?A[0]:A,p=fx(u),v=wc(u)*60+Nc(u),b=1440-m,y;if(n===vs.ArrowUp){var w=Math.max(0,v-m);y=e0(p,w)}else{var w=Math.min(b,v+m);y=e0(p,w)}var B=Oa(y,g||e.defaultProps.dateFormat,r.props.locale);if(r.setState({preSelection:y,inputValue:B}),!(r.props.selectsRange||r.props.selectsMultiple)){var j=r.props.selected?r.props.selected:r.getPreSelection(),E=r.props.selected?y:iy(j,{hour:wc(y),minute:Nc(y)});(c=(l=r.props).onChange)===null||c===void 0||c.call(l,E),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),requestAnimationFrame(function(){r.scrollToTimeOption(y)})}},r.handleTimeOnlyEnterKey=function(n){var i,o,l,c,u=n.target,m=u.value,A=(i=r.props.dateFormat)!==null&&i!==void 0?i:e.defaultProps.dateFormat,g=r.props.timeFormat||"p",p=r.state.preSelection||r.props.selected||$r(),v=jf(m,A,r.props.locale,(o=r.props.strictParsing)!==null&&o!==void 0?o:!1,p),b=p;if(v&&il(v))b=v;else{var y=((l=r.calendar)===null||l===void 0?void 0:l.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(".react-datepicker__time-list-item[tabindex='0']");if(y instanceof HTMLElement){var w=(c=y.textContent)===null||c===void 0?void 0:c.trim();if(w){var B=jf(w,g,r.props.locale,!1,p);B&&il(B)&&(b=B)}}}r.handleTimeChange(b),r.setOpen(!1),r.sendFocusBackToInput()},r.scrollToTimeOption=function(n){var i,o;if(!((i=r.calendar)===null||i===void 0)&&i.containerRef.current){for(var l=r.calendar.containerRef.current,c=Array.from(l.querySelectorAll(".react-datepicker__time-list-item")),u=null,m=1/0,A=r.props.timeFormat||"p",g=0,p=c;g<p.length;g++){var v=p[g],b=(o=v.textContent)===null||o===void 0?void 0:o.trim();if(b){var y=jf(b,A,r.props.locale,!1,n);if(y&&il(y)){if($L(y,n)){u=v;break}var w=Math.abs(y.getTime()-n.getTime());w<m&&(m=w,u=v)}}}u&&(c.forEach(function(B){B.setAttribute("tabindex","-1")}),u.setAttribute("tabindex","0"),u.scrollIntoView({behavior:"smooth",block:"center"}))}},r.onInputKeyDown=function(n){var i,o,l,c,u,m;(o=(i=r.props).onKeyDown)===null||o===void 0||o.call(i,n);var A=n.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(A===vs.ArrowDown||A===vs.ArrowUp||A===vs.Enter)&&((l=r.onInputClick)===null||l===void 0||l.call(r));return}if(r.state.open&&r.props.showTimeSelectOnly){if(A===vs.ArrowDown||A===vs.ArrowUp){n.preventDefault(),r.handleTimeOnlyArrowKey(A);return}if(A===vs.Enter){n.preventDefault(),r.handleTimeOnlyEnterKey(n);return}}if(r.state.open){if(A===vs.ArrowDown||A===vs.ArrowUp){n.preventDefault();var g=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=((c=r.calendar)===null||c===void 0?void 0:c.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(g);p instanceof HTMLElement&&p.focus({preventScroll:!0});return}var v=$r(r.state.preSelection);A===vs.Enter?(n.preventDefault(),n.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===tj?(r.handleSelect(v,n),!r.props.shouldCloseOnSelect&&r.setPreSelection(v)):r.setOpen(!1)):A===vs.Escape?(n.preventDefault(),n.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):A===vs.Tab&&r.setOpen(!1),r.inputOk()||(m=(u=r.props).onInputError)===null||m===void 0||m.call(u,{code:1,msg:ej})}},r.onPortalKeyDown=function(n){var i=n.key;i===vs.Escape&&(n.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(n){var i,o,l,c,u,m,A=r.props,g=A.minDate,p=A.maxDate,v=A.disabledKeyboardNavigation,b=A.showWeekPicker,y=A.shouldCloseOnSelect,w=A.locale,B=A.calendarStartDay,j=A.adjustDateOnChange,E=A.inline;if((o=(i=r.props).onKeyDown)===null||o===void 0||o.call(i,n),!v){var S=n.key,T=n.shiftKey,M=$r(r.state.preSelection),D=function(Q,L){var ae=L;switch(Q){case vs.ArrowRight:ae=b?Tv(L,1):jc(L,1);break;case vs.ArrowLeft:ae=b?pF(L):Pse(L);break;case vs.ArrowUp:ae=pF(L);break;case vs.ArrowDown:ae=Tv(L,1);break;case vs.PageUp:ae=T?wp(L,1):Jm(L,1);break;case vs.PageDown:ae=T?vu(L,1):Bc(L,1);break;case vs.Home:ae=Uh(L,w,B);break;case vs.End:ae=wae(L);break}return ae},P=function(Q,L){for(var ae=40,ne=Q,V=!1,O=0,X=D(Q,L);!V;){if(O>=ae){X=L;break}g&&X<g&&(ne=vs.ArrowRight,X=Ll(g,r.props)?D(ne,X):g),p&&X>p&&(ne=vs.ArrowLeft,X=Ll(p,r.props)?D(ne,X):p),Ll(X,r.props)?((ne===vs.PageUp||ne===vs.Home)&&(ne=vs.ArrowRight),(ne===vs.PageDown||ne===vs.End)&&(ne=vs.ArrowLeft),X=D(ne,X)):V=!0,O++}return X};if(S===vs.Enter){n.preventDefault(),r.handleSelect(M,n),!y&&r.setPreSelection(M);return}else if(S===vs.Escape){n.preventDefault(),r.setOpen(!1),r.inputOk()||(c=(l=r.props).onInputError)===null||c===void 0||c.call(l,{code:1,msg:ej});return}var Y=null;switch(S){case vs.ArrowLeft:case vs.ArrowRight:case vs.ArrowUp:case vs.ArrowDown:case vs.PageUp:case vs.PageDown:case vs.Home:case vs.End:Y=P(S,M);break}if(!Y){(m=(u=r.props).onInputError)===null||m===void 0||m.call(u,{code:1,msg:ej});return}n.preventDefault(),r.setState({lastPreSelectChange:tj}),j&&r.setSelected(Y),r.setPreSelection(Y),E&&r.setState({shouldFocusDayInline:!0})}},r.onPopperKeyDown=function(n){var i=n.key;i===vs.Escape&&(n.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1))},r.onClearClick=function(n){n&&n.preventDefault&&n.preventDefault(),r.sendFocusBackToInput();var i=r.props,o=i.selectsRange,l=i.onChange;l?.(o?[null,null]:null,n),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(n){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(n.target===document||n.target===document.documentElement||n.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(n)&&r.setOpen(!1)},r.renderCalendar=function(){var n,i;return!r.props.inline&&!r.isCalendarOpen()?null:qt.createElement(tne,wr({showMonthYearDropdown:void 0,ref:function(o){r.calendar=o}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(n=r.props.dateFormatCalendar)!==null&&n!==void 0?n:e.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:Pae(r.modifyHolidays()),outsideClickIgnoreClass:r.props.outsideClickIgnoreClass,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(i=r.props.dropdownMode)!==null&&i!==void 0?i:e.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var n,i=r.props.locale,o=(n=r.props.dateFormat)!==null&&n!==void 0?n:e.defaultProps.dateFormat,l=r.props.showTimeInput||r.props.showTimeSelect,c=l?"PPPPp":"PPPP",u;return r.props.selectsRange?u="Selected start date: ".concat(sl(r.props.startDate,{dateFormat:c,locale:i}),". ").concat(r.props.endDate?"End date: "+sl(r.props.endDate,{dateFormat:c,locale:i}):""):r.props.showTimeSelectOnly?u="Selected time: ".concat(sl(r.props.selected,{dateFormat:o,locale:i})):r.props.showYearPicker?u="Selected year: ".concat(sl(r.props.selected,{dateFormat:"yyyy",locale:i})):r.props.showMonthYearPicker?u="Selected month: ".concat(sl(r.props.selected,{dateFormat:"MMMM yyyy",locale:i})):r.props.showQuarterYearPicker?u="Selected quarter: ".concat(sl(r.props.selected,{dateFormat:"yyyy, QQQ",locale:i})):u="Selected date: ".concat(sl(r.props.selected,{dateFormat:c,locale:i})),qt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},u)},r.renderDateInput=function(){var n,i,o,l,c,u,m=Fi(r.props.className,(n={},n[r.props.outsideClickIgnoreClass||e.defaultProps.outsideClickIgnoreClass]=r.state.open,n)),A=r.props.customInput||qt.createElement("input",{type:"text"}),g=r.props.customInputRef||"ref",p={},v=(o=r.props["aria-describedby"])!==null&&o!==void 0?o:r.props.ariaDescribedBy,b=(l=r.props["aria-invalid"])!==null&&l!==void 0?l:r.props.ariaInvalid,y=(c=r.props["aria-labelledby"])!==null&&c!==void 0?c:r.props.ariaLabelledBy,w=(u=r.props["aria-required"])!==null&&u!==void 0?u:r.props.ariaRequired;return v!=null&&(p["aria-describedby"]=v),b!=null&&(p["aria-invalid"]=b),y!=null&&(p["aria-labelledby"]=y),w!=null&&(p["aria-required"]=w),C.cloneElement(A,wr((i={},i[g]=function(B){r.input=B},i.value=r.getInputValue(),i.onBlur=r.handleBlur,i.onChange=r.handleChange,i.onClick=r.onInputClick,i.onFocus=r.handleFocus,i.onKeyDown=r.onInputKeyDown,i.id=r.props.id,i.name=r.props.name,i.form=r.props.form,i.autoFocus=r.props.autoFocus,i.placeholder=r.props.placeholderText,i.disabled=r.props.disabled,i.autoComplete=r.props.autoComplete,i.className=Fi(A.props.className,m),i.title=r.props.title,i.readOnly=r.props.readOnly,i.required=r.props.required,i.tabIndex=r.props.tabIndex,i),p))},r.renderClearButton=function(){var n=r.props,i=n.isClearable,o=n.disabled,l=n.selected,c=n.startDate,u=n.endDate,m=n.clearButtonTitle,A=n.clearButtonClassName,g=A===void 0?"":A,p=n.ariaLabelClose,v=p===void 0?"Close":p,b=n.selectedDates,y=n.readOnly;return i&&!y&&(l!=null||c!=null||u!=null||b?.length)?qt.createElement("button",{type:"button",className:Fi("react-datepicker__close-icon",g,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":v,onClick:r.onClearClick,title:m,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(e,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:GL,readOnly:!1,rangeSeparator:UL,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:C0,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.componentDidUpdate=function(s,r){var n,i,o,l;s.inline&&lne(s.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&s.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),this.props.selectsRange&&this.state.monthSelectedIn!==0&&this.setState({monthSelectedIn:0}),s.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:RF(this.props.highlightDates)}),!r.focused&&!zm(s.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((i=(n=this.props).onCalendarOpen)===null||i===void 0||i.call(n)),r.open===!0&&this.state.open===!1&&((l=(o=this.props).onCalendarClose)===null||l===void 0||l.call(o)))},e.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.renderInputContainer=function(){var s=this.props,r=s.showIcon,n=s.icon,i=s.calendarIconClassname,o=s.calendarIconClassName,l=s.toggleCalendarOnIconClick,c=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),qt.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&qt.createElement(sne,wr({icon:n,className:Fi(o,!o&&i,c&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},e.prototype.render=function(){var s=this.renderCalendar();if(this.props.inline)return s;if(this.props.withPortal){var r=this.state.open?qt.createElement(YL,{enableTabLoop:this.props.enableTabLoop},qt.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},s)):null;return this.state.open&&this.props.portalId&&(r=qt.createElement(WL,wr({portalId:this.props.portalId},this.props),r)),qt.createElement("div",null,this.renderInputContainer(),r)}return qt.createElement(one,wr({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:s,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},e})(C.Component),cne="input",tj="navigate";var j_=function(a,e){return j_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,r){s.__proto__=r}||function(s,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])},j_(a,e)};function Tc(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");j_(a,e);function s(){this.constructor=a}a.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}var __=function(){return __=Object.assign||function(e){for(var s,r=1,n=arguments.length;r<n;r++){s=arguments[r];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},__.apply(this,arguments)};function ro(a,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(m){try{u(r.next(m))}catch(A){o(A)}}function c(m){try{u(r.throw(m))}catch(A){o(A)}}function u(m){m.done?i(m.value):n(m.value).then(l,c)}u((r=r.apply(a,[])).next())})}function Vi(a,e){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(m){return c([u,m])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,n=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){s=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){s.label=u[1];break}if(u[0]===6&&s.label<i[1]){s.label=i[1],i=u;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(u);break}i[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(a,s)}catch(m){u=[6,m],n=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function hy(a,e,s){if(arguments.length===2)for(var r=0,n=e.length,i;r<n;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return a.concat(i||e)}var Bu=(function(){function a(e,s,r,n){this.left=e,this.top=s,this.width=r,this.height=n}return a.prototype.add=function(e,s,r,n){return new a(this.left+e,this.top+s,this.width+r,this.height+n)},a.fromClientRect=function(e,s){return new a(s.left+e.windowBounds.left,s.top+e.windowBounds.top,s.width,s.height)},a.fromDOMRectList=function(e,s){var r=Array.from(s).find(function(n){return n.width!==0});return r?new a(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):a.EMPTY},a.EMPTY=new a(0,0,0,0),a})(),t1=function(a,e){return Bu.fromClientRect(a,e.getBoundingClientRect())},dne=function(a){var e=a.body,s=a.documentElement;if(!e||!s)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,s.scrollWidth),Math.max(e.offsetWidth,s.offsetWidth),Math.max(e.clientWidth,s.clientWidth)),n=Math.max(Math.max(e.scrollHeight,s.scrollHeight),Math.max(e.offsetHeight,s.offsetHeight),Math.max(e.clientHeight,s.clientHeight));return new Bu(0,0,r,n)},s1=function(a){for(var e=[],s=0,r=a.length;s<r;){var n=a.charCodeAt(s++);if(n>=55296&&n<=56319&&s<r){var i=a.charCodeAt(s++);(i&64512)===56320?e.push(((n&1023)<<10)+(i&1023)+65536):(e.push(n),s--)}else e.push(n)}return e},kn=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,a);var s=a.length;if(!s)return"";for(var r=[],n=-1,i="";++n<s;){var o=a[n];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(n+1===s||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},zF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",une=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var my=0;my<zF.length;my++)une[zF.charCodeAt(my)]=my;var $F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gx=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ay=0;Ay<$F.length;Ay++)gx[$F.charCodeAt(Ay)]=Ay;var hne=function(a){var e=a.length*.75,s=a.length,r,n=0,i,o,l,c;a[a.length-1]==="="&&(e--,a[a.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),m=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<s;r+=4)i=gx[a.charCodeAt(r)],o=gx[a.charCodeAt(r+1)],l=gx[a.charCodeAt(r+2)],c=gx[a.charCodeAt(r+3)],m[n++]=i<<2|o>>4,m[n++]=(o&15)<<4|l>>2,m[n++]=(l&3)<<6|c&63;return u},mne=function(a){for(var e=a.length,s=[],r=0;r<e;r+=2)s.push(a[r+1]<<8|a[r]);return s},Ane=function(a){for(var e=a.length,s=[],r=0;r<e;r+=4)s.push(a[r+3]<<24|a[r+2]<<16|a[r+1]<<8|a[r]);return s},eA=5,bC=11,sj=2,fne=bC-eA,KL=65536>>eA,pne=1<<eA,rj=pne-1,gne=1024>>eA,xne=KL+gne,bne=xne,yne=32,vne=bne+yne,wne=65536>>bC,Nne=1<<fne,jne=Nne-1,qF=function(a,e,s){return a.slice?a.slice(e,s):new Uint16Array(Array.prototype.slice.call(a,e,s))},_ne=function(a,e,s){return a.slice?a.slice(e,s):new Uint32Array(Array.prototype.slice.call(a,e,s))},Cne=function(a,e){var s=hne(a),r=Array.isArray(s)?Ane(s):new Uint32Array(s),n=Array.isArray(s)?mne(s):new Uint16Array(s),i=24,o=qF(n,i/2,r[4]/2),l=r[5]===2?qF(n,(i+r[4])/2):_ne(r,Math.ceil((i+r[4])/4));return new kne(r[0],r[1],r[2],r[3],o,l)},kne=(function(){function a(e,s,r,n,i,o){this.initialValue=e,this.errorValue=s,this.highStart=r,this.highValueIndex=n,this.index=i,this.data=o}return a.prototype.get=function(e){var s;if(e>=0){if(e<55296||e>56319&&e<=65535)return s=this.index[e>>eA],s=(s<<sj)+(e&rj),this.data[s];if(e<=65535)return s=this.index[KL+(e-55296>>eA)],s=(s<<sj)+(e&rj),this.data[s];if(e<this.highStart)return s=vne-wne+(e>>bC),s=this.index[s],s+=e>>eA&jne,s=this.index[s],s=(s<<sj)+(e&rj),this.data[s];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},a})(),GF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bne=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var fy=0;fy<GF.length;fy++)Bne[GF.charCodeAt(fy)]=fy;var Sne="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",WF=50,Ene=1,XL=2,JL=3,Fne=4,Dne=5,YF=7,ZL=8,KF=9,Ph=10,C_=11,XF=12,k_=13,Tne=14,xx=15,B_=16,py=17,Zg=18,Pne=19,JF=20,S_=21,ex=22,aj=23,_f=24,Zo=25,bx=26,yx=27,Cf=28,Ine=29,Um=30,Lne=31,gy=32,xy=33,E_=34,F_=35,D_=36,r0=37,T_=38,rv=39,av=40,nj=41,eM=42,Mne=43,Rne=[9001,65288],tM="!",kr="",by="",P_=Cne(Sne),iu=[Um,D_],I_=[Ene,XL,JL,Dne],sM=[Ph,ZL],ZF=[yx,bx],One=I_.concat(sM),eD=[T_,rv,av,E_,F_],Une=[xx,k_],Qne=function(a,e){e===void 0&&(e="strict");var s=[],r=[],n=[];return a.forEach(function(i,o){var l=P_.get(i);if(l>WF?(n.push(!0),l-=WF):n.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return r.push(o),s.push(B_);if(l===Fne||l===C_){if(o===0)return r.push(o),s.push(Um);var c=s[o-1];return One.indexOf(c)===-1?(r.push(r[o-1]),s.push(c)):(r.push(o),s.push(Um))}if(r.push(o),l===Lne)return s.push(e==="strict"?S_:r0);if(l===eM||l===Ine)return s.push(Um);if(l===Mne)return i>=131072&&i<=196605||i>=196608&&i<=262141?s.push(r0):s.push(Um);s.push(l)}),[r,s,n]},ij=function(a,e,s,r){var n=r[s];if(Array.isArray(a)?a.indexOf(n)!==-1:a===n)for(var i=s;i<=r.length;){i++;var o=r[i];if(o===e)return!0;if(o!==Ph)break}if(n===Ph)for(var i=s;i>0;){i--;var l=r[i];if(Array.isArray(a)?a.indexOf(l)!==-1:a===l)for(var c=s;c<=r.length;){c++;var o=r[c];if(o===e)return!0;if(o!==Ph)break}if(l!==Ph)break}return!1},tD=function(a,e){for(var s=a;s>=0;){var r=e[s];if(r===Ph)s--;else return r}return 0},Hne=function(a,e,s,r,n){if(s[r]===0)return kr;var i=r-1;if(Array.isArray(n)&&n[i]===!0)return kr;var o=i-1,l=i+1,c=e[i],u=o>=0?e[o]:0,m=e[l];if(c===XL&&m===JL)return kr;if(I_.indexOf(c)!==-1)return tM;if(I_.indexOf(m)!==-1||sM.indexOf(m)!==-1)return kr;if(tD(i,e)===ZL)return by;if(P_.get(a[i])===C_||(c===gy||c===xy)&&P_.get(a[l])===C_||c===YF||m===YF||c===KF||[Ph,k_,xx].indexOf(c)===-1&&m===KF||[py,Zg,Pne,_f,Cf].indexOf(m)!==-1||tD(i,e)===ex||ij(aj,ex,i,e)||ij([py,Zg],S_,i,e)||ij(XF,XF,i,e))return kr;if(c===Ph)return by;if(c===aj||m===aj)return kr;if(m===B_||c===B_)return by;if([k_,xx,S_].indexOf(m)!==-1||c===Tne||u===D_&&Une.indexOf(c)!==-1||c===Cf&&m===D_||m===JF||iu.indexOf(m)!==-1&&c===Zo||iu.indexOf(c)!==-1&&m===Zo||c===yx&&[r0,gy,xy].indexOf(m)!==-1||[r0,gy,xy].indexOf(c)!==-1&&m===bx||iu.indexOf(c)!==-1&&ZF.indexOf(m)!==-1||ZF.indexOf(c)!==-1&&iu.indexOf(m)!==-1||[yx,bx].indexOf(c)!==-1&&(m===Zo||[ex,xx].indexOf(m)!==-1&&e[l+1]===Zo)||[ex,xx].indexOf(c)!==-1&&m===Zo||c===Zo&&[Zo,Cf,_f].indexOf(m)!==-1)return kr;if([Zo,Cf,_f,py,Zg].indexOf(m)!==-1)for(var A=i;A>=0;){var g=e[A];if(g===Zo)return kr;if([Cf,_f].indexOf(g)!==-1)A--;else break}if([yx,bx].indexOf(m)!==-1)for(var A=[py,Zg].indexOf(c)!==-1?o:i;A>=0;){var g=e[A];if(g===Zo)return kr;if([Cf,_f].indexOf(g)!==-1)A--;else break}if(T_===c&&[T_,rv,E_,F_].indexOf(m)!==-1||[rv,E_].indexOf(c)!==-1&&[rv,av].indexOf(m)!==-1||[av,F_].indexOf(c)!==-1&&m===av||eD.indexOf(c)!==-1&&[JF,bx].indexOf(m)!==-1||eD.indexOf(m)!==-1&&c===yx||iu.indexOf(c)!==-1&&iu.indexOf(m)!==-1||c===_f&&iu.indexOf(m)!==-1||iu.concat(Zo).indexOf(c)!==-1&&m===ex&&Rne.indexOf(a[l])===-1||iu.concat(Zo).indexOf(m)!==-1&&c===Zg)return kr;if(c===nj&&m===nj){for(var p=s[i],v=1;p>0&&(p--,e[p]===nj);)v++;if(v%2!==0)return kr}return c===gy&&m===xy?kr:by},Vne=function(a,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var s=Qne(a,e.lineBreak),r=s[0],n=s[1],i=s[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(n=n.map(function(l){return[Zo,Um,eM].indexOf(l)!==-1?r0:l}));var o=e.wordBreak==="keep-all"?i.map(function(l,c){return l&&a[c]>=19968&&a[c]<=40959}):void 0;return[r,n,o]},zne=(function(){function a(e,s,r,n){this.codePoints=e,this.required=s===tM,this.start=r,this.end=n}return a.prototype.slice=function(){return kn.apply(void 0,this.codePoints.slice(this.start,this.end))},a})(),$ne=function(a,e){var s=s1(a),r=Vne(s,e),n=r[0],i=r[1],o=r[2],l=s.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var m=kr;u<l&&(m=Hne(s,i,n,++u,o))===kr;);if(m!==kr||u===l){var A=new zne(s,m,c,u);return c=u,{value:A,done:!1}}return{done:!0,value:null}}}},qne=1,Gne=2,S0=4,sD=8,$v=10,rD=47,Dx=92,Wne=9,Yne=32,yy=34,tx=61,Kne=35,Xne=36,Jne=37,vy=39,wy=40,sx=41,Zne=95,Io=45,eie=33,tie=60,sie=62,rie=64,aie=91,nie=93,iie=61,oie=123,Ny=63,lie=125,aD=124,cie=126,die=128,nD=65533,oj=42,$m=43,uie=44,hie=58,mie=59,a0=46,Aie=0,fie=8,pie=11,gie=14,xie=31,bie=127,rd=-1,rM=48,aM=97,nM=101,yie=102,vie=117,wie=122,iM=65,oM=69,lM=70,Nie=85,jie=90,$i=function(a){return a>=rM&&a<=57},_ie=function(a){return a>=55296&&a<=57343},kf=function(a){return $i(a)||a>=iM&&a<=lM||a>=aM&&a<=yie},Cie=function(a){return a>=aM&&a<=wie},kie=function(a){return a>=iM&&a<=jie},Bie=function(a){return Cie(a)||kie(a)},Sie=function(a){return a>=die},jy=function(a){return a===$v||a===Wne||a===Yne},qv=function(a){return Bie(a)||Sie(a)||a===Zne},iD=function(a){return qv(a)||$i(a)||a===Io},Eie=function(a){return a>=Aie&&a<=fie||a===pie||a>=gie&&a<=xie||a===bie},wh=function(a,e){return a!==Dx?!1:e!==$v},_y=function(a,e,s){return a===Io?qv(e)||wh(e,s):qv(a)?!0:!!(a===Dx&&wh(a,e))},lj=function(a,e,s){return a===$m||a===Io?$i(e)?!0:e===a0&&$i(s):$i(a===a0?e:a)},Fie=function(a){var e=0,s=1;(a[e]===$m||a[e]===Io)&&(a[e]===Io&&(s=-1),e++);for(var r=[];$i(a[e]);)r.push(a[e++]);var n=r.length?parseInt(kn.apply(void 0,r),10):0;a[e]===a0&&e++;for(var i=[];$i(a[e]);)i.push(a[e++]);var o=i.length,l=o?parseInt(kn.apply(void 0,i),10):0;(a[e]===oM||a[e]===nM)&&e++;var c=1;(a[e]===$m||a[e]===Io)&&(a[e]===Io&&(c=-1),e++);for(var u=[];$i(a[e]);)u.push(a[e++]);var m=u.length?parseInt(kn.apply(void 0,u),10):0;return s*(n+l*Math.pow(10,-o))*Math.pow(10,c*m)},Die={type:2},Tie={type:3},Pie={type:4},Iie={type:13},Lie={type:8},Mie={type:21},Rie={type:9},Oie={type:10},Uie={type:11},Qie={type:12},Hie={type:14},Cy={type:23},Vie={type:1},zie={type:25},$ie={type:24},qie={type:26},Gie={type:27},Wie={type:28},Yie={type:29},Kie={type:31},L_={type:32},cM=(function(){function a(){this._value=[]}return a.prototype.write=function(e){this._value=this._value.concat(s1(e))},a.prototype.read=function(){for(var e=[],s=this.consumeToken();s!==L_;)e.push(s),s=this.consumeToken();return e},a.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case yy:return this.consumeStringToken(yy);case Kne:var s=this.peekCodePoint(0),r=this.peekCodePoint(1),n=this.peekCodePoint(2);if(iD(s)||wh(r,n)){var i=_y(s,r,n)?Gne:qne,o=this.consumeName();return{type:5,value:o,flags:i}}break;case Xne:if(this.peekCodePoint(0)===tx)return this.consumeCodePoint(),Iie;break;case vy:return this.consumeStringToken(vy);case wy:return Die;case sx:return Tie;case oj:if(this.peekCodePoint(0)===tx)return this.consumeCodePoint(),Hie;break;case $m:if(lj(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case uie:return Pie;case Io:var l=e,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(lj(l,c,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(_y(l,c,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===Io&&u===sie)return this.consumeCodePoint(),this.consumeCodePoint(),$ie;break;case a0:if(lj(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case rD:if(this.peekCodePoint(0)===oj)for(this.consumeCodePoint();;){var m=this.consumeCodePoint();if(m===oj&&(m=this.consumeCodePoint(),m===rD))return this.consumeToken();if(m===rd)return this.consumeToken()}break;case hie:return qie;case mie:return Gie;case tie:if(this.peekCodePoint(0)===eie&&this.peekCodePoint(1)===Io&&this.peekCodePoint(2)===Io)return this.consumeCodePoint(),this.consumeCodePoint(),zie;break;case rie:var A=this.peekCodePoint(0),g=this.peekCodePoint(1),p=this.peekCodePoint(2);if(_y(A,g,p)){var o=this.consumeName();return{type:7,value:o}}break;case aie:return Wie;case Dx:if(wh(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case nie:return Yie;case iie:if(this.peekCodePoint(0)===tx)return this.consumeCodePoint(),Lie;break;case oie:return Uie;case lie:return Qie;case vie:case Nie:var v=this.peekCodePoint(0),b=this.peekCodePoint(1);return v===$m&&(kf(b)||b===Ny)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case aD:if(this.peekCodePoint(0)===tx)return this.consumeCodePoint(),Rie;if(this.peekCodePoint(0)===aD)return this.consumeCodePoint(),Mie;break;case cie:if(this.peekCodePoint(0)===tx)return this.consumeCodePoint(),Oie;break;case rd:return L_}return jy(e)?(this.consumeWhiteSpace(),Kie):$i(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):qv(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:kn(e)}},a.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},a.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},a.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},a.prototype.consumeUnicodeRangeToken=function(){for(var e=[],s=this.consumeCodePoint();kf(s)&&e.length<6;)e.push(s),s=this.consumeCodePoint();for(var r=!1;s===Ny&&e.length<6;)e.push(s),s=this.consumeCodePoint(),r=!0;if(r){var n=parseInt(kn.apply(void 0,e.map(function(c){return c===Ny?rM:c})),16),i=parseInt(kn.apply(void 0,e.map(function(c){return c===Ny?lM:c})),16);return{type:30,start:n,end:i}}var o=parseInt(kn.apply(void 0,e),16);if(this.peekCodePoint(0)===Io&&kf(this.peekCodePoint(1))){this.consumeCodePoint(),s=this.consumeCodePoint();for(var l=[];kf(s)&&l.length<6;)l.push(s),s=this.consumeCodePoint();var i=parseInt(kn.apply(void 0,l),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},a.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===wy?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===wy?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},a.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===rd)return{type:22,value:""};var s=this.peekCodePoint(0);if(s===vy||s===yy){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===rd||this.peekCodePoint(0)===sx)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Cy)}for(;;){var n=this.consumeCodePoint();if(n===rd||n===sx)return{type:22,value:kn.apply(void 0,e)};if(jy(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===rd||this.peekCodePoint(0)===sx?(this.consumeCodePoint(),{type:22,value:kn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Cy);if(n===yy||n===vy||n===wy||Eie(n))return this.consumeBadUrlRemnants(),Cy;if(n===Dx)if(wh(n,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Cy;else e.push(n)}},a.prototype.consumeWhiteSpace=function(){for(;jy(this.peekCodePoint(0));)this.consumeCodePoint()},a.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===sx||e===rd)return;wh(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},a.prototype.consumeStringSlice=function(e){for(var s=5e4,r="";e>0;){var n=Math.min(s,e);r+=kn.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),r},a.prototype.consumeStringToken=function(e){var s="",r=0;do{var n=this._value[r];if(n===rd||n===void 0||n===e)return s+=this.consumeStringSlice(r),{type:0,value:s};if(n===$v)return this._value.splice(0,r),Vie;if(n===Dx){var i=this._value[r+1];i!==rd&&i!==void 0&&(i===$v?(s+=this.consumeStringSlice(r),r=-1,this._value.shift()):wh(n,i)&&(s+=this.consumeStringSlice(r),s+=kn(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},a.prototype.consumeNumber=function(){var e=[],s=S0,r=this.peekCodePoint(0);for((r===$m||r===Io)&&e.push(this.consumeCodePoint());$i(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(r===a0&&$i(n))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),s=sD;$i(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),n=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((r===oM||r===nM)&&((n===$m||n===Io)&&$i(i)||$i(n)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),s=sD;$i(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Fie(e),s]},a.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),s=e[0],r=e[1],n=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(_y(n,i,o)){var l=this.consumeName();return{type:15,number:s,flags:r,unit:l}}return n===Jne?(this.consumeCodePoint(),{type:16,number:s,flags:r}):{type:17,number:s,flags:r}},a.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(kf(e)){for(var s=kn(e);kf(this.peekCodePoint(0))&&s.length<6;)s+=kn(this.consumeCodePoint());jy(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(s,16);return r===0||_ie(r)||r>1114111?nD:r}return e===rd?nD:e},a.prototype.consumeName=function(){for(var e="";;){var s=this.consumeCodePoint();if(iD(s))e+=kn(s);else if(wh(s,this.peekCodePoint(0)))e+=kn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(s),e}},a})(),dM=(function(){function a(e){this._tokens=e}return a.create=function(e){var s=new cM;return s.write(e),new a(s.read())},a.parseValue=function(e){return a.create(e).parseComponentValue()},a.parseValues=function(e){return a.create(e).parseComponentValues()},a.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var s=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return s;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},a.prototype.parseComponentValues=function(){for(var e=[];;){var s=this.consumeComponentValue();if(s.type===32)return e;e.push(s),e.push()}},a.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},a.prototype.consumeSimpleBlock=function(e){for(var s={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||Jie(r,e))return s;this.reconsumeToken(r),s.values.push(this.consumeComponentValue()),r=this.consumeToken()}},a.prototype.consumeFunction=function(e){for(var s={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return s;this.reconsumeToken(r),s.values.push(this.consumeComponentValue())}},a.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?L_:e},a.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},a})(),E0=function(a){return a.type===15},Kp=function(a){return a.type===17},wa=function(a){return a.type===20},Xie=function(a){return a.type===0},M_=function(a,e){return wa(a)&&a.value===e},uM=function(a){return a.type!==31},kp=function(a){return a.type!==31&&a.type!==4},Sd=function(a){var e=[],s=[];return a.forEach(function(r){if(r.type===4){if(s.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(s),s=[];return}r.type!==31&&s.push(r)}),s.length&&e.push(s),e},Jie=function(a,e){return e===11&&a.type===12||e===28&&a.type===29?!0:e===2&&a.type===3},Kh=function(a){return a.type===17||a.type===15},qn=function(a){return a.type===16||Kh(a)},hM=function(a){return a.length>1?[a[0],a[1]]:[a[0]]},Di={type:17,number:0,flags:S0},yC={type:16,number:50,flags:S0},Ih={type:16,number:100,flags:S0},vx=function(a,e,s){var r=a[0],n=a[1];return[Sa(r,e),Sa(typeof n<"u"?n:r,s)]},Sa=function(a,e){if(a.type===16)return a.number/100*e;if(E0(a))switch(a.unit){case"rem":case"em":return 16*a.number;default:return a.number}return a.number},mM="deg",AM="grad",fM="rad",pM="turn",r1={name:"angle",parse:function(a,e){if(e.type===15)switch(e.unit){case mM:return Math.PI*e.number/180;case AM:return Math.PI/200*e.number;case fM:return e.number;case pM:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},gM=function(a){return a.type===15&&(a.unit===mM||a.unit===AM||a.unit===fM||a.unit===pM)},xM=function(a){var e=a.filter(wa).map(function(s){return s.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Di,Di];case"to top":case"bottom":return Ol(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Di,Ih];case"to right":case"left":return Ol(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ih,Ih];case"to bottom":case"top":return Ol(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ih,Di];case"to left":case"right":return Ol(270)}return 0},Ol=function(a){return Math.PI*a/180},Qh={name:"color",parse:function(a,e){if(e.type===18){var s=Zie[e.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return s(a,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),n=e.value.substring(1,2),i=e.value.substring(2,3);return Lh(parseInt(r+r,16),parseInt(n+n,16),parseInt(i+i,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),n=e.value.substring(1,2),i=e.value.substring(2,3),o=e.value.substring(3,4);return Lh(parseInt(r+r,16),parseInt(n+n,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),n=e.value.substring(2,4),i=e.value.substring(4,6);return Lh(parseInt(r,16),parseInt(n,16),parseInt(i,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),n=e.value.substring(2,4),i=e.value.substring(4,6),o=e.value.substring(6,8);return Lh(parseInt(r,16),parseInt(n,16),parseInt(i,16),parseInt(o,16)/255)}}if(e.type===20){var l=ju[e.value.toUpperCase()];if(typeof l<"u")return l}return ju.TRANSPARENT}},Hh=function(a){return(255&a)===0},Ai=function(a){var e=255&a,s=255&a>>8,r=255&a>>16,n=255&a>>24;return e<255?"rgba("+n+","+r+","+s+","+e/255+")":"rgb("+n+","+r+","+s+")"},Lh=function(a,e,s,r){return(a<<24|e<<16|s<<8|Math.round(r*255)<<0)>>>0},oD=function(a,e){if(a.type===17)return a.number;if(a.type===16){var s=e===3?1:255;return e===3?a.number/100*s:Math.round(a.number/100*s)}return 0},lD=function(a,e){var s=e.filter(kp);if(s.length===3){var r=s.map(oD),n=r[0],i=r[1],o=r[2];return Lh(n,i,o,1)}if(s.length===4){var l=s.map(oD),n=l[0],i=l[1],o=l[2],c=l[3];return Lh(n,i,o,c)}return 0};function cj(a,e,s){return s<0&&(s+=1),s>=1&&(s-=1),s<1/6?(e-a)*s*6+a:s<1/2?e:s<2/3?(e-a)*6*(2/3-s)+a:a}var cD=function(a,e){var s=e.filter(kp),r=s[0],n=s[1],i=s[2],o=s[3],l=(r.type===17?Ol(r.number):r1.parse(a,r))/(Math.PI*2),c=qn(n)?n.number/100:0,u=qn(i)?i.number/100:0,m=typeof o<"u"&&qn(o)?Sa(o,1):1;if(c===0)return Lh(u*255,u*255,u*255,1);var A=u<=.5?u*(c+1):u+c-u*c,g=u*2-A,p=cj(g,A,l+1/3),v=cj(g,A,l),b=cj(g,A,l-1/3);return Lh(p*255,v*255,b*255,m)},Zie={hsl:cD,hsla:cD,rgb:lD,rgba:lD},Tx=function(a,e){return Qh.parse(a,dM.create(e).parseComponentValue())},ju={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},eoe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(a,e){return e.map(function(s){if(wa(s))switch(s.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},toe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},a1=function(a,e){var s=Qh.parse(a,e[0]),r=e[1];return r&&qn(r)?{color:s,stop:r}:{color:s,stop:null}},dD=function(a,e){var s=a[0],r=a[a.length-1];s.stop===null&&(s.stop=Di),r.stop===null&&(r.stop=Ih);for(var n=[],i=0,o=0;o<a.length;o++){var l=a[o].stop;if(l!==null){var c=Sa(l,e);c>i?n.push(c):n.push(i),i=c}else n.push(null)}for(var u=null,o=0;o<n.length;o++){var m=n[o];if(m===null)u===null&&(u=o);else if(u!==null){for(var A=o-u,g=n[u-1],p=(m-g)/(A+1),v=1;v<=A;v++)n[u+v-1]=p*v;u=null}}return a.map(function(b,y){var w=b.color;return{color:w,stop:Math.max(Math.min(1,n[y]/e),0)}})},soe=function(a,e,s){var r=e/2,n=s/2,i=Sa(a[0],e)-r,o=n-Sa(a[1],s);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},roe=function(a,e,s){var r=typeof a=="number"?a:soe(a,e,s),n=Math.abs(e*Math.sin(r))+Math.abs(s*Math.cos(r)),i=e/2,o=s/2,l=n/2,c=Math.sin(r-Math.PI/2)*l,u=Math.cos(r-Math.PI/2)*l;return[n,i-u,i+u,o-c,o+c]},bc=function(a,e){return Math.sqrt(a*a+e*e)},uD=function(a,e,s,r,n){var i=[[0,0],[0,e],[a,0],[a,e]];return i.reduce(function(o,l){var c=l[0],u=l[1],m=bc(s-c,r-u);return(n?m<o.optimumDistance:m>o.optimumDistance)?{optimumCorner:l,optimumDistance:m}:o},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},aoe=function(a,e,s,r,n){var i=0,o=0;switch(a.size){case 0:a.shape===0?i=o=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(s),Math.abs(s-n)):a.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-r)),o=Math.min(Math.abs(s),Math.abs(s-n)));break;case 2:if(a.shape===0)i=o=Math.min(bc(e,s),bc(e,s-n),bc(e-r,s),bc(e-r,s-n));else if(a.shape===1){var l=Math.min(Math.abs(s),Math.abs(s-n))/Math.min(Math.abs(e),Math.abs(e-r)),c=uD(r,n,e,s,!0),u=c[0],m=c[1];i=bc(u-e,(m-s)/l),o=l*i}break;case 1:a.shape===0?i=o=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(s),Math.abs(s-n)):a.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-r)),o=Math.max(Math.abs(s),Math.abs(s-n)));break;case 3:if(a.shape===0)i=o=Math.max(bc(e,s),bc(e,s-n),bc(e-r,s),bc(e-r,s-n));else if(a.shape===1){var l=Math.max(Math.abs(s),Math.abs(s-n))/Math.max(Math.abs(e),Math.abs(e-r)),A=uD(r,n,e,s,!1),u=A[0],m=A[1];i=bc(u-e,(m-s)/l),o=l*i}break}return Array.isArray(a.size)&&(i=Sa(a.size[0],r),o=a.size.length===2?Sa(a.size[1],n):i),[i,o]},noe=function(a,e){var s=Ol(180),r=[];return Sd(e).forEach(function(n,i){if(i===0){var o=n[0];if(o.type===20&&o.value==="to"){s=xM(n);return}else if(gM(o)){s=r1.parse(a,o);return}}var l=a1(a,n);r.push(l)}),{angle:s,stops:r,type:1}},ky=function(a,e){var s=Ol(180),r=[];return Sd(e).forEach(function(n,i){if(i===0){var o=n[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){s=xM(n);return}else if(gM(o)){s=(r1.parse(a,o)+Ol(270))%Ol(360);return}}var l=a1(a,n);r.push(l)}),{angle:s,stops:r,type:1}},ioe=function(a,e){var s=Ol(180),r=[],n=1,i=0,o=3,l=[];return Sd(e).forEach(function(c,u){var m=c[0];if(u===0){if(wa(m)&&m.value==="linear"){n=1;return}else if(wa(m)&&m.value==="radial"){n=2;return}}if(m.type===18){if(m.name==="from"){var A=Qh.parse(a,m.values[0]);r.push({stop:Di,color:A})}else if(m.name==="to"){var A=Qh.parse(a,m.values[0]);r.push({stop:Ih,color:A})}else if(m.name==="color-stop"){var g=m.values.filter(kp);if(g.length===2){var A=Qh.parse(a,g[1]),p=g[0];Kp(p)&&r.push({stop:{type:16,number:p.number*100,flags:p.flags},color:A})}}}}),n===1?{angle:(s+Ol(180))%Ol(360),stops:r,type:n}:{size:o,shape:i,stops:r,position:l,type:n}},bM="closest-side",yM="farthest-side",vM="closest-corner",wM="farthest-corner",NM="circle",jM="ellipse",_M="cover",CM="contain",ooe=function(a,e){var s=0,r=3,n=[],i=[];return Sd(e).forEach(function(o,l){var c=!0;if(l===0){var u=!1;c=o.reduce(function(A,g){if(u)if(wa(g))switch(g.value){case"center":return i.push(yC),A;case"top":case"left":return i.push(Di),A;case"right":case"bottom":return i.push(Ih),A}else(qn(g)||Kh(g))&&i.push(g);else if(wa(g))switch(g.value){case NM:return s=0,!1;case jM:return s=1,!1;case"at":return u=!0,!1;case bM:return r=0,!1;case _M:case yM:return r=1,!1;case CM:case vM:return r=2,!1;case wM:return r=3,!1}else if(Kh(g)||qn(g))return Array.isArray(r)||(r=[]),r.push(g),!1;return A},c)}if(c){var m=a1(a,o);n.push(m)}}),{size:r,shape:s,stops:n,position:i,type:2}},By=function(a,e){var s=0,r=3,n=[],i=[];return Sd(e).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(m,A){if(wa(A))switch(A.value){case"center":return i.push(yC),!1;case"top":case"left":return i.push(Di),!1;case"right":case"bottom":return i.push(Ih),!1}else if(qn(A)||Kh(A))return i.push(A),!1;return m},c):l===1&&(c=o.reduce(function(m,A){if(wa(A))switch(A.value){case NM:return s=0,!1;case jM:return s=1,!1;case CM:case bM:return r=0,!1;case yM:return r=1,!1;case vM:return r=2,!1;case _M:case wM:return r=3,!1}else if(Kh(A)||qn(A))return Array.isArray(r)||(r=[]),r.push(A),!1;return m},c)),c){var u=a1(a,o);n.push(u)}}),{size:r,shape:s,stops:n,position:i,type:2}},loe=function(a){return a.type===1},coe=function(a){return a.type===2},vC={name:"image",parse:function(a,e){if(e.type===22){var s={url:e.value,type:0};return a.cache.addImage(e.value),s}if(e.type===18){var r=kM[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(a,e.values)}throw new Error("Unsupported image type "+e.type)}};function doe(a){return!(a.type===20&&a.value==="none")&&(a.type!==18||!!kM[a.name])}var kM={"linear-gradient":noe,"-moz-linear-gradient":ky,"-ms-linear-gradient":ky,"-o-linear-gradient":ky,"-webkit-linear-gradient":ky,"radial-gradient":ooe,"-moz-radial-gradient":By,"-ms-radial-gradient":By,"-o-radial-gradient":By,"-webkit-radial-gradient":By,"-webkit-gradient":ioe},uoe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(a,e){if(e.length===0)return[];var s=e[0];return s.type===20&&s.value==="none"?[]:e.filter(function(r){return kp(r)&&doe(r)}).map(function(r){return vC.parse(a,r)})}},hoe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(a,e){return e.map(function(s){if(wa(s))switch(s.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},moe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(a,e){return Sd(e).map(function(s){return s.filter(qn)}).map(hM)}},Aoe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(a,e){return Sd(e).map(function(s){return s.filter(wa).map(function(r){return r.value}).join(" ")}).map(foe)}},foe=function(a){switch(a){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},dp;(function(a){a.AUTO="auto",a.CONTAIN="contain",a.COVER="cover"})(dp||(dp={}));var poe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(a,e){return Sd(e).map(function(s){return s.filter(goe)})}},goe=function(a){return wa(a)||qn(a)},n1=function(a){return{name:"border-"+a+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},xoe=n1("top"),boe=n1("right"),yoe=n1("bottom"),voe=n1("left"),i1=function(a){return{name:"border-radius-"+a,initialValue:"0 0",prefix:!1,type:1,parse:function(e,s){return hM(s.filter(qn))}}},woe=i1("top-left"),Noe=i1("top-right"),joe=i1("bottom-right"),_oe=i1("bottom-left"),o1=function(a){return{name:"border-"+a+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,s){switch(s){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Coe=o1("top"),koe=o1("right"),Boe=o1("bottom"),Soe=o1("left"),l1=function(a){return{name:"border-"+a+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,s){return E0(s)?s.number:0}}},Eoe=l1("top"),Foe=l1("right"),Doe=l1("bottom"),Toe=l1("left"),Poe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ioe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(a,e){return e==="rtl"?1:0}},Loe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(a,e){return e.filter(wa).reduce(function(s,r){return s|Moe(r.value)},0)}},Moe=function(a){switch(a){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Roe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(a,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Ooe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(a,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Gv;(function(a){a.NORMAL="normal",a.STRICT="strict"})(Gv||(Gv={}));var Uoe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(a,e){return e==="strict"?Gv.STRICT:Gv.NORMAL}},Qoe={name:"line-height",initialValue:"normal",prefix:!1,type:4},hD=function(a,e){return wa(a)&&a.value==="normal"?1.2*e:a.type===17?e*a.number:qn(a)?Sa(a,e):e},Hoe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(a,e){return e.type===20&&e.value==="none"?null:vC.parse(a,e)}},Voe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(a,e){return e==="inside"?0:1}},R_={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(a,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},c1=function(a){return{name:"margin-"+a,initialValue:"0",prefix:!1,type:4}},zoe=c1("top"),$oe=c1("right"),qoe=c1("bottom"),Goe=c1("left"),Woe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(a,e){return e.filter(wa).map(function(s){switch(s.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},Yoe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(a,e){return e==="break-word"?"break-word":"normal"}},d1=function(a){return{name:"padding-"+a,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Koe=d1("top"),Xoe=d1("right"),Joe=d1("bottom"),Zoe=d1("left"),ele={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(a,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},tle={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(a,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},sle={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(a,e){return e.length===1&&M_(e[0],"none")?[]:Sd(e).map(function(s){for(var r={color:ju.TRANSPARENT,offsetX:Di,offsetY:Di,blur:Di},n=0,i=0;i<s.length;i++){var o=s[i];Kh(o)?(n===0?r.offsetX=o:n===1?r.offsetY=o:r.blur=o,n++):r.color=Qh.parse(a,o)}return r})}},rle={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(a,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},ale={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(a,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var s=ole[e.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return s(e.values)}return null}},nle=function(a){var e=a.filter(function(s){return s.type===17}).map(function(s){return s.number});return e.length===6?e:null},ile=function(a){var e=a.filter(function(c){return c.type===17}).map(function(c){return c.number}),s=e[0],r=e[1];e[2],e[3];var n=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],l=e[13];return e[14],e[15],e.length===16?[s,r,n,i,o,l]:null},ole={matrix:nle,matrix3d:ile},mD={type:16,number:50,flags:S0},lle=[mD,mD],cle={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(a,e){var s=e.filter(qn);return s.length!==2?lle:[s[0],s[1]]}},dle={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(a,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}},Px;(function(a){a.NORMAL="normal",a.BREAK_ALL="break-all",a.KEEP_ALL="keep-all"})(Px||(Px={}));var ule={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(a,e){switch(e){case"break-all":return Px.BREAK_ALL;case"keep-all":return Px.KEEP_ALL;default:return Px.NORMAL}}},hle={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(a,e){if(e.type===20)return{auto:!0,order:0};if(Kp(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},BM={name:"time",parse:function(a,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},mle={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(a,e){return Kp(e)?e.number:1}},Ale={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fle={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(a,e){return e.filter(wa).map(function(s){switch(s.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(s){return s!==0})}},ple={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(a,e){var s=[],r=[];return e.forEach(function(n){switch(n.type){case 20:case 0:s.push(n.value);break;case 17:s.push(n.number.toString());break;case 4:r.push(s.join(" ")),s.length=0;break}}),s.length&&r.push(s.join(" ")),r.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},gle={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},xle={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(a,e){return Kp(e)?e.number:wa(e)&&e.value==="bold"?700:400}},ble={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(a,e){return e.filter(wa).map(function(s){return s.value})}},yle={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(a,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},ni=function(a,e){return(a&e)!==0},vle={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(a,e){if(e.length===0)return[];var s=e[0];return s.type===20&&s.value==="none"?[]:e}},wle={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(a,e){if(e.length===0)return null;var s=e[0];if(s.type===20&&s.value==="none")return null;for(var r=[],n=e.filter(uM),i=0;i<n.length;i++){var o=n[i],l=n[i+1];if(o.type===20){var c=l&&Kp(l)?l.number:1;r.push({counter:o.value,increment:c})}}return r}},Nle={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(a,e){if(e.length===0)return[];for(var s=[],r=e.filter(uM),n=0;n<r.length;n++){var i=r[n],o=r[n+1];if(wa(i)&&i.value!=="none"){var l=o&&Kp(o)?o.number:0;s.push({counter:i.value,reset:l})}}return s}},jle={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(a,e){return e.filter(E0).map(function(s){return BM.parse(a,s)})}},_le={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(a,e){if(e.length===0)return null;var s=e[0];if(s.type===20&&s.value==="none")return null;var r=[],n=e.filter(Xie);if(n.length%2!==0)return null;for(var i=0;i<n.length;i+=2){var o=n[i].value,l=n[i+1].value;r.push({open:o,close:l})}return r}},AD=function(a,e,s){if(!a)return"";var r=a[Math.min(e,a.length-1)];return r?s?r.open:r.close:""},Cle={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(a,e){return e.length===1&&M_(e[0],"none")?[]:Sd(e).map(function(s){for(var r={color:255,offsetX:Di,offsetY:Di,blur:Di,spread:Di,inset:!1},n=0,i=0;i<s.length;i++){var o=s[i];M_(o,"inset")?r.inset=!0:Kh(o)?(n===0?r.offsetX=o:n===1?r.offsetY=o:n===2?r.blur=o:r.spread=o,n++):r.color=Qh.parse(a,o)}return r})}},kle={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(a,e){var s=[0,1,2],r=[];return e.filter(wa).forEach(function(n){switch(n.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),s.forEach(function(n){r.indexOf(n)===-1&&r.push(n)}),r}},Ble={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Sle={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(a,e){return E0(e)?e.number:0}},Ele=(function(){function a(e,s){var r,n;this.animationDuration=Bs(e,jle,s.animationDuration),this.backgroundClip=Bs(e,eoe,s.backgroundClip),this.backgroundColor=Bs(e,toe,s.backgroundColor),this.backgroundImage=Bs(e,uoe,s.backgroundImage),this.backgroundOrigin=Bs(e,hoe,s.backgroundOrigin),this.backgroundPosition=Bs(e,moe,s.backgroundPosition),this.backgroundRepeat=Bs(e,Aoe,s.backgroundRepeat),this.backgroundSize=Bs(e,poe,s.backgroundSize),this.borderTopColor=Bs(e,xoe,s.borderTopColor),this.borderRightColor=Bs(e,boe,s.borderRightColor),this.borderBottomColor=Bs(e,yoe,s.borderBottomColor),this.borderLeftColor=Bs(e,voe,s.borderLeftColor),this.borderTopLeftRadius=Bs(e,woe,s.borderTopLeftRadius),this.borderTopRightRadius=Bs(e,Noe,s.borderTopRightRadius),this.borderBottomRightRadius=Bs(e,joe,s.borderBottomRightRadius),this.borderBottomLeftRadius=Bs(e,_oe,s.borderBottomLeftRadius),this.borderTopStyle=Bs(e,Coe,s.borderTopStyle),this.borderRightStyle=Bs(e,koe,s.borderRightStyle),this.borderBottomStyle=Bs(e,Boe,s.borderBottomStyle),this.borderLeftStyle=Bs(e,Soe,s.borderLeftStyle),this.borderTopWidth=Bs(e,Eoe,s.borderTopWidth),this.borderRightWidth=Bs(e,Foe,s.borderRightWidth),this.borderBottomWidth=Bs(e,Doe,s.borderBottomWidth),this.borderLeftWidth=Bs(e,Toe,s.borderLeftWidth),this.boxShadow=Bs(e,Cle,s.boxShadow),this.color=Bs(e,Poe,s.color),this.direction=Bs(e,Ioe,s.direction),this.display=Bs(e,Loe,s.display),this.float=Bs(e,Roe,s.cssFloat),this.fontFamily=Bs(e,ple,s.fontFamily),this.fontSize=Bs(e,gle,s.fontSize),this.fontStyle=Bs(e,yle,s.fontStyle),this.fontVariant=Bs(e,ble,s.fontVariant),this.fontWeight=Bs(e,xle,s.fontWeight),this.letterSpacing=Bs(e,Ooe,s.letterSpacing),this.lineBreak=Bs(e,Uoe,s.lineBreak),this.lineHeight=Bs(e,Qoe,s.lineHeight),this.listStyleImage=Bs(e,Hoe,s.listStyleImage),this.listStylePosition=Bs(e,Voe,s.listStylePosition),this.listStyleType=Bs(e,R_,s.listStyleType),this.marginTop=Bs(e,zoe,s.marginTop),this.marginRight=Bs(e,$oe,s.marginRight),this.marginBottom=Bs(e,qoe,s.marginBottom),this.marginLeft=Bs(e,Goe,s.marginLeft),this.opacity=Bs(e,mle,s.opacity);var i=Bs(e,Woe,s.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=Bs(e,Yoe,s.overflowWrap),this.paddingTop=Bs(e,Koe,s.paddingTop),this.paddingRight=Bs(e,Xoe,s.paddingRight),this.paddingBottom=Bs(e,Joe,s.paddingBottom),this.paddingLeft=Bs(e,Zoe,s.paddingLeft),this.paintOrder=Bs(e,kle,s.paintOrder),this.position=Bs(e,tle,s.position),this.textAlign=Bs(e,ele,s.textAlign),this.textDecorationColor=Bs(e,Ale,(r=s.textDecorationColor)!==null&&r!==void 0?r:s.color),this.textDecorationLine=Bs(e,fle,(n=s.textDecorationLine)!==null&&n!==void 0?n:s.textDecoration),this.textShadow=Bs(e,sle,s.textShadow),this.textTransform=Bs(e,rle,s.textTransform),this.transform=Bs(e,ale,s.transform),this.transformOrigin=Bs(e,cle,s.transformOrigin),this.visibility=Bs(e,dle,s.visibility),this.webkitTextStrokeColor=Bs(e,Ble,s.webkitTextStrokeColor),this.webkitTextStrokeWidth=Bs(e,Sle,s.webkitTextStrokeWidth),this.wordBreak=Bs(e,ule,s.wordBreak),this.zIndex=Bs(e,hle,s.zIndex)}return a.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},a.prototype.isTransparent=function(){return Hh(this.backgroundColor)},a.prototype.isTransformed=function(){return this.transform!==null},a.prototype.isPositioned=function(){return this.position!==0},a.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},a.prototype.isFloating=function(){return this.float!==0},a.prototype.isInlineLevel=function(){return ni(this.display,4)||ni(this.display,33554432)||ni(this.display,268435456)||ni(this.display,536870912)||ni(this.display,67108864)||ni(this.display,134217728)},a})(),Fle=(function(){function a(e,s){this.content=Bs(e,vle,s.content),this.quotes=Bs(e,_le,s.quotes)}return a})(),fD=(function(){function a(e,s){this.counterIncrement=Bs(e,wle,s.counterIncrement),this.counterReset=Bs(e,Nle,s.counterReset)}return a})(),Bs=function(a,e,s){var r=new cM,n=s!==null&&typeof s<"u"?s.toString():e.initialValue;r.write(n);var i=new dM(r.read());switch(e.type){case 2:var o=i.parseComponentValue();return e.parse(a,wa(o)?o.value:e.initialValue);case 0:return e.parse(a,i.parseComponentValue());case 1:return e.parse(a,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return r1.parse(a,i.parseComponentValue());case"color":return Qh.parse(a,i.parseComponentValue());case"image":return vC.parse(a,i.parseComponentValue());case"length":var l=i.parseComponentValue();return Kh(l)?l:Di;case"length-percentage":var c=i.parseComponentValue();return qn(c)?c:Di;case"time":return BM.parse(a,i.parseComponentValue())}break}},Dle="data-html2canvas-debug",Tle=function(a){var e=a.getAttribute(Dle);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},O_=function(a,e){var s=Tle(a);return s===1||e===s},Ed=(function(){function a(e,s){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,O_(s,3))debugger;this.styles=new Ele(e,window.getComputedStyle(s,null)),H_(s)&&(this.styles.animationDuration.some(function(r){return r>0})&&(s.style.animationDuration="0s"),this.styles.transform!==null&&(s.style.transform="none")),this.bounds=t1(this.context,s),O_(s,4)&&(this.flags|=16)}return a})(),Ple="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",pD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wx=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Sy=0;Sy<pD.length;Sy++)wx[pD.charCodeAt(Sy)]=Sy;var Ile=function(a){var e=a.length*.75,s=a.length,r,n=0,i,o,l,c;a[a.length-1]==="="&&(e--,a[a.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),m=Array.isArray(u)?u:new Uint8Array(u);for(r=0;r<s;r+=4)i=wx[a.charCodeAt(r)],o=wx[a.charCodeAt(r+1)],l=wx[a.charCodeAt(r+2)],c=wx[a.charCodeAt(r+3)],m[n++]=i<<2|o>>4,m[n++]=(o&15)<<4|l>>2,m[n++]=(l&3)<<6|c&63;return u},Lle=function(a){for(var e=a.length,s=[],r=0;r<e;r+=2)s.push(a[r+1]<<8|a[r]);return s},Mle=function(a){for(var e=a.length,s=[],r=0;r<e;r+=4)s.push(a[r+3]<<24|a[r+2]<<16|a[r+1]<<8|a[r]);return s},tA=5,wC=11,dj=2,Rle=wC-tA,SM=65536>>tA,Ole=1<<tA,uj=Ole-1,Ule=1024>>tA,Qle=SM+Ule,Hle=Qle,Vle=32,zle=Hle+Vle,$le=65536>>wC,qle=1<<Rle,Gle=qle-1,gD=function(a,e,s){return a.slice?a.slice(e,s):new Uint16Array(Array.prototype.slice.call(a,e,s))},Wle=function(a,e,s){return a.slice?a.slice(e,s):new Uint32Array(Array.prototype.slice.call(a,e,s))},Yle=function(a,e){var s=Ile(a),r=Array.isArray(s)?Mle(s):new Uint32Array(s),n=Array.isArray(s)?Lle(s):new Uint16Array(s),i=24,o=gD(n,i/2,r[4]/2),l=r[5]===2?gD(n,(i+r[4])/2):Wle(r,Math.ceil((i+r[4])/4));return new Kle(r[0],r[1],r[2],r[3],o,l)},Kle=(function(){function a(e,s,r,n,i,o){this.initialValue=e,this.errorValue=s,this.highStart=r,this.highValueIndex=n,this.index=i,this.data=o}return a.prototype.get=function(e){var s;if(e>=0){if(e<55296||e>56319&&e<=65535)return s=this.index[e>>tA],s=(s<<dj)+(e&uj),this.data[s];if(e<=65535)return s=this.index[SM+(e-55296>>tA)],s=(s<<dj)+(e&uj),this.data[s];if(e<this.highStart)return s=zle-$le+(e>>wC),s=this.index[s],s+=e>>tA&Gle,s=this.index[s],s=(s<<dj)+(e&uj),this.data[s];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},a})(),xD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xle=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ey=0;Ey<xD.length;Ey++)Xle[xD.charCodeAt(Ey)]=Ey;var Jle=1,hj=2,mj=3,bD=4,yD=5,Zle=7,vD=8,Aj=9,fj=10,wD=11,ND=12,jD=13,_D=14,pj=15,ece=function(a){for(var e=[],s=0,r=a.length;s<r;){var n=a.charCodeAt(s++);if(n>=55296&&n<=56319&&s<r){var i=a.charCodeAt(s++);(i&64512)===56320?e.push(((n&1023)<<10)+(i&1023)+65536):(e.push(n),s--)}else e.push(n)}return e},tce=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,a);var s=a.length;if(!s)return"";for(var r=[],n=-1,i="";++n<s;){var o=a[n];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(n+1===s||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},sce=Yle(Ple),Il="",gj="",rce=function(a){return sce.get(a)},ace=function(a,e,s){var r=s-2,n=e[r],i=e[s-1],o=e[s];if(i===hj&&o===mj)return Il;if(i===hj||i===mj||i===bD||o===hj||o===mj||o===bD)return gj;if(i===vD&&[vD,Aj,wD,ND].indexOf(o)!==-1||(i===wD||i===Aj)&&(o===Aj||o===fj)||(i===ND||i===fj)&&o===fj||o===jD||o===yD||o===Zle||i===Jle)return Il;if(i===jD&&o===_D){for(;n===yD;)n=e[--r];if(n===_D)return Il}if(i===pj&&o===pj){for(var l=0;n===pj;)l++,n=e[--r];if(l%2===0)return Il}return gj},nce=function(a){var e=ece(a),s=e.length,r=0,n=0,i=e.map(rce);return{next:function(){if(r>=s)return{done:!0,value:null};for(var o=Il;r<s&&(o=ace(e,i,++r))===Il;);if(o!==Il||r===s){var l=tce.apply(null,e.slice(n,r));return n=r,{value:l,done:!1}}return{done:!0,value:null}}}},ice=function(a){for(var e=nce(a),s=[],r;!(r=e.next()).done;)r.value&&s.push(r.value.slice());return s},oce=function(a){var e=123;if(a.createRange){var s=a.createRange();if(s.getBoundingClientRect){var r=a.createElement("boundtest");r.style.height=e+"px",r.style.display="block",a.body.appendChild(r),s.selectNode(r);var n=s.getBoundingClientRect(),i=Math.round(n.height);if(a.body.removeChild(r),i===e)return!0}}return!1},lce=function(a){var e=a.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",a.body.appendChild(e);var s=a.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,n=s1(r.data).map(function(c){return kn(c)}),i=0,o={},l=n.every(function(c,u){s.setStart(r,i),s.setEnd(r,i+c.length);var m=s.getBoundingClientRect();i+=c.length;var A=m.x>o.x||m.y>o.y;return o=m,u===0?!0:A});return a.body.removeChild(e),l},cce=function(){return typeof new Image().crossOrigin<"u"},dce=function(){return typeof new XMLHttpRequest().responseType=="string"},uce=function(a){var e=new Image,s=a.createElement("canvas"),r=s.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),s.toDataURL()}catch{return!1}return!0},CD=function(a){return a[0]===0&&a[1]===255&&a[2]===0&&a[3]===255},hce=function(a){var e=a.createElement("canvas"),s=100;e.width=s,e.height=s;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,s,s);var n=new Image,i=e.toDataURL();n.src=i;var o=U_(s,s,0,0,n);return r.fillStyle="red",r.fillRect(0,0,s,s),kD(o).then(function(l){r.drawImage(l,0,0);var c=r.getImageData(0,0,s,s).data;r.fillStyle="red",r.fillRect(0,0,s,s);var u=a.createElement("div");return u.style.backgroundImage="url("+i+")",u.style.height=s+"px",CD(c)?kD(U_(s,s,0,0,u)):Promise.reject(!1)}).then(function(l){return r.drawImage(l,0,0),CD(r.getImageData(0,0,s,s).data)}).catch(function(){return!1})},U_=function(a,e,s,r,n){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",a.toString()),o.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",s.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(n),o},kD=function(a){return new Promise(function(e,s){var r=new Image;r.onload=function(){return e(r)},r.onerror=s,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(a))})},Si={get SUPPORT_RANGE_BOUNDS(){var a=oce(document);return Object.defineProperty(Si,"SUPPORT_RANGE_BOUNDS",{value:a}),a},get SUPPORT_WORD_BREAKING(){var a=Si.SUPPORT_RANGE_BOUNDS&&lce(document);return Object.defineProperty(Si,"SUPPORT_WORD_BREAKING",{value:a}),a},get SUPPORT_SVG_DRAWING(){var a=uce(document);return Object.defineProperty(Si,"SUPPORT_SVG_DRAWING",{value:a}),a},get SUPPORT_FOREIGNOBJECT_DRAWING(){var a=typeof Array.from=="function"&&typeof window.fetch=="function"?hce(document):Promise.resolve(!1);return Object.defineProperty(Si,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:a}),a},get SUPPORT_CORS_IMAGES(){var a=cce();return Object.defineProperty(Si,"SUPPORT_CORS_IMAGES",{value:a}),a},get SUPPORT_RESPONSE_TYPE(){var a=dce();return Object.defineProperty(Si,"SUPPORT_RESPONSE_TYPE",{value:a}),a},get SUPPORT_CORS_XHR(){var a="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Si,"SUPPORT_CORS_XHR",{value:a}),a},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var a=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Si,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:a}),a}},Ix=(function(){function a(e,s){this.text=e,this.bounds=s}return a})(),mce=function(a,e,s,r){var n=pce(e,s),i=[],o=0;return n.forEach(function(l){if(s.textDecorationLine.length||l.trim().length>0)if(Si.SUPPORT_RANGE_BOUNDS){var c=BD(r,o,l.length).getClientRects();if(c.length>1){var u=NC(l),m=0;u.forEach(function(g){i.push(new Ix(g,Bu.fromDOMRectList(a,BD(r,m+o,g.length).getClientRects()))),m+=g.length})}else i.push(new Ix(l,Bu.fromDOMRectList(a,c)))}else{var A=r.splitText(l.length);i.push(new Ix(l,Ace(a,r))),r=A}else Si.SUPPORT_RANGE_BOUNDS||(r=r.splitText(l.length));o+=l.length}),i},Ace=function(a,e){var s=e.ownerDocument;if(s){var r=s.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var n=e.parentNode;if(n){n.replaceChild(r,e);var i=t1(a,r);return r.firstChild&&n.replaceChild(r.firstChild,r),i}}return Bu.EMPTY},BD=function(a,e,s){var r=a.ownerDocument;if(!r)throw new Error("Node has no owner document");var n=r.createRange();return n.setStart(a,e),n.setEnd(a,e+s),n},NC=function(a){if(Si.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(a)).map(function(s){return s.segment})}return ice(a)},fce=function(a,e){if(Si.SUPPORT_NATIVE_TEXT_SEGMENTATION){var s=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(s.segment(a)).map(function(r){return r.segment})}return xce(a,e)},pce=function(a,e){return e.letterSpacing!==0?NC(a):fce(a,e)},gce=[32,160,4961,65792,65793,4153,4241],xce=function(a,e){for(var s=$ne(a,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],n,i=function(){if(n.value){var o=n.value.slice(),l=s1(o),c="";l.forEach(function(u){gce.indexOf(u)===-1?c+=kn(u):(c.length&&r.push(c),r.push(kn(u)),c="")}),c.length&&r.push(c)}};!(n=s.next()).done;)i();return r},bce=(function(){function a(e,s,r){this.text=yce(s.data,r.textTransform),this.textBounds=mce(e,this.text,r,s)}return a})(),yce=function(a,e){switch(e){case 1:return a.toLowerCase();case 3:return a.replace(vce,wce);case 2:return a.toUpperCase();default:return a}},vce=/(^|\s|:|-|\(|\))([a-z])/g,wce=function(a,e,s){return a.length>0?e+s.toUpperCase():a},EM=(function(a){Tc(e,a);function e(s,r){var n=a.call(this,s,r)||this;return n.src=r.currentSrc||r.src,n.intrinsicWidth=r.naturalWidth,n.intrinsicHeight=r.naturalHeight,n.context.cache.addImage(n.src),n}return e})(Ed),FM=(function(a){Tc(e,a);function e(s,r){var n=a.call(this,s,r)||this;return n.canvas=r,n.intrinsicWidth=r.width,n.intrinsicHeight=r.height,n}return e})(Ed),DM=(function(a){Tc(e,a);function e(s,r){var n=a.call(this,s,r)||this,i=new XMLSerializer,o=t1(s,r);return r.setAttribute("width",o.width+"px"),r.setAttribute("height",o.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(r)),n.intrinsicWidth=r.width.baseVal.value,n.intrinsicHeight=r.height.baseVal.value,n.context.cache.addImage(n.svg),n}return e})(Ed),TM=(function(a){Tc(e,a);function e(s,r){var n=a.call(this,s,r)||this;return n.value=r.value,n}return e})(Ed),Q_=(function(a){Tc(e,a);function e(s,r){var n=a.call(this,s,r)||this;return n.start=r.start,n.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,n}return e})(Ed),Nce=[{type:15,flags:0,unit:"px",number:3}],jce=[{type:16,flags:0,number:50}],_ce=function(a){return a.width>a.height?new Bu(a.left+(a.width-a.height)/2,a.top,a.height,a.height):a.width<a.height?new Bu(a.left,a.top+(a.height-a.width)/2,a.width,a.width):a},Cce=function(a){var e=a.type===kce?new Array(a.value.length+1).join(""):a.value;return e.length===0?a.placeholder||"":e},Wv="checkbox",Yv="radio",kce="password",SD=707406591,jC=(function(a){Tc(e,a);function e(s,r){var n=a.call(this,s,r)||this;switch(n.type=r.type.toLowerCase(),n.checked=r.checked,n.value=Cce(r),(n.type===Wv||n.type===Yv)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=_ce(n.bounds)),n.type){case Wv:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=Nce;break;case Yv:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=jce;break}return n}return e})(Ed),PM=(function(a){Tc(e,a);function e(s,r){var n=a.call(this,s,r)||this,i=r.options[r.selectedIndex||0];return n.value=i&&i.text||"",n}return e})(Ed),IM=(function(a){Tc(e,a);function e(s,r){var n=a.call(this,s,r)||this;return n.value=r.value,n}return e})(Ed),LM=(function(a){Tc(e,a);function e(s,r){var n=a.call(this,s,r)||this;n.src=r.src,n.width=parseInt(r.width,10)||0,n.height=parseInt(r.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){n.tree=RM(s,r.contentWindow.document.documentElement);var i=r.contentWindow.document.documentElement?Tx(s,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):ju.TRANSPARENT,o=r.contentWindow.document.body?Tx(s,getComputedStyle(r.contentWindow.document.body).backgroundColor):ju.TRANSPARENT;n.backgroundColor=Hh(i)?Hh(o)?n.styles.backgroundColor:o:i}}catch{}return n}return e})(Ed),Bce=["OL","UL","MENU"],nv=function(a,e,s,r){for(var n=e.firstChild,i=void 0;n;n=i)if(i=n.nextSibling,OM(n)&&n.data.trim().length>0)s.textNodes.push(new bce(a,n,s.styles));else if(Wf(n))if(VM(n)&&n.assignedNodes)n.assignedNodes().forEach(function(l){return nv(a,l,s,r)});else{var o=MM(a,n);o.styles.isVisible()&&(Sce(n,o,r)?o.flags|=4:Ece(o.styles)&&(o.flags|=2),Bce.indexOf(n.tagName)!==-1&&(o.flags|=8),s.elements.push(o),n.slot,n.shadowRoot?nv(a,n.shadowRoot,o,r):!Kv(n)&&!UM(n)&&!Xv(n)&&nv(a,n,o,r))}},MM=function(a,e){return V_(e)?new EM(a,e):QM(e)?new FM(a,e):UM(e)?new DM(a,e):Fce(e)?new TM(a,e):Dce(e)?new Q_(a,e):Tce(e)?new jC(a,e):Xv(e)?new PM(a,e):Kv(e)?new IM(a,e):HM(e)?new LM(a,e):new Ed(a,e)},RM=function(a,e){var s=MM(a,e);return s.flags|=4,nv(a,e,s,s),s},Sce=function(a,e,s){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||_C(a)&&s.styles.isTransparent()},Ece=function(a){return a.isPositioned()||a.isFloating()},OM=function(a){return a.nodeType===Node.TEXT_NODE},Wf=function(a){return a.nodeType===Node.ELEMENT_NODE},H_=function(a){return Wf(a)&&typeof a.style<"u"&&!iv(a)},iv=function(a){return typeof a.className=="object"},Fce=function(a){return a.tagName==="LI"},Dce=function(a){return a.tagName==="OL"},Tce=function(a){return a.tagName==="INPUT"},Pce=function(a){return a.tagName==="HTML"},UM=function(a){return a.tagName==="svg"},_C=function(a){return a.tagName==="BODY"},QM=function(a){return a.tagName==="CANVAS"},ED=function(a){return a.tagName==="VIDEO"},V_=function(a){return a.tagName==="IMG"},HM=function(a){return a.tagName==="IFRAME"},FD=function(a){return a.tagName==="STYLE"},Ice=function(a){return a.tagName==="SCRIPT"},Kv=function(a){return a.tagName==="TEXTAREA"},Xv=function(a){return a.tagName==="SELECT"},VM=function(a){return a.tagName==="SLOT"},DD=function(a){return a.tagName.indexOf("-")>0},Lce=(function(){function a(){this.counters={}}return a.prototype.getCounterValue=function(e){var s=this.counters[e];return s&&s.length?s[s.length-1]:1},a.prototype.getCounterValues=function(e){var s=this.counters[e];return s||[]},a.prototype.pop=function(e){var s=this;e.forEach(function(r){return s.counters[r].pop()})},a.prototype.parse=function(e){var s=this,r=e.counterIncrement,n=e.counterReset,i=!0;r!==null&&r.forEach(function(l){var c=s.counters[l.counter];c&&l.increment!==0&&(i=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return i&&n.forEach(function(l){var c=s.counters[l.counter];o.push(l.counter),c||(c=s.counters[l.counter]=[]),c.push(l.reset)}),o},a})(),TD={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},PD={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Mce={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Rce={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Bf=function(a,e,s,r,n,i){return a<e||a>s?n0(a,n,i.length>0):r.integers.reduce(function(o,l,c){for(;a>=l;)a-=l,o+=r.values[c];return o},"")+i},zM=function(a,e,s,r){var n="";do s||a--,n=r(a)+n,a/=e;while(a*e>=e);return n},_n=function(a,e,s,r,n){var i=s-e+1;return(a<0?"-":"")+(zM(Math.abs(a),i,r,function(o){return kn(Math.floor(o%i)+e)})+n)},Em=function(a,e,s){s===void 0&&(s=". ");var r=e.length;return zM(Math.abs(a),r,!1,function(n){return e[Math.floor(n%r)]})+s},Qf=1,yh=2,vh=4,Nx=8,ou=function(a,e,s,r,n,i){if(a<-9999||a>9999)return n0(a,4,n.length>0);var o=Math.abs(a),l=n;if(o===0)return e[0]+l;for(var c=0;o>0&&c<=4;c++){var u=o%10;u===0&&ni(i,Qf)&&l!==""?l=e[u]+l:u>1||u===1&&c===0||u===1&&c===1&&ni(i,yh)||u===1&&c===1&&ni(i,vh)&&a>100||u===1&&c>1&&ni(i,Nx)?l=e[u]+(c>0?s[c-1]:"")+l:u===1&&c>0&&(l=s[c-1]+l),o=Math.floor(o/10)}return(a<0?r:"")+l},ID="",LD="",MD="",xj="",n0=function(a,e,s){var r=s?". ":"",n=s?"":"",i=s?", ":"",o=s?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=_n(a,48,57,!0,r);return l.length<4?"0"+l:l;case 4:return Em(a,"",n);case 6:return Bf(a,1,3999,TD,3,r).toLowerCase();case 7:return Bf(a,1,3999,TD,3,r);case 8:return _n(a,945,969,!1,r);case 9:return _n(a,97,122,!1,r);case 10:return _n(a,65,90,!1,r);case 11:return _n(a,1632,1641,!0,r);case 12:case 49:return Bf(a,1,9999,PD,3,r);case 35:return Bf(a,1,9999,PD,3,r).toLowerCase();case 13:return _n(a,2534,2543,!0,r);case 14:case 30:return _n(a,6112,6121,!0,r);case 15:return Em(a,"",n);case 16:return Em(a,"",n);case 17:case 48:return ou(a,"",ID,"",n,yh|vh|Nx);case 47:return ou(a,"",LD,"",n,Qf|yh|vh|Nx);case 42:return ou(a,"",ID,"",n,yh|vh|Nx);case 41:return ou(a,"",LD,"",n,Qf|yh|vh|Nx);case 26:return ou(a,"","",MD,n,0);case 25:return ou(a,"","",MD,n,Qf|yh|vh);case 31:return ou(a,"","",xj,i,Qf|yh|vh);case 33:return ou(a,"","",xj,i,0);case 32:return ou(a,"","",xj,i,Qf|yh|vh);case 18:return _n(a,2406,2415,!0,r);case 20:return Bf(a,1,19999,Rce,3,r);case 21:return _n(a,2790,2799,!0,r);case 22:return _n(a,2662,2671,!0,r);case 22:return Bf(a,1,10999,Mce,3,r);case 23:return Em(a,"");case 24:return Em(a,"");case 27:return _n(a,3302,3311,!0,r);case 28:return Em(a,"",n);case 29:return Em(a,"",n);case 34:return _n(a,3792,3801,!0,r);case 37:return _n(a,6160,6169,!0,r);case 38:return _n(a,4160,4169,!0,r);case 39:return _n(a,2918,2927,!0,r);case 40:return _n(a,1776,1785,!0,r);case 43:return _n(a,3046,3055,!0,r);case 44:return _n(a,3174,3183,!0,r);case 45:return _n(a,3664,3673,!0,r);case 46:return _n(a,3872,3881,!0,r);default:return _n(a,48,57,!0,r)}},$M="data-html2canvas-ignore",RD=(function(){function a(e,s,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=s,this.counters=new Lce,this.quoteDepth=0,!s.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(s.ownerDocument.documentElement,!1)}return a.prototype.toIFrame=function(e,s){var r=this,n=Oce(e,s);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=n.contentWindow,c=l.document,u=Hce(n).then(function(){return ro(r,void 0,void 0,function(){var m,A;return Vi(this,function(g){switch(g.label){case 0:return this.scrolledElements.forEach(qce),l&&(l.scrollTo(s.left,s.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==s.top||l.scrollX!==s.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-s.left,l.scrollY-s.top,0,0))),m=this.options.onclone,A=this.clonedReferenceElement,typeof A>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:g.sent(),g.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Qce(c)]:[3,4];case 3:g.sent(),g.label=4;case 4:return typeof m=="function"?[2,Promise.resolve().then(function(){return m(c,A)}).then(function(){return n})]:[2,n]}})})});return c.open(),c.write(zce(document.doctype)+"<html></html>"),$ce(this.referenceElement.ownerDocument,i,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},a.prototype.createElementClone=function(e){if(O_(e,2))debugger;if(QM(e))return this.createCanvasClone(e);if(ED(e))return this.createVideoClone(e);if(FD(e))return this.createStyleClone(e);var s=e.cloneNode(!1);return V_(s)&&(V_(e)&&e.currentSrc&&e.currentSrc!==e.src&&(s.src=e.currentSrc,s.srcset=""),s.loading==="lazy"&&(s.loading="eager")),DD(s)?this.createCustomElementClone(s):s},a.prototype.createCustomElementClone=function(e){var s=document.createElement("html2canvascustomelement");return bj(e.style,s),s},a.prototype.createStyleClone=function(e){try{var s=e.sheet;if(s&&s.cssRules){var r=[].slice.call(s.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),n=e.cloneNode(!1);return n.textContent=r,n}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},a.prototype.createCanvasClone=function(e){var s;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var i=e.getContext("2d"),o=n.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var l=(s=e.getContext("webgl2"))!==null&&s!==void 0?s:e.getContext("webgl");if(l){var c=l.getContextAttributes();c?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return n},a.prototype.createVideoClone=function(e){var s=e.ownerDocument.createElement("canvas");s.width=e.offsetWidth,s.height=e.offsetHeight;var r=s.getContext("2d");try{return r&&(r.drawImage(e,0,0,s.width,s.height),this.options.allowTaint||r.getImageData(0,0,s.width,s.height)),s}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var n=e.ownerDocument.createElement("canvas");return n.width=e.offsetWidth,n.height=e.offsetHeight,n},a.prototype.appendChildNode=function(e,s,r){(!Wf(s)||!Ice(s)&&!s.hasAttribute($M)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(s)))&&(!this.options.copyStyles||!Wf(s)||!FD(s))&&e.appendChild(this.cloneNode(s,r))},a.prototype.cloneChildNodes=function(e,s,r){for(var n=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(Wf(i)&&VM(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(l){return n.appendChildNode(s,l,r)})}else this.appendChildNode(s,i,r)},a.prototype.cloneNode=function(e,s){if(OM(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Wf(e)&&(H_(e)||iv(e))){var n=this.createElementClone(e);n.style.transitionProperty="none";var i=r.getComputedStyle(e),o=r.getComputedStyle(e,":before"),l=r.getComputedStyle(e,":after");this.referenceElement===e&&H_(n)&&(this.clonedReferenceElement=n),_C(n)&&Yce(n);var c=this.counters.parse(new fD(this.context,i)),u=this.resolvePseudoContent(e,n,o,Lx.BEFORE);DD(e)&&(s=!0),ED(e)||this.cloneChildNodes(e,n,s),u&&n.insertBefore(u,n.firstChild);var m=this.resolvePseudoContent(e,n,l,Lx.AFTER);return m&&n.appendChild(m),this.counters.pop(c),(i&&(this.options.copyStyles||iv(e))&&!HM(e)||s)&&bj(i,n),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([n,e.scrollLeft,e.scrollTop]),(Kv(e)||Xv(e))&&(Kv(n)||Xv(n))&&(n.value=e.value),n}return e.cloneNode(!1)},a.prototype.resolvePseudoContent=function(e,s,r,n){var i=this;if(r){var o=r.content,l=s.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||r.display==="none")){this.counters.parse(new fD(this.context,r));var c=new Fle(this.context,r),u=l.createElement("html2canvaspseudoelement");bj(r,u),c.content.forEach(function(A){if(A.type===0)u.appendChild(l.createTextNode(A.value));else if(A.type===22){var g=l.createElement("img");g.src=A.value,g.style.opacity="1",u.appendChild(g)}else if(A.type===18){if(A.name==="attr"){var p=A.values.filter(wa);p.length&&u.appendChild(l.createTextNode(e.getAttribute(p[0].value)||""))}else if(A.name==="counter"){var v=A.values.filter(kp),b=v[0],y=v[1];if(b&&wa(b)){var w=i.counters.getCounterValue(b.value),B=y&&wa(y)?R_.parse(i.context,y.value):3;u.appendChild(l.createTextNode(n0(w,B,!1)))}}else if(A.name==="counters"){var j=A.values.filter(kp),b=j[0],E=j[1],y=j[2];if(b&&wa(b)){var S=i.counters.getCounterValues(b.value),T=y&&wa(y)?R_.parse(i.context,y.value):3,M=E&&E.type===0?E.value:"",D=S.map(function(Q){return n0(Q,T,!1)}).join(M);u.appendChild(l.createTextNode(D))}}}else if(A.type===20)switch(A.value){case"open-quote":u.appendChild(l.createTextNode(AD(c.quotes,i.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(AD(c.quotes,--i.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(A.value))}}),u.className=z_+" "+$_;var m=n===Lx.BEFORE?" "+z_:" "+$_;return iv(s)?s.className.baseValue+=m:s.className+=m,u}}},a.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},a})(),Lx;(function(a){a[a.BEFORE=0]="BEFORE",a[a.AFTER=1]="AFTER"})(Lx||(Lx={}));var Oce=function(a,e){var s=a.createElement("iframe");return s.className="html2canvas-container",s.style.visibility="hidden",s.style.position="fixed",s.style.left="-10000px",s.style.top="0px",s.style.border="0",s.width=e.width.toString(),s.height=e.height.toString(),s.scrolling="no",s.setAttribute($M,"true"),a.body.appendChild(s),s},Uce=function(a){return new Promise(function(e){if(a.complete){e();return}if(!a.src){e();return}a.onload=e,a.onerror=e})},Qce=function(a){return Promise.all([].slice.call(a.images,0).map(Uce))},Hce=function(a){return new Promise(function(e,s){var r=a.contentWindow;if(!r)return s("No window assigned for iframe");var n=r.document;r.onload=a.onload=function(){r.onload=a.onload=null;var i=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(i),e(a))},50)}})},Vce=["all","d","content"],bj=function(a,e){for(var s=a.length-1;s>=0;s--){var r=a.item(s);Vce.indexOf(r)===-1&&e.style.setProperty(r,a.getPropertyValue(r))}return e},zce=function(a){var e="";return a&&(e+="<!DOCTYPE ",a.name&&(e+=a.name),a.internalSubset&&(e+=a.internalSubset),a.publicId&&(e+='"'+a.publicId+'"'),a.systemId&&(e+='"'+a.systemId+'"'),e+=">"),e},$ce=function(a,e,s){a&&a.defaultView&&(e!==a.defaultView.pageXOffset||s!==a.defaultView.pageYOffset)&&a.defaultView.scrollTo(e,s)},qce=function(a){var e=a[0],s=a[1],r=a[2];e.scrollLeft=s,e.scrollTop=r},Gce=":before",Wce=":after",z_="___html2canvas___pseudoelement_before",$_="___html2canvas___pseudoelement_after",OD=`{
    content: "" !important;
    display: none !important;
}`,Yce=function(a){Kce(a,"."+z_+Gce+OD+`
         .`+$_+Wce+OD)},Kce=function(a,e){var s=a.ownerDocument;if(s){var r=s.createElement("style");r.textContent=e,a.appendChild(r)}},qM=(function(){function a(){}return a.getOrigin=function(e){var s=a._link;return s?(s.href=e,s.href=s.href,s.protocol+s.hostname+s.port):"about:blank"},a.isSameOrigin=function(e){return a.getOrigin(e)===a._origin},a.setContext=function(e){a._link=e.document.createElement("a"),a._origin=a.getOrigin(e.location.href)},a._origin="about:blank",a})(),Xce=(function(){function a(e,s){this.context=e,this._options=s,this._cache={}}return a.prototype.addImage=function(e){var s=Promise.resolve();return this.has(e)||(vj(e)||tde(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),s},a.prototype.match=function(e){return this._cache[e]},a.prototype.loadImage=function(e){return ro(this,void 0,void 0,function(){var s,r,n,i,o=this;return Vi(this,function(l){switch(l.label){case 0:return s=qM.isSameOrigin(e),r=!yj(e)&&this._options.useCORS===!0&&Si.SUPPORT_CORS_IMAGES&&!s,n=!yj(e)&&!s&&!vj(e)&&typeof this._options.proxy=="string"&&Si.SUPPORT_CORS_XHR&&!r,!s&&this._options.allowTaint===!1&&!yj(e)&&!vj(e)&&!n&&!r?[2]:(i=e,n?[4,this.proxy(i)]:[3,2]);case 1:i=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,u){var m=new Image;m.onload=function(){return c(m)},m.onerror=u,(sde(i)||r)&&(m.crossOrigin="anonymous"),m.src=i,m.complete===!0&&setTimeout(function(){return c(m)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},a.prototype.has=function(e){return typeof this._cache[e]<"u"},a.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},a.prototype.proxy=function(e){var s=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var n=e.substring(0,256);return new Promise(function(i,o){var l=Si.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")i(c.response);else{var A=new FileReader;A.addEventListener("load",function(){return i(A.result)},!1),A.addEventListener("error",function(g){return o(g)},!1),A.readAsDataURL(c.response)}else o("Failed to proxy resource "+n+" with status code "+c.status)},c.onerror=o;var u=r.indexOf("?")>-1?"&":"?";if(c.open("GET",""+r+u+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),s._options.imageTimeout){var m=s._options.imageTimeout;c.timeout=m,c.ontimeout=function(){return o("Timed out ("+m+"ms) proxying "+n)}}c.send()})},a})(),Jce=/^data:image\/svg\+xml/i,Zce=/^data:image\/.*;base64,/i,ede=/^data:image\/.*/i,tde=function(a){return Si.SUPPORT_SVG_DRAWING||!rde(a)},yj=function(a){return ede.test(a)},sde=function(a){return Zce.test(a)},vj=function(a){return a.substr(0,4)==="blob"},rde=function(a){return a.substr(-3).toLowerCase()==="svg"||Jce.test(a)},js=(function(){function a(e,s){this.type=0,this.x=e,this.y=s}return a.prototype.add=function(e,s){return new a(this.x+e,this.y+s)},a})(),Sf=function(a,e,s){return new js(a.x+(e.x-a.x)*s,a.y+(e.y-a.y)*s)},Fy=(function(){function a(e,s,r,n){this.type=1,this.start=e,this.startControl=s,this.endControl=r,this.end=n}return a.prototype.subdivide=function(e,s){var r=Sf(this.start,this.startControl,e),n=Sf(this.startControl,this.endControl,e),i=Sf(this.endControl,this.end,e),o=Sf(r,n,e),l=Sf(n,i,e),c=Sf(o,l,e);return s?new a(this.start,r,o,c):new a(c,l,i,this.end)},a.prototype.add=function(e,s){return new a(this.start.add(e,s),this.startControl.add(e,s),this.endControl.add(e,s),this.end.add(e,s))},a.prototype.reverse=function(){return new a(this.end,this.endControl,this.startControl,this.start)},a})(),Ml=function(a){return a.type===1},ade=(function(){function a(e){var s=e.styles,r=e.bounds,n=vx(s.borderTopLeftRadius,r.width,r.height),i=n[0],o=n[1],l=vx(s.borderTopRightRadius,r.width,r.height),c=l[0],u=l[1],m=vx(s.borderBottomRightRadius,r.width,r.height),A=m[0],g=m[1],p=vx(s.borderBottomLeftRadius,r.width,r.height),v=p[0],b=p[1],y=[];y.push((i+c)/r.width),y.push((v+A)/r.width),y.push((o+b)/r.height),y.push((u+g)/r.height);var w=Math.max.apply(Math,y);w>1&&(i/=w,o/=w,c/=w,u/=w,A/=w,g/=w,v/=w,b/=w);var B=r.width-c,j=r.height-g,E=r.width-A,S=r.height-b,T=s.borderTopWidth,M=s.borderRightWidth,D=s.borderBottomWidth,P=s.borderLeftWidth,Y=Sa(s.paddingTop,e.bounds.width),Q=Sa(s.paddingRight,e.bounds.width),L=Sa(s.paddingBottom,e.bounds.width),ae=Sa(s.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?qa(r.left+P/3,r.top+T/3,i-P/3,o-T/3,na.TOP_LEFT):new js(r.left+P/3,r.top+T/3),this.topRightBorderDoubleOuterBox=i>0||o>0?qa(r.left+B,r.top+T/3,c-M/3,u-T/3,na.TOP_RIGHT):new js(r.left+r.width-M/3,r.top+T/3),this.bottomRightBorderDoubleOuterBox=A>0||g>0?qa(r.left+E,r.top+j,A-M/3,g-D/3,na.BOTTOM_RIGHT):new js(r.left+r.width-M/3,r.top+r.height-D/3),this.bottomLeftBorderDoubleOuterBox=v>0||b>0?qa(r.left+P/3,r.top+S,v-P/3,b-D/3,na.BOTTOM_LEFT):new js(r.left+P/3,r.top+r.height-D/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?qa(r.left+P*2/3,r.top+T*2/3,i-P*2/3,o-T*2/3,na.TOP_LEFT):new js(r.left+P*2/3,r.top+T*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?qa(r.left+B,r.top+T*2/3,c-M*2/3,u-T*2/3,na.TOP_RIGHT):new js(r.left+r.width-M*2/3,r.top+T*2/3),this.bottomRightBorderDoubleInnerBox=A>0||g>0?qa(r.left+E,r.top+j,A-M*2/3,g-D*2/3,na.BOTTOM_RIGHT):new js(r.left+r.width-M*2/3,r.top+r.height-D*2/3),this.bottomLeftBorderDoubleInnerBox=v>0||b>0?qa(r.left+P*2/3,r.top+S,v-P*2/3,b-D*2/3,na.BOTTOM_LEFT):new js(r.left+P*2/3,r.top+r.height-D*2/3),this.topLeftBorderStroke=i>0||o>0?qa(r.left+P/2,r.top+T/2,i-P/2,o-T/2,na.TOP_LEFT):new js(r.left+P/2,r.top+T/2),this.topRightBorderStroke=i>0||o>0?qa(r.left+B,r.top+T/2,c-M/2,u-T/2,na.TOP_RIGHT):new js(r.left+r.width-M/2,r.top+T/2),this.bottomRightBorderStroke=A>0||g>0?qa(r.left+E,r.top+j,A-M/2,g-D/2,na.BOTTOM_RIGHT):new js(r.left+r.width-M/2,r.top+r.height-D/2),this.bottomLeftBorderStroke=v>0||b>0?qa(r.left+P/2,r.top+S,v-P/2,b-D/2,na.BOTTOM_LEFT):new js(r.left+P/2,r.top+r.height-D/2),this.topLeftBorderBox=i>0||o>0?qa(r.left,r.top,i,o,na.TOP_LEFT):new js(r.left,r.top),this.topRightBorderBox=c>0||u>0?qa(r.left+B,r.top,c,u,na.TOP_RIGHT):new js(r.left+r.width,r.top),this.bottomRightBorderBox=A>0||g>0?qa(r.left+E,r.top+j,A,g,na.BOTTOM_RIGHT):new js(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=v>0||b>0?qa(r.left,r.top+S,v,b,na.BOTTOM_LEFT):new js(r.left,r.top+r.height),this.topLeftPaddingBox=i>0||o>0?qa(r.left+P,r.top+T,Math.max(0,i-P),Math.max(0,o-T),na.TOP_LEFT):new js(r.left+P,r.top+T),this.topRightPaddingBox=c>0||u>0?qa(r.left+Math.min(B,r.width-M),r.top+T,B>r.width+M?0:Math.max(0,c-M),Math.max(0,u-T),na.TOP_RIGHT):new js(r.left+r.width-M,r.top+T),this.bottomRightPaddingBox=A>0||g>0?qa(r.left+Math.min(E,r.width-P),r.top+Math.min(j,r.height-D),Math.max(0,A-M),Math.max(0,g-D),na.BOTTOM_RIGHT):new js(r.left+r.width-M,r.top+r.height-D),this.bottomLeftPaddingBox=v>0||b>0?qa(r.left+P,r.top+Math.min(S,r.height-D),Math.max(0,v-P),Math.max(0,b-D),na.BOTTOM_LEFT):new js(r.left+P,r.top+r.height-D),this.topLeftContentBox=i>0||o>0?qa(r.left+P+ae,r.top+T+Y,Math.max(0,i-(P+ae)),Math.max(0,o-(T+Y)),na.TOP_LEFT):new js(r.left+P+ae,r.top+T+Y),this.topRightContentBox=c>0||u>0?qa(r.left+Math.min(B,r.width+P+ae),r.top+T+Y,B>r.width+P+ae?0:c-P+ae,u-(T+Y),na.TOP_RIGHT):new js(r.left+r.width-(M+Q),r.top+T+Y),this.bottomRightContentBox=A>0||g>0?qa(r.left+Math.min(E,r.width-(P+ae)),r.top+Math.min(j,r.height+T+Y),Math.max(0,A-(M+Q)),g-(D+L),na.BOTTOM_RIGHT):new js(r.left+r.width-(M+Q),r.top+r.height-(D+L)),this.bottomLeftContentBox=v>0||b>0?qa(r.left+P+ae,r.top+S,Math.max(0,v-(P+ae)),b-(D+L),na.BOTTOM_LEFT):new js(r.left+P+ae,r.top+r.height-(D+L))}return a})(),na;(function(a){a[a.TOP_LEFT=0]="TOP_LEFT",a[a.TOP_RIGHT=1]="TOP_RIGHT",a[a.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",a[a.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(na||(na={}));var qa=function(a,e,s,r,n){var i=4*((Math.sqrt(2)-1)/3),o=s*i,l=r*i,c=a+s,u=e+r;switch(n){case na.TOP_LEFT:return new Fy(new js(a,u),new js(a,u-l),new js(c-o,e),new js(c,e));case na.TOP_RIGHT:return new Fy(new js(a,e),new js(a+o,e),new js(c,u-l),new js(c,u));case na.BOTTOM_RIGHT:return new Fy(new js(c,e),new js(c,e+l),new js(a+o,u),new js(a,u));case na.BOTTOM_LEFT:default:return new Fy(new js(c,u),new js(c-o,u),new js(a,e+l),new js(a,e))}},Jv=function(a){return[a.topLeftBorderBox,a.topRightBorderBox,a.bottomRightBorderBox,a.bottomLeftBorderBox]},nde=function(a){return[a.topLeftContentBox,a.topRightContentBox,a.bottomRightContentBox,a.bottomLeftContentBox]},Zv=function(a){return[a.topLeftPaddingBox,a.topRightPaddingBox,a.bottomRightPaddingBox,a.bottomLeftPaddingBox]},ide=(function(){function a(e,s,r){this.offsetX=e,this.offsetY=s,this.matrix=r,this.type=0,this.target=6}return a})(),Dy=(function(){function a(e,s){this.path=e,this.target=s,this.type=1}return a})(),ode=(function(){function a(e){this.opacity=e,this.type=2,this.target=6}return a})(),lde=function(a){return a.type===0},GM=function(a){return a.type===1},cde=function(a){return a.type===2},UD=function(a,e){return a.length===e.length?a.some(function(s,r){return s===e[r]}):!1},dde=function(a,e,s,r,n){return a.map(function(i,o){switch(o){case 0:return i.add(e,s);case 1:return i.add(e+r,s);case 2:return i.add(e+r,s+n);case 3:return i.add(e,s+n)}return i})},WM=(function(){function a(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return a})(),YM=(function(){function a(e,s){if(this.container=e,this.parent=s,this.effects=[],this.curves=new ade(this.container),this.container.styles.opacity<1&&this.effects.push(new ode(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new ide(r,n,i))}if(this.container.styles.overflowX!==0){var o=Jv(this.curves),l=Zv(this.curves);UD(o,l)?this.effects.push(new Dy(o,6)):(this.effects.push(new Dy(o,2)),this.effects.push(new Dy(l,4)))}}return a.prototype.getEffects=function(e){for(var s=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,n=this.effects.slice(0);r;){var i=r.effects.filter(function(c){return!GM(c)});if(s||r.container.styles.position!==0||!r.parent){if(n.unshift.apply(n,i),s=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var o=Jv(r.curves),l=Zv(r.curves);UD(o,l)||n.unshift(new Dy(l,6))}}else n.unshift.apply(n,i);r=r.parent}return n.filter(function(c){return ni(c.target,e)})},a})(),q_=function(a,e,s,r){a.container.elements.forEach(function(n){var i=ni(n.flags,4),o=ni(n.flags,2),l=new YM(n,a);ni(n.styles.display,2048)&&r.push(l);var c=ni(n.flags,8)?[]:r;if(i||o){var u=i||n.styles.isPositioned()?s:e,m=new WM(l);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var A=n.styles.zIndex.order;if(A<0){var g=0;u.negativeZIndex.some(function(v,b){return A>v.element.container.styles.zIndex.order?(g=b,!1):g>0}),u.negativeZIndex.splice(g,0,m)}else if(A>0){var p=0;u.positiveZIndex.some(function(v,b){return A>=v.element.container.styles.zIndex.order?(p=b+1,!1):p>0}),u.positiveZIndex.splice(p,0,m)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(m)}else n.styles.isFloating()?u.nonPositionedFloats.push(m):u.nonPositionedInlineLevel.push(m);q_(l,m,i?m:s,c)}else n.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),q_(l,e,s,c);ni(n.flags,8)&&KM(n,c)})},KM=function(a,e){for(var s=a instanceof Q_?a.start:1,r=a instanceof Q_?a.reversed:!1,n=0;n<e.length;n++){var i=e[n];i.container instanceof TM&&typeof i.container.value=="number"&&i.container.value!==0&&(s=i.container.value),i.listValue=n0(s,i.container.styles.listStyleType,!0),s+=r?-1:1}},ude=function(a){var e=new YM(a,null),s=new WM(e),r=[];return q_(e,s,s,r),KM(e.container,r),s},QD=function(a,e){switch(e){case 0:return Ul(a.topLeftBorderBox,a.topLeftPaddingBox,a.topRightBorderBox,a.topRightPaddingBox);case 1:return Ul(a.topRightBorderBox,a.topRightPaddingBox,a.bottomRightBorderBox,a.bottomRightPaddingBox);case 2:return Ul(a.bottomRightBorderBox,a.bottomRightPaddingBox,a.bottomLeftBorderBox,a.bottomLeftPaddingBox);default:return Ul(a.bottomLeftBorderBox,a.bottomLeftPaddingBox,a.topLeftBorderBox,a.topLeftPaddingBox)}},hde=function(a,e){switch(e){case 0:return Ul(a.topLeftBorderBox,a.topLeftBorderDoubleOuterBox,a.topRightBorderBox,a.topRightBorderDoubleOuterBox);case 1:return Ul(a.topRightBorderBox,a.topRightBorderDoubleOuterBox,a.bottomRightBorderBox,a.bottomRightBorderDoubleOuterBox);case 2:return Ul(a.bottomRightBorderBox,a.bottomRightBorderDoubleOuterBox,a.bottomLeftBorderBox,a.bottomLeftBorderDoubleOuterBox);default:return Ul(a.bottomLeftBorderBox,a.bottomLeftBorderDoubleOuterBox,a.topLeftBorderBox,a.topLeftBorderDoubleOuterBox)}},mde=function(a,e){switch(e){case 0:return Ul(a.topLeftBorderDoubleInnerBox,a.topLeftPaddingBox,a.topRightBorderDoubleInnerBox,a.topRightPaddingBox);case 1:return Ul(a.topRightBorderDoubleInnerBox,a.topRightPaddingBox,a.bottomRightBorderDoubleInnerBox,a.bottomRightPaddingBox);case 2:return Ul(a.bottomRightBorderDoubleInnerBox,a.bottomRightPaddingBox,a.bottomLeftBorderDoubleInnerBox,a.bottomLeftPaddingBox);default:return Ul(a.bottomLeftBorderDoubleInnerBox,a.bottomLeftPaddingBox,a.topLeftBorderDoubleInnerBox,a.topLeftPaddingBox)}},Ade=function(a,e){switch(e){case 0:return Ty(a.topLeftBorderStroke,a.topRightBorderStroke);case 1:return Ty(a.topRightBorderStroke,a.bottomRightBorderStroke);case 2:return Ty(a.bottomRightBorderStroke,a.bottomLeftBorderStroke);default:return Ty(a.bottomLeftBorderStroke,a.topLeftBorderStroke)}},Ty=function(a,e){var s=[];return Ml(a)?s.push(a.subdivide(.5,!1)):s.push(a),Ml(e)?s.push(e.subdivide(.5,!0)):s.push(e),s},Ul=function(a,e,s,r){var n=[];return Ml(a)?n.push(a.subdivide(.5,!1)):n.push(a),Ml(s)?n.push(s.subdivide(.5,!0)):n.push(s),Ml(r)?n.push(r.subdivide(.5,!0).reverse()):n.push(r),Ml(e)?n.push(e.subdivide(.5,!1).reverse()):n.push(e),n},XM=function(a){var e=a.bounds,s=a.styles;return e.add(s.borderLeftWidth,s.borderTopWidth,-(s.borderRightWidth+s.borderLeftWidth),-(s.borderTopWidth+s.borderBottomWidth))},ew=function(a){var e=a.styles,s=a.bounds,r=Sa(e.paddingLeft,s.width),n=Sa(e.paddingRight,s.width),i=Sa(e.paddingTop,s.width),o=Sa(e.paddingBottom,s.width);return s.add(r+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+n),-(e.borderTopWidth+e.borderBottomWidth+i+o))},fde=function(a,e){return a===0?e.bounds:a===2?ew(e):XM(e)},pde=function(a,e){return a===0?e.bounds:a===2?ew(e):XM(e)},wj=function(a,e,s){var r=fde(Hf(a.styles.backgroundOrigin,e),a),n=pde(Hf(a.styles.backgroundClip,e),a),i=gde(Hf(a.styles.backgroundSize,e),s,r),o=i[0],l=i[1],c=vx(Hf(a.styles.backgroundPosition,e),r.width-o,r.height-l),u=xde(Hf(a.styles.backgroundRepeat,e),c,i,r,n),m=Math.round(r.left+c[0]),A=Math.round(r.top+c[1]);return[u,m,A,o,l]},Ef=function(a){return wa(a)&&a.value===dp.AUTO},Py=function(a){return typeof a=="number"},gde=function(a,e,s){var r=e[0],n=e[1],i=e[2],o=a[0],l=a[1];if(!o)return[0,0];if(qn(o)&&l&&qn(l))return[Sa(o,s.width),Sa(l,s.height)];var c=Py(i);if(wa(o)&&(o.value===dp.CONTAIN||o.value===dp.COVER)){if(Py(i)){var u=s.width/s.height;return u<i!=(o.value===dp.COVER)?[s.width,s.width/i]:[s.height*i,s.height]}return[s.width,s.height]}var m=Py(r),A=Py(n),g=m||A;if(Ef(o)&&(!l||Ef(l))){if(m&&A)return[r,n];if(!c&&!g)return[s.width,s.height];if(g&&c){var p=m?r:n*i,v=A?n:r/i;return[p,v]}var b=m?r:s.width,y=A?n:s.height;return[b,y]}if(c){var w=0,B=0;return qn(o)?w=Sa(o,s.width):qn(l)&&(B=Sa(l,s.height)),Ef(o)?w=B*i:(!l||Ef(l))&&(B=w/i),[w,B]}var j=null,E=null;if(qn(o)?j=Sa(o,s.width):l&&qn(l)&&(E=Sa(l,s.height)),j!==null&&(!l||Ef(l))&&(E=m&&A?j/r*n:s.height),E!==null&&Ef(o)&&(j=m&&A?E/n*r:s.width),j!==null&&E!==null)return[j,E];throw new Error("Unable to calculate background-size for element")},Hf=function(a,e){var s=a[e];return typeof s>"u"?a[0]:s},xde=function(a,e,s,r,n){var i=e[0],o=e[1],l=s[0],c=s[1];switch(a){case 2:return[new js(Math.round(r.left),Math.round(r.top+o)),new js(Math.round(r.left+r.width),Math.round(r.top+o)),new js(Math.round(r.left+r.width),Math.round(c+r.top+o)),new js(Math.round(r.left),Math.round(c+r.top+o))];case 3:return[new js(Math.round(r.left+i),Math.round(r.top)),new js(Math.round(r.left+i+l),Math.round(r.top)),new js(Math.round(r.left+i+l),Math.round(r.height+r.top)),new js(Math.round(r.left+i),Math.round(r.height+r.top))];case 1:return[new js(Math.round(r.left+i),Math.round(r.top+o)),new js(Math.round(r.left+i+l),Math.round(r.top+o)),new js(Math.round(r.left+i+l),Math.round(r.top+o+c)),new js(Math.round(r.left+i),Math.round(r.top+o+c))];default:return[new js(Math.round(n.left),Math.round(n.top)),new js(Math.round(n.left+n.width),Math.round(n.top)),new js(Math.round(n.left+n.width),Math.round(n.height+n.top)),new js(Math.round(n.left),Math.round(n.height+n.top))]}},bde="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",HD="Hidden Text",yde=(function(){function a(e){this._data={},this._document=e}return a.prototype.parseMetrics=function(e,s){var r=this._document.createElement("div"),n=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=s,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",o.appendChild(r),n.src=bde,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=s,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(HD)),r.appendChild(i),r.appendChild(n);var l=n.offsetTop-i.offsetTop+2;r.removeChild(i),r.appendChild(this._document.createTextNode(HD)),r.style.lineHeight="normal",n.style.verticalAlign="super";var c=n.offsetTop-r.offsetTop+2;return o.removeChild(r),{baseline:l,middle:c}},a.prototype.getMetrics=function(e,s){var r=e+" "+s;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,s)),this._data[r]},a})(),JM=(function(){function a(e,s){this.context=e,this.options=s}return a})(),vde=1e4,wde=(function(a){Tc(e,a);function e(s,r){var n=a.call(this,s,r)||this;return n._activeEffects=[],n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),r.canvas||(n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px"),n.fontMetrics=new yde(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),n}return e.prototype.applyEffects=function(s){for(var r=this;this._activeEffects.length;)this.popEffect();s.forEach(function(n){return r.applyEffect(n)})},e.prototype.applyEffect=function(s){this.ctx.save(),cde(s)&&(this.ctx.globalAlpha=s.opacity),lde(s)&&(this.ctx.translate(s.offsetX,s.offsetY),this.ctx.transform(s.matrix[0],s.matrix[1],s.matrix[2],s.matrix[3],s.matrix[4],s.matrix[5]),this.ctx.translate(-s.offsetX,-s.offsetY)),GM(s)&&(this.path(s.path),this.ctx.clip()),this._activeEffects.push(s)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(s){return ro(this,void 0,void 0,function(){var r;return Vi(this,function(n){switch(n.label){case 0:return r=s.element.container.styles,r.isVisible()?[4,this.renderStackContent(s)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(s){return ro(this,void 0,void 0,function(){return Vi(this,function(r){switch(r.label){case 0:if(ni(s.container.flags,16))debugger;return s.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(s)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(s)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(s,r,n){var i=this;if(r===0)this.ctx.fillText(s.text,s.bounds.left,s.bounds.top+n);else{var o=NC(s.text);o.reduce(function(l,c){return i.ctx.fillText(c,l,s.bounds.top+n),l+i.ctx.measureText(c).width},s.bounds.left)}},e.prototype.createFontStyle=function(s){var r=s.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),n=kde(s.fontFamily).join(", "),i=E0(s.fontSize)?""+s.fontSize.number+s.fontSize.unit:s.fontSize.number+"px";return[[s.fontStyle,r,s.fontWeight,i,n].join(" "),n,i]},e.prototype.renderTextNode=function(s,r){return ro(this,void 0,void 0,function(){var n,i,o,l,c,u,m,A,g=this;return Vi(this,function(p){return n=this.createFontStyle(r),i=n[0],o=n[1],l=n[2],this.ctx.font=i,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),u=c.baseline,m=c.middle,A=r.paintOrder,s.textBounds.forEach(function(v){A.forEach(function(b){switch(b){case 0:g.ctx.fillStyle=Ai(r.color),g.renderTextWithLetterSpacing(v,r.letterSpacing,u);var y=r.textShadow;y.length&&v.text.trim().length&&(y.slice(0).reverse().forEach(function(w){g.ctx.shadowColor=Ai(w.color),g.ctx.shadowOffsetX=w.offsetX.number*g.options.scale,g.ctx.shadowOffsetY=w.offsetY.number*g.options.scale,g.ctx.shadowBlur=w.blur.number,g.renderTextWithLetterSpacing(v,r.letterSpacing,u)}),g.ctx.shadowColor="",g.ctx.shadowOffsetX=0,g.ctx.shadowOffsetY=0,g.ctx.shadowBlur=0),r.textDecorationLine.length&&(g.ctx.fillStyle=Ai(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(w){switch(w){case 1:g.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top+u),v.bounds.width,1);break;case 2:g.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top),v.bounds.width,1);break;case 3:g.ctx.fillRect(v.bounds.left,Math.ceil(v.bounds.top+m),v.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&v.text.trim().length&&(g.ctx.strokeStyle=Ai(r.webkitTextStrokeColor),g.ctx.lineWidth=r.webkitTextStrokeWidth,g.ctx.lineJoin=window.chrome?"miter":"round",g.ctx.strokeText(v.text,v.bounds.left,v.bounds.top+u)),g.ctx.strokeStyle="",g.ctx.lineWidth=0,g.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(s,r,n){if(n&&s.intrinsicWidth>0&&s.intrinsicHeight>0){var i=ew(s),o=Zv(r);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,s.intrinsicWidth,s.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(s){return ro(this,void 0,void 0,function(){var r,n,i,o,l,c,B,B,u,m,A,g,E,p,v,S,b,y,w,B,j,E,S;return Vi(this,function(T){switch(T.label){case 0:this.applyEffects(s.getEffects(4)),r=s.container,n=s.curves,i=r.styles,o=0,l=r.textNodes,T.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,i)]):[3,4];case 2:T.sent(),T.label=3;case 3:return o++,[3,1];case 4:if(!(r instanceof EM))return[3,8];T.label=5;case 5:return T.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return B=T.sent(),this.renderReplacedElement(r,n,B),[3,8];case 7:return T.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof FM&&this.renderReplacedElement(r,n,r.canvas),!(r instanceof DM))return[3,12];T.label=9;case 9:return T.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return B=T.sent(),this.renderReplacedElement(r,n,B),[3,12];case 11:return T.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof LM&&r.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,u.render(r.tree)]):[3,14];case 13:m=T.sent(),r.width&&r.height&&this.ctx.drawImage(m,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),T.label=14;case 14:if(r instanceof jC&&(A=Math.min(r.bounds.width,r.bounds.height),r.type===Wv?r.checked&&(this.ctx.save(),this.path([new js(r.bounds.left+A*.39363,r.bounds.top+A*.79),new js(r.bounds.left+A*.16,r.bounds.top+A*.5549),new js(r.bounds.left+A*.27347,r.bounds.top+A*.44071),new js(r.bounds.left+A*.39694,r.bounds.top+A*.5649),new js(r.bounds.left+A*.72983,r.bounds.top+A*.23),new js(r.bounds.left+A*.84,r.bounds.top+A*.34085),new js(r.bounds.left+A*.39363,r.bounds.top+A*.79)]),this.ctx.fillStyle=Ai(SD),this.ctx.fill(),this.ctx.restore()):r.type===Yv&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+A/2,r.bounds.top+A/2,A/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ai(SD),this.ctx.fill(),this.ctx.restore())),Nde(r)&&r.value.length){switch(g=this.createFontStyle(i),E=g[0],p=g[1],v=this.fontMetrics.getMetrics(E,p).baseline,this.ctx.font=E,this.ctx.fillStyle=Ai(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=_de(r.styles.textAlign),S=ew(r),b=0,r.styles.textAlign){case 1:b+=S.width/2;break;case 2:b+=S.width;break}y=S.add(b,0,0,-S.height/2+1),this.ctx.save(),this.path([new js(S.left,S.top),new js(S.left+S.width,S.top),new js(S.left+S.width,S.top+S.height),new js(S.left,S.top+S.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ix(r.value,y),i.letterSpacing,v),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ni(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(w=r.styles.listStyleImage,w.type!==0)return[3,18];B=void 0,j=w.url,T.label=15;case 15:return T.trys.push([15,17,,18]),[4,this.context.cache.match(j)];case 16:return B=T.sent(),this.ctx.drawImage(B,r.bounds.left-(B.width+10),r.bounds.top),[3,18];case 17:return T.sent(),this.context.logger.error("Error loading list-style-image "+j),[3,18];case 18:return[3,20];case 19:s.listValue&&r.styles.listStyleType!==-1&&(E=this.createFontStyle(i)[0],this.ctx.font=E,this.ctx.fillStyle=Ai(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",S=new Bu(r.bounds.left,r.bounds.top+Sa(r.styles.paddingTop,r.bounds.width),r.bounds.width,hD(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ix(s.listValue,S),i.letterSpacing,hD(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),T.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(s){return ro(this,void 0,void 0,function(){var r,n,w,i,o,w,l,c,w,u,m,w,A,g,w,p,v,w,b,y,w;return Vi(this,function(B){switch(B.label){case 0:if(ni(s.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(s.element)];case 1:B.sent(),r=0,n=s.negativeZIndex,B.label=2;case 2:return r<n.length?(w=n[r],[4,this.renderStack(w)]):[3,5];case 3:B.sent(),B.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(s.element)];case 6:B.sent(),i=0,o=s.nonInlineLevel,B.label=7;case 7:return i<o.length?(w=o[i],[4,this.renderNode(w)]):[3,10];case 8:B.sent(),B.label=9;case 9:return i++,[3,7];case 10:l=0,c=s.nonPositionedFloats,B.label=11;case 11:return l<c.length?(w=c[l],[4,this.renderStack(w)]):[3,14];case 12:B.sent(),B.label=13;case 13:return l++,[3,11];case 14:u=0,m=s.nonPositionedInlineLevel,B.label=15;case 15:return u<m.length?(w=m[u],[4,this.renderStack(w)]):[3,18];case 16:B.sent(),B.label=17;case 17:return u++,[3,15];case 18:A=0,g=s.inlineLevel,B.label=19;case 19:return A<g.length?(w=g[A],[4,this.renderNode(w)]):[3,22];case 20:B.sent(),B.label=21;case 21:return A++,[3,19];case 22:p=0,v=s.zeroOrAutoZIndexOrTransformedOrOpacity,B.label=23;case 23:return p<v.length?(w=v[p],[4,this.renderStack(w)]):[3,26];case 24:B.sent(),B.label=25;case 25:return p++,[3,23];case 26:b=0,y=s.positiveZIndex,B.label=27;case 27:return b<y.length?(w=y[b],[4,this.renderStack(w)]):[3,30];case 28:B.sent(),B.label=29;case 29:return b++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(s){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(s.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(s){this.ctx.beginPath(),this.formatPath(s),this.ctx.closePath()},e.prototype.formatPath=function(s){var r=this;s.forEach(function(n,i){var o=Ml(n)?n.start:n;i===0?r.ctx.moveTo(o.x,o.y):r.ctx.lineTo(o.x,o.y),Ml(n)&&r.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},e.prototype.renderRepeat=function(s,r,n,i){this.path(s),this.ctx.fillStyle=r,this.ctx.translate(n,i),this.ctx.fill(),this.ctx.translate(-n,-i)},e.prototype.resizeImage=function(s,r,n){var i;if(s.width===r&&s.height===n)return s;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,l=o.createElement("canvas");l.width=Math.max(1,r),l.height=Math.max(1,n);var c=l.getContext("2d");return c.drawImage(s,0,0,s.width,s.height,0,0,r,n),l},e.prototype.renderBackgroundImage=function(s){return ro(this,void 0,void 0,function(){var r,n,i,o,l,c;return Vi(this,function(u){switch(u.label){case 0:r=s.styles.backgroundImage.length-1,n=function(m){var A,g,p,Y,O,X,ae,ne,D,v,Y,O,X,ae,ne,b,y,w,B,j,E,S,T,M,D,P,Y,Q,L,ae,ne,V,O,X,$,H,te,K,I,R,G,se;return Vi(this,function(le){switch(le.label){case 0:if(m.type!==0)return[3,5];A=void 0,g=m.url,le.label=1;case 1:return le.trys.push([1,3,,4]),[4,i.context.cache.match(g)];case 2:return A=le.sent(),[3,4];case 3:return le.sent(),i.context.logger.error("Error loading background-image "+g),[3,4];case 4:return A&&(p=wj(s,r,[A.width,A.height,A.width/A.height]),Y=p[0],O=p[1],X=p[2],ae=p[3],ne=p[4],D=i.ctx.createPattern(i.resizeImage(A,ae,ne),"repeat"),i.renderRepeat(Y,D,O,X)),[3,6];case 5:loe(m)?(v=wj(s,r,[null,null,null]),Y=v[0],O=v[1],X=v[2],ae=v[3],ne=v[4],b=roe(m.angle,ae,ne),y=b[0],w=b[1],B=b[2],j=b[3],E=b[4],S=document.createElement("canvas"),S.width=ae,S.height=ne,T=S.getContext("2d"),M=T.createLinearGradient(w,j,B,E),dD(m.stops,y).forEach(function(ye){return M.addColorStop(ye.stop,Ai(ye.color))}),T.fillStyle=M,T.fillRect(0,0,ae,ne),ae>0&&ne>0&&(D=i.ctx.createPattern(S,"repeat"),i.renderRepeat(Y,D,O,X))):coe(m)&&(P=wj(s,r,[null,null,null]),Y=P[0],Q=P[1],L=P[2],ae=P[3],ne=P[4],V=m.position.length===0?[yC]:m.position,O=Sa(V[0],ae),X=Sa(V[V.length-1],ne),$=aoe(m,O,X,ae,ne),H=$[0],te=$[1],H>0&&te>0&&(K=i.ctx.createRadialGradient(Q+O,L+X,0,Q+O,L+X,H),dD(m.stops,H*2).forEach(function(ye){return K.addColorStop(ye.stop,Ai(ye.color))}),i.path(Y),i.ctx.fillStyle=K,H!==te?(I=s.bounds.left+.5*s.bounds.width,R=s.bounds.top+.5*s.bounds.height,G=te/H,se=1/G,i.ctx.save(),i.ctx.translate(I,R),i.ctx.transform(1,0,0,G,0,0),i.ctx.translate(-I,-R),i.ctx.fillRect(Q,se*(L-R)+R,ae,ne*se),i.ctx.restore()):i.ctx.fill())),le.label=6;case 6:return r--,[2]}})},i=this,o=0,l=s.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(c=l[o],[5,n(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(s,r,n){return ro(this,void 0,void 0,function(){return Vi(this,function(i){return this.path(QD(n,r)),this.ctx.fillStyle=Ai(s),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(s,r,n,i){return ro(this,void 0,void 0,function(){var o,l;return Vi(this,function(c){switch(c.label){case 0:return r<3?[4,this.renderSolidBorder(s,n,i)]:[3,2];case 1:return c.sent(),[2];case 2:return o=hde(i,n),this.path(o),this.ctx.fillStyle=Ai(s),this.ctx.fill(),l=mde(i,n),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(s){return ro(this,void 0,void 0,function(){var r,n,i,o,l,c,u,m,A=this;return Vi(this,function(g){switch(g.label){case 0:return this.applyEffects(s.getEffects(2)),r=s.container.styles,n=!Hh(r.backgroundColor)||r.backgroundImage.length,i=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],o=jde(Hf(r.backgroundClip,0),s.curves),n||r.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Hh(r.backgroundColor)||(this.ctx.fillStyle=Ai(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(s.container)]):[3,2];case 1:g.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(p){A.ctx.save();var v=Jv(s.curves),b=p.inset?0:vde,y=dde(v,-b+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(A.path(v),A.ctx.clip(),A.mask(y)):(A.mask(v),A.ctx.clip(),A.path(y)),A.ctx.shadowOffsetX=p.offsetX.number+b,A.ctx.shadowOffsetY=p.offsetY.number,A.ctx.shadowColor=Ai(p.color),A.ctx.shadowBlur=p.blur.number,A.ctx.fillStyle=p.inset?Ai(p.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()}),g.label=2;case 2:l=0,c=0,u=i,g.label=3;case 3:return c<u.length?(m=u[c],m.style!==0&&!Hh(m.color)&&m.width>0?m.style!==2?[3,5]:[4,this.renderDashedDottedBorder(m.color,m.width,l,s.curves,2)]:[3,11]):[3,13];case 4:return g.sent(),[3,11];case 5:return m.style!==3?[3,7]:[4,this.renderDashedDottedBorder(m.color,m.width,l,s.curves,3)];case 6:return g.sent(),[3,11];case 7:return m.style!==4?[3,9]:[4,this.renderDoubleBorder(m.color,m.width,l,s.curves)];case 8:return g.sent(),[3,11];case 9:return[4,this.renderSolidBorder(m.color,l,s.curves)];case 10:g.sent(),g.label=11;case 11:l++,g.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(s,r,n,i,o){return ro(this,void 0,void 0,function(){var l,c,u,m,A,g,p,v,b,y,w,B,j,E,S,T,S,T;return Vi(this,function(M){return this.ctx.save(),l=Ade(i,n),c=QD(i,n),o===2&&(this.path(c),this.ctx.clip()),Ml(c[0])?(u=c[0].start.x,m=c[0].start.y):(u=c[0].x,m=c[0].y),Ml(c[1])?(A=c[1].end.x,g=c[1].end.y):(A=c[1].x,g=c[1].y),n===0||n===2?p=Math.abs(u-A):p=Math.abs(m-g),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),v=r<3?r*3:r*2,b=r<3?r*2:r,o===3&&(v=r,b=r),y=!0,p<=v*2?y=!1:p<=v*2+b?(w=p/(2*v+b),v*=w,b*=w):(B=Math.floor((p+b)/(v+b)),j=(p-B*v)/(B-1),E=(p-(B+1)*v)/B,b=E<=0||Math.abs(b-j)<Math.abs(b-E)?j:E),y&&(o===3?this.ctx.setLineDash([0,v+b]):this.ctx.setLineDash([v,b])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Ai(s),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Ml(c[0])&&(S=c[3],T=c[0],this.ctx.beginPath(),this.formatPath([new js(S.end.x,S.end.y),new js(T.start.x,T.start.y)]),this.ctx.stroke()),Ml(c[1])&&(S=c[1],T=c[2],this.ctx.beginPath(),this.formatPath([new js(S.end.x,S.end.y),new js(T.start.x,T.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(s){return ro(this,void 0,void 0,function(){var r;return Vi(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ai(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=ude(s),[4,this.renderStack(r)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(JM),Nde=function(a){return a instanceof IM||a instanceof PM?!0:a instanceof jC&&a.type!==Yv&&a.type!==Wv},jde=function(a,e){switch(a){case 0:return Jv(e);case 2:return nde(e);default:return Zv(e)}},_de=function(a){switch(a){case 1:return"center";case 2:return"right";default:return"left"}},Cde=["-apple-system","system-ui"],kde=function(a){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?a.filter(function(e){return Cde.indexOf(e)===-1}):a},Bde=(function(a){Tc(e,a);function e(s,r){var n=a.call(this,s,r)||this;return n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=r,n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),n}return e.prototype.render=function(s){return ro(this,void 0,void 0,function(){var r,n;return Vi(this,function(i){switch(i.label){case 0:return r=U_(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,s),[4,Sde(r)];case 1:return n=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ai(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(JM),Sde=function(a){return new Promise(function(e,s){var r=new Image;r.onload=function(){e(r)},r.onerror=s,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(a))})},Ede=(function(){function a(e){var s=e.id,r=e.enabled;this.id=s,this.enabled=r,this.start=Date.now()}return a.prototype.debug=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,hy([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},a.prototype.getTime=function(){return Date.now()-this.start},a.prototype.info=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,hy([this.id,this.getTime()+"ms"],e))},a.prototype.warn=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,hy([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},a.prototype.error=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,hy([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},a.instances={},a})(),Fde=(function(){function a(e,s){var r;this.windowBounds=s,this.instanceName="#"+a.instanceCount++,this.logger=new Ede({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new Xce(this,e)}return a.instanceCount=1,a})(),Tu=function(a,e){return e===void 0&&(e={}),Dde(a,e)};typeof window<"u"&&qM.setContext(window);var Dde=function(a,e){return ro(void 0,void 0,void 0,function(){var s,r,n,i,o,l,c,u,m,A,g,p,v,b,y,w,B,j,E,S,M,T,M,D,P,Y,Q,L,ae,ne,V,O,X,$,H,te,K,I,R,G;return Vi(this,function(se){switch(se.label){case 0:if(!a||typeof a!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(s=a.ownerDocument,!s)throw new Error("Element is not attached to a Document");if(r=s.defaultView,!r)throw new Error("Document is not attached to a Window");return n={allowTaint:(D=e.allowTaint)!==null&&D!==void 0?D:!1,imageTimeout:(P=e.imageTimeout)!==null&&P!==void 0?P:15e3,proxy:e.proxy,useCORS:(Y=e.useCORS)!==null&&Y!==void 0?Y:!1},i=__({logging:(Q=e.logging)!==null&&Q!==void 0?Q:!0,cache:e.cache},n),o={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:r.innerWidth,windowHeight:(ae=e.windowHeight)!==null&&ae!==void 0?ae:r.innerHeight,scrollX:(ne=e.scrollX)!==null&&ne!==void 0?ne:r.pageXOffset,scrollY:(V=e.scrollY)!==null&&V!==void 0?V:r.pageYOffset},l=new Bu(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new Fde(i,l),u=(O=e.foreignObjectRendering)!==null&&O!==void 0?O:!1,m={allowTaint:(X=e.allowTaint)!==null&&X!==void 0?X:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),A=new RD(c,a,m),g=A.clonedReferenceElement,g?[4,A.toIFrame(s,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=se.sent(),v=_C(g)||Pce(g)?dne(g.ownerDocument):t1(c,g),b=v.width,y=v.height,w=v.left,B=v.top,j=Tde(c,g,e.backgroundColor),E={canvas:e.canvas,backgroundColor:j,scale:(H=($=e.scale)!==null&&$!==void 0?$:r.devicePixelRatio)!==null&&H!==void 0?H:1,x:((te=e.x)!==null&&te!==void 0?te:0)+w,y:((K=e.y)!==null&&K!==void 0?K:0)+B,width:(I=e.width)!==null&&I!==void 0?I:Math.ceil(b),height:(R=e.height)!==null&&R!==void 0?R:Math.ceil(y)},u?(c.logger.debug("Document cloned, using foreign object rendering"),M=new Bde(c,E),[4,M.render(g)]):[3,3];case 2:return S=se.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+w+","+B+" with size "+b+"x"+y+" using computed rendering"),c.logger.debug("Starting DOM parsing"),T=RM(c,g),j===T.styles.backgroundColor&&(T.styles.backgroundColor=ju.TRANSPARENT),c.logger.debug("Starting renderer for element at "+E.x+","+E.y+" with size "+E.width+"x"+E.height),M=new wde(c,E),[4,M.render(T)];case 4:S=se.sent(),se.label=5;case 5:return(!((G=e.removeContainer)!==null&&G!==void 0)||G)&&(RD.destroy(p)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,S]}})})},Tde=function(a,e,s){var r=e.ownerDocument,n=r.documentElement?Tx(a,getComputedStyle(r.documentElement).backgroundColor):ju.TRANSPARENT,i=r.body?Tx(a,getComputedStyle(r.body).backgroundColor):ju.TRANSPARENT,o=typeof s=="string"?Tx(a,s):s===null?ju.TRANSPARENT:4294967295;return e===r.documentElement?Hh(n)?Hh(i)?o:i:n:o};const Pde=Object.freeze(Object.defineProperty({__proto__:null,default:Tu},Symbol.toStringTag,{value:"Module"}));Eu.register(Gp,Wp,Hp,Up,Qp,Fu,$p,qp,zp,Vp);const rx="/backend/business_permit",ax=[{value:"retail",label:"Retail Store",icon:O6,color:"#4CAF50"},{value:"restaurant",label:"Restaurant/Caf",icon:Q6,color:"#FDA811"},{value:"manufacturing",label:"Manufacturing",icon:I6,color:"#4A90E2"},{value:"services",label:"Services",icon:Ba,color:"#9C27B0"},{value:"wholesale",label:"Wholesale",icon:R6,color:"#2196F3"},{value:"construction",label:"Construction",icon:rn,color:"#795548"},{value:"transport",label:"Transport",icon:a5,color:"#607D8B"},{value:"professional",label:"Professional Services",icon:Ba,color:"#3F51B5"},{value:"others",label:"Others",icon:Ur,color:"#F44336"}],VD=[{value:"micro",label:"Micro (<3M)",color:"#4CAF50"},{value:"small",label:"Small (3M-15M)",color:"#FDA811"},{value:"medium",label:"Medium (15M-100M)",color:"#4A90E2"},{value:"large",label:"Large (>100M)",color:"#9C27B0"}],nx=a=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0,maximumFractionDigits:0}).format(a||0),Ff=(a,e)=>{if(!a)return!1;switch(e){case"retail":return a.includes("retail")||a.includes("store");case"restaurant":return a.includes("restaurant")||a.includes("cafe")||a.includes("food");case"manufacturing":return a.includes("manufactur");case"services":return a.includes("service");case"wholesale":return a.includes("wholesale");case"construction":return a.includes("construct");case"transport":return a.includes("transport");case"professional":return a.includes("professional")||a.includes("consult");case"others":return!0;default:return!1}};function Ide(){const[a,e]=C.useState([]),[s,r]=C.useState([]),[n,i]=C.useState(!0),[o,l]=C.useState(null),[c,u]=C.useState([null,null]),[m,A]=c,[g,p]=C.useState(""),[v,b]=C.useState("all"),[y,w]=C.useState("all"),[B,j]=C.useState("all"),[E,S]=C.useState("all"),[T,M]=C.useState(!1),[D,P]=C.useState(""),[Y,Q]=C.useState(!1),[L,ae]=C.useState(null),[ne,V]=C.useState(1),[O,X]=C.useState(""),[$,H]=C.useState(null),[te,K]=C.useState(!1),[I,R]=C.useState(100),[G,se]=C.useState(!1),[le,ye]=C.useState(!1),De=C.useRef(null),me=C.useRef(!1),Te=C.useRef({x:0,y:0}),we=C.useRef({x:0,y:0}),[st,ce]=C.useState(""),[tt,Ae]=C.useState("all"),gt=15,q=async()=>{try{i(!0),l(null);const Be=await fetch(`${rx}/admin_fetch.php`);if(!Be.ok)throw new Error(`HTTP error! status: ${Be.status}`);const mt=await Be.json();if(mt.success&&mt.data)e(mt.data);else throw new Error(mt.message||"Failed to fetch permits")}catch(Be){l(Be.message),console.error("Error fetching permits:",Be)}finally{i(!1)}},Qt=async Be=>{try{const mt=await fetch(`${rx}/fetch_single.php?permit_id=${Be}`);if(!mt.ok)throw new Error(`HTTP error! status: ${mt.status}`);const Nt=await mt.json();if(Nt.success&&Nt.data){if(!Nt.data.documents||Nt.data.documents.length===0){const Ne=await yt(Be);Nt.data.documents=Ne}return Nt.data}else throw new Error(Nt.message||"Failed to fetch permit details")}catch(mt){return console.error("Error fetching single permit:",mt),null}},yt=async Be=>{try{const mt=await fetch(`${rx}/fetch_documents.php?permit_id=${Be}`);if(!mt.ok)throw new Error(`HTTP error! status: ${mt.status}`);const Nt=await mt.json();return Nt.success&&Nt.data?Nt.data:[]}catch(mt){return console.error("Error fetching documents:",mt),[]}},Oe=C.useMemo(()=>{const Be=a.length,mt=a.filter(de=>de.status?.toUpperCase()==="APPROVED").length,Nt=a.filter(de=>de.status?.toUpperCase()==="REJECTED").length,Ne=a.filter(de=>de.status?.toUpperCase()==="PENDING"||!de.status).length,Je=a.filter(de=>de.status?.toUpperCase()==="COMPLIANCE").length,ht=ax.map(de=>{const ie=a.filter(Dt=>{const jt=Dt.business_nature?.toLowerCase();return jt?Ff(jt,de.value):!1}).length,Ue=a.filter(Dt=>{const jt=Dt.business_nature?.toLowerCase();return jt?Ff(jt,de.value)&&Dt.status?.toUpperCase()==="APPROVED":!1}).length,bt=ie>0?(Ue/ie*100).toFixed(1):0,ot=a.filter(Dt=>{const jt=Dt.business_nature?.toLowerCase();return jt?Ff(jt,de.value):!1}).reduce((Dt,jt)=>Dt+(parseFloat(jt.capital_investment)||0),0);return{...de,count:ie,approvedCount:Ue,approvalRate:bt,totalCapital:nx(ot),rawCapital:ot}}).filter(de=>de.count>0).sort((de,ie)=>ie.count-de.count),It=VD.map(de=>{const ie=a.filter(Ue=>{const bt=parseFloat(Ue.capital_investment)||0;return de.value==="micro"&&bt<3e6||de.value==="small"&&bt>=3e6&&bt<15e6||de.value==="medium"&&bt>=15e6&&bt<1e8||de.value==="large"&&bt>=1e8}).length;return{...de,count:ie,percentage:Be>0?(ie/Be*100).toFixed(1):0}}).filter(de=>de.count>0),Pe=ht[0]||{label:"N/A",count:0},Ke=a.reduce((de,ie)=>de+(parseFloat(ie.capital_investment)||0),0),nt=a.reduce((de,ie)=>de+(parseInt(ie.total_employees)||0),0),zt=7,is=Math.floor(Be*.85),ke=Be>0?((Be-is)/is*100).toFixed(1):0;return{total:Be,approved:mt,rejected:Nt,pending:Ne,compliance:Je,categoryStats:ht,sizeStats:It,topCategory:Pe,totalCapital:nx(Ke),totalEmployees:nt,avgProcessingTime:zt,trend:ke,approvalRate:Be>0?(mt/Be*100).toFixed(1):0,completionRate:Be>0?((mt+Nt+Je)/Be*100).toFixed(1):0}},[a]),ze=C.useMemo(()=>Oe.categoryStats.slice(0,5),[Oe.categoryStats]),Le=C.useMemo(()=>({labels:ze.map(Be=>Be.label),counts:ze.map(Be=>Be.count),colors:ze.map(Be=>Be.color),capital:ze.map(Be=>Be.rawCapital||0)}),[ze]),oe=C.useMemo(()=>{const Be=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],mt=new Date().getMonth(),Nt=new Date().getFullYear(),Ne=Be.slice(Math.max(0,mt-5),mt+1),Je=ze.slice(0,3),ht={};Je.forEach(Pe=>{ht[Pe.value]=Array(Ne.length).fill(0)}),a.forEach(Pe=>{if(!Pe.application_date)return;const Ke=new Date(Pe.application_date),nt=Ke.getMonth();if(Ke.getFullYear()===Nt&&nt<=mt&&nt>=mt-5){const is=nt-(mt-5);if(is>=0){const ke=Pe.business_nature?.toLowerCase()||"";Je.forEach(de=>{Ff(ke,de.value)&&ht[de.value][is]++})}}});const It=["#4CAF50","#FDA811","#4A90E2"];return{labels:Ne,datasets:Je.map((Pe,Ke)=>({label:Pe.label,data:ht[Pe.value]||Array(Ne.length).fill(0),borderColor:It[Ke],backgroundColor:It[Ke]+"20",fill:!0,tension:.4}))}},[a,ze]),he=Be=>{switch((Be||"").toUpperCase()){case"APPROVED":return{text:"Approved",color:"text-[#4CAF50]",bgColor:"bg-[#4CAF50]/10",icon:Us};case"REJECTED":return{text:"Rejected",color:"text-[#E53935]",bgColor:"bg-[#E53935]/10",icon:Ka};case"PENDING":return{text:"Pending",color:"text-[#4A90E2]",bgColor:"bg-[#4A90E2]/10",icon:jr};case"COMPLIANCE":return{text:"For Compliance",color:"text-[#FDA811]",bgColor:"bg-[#FDA811]/10",icon:Ks};default:return{text:"Pending",color:"text-[#4D4A4A]",bgColor:"bg-gray-100",icon:Ks}}},W=C.useCallback(Be=>{if(!Be)return Ur;const mt=Be.toLowerCase();return mt.includes("retail")||mt.includes("store")?O6:mt.includes("restaurant")||mt.includes("cafe")||mt.includes("food")?Q6:mt.includes("manufactur")?I6:mt.includes("service")?Ba:mt.includes("wholesale")?R6:mt.includes("construct")?rn:mt.includes("transport")?a5:mt.includes("professional")||mt.includes("consult")?Ba:Ur},[]);C.useEffect(()=>{let Be=[...a];const mt=g.toLowerCase();m&&A&&(Be=Be.filter(Nt=>{if(!Nt.application_date)return!1;const Ne=new Date(Nt.application_date);return Ne>=m&&Ne<=A})),g&&(Be=Be.filter(Nt=>Nt.owner_first_name?.toLowerCase().includes(mt)||Nt.owner_last_name?.toLowerCase().includes(mt)||Nt.business_name?.toLowerCase().includes(mt)||Nt.trade_name?.toLowerCase().includes(mt)||Nt.barangay?.toLowerCase().includes(mt)||Nt.applicant_id?.toLowerCase().includes(mt))),v!=="all"&&(Be=Be.filter(Nt=>(Nt.status||"").toUpperCase()===v.toUpperCase())),E!=="all"&&(Be=Be.filter(Nt=>(Nt.permit_type||"").toUpperCase()===E.toUpperCase())),y!=="all"&&(Be=Be.filter(Nt=>Ff(Nt.business_nature?.toLowerCase(),y))),B!=="all"&&(Be=Be.filter(Nt=>{const Ne=parseFloat(Nt.capital_investment)||0;switch(B){case"micro":return Ne<3e6;case"small":return Ne>=3e6&&Ne<15e6;case"medium":return Ne>=15e6&&Ne<1e8;case"large":return Ne>=1e8;default:return!0}})),r(Be),V(1)},[a,m,A,g,v,y,B,E]),C.useEffect(()=>{q()},[]);const ve=C.useMemo(()=>{const Be=[],mt=new Date;for(let Nt=7;Nt>=0;Nt--){const Ne=new Date(mt);Ne.setDate(mt.getDate()-Nt*7),Ne.setHours(0,0,0,0);const Je=new Date(Ne);Je.setDate(Ne.getDate()+6),Je.setHours(23,59,59,999);const ht=`Week ${8-Nt}`,It=a.filter(Pe=>{const Ke=new Date(Pe.application_date);return Ke>=Ne&&Ke<=Je}).length;Be.push({label:ht,count:It,weekStart:Ne,weekEnd:Je})}return{labels:Be.map(Nt=>Nt.label),datasets:[{label:"Total Applications",data:Be.map(Nt=>Nt.count),borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.1)",fill:!0,tension:.4,borderWidth:3,pointBackgroundColor:"#4CAF50",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:5,pointHoverRadius:7}],rawData:Be}},[a]),Qe=C.useMemo(()=>{const Be=[],mt=new Date,Nt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let Ne=11;Ne>=0;Ne--){const Je=new Date(mt.getFullYear(),mt.getMonth()-Ne,1),ht=new Date(Je.getFullYear(),Je.getMonth(),1),It=new Date(Je.getFullYear(),Je.getMonth()+1,0,23,59,59,999),Pe=`${Nt[Je.getMonth()]} ${Je.getFullYear().toString().slice(-2)}`,Ke=a.filter(nt=>{const zt=new Date(nt.application_date);return zt>=ht&&zt<=It}).length;Be.push({label:Pe,count:Ke,monthStart:ht,monthEnd:It})}return{labels:Be.map(Ne=>Ne.label),datasets:[{label:"Total Applications",data:Be.map(Ne=>Ne.count),borderColor:"#4A90E2",backgroundColor:"rgba(74, 144, 226, 0.1)",fill:!0,tension:.4,borderWidth:3,pointBackgroundColor:"#4A90E2",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:5,pointHoverRadius:7}],rawData:Be}},[a]),Ze=C.useMemo(()=>({labels:["Approved","For Compliance","Rejected","Pending"],datasets:[{data:[Oe.approved||0,Oe.compliance||0,Oe.rejected||0,Oe.pending||0],backgroundColor:["#4CAF50","#FDA811","#E53935","#4A90E2"],hoverBackgroundColor:["#45a049","#fc9d0b","#d32f2f","#3d7bc7"],borderColor:"#ffffff",borderWidth:3}]}),[Oe]),J=C.useMemo(()=>{const Be={};a.forEach(Nt=>{const Ne=Nt.barangay||"Unknown";Ne!=="N/A"&&(Be[Ne]=(Be[Ne]||0)+1)});const mt=Object.entries(Be).sort(([,Nt],[,Ne])=>Ne-Nt).slice(0,6);return{labels:mt.length>0?mt.map(([Nt])=>Nt):["No Data"],datasets:[{label:"Applications",data:mt.length>0?mt.map(([,Nt])=>Nt):[0],backgroundColor:"#FDA811",hoverBackgroundColor:"#fc9d0b",borderRadius:8,borderWidth:0}]}},[a]),He=C.useCallback(()=>{M(!0),P("csv");const mt=[["Application ID","Business Name","Trade Name","Owner Name","Business Type","Capital Investment","Building Type","Status","Application Date","Barangay","City/Municipality","Province","Total Employees","Male Employees","Female Employees","Contact Number","Email","Home Address"].join(","),...a.map(ht=>[ht.applicant_id,ht.business_name,ht.trade_name,`${ht.owner_last_name}, ${ht.owner_first_name} ${ht.owner_middle_name||""}`.trim(),ht.business_nature,ht.capital_investment,ht.building_type,he(ht.status).text,ht.application_date?new Date(ht.application_date).toLocaleDateString():"",ht.barangay,ht.city_municipality,ht.province,ht.total_employees,ht.male_employees,ht.female_employees,ht.contact_number,ht.email_address,ht.home_address].map(It=>`"${It||""}"`).join(","))].join(`
`),Nt=new Blob([mt],{type:"text/csv"}),Ne=window.URL.createObjectURL(Nt),Je=document.createElement("a");Je.href=Ne,Je.download=`business-permits-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Je),Je.click(),document.body.removeChild(Je),window.URL.revokeObjectURL(Ne),M(!1),P("")},[a]),xt=async()=>{M(!0),P("pdf");try{dt.fire({title:"Generating PDF...",text:"Please wait while we create your report",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{dt.showLoading()}}),await new Promise(zt=>setTimeout(zt,500));const Be=document.createElement("div");Be.style.cssText="position: absolute; left: -9999px; width: 1200px; background: #FBFBFB; padding: 30px; font-family: Arial, sans-serif;",Be.innerHTML=`
        <div style="margin-bottom: 30px;">
          <h1 style="color: #4D4A4A; font-size: 28px; margin: 0 0 10px 0;">Business Permit Analytics</h1>
          <p style="color: #666; margin: 0;">Generated on ${new Date().toLocaleDateString()}</p>
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 30px;">
          ${[{title:"Total Applications",value:Oe.total,color:"#4CAF50"},{title:"Approved",value:Oe.approved,color:"#4CAF50"},{title:"Pending",value:Oe.pending,color:"#FDA811"},{title:"Rejected",value:Oe.rejected,color:"#E53935"}].map(zt=>`
            <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 20px; background: white;">
              <p style="color: #666; font-size: 12px; margin: 0 0 10px 0;">${zt.title}</p>
              <p style="color: ${zt.color}; font-size: 32px; font-weight: bold; margin: 0;">${zt.value}</p>
            </div>
          `).join("")}
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Applications by Status</h2>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
            ${[{label:"Approved",value:Oe.approved||0,color:"#4CAF50"},{label:"For Compliance",value:Oe.compliance||0,color:"#FDA811"},{label:"Rejected",value:Oe.rejected||0,color:"#E53935"}].map(zt=>`
              <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 15px; background: white; border-left: 5px solid ${zt.color};">
                <p style="color: #4D4A4A; font-size: 14px; margin: 0 0 8px 0;">${zt.label}</p>
                <p style="color: #4D4A4A; font-size: 24px; font-weight: bold; margin: 0;">${zt.value}</p>
              </div>
            `).join("")}
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Top Business Categories</h2>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            ${ze.slice(0,6).map((zt,is)=>{const ke=Oe.total>0?(zt.count/Oe.total*100).toFixed(1):0;return`
                <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 12px; background: white; border-left: 5px solid ${zt.color};">
                  <p style="color: #4D4A4A; font-size: 12px; margin: 0 0 5px 0; font-weight: 500;">${zt.label}</p>
                  <p style="color: #4D4A4A; font-size: 20px; font-weight: bold; margin: 0;">${zt.count}</p>
                  <p style="color: #666; font-size: 11px; margin: 3px 0 0 0;">${ke}% of total</p>
                </div>
              `}).join("")}
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Top Barangays</h2>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            ${J.labels.slice(0,6).map((zt,is)=>{const ke=J.datasets[0].data[is],de=a.length>0?(ke/a.length*100).toFixed(1):0;return`
                <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 12px; background: white; border-left: 5px solid #FDA811;">
                  <p style="color: #4D4A4A; font-size: 12px; margin: 0 0 5px 0; font-weight: 500;">${zt}</p>
                  <p style="color: #4D4A4A; font-size: 20px; font-weight: bold; margin: 0;">${ke}</p>
                  <p style="color: #666; font-size: 11px; margin: 3px 0 0 0;">${de}% of total</p>
                </div>
              `}).join("")}
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Weekly Applications Trend (Last 8 Weeks)</h2>
          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
            ${ve.rawData.map((zt,is)=>`
                <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 12px; background: white; text-align: center; border-left: 5px solid #4CAF50;">
                  <p style="color: #666; font-size: 11px; margin: 0 0 5px 0;">${zt.label}</p>
                  <p style="color: #4CAF50; font-size: 24px; font-weight: bold; margin: 0;">${zt.count}</p>
                  <p style="color: #666; font-size: 10px; margin: 3px 0 0 0;">${new Date(zt.weekStart).toLocaleDateString()} - ${new Date(zt.weekEnd).toLocaleDateString()}</p>
                </div>
              `).join("")}
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Monthly Applications Trend (Last 12 Months)</h2>
          <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 8px;">
            ${Qe.rawData.map((zt,is)=>`
                <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 10px; background: white; text-align: center; border-left: 5px solid #4A90E2;">
                  <p style="color: #666; font-size: 10px; margin: 0 0 5px 0;">${zt.label}</p>
                  <p style="color: #4A90E2; font-size: 20px; font-weight: bold; margin: 0;">${zt.count}</p>
                </div>
              `).join("")}
          </div>
        </div>
      `,document.body.appendChild(Be),await new Promise(zt=>setTimeout(zt,100));const mt=await Tu(Be,{scale:2,backgroundColor:"#FBFBFB",logging:!1});document.body.removeChild(Be);const Nt=mt.toDataURL("image/png"),Ne=new Es({orientation:"portrait",unit:"mm",format:"a4"}),Je=Ne.internal.pageSize.getWidth(),ht=Ne.internal.pageSize.getHeight(),It=Je-20,Pe=mt.height*It/mt.width;let Ke=Pe,nt=10;for(Ne.addImage(Nt,"PNG",10,nt,It,Pe),Ke-=ht;Ke>0;)nt=Ke-Pe+10,Ne.addPage(),Ne.addImage(Nt,"PNG",10,nt,It,Pe),Ke-=ht;Ne.save(`business-permits-analytics-${new Date().toISOString().split("T")[0]}.pdf`),dt.fire({icon:"success",title:"PDF Downloaded!",text:"Your report has been downloaded successfully.",timer:2e3,showConfirmButton:!1})}catch(Be){console.error("Error generating PDF:",Be),dt.fire({title:"Export Failed",text:Be.message||"Failed to generate PDF. Please try again.",icon:"error"})}finally{M(!1),P("")}},Xe=Math.ceil(s.length/gt),Ct=(ne-1)*gt,_e=Ct+gt,Se=s.slice(Ct,_e),Ve=Be=>{if(!Be)return"Pending";switch(Be.toUpperCase()){case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"COMPLIANCE":return"Compliance";case"PENDING":return"Pending";default:return"Pending"}},et=Be=>{switch(Ve(Be)){case"Approved":return"text-[#4CAF50] bg-[#4CAF50]/10";case"Rejected":return"text-[#E53935] bg-[#E53935]/10";case"Compliance":return"text-[#FDA811] bg-[#FDA811]/10";case"Pending":return"text-[#4A90E2] bg-[#4A90E2]/10";default:return"text-gray-600 bg-gray-100"}},vt=(Be,mt="")=>{const Nt=(Be||"").toLowerCase(),Ne=(mt||"").toLowerCase();return!!(Ne.endsWith(".jpg")||Ne.endsWith(".jpeg")||Ne.endsWith(".png")||Ne.endsWith(".gif")||Ne.endsWith(".bmp")||Ne.endsWith(".webp")||Ne.endsWith(".svg")||Nt.includes("image/jpeg")||Nt.includes("image/png")||Nt.includes("image/gif")||Nt.includes("image/bmp")||Nt.includes("image/webp")||Nt.includes("image/svg"))},Mt=(Be,mt="")=>{const Nt=(Be||"").toLowerCase(),Ne=(mt||"").toLowerCase();return Ne.endsWith(".pdf")||Nt.includes("pdf")?{icon:Kt,bgColor:"bg-red-100",textColor:"text-red-600",iconColor:"#dc2626"}:Ne.endsWith(".doc")||Ne.endsWith(".docx")||Nt.includes("word")||Nt.includes("officedocument.wordprocessingml")?{icon:Kt,bgColor:"bg-blue-100",textColor:"text-blue-600",iconColor:"#2563eb"}:Ne.endsWith(".xls")||Ne.endsWith(".xlsx")||Nt.includes("excel")||Nt.includes("spreadsheetml")?{icon:Dj,bgColor:"bg-green-100",textColor:"text-green-600",iconColor:"#059669"}:Nt.includes("image/")?{icon:io,bgColor:"bg-purple-100",textColor:"text-purple-600",iconColor:"#7c3aed"}:Ne.endsWith(".zip")||Ne.endsWith(".rar")||Ne.endsWith(".7z")||Nt.includes("zip")||Nt.includes("compressed")?{icon:JU,bgColor:"bg-orange-100",textColor:"text-orange-600",iconColor:"#ea580c"}:Ne.endsWith(".mp4")||Ne.endsWith(".avi")||Ne.endsWith(".mov")||Nt.includes("video")?{icon:m8,bgColor:"bg-pink-100",textColor:"text-pink-600",iconColor:"#db2777"}:Ne.endsWith(".mp3")||Ne.endsWith(".wav")||Ne.endsWith(".flac")||Nt.includes("audio")?{icon:e8,bgColor:"bg-indigo-100",textColor:"text-indigo-600",iconColor:"#4f46e5"}:Ne.endsWith(".js")||Ne.endsWith(".ts")||Ne.endsWith(".html")||Ne.endsWith(".css")||Ne.endsWith(".json")||Ne.endsWith(".xml")?{icon:r8,bgColor:"bg-gray-100",textColor:"text-gray-600",iconColor:"#4b5563"}:{icon:mp,bgColor:"bg-gray-100",textColor:"text-gray-600",iconColor:"#4b5563"}},Ye=(Be,mt="")=>{const Nt=(Be||"").toLowerCase(),Ne=(mt||"").toLowerCase();return Ne.endsWith(".pdf")?"PDF Document":Ne.endsWith(".doc")||Ne.endsWith(".docx")?"Word Document":Ne.endsWith(".xls")||Ne.endsWith(".xlsx")?"Excel Spreadsheet":Ne.endsWith(".jpg")||Ne.endsWith(".jpeg")?"JPEG Image":Ne.endsWith(".png")?"PNG Image":Ne.endsWith(".gif")?"GIF Image":Ne.endsWith(".zip")||Ne.endsWith(".rar")?"Compressed Archive":Ne.endsWith(".mp4")||Ne.endsWith(".mov")?"Video File":Ne.endsWith(".mp3")||Ne.endsWith(".wav")?"Audio File":Nt.includes("pdf")?"PDF Document":Nt.includes("image/")?"Image":Nt.includes("video/")?"Video":Nt.includes("audio/")?"Audio":Nt.includes("zip")?"Compressed File":"Document"},Et=Be=>{if(!Be)return"N/A";try{const[mt,Nt]=Be.split(":"),Ne=new Date;return Ne.setHours(mt,Nt),Ne.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}catch{return Be}},Gt=Be=>{if(!Be||typeof Be!="string")return[];try{const mt=Be.split(/(?=---\s+.+?\s+---)/g),Nt=[];for(let Ne of mt){if(Ne=Ne.trim(),!Ne)continue;const Je=Ne.match(/^---\s+(.+?)\s+---\n([\s\S]*)$/);if(Je){const ht=Je[1].trim(),It=Je[2].trim();It&&Nt.push({timestamp:ht,comment:It})}else Nt.push({timestamp:"Just now",comment:Ne})}return Nt}catch(mt){return console.error("Error formatting comments:",mt),[{timestamp:"Recent",comment:Be}]}},ee=async Be=>{try{const mt=await Qt(Be.permit_id);if(mt){const Nt=Ve(mt.status);ae({...mt,uiStatus:Nt})}else{const Nt=Ve(Be.status);ae({...Be,uiStatus:Nt})}X(""),Q(!0)}catch(mt){console.error("Error opening modal:",mt);const Nt=Ve(Be.status);ae({...Be,uiStatus:Nt}),X(""),Q(!0)}},Ie=()=>{ae(null),X(""),H(null),K(!1),se(!1),Q(!1)},ue=()=>{se(!G)},fe=async Be=>{try{if(!Be||!Be.file_path){alert("File path not available");return}const mt=Be.file_path.split("/").pop(),Nt=`${rx}/${Be.file_path}`;console.log("Viewing file:",{file_path:Be.file_path,url:Nt,file_type:Be.file_type}),H({...Be,url:Nt,name:mt,file_type:Be.file_type||getFileType(mt)}),K(!0)}catch(mt){console.error("Error accessing file:",mt),alert("Unable to access the file")}},xe=C.useCallback(()=>{if(De.current){const Be=De.current.style.transform||"scale(1)",mt=parseFloat(Be.match(/scale\(([^)]+)\)/)?.[1]||1);R(Math.round(mt*100))}},[]);C.useEffect(()=>{const Be=mt=>{mt.key==="Escape"&&te&&Zt()};return window.addEventListener("keydown",Be),()=>{window.removeEventListener("keydown",Be)}},[te]),C.useEffect(()=>{$&&De.current&&(De.current.style.transform="scale(1)",De.current.style.left="0px",De.current.style.top="0px",De.current.style.cursor="default",R(100),we.current={x:0,y:0})},[$]);const Me=C.useCallback(Be=>{if(!(!De.current||!vt($?.file_type,$?.name))&&(Be.preventDefault(),Be.stopPropagation(),Be.deltaY!==0)){const mt=De.current.style.transform||"scale(1)",Nt=parseFloat(mt.match(/scale\(([^)]+)\)/)?.[1]||1),Ne=Be.deltaY>0?-.1:.1,Je=Math.max(.5,Math.min(Nt+Ne,5));De.current.style.transform=`scale(${Je})`,De.current.style.cursor=Je>1?"grab":"default",xe()}},[$,xe]),ct=C.useCallback(Be=>{if(!De.current||!vt($?.file_type,$?.name))return;const mt=De.current.style.transform||"scale(1)";if(parseFloat(mt.match(/scale\(([^)]+)\)/)?.[1]||1)>1){Be.preventDefault(),me.current=!0,Te.current={x:Be.clientX,y:Be.clientY},De.current.style.cursor="grabbing";const Ne=ht=>{if(!me.current||!De.current)return;const It=ht.clientX-Te.current.x,Pe=ht.clientY-Te.current.y,Ke=we.current.x+It,nt=we.current.y+Pe;De.current.style.left=`${Ke}px`,De.current.style.top=`${nt}px`},Je=()=>{De.current&&(me.current=!1,De.current.style.cursor="grab",De.current.style.left&&De.current.style.top&&(we.current.x=parseFloat(De.current.style.left),we.current.y=parseFloat(De.current.style.top)),document.removeEventListener("mousemove",Ne),document.removeEventListener("mouseup",Je))};document.addEventListener("mousemove",Ne),document.addEventListener("mouseup",Je)}},[$]),Pt=C.useCallback(()=>{if(!De.current)return;const Be=De.current.style.transform||"scale(1)",mt=parseFloat(Be.match(/scale\(([^)]+)\)/)?.[1]||1),Nt=Math.min(mt+.25,5);De.current.style.transform=`scale(${Nt})`,De.current.style.cursor=Nt>1?"grab":"default",xe()},[xe]),ts=C.useCallback(()=>{if(!De.current)return;const Be=De.current.style.transform||"scale(1)",mt=parseFloat(Be.match(/scale\(([^)]+)\)/)?.[1]||1),Nt=Math.max(mt-.25,.5);De.current.style.transform=`scale(${Nt})`,De.current.style.cursor=Nt>1?"grab":"default",xe()},[xe]),as=C.useCallback(()=>{De.current&&(De.current.style.transform="scale(1)",De.current.style.left="0px",De.current.style.top="0px",De.current.style.cursor="default",R(100),we.current={x:0,y:0})},[]),Zt=()=>{H(null),K(!1),R(100),me.current=!1,Te.current={x:0,y:0},we.current={x:0,y:0}};return n?t.jsx("div",{className:"min-h-screen bg-[#FBFBFB] p-6 flex items-center justify-center font-poppins",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4CAF50] mx-auto"}),t.jsx("p",{className:"mt-4 text-[#4D4A4A]",children:"Loading business analytics..."})]})}):t.jsxs("div",{className:"min-h-screen bg-[#FBFBFB] p-4 md:p-6 font-poppins",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-[#4D4A4A] font-montserrat",children:"Business Permit Analytics"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 mt-2",children:"Track and analyze business permit applications by category, size, and status"})]}),t.jsxs("div",{className:"flex items-center space-x-3 mt-4 md:mt-0",children:[t.jsx("button",{onClick:q,className:"p-2 rounded-lg bg-white border border-[#E9E7E7] hover:bg-gray-50 transition-colors",title:"Refresh Data",children:t.jsx(Ya,{className:"w-5 h-5 text-[#4D4A4A]"})}),t.jsxs("button",{onClick:He,disabled:T&&D==="csv",className:"px-4 py-2 bg-white border border-[#E9E7E7] text-[#4D4A4A] rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2 disabled:opacity-50 font-montserrat",children:[t.jsx(Dj,{className:"w-5 h-5"}),t.jsx("span",{children:T&&D==="csv"?"Exporting...":"Export CSV"})]}),t.jsxs("button",{onClick:xt,disabled:T&&D==="pdf",className:"px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-opacity-90 transition-colors flex items-center space-x-2 disabled:opacity-50 font-montserrat",children:[t.jsx(nn,{className:"w-5 h-5"}),t.jsx("span",{children:T&&D==="pdf"?"Generating...":"Export PDF"})]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[{title:"Total Applications",value:Oe.total,icon:Kt,color:"#4CAF50",trend:`${Oe.trend}%`,trendUp:Oe.trend>0,description:"All business types"},{title:"Total Capital",value:Oe.totalCapital,icon:UU,color:"#FDA811",trend:"+12.5%",trendUp:!0,description:"Total investment"},{title:"Top Category",value:Oe.topCategory.label,icon:Oe.topCategory.icon||Ur,color:Oe.topCategory.color||"#4CAF50",trend:`${Oe.topCategory.count} applications`,trendUp:!0,description:"Most registered"},{title:"Pending Review",value:Oe.pending+Oe.compliance,icon:jr,color:"#4A90E2",trend:`${Oe.pending} pending, ${Oe.compliance} compliance`,trendUp:Oe.pending>0,description:"Awaiting action"}].map((Be,mt)=>t.jsx("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] transition-all hover:shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:Be.title}),t.jsx("p",{className:"text-2xl font-bold text-[#4D4A4A] mt-2 font-montserrat",children:Be.value}),t.jsxs("div",{className:"mt-2",children:[t.jsxs("div",{className:"flex items-center",children:[Be.trendUp?t.jsx(dl,{className:"w-4 h-4 text-[#4CAF50] mr-1"}):t.jsx(d0,{className:"w-4 h-4 text-[#E53935] mr-1"}),t.jsx("span",{className:`text-sm ${Be.trendUp?"text-[#4CAF50]":"text-[#E53935]"}`,children:Be.trend})]}),t.jsx("span",{className:"text-xs text-[#4D4A4A] text-opacity-60",children:Be.description})]})]}),t.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:Be.color},children:t.jsx(Be.icon,{className:"w-6 h-6 text-white"})})]})},mt))}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Approval Rate"}),t.jsxs("p",{className:"text-xl font-bold text-[#4CAF50]",children:[Oe.approvalRate,"%"]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Total Employees"}),t.jsx("p",{className:"text-xl font-bold text-[#4A90E2]",children:Oe.totalEmployees})]}),t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Avg Processing"}),t.jsxs("p",{className:"text-xl font-bold text-[#FDA811]",children:[Oe.avgProcessingTime," days"]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Completion Rate"}),t.jsxs("p",{className:"text-xl font-bold text-[#9C27B0]",children:[Oe.completionRate,"%"]})]})]})]}),t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-[#E9E7E7]",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#4D4A4A] text-opacity-50 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search businesses, owners, or barangays...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",value:g,onChange:Be=>p(Be.target.value)})]})}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx(B0,{selectsRange:!0,startDate:m,endDate:A,onChange:Be=>u(Be),className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins w-full md:w-auto",placeholderText:"Select date range"}),t.jsx(bn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-[#4D4A4A] text-opacity-50 w-5 h-5 pointer-events-none"})]}),t.jsxs("select",{value:v,onChange:Be=>b(Be.target.value),className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"approved",children:"Approved"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"compliance",children:"For Compliance"}),t.jsx("option",{value:"rejected",children:"Rejected"})]}),t.jsxs("select",{value:E,onChange:Be=>S(Be.target.value),className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Permit Types"}),t.jsx("option",{value:"NEW",children:"New"}),t.jsx("option",{value:"RENEWAL",children:"Renewal"})]}),t.jsxs("select",{value:y,onChange:Be=>w(Be.target.value),className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Categories"}),ax.map(Be=>t.jsx("option",{value:Be.value,children:Be.label},Be.value))]}),t.jsxs("select",{value:B,onChange:Be=>j(Be.target.value),className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Sizes"}),VD.map(Be=>t.jsx("option",{value:Be.value,children:Be.label},Be.value))]})]})]})})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Monthly Trends by Business Category"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Applications for top business categories"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:oe.datasets.map((Be,mt)=>t.jsxs("span",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Be.borderColor}}),t.jsx("span",{className:"text-sm text-[#4D4A4A] ml-2",children:Be.label})]},mt))})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(Wi,{data:oe,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1}},scales:{x:{grid:{color:"rgba(233, 231, 231, 0.5)"},ticks:{color:"#4D4A4A",font:{family:"Poppins"}}},y:{grid:{color:"rgba(233, 231, 231, 0.5)"},ticks:{color:"#4D4A4A",font:{family:"Poppins"}}}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Business Size Distribution"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"By capital investment"})]}),t.jsx("div",{className:"h-[250px] flex items-center justify-center",children:t.jsx(Cu,{data:{labels:Oe.sizeStats.map(Be=>Be.label),datasets:[{data:Oe.sizeStats.map(Be=>Be.count),backgroundColor:Oe.sizeStats.map(Be=>Be.color),borderColor:"#FBFBFB",borderWidth:2}]},options:{maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"bottom",labels:{color:"#4D4A4A",padding:20,usePointStyle:!0,font:{family:"Poppins"}}}}}})}),t.jsx("div",{className:"mt-6 grid grid-cols-2 gap-3",children:Oe.sizeStats.map((Be,mt)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#FBFBFB] rounded-lg border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 rounded-full mr-3",style:{backgroundColor:Be.color}}),t.jsx("span",{className:"text-sm text-[#4D4A4A] font-poppins",children:Be.label})]}),t.jsx("span",{className:"font-semibold text-[#4D4A4A] font-montserrat",children:Be.count})]},mt))})]})]}),t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Applications by Business Category"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Distribution across different business types"})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("span",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:["Showing top ",ze.length," categories"]})})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(vc,{data:{labels:Le.labels,datasets:[{label:"Applications",data:Le.counts,backgroundColor:Le.colors,borderRadius:6,borderWidth:1,borderColor:"#E9E7E7"}]},options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})}),t.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:ze.map((Be,mt)=>{const Nt=Be.icon;return t.jsxs("div",{className:"p-3 rounded-lg border border-[#E9E7E7] hover:shadow transition-all",style:{borderLeftColor:Be.color,borderLeftWidth:"4px"},children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(Nt,{className:"w-5 h-5 mr-2",style:{color:Be.color}}),t.jsx("span",{className:"text-sm font-medium text-[#4D4A4A] font-poppins truncate",children:Be.label})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-lg font-bold text-[#4D4A4A] font-montserrat",children:Be.count}),t.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-[#FBFBFB] text-[#4D4A4A]",children:[Be.approvalRate,"% approved"]})]}),t.jsxs("div",{className:"mt-2 text-xs text-[#4D4A4A] text-opacity-70",children:["Capital: ",Be.totalCapital]})]},mt)})})]}),a.length>0&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Status Distribution"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Applications by approval status"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-1 h-[250px] flex items-center justify-center",children:t.jsx(Cu,{data:Ze,options:{maintainAspectRatio:!1,cutout:"65%",plugins:{legend:{position:"bottom",labels:{color:"#4D4A4A",padding:15,usePointStyle:!0,font:{family:"Poppins"}}}}}})}),t.jsx("div",{className:"lg:col-span-2 flex flex-col justify-center space-y-3",children:[{label:"Approved",value:Oe.approved||0,color:"#4CAF50"},{label:"For Compliance",value:Oe.compliance||0,color:"#FDA811"},{label:"Rejected",value:Oe.rejected||0,color:"#E53935"},{label:"Pending",value:Oe.pending||0,color:"#4A90E2"}].map((Be,mt)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#FBFBFB] rounded-lg border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 rounded-full mr-3",style:{backgroundColor:Be.color}}),t.jsx("span",{className:"text-sm text-[#4D4A4A] font-poppins",children:Be.label})]}),t.jsx("span",{className:"font-semibold text-[#4D4A4A] font-montserrat",children:Be.value})]},mt))})]})]}),a.length>0&&J.labels[0]!=="No Data"&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Top Barangays"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Application distribution by barangay location"})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("span",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:["Top ",Math.min(6,J.labels.length)," barangays"]})})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(vc,{data:J,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})})]}),a.length>0&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Weekly Applications Trend"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Total applications submitted in the last 8 weeks"})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(Wi,{data:ve,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!0,position:"top",labels:{color:"#4D4A4A",font:{family:"Poppins"}}},tooltip:{callbacks:{title:Be=>{const mt=ve.rawData[Be[0].dataIndex],Nt=new Date(mt.weekStart).toLocaleDateString(),Ne=new Date(mt.weekEnd).toLocaleDateString();return`${mt.label}: ${Nt} - ${Ne}`}}}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"},stepSize:1},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})}),t.jsx("div",{className:"mt-4 grid grid-cols-4 md:grid-cols-8 gap-2",children:ve.rawData.map((Be,mt)=>t.jsxs("div",{className:"text-center p-2 bg-[#FBFBFB] rounded border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins",children:Be.label}),t.jsx("p",{className:"text-lg font-bold text-[#4CAF50] font-montserrat",children:Be.count})]},mt))})]}),a.length>0&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Monthly Applications Trend"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Total applications submitted over the last 12 months"})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(Wi,{data:Qe,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!0,position:"top",labels:{color:"#4D4A4A",font:{family:"Poppins"}}}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"},stepSize:1},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})}),t.jsx("div",{className:"mt-4 grid grid-cols-6 md:grid-cols-12 gap-2",children:Qe.rawData.map((Be,mt)=>t.jsxs("div",{className:"text-center p-2 bg-[#FBFBFB] rounded border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins",children:Be.label}),t.jsx("p",{className:"text-lg font-bold text-[#4A90E2] font-montserrat",children:Be.count})]},mt))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-[#E9E7E7] overflow-hidden",children:[t.jsx("div",{className:"p-5 border-b border-[#E9E7E7]",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Business Permit Applications"}),t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:["Showing ",Ct+1,"-",Math.min(_e,s.length)," of ",s.length," applications"]})]}),t.jsx("div",{className:"flex items-center space-x-3",children:t.jsxs("button",{onClick:()=>window.print(),className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors flex items-center font-poppins",title:"Print Report",children:[t.jsx(rA,{className:"w-4 h-4 mr-2"}),"Print"]})})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-[#FBFBFB]",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"App ID"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Business"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Owner"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Category"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Capital"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-[#E9E7E7]",children:Se.map((Be,mt)=>{const Nt=he(Be.status),Ne=Nt.icon,Je=W(Be.business_nature),ht=ax.find(It=>Ff(Be.business_nature?.toLowerCase(),It.value))||ax[ax.length-1];return t.jsxs("tr",{className:"hover:bg-[#FBFBFB] transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"font-mono text-sm text-[#4D4A4A] font-medium",children:Be.applicant_id||`BP-${String(Be.permit_id).padStart(4,"0")}`})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-[#4D4A4A] font-montserrat",children:Be.business_name||"N/A"}),Be.trade_name&&t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:["Trade: ",Be.trade_name]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsxs("p",{className:"text-[#4D4A4A] font-poppins",children:[Be.owner_last_name,", ",Be.owner_first_name]}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:Be.owner_type||"N/A"})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Je,{className:"w-5 h-5 mr-3",style:{color:ht.color}}),t.jsx("span",{className:"text-[#4D4A4A] font-poppins truncate max-w-[150px]",children:Be.business_nature||"N/A"})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:nx(Be.capital_investment)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:Be.application_date?new Date(Be.application_date).toLocaleDateString():"N/A"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:`inline-flex items-center px-3 py-1.5 rounded-full ${Nt.bgColor} ${Nt.color}`,children:[t.jsx(Ne,{className:`w-4 h-4 mr-2 ${Nt.color}`}),t.jsx("span",{className:`text-sm font-medium ${Nt.color} font-poppins`,children:Nt.text})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx("button",{onClick:()=>ee(Be),title:"View Details",className:"p-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#4A90E2]/80 transition-colors",children:t.jsx(ws,{className:"w-5 h-5"})})})})]},mt)})})]})}),s.length===0&&!n&&t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(Ur,{className:"w-12 h-12 text-[#E9E7E7] mx-auto mb-4"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70",children:"No business permits match your filters"}),t.jsx("button",{onClick:()=>{p(""),b("all"),w("all"),j("all"),u([null,null])},className:"mt-4 text-[#4CAF50] hover:underline font-poppins",children:"Clear all filters"})]}),s.length>gt&&t.jsx("div",{className:"p-5 border-t border-[#E9E7E7]",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:["Page ",ne," of ",Xe]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>V(Be=>Math.max(Be-1,1)),disabled:ne===1,className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-poppins",children:"Previous"}),t.jsx("button",{onClick:()=>V(Be=>Math.min(Be+1,Xe)),disabled:ne===Xe,className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-poppins",children:"Next"})]})]})})]}),o&&t.jsx("div",{className:"mt-6 p-4 bg-[#E53935] bg-opacity-20 border border-[#E53935] border-opacity-30 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ks,{className:"w-5 h-5 text-[#E53935] mr-3"}),t.jsx("p",{className:"text-[#4D4A4A] font-poppins",children:o}),t.jsx("button",{onClick:()=>l(null),className:"ml-auto text-sm text-[#4CAF50] hover:underline",children:"Dismiss"})]})}),Y&&L&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-md p-4 overflow-auto animate-fadeIn",children:t.jsxs("div",{className:"w-full max-w-7xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl transform transition-all",children:[t.jsxs("div",{className:"relative p-6 bg-gradient-to-r from-gray-50 via-white to-gray-50 dark:from-slate-800 dark:via-slate-700 dark:to-slate-800 border-b-4 border-green-400",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-400 to-green-500 p-3 rounded-2xl shadow-xl",children:t.jsx(Ur,{className:"w-10 h-10 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Business Permit"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Business Permit Application Details"})]})]}),t.jsx("button",{onClick:Ie,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-all",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-blue-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Permit ID"}),t.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white font-mono",children:["BP-",String(L.permit_id).padStart(4,"0")]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-purple-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Date Applied"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:L.created_at?new Date(L.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-green-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Status"}),t.jsx("span",{className:`inline-block px-3 py-1 text-sm font-bold rounded-full ${et(L.status)}`,children:L.uiStatus||Ve(L.status)})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-orange-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Capital Investment"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:nx(L.capital_investment)})]})]})]}),t.jsxs("div",{className:"p-8 space-y-8 max-h-[80vh] overflow-y-auto bg-gradient-to-b from-gray-50 to-white dark:from-slate-900 dark:to-slate-800",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-blue-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:t.jsx(gr,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Applicant Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white mt-1",children:[L.owner_last_name,", ",L.owner_first_name," ",L.owner_middle_name]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Owner Type"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.owner_type||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Citizenship"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.citizenship||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Date of Birth"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.date_of_birth?new Date(L.date_of_birth).toLocaleDateString():"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Contact Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.contact_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email Address"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.email_address||"N/A"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Home Address"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.home_address||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Valid ID"}),t.jsxs("p",{className:"text-gray-900 dark:text-white mt-1",children:[L.valid_id_type||"N/A",": ",L.valid_id_number||"N/A"]})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-green-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-3 rounded-xl shadow-lg",children:t.jsx(Ba,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Business Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Business Name"}),t.jsx("p",{className:"text-xl font-bold text-[#4CAF50] mt-1",children:L.business_name||"N/A"}),L.trade_name&&t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Trading as: ",L.trade_name]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Nature of Business"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.business_nature||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Building Type"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.building_type||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Capital Investment"}),t.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-1",children:nx(L.capital_investment)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Business Area"}),t.jsxs("p",{className:"text-gray-900 dark:text-white mt-1",children:[L.business_area||"0"," sqm"]})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-orange-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-xl shadow-lg",children:t.jsx(Ec,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Business Address"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"House/Building No."}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.house_bldg_no||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Street"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.street||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Barangay"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.barangay||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"City/Municipality"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.city_municipality||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Province"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.province||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Zip Code"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.zip_code||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-purple-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-3 rounded-xl shadow-lg",children:t.jsx(jr,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Operations Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Operation Hours"}),t.jsxs("p",{className:"text-gray-900 dark:text-white mt-1",children:[Et(L.operation_time_from)," - ",Et(L.operation_time_to)]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Operation Type"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.operation_type||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Total Employees"}),t.jsxs("p",{className:"text-gray-900 dark:text-white mt-1",children:[L.total_employees||"0"," (",L.male_employees||"0"," male, ",L.female_employees||"0"," female)"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Employees in QC"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:L.employees_in_qc||"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Delivery Vehicles"}),t.jsxs("p",{className:"text-gray-900 dark:text-white mt-1",children:["Vans/Trucks: ",L.delivery_van_truck||"0",", Motorcycles: ",L.delivery_motorcycle||"0"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Total Floor Area"}),t.jsxs("p",{className:"text-gray-900 dark:text-white mt-1",children:[L.total_floor_area||"0"," sqm"]})]})]})]}),L.documents&&L.documents.length>0?t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-indigo-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Submitted Documents"}),t.jsxs("span",{className:"ml-2 bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-sm font-bold",children:[L.documents.length," files"]})]}),t.jsxs("button",{onClick:ue,className:"flex items-center gap-2 text-sm text-[#4CAF50] hover:text-[#FDA811] transition-colors",children:[t.jsxs("span",{children:[G?"Hide":"View"," Documents"]}),t.jsx(pA,{className:`w-4 h-4 transition-transform ${G?"rotate-90":""}`})]})]}),G&&t.jsx("div",{className:"mt-4",children:L.documents&&L.documents.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:L.documents.map((Be,mt)=>{const Nt=Mt(Be.file_type,Be.document_name),Ne=Nt.icon,Je=vt(Be.file_type,Be.document_name),ht=Be.document_type?Be.document_type.replace(/_/g," ").replace(/\b\w/g,It=>It.toUpperCase()):"Document";return t.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-3 rounded-lg ${Je?"bg-green-100 dark:bg-green-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:Je?t.jsx(io,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):t.jsx(Ne,{className:"w-5 h-5 text-blue-600 dark:text-blue-400",style:{color:Nt.iconColor}})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:ht}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:Be.document_name||"No filename"}),t.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:[Ye(Be.file_type,Be.document_name),Be.file_size?`  ${(Be.file_size/1024).toFixed(2)} KB`:""]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[Je&&t.jsx("button",{onClick:()=>fe(Be),className:"p-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#FDA811] transition-colors",title:"View document",children:t.jsx(ws,{className:"w-4 h-4"})}),t.jsx("a",{href:Be.file_path?`${rx}/uploads/${Be.file_path.split("/").pop()}`:"#",target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#4A90E2]/80 transition-colors",title:"Download document",download:!0,onClick:It=>{Be.file_path||(It.preventDefault(),alert("Download link not available"))},children:t.jsx(nn,{className:"w-4 h-4"})})]})]},mt)})}):t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600",children:[t.jsx(Kt,{className:"w-12 h-12 text-gray-300 dark:text-gray-500 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No documents submitted for this application."})]})})]}):t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-gray-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-gray-400 to-gray-500 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Submitted Documents"})]}),t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-xl",children:[t.jsx(Kt,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No files uploaded for this application."})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-yellow-100 dark:border-slate-700",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Review Comments",L.comments&&t.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",Gt(L.comments).length," comment",Gt(L.comments).length!==1?"s":"",")"]})]}),t.jsx("div",{className:"space-y-4 mb-6",children:L.comments&&L.comments.trim()?t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600 overflow-hidden",children:[t.jsx("div",{className:"max-h-64 overflow-y-auto p-4",children:Gt(L.comments).map((Be,mt)=>t.jsxs("div",{className:`mb-4 ${mt!==0?"pt-4 border-t border-gray-200 dark:border-slate-600":""}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[t.jsx(gr,{className:"w-4 h-4 mr-2"}),"Admin Comment"]}),t.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[t.jsx(jr,{className:"w-3 h-3 mr-1"}),Be.timestamp]})]}),t.jsx("div",{className:"pl-6",children:t.jsx("p",{className:"text-gray-900 dark:text-white bg-white dark:bg-slate-800 p-3 rounded border border-gray-100 dark:border-slate-500",children:Be.comment})})]},mt))}),t.jsx("div",{className:"px-4 py-3 bg-gray-100 dark:bg-slate-800 border-t border-gray-200 dark:border-slate-600",children:t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: ",Gt(L.comments).length," comment",Gt(L.comments).length!==1?"s":""]})})]}):t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600",children:[t.jsx(c0,{className:"w-12 h-12 text-gray-300 dark:text-gray-500 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No comments yet. Add your first comment below."})]})})]}),t.jsx("div",{className:"flex justify-end pt-8 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-6 border-t-4 border-gray-300 dark:border-slate-600",children:t.jsxs("button",{onClick:Ie,className:"px-8 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2",children:[t.jsx(ls,{className:"w-5 h-5"}),"Close"]})})]})]})}),te&&$&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-0",children:t.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[t.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 p-4 flex justify-between items-center bg-gradient-to-b from-black/70 to-transparent",children:[t.jsx("div",{className:"flex items-center gap-3 text-white",children:t.jsxs("div",{className:"flex items-center gap-2",children:[vt($.file_type,$.name)?t.jsx(io,{className:"w-5 h-5"}):t.jsx(Kt,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm font-medium truncate max-w-xs",children:$.name}),t.jsx("span",{className:"text-xs text-gray-300",children:Ye($.file_type,$.name)})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[vt($.file_type,$.name)&&t.jsxs("div",{className:"flex items-center gap-1 mr-4 bg-black/40 rounded-lg p-1",children:[t.jsx("button",{onClick:ts,className:"p-2 text-white hover:bg-white/10 rounded transition-colors",title:"Zoom Out",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})})}),t.jsxs("button",{onClick:as,className:"px-3 py-2 text-xs text-white hover:bg-white/10 rounded transition-colors",title:"Reset Zoom",children:[I,"%"]}),t.jsx("button",{onClick:Pt,className:"p-2 text-white hover:bg-white/10 rounded transition-colors",title:"Zoom In",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})]}),t.jsxs("a",{href:$.url,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm flex items-center gap-1.5 transition-colors",download:!0,children:[t.jsx(nn,{className:"w-4 h-4 mr-2"}),"Download"]}),t.jsx("button",{onClick:Zt,className:"ml-2 p-2 text-white hover:bg-white/10 rounded-lg transition-colors",title:"Close preview",children:t.jsx(ls,{className:"w-6 h-6"})})]})]}),vt($.file_type,$.name)?t.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-hidden cursor-move",onWheel:Me,onMouseDown:ct,children:t.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:t.jsx("img",{ref:De,id:"preview-image",src:$.url,alt:$.name,className:"max-w-full max-h-[80vh] object-contain rounded-lg shadow-2xl transition-transform duration-200 ease-out",style:{transform:"scale(1)",position:"relative",left:"0px",top:"0px",cursor:"default"},onError:Be=>{console.error("Failed to load image:",$.url),Be.target.onerror=null,Be.target.src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300"><rect width="400" height="300" fill="%23222222"/><text x="200" y="150" text-anchor="middle" font-family="Arial" font-size="16" fill="%23ffffff">Image not found</text><text x="200" y="170" text-anchor="middle" font-family="Arial" font-size="12" fill="%23999999">URL: '+$.url+"</text></svg>",Be.target.className="max-w-md mx-auto bg-gray-800 rounded-lg p-8"}})})}):t.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:t.jsxs("div",{className:"text-center max-w-md bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20",children:[t.jsx("div",{className:"text-gray-300 mb-6",children:$.file_type?.includes("pdf")||$.name?.endsWith(".pdf")?t.jsx(Kt,{className:"w-24 h-24 mx-auto"}):$.file_type?.includes("image/")?t.jsx(io,{className:"w-24 h-24 mx-auto"}):t.jsx(Kt,{className:"w-24 h-24 mx-auto"})}),t.jsx("h3",{className:"text-xl font-medium text-white mb-3",children:Ye($.file_type,$.name)}),t.jsx("p",{className:"text-gray-300 mb-6",children:"This file cannot be previewed in browser."}),t.jsxs("div",{className:"flex gap-3 justify-center",children:[t.jsxs("a",{href:$.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",download:!0,children:[t.jsx(nn,{className:"w-5 h-5 mr-2"}),"Download"]}),t.jsx("button",{onClick:Zt,className:"inline-flex items-center justify-center px-5 py-2.5 border border-white/30 text-white hover:bg-white/10 rounded-lg transition-colors",children:"Close"})]})]})}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 p-4 flex justify-between items-center text-white/60 text-sm",children:[t.jsx("div",{className:"flex items-center gap-2",children:vt($.file_type,$.name)&&t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})}),t.jsxs("span",{children:[I,"%"]}),t.jsx("span",{className:"text-xs ml-4",children:"Drag to pan when zoomed"})]})}),t.jsxs("div",{children:[t.jsx("span",{className:"hidden sm:inline",children:"Press "}),t.jsx("kbd",{className:"px-2 py-1 bg-black/40 rounded text-xs mx-1",children:"ESC"}),t.jsx("span",{className:"hidden sm:inline",children:" to close"})]})]}),t.jsx("div",{className:"absolute inset-0 -z-10 cursor-pointer",onClick:Zt})]})}),le&&t.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:t.jsx("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl p-6 transform transition-all",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:t.jsx(Us,{className:"h-10 w-10 text-green-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] mb-2",children:"Success!"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 mb-6",children:st}),t.jsx("div",{className:"flex justify-center space-x-3",children:t.jsxs("button",{onClick:()=>{ye(!1),ce("")},className:"px-6 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#4CAF50]/80 transition-colors font-medium flex items-center",children:[t.jsx(Us,{className:"w-4 h-4 mr-2"}),"Continue"]})})]})})})]})}function tw({service:a,permitId:e,action:s,actor:r="admin",comment:n=""}){try{const i="tx_log",o=JSON.parse(localStorage.getItem(i)||"[]"),l={id:`${a}-${Date.now()}`,service:a,permitId:e,action:s,actor:r,comment:n,timestamp:new Date().toISOString()};return o.unshift(l),localStorage.setItem(i,JSON.stringify(o)),l}catch(i){return console.error("txLogger error",i),null}}const Df="/backend/business_permit";function Lde(){const[a,e]=C.useState(null),[s,r]=C.useState(!1),[n,i]=C.useState([]),[o,l]=C.useState(""),[c,u]=C.useState(!0),[m,A]=C.useState(null),[g,p]=C.useState("all"),[v,b]=C.useState("latest"),[y,w]=C.useState(""),[B,j]=C.useState("all"),[E,S]=C.useState({total:0,pending:0,approved:0,rejected:0}),[T,M]=C.useState(!1),[D,P]=C.useState({}),[Y,Q]=C.useState(!1),[L,ae]=C.useState(""),ne=C.useMemo(()=>{const he=n.length,W=n.filter(_e=>_e.status==="APPROVED").length,ve=n.filter(_e=>_e.status==="PENDING"||!_e.status).length,Qe=n.filter(_e=>_e.status==="REJECTED").length,Ze=n.filter(_e=>_e.status==="COMPLIANCE").length,J=he>0?(W/he*100).toFixed(1):"0.0",He={};n.forEach(_e=>{const Se=_e.barangay||"Unknown";He[Se]=(He[Se]||0)+1});const xt=Object.entries(He).sort((_e,Se)=>Se[1]-_e[1])[0]||["N/A",0],Xe={};n.forEach(_e=>{const Se=_e.business_nature||"Unknown";Xe[Se]=(Xe[Se]||0)+1});const Ct=Object.entries(Xe).sort((_e,Se)=>Se[1]-_e[1])[0]||["N/A",0];return{total:he,approved:W,pending:ve,rejected:Qe,compliance:Ze,approvalRate:J,topBarangay:{name:xt[0],count:xt[1]},topNature:{name:Ct[0],count:Ct[1]}}},[n]),V=he=>{if(!he)return"N/A";try{return new Date(he).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return he}},O=(he,W)=>{const ve=[...he];switch(W){case"latest":return ve.sort((Qe,Ze)=>new Date(Ze.application_date||0)-new Date(Qe.application_date||0));case"oldest":return ve.sort((Qe,Ze)=>new Date(Qe.application_date||0)-new Date(Ze.application_date||0));case"name_asc":return ve.sort((Qe,Ze)=>{const J=`${Qe.owner_last_name} ${Qe.owner_first_name}`.toLowerCase(),He=`${Ze.owner_last_name} ${Ze.owner_first_name}`.toLowerCase();return J.localeCompare(He)});case"name_desc":return ve.sort((Qe,Ze)=>{const J=`${Qe.owner_last_name} ${Qe.owner_first_name}`.toLowerCase();return`${Ze.owner_last_name} ${Ze.owner_first_name}`.toLowerCase().localeCompare(J)});case"business_name_asc":return ve.sort((Qe,Ze)=>{const J=(Qe.business_name||"").toLowerCase(),He=(Ze.business_name||"").toLowerCase();return J.localeCompare(He)});case"capital_desc":return ve.sort((Qe,Ze)=>(parseFloat(Ze.capital_investment)||0)-(parseFloat(Qe.capital_investment)||0));default:return ve}},X=(he,W)=>{if(!W.trim())return he;const ve=W.toLowerCase();return he.filter(Qe=>{const Ze=`${Qe.owner_first_name} ${Qe.owner_middle_name} ${Qe.owner_last_name}`.toLowerCase(),J=(Qe.business_name||"").toLowerCase(),He=(Qe.trade_name||"").toLowerCase(),xt=(Qe.applicant_id||"").toLowerCase(),Xe=(Qe.email_address||"").toLowerCase(),Ct=(Qe.contact_number||"").toLowerCase(),_e=(Qe.barangay||"").toLowerCase();return Ze.includes(ve)||J.includes(ve)||He.includes(ve)||xt.includes(ve)||Xe.includes(ve)||Ct.includes(ve)||_e.includes(ve)})},$=()=>{let he=n;return g!=="all"&&(he=he.filter(W=>g==="approved"?W.status==="APPROVED":g==="pending"?W.status==="PENDING"||!W.status:g==="rejected"?W.status==="REJECTED":g==="compliance"?W.status==="COMPLIANCE":!0)),B!=="all"&&(he=he.filter(W=>(W.permit_type||"").toUpperCase()===B.toUpperCase())),he=X(he,y),he=O(he,v),he},H=he=>he?{PENDING:"Pending",APPROVED:"Approved",REJECTED:"Rejected",COMPLIANCE:"Compliance",UNDER_REVIEW:"Under Review",DOCUMENT_VERIFICATION:"Document Verification",PAYMENT_VERIFICATION:"Payment Verification",FOR_MANAGER_APPROVAL:"For Manager Approval",READY_FOR_RELEASE:"Ready for Release"}[he.toUpperCase()]||he:"Pending",te=he=>he?he.toUpperCase().replace(/\s+/g,"_"):"PENDING",K=he=>{switch(H(he)){case"Approved":return"text-[#4CAF50] bg-[#4CAF50]/10";case"Rejected":return"text-[#E53935] bg-[#E53935]/10";case"Compliance":return"text-[#FDA811] bg-[#FDA811]/10";case"Pending":return"text-[#4A90E2] bg-[#4A90E2]/10";case"Under Review":return"text-[#3B82F6] bg-[#3B82F6]/10";case"Document Verification":return"text-[#8B5CF6] bg-[#8B5CF6]/10";case"Payment Verification":return"text-[#F59E0B] bg-[#F59E0B]/10";case"For Manager Approval":return"text-[#6366F1] bg-[#6366F1]/10";case"Ready for Release":return"text-[#10B981] bg-[#10B981]/10";default:return"text-gray-600 bg-gray-100"}},I=(he,W="")=>{const ve=(he||"").toLowerCase(),Qe=(W||"").toLowerCase();return Qe.endsWith(".pdf")?"PDF Document":Qe.endsWith(".doc")||Qe.endsWith(".docx")?"Word Document":Qe.endsWith(".xls")||Qe.endsWith(".xlsx")?"Excel Spreadsheet":Qe.endsWith(".ppt")||Qe.endsWith(".pptx")?"PowerPoint Presentation":Qe.endsWith(".jpg")||Qe.endsWith(".jpeg")?"JPEG Image":Qe.endsWith(".png")?"PNG Image":Qe.endsWith(".txt")?"Text Document":ve.includes("pdf")?"PDF Document":ve.includes("word")||ve.includes("msword")||ve.includes("officedocument.wordprocessingml")?"Word Document":ve.includes("excel")||ve.includes("spreadsheetml")?"Excel Spreadsheet":ve.includes("powerpoint")||ve.includes("presentationml")?"PowerPoint Presentation":ve.includes("image/jpeg")?"JPEG Image":ve.includes("image/png")?"PNG Image":ve.includes("image/")?"Image":ve.includes("text/plain")?"Text Document":"Document"},R=(he,W="")=>{const ve=(he||"").toLowerCase(),Qe=(W||"").toLowerCase();return!!(Qe.endsWith(".jpg")||Qe.endsWith(".jpeg")||Qe.endsWith(".png")||Qe.endsWith(".gif")||Qe.endsWith(".bmp")||Qe.endsWith(".webp")||Qe.endsWith(".svg")||ve.includes("image/jpeg")||ve.includes("image/png")||ve.includes("image/gif")||ve.includes("image/bmp")||ve.includes("image/webp")||ve.includes("image/svg"))},G=he=>he===g?"bg-[#4CAF50] text-white":"bg-gray-100 text-gray-600",se=he=>he===g?"border-[#4CAF50]":"border-transparent",le=he=>he===g?"text-[#4CAF50] dark:text-[#4CAF50]":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",ye=async()=>{try{u(!0),A(null);const he=g!=="all"?g.toUpperCase():null,W=new URL(`${Df}/admin_fetch.php`,window.location.origin);he&&W.searchParams.append("status",he),y&&W.searchParams.append("search",y),v&&W.searchParams.append("sort_by",v);const ve=await fetch(W);if(!ve.ok)throw new Error(`HTTP error! status: ${ve.status}`);const Qe=await ve.json();if(Qe.success&&Qe.data)i(Qe.data),Qe.counts&&S(Qe.counts);else throw new Error(Qe.message||"Failed to fetch permits")}catch(he){A(he.message),console.error("Error fetching permits:",he)}finally{u(!1)}},De=async he=>{try{const W=await fetch(`${Df}/fetch_single.php?permit_id=${he}`);if(!W.ok)throw new Error(`HTTP error! status: ${W.status}`);const ve=await W.json();if(console.log("Fetch single result:",ve),ve.success&&ve.data){if(!ve.data.documents||ve.data.documents.length===0){const Qe=await me(he);ve.data.documents=Qe}return ve.data}else throw new Error(ve.message||"Failed to fetch permit details")}catch(W){return console.error("Error fetching single permit:",W),null}},me=async he=>{try{const W=await fetch(`${Df}/fetch_documents.php?permit_id=${he}`);if(!W.ok)throw new Error(`HTTP error! status: ${W.status}`);const ve=await W.json();return ve.success&&ve.data?ve.data:[]}catch(W){return console.error("Error fetching documents:",W),[]}},Te=async(he,W,ve="")=>{try{const Qe=te(W),Ze={permit_id:he,status:Qe,comments:ve};console.log("updatePermitStatus sending:",JSON.stringify(Ze));const J=await fetch(`${Df}/update_status.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ze)});if(!J.ok){const _e=await J.json().catch(()=>({}));throw new Error(_e.message||"Failed to update permit status")}const He=await J.json();if(!He.success)throw new Error(He.message||"Failed to update permit status");const xt={action:W,timestamp:new Date().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),notes:ve||"",by:"Admin"};P(_e=>({..._e,[he]:[..._e[he]||[],xt]}));const Xe=He.data?.status||Qe,Ct=H(Xe);a&&e(_e=>({..._e,status:Xe,uiStatus:Ct,comments:He.data?.comments||_e.comments})),await ye(),l(""),dt.fire({icon:"success",title:"Success!",text:`Permit ${W.toLowerCase()} successfully!`,confirmButtonColor:"#4CAF50",timer:2e3,showConfirmButton:!0});try{tw({service:"business_permit",permitId:he,action:"update_status",status:W,comment:ve})}catch(_e){console.error("Error logging transaction:",_e)}}catch(Qe){console.error("Error updating permit status:",Qe),A(Qe.message||"Failed to update permit status"),dt.fire({icon:"error",title:"Error",text:"Error updating status: "+Qe.message,confirmButtonColor:"#E53935"})}},we=async()=>{if(!(!a||!o.trim()))try{const he=await fetch(`${Df}/update_status.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({permit_id:a.permit_id,comments:o})});if(!he.ok){const ve=await he.json().catch(()=>({}));throw new Error(ve.message||"Failed to save comment")}const W=await he.json();if(!W.success)throw new Error(W.message||"Failed to save comment");e(ve=>({...ve,comments:W.data?.comments||ve.comments})),i(ve=>ve.map(Qe=>Qe.permit_id===a.permit_id?{...Qe,comments:W.data?.comments||Qe.comments}:Qe)),l(""),dt.fire({icon:"success",title:"Success!",text:"Comment saved successfully!",confirmButtonColor:"#4CAF50",timer:2e3,showConfirmButton:!0});try{tw({service:"business_permit",permitId:a.permit_id,action:"add_comment",comment:o})}catch(ve){console.error("Error logging transaction:",ve)}}catch(he){console.error("Error saving comment:",he),A(he.message||"Failed to save comment"),dt.fire({icon:"error",title:"Error",text:"Error saving comment: "+he.message,confirmButtonColor:"#E53935"})}};C.useEffect(()=>{ye()},[g,v,y]);const st=async he=>{try{const W=await De(he.permit_id);if(W){const ve=H(W.status);e({...W,uiStatus:ve})}else{const ve=H(he.status);e({...he,uiStatus:ve})}l(""),r(!0)}catch(W){console.error("Error opening modal:",W);const ve=H(he.status);e({...he,uiStatus:ve}),l(""),r(!0)}},ce=()=>{e(null),l(""),r(!1)},tt=async()=>{if(!a)return;const he=await dt.fire({title:"Approve Permit?",html:`
        <div class="text-left">
          <p class="mb-2">You are about to approve this business permit application:</p>
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <p class="text-sm"><strong>Permit ID:</strong> ${a.permit_id}</p>
            <p class="text-sm"><strong>Business:</strong> ${a.business_name}</p>
            <p class="text-sm"><strong>Owner:</strong> ${a.owner_first_name} ${a.owner_last_name}</p>
          </div>
          <p class="text-sm text-gray-600">This action will approve the application.</p>
        </div>
      `,icon:"question",input:"textarea",inputLabel:"Add approval notes (optional)",inputPlaceholder:"Enter any additional notes...",inputValue:o,showCancelButton:!0,confirmButtonText:"Yes, Approve",cancelButtonText:"Cancel",confirmButtonColor:"#4CAF50",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-left"}});if(he.isConfirmed){const W=he.value||o;await Te(a.permit_id,"Approved",W),l("")}},Ae=async()=>{if(!a)return;const he=await dt.fire({title:"Reject Application?",html:`
        <div class="text-left">
          <p class="mb-2">You are about to reject this business permit application:</p>
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <p class="text-sm"><strong>Permit ID:</strong> ${a.permit_id}</p>
            <p class="text-sm"><strong>Business:</strong> ${a.business_name}</p>
            <p class="text-sm"><strong>Owner:</strong> ${a.owner_first_name} ${a.owner_last_name}</p>
          </div>
          <p class="text-sm text-red-600">Please provide a reason for rejection.</p>
        </div>
      `,icon:"warning",input:"textarea",inputLabel:"Reason for rejection (required)",inputPlaceholder:"Enter the reason for rejecting this application...",inputValue:o,inputValidator:W=>{if(!W)return"You must provide a reason for rejection!"},showCancelButton:!0,confirmButtonText:"Yes, Reject",cancelButtonText:"Cancel",confirmButtonColor:"#E53935",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-left"}});he.isConfirmed&&(await Te(a.permit_id,"Rejected",he.value),l(""))},gt=async()=>{if(!a)return;const he=await dt.fire({title:"Mark for Compliance?",html:`
        <div class="text-left">
          <p class="mb-2">You are about to mark this application for compliance:</p>
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <p class="text-sm"><strong>Permit ID:</strong> ${a.permit_id}</p>
            <p class="text-sm"><strong>Business:</strong> ${a.business_name}</p>
            <p class="text-sm"><strong>Owner:</strong> ${a.owner_first_name} ${a.owner_last_name}</p>
          </div>
        </div>
      `,icon:"question",input:"textarea",inputLabel:"Add compliance notes (optional)",inputPlaceholder:"Enter any additional notes...",inputValue:o,showCancelButton:!0,confirmButtonText:"Mark for Compliance",cancelButtonText:"Cancel",confirmButtonColor:"#FDA811",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-left"}});he.isConfirmed&&(await Te(a.permit_id,"Compliance",he.value||""),l(""))},q=async(he,W,ve,Qe)=>{if(!a)return;const Ze=await dt.fire({title:W,html:`
        <div class="text-left">
          <p class="mb-3">${ve}</p>
          <div class="mt-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">Add a comment (optional):</label>
            <textarea 
              id="status-comment" 
              class="w-full border border-gray-300 rounded-lg px-3 py-2" 
              rows="3" 
              placeholder="Enter any additional notes..."
            >${o}</textarea>
          </div>
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonText:"Update Status",cancelButtonText:"Cancel",confirmButtonColor:Qe,cancelButtonColor:"#6B7280",preConfirm:()=>document.getElementById("status-comment").value});Ze.isConfirmed&&await Te(a.permit_id,he,Ze.value||"")},Qt=async he=>{try{if(!he||!he.file_path){dt.fire({icon:"warning",title:"File Unavailable",text:"File path not available",confirmButtonColor:"#FDA811"});return}const W=he.file_path.split("/").pop(),ve=`${Df}/uploads/${encodeURIComponent(W)}`,Qe=he.document_name||he.document_type||"Document";if(R(he.file_type,he.document_name||W))dt.fire({title:Qe,text:I(he.file_type,W),imageUrl:ve,imageAlt:Qe,showCloseButton:!0,showConfirmButton:!0,showDenyButton:!0,confirmButtonText:"Download",denyButtonText:"Close",confirmButtonColor:"#4A90E2",denyButtonColor:"#6B7280",width:"80%",customClass:{image:"max-h-[70vh] object-contain rounded-lg"}}).then(J=>{J.isConfirmed&&window.open(ve,"_blank")});else{const J=(he.file_type||"").toLowerCase().includes("pdf")||W.toLowerCase().endsWith(".pdf");dt.fire({title:Qe,html:J?`<iframe src="${ve}" style="width:100%;height:70vh;border:none;border-radius:8px;" title="${Qe}"></iframe>`:`<div style="text-align:center;padding:40px 0;">
              <div style="font-size:64px;margin-bottom:16px;"></div>
              <p style="color:#6b7280;margin-bottom:8px;">${I(he.file_type,W)}</p>
              <p style="color:#9ca3af;font-size:14px;">${W}</p>
            </div>`,showCloseButton:!0,showConfirmButton:!0,showDenyButton:!0,confirmButtonText:J?"Open in New Tab":"Download",denyButtonText:"Close",confirmButtonColor:"#4A90E2",denyButtonColor:"#6B7280",width:J?"90%":"500px"}).then(He=>{He.isConfirmed&&window.open(ve,"_blank")})}}catch(W){console.error("Error accessing file:",W),dt.fire({icon:"error",title:"Error",text:"Unable to access the file",confirmButtonColor:"#E53935"})}},yt=he=>{if(!he||typeof he!="string")return[];try{const W=he.split(/(?=---\s+.+?\s+---)/g),ve=[];for(let Qe of W){if(Qe=Qe.trim(),!Qe)continue;const Ze=Qe.match(/^---\s+(.+?)\s+---\n([\s\S]*)$/);if(Ze){const J=Ze[1].trim(),He=Ze[2].trim();He&&ve.push({timestamp:J,comment:He})}else ve.push({timestamp:"Just now",comment:Qe})}return ve}catch(W){return console.error("Error formatting comments:",W),[{timestamp:"Recent",comment:he}]}},Oe=he=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(he||0),ze=he=>{if(!he)return"N/A";try{const[W,ve]=he.split(":"),Qe=new Date;return Qe.setHours(W,ve),Qe.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}catch{return he}};if(c)return t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#4CAF50]"})});const Le=()=>{Q(!0),ae("csv");const W=[["Application ID","Applicant Name","Business Name","Permit Type","Permit Subtype","TODA","Barangay","Vehicle","Plate Number","Status","Contact","Email","Application Date"].join(","),...n.map(J=>[J.permit_id,J.owner_first_name+" "+J.owner_last_name,J.business_name,J.permit_type,J.permit_subtype,J.toda_name,J.barangay_of_operation,`${J.make_brand} ${J.model}`,J.plate_number,J.status,J.contact_number,J.email,V(J.created_at)].map(He=>`"${He||""}"`).join(","))].join(`
`),ve=new Blob([W],{type:"text/csv"}),Qe=window.URL.createObjectURL(ve),Ze=document.createElement("a");Ze.href=Qe,Ze.download=`business-permits-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Ze),Ze.click(),document.body.removeChild(Ze),window.URL.revokeObjectURL(Qe),Q(!1),ae("")},oe=async()=>{Q(!0),ae("pdf");try{const he=document.createElement("div");he.style.position="absolute",he.style.left="-9999px",he.style.width="800px",he.style.backgroundColor="#ffffff",he.style.padding="20px",he.style.fontFamily="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",he.style.color="#1f2937",document.body.appendChild(he);const W=document.createElement("div");W.style.marginBottom="20px",W.style.borderBottom="2px solid #4CAF50",W.style.paddingBottom="15px",W.innerHTML=`
        <h1 style="color: #1f2937; font-size: 24px; font-weight: bold; margin: 0;">
          Business Permit Report
        </h1>
        <p style="color: #6b7280; margin:5px 0;">
          Generated on ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}
        </p>
        <div style="display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap;">
          <span style="background: #4CAF50; color: white; padding: 3px 10px; border-radius: 15px; font-size: 11px;">
            Total: ${ne.total}
          </span>
          <span style="background: #4CAF50; color: white; padding: 3px 10px; border-radius: 15px; font-size: 11px;">
            Approved: ${ne.approved}
          </span>
          <span style="background: #FDA811; color: white; padding: 3px 10px; border-radius: 15px; font-size: 11px;">
            Compliance: ${ne.compliance}
          </span>
          <span style="background: #E53935; color: white; padding: 3px 10px; border-radius: 15px; font-size: 11px;">
            Rejected: ${ne.rejected}
          </span>
        </div>
      `,he.appendChild(W);const ve=document.createElement("div");ve.style.marginBottom="25px",ve.style.padding="15px",ve.style.backgroundColor="#f9fafb",ve.style.borderRadius="8px",ve.style.border="1px solid #e5e7eb",ve.innerHTML=`
        <h2 style="color: #1f2937; font-size: 16px; font-weight: bold; margin: 0 0 10px 0;">Summary</h2>
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; font-size: 12px;">
          <div>
            <strong>Approval Rate:</strong> ${ne.approvalRate}%
          </div>
          <div>
            <strong>Top Barangay:</strong> ${ne.topBarangay.name} (${ne.topBarangay.count} applications)
          </div>
          <div>
            <strong>Top Business Nature:</strong> ${ne.topNature.name} (${ne.topNature.count})
          </div>
          <div>
            <strong>Pending Review:</strong> ${ne.pending}
          </div>
        </div>
      `,he.appendChild(ve);const Qe=document.createElement("div");Qe.innerHTML=`
        <h2 style="color: #1f2937; font-size: 18px; font-weight: bold; margin-bottom: 15px;">Applications List</h2>
        <table style="width: 100%; border-collapse: collapse; font-size: 10px;">
          <thead>
            <tr style="background: #f3f4f6; border-bottom: 2px solid #e5e7eb;">
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">ID</th>
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">Applicant</th>
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">Business</th>
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">TODA</th>
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">Barangay</th>
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">Vehicle</th>
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">Plate Number</th>
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">Status</th>
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">Date</th>
            </tr>
          </thead>
          <tbody>
            ${$().slice(0,20).map(vt=>{const Mt=vt.status==="Approved"?"#4CAF50":vt.status==="Compliance"?"#FDA811":"#E53935";return`
                <tr style="border-bottom: 1px solid #e5e7eb;">
                  <td style="padding: 8px; border: 1px solid #e5e7eb;">BP-${String(vt.permit_id).padStart(4,"0")}</td>
                  <td style="padding: 8px; border: 1px solid #e5e7eb;">${vt.owner_first_name} ${vt.owner_last_name}</td>
                  <td style="padding: 8px; border: 1px solid #e5e7eb;">${vt.business_name}</td>
                  <td style="padding: 8px; border: 1px solid #e5e7eb;">${vt.toda_name}</td>
                  <td style="padding: 8px; border: 1px solid #e5e7eb;">${vt.barangay_of_operation}</td>
                  <td style="padding: 8px; border: 1px solid #e5e7eb;">${vt.make_brand} ${vt.model}</td>
                  <td style="padding: 8px; border: 1px solid #e5e7eb;">${vt.plate_number}</td>
                  <td style="padding: 8px; border: 1px solid #e5e7eb; color: ${Mt}; font-weight: 500;">
                    ${vt.status}
                  </td>
                  <td style="padding: 8px; border: 1px solid #e5e7eb;">${V(vt.created_at)}</td>
                </tr>
              `}).join("")}
          </tbody>
        </table>
        ${$().length>20?`<p style="text-align: center; color: #6b7280; font-size: 10px; margin-top: 10px;">
            ... and ${$().length-20} more applications
          </p>`:""}
      `,he.appendChild(Qe);const Ze=document.createElement("div");Ze.style.marginTop="25px",Ze.style.padding="15px",Ze.style.backgroundColor="#f9fafb",Ze.style.borderRadius="8px",Ze.style.border="1px solid #e5e7eb",Ze.innerHTML=`
        <h2 style="color: #1f2937; font-size: 16px; font-weight: bold; margin: 0 0 10px 0;">Status Distribution</h2>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; font-size: 12px;">
          <div style="text-align: center;">
            <div style="font-size: 20px; font-weight: bold; color: #4CAF50;">${ne.approved}</div>
            <div style="color: #6b7280;">Approved</div>
          </div>
          <div style="text-align: center;">
            <div style="font-size: 20px; font-weight: bold; color: #FDA811;">${ne.compliance}</div>
            <div style="color: #6b7280;">Compliance</div>
          </div>
          <div style="text-align: center;">
            <div style="font-size: 20px; font-weight: bold; color: #E53935;">${ne.rejected}</div>
            <div style="color: #6b7280;">Rejected</div>
          </div>
        </div>
      `,he.appendChild(Ze);const J=document.createElement("div");J.style.marginTop="30px",J.style.paddingTop="15px",J.style.borderTop="1px solid #e5e7eb",J.style.color="#6b7280",J.style.fontSize="10px",J.innerHTML=`
        <p style="margin: 0;">Generated by Business Permit Management System</p>
        <p style="margin: 5px 0 0 0;">Total Records: ${n.length}  Filtered: ${$().length}</p>
      `,he.appendChild(J),await new Promise(vt=>setTimeout(vt,100));const He=await Tu(he,{scale:2,useCORS:!0,backgroundColor:"#ffffff",logging:!1}),xt=He.toDataURL("image/png"),Xe=new Es({orientation:"portrait",unit:"mm",format:"a4"}),Ct=190,_e=280,Se=He.height*Ct/He.width;let Ve=Se,et=10;for(Xe.addImage(xt,"PNG",10,et,Ct,Se),Ve-=_e;Ve>=0;)et=Ve-Se,Xe.addPage(),Xe.addImage(xt,"PNG",10,et,Ct,Se),Ve-=_e;Xe.save(`business-permit-report-${new Date().toISOString().split("T")[0]}.pdf`),document.body.removeChild(he)}catch(he){console.error("Error generating PDF:",he),dt.fire({title:"Export Failed",text:"Failed to generate PDF. Please try again.",icon:"error"})}finally{Q(!1),ae("")}};return t.jsxs("div",{className:"bg-white dark:bg-slate-700 p-6 rounded-lg",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-[#4CAF50]/10 p-4 rounded-lg border border-[#4CAF50]/20",children:[t.jsx("p",{className:"text-[#4CAF50] text-sm font-medium",children:"Total Applications"}),t.jsx("p",{className:"text-[#4CAF50] text-2xl font-bold",children:E.total})]}),t.jsxs("div",{className:"bg-[#4A90E2]/10 p-4 rounded-lg border border-[#4A90E2]/20",children:[t.jsx("p",{className:"text-[#4A90E2] text-sm font-medium",children:"Pending Review"}),t.jsx("p",{className:"text-[#4A90E2] text-2xl font-bold",children:E.pending})]}),t.jsxs("div",{className:"bg-[#FDA811]/10 p-4 rounded-lg border border-[#FDA811]/20",children:[t.jsx("p",{className:"text-[#FDA811] text-sm font-medium",children:"For Compliance"}),t.jsx("p",{className:"text-[#FDA811] text-2xl font-bold",children:E.approved})]}),t.jsxs("div",{className:"bg-[#E53935]/10 p-4 rounded-lg border border-[#E53935]/20",children:[t.jsx("p",{className:"text-[#E53935] text-sm font-medium",children:"Rejected"}),t.jsx("p",{className:"text-[#E53935] text-2xl font-bold",children:E.rejected})]})]}),t.jsxs("div",{className:"mb-6 bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 shadow-sm",children:[t.jsx("div",{className:"border-b border-gray-200 dark:border-slate-700 overflow-x-auto",children:t.jsx("nav",{className:"flex space-x-6 px-6 min-w-max",children:[{key:"all",label:"All Applications"},{key:"pending",label:"Pending"},{key:"compliance",label:"For Compliance"},{key:"approved",label:"Approved"},{key:"rejected",label:"Rejected"}].map(he=>t.jsxs("button",{onClick:()=>p(he.key),className:`py-4 px-2 border-b-2 font-medium text-sm flex items-center gap-2 transition-all ${se(he.key)} ${le(he.key)}`,children:[he.label,t.jsxs("span",{className:`px-2 py-1 text-xs rounded-full ${G(he.key)}`,children:[he.key==="all"&&E.total,he.key==="pending"&&E.pending,he.key==="compliance"&&0," ",he.key==="approved"&&E.approved,he.key==="rejected"&&E.rejected]})]},he.key))})}),t.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-slate-700 bg-gradient-to-r from-[#4CAF50]/5 to-[#4A90E2]/5",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[g==="all"&&"All Business Permits",g==="pending"&&"Pending Applications",g==="compliance"&&"For Compliance",g==="approved"&&"Approved Permits",g==="rejected"&&"Rejected Applications"]}),t.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:["Showing ",$().length," of ",n.length," records"]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:y,onChange:he=>w(he.target.value),onKeyPress:he=>he.key==="Enter"&&ye(),placeholder:"Search applications...",className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent w-64"}),t.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:B,onChange:he=>j(he.target.value),className:"px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent appearance-none pr-10",children:[t.jsx("option",{value:"all",children:"All Permit Types"}),t.jsx("option",{value:"NEW",children:"New"}),t.jsx("option",{value:"RENEWAL",children:"Renewal"})]}),t.jsx("svg",{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:v,onChange:he=>b(he.target.value),className:"px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent appearance-none pr-10",children:[t.jsx("option",{value:"latest",children:"Latest First"}),t.jsx("option",{value:"oldest",children:"Oldest First"}),t.jsx("option",{value:"name_asc",children:"Owner Name (A-Z)"}),t.jsx("option",{value:"name_desc",children:"Owner Name (Z-A)"}),t.jsx("option",{value:"business_name_asc",children:"Business Name (A-Z)"}),t.jsx("option",{value:"capital_desc",children:"Highest Capital"})]}),t.jsx("svg",{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsx("button",{onClick:Le,disabled:Y,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Y&&L==="csv"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),t.jsx("span",{children:"Exporting..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(nn,{className:"w-4 h-4"}),t.jsx("span",{children:"Export CSV"})]})}),t.jsx("button",{onClick:oe,disabled:Y,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Y&&L==="pdf"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),t.jsx("span",{children:"Exporting..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(nn,{className:"w-4 h-4"}),t.jsx("span",{children:"Export PDF"})]})}),t.jsxs("button",{onClick:ye,className:"px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#4CAF50]/80 transition-colors flex items-center gap-2",children:[t.jsx(Ya,{className:"w-4 h-4"}),"Refresh"]})]})]})}),t.jsxs("div",{className:"p-6",children:[m&&t.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-center",children:t.jsx("div",{className:"text-red-600 font-semibold",children:m})}),n.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No business permit applications found"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"There are currently no business permit applications in the system."}),t.jsx("button",{onClick:ye,className:"px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#FDA811] transition-colors",children:"Refresh Data"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full bg-white dark:bg-slate-800 shadow rounded-lg",children:[t.jsx("thead",{className:"bg-gradient-to-r from-[#4CAF50]/10 to-[#4A90E2]/10",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Application ID"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Business Name"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Owner"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Business Type"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Capital"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Applied Date"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Documents"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:$().map(he=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-600 dark:text-gray-300",children:he.applicant_id}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:he.business_name||"N/A"}),he.trade_name&&t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Trade: ",he.trade_name]})]}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[he.owner_last_name,", ",he.owner_first_name]}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[he.owner_type,"  ",he.citizenship]})]}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:he.business_nature||"N/A"}),t.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-gray-900 dark:text-white",children:Oe(he.capital_investment)}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:he.application_date?new Date(he.application_date).toLocaleDateString():"N/A"}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsx("span",{className:`px-3 py-1.5 text-xs font-medium rounded-full border ${K(he.status)} border-current border-opacity-30`,children:H(he.status)})}),t.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:[he.document_count||0," files"]}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsx("button",{onClick:()=>st(he),className:"inline-flex items-center px-4 py-2 text-xs font-medium rounded-lg text-white bg-[#4CAF50] hover:bg-[#FDA811] transition-all shadow-sm hover:shadow-md",children:"Review"})})]},he.permit_id))})]})})]})]}),s&&a&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-md p-4 overflow-auto animate-fadeIn",children:t.jsxs("div",{className:"w-full max-w-7xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl transform transition-all",children:[t.jsxs("div",{className:"relative p-6 bg-gradient-to-r from-gray-50 via-white to-gray-50 dark:from-slate-800 dark:via-slate-700 dark:to-slate-800 border-b-4 border-green-400",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-400 to-green-500 p-3 rounded-2xl shadow-xl",children:t.jsx(ll,{className:"w-10 h-10 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Business Permit"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Business Permit Application Details"})]})]}),t.jsx("button",{onClick:ce,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-all",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-blue-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Permit ID"}),t.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white font-mono",children:["BP-",String(a.permit_id).padStart(4,"0")]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-purple-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Applicant ID"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:a.applicant_id})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-green-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Status"}),t.jsx("span",{className:`inline-block px-3 py-1 text-sm font-bold rounded-full ${K(a.status)}`,children:a.uiStatus||H(a.status)})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-orange-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Date Applied"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:a.application_date?new Date(a.application_date).toLocaleDateString():"N/A"})]})]})]}),t.jsxs("div",{className:"p-8 space-y-8 max-h-[80vh] overflow-y-auto bg-gradient-to-b from-gray-50 to-white dark:from-slate-900 dark:to-slate-800",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-blue-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:t.jsx(gr,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Owner Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-slate-700 dark:to-slate-600 p-4 rounded-xl",children:[t.jsx("label",{className:"text-xs font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:"Full Name"}),t.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-2",children:[a.owner_last_name,", ",a.owner_first_name," ",a.owner_middle_name]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Owner Type"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.owner_type||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Citizenship"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.citizenship||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Date of Birth"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.date_of_birth?new Date(a.date_of_birth).toLocaleDateString():"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Contact Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.contact_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email Address"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.email_address||"N/A"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Home Address"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.home_address||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Valid ID"}),t.jsxs("p",{className:"text-gray-900 dark:text-white mt-1",children:[a.valid_id_type||"N/A",": ",a.valid_id_number||"N/A"]})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-green-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-3 rounded-xl shadow-lg",children:t.jsx(ll,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Business Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Business Name"}),t.jsx("p",{className:"text-xl font-bold text-[#4CAF50] mt-1",children:a.business_name||"N/A"}),a.trade_name&&t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Trading as: ",a.trade_name]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Nature of Business"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.business_nature||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Building Type"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.building_type||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Capital Investment"}),t.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-1",children:Oe(a.capital_investment)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Business Area"}),t.jsxs("p",{className:"text-gray-900 dark:text-white mt-1",children:[a.business_area||"0"," sqm"]})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-purple-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-3 rounded-xl shadow-lg",children:t.jsx(ll,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Business Address"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"House/Building No."}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.house_bldg_no||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Street"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.street||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Barangay"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.barangay||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"City/Municipality"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.city_municipality||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Province"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.province||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Zip Code"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.zip_code||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-orange-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Operations Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Operation Hours"}),t.jsxs("p",{className:"text-gray-900 dark:text-white mt-1",children:[ze(a.operation_time_from)," - ",ze(a.operation_time_to)]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Operation Type"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.operation_type||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Total Employees"}),t.jsxs("p",{className:"text-gray-900 dark:text-white mt-1",children:[a.total_employees||"0"," (",a.male_employees||"0"," male, ",a.female_employees||"0"," female)"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Employees in QC"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.employees_in_qc||"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Delivery Vehicles"}),t.jsxs("p",{className:"text-gray-900 dark:text-white mt-1",children:["Vans/Trucks: ",a.delivery_van_truck||"0",", Motorcycles: ",a.delivery_motorcycle||"0"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Total Floor Area"}),t.jsxs("p",{className:"text-gray-900 dark:text-white mt-1",children:[a.total_floor_area||"0"," sqm"]})]})]})]}),a.documents&&a.documents.length>0?t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-indigo-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Submitted Documents"}),t.jsxs("span",{className:"ml-auto bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-sm font-bold",children:[a.documents.length," files"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:a.documents.map((he,W)=>{const ve=R(he.file_type,he.document_name),Qe=he.document_type?he.document_type.replace(/_/g," "):"Document";return t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-slate-600 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[ve?t.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:t.jsx(io,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}):t.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:t.jsx(Kt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:Qe}),t.jsx("p",{className:"text-xs text-gray-500 truncate",children:he.document_name})]})]}),t.jsx("button",{onClick:()=>Qt(he),className:"px-3 py-1 text-xs bg-[#4CAF50] text-white rounded hover:bg-[#FDA811] transition-colors whitespace-nowrap",children:"View"})]},W)})})]}):t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-gray-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-gray-400 to-gray-500 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Submitted Documents"})]}),t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-xl",children:[t.jsx(Kt,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No files uploaded for this application."})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-yellow-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 p-3 rounded-xl shadow-lg",children:t.jsx(gr,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Review Comments"}),a.comments&&t.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",yt(a.comments).length," comment",yt(a.comments).length!==1?"s":"",")"]})]})]}),t.jsx("div",{className:"space-y-4 mb-6",children:a.comments&&a.comments.trim()?t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600 overflow-hidden",children:[t.jsx("div",{className:"max-h-64 overflow-y-auto p-4",children:yt(a.comments).map((he,W)=>t.jsxs("div",{className:`mb-4 ${W!==0?"pt-4 border-t border-gray-200 dark:border-slate-600":""}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Admin Comment"]}),t.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[t.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),he.timestamp]})]}),t.jsx("div",{className:"pl-6",children:t.jsx("p",{className:"text-gray-900 dark:text-white bg-white dark:bg-slate-800 p-3 rounded border border-gray-100 dark:border-slate-500",children:he.comment})})]},W))}),t.jsx("div",{className:"px-4 py-3 bg-gray-100 dark:bg-slate-800 border-t border-gray-200 dark:border-slate-600",children:t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: ",yt(a.comments).length," comment",yt(a.comments).length!==1?"s":""]})})]}):t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600",children:[t.jsx("svg",{className:"w-12 h-12 text-gray-300 dark:text-gray-500 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No comments yet. Add your first comment below."})]})}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Add New Comment"}),t.jsx("textarea",{value:o,onChange:he=>l(he.target.value),className:"w-full border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-3 bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent",rows:3,placeholder:"Enter your review notes here..."}),o.trim()&&t.jsx("div",{className:"mt-4 flex justify-end",children:t.jsxs("button",{onClick:we,className:"px-6 py-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#4A90E2]/80 transition-colors font-medium flex items-center shadow-sm hover:shadow",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Comment"]})})]})]}),(()=>{const he=D[a.permit_id]||[];return he.length>0?t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-blue-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:t.jsx(jr,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Action History"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[he.length," action",he.length!==1?"s":""," taken this session"]})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-[17px] top-0 bottom-0 w-0.5 bg-blue-200 dark:bg-slate-600"}),t.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:[...he].reverse().map((W,ve)=>t.jsxs("div",{className:"relative pl-10",children:[t.jsx("div",{className:`absolute left-[10px] top-1.5 w-4 h-4 rounded-full border-2 border-white dark:border-slate-800 shadow ${W.action==="Approved"?"bg-green-500":W.action==="Rejected"?"bg-red-500":W.action==="Compliance"||W.action==="Pending"?"bg-yellow-500":"bg-blue-500"}`}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg p-3 border border-gray-200 dark:border-slate-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:`text-sm font-semibold px-2 py-0.5 rounded-full ${W.action==="Approved"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":W.action==="Rejected"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":W.action==="Compliance"||W.action==="Pending"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}`,children:W.action}),t.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:W.timestamp})]}),W.notes&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 pl-1",children:W.notes}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1 pl-1",children:["by ",W.by]})]})]},ve))})]})]}):null})(),t.jsxs("div",{className:"flex gap-4 justify-between pt-8 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-6 border-t-4 border-gray-300 dark:border-slate-600",children:[a.status!=="REJECTED"&&t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>M(!T),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2",children:["Actions",t.jsx("svg",{className:`w-4 h-4 transition-transform ${T?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),T&&t.jsxs("div",{className:"absolute left-0 bottom-full mb-2 w-72 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden z-50 max-h-96 overflow-y-auto",children:[t.jsx("div",{className:"px-3 py-2 bg-gray-100 dark:bg-slate-700 border-b border-gray-200 dark:border-slate-600",children:t.jsx("p",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Processing Steps"})}),t.jsxs("button",{onClick:()=>{M(!1),q("Under Review","Mark as Under Review","Application is now being reviewed by the team.","#3B82F6")},className:"w-full px-4 py-3 text-left hover:bg-blue-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Kt,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Under Review"})]}),t.jsxs("button",{onClick:()=>{M(!1),q("Document Verification","Document Verification","Documents are being verified for completeness and authenticity.","#8B5CF6")},className:"w-full px-4 py-3 text-left hover:bg-purple-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Kt,{className:"w-5 h-5 text-purple-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Document Verification"})]}),t.jsxs("button",{onClick:()=>{M(!1),q("Payment Verification","Verify Payment","Payment is being verified.","#F59E0B")},className:"w-full px-4 py-3 text-left hover:bg-amber-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(fu,{className:"w-5 h-5 text-amber-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Payment Verification"})]}),t.jsxs("button",{onClick:()=>{M(!1),q("For Manager Approval","Send for Manager Approval","Application is being sent to manager for approval.","#6366F1")},className:"w-full px-4 py-3 text-left hover:bg-indigo-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(gr,{className:"w-5 h-5 text-indigo-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"For Manager Approval"})]}),t.jsxs("button",{onClick:()=>{M(!1),q("Ready for Release","Mark Ready for Release","Permit is ready for release to applicant.","#10B981")},className:"w-full px-4 py-3 text-left hover:bg-emerald-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Us,{className:"w-5 h-5 text-emerald-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Ready for Release"})]}),t.jsx("div",{className:"px-3 py-2 bg-gray-100 dark:bg-slate-700 border-b border-gray-200 dark:border-slate-600",children:t.jsx("p",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Actions"})}),t.jsxs("button",{onClick:()=>{M(!1),gt()},className:"w-full px-4 py-3 text-left hover:bg-yellow-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Ks,{className:"w-5 h-5 text-yellow-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Mark for Compliance"})]}),t.jsxs("button",{onClick:()=>{M(!1),Ae()},className:"w-full px-4 py-3 text-left hover:bg-red-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(ls,{className:"w-5 h-5 text-red-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Reject Application"})]}),t.jsxs("button",{onClick:()=>{M(!1),tt()},className:"w-full px-4 py-3 text-left hover:bg-green-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3",children:[t.jsx(Us,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:" Approve Permit"})]})]})]}),t.jsxs("button",{onClick:ce,className:"px-8 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2 ml-auto",children:[t.jsx(ls,{className:"w-5 h-5"}),"Close"]})]})]})]})})]})}const ZM="/backend/business_permit";async function Mde(a,e,s,r="eplms_business_permit_system"){const n=`${ZM}/${a}/${e}?db=${r}`;return(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json()}async function zD(a,e,s={},r="eplms_business_permit_system"){const n=new URLSearchParams({...s,db:r}).toString(),i=`${ZM}/${a}/${e}?${n}`;return(await fetch(i)).json()}function $D({status:a}){const e={verified:{icon:t.jsx(Ej,{className:"w-4 h-4"}),label:"AI Verified",bg:"bg-emerald-50 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-700",text:"text-emerald-700 dark:text-emerald-300",dot:"bg-emerald-500"},flagged:{icon:t.jsx(nQ,{className:"w-4 h-4"}),label:"AI Flagged",bg:"bg-red-50 dark:bg-red-900/30",border:"border-red-200 dark:border-red-700",text:"text-red-700 dark:text-red-300",dot:"bg-red-500"},pending:{icon:t.jsx(eQ,{className:"w-4 h-4"}),label:"AI Review Pending",bg:"bg-amber-50 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-700",text:"text-amber-700 dark:text-amber-300",dot:"bg-amber-500"},not_checked:{icon:t.jsx(Ej,{className:"w-4 h-4"}),label:"Not AI Checked",bg:"bg-gray-50 dark:bg-gray-800",border:"border-gray-200 dark:border-gray-700",text:"text-gray-500 dark:text-gray-400",dot:"bg-gray-400"}},s=e[a]||e.not_checked;return t.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full border ${s.bg} ${s.border} ${s.text}`,children:[t.jsx("span",{className:`w-2 h-2 rounded-full ${s.dot} animate-pulse`}),s.icon,t.jsx("span",{className:"text-xs font-semibold",children:s.label})]})}function qD(a){if(!a)return"not_checked";const e=a.first_name&&a.last_name,s=a.business_name&&a.business_nature,r=a.permit_type;return e&&s&&r?"verified":!e||!s?"flagged":"pending"}function Rde(){const[a,e]=C.useState([]),[s,r]=C.useState(null),[n,i]=C.useState(!0),[o,l]=C.useState(""),[c,u]=C.useState({total:0,approved:0,pending:0,rejected:0}),[m,A]=C.useState({isOpen:!1,status:"",permitId:""});C.useEffect(()=>{zD("applications","list").then(y=>{Array.isArray(y)&&(e(y),g(y))}).catch(y=>console.error("Error loading applications:",y)).finally(()=>i(!1))},[]);const g=y=>{const w=y.length,B=y.filter(S=>S.status==="Approved").length,j=y.filter(S=>S.status==="Pending").length,E=y.filter(S=>S.status==="Rejected").length;u({total:w,approved:B,pending:j,rejected:E})},p=async y=>{try{const w=await zD("applications","view",{id:y});w.success?(r(w.application),l(w.application.admin_note||"")):alert("Failed to load application details.")}catch(w){console.error(w),alert("Error loading details.")}},v=async y=>{if(s)try{if((await Mde("applications","updateStatus",{id:s.permit_id,status:y,note:o})).success){const B=a.map(j=>j.permit_id===s.permit_id?{...j,status:y,admin_note:o}:j);e(B),g(B),r({...s,status:y,admin_note:o}),A({isOpen:!0,status:y,permitId:s.permit_id})}else alert("Failed to update status.")}catch(w){console.error(w),alert("Error updating status.")}},b={Approved:{icon:t.jsx(Us,{size:24,className:"text-green-600"}),text:"approved"},Rejected:{icon:t.jsx(Ka,{size:24,className:"text-red-600"}),text:"rejected"},Pending:{icon:t.jsx(iw,{size:24,className:"text-yellow-500"}),text:"set to pending"}};return t.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-lg min-h-screen font-[Montserrat,Arial,sans-serif]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Business Permits Dashboard"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Overview of issued business permits"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-blue-100 p-4 rounded-lg",children:[t.jsx("p",{className:"text-blue-800 text-sm font-medium",children:"Total Permits"}),t.jsx("p",{className:"text-blue-900 text-2xl font-bold",children:c.total})]}),t.jsxs("div",{className:"bg-green-100 p-4 rounded-lg",children:[t.jsx("p",{className:"text-green-800 text-sm font-medium",children:"Approved"}),t.jsx("p",{className:"text-green-900 text-2xl font-bold",children:c.approved})]}),t.jsxs("div",{className:"bg-red-100 p-4 rounded-lg",children:[t.jsx("p",{className:"text-red-800 text-sm font-medium",children:"Rejected"}),t.jsx("p",{className:"text-red-900 text-2xl font-bold",children:c.rejected})]}),t.jsxs("div",{className:"bg-yellow-100 p-4 rounded-lg",children:[t.jsx("p",{className:"text-yellow-800 text-sm font-medium",children:"Pending"}),t.jsx("p",{className:"text-yellow-900 text-2xl font-bold",children:c.pending})]})]}),n?t.jsx("p",{children:"Loading applications..."}):a.length===0?t.jsx("p",{children:"No applications found."}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full bg-white dark:bg-slate-800 shadow rounded-lg",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Permit ID"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Business Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Owner"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Submitted"}),t.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Action"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.map(y=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition",children:[t.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:y.permit_id}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:y.business_name}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:y.owner_name}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:y.permit_type}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${y.status==="Approved"?"bg-green-100 text-green-800":y.status==="Rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:y.status})}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:y.date_submitted?new Date(y.date_submitted).toLocaleDateString():""}),t.jsx("td",{className:"px-6 py-4 text-sm text-center",children:t.jsx("button",{onClick:()=>p(y.permit_id),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs leading-4 font-medium rounded text-white",style:{backgroundColor:"#4A90E2"},onMouseEnter:w=>w.currentTarget.style.backgroundColor="#FDA811",onMouseLeave:w=>w.currentTarget.style.backgroundColor="#4A90E2",children:"VIEW"})})]},y.permit_id))})]})}),s&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto relative",children:[t.jsx("button",{onClick:()=>r(null),className:"absolute top-3 right-3 text-gray-600 hover:text-red-600 text-xl",children:""}),t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Application Details"}),t.jsxs("div",{className:"mb-4 p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-xl border-2 border-emerald-200 dark:border-emerald-700",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(Ej,{className:"w-5 h-5 text-emerald-600"}),t.jsx("h3",{className:"font-semibold text-gray-700",children:"AI Document Verification"}),t.jsx("div",{className:"ml-auto",children:t.jsx($D,{status:qD(s)})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[t.jsxs("div",{className:`p-3 rounded-lg border ${s.first_name&&s.last_name?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[s.first_name&&s.last_name?t.jsx(Us,{className:"w-4 h-4 text-green-600"}):t.jsx(Ka,{className:"w-4 h-4 text-red-600"}),t.jsx("span",{className:"text-xs font-semibold",children:"Owner Identity"})]}),t.jsx("p",{className:"text-xs text-gray-600",children:s.first_name&&s.last_name?"Owner identity validated":"Owner identity incomplete"})]}),t.jsxs("div",{className:`p-3 rounded-lg border ${s.business_name&&s.business_nature?"border-green-200 bg-green-50":"border-amber-200 bg-amber-50"}`,children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[s.business_name&&s.business_nature?t.jsx(Us,{className:"w-4 h-4 text-green-600"}):t.jsx(Ks,{className:"w-4 h-4 text-amber-600"}),t.jsx("span",{className:"text-xs font-semibold",children:"Business Registration"})]}),t.jsx("p",{className:"text-xs text-gray-600",children:s.business_name?`"${s.business_name}" verified against DTI records`:"Business data incomplete"})]}),t.jsxs("div",{className:`p-3 rounded-lg border ${s.permit_type?"border-green-200 bg-green-50":"border-amber-200 bg-amber-50"}`,children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[s.permit_type?t.jsx(Us,{className:"w-4 h-4 text-green-600"}):t.jsx(Ks,{className:"w-4 h-4 text-amber-600"}),t.jsx("span",{className:"text-xs font-semibold",children:"Permit Classification"})]}),t.jsx("p",{className:"text-xs text-gray-600",children:s.permit_type?`Type "${s.permit_type}" matches requirements`:"Permit type not specified"})]})]})]}),t.jsxs("section",{className:"mb-4",children:[t.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Owner Information"}),t.jsxs("div",{className:"pl-2 text-sm text-gray-700 space-y-1",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Name:"})," ",s.first_name," ",s.middle_name||""," ",s.last_name]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Type:"})," ",s.owner_type]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Email:"})," ",s.email_address]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Contact:"})," ",s.contact_number]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Citizenship:"})," ",s.citizenship]})]})]}),t.jsxs("section",{className:"mb-4",children:[t.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Business Information"}),t.jsxs("div",{className:"pl-2 text-sm text-gray-700 space-y-1",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Business Name:"})," ",s.business_name]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Nature:"})," ",s.business_nature]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Structure:"})," ",s.business_structure]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Activity:"})," ",s.business_activity]})]})]}),t.jsxs("section",{className:"mb-4",children:[t.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Permit Information"}),t.jsxs("div",{className:"pl-2 text-sm text-gray-700 space-y-1",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Permit Type:"})," ",s.permit_type]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Status:"})," ",s.status||"Pending"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Date Submitted:"})," ",s.date_submitted]}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("strong",{children:"AI Verification:"}),t.jsx($D,{status:qD(s)})]})]})]}),t.jsxs("section",{className:"mt-6 border-t pt-4",children:[t.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Admin Action"}),t.jsx("textarea",{value:o,onChange:y=>l(y.target.value),className:"w-full border rounded-md p-2 text-sm focus:ring-2 focus:ring-green-300 focus:outline-none",placeholder:"Add remarks or note..."}),t.jsxs("div",{className:"flex gap-3 mt-3",children:[t.jsx("button",{onClick:()=>v("Approved"),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition",children:"Approve"}),t.jsx("button",{onClick:()=>v("Rejected"),className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition",children:"Reject"}),t.jsx("button",{onClick:()=>v("Pending"),className:"bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600 transition",children:"Set Pending"})]})]})]})}),m.isOpen&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-lg w-full max-w-sm p-6 shadow-lg text-center",children:t.jsxs("div",{className:"flex flex-col items-center gap-3",children:[b[m.status]?.icon,t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:["You ",b[m.status]?.text," ",t.jsxs("span",{className:"font-mono",children:["Business Permit #",m.permitId]})]}),t.jsx("button",{onClick:()=>A({...m,isOpen:!1}),className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",children:"Close"})]})})})]})}function Ode(){const[a,e]=C.useState([]),[s,r]=C.useState(!0),[n,i]=C.useState(null),[o,l]=C.useState("all"),[c,u]=C.useState(null),[m,A]=C.useState(!1),[g,p]=C.useState(""),[v,b]=C.useState(""),[y,w]=C.useState("application_id"),[B,j]=C.useState("desc"),[E,S]=C.useState(1),[T,M]=C.useState(!1),[D,P]=C.useState(!1),[Y,Q]=C.useState(null),[L,ae]=C.useState(100),[ne,V]=C.useState(!1),[O,X]=C.useState({x:0,y:0}),[$,H]=C.useState({x:0,y:0}),[te,K]=C.useState(!1),[I,R]=C.useState(""),[G,se]=C.useState(!1),[le,ye]=C.useState({}),De=C.useRef(null),me=10,Te="/backend/building_permit",we=(Ye,Et)=>Ye?Ye.startsWith("image/"):Et?[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"].some(ee=>Et.toLowerCase().endsWith(ee)):!1,st=Ye=>{if(!Ye)return"N/A";try{return new Date(Ye).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},ce=Ye=>Ye?""+parseFloat(Ye).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00",tt=C.useCallback(async()=>{try{r(!0),i(null);const Ye=`${Te}/building_permit.php`,Et=await fetch(Ye,{method:"GET",headers:{Accept:"application/json"}});if(!Et.ok)throw new Error(`Server error: ${Et.status}`);const Gt=await Et.json();if(Gt.success){const ee=Gt.data.map(Ie=>{const ue=`${Ie.first_name||""} ${Ie.middle_initial?Ie.middle_initial+".":""} ${Ie.last_name||""}`.trim(),fe=Ie.permit_group||"Unknown",xe=fe.includes("GROUP")?fe.split(":")[0].trim():fe;return{id:`BP-${String(Ie.application_id).padStart(4,"0")}`,application_id:Ie.application_id,applicant_id:Ie.applicant_id,full_name:ue||"N/A",contact_number:Ie.contact_no||"N/A",email:Ie.email||"N/A",home_address:Ie.home_address||"N/A",citizenship:Ie.citizenship||"N/A",form_of_ownership:Ie.form_of_ownership||"N/A",permit_group:fe,permit_group_short:xe,use_of_permit:Ie.use_of_permit||"N/A",proposed_date:Ie.proposed_date_of_construction,expected_completion:Ie.expected_date_of_completion,total_estimated_cost:Ie.total_estimated_cost||0,remarks:Ie.remarks||"",street:Ie.street||"",barangay:Ie.barangay||"N/A",city_municipality:Ie.city_municipality||"N/A",province:Ie.province||"N/A",lot_no:Ie.lot_no||"N/A",blk_no:Ie.blk_no||"N/A",tct_no:Ie.tct_no||"N/A",tax_dec_no:Ie.tax_dec_no||"N/A",number_of_units:Ie.number_of_units||0,number_of_storeys:Ie.number_of_storeys||0,total_floor_area:Ie.total_floor_area||0,lot_area:Ie.lot_area||0,building_cost:Ie.building_cost||0,electrical_cost:Ie.electrical_cost||0,mechanical_cost:Ie.mechanical_cost||0,electronics_cost:Ie.electronics_cost||0,plumbing_cost:Ie.plumbing_cost||0,other_cost:Ie.other_cost||0,equipment_cost:Ie.equipment_cost||0,status:"Pending",created_at:Ie.proposed_date_of_construction||new Date().toISOString()}});e(ee)}else throw new Error(Gt.message||"Failed to fetch data")}catch(Ye){console.error("Error fetching data:",Ye),i(`Failed to load data: ${Ye.message}`),e([])}finally{r(!1)}},[]);C.useEffect(()=>{tt()},[tt]),C.useEffect(()=>{const Ye=Et=>{De.current&&!De.current.contains(Et.target)&&se(!1)};return document.addEventListener("mousedown",Ye),()=>document.removeEventListener("mousedown",Ye)},[]);const Ae=Ye=>{switch(Ye){case"Approved":return"text-[#4CAF50] bg-[#4CAF50]/10";case"Rejected":return"text-[#E53935] bg-[#E53935]/10";case"Pending":return"text-[#FDA811] bg-[#FDA811]/10";case"Under Review":return"text-[#4A90E2] bg-[#4A90E2]/10";default:return"text-gray-600 bg-gray-100"}},gt=C.useMemo(()=>{let Ye=[...a];if(v){const Et=v.toLowerCase();Ye=Ye.filter(Gt=>Gt.full_name?.toLowerCase().includes(Et)||Gt.barangay?.toLowerCase().includes(Et)||Gt.permit_group?.toLowerCase().includes(Et)||Gt.use_of_permit?.toLowerCase().includes(Et)||Gt.application_id?.toString().includes(Et)||Gt.email?.toLowerCase().includes(Et)||Gt.id?.toLowerCase().includes(Et))}return o!=="all"&&(Ye=Ye.filter(Et=>Et.permit_group?.toLowerCase().includes(o.toLowerCase()))),y&&Ye.sort((Et,Gt)=>{let ee=Et[y]||"",Ie=Gt[y]||"";return typeof ee=="string"&&(ee=ee.toLowerCase()),typeof Ie=="string"&&(Ie=Ie.toLowerCase()),ee<Ie?B==="asc"?-1:1:ee>Ie?B==="asc"?1:-1:0}),Ye},[a,v,o,y,B]),q=Math.ceil(gt.length/me),Qt=(E-1)*me,yt=Qt+me,Oe=gt.slice(Qt,yt),ze=C.useMemo(()=>({total:a.length,pending:a.filter(Ye=>Ye.status==="Pending").length,approved:a.filter(Ye=>Ye.status==="Approved").length,rejected:a.filter(Ye=>Ye.status==="Rejected").length}),[a]),Le=[{key:"all",label:"All Applications"},{key:"group b",label:"Group B"},{key:"group d",label:"Group D"},{key:"group f",label:"Group F"}],oe=C.useMemo(()=>{const Ye={all:a.length};return Le.forEach(Et=>{Et.key!=="all"&&(Ye[Et.key]=a.filter(Gt=>Gt.permit_group?.toLowerCase().includes(Et.key)).length)}),Ye},[a]),he=Ye=>{u(Ye),A(!0),p(""),M(!1)},W=()=>{A(!1),u(null),p(""),M(!1),P(!1),Q(null),se(!1)},ve=Ye=>{y===Ye?j(Et=>Et==="asc"?"desc":"asc"):(w(Ye),j("asc"))},Qe=async()=>{if(!c)return;const Ye=await dt.fire({title:"Approve Permit?",html:`
        <div class="text-left">
          <p class="mb-2">You are about to approve this building permit application:</p>
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <p class="text-sm"><strong>Application ID:</strong> ${c.id}</p>
            <p class="text-sm"><strong>Applicant:</strong> ${c.full_name}</p>
            <p class="text-sm"><strong>Permit Group:</strong> ${c.permit_group}</p>
          </div>
          <p class="text-sm text-gray-600">This action will approve the application.</p>
        </div>
      `,icon:"question",input:"textarea",inputLabel:"Add approval notes (optional)",inputPlaceholder:"Enter any additional notes...",inputValue:g,showCancelButton:!0,confirmButtonText:"Yes, Approve",cancelButtonText:"Cancel",confirmButtonColor:"#4CAF50",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-left"}});if(Ye.isConfirmed){const Et=Ye.value||g,Gt=new Date().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),ee=Et?`--- ${Gt} ---
${Et}
`:"",Ie=ee?ee+(c.remarks||""):c.remarks;e(ue=>ue.map(fe=>fe.id===c.id?{...fe,status:"Approved",remarks:Ie}:fe)),u(ue=>({...ue,status:"Approved",remarks:Ie})),ye(ue=>({...ue,[c.id]:[...ue[c.id]||[],{action:"Approved",timestamp:Gt,notes:Et||"",by:"Admin"}]})),p(""),dt.fire({icon:"success",title:"Success!",text:"Permit approved successfully!",confirmButtonColor:"#4CAF50",timer:2e3,showConfirmButton:!0})}},Ze=async()=>{if(!c)return;const Ye=await dt.fire({title:"Reject Application?",html:`
        <div class="text-left">
          <p class="mb-2">You are about to reject this building permit application:</p>
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <p class="text-sm"><strong>Application ID:</strong> ${c.id}</p>
            <p class="text-sm"><strong>Applicant:</strong> ${c.full_name}</p>
            <p class="text-sm"><strong>Permit Group:</strong> ${c.permit_group}</p>
          </div>
          <p class="text-sm text-red-600">Please provide a reason for rejection.</p>
        </div>
      `,icon:"warning",input:"textarea",inputLabel:"Reason for rejection (required)",inputPlaceholder:"Enter the reason for rejecting this application...",inputValue:g,inputValidator:Et=>{if(!Et)return"You must provide a reason for rejection!"},showCancelButton:!0,confirmButtonText:"Yes, Reject",cancelButtonText:"Cancel",confirmButtonColor:"#E53935",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-left"}});if(Ye.isConfirmed){const Et=new Date().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),Gt=Ye.value?`--- ${Et} ---
${Ye.value}
`:"",ee=Gt?Gt+(c.remarks||""):c.remarks;e(Ie=>Ie.map(ue=>ue.id===c.id?{...ue,status:"Rejected",remarks:ee}:ue)),u(Ie=>({...Ie,status:"Rejected",remarks:ee})),ye(Ie=>({...Ie,[c.id]:[...Ie[c.id]||[],{action:"Rejected",timestamp:Et,notes:Ye.value||"",by:"Admin"}]})),p(""),dt.fire({icon:"success",title:"Application Rejected",text:"The permit has been rejected.",confirmButtonColor:"#E53935",timer:2e3,showConfirmButton:!0})}},J=async(Ye,Et,Gt,ee="#4CAF50")=>{if(!c)return;const Ie=await dt.fire({title:Et,html:`
        <div class="text-left">
          <p class="mb-2">${Gt}</p>
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <p class="text-sm"><strong>Application ID:</strong> ${c.id}</p>
            <p class="text-sm"><strong>Applicant:</strong> ${c.full_name}</p>
            <p class="text-sm"><strong>Permit Group:</strong> ${c.permit_group}</p>
          </div>
          <p class="text-sm text-gray-600">Add notes about this status update (optional).</p>
        </div>
      `,icon:"question",input:"textarea",inputLabel:"Status update notes",inputPlaceholder:"Enter any relevant notes...",inputValue:g,showCancelButton:!0,confirmButtonText:"Update Status",cancelButtonText:"Cancel",confirmButtonColor:ee,cancelButtonColor:"#6b7280",customClass:{popup:"text-left"}});if(Ie.isConfirmed){const ue=Ie.value||"",fe=new Date().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),xe=ue?`--- ${fe} ---
${ue}
`:"",Me=xe?xe+(c.remarks||""):c.remarks;e(ct=>ct.map(Pt=>Pt.id===c.id?{...Pt,status:Ye,remarks:Me}:Pt)),u(ct=>({...ct,status:Ye,remarks:Me})),ye(ct=>({...ct,[c.id]:[...ct[c.id]||[],{action:Ye,timestamp:fe,notes:ue,by:"Admin"}]})),p(""),dt.fire({icon:"success",title:"Status Updated!",text:`Status changed to ${Ye}`,confirmButtonColor:ee,timer:2e3,showConfirmButton:!0})}},He=()=>ae(Ye=>Math.min(Ye+25,300)),xt=()=>ae(Ye=>Math.max(Ye-25,25)),Xe=()=>{ae(100),H({x:0,y:0})},Ct=Ye=>{L>100&&(V(!0),X({x:Ye.clientX-$.x,y:Ye.clientY-$.y}))},_e=Ye=>{ne&&H({x:Ye.clientX-O.x,y:Ye.clientY-O.y})},Se=()=>V(!1),Ve=Ye=>{if(!Ye||typeof Ye!="string")return[];try{const Et=Ye.split(/(?=---\s+.+?\s+---)/g),Gt=[];for(let ee of Et){if(ee=ee.trim(),!ee)continue;const Ie=ee.match(/^---\s+(.+?)\s+---\n([\s\S]*)$/);if(Ie){const ue=Ie[1].trim(),fe=Ie[2].trim();fe&&Gt.push({timestamp:ue,comment:fe})}else Gt.push({timestamp:"Just now",comment:ee})}return Gt}catch(Et){return console.error("Error formatting comments:",Et),[{timestamp:"Recent",comment:Ye}]}},et=async()=>{if(!c||!g.trim())return;const Gt=`--- ${new Date().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})} ---
${g}
`+(c.remarks||"");e(ee=>ee.map(Ie=>Ie.id===c.id?{...Ie,remarks:Gt}:Ie)),u(ee=>({...ee,remarks:Gt})),p(""),dt.fire({icon:"success",title:"Comment Saved!",text:"Your comment has been added.",confirmButtonColor:"#4CAF50",timer:2e3,showConfirmButton:!0})},vt=()=>{K(!0),R("csv");const Et=[["Application ID","Applicant","Permit Group","Use of Permit","Barangay","City","Est. Cost","Storeys","Floor Area","Contact","Email","Proposed Date"].join(","),...gt.map(ue=>[ue.id,ue.full_name,ue.permit_group,ue.use_of_permit,ue.barangay,ue.city_municipality,ue.total_estimated_cost,ue.number_of_storeys,ue.total_floor_area,ue.contact_number,ue.email,st(ue.proposed_date)].map(fe=>`"${fe||""}"`).join(","))].join(`
`),Gt=new Blob([Et],{type:"text/csv"}),ee=window.URL.createObjectURL(Gt),Ie=document.createElement("a");Ie.href=ee,Ie.download=`building-applications-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Ie),Ie.click(),document.body.removeChild(Ie),window.URL.revokeObjectURL(ee),K(!1),R("")},Mt=async()=>{K(!0),R("pdf");try{dt.fire({title:"Generating PDF...",text:"Please wait...",allowOutsideClick:!1,showConfirmButton:!1,didOpen:()=>dt.showLoading()}),await new Promise(Pt=>setTimeout(Pt,300));const Ye=document.createElement("div");Ye.style.cssText="position:absolute;left:-9999px;width:1200px;background:#FBFBFB;padding:30px;font-family:Arial,sans-serif;",Ye.innerHTML=`
        <div style="margin-bottom:20px;">
          <h1 style="color:#4D4A4A;font-size:24px;margin:0 0 5px 0;">Building Permit Applications Report</h1>
          <p style="color:#666;margin:0;">Generated on ${new Date().toLocaleDateString()}  ${gt.length} applications</p>
        </div>
        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:20px;">
          ${[{title:"Total",value:ze.total,color:"#4CAF50"},{title:"Pending",value:ze.pending,color:"#FDA811"},{title:"Approved",value:ze.approved,color:"#4A90E2"},{title:"Rejected",value:ze.rejected,color:"#E53935"}].map(Pt=>`<div style="border:2px solid #E9E7E7;border-radius:8px;padding:15px;background:white;"><p style="color:#666;font-size:11px;margin:0 0 5px 0;">${Pt.title}</p><p style="color:${Pt.color};font-size:22px;font-weight:bold;margin:0;">${Pt.value}</p></div>`).join("")}
        </div>
        <table style="width:100%;border-collapse:collapse;font-size:11px;">
          <thead><tr style="background:#f5f5f5;">
            ${["ID","Applicant","Permit Group","Use","Barangay","Est. Cost","Status"].map(Pt=>`<th style="padding:8px;border:1px solid #ddd;text-align:left;">${Pt}</th>`).join("")}
          </tr></thead>
          <tbody>
            ${gt.slice(0,50).map(Pt=>`<tr>${[Pt.id,Pt.full_name,Pt.permit_group_short,Pt.use_of_permit,Pt.barangay,ce(Pt.total_estimated_cost),Pt.status].map(ts=>`<td style="padding:6px;border:1px solid #ddd;">${ts||""}</td>`).join("")}</tr>`).join("")}
          </tbody>
        </table>
      `,document.body.appendChild(Ye),await new Promise(Pt=>setTimeout(Pt,100));const Et=await Tu(Ye,{scale:2,backgroundColor:"#FBFBFB",logging:!1});document.body.removeChild(Ye);const Gt=Et.toDataURL("image/png"),ee=new Es({orientation:"portrait",unit:"mm",format:"a4"}),Ie=ee.internal.pageSize.getWidth(),ue=ee.internal.pageSize.getHeight(),fe=Ie-20,xe=Et.height*fe/Et.width;let Me=xe,ct=10;for(ee.addImage(Gt,"PNG",10,ct,fe,xe),Me-=ue;Me>0;)ct=Me-xe+10,ee.addPage(),ee.addImage(Gt,"PNG",10,ct,fe,xe),Me-=ue;ee.save(`building-applications-${new Date().toISOString().split("T")[0]}.pdf`),dt.fire({icon:"success",title:"PDF Downloaded!",timer:2e3,showConfirmButton:!1})}catch(Ye){console.error("PDF error:",Ye),dt.fire({title:"Export Failed",text:Ye.message,icon:"error"})}finally{K(!1),R("")}};return s?t.jsx("div",{className:"min-h-screen bg-[#FBFBFB] p-6 flex items-center justify-center font-poppins",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4CAF50] mx-auto"}),t.jsx("p",{className:"mt-4 text-[#4D4A4A]",children:"Loading building permit applications..."})]})}):t.jsxs("div",{className:"min-h-screen bg-[#FBFBFB] p-4 md:p-6 font-poppins",children:[n&&t.jsx("div",{className:"mb-6 p-4 bg-[#E53935] bg-opacity-20 border border-[#E53935] border-opacity-30 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ks,{className:"w-5 h-5 text-[#E53935] mr-3"}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-[#4D4A4A]",children:n})}),t.jsx("button",{onClick:tt,className:"text-sm text-[#4CAF50] hover:underline",children:"Retry"})]})}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-[#4D4A4A] font-montserrat",children:"Building Permit Applications"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 mt-1",children:"Manage and review building permit applications"})]}),t.jsxs("div",{className:"flex items-center space-x-3 mt-4 md:mt-0",children:[t.jsx("button",{onClick:tt,className:"p-2 rounded-lg bg-white border border-[#E9E7E7] hover:bg-gray-50 transition-colors",title:"Refresh",children:t.jsx(Ya,{className:"w-5 h-5 text-[#4D4A4A]"})}),t.jsxs("button",{onClick:vt,disabled:te,className:"px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-opacity-90 transition-colors flex items-center space-x-2 disabled:opacity-50 font-montserrat",children:[t.jsx(Kf,{className:"w-5 h-5"}),t.jsx("span",{children:te&&I==="csv"?"Exporting...":"CSV"})]}),t.jsxs("button",{onClick:Mt,disabled:te,className:"px-4 py-2 bg-[#E53935] text-white rounded-lg hover:bg-opacity-90 transition-colors flex items-center space-x-2 disabled:opacity-50 font-montserrat",children:[t.jsx(mp,{className:"w-5 h-5"}),t.jsx("span",{children:te&&I==="pdf"?"Generating...":"PDF"})]})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[{title:"Total",value:ze.total,icon:Kt,color:"#4CAF50"},{title:"Pending",value:ze.pending,icon:jr,color:"#FDA811"},{title:"Approved",value:ze.approved,icon:Us,color:"#4A90E2"},{title:"Rejected",value:ze.rejected,icon:Ka,color:"#E53935"}].map((Ye,Et)=>t.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-[#E9E7E7]",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins",children:Ye.title}),t.jsx("p",{className:"text-2xl font-bold text-[#4D4A4A] mt-1 font-montserrat",children:Ye.value})]}),t.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:Ye.color},children:t.jsx(Ye.icon,{className:"w-5 h-5 text-white"})})]})},Et))})]}),t.jsx("div",{className:"mb-6 bg-white rounded-lg p-4 shadow-sm border border-[#E9E7E7]",children:t.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#4D4A4A] text-opacity-50 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search by name, barangay, permit group, email...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",value:v,onChange:Ye=>{b(Ye.target.value),S(1)}})]})})}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-[#E9E7E7] overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-[#E9E7E7]",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Applications"}),t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:["Showing ",Qt+1,"-",Math.min(yt,gt.length)," of ",gt.length]})]})}),t.jsx("nav",{className:"flex space-x-4 overflow-x-auto",children:Le.map(Ye=>t.jsxs("button",{onClick:()=>{l(Ye.key),S(1)},className:`py-2 px-3 border-b-2 font-medium text-sm flex items-center gap-2 transition-all whitespace-nowrap ${o===Ye.key?"border-[#4CAF50] text-[#4CAF50]":"border-transparent text-[#4D4A4A] hover:text-[#4CAF50]"}`,children:[Ye.label,t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${o===Ye.key?"bg-[#4CAF50] text-white":"bg-[#FBFBFB] text-[#4D4A4A] border border-[#E9E7E7]"}`,children:oe[Ye.key]||0})]},Ye.key))})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-[#FBFBFB]",children:t.jsx("tr",{children:[{key:"application_id",label:"ID"},{key:"full_name",label:"Applicant"},{key:"permit_group",label:"Permit Group"},{key:"use_of_permit",label:"Use"},{key:"barangay",label:"Barangay"},{key:"total_estimated_cost",label:"Est. Cost"},{key:"status",label:"Status"},{key:null,label:"Actions"}].map(Ye=>t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:Ye.key?t.jsxs("button",{onClick:()=>ve(Ye.key),className:"flex items-center gap-1 hover:text-[#4CAF50] transition-colors",children:[Ye.label,t.jsx(lx,{className:"w-3 h-3"})]}):Ye.label},Ye.label))})}),t.jsx("tbody",{className:"divide-y divide-[#E9E7E7]",children:Oe.length>0?Oe.map(Ye=>t.jsxs("tr",{className:"hover:bg-[#FBFBFB] transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"font-mono text-sm text-[#4D4A4A]",children:Ye.id})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-[#4D4A4A] font-montserrat",children:Ye.full_name}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:Ye.email})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:Ye.permit_group_short})}),t.jsx("td",{className:"px-6 py-4 text-[#4D4A4A] text-sm",children:Ye.use_of_permit}),t.jsx("td",{className:"px-6 py-4 text-[#4D4A4A] text-sm",children:Ye.barangay}),t.jsx("td",{className:"px-6 py-4 text-[#4D4A4A] text-sm font-medium",children:ce(Ye.total_estimated_cost)}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${Ae(Ye.status)}`,children:Ye.status})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("button",{onClick:()=>he(Ye),title:"View Details",className:"p-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#FDA811]/80 transition-colors",children:t.jsx(ws,{className:"w-5 h-5"})})})]},Ye.id)):t.jsx("tr",{children:t.jsxs("td",{colSpan:"8",className:"px-6 py-12 text-center",children:[t.jsx(Ur,{className:"w-12 h-12 text-[#E9E7E7] mx-auto mb-4"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70",children:"No applications match your search"})]})})})]})}),gt.length>me&&t.jsx("div",{className:"p-5 border-t border-[#E9E7E7]",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:["Page ",E," of ",q]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>S(Ye=>Math.max(Ye-1,1)),disabled:E===1,className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors disabled:opacity-50",children:"Previous"}),Array.from({length:Math.min(q,5)},(Ye,Et)=>{const Gt=E<=3?Et+1:E+Et-2;return Gt<1||Gt>q?null:t.jsx("button",{onClick:()=>S(Gt),className:`px-3 py-2 text-sm rounded-lg transition-colors ${E===Gt?"bg-[#4CAF50] text-white":"border border-[#E9E7E7] hover:bg-[#FBFBFB]"}`,children:Gt},Gt)}),t.jsx("button",{onClick:()=>S(Ye=>Math.min(Ye+1,q)),disabled:E===q,className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors disabled:opacity-50",children:"Next"})]})]})})]}),m&&c&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-md p-4 overflow-auto animate-fadeIn",children:t.jsxs("div",{className:"w-full max-w-7xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl transform transition-all",children:[t.jsxs("div",{className:"relative p-6 bg-gradient-to-r from-gray-50 via-white to-gray-50 dark:from-slate-800 dark:via-slate-700 dark:to-slate-800 border-b-4 border-[#4CAF50]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-[#4CAF50] to-[#45a049] p-3 rounded-2xl shadow-xl",children:t.jsx(Ur,{className:"w-10 h-10 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Building Permit Application"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Review and process application"})]})]}),t.jsx("button",{onClick:W,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-blue-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Application ID"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white font-mono",children:c.id})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-purple-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Proposed Date"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:st(c.proposed_date)})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-green-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Status"}),t.jsx("span",{className:`inline-block px-3 py-1 text-sm font-bold rounded-full ${Ae(c.status)}`,children:c.status})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-orange-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Permit Group"}),t.jsx("span",{className:"px-3 py-1 text-xs font-bold rounded-full bg-blue-100 text-blue-700",children:c.permit_group_short})]})]})]}),t.jsxs("div",{className:"p-8 space-y-8 max-h-[80vh] overflow-y-auto bg-gradient-to-b from-gray-50 to-white dark:from-slate-900 dark:to-slate-800",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-blue-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:t.jsx(gr,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Applicant Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-slate-700 dark:to-slate-600 p-4 rounded-xl",children:[t.jsx("label",{className:"text-xs font-bold text-blue-600 uppercase tracking-wide",children:"Full Name"}),t.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-2",children:c.full_name})]}),[{label:"Contact Number",value:c.contact_number},{label:"Email Address",value:c.email},{label:"Home Address",value:c.home_address},{label:"Citizenship",value:c.citizenship},{label:"Form of Ownership",value:c.form_of_ownership}].map((Ye,Et)=>t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:Ye.label}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:Ye.value})]},Et))]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-green-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-3 rounded-xl shadow-lg",children:t.jsx(Ec,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Project Site"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{label:"Street",value:c.street},{label:"Barangay",value:c.barangay},{label:"City/Municipality",value:c.city_municipality},{label:"Province",value:c.province},{label:"Lot No.",value:c.lot_no},{label:"Block No.",value:c.blk_no},{label:"TCT No.",value:c.tct_no},{label:"Tax Dec. No.",value:c.tax_dec_no}].map((Ye,Et)=>t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:Ye.label}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:Ye.value})]},Et))})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-orange-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-xl shadow-lg",children:t.jsx(Ur,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Building Details"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{label:"Permit Group",value:c.permit_group},{label:"Use of Permit",value:c.use_of_permit},{label:"Number of Storeys",value:c.number_of_storeys},{label:"Number of Units",value:c.number_of_units},{label:"Total Floor Area",value:`${c.total_floor_area} sqm`},{label:"Lot Area",value:`${c.lot_area} sqm`},{label:"Proposed Start",value:st(c.proposed_date)},{label:"Expected Completion",value:st(c.expected_completion)}].map((Ye,Et)=>t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:Ye.label}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:Ye.value})]},Et))})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-slate-800 dark:to-slate-700 rounded-2xl shadow-lg p-6 border-2 border-green-200 dark:border-slate-600",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Project Cost Breakdown"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{label:"Building Cost",value:c.building_cost,color:"green"},{label:"Electrical Cost",value:c.electrical_cost,color:"blue"},{label:"Mechanical Cost",value:c.mechanical_cost,color:"orange"},{label:"Electronics Cost",value:c.electronics_cost,color:"purple"},{label:"Plumbing Cost",value:c.plumbing_cost,color:"cyan"},{label:"Equipment Cost",value:c.equipment_cost,color:"indigo"}].map((Ye,Et)=>t.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-${Ye.color}-500`,children:[t.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:Ye.label}),t.jsx("p",{className:"text-xl font-black text-gray-800 mt-2",children:ce(Ye.value)})]},Et))}),t.jsx("div",{className:"mt-6 p-4 bg-white dark:bg-slate-800 rounded-xl border-2 border-dashed border-green-300",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-lg font-bold text-gray-700 dark:text-gray-300",children:"Total Estimated Cost:"}),t.jsx("span",{className:"text-3xl font-black text-green-600",children:ce(c.total_estimated_cost)})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-yellow-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 p-3 rounded-xl shadow-lg",children:t.jsx(c0,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Review Comments"}),c.remarks&&t.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",Ve(c.remarks).length," comment",Ve(c.remarks).length!==1?"s":"",")"]})]})]}),t.jsx("div",{className:"space-y-4 mb-6",children:c.remarks&&c.remarks.trim()?t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600 overflow-hidden",children:[t.jsx("div",{className:"max-h-64 overflow-y-auto p-4",children:Ve(c.remarks).map((Ye,Et)=>t.jsxs("div",{className:`mb-4 ${Et!==0?"pt-4 border-t border-gray-200 dark:border-slate-600":""}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Admin Comment"]}),t.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[t.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ye.timestamp]})]}),t.jsx("div",{className:"pl-6",children:t.jsx("p",{className:"text-gray-900 dark:text-white bg-white dark:bg-slate-800 p-3 rounded border border-gray-100 dark:border-slate-500",children:Ye.comment})})]},Et))}),t.jsx("div",{className:"px-4 py-3 bg-gray-100 dark:bg-slate-800 border-t border-gray-200 dark:border-slate-600",children:t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: ",Ve(c.remarks).length," comment",Ve(c.remarks).length!==1?"s":""]})})]}):t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600",children:[t.jsx("svg",{className:"w-12 h-12 text-gray-300 dark:text-gray-500 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No comments yet. Add your first comment below."})]})}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Add New Comment"}),t.jsx("textarea",{value:g,onChange:Ye=>p(Ye.target.value),placeholder:"Enter your review notes here...",className:"w-full border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-3 bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent",rows:3}),g.trim()&&t.jsx("div",{className:"mt-4 flex justify-end",children:t.jsxs("button",{onClick:et,className:"px-6 py-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#4A90E2]/80 transition-colors font-medium flex items-center shadow-sm hover:shadow",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Comment"]})})]})]}),(()=>{const Ye=le[c.id]||[];return Ye.length>0?t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-blue-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:t.jsx(jr,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Action History"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[Ye.length," action",Ye.length!==1?"s":""," taken this session"]})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-[17px] top-0 bottom-0 w-0.5 bg-blue-200 dark:bg-slate-600"}),t.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:[...Ye].reverse().map((Et,Gt)=>t.jsxs("div",{className:"relative pl-10",children:[t.jsx("div",{className:`absolute left-[10px] top-1.5 w-4 h-4 rounded-full border-2 border-white dark:border-slate-800 shadow ${Et.action==="Approved"?"bg-green-500":Et.action==="Rejected"?"bg-red-500":Et.action==="Pending"?"bg-yellow-500":"bg-blue-500"}`}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg p-3 border border-gray-200 dark:border-slate-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:`text-sm font-semibold px-2 py-0.5 rounded-full ${Et.action==="Approved"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":Et.action==="Rejected"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":Et.action==="Pending"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}`,children:Et.action}),t.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:Et.timestamp})]}),Et.notes&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 pl-1",children:Et.notes}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1 pl-1",children:["by ",Et.by]})]})]},Gt))})]})]}):null})(),t.jsxs("div",{className:"flex gap-4 justify-between pt-8 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-6 border-t-4 border-gray-300 dark:border-slate-600",children:[c.status!=="Rejected"&&t.jsxs("div",{className:"relative",ref:De,children:[t.jsxs("button",{onClick:()=>se(!G),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2",children:["Actions",t.jsx("svg",{className:`w-4 h-4 transition-transform ${G?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),G&&t.jsxs("div",{className:"absolute left-0 bottom-full mb-2 w-72 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden z-50 max-h-96 overflow-y-auto",children:[t.jsx("div",{className:"px-3 py-2 bg-gray-100 dark:bg-slate-700 border-b border-gray-200 dark:border-slate-600",children:t.jsx("p",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Processing Steps"})}),t.jsxs("button",{onClick:()=>{se(!1),J("Under Review","Mark as Under Review","Application is now being reviewed by the team.","#3B82F6")},className:"w-full px-4 py-3 text-left hover:bg-blue-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(sa,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Under Review"})]}),t.jsxs("button",{onClick:()=>{se(!1),J("Document Verification","Document Verification","Documents are being verified for completeness and authenticity.","#8B5CF6")},className:"w-full px-4 py-3 text-left hover:bg-purple-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Kt,{className:"w-5 h-5 text-purple-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Document Verification"})]}),t.jsxs("button",{onClick:()=>{se(!1),J("Site Inspection Scheduled","Schedule Site Inspection","Site inspection has been scheduled for this building project.","#0EA5E9")},className:"w-full px-4 py-3 text-left hover:bg-cyan-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Ur,{className:"w-5 h-5 text-cyan-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Site Inspection Scheduled"})]}),t.jsxs("button",{onClick:()=>{se(!1),J("Payment Verification","Verify Payment","Payment is being verified.","#F59E0B")},className:"w-full px-4 py-3 text-left hover:bg-amber-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(mp,{className:"w-5 h-5 text-amber-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Payment Verification"})]}),t.jsxs("button",{onClick:()=>{se(!1),J("For Manager Approval","Send for Manager Approval","Application is being sent to manager for approval.","#6366F1")},className:"w-full px-4 py-3 text-left hover:bg-indigo-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(gr,{className:"w-5 h-5 text-indigo-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"For Manager Approval"})]}),t.jsxs("button",{onClick:()=>{se(!1),J("Permit Processing","Mark as Processing","Permit is being processed and prepared.","#14B8A6")},className:"w-full px-4 py-3 text-left hover:bg-teal-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Kt,{className:"w-5 h-5 text-teal-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Permit Processing"})]}),t.jsxs("button",{onClick:()=>{se(!1),J("Ready for Release","Mark Ready for Release","Permit is ready for release to applicant.","#10B981")},className:"w-full px-4 py-3 text-left hover:bg-emerald-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Us,{className:"w-5 h-5 text-emerald-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Ready for Release"})]}),t.jsx("div",{className:"px-3 py-2 bg-gray-100 dark:bg-slate-700 border-b border-gray-200 dark:border-slate-600",children:t.jsx("p",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Actions"})}),t.jsxs("button",{onClick:()=>{se(!1),J("Pending","Set to Pending","Mark this application as pending.","#FDA811")},className:"w-full px-4 py-3 text-left hover:bg-yellow-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Ks,{className:"w-5 h-5 text-yellow-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Mark as Pending"})]}),t.jsxs("button",{onClick:()=>{se(!1),Ze()},className:"w-full px-4 py-3 text-left hover:bg-red-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(ls,{className:"w-5 h-5 text-red-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Reject Application"})]}),t.jsxs("button",{onClick:()=>{se(!1),Qe()},className:"w-full px-4 py-3 text-left hover:bg-green-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3",children:[t.jsx(Us,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:" Approve Permit"})]})]})]}),t.jsxs("button",{onClick:W,className:"px-8 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2 ml-auto",children:[t.jsx(ls,{className:"w-5 h-5"}),"Close"]})]})]})]})}),D&&Y&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-0",children:t.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[t.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 p-4 flex justify-between items-center bg-gradient-to-b from-black/70 to-transparent",children:[t.jsxs("div",{className:"flex items-center gap-3 text-white",children:[we(Y.file_type,Y.name)?t.jsx(io,{className:"w-5 h-5"}):t.jsx(Kt,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm font-medium truncate max-w-xs",children:Y.name})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[we(Y.file_type,Y.name)&&t.jsxs("div",{className:"flex items-center gap-1 mr-4 bg-black/40 rounded-lg p-1",children:[t.jsx("button",{onClick:xt,className:"p-2 text-white hover:bg-white/10 rounded transition-colors",title:"Zoom Out",children:t.jsx(UQ,{className:"w-4 h-4"})}),t.jsxs("button",{onClick:Xe,className:"px-3 py-2 text-xs text-white hover:bg-white/10 rounded transition-colors",children:[L,"%"]}),t.jsx("button",{onClick:He,className:"p-2 text-white hover:bg-white/10 rounded transition-colors",title:"Zoom In",children:t.jsx(RQ,{className:"w-4 h-4"})})]}),t.jsx("button",{onClick:()=>{P(!1),Q(null),ae(100),H({x:0,y:0})},className:"p-2 text-white hover:bg-white/10 rounded-full transition-colors",children:t.jsx(ls,{className:"w-6 h-6"})})]})]}),t.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden",onMouseDown:Ct,onMouseMove:_e,onMouseUp:Se,onMouseLeave:Se,children:we(Y.file_type,Y.name)?t.jsx("img",{src:Y.url,alt:Y.name,style:{transform:`scale(${L/100}) translate(${$.x}px, ${$.y}px)`,cursor:L>100?ne?"grabbing":"grab":"default",transition:ne?"none":"transform 0.2s ease"},className:"max-w-full max-h-full object-contain",draggable:!1}):Y.file_type==="application/pdf"||Y.name?.toLowerCase().endsWith(".pdf")?t.jsx("iframe",{src:Y.url,className:"w-full h-full",title:Y.name}):t.jsxs("div",{className:"text-center text-white p-8",children:[t.jsx(Kt,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"Cannot preview this file type."}),t.jsx("a",{href:Y.url,download:!0,className:"mt-4 inline-block px-4 py-2 bg-[#4CAF50] text-white rounded-lg",children:"Download File"})]})})]})})]})}Eu.register(Gp,Wp,Hp,Up,Qp,Fu,$p,qp,zp,Vp);function Ude(){const[a,e]=C.useState([]),[s,r]=C.useState(1),[n,i]=C.useState(null),[o,l]=C.useState(!1),[c,u]=C.useState("all"),[m,A]=C.useState(""),[g,p]=C.useState([null,null]),[v,b]=g,[y,w]=C.useState("all"),[B,j]=C.useState("all"),[E,S]=C.useState(!1),[T,M]=C.useState(""),[D,P]=C.useState(!0),[Y,Q]=C.useState(null),[L,ae]=C.useState(!1),[ne,V]=C.useState(""),[O,X]=C.useState(!1),[$,H]=C.useState(""),te=8,K="/backend/building_permit",I=ve=>{if(!ve)return"N/A";try{return new Date(ve).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},R=ve=>ve?""+parseFloat(ve).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00",G=async()=>{try{P(!0),Q(null);const ve=`${K}/building_permit.php`,Qe=await fetch(ve,{method:"GET",headers:{Accept:"application/json"}});if(!Qe.ok)throw new Error(`Server error: ${Qe.status}`);const Ze=await Qe.json();if(Ze.success){const J=Ze.data.map(He=>{const xt=`${He.first_name||""} ${He.middle_initial?He.middle_initial+".":""} ${He.last_name||""}`.trim(),Xe=He.permit_group||"Unknown",Ct=Xe.includes("GROUP")?Xe.split(":")[0].trim():Xe;return{id:`BP-${String(He.application_id).padStart(4,"0")}`,application_id:He.application_id,applicant_id:He.applicant_id,full_name:xt||"N/A",contact_number:He.contact_no||"N/A",email:He.email||"N/A",home_address:He.home_address||"N/A",citizenship:He.citizenship||"N/A",form_of_ownership:He.form_of_ownership||"N/A",permit_group:Xe,permit_group_short:Ct,use_of_permit:He.use_of_permit||"N/A",proposed_date:He.proposed_date_of_construction,expected_completion:He.expected_date_of_completion,total_estimated_cost:He.total_estimated_cost||0,remarks:He.remarks||"",street:He.street||"",barangay:He.barangay||"N/A",city_municipality:He.city_municipality||"N/A",province:He.province||"N/A",lot_no:He.lot_no||"N/A",blk_no:He.blk_no||"N/A",tct_no:He.tct_no||"N/A",tax_dec_no:He.tax_dec_no||"N/A",number_of_units:He.number_of_units||0,number_of_storeys:He.number_of_storeys||0,total_floor_area:He.total_floor_area||0,lot_area:He.lot_area||0,building_cost:He.building_cost||0,electrical_cost:He.electrical_cost||0,mechanical_cost:He.mechanical_cost||0,electronics_cost:He.electronics_cost||0,plumbing_cost:He.plumbing_cost||0,other_cost:He.other_cost||0,equipment_cost:He.equipment_cost||0,status:"Pending",created_at:He.proposed_date_of_construction||new Date().toISOString()}});e(J),Q(null)}else throw new Error(Ze.message||"Failed to fetch data")}catch(ve){console.error("Error fetching data:",ve),Q(`Failed to load data: ${ve.message}`),e([])}finally{P(!1)}};C.useEffect(()=>{G()},[]);const se=C.useMemo(()=>{let ve=[...a];if(m){const Qe=m.toLowerCase();ve=ve.filter(Ze=>Ze.full_name?.toLowerCase().includes(Qe)||Ze.barangay?.toLowerCase().includes(Qe)||Ze.permit_group?.toLowerCase().includes(Qe)||Ze.use_of_permit?.toLowerCase().includes(Qe)||Ze.application_id?.toString().includes(Qe)||Ze.email?.toLowerCase().includes(Qe))}return c!=="all"&&(ve=ve.filter(Qe=>Qe.permit_group?.toLowerCase().includes(c.toLowerCase()))),v&&b&&(ve=ve.filter(Qe=>{if(!Qe.proposed_date)return!1;const Ze=new Date(Qe.proposed_date);return Ze>=v&&Ze<=b})),ve},[a,c,m,v,b]),le=Math.ceil(se.length/te),ye=(s-1)*te,De=ye+te,me=se.slice(ye,De),Te=C.useMemo(()=>{const ve=a.length,Qe=a.reduce((Se,Ve)=>Se+parseFloat(Ve.total_estimated_cost||0),0),Ze=ve>0?Qe/ve:0,J=a.reduce((Se,Ve)=>Se+parseInt(Ve.number_of_storeys||0),0),He=ve>0?(J/ve).toFixed(1):0,xt={};a.forEach(Se=>{const Ve=Se.barangay||"Unknown";Ve!=="N/A"&&(xt[Ve]=(xt[Ve]||0)+1)});const Xe=Object.entries(xt).sort(([,Se],[,Ve])=>Ve-Se)[0]||["No data",0],Ct=Math.floor(ve*.8),_e=ve>0?((ve-Ct)/Math.max(Ct,1)*100).toFixed(1):0;return{total:ve,totalCost:Qe,avgCost:Ze,avgStoreys:He,trend:_e,topBarangay:{name:Xe[0],count:Xe[1]}}},[a]),we=C.useMemo(()=>{const Qe=[...new Set(a.map(Ze=>Ze.barangay).filter(Ze=>Ze&&Ze!=="N/A"))].slice(0,6);return{labels:Qe.length>0?Qe:["No Data"],datasets:[{label:"Applications",data:Qe.length>0?Qe.map(Ze=>a.filter(J=>J.barangay===Ze).length):[0],backgroundColor:"#4CAF50",hoverBackgroundColor:"#45a049",borderRadius:8,borderWidth:0}]}},[a]),st=C.useMemo(()=>{const ve={};a.forEach(J=>{const He=J.permit_group_short||"Unknown";ve[He]=(ve[He]||0)+1});const Qe=Object.entries(ve).sort(([,J],[,He])=>He-J).slice(0,5),Ze=["#4CAF50","#4A90E2","#FDA811","#E53935","#9C27B0"];return{labels:Qe.map(([J])=>J),datasets:[{data:Qe.map(([,J])=>J),backgroundColor:Ze.slice(0,Qe.length),hoverBackgroundColor:Ze.slice(0,Qe.length).map(J=>J+"cc"),borderColor:"#ffffff",borderWidth:3}]}},[a]),ce=C.useMemo(()=>{const ve=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Qe=new Date().getMonth(),Ze=ve.slice(Math.max(0,Qe-5),Qe+1),J=new Date().getFullYear(),He=Array(Ze.length).fill(0);return a.forEach(xt=>{if(!xt.proposed_date)return;const Xe=new Date(xt.proposed_date),Ct=Xe.getMonth();if(Xe.getFullYear()===J&&Ct<=Qe&&Ct>=Qe-5){const Se=Ct-(Qe-5);Se>=0&&He[Se]++}}),{labels:Ze,datasets:[{label:"Building Permits",data:He,borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.15)",fill:!0,tension:.4,borderWidth:3,pointBackgroundColor:"#4CAF50",pointBorderColor:"#ffffff",pointBorderWidth:3,pointRadius:6,pointHoverRadius:8}]}},[a]),tt=C.useMemo(()=>{const ve={"< 1M":0,"1M-10M":0,"10M-100M":0,"100M-1B":0,"> 1B":0};return a.forEach(Qe=>{const Ze=parseFloat(Qe.total_estimated_cost||0);Ze<1e6?ve["< 1M"]++:Ze<1e7?ve["1M-10M"]++:Ze<1e8?ve["10M-100M"]++:Ze<1e9?ve["100M-1B"]++:ve["> 1B"]++}),ve},[a]),Ae=C.useMemo(()=>{const ve={};return a.forEach(Qe=>{const Ze=Qe.form_of_ownership||"Unknown";ve[Ze]=(ve[Ze]||0)+1}),ve},[a]),gt=C.useMemo(()=>{const ve=[],Qe=new Date;for(let Ze=7;Ze>=0;Ze--){const J=new Date(Qe);J.setDate(Qe.getDate()-Ze*7),J.setHours(0,0,0,0);const He=new Date(J);He.setDate(J.getDate()+6),He.setHours(23,59,59,999);const xt=a.filter(Xe=>{const Ct=new Date(Xe.created_at);return Ct>=J&&Ct<=He}).length;ve.push({label:`Week ${8-Ze}`,count:xt,weekStart:J,weekEnd:He})}return{labels:ve.map(Ze=>Ze.label),datasets:[{label:"Total Applications",data:ve.map(Ze=>Ze.count),borderColor:"#4CAF50",backgroundColor:"rgba(76,175,80,0.1)",fill:!0,tension:.4,borderWidth:3,pointBackgroundColor:"#4CAF50",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:5,pointHoverRadius:7}],rawData:ve}},[a]),q=C.useMemo(()=>{const ve=[],Qe=new Date,Ze=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let J=11;J>=0;J--){const He=new Date(Qe.getFullYear(),Qe.getMonth()-J,1),xt=new Date(He.getFullYear(),He.getMonth(),1),Xe=new Date(He.getFullYear(),He.getMonth()+1,0,23,59,59,999),Ct=`${Ze[He.getMonth()]} ${He.getFullYear().toString().slice(-2)}`,_e=a.filter(Se=>{const Ve=new Date(Se.created_at);return Ve>=xt&&Ve<=Xe}).length;ve.push({label:Ct,count:_e,monthStart:xt,monthEnd:Xe})}return{labels:ve.map(J=>J.label),datasets:[{label:"Total Applications",data:ve.map(J=>J.count),borderColor:"#4A90E2",backgroundColor:"rgba(74,144,226,0.1)",fill:!0,tension:.4,borderWidth:3,pointBackgroundColor:"#4A90E2",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:5,pointHoverRadius:7}],rawData:ve}},[a]),Qt=[{key:"all",label:"All Applications"},{key:"group b",label:"Group B"},{key:"group d",label:"Group D"},{key:"group f",label:"Group F"}],yt=C.useMemo(()=>{const ve={all:a.length};return Qt.forEach(Qe=>{Qe.key!=="all"&&(ve[Qe.key]=a.filter(Ze=>Ze.permit_group?.toLowerCase().includes(Qe.key)).length)}),ve},[a]),Oe=async ve=>{try{const Qe=a.find(Ze=>Ze.id===ve);Qe&&(i(Qe),l(!0))}catch(Qe){console.error("Error viewing permit:",Qe)}},ze=()=>{l(!1),i(null),V(""),ae(!1)},Le=()=>{S(!0),M("csv");const Qe=[["Application ID","Applicant Name","Permit Group","Use of Permit","Barangay","City","Total Estimated Cost","Storeys","Floor Area","Lot Area","Ownership","Contact","Email","Proposed Date","Expected Completion"].join(","),...a.map(xt=>[xt.id,xt.full_name,xt.permit_group,xt.use_of_permit,xt.barangay,xt.city_municipality,xt.total_estimated_cost,xt.number_of_storeys,xt.total_floor_area,xt.lot_area,xt.form_of_ownership,xt.contact_number,xt.email,I(xt.proposed_date),I(xt.expected_completion)].map(Xe=>`"${Xe||""}"`).join(","))].join(`
`),Ze=new Blob([Qe],{type:"text/csv"}),J=window.URL.createObjectURL(Ze),He=document.createElement("a");He.href=J,He.download=`building-permits-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(He),He.click(),document.body.removeChild(He),window.URL.revokeObjectURL(J),S(!1),M("")},oe=async()=>{S(!0),M("pdf");try{dt.fire({title:"Generating PDF...",text:"Please wait while we create your report",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{dt.showLoading()}}),await new Promise(Ve=>setTimeout(Ve,500));const ve=document.createElement("div");ve.style.cssText="position: absolute; left: -9999px; width: 1200px; background: #FBFBFB; padding: 30px; font-family: Arial, sans-serif;",ve.innerHTML=`
        <div style="margin-bottom: 30px;">
          <h1 style="color: #4D4A4A; font-size: 28px; margin: 0 0 10px 0;">Building Permit Analytics</h1>
          <p style="color: #666; margin: 0;">Generated on ${new Date().toLocaleDateString()}</p>
        </div>
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 30px;">
          ${[{title:"Total Applications",value:Te.total,color:"#4CAF50"},{title:"Total Est. Cost",value:R(Te.totalCost),color:"#4A90E2"},{title:"Avg Cost",value:R(Te.avgCost),color:"#FDA811"},{title:"Avg Storeys",value:Te.avgStoreys,color:"#9C27B0"}].map(Ve=>`<div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 20px; background: white;"><p style="color: #666; font-size: 12px; margin: 0 0 10px 0;">${Ve.title}</p><p style="color: ${Ve.color}; font-size: 24px; font-weight: bold; margin: 0;">${Ve.value}</p></div>`).join("")}
        </div>
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Permit Group Distribution</h2>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            ${st.labels.map((Ve,et)=>`<div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 15px; background: white; border-left: 5px solid ${st.datasets[0].backgroundColor[et]};"><p style="color: #4D4A4A; font-size: 14px; margin: 0 0 8px 0;">${Ve}</p><p style="color: #4D4A4A; font-size: 24px; font-weight: bold; margin: 0;">${st.datasets[0].data[et]}</p></div>`).join("")}
          </div>
        </div>
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Cost Distribution</h2>
          <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px;">
            ${Object.entries(tt).map(([Ve,et],vt)=>`<div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 12px; background: white; border-left: 5px solid ${["#4CAF50","#4A90E2","#FDA811","#9C27B0","#E53935"][vt]};"><p style="color: #666; font-size: 11px; margin: 0 0 5px 0;">${Ve}</p><p style="color: #4D4A4A; font-size: 22px; font-weight: bold; margin: 0;">${et}</p></div>`).join("")}
          </div>
        </div>
      `,document.body.appendChild(ve),await new Promise(Ve=>setTimeout(Ve,100));const Qe=await Tu(ve,{scale:2,backgroundColor:"#FBFBFB",logging:!1});document.body.removeChild(ve);const Ze=Qe.toDataURL("image/png"),J=new Es({orientation:"portrait",unit:"mm",format:"a4"}),He=J.internal.pageSize.getWidth(),xt=J.internal.pageSize.getHeight(),Xe=He-20,Ct=Qe.height*Xe/Qe.width;let _e=Ct,Se=10;for(J.addImage(Ze,"PNG",10,Se,Xe,Ct),_e-=xt;_e>0;)Se=_e-Ct+10,J.addPage(),J.addImage(Ze,"PNG",10,Se,Xe,Ct),_e-=xt;J.save(`building-analytics-${new Date().toISOString().split("T")[0]}.pdf`),dt.fire({icon:"success",title:"PDF Downloaded!",text:"Your report has been downloaded successfully.",timer:2e3,showConfirmButton:!1})}catch(ve){console.error("Error generating PDF:",ve),dt.fire({title:"Export Failed",text:ve.message||"Failed to generate PDF.",icon:"error"})}finally{S(!1),M("")}},he=ve=>{A(ve.target.value),r(1)},W=()=>{A(""),w("all"),j("all"),p([null,null]),r(1)};return D?t.jsx("div",{className:"min-h-screen bg-[#FBFBFB] p-6 flex items-center justify-center font-poppins",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4CAF50] mx-auto"}),t.jsx("p",{className:"mt-4 text-[#4D4A4A]",children:"Loading building permit analytics..."})]})}):t.jsxs("div",{className:"min-h-screen bg-[#FBFBFB] p-4 md:p-6 font-poppins",id:"building-dashboard-content",children:[Y&&t.jsx("div",{className:"mb-6 p-4 bg-[#E53935] bg-opacity-20 border border-[#E53935] border-opacity-30 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ks,{className:"w-5 h-5 text-[#E53935] mr-3"}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-[#4D4A4A] font-poppins",children:Y})}),t.jsx("button",{onClick:G,className:"text-sm text-[#4CAF50] hover:underline",children:"Retry Connection"})]})}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-[#4D4A4A] font-montserrat",children:"Building Permit Analytics"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 mt-2",children:"Track and analyze building permit applications"}),a.length>0&&t.jsxs("p",{className:"text-sm text-[#4CAF50] mt-1",children:[a.length," applications loaded"]})]}),t.jsxs("div",{className:"flex items-center space-x-3 mt-4 md:mt-0",children:[t.jsx("button",{onClick:G,className:"p-2 rounded-lg bg-white border border-[#E9E7E7] hover:bg-gray-50 transition-colors",title:"Refresh Data",children:t.jsx(Ya,{className:"w-5 h-5 text-[#4D4A4A]"})}),t.jsxs("button",{onClick:Le,disabled:E||a.length===0,className:"px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-opacity-90 transition-colors flex items-center space-x-2 disabled:opacity-50 font-montserrat",children:[t.jsx(Kf,{className:"w-5 h-5"}),t.jsx("span",{children:E&&T==="csv"?"Exporting CSV...":"Export CSV"})]}),t.jsxs("button",{onClick:oe,disabled:E||a.length===0,className:"px-4 py-2 bg-[#E53935] text-white rounded-lg hover:bg-opacity-90 transition-colors flex items-center space-x-2 disabled:opacity-50 font-montserrat",children:[t.jsx(mp,{className:"w-5 h-5"}),t.jsx("span",{children:E&&T==="pdf"?"Generating PDF...":"Export PDF"})]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[{title:"Total Applications",value:Te.total,icon:Kt,color:"#4CAF50",trend:`${Te.trend}%`,trendUp:Te.trend>0,description:`${a.length} total permits`},{title:"Total Est. Cost",value:R(Te.totalCost),icon:dl,color:"#4A90E2",trend:"+12.5%",trendUp:!0,description:"Combined project cost"},{title:"Top Barangay",value:Te.topBarangay.name,icon:Ur,color:"#FDA811",trend:`${Te.topBarangay.count} applications`,trendUp:Te.topBarangay.count>0,description:"Most applications"},{title:"Avg Storeys",value:Te.avgStoreys,icon:rn,color:"#9C27B0",trend:`${a.length} buildings`,trendUp:!0,description:"Average building height"}].map((ve,Qe)=>t.jsx("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] transition-all hover:shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:ve.title}),t.jsx("p",{className:"text-2xl font-bold text-[#4D4A4A] mt-2 font-montserrat",children:ve.value}),t.jsxs("div",{className:"mt-2",children:[t.jsxs("div",{className:"flex items-center",children:[ve.trendUp?t.jsx(dl,{className:"w-4 h-4 text-[#4CAF50] mr-1"}):t.jsx(d0,{className:"w-4 h-4 text-[#E53935] mr-1"}),t.jsx("span",{className:`text-sm ${ve.trendUp?"text-[#4CAF50]":"text-[#E53935]"}`,children:ve.trend})]}),t.jsx("span",{className:"text-xs text-[#4D4A4A] text-opacity-60",children:ve.description})]})]}),t.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:ve.color},children:t.jsx(ve.icon,{className:"w-6 h-6 text-white"})})]})},Qe))})]}),t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-[#E9E7E7]",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#4D4A4A] text-opacity-50 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search by name, barangay, permit group, email...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",value:m,onChange:he})]})}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx(B0,{selectsRange:!0,startDate:v,endDate:b,onChange:ve=>{p(ve),r(1)},className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins w-full md:w-auto",placeholderText:"Select date range"}),t.jsx(bn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-[#4D4A4A] text-opacity-50 w-5 h-5 pointer-events-none"})]}),(m||v||b)&&t.jsx("button",{onClick:W,className:"px-4 py-2 text-sm text-[#4D4A4A] hover:text-[#4CAF50] hover:bg-[#FBFBFB] rounded-lg transition-colors font-poppins",children:"Clear Filters"})]})]})})}),a.length>0&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsx("div",{className:"flex items-center justify-between mb-6",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Monthly Permit Trends"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Building permit applications over time"})]})}),t.jsx("div",{className:"h-[300px]",children:t.jsx(Wi,{data:ce,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1}},scales:{x:{grid:{color:"rgba(233,231,231,0.5)"},ticks:{color:"#4D4A4A",font:{family:"Poppins"}}},y:{grid:{color:"rgba(233,231,231,0.5)"},ticks:{color:"#4D4A4A",font:{family:"Poppins"}}}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Permit Group Distribution"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"By permit classification"})]}),t.jsx("div",{className:"h-[250px] flex items-center justify-center",children:t.jsx(Cu,{data:st,options:{maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"bottom",labels:{color:"#4D4A4A",padding:20,usePointStyle:!0,font:{family:"Poppins"}}}}}})})]})]}),a.length>0&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Cost Distribution"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Estimated project cost breakdown"})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Object.entries(tt).map(([ve,Qe],Ze)=>{const J=["#4CAF50","#4A90E2","#FDA811","#9C27B0","#E53935"],He=a.length>0?(Qe/a.length*100).toFixed(1):0;return t.jsxs("div",{className:"p-4 rounded-lg border-2 border-[#E9E7E7] hover:shadow-md transition-all",style:{borderLeftColor:J[Ze],borderLeftWidth:"4px"},children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 mb-1 font-poppins",children:ve}),t.jsx("p",{className:"text-2xl font-bold text-[#4D4A4A] font-montserrat mb-1",children:Qe}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-1 bg-[#E9E7E7] rounded-full h-1.5 mr-2",children:t.jsx("div",{className:"h-1.5 rounded-full",style:{width:`${He}%`,backgroundColor:J[Ze]}})}),t.jsxs("span",{className:"text-xs text-[#4D4A4A] text-opacity-70",children:[He,"%"]})]})]},ve)})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Ownership Type Distribution"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Breakdown by form of ownership"})]}),t.jsx("div",{className:"space-y-3",children:Object.entries(Ae).map(([ve,Qe],Ze)=>{const J=(Qe/a.length*100).toFixed(1),He=["#4CAF50","#4A90E2","#FDA811","#9C27B0","#E53935"],xt=He[Ze%He.length];return t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-[#4D4A4A] font-poppins",children:ve}),t.jsx("span",{className:"text-sm font-bold text-[#4D4A4A] font-montserrat",children:Qe})]}),t.jsx("div",{className:"w-full bg-[#E9E7E7] rounded-full h-2.5",children:t.jsx("div",{className:"h-2.5 rounded-full transition-all",style:{width:`${J}%`,backgroundColor:xt}})}),t.jsxs("span",{className:"text-xs text-[#4D4A4A] text-opacity-70 mt-1",children:[J,"%"]})]},ve)})})]})]}),a.length>0&&we.labels[0]!=="No Data"&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsx("div",{className:"flex items-center justify-between mb-6",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Top Barangays"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Application distribution by barangay"})]})}),t.jsx("div",{className:"h-[300px]",children:t.jsx(vc,{data:we,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233,231,231,0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233,231,231,0.5)"},beginAtZero:!0}}}})})]}),a.length>0&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Weekly Applications Trend"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Last 8 weeks"})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(Wi,{data:gt,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!0,position:"top",labels:{color:"#4D4A4A",font:{family:"Poppins"}}},tooltip:{callbacks:{title:ve=>{const Qe=gt.rawData[ve[0].dataIndex];return`${Qe.label}: ${new Date(Qe.weekStart).toLocaleDateString()} - ${new Date(Qe.weekEnd).toLocaleDateString()}`}}}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233,231,231,0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"},stepSize:1},grid:{color:"rgba(233,231,231,0.5)"},beginAtZero:!0}}}})}),t.jsx("div",{className:"mt-4 grid grid-cols-4 md:grid-cols-8 gap-2",children:gt.rawData.map((ve,Qe)=>t.jsxs("div",{className:"text-center p-2 bg-[#FBFBFB] rounded border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins",children:ve.label}),t.jsx("p",{className:"text-lg font-bold text-[#4CAF50] font-montserrat",children:ve.count})]},Qe))})]}),a.length>0&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Monthly Applications Trend"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Last 12 months"})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(Wi,{data:q,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!0,position:"top",labels:{color:"#4D4A4A",font:{family:"Poppins"}}}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233,231,231,0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"},stepSize:1},grid:{color:"rgba(233,231,231,0.5)"},beginAtZero:!0}}}})}),t.jsx("div",{className:"mt-4 grid grid-cols-6 md:grid-cols-12 gap-2",children:q.rawData.map((ve,Qe)=>t.jsxs("div",{className:"text-center p-2 bg-[#FBFBFB] rounded border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins",children:ve.label}),t.jsx("p",{className:"text-lg font-bold text-[#4A90E2] font-montserrat",children:ve.count})]},Qe))})]}),a.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-[#E9E7E7] overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Applications List"}),t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:["Showing ",ye+1,"-",Math.min(De,se.length)," of ",se.length," applications"]})]}),t.jsxs("button",{onClick:()=>window.print(),className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors flex items-center font-poppins",title:"Print Report",children:[t.jsx(rA,{className:"w-4 h-4 mr-2"}),"Print"]})]}),t.jsx("nav",{className:"flex space-x-6",children:Qt.map(ve=>t.jsxs("button",{onClick:()=>{u(ve.key),r(1)},className:`py-2 px-3 border-b-2 font-medium text-sm flex items-center gap-2 transition-all whitespace-nowrap ${c===ve.key?"border-[#4CAF50] text-[#4CAF50]":"border-transparent text-[#4D4A4A] hover:text-[#4CAF50]"}`,children:[ve.label,t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c===ve.key?"bg-[#4CAF50] text-white":"bg-[#FBFBFB] text-[#4D4A4A] border border-[#E9E7E7]"}`,children:yt[ve.key]||0})]},ve.key))})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-[#FBFBFB]",children:t.jsx("tr",{children:["Application ID","Applicant","Permit Group","Use of Permit","Barangay","Est. Cost","Storeys","Date","Actions"].map(ve=>t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:ve},ve))})}),t.jsx("tbody",{className:"divide-y divide-[#E9E7E7]",children:me.length>0?me.map((ve,Qe)=>t.jsxs("tr",{className:"hover:bg-[#FBFBFB] transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"font-mono text-sm text-[#4D4A4A] font-medium",children:ve.id})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-[#4D4A4A] font-montserrat",children:ve.full_name}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:ve.contact_number})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:ve.permit_group_short})}),t.jsx("td",{className:"px-6 py-4 text-[#4D4A4A] font-poppins",children:ve.use_of_permit}),t.jsx("td",{className:"px-6 py-4 text-[#4D4A4A] font-poppins",children:ve.barangay}),t.jsx("td",{className:"px-6 py-4 text-[#4D4A4A] font-poppins font-medium",children:R(ve.total_estimated_cost)}),t.jsx("td",{className:"px-6 py-4 text-[#4D4A4A] font-poppins",children:ve.number_of_storeys}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:I(ve.proposed_date)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("button",{onClick:()=>Oe(ve.id),title:"View Details",className:"p-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#FDA811]/80 transition-colors",children:t.jsx(ws,{className:"w-5 h-5"})})})]},Qe)):t.jsx("tr",{children:t.jsxs("td",{colSpan:"9",className:"px-6 py-12 text-center",children:[t.jsx(Ur,{className:"w-12 h-12 text-[#E9E7E7] mx-auto mb-4"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70",children:a.length===0?"No applications found.":"No applications match your filters"}),a.length>0&&t.jsx("button",{onClick:W,className:"mt-4 px-4 py-2 border border-[#E9E7E7] text-[#4D4A4A] rounded-lg hover:bg-[#FBFBFB] transition-colors font-poppins",children:"Clear Filters"})]})})})]})}),se.length>te&&t.jsx("div",{className:"p-5 border-t border-[#E9E7E7]",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:["Page ",s," of ",le]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>r(ve=>Math.max(ve-1,1)),disabled:s===1,className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors disabled:opacity-50 font-poppins",children:"Previous"}),t.jsx("button",{onClick:()=>r(ve=>Math.min(ve+1,le)),disabled:s===le,className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors disabled:opacity-50 font-poppins",children:"Next"})]})]})})]}),o&&n&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-md p-4 overflow-auto animate-fadeIn",children:t.jsxs("div",{className:"w-full max-w-7xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl transform transition-all",children:[t.jsxs("div",{className:"relative p-6 bg-gradient-to-r from-gray-50 via-white to-gray-50 dark:from-slate-800 dark:via-slate-700 dark:to-slate-800 border-b-4 border-[#4CAF50]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-[#4CAF50] to-[#45a049] p-3 rounded-2xl shadow-xl",children:t.jsx(Ur,{className:"w-10 h-10 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Building Permit"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Application Details"})]})]}),t.jsx("button",{onClick:ze,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-blue-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Application ID"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white font-mono",children:n.id})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-purple-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Proposed Date"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:I(n.proposed_date)})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-green-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Est. Cost"}),t.jsx("p",{className:"text-lg font-bold text-green-600",children:R(n.total_estimated_cost)})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-orange-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Permit Group"}),t.jsx("span",{className:"px-3 py-1 text-xs font-bold rounded-full bg-blue-100 text-blue-700",children:n.permit_group_short})]})]})]}),t.jsxs("div",{className:"p-8 space-y-8 max-h-[80vh] overflow-y-auto bg-gradient-to-b from-gray-50 to-white dark:from-slate-900 dark:to-slate-800",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-blue-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:t.jsx(gr,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Applicant Information"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{label:"Full Name",value:n.full_name},{label:"Contact Number",value:n.contact_number},{label:"Email Address",value:n.email},{label:"Home Address",value:n.home_address},{label:"Citizenship",value:n.citizenship},{label:"Form of Ownership",value:n.form_of_ownership}].map((ve,Qe)=>t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:ve.label}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:ve.value})]},Qe))})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-green-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-3 rounded-xl shadow-lg",children:t.jsx(Ec,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Project Site"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{label:"Street",value:n.street},{label:"Barangay",value:n.barangay},{label:"City/Municipality",value:n.city_municipality},{label:"Province",value:n.province},{label:"Lot No.",value:n.lot_no},{label:"Block No.",value:n.blk_no},{label:"TCT No.",value:n.tct_no},{label:"Tax Dec. No.",value:n.tax_dec_no}].map((ve,Qe)=>t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:ve.label}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:ve.value})]},Qe))})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-orange-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-xl shadow-lg",children:t.jsx(Ur,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Building Details"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{label:"Permit Group",value:n.permit_group},{label:"Use of Permit",value:n.use_of_permit},{label:"Number of Storeys",value:n.number_of_storeys},{label:"Number of Units",value:n.number_of_units},{label:"Total Floor Area",value:`${n.total_floor_area} sqm`},{label:"Lot Area",value:`${n.lot_area} sqm`},{label:"Proposed Start",value:I(n.proposed_date)},{label:"Expected Completion",value:I(n.expected_completion)}].map((ve,Qe)=>t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:ve.label}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:ve.value})]},Qe))})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-slate-800 dark:to-slate-700 rounded-2xl shadow-lg p-6 border-2 border-green-200 dark:border-slate-600",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Project Cost Breakdown"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{label:"Building Cost",value:n.building_cost,color:"green"},{label:"Electrical Cost",value:n.electrical_cost,color:"blue"},{label:"Mechanical Cost",value:n.mechanical_cost,color:"orange"},{label:"Electronics Cost",value:n.electronics_cost,color:"purple"},{label:"Plumbing Cost",value:n.plumbing_cost,color:"cyan"},{label:"Equipment Cost",value:n.equipment_cost,color:"indigo"}].map((ve,Qe)=>t.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-${ve.color}-500`,children:[t.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:ve.label}),t.jsx("p",{className:"text-xl font-black text-gray-800 mt-2",children:R(ve.value)})]},Qe))}),t.jsx("div",{className:"mt-6 p-4 bg-white dark:bg-slate-800 rounded-xl border-2 border-dashed border-green-300",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-lg font-bold text-gray-700 dark:text-gray-300",children:"Total Estimated Cost:"}),t.jsx("span",{className:"text-3xl font-black text-green-600",children:R(n.total_estimated_cost)})]})})]}),n.remarks&&t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-yellow-100 dark:border-slate-700",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Remarks"}),t.jsx("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg p-4 border border-gray-200 dark:border-slate-600",children:t.jsx("p",{className:"text-gray-900 dark:text-white",children:n.remarks})})]}),t.jsx("div",{className:"flex justify-end pt-8 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-6 border-t-4 border-gray-300 dark:border-slate-600",children:t.jsxs("button",{onClick:ze,className:"px-8 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2",children:[t.jsx(ls,{className:"w-5 h-5"}),"Close"]})})]})]})}),O&&t.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:t.jsx("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-xl shadow-2xl p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:t.jsx(Us,{className:"h-10 w-10 text-green-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Success!"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:$}),t.jsxs("button",{onClick:()=>{X(!1),H("")},className:"px-6 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#4CAF50]/80 transition-colors font-medium flex items-center mx-auto",children:[t.jsx(Us,{className:"w-4 h-4 mr-2"}),"Continue"]})]})})})]})}const GD="/backend/building_permit",WD={pending:{label:"Pending",color:"bg-amber-100 text-amber-800",icon:jr},approved:{label:"Approved",color:"bg-green-100 text-green-800",icon:Us},rejected:{label:"Rejected",color:"bg-red-100 text-red-800",icon:Ka},under_review:{label:"Under Review",color:"bg-blue-100 text-blue-800",icon:ws},compliance:{label:"Compliance",color:"bg-orange-100 text-orange-800",icon:Ks}},Qde=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};function Hde(){const[a,e]=C.useState([]),[s,r]=C.useState(!0),[n,i]=C.useState(null),[o,l]=C.useState(null),[c,u]=C.useState(""),[m,A]=C.useState(""),[g,p]=C.useState("all"),[v,b]=C.useState("latest"),[y,w]=C.useState({isOpen:!1,status:"",permitId:""}),B=C.useMemo(()=>{const D=a.length,P=a.filter(ae=>(ae.status||"").toLowerCase()==="approved").length,Y=a.filter(ae=>!ae.status||(ae.status||"").toLowerCase()==="pending").length,Q=a.filter(ae=>(ae.status||"").toLowerCase()==="rejected").length,L=a.filter(ae=>(ae.status||"").toLowerCase()==="under_review").length;return{total:D,approved:P,pending:Y,rejected:Q,underReview:L}},[a]),j=async()=>{try{r(!0),i(null);const D=await fetch(`${GD}/building_permit.php`);if(!D.ok)throw new Error(`Server error: ${D.status}`);const P=await D.json();if(P.success&&Array.isArray(P.data))e(P.data);else if(Array.isArray(P))e(P);else throw new Error(P.message||"Failed to fetch applications")}catch(D){console.error("Error loading building applications:",D),i(D.message)}finally{r(!1)}};C.useEffect(()=>{j()},[]);const E=C.useMemo(()=>{let D=[...a];if(g!=="all"&&(D=D.filter(P=>(P.status||"pending").toLowerCase()===g)),m.trim()){const P=m.toLowerCase();D=D.filter(Y=>(Y.first_name||"").toLowerCase().includes(P)||(Y.last_name||"").toLowerCase().includes(P)||(Y.project_title||"").toLowerCase().includes(P)||(Y.application_id||"").toString().includes(P)||(Y.lot_number||"").toLowerCase().includes(P))}return v==="latest"?D.sort((P,Y)=>new Date(Y.created_at||0)-new Date(P.created_at||0)):v==="oldest"&&D.sort((P,Y)=>new Date(P.created_at||0)-new Date(Y.created_at||0)),D},[a,g,m,v]),S=async D=>{if(!o)return;const P=o.application_id||o.permit_id;try{const Q=await(await fetch(`${GD}/building_permit.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update_status",application_id:P,status:D.toLowerCase(),comments:c})})).json();Q.success?(w({isOpen:!0,status:D,permitId:P}),e(L=>L.map(ae=>(ae.application_id||ae.permit_id)===P?{...ae,status:D.toLowerCase(),admin_note:c}:ae)),l(L=>({...L,status:D.toLowerCase(),admin_note:c}))):dt.fire({icon:"error",title:"Error",text:Q.message||"Failed to update status",confirmButtonColor:"#E53935"})}catch(Y){console.error(Y),dt.fire({icon:"error",title:"Error",text:"Error updating status: "+Y.message,confirmButtonColor:"#E53935"})}},T=async D=>{const P=await dt.fire({title:`${D} this application?`,html:`<p class="text-sm text-gray-600">Application #${o.application_id||o.permit_id}</p>`,icon:D==="Rejected"?"warning":"question",input:"textarea",inputLabel:D==="Rejected"?"Reason for rejection (required)":"Add notes (optional)",inputPlaceholder:"Enter notes...",inputValue:c,inputValidator:D==="Rejected"?Y=>Y?null:"Rejection reason is required":void 0,showCancelButton:!0,confirmButtonText:`Yes, ${D}`,confirmButtonColor:D==="Approved"?"#4CAF50":D==="Rejected"?"#E53935":"#4A90E2",cancelButtonColor:"#6b7280"});P.isConfirmed&&(u(P.value||""),await S(D))},M=D=>{const P=(D||"pending").toLowerCase(),Y=WD[P]||WD.pending;return t.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold ${Y.color}`,children:[t.jsx(Y.icon,{className:"w-3 h-3"}),Y.label]})};return t.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-lg min-h-screen font-[Montserrat,Arial,sans-serif]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(ll,{className:"w-7 h-7 text-[#4A90E2]"}),"Building Permit Processing"]}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Review, approve, or reject building permit applications"})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[{label:"Total",value:B.total,bg:"bg-blue-50 dark:bg-blue-900/20",text:"text-blue-700 dark:text-blue-300"},{label:"Pending",value:B.pending,bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-700 dark:text-amber-300"},{label:"Approved",value:B.approved,bg:"bg-green-50 dark:bg-green-900/20",text:"text-green-700 dark:text-green-300"},{label:"Rejected",value:B.rejected,bg:"bg-red-50 dark:bg-red-900/20",text:"text-red-700 dark:text-red-300"},{label:"Under Review",value:B.underReview,bg:"bg-indigo-50 dark:bg-indigo-900/20",text:"text-indigo-700 dark:text-indigo-300"}].map(D=>t.jsxs("div",{className:`${D.bg} rounded-xl p-4`,children:[t.jsx("p",{className:`text-xs font-medium ${D.text} opacity-80`,children:D.label}),t.jsx("p",{className:`text-2xl font-bold ${D.text}`,children:D.value})]},D.label))}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by name, project, ID...",value:m,onChange:D=>A(D.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 dark:border-slate-700 rounded-xl text-sm bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-[#4A90E2] focus:outline-none"})]}),t.jsxs("select",{value:g,onChange:D=>p(D.target.value),className:"px-4 py-2.5 border border-gray-200 dark:border-slate-700 rounded-xl text-sm bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-[#4A90E2] focus:outline-none",children:[t.jsx("option",{value:"all",children:"All Statuses"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"approved",children:"Approved"}),t.jsx("option",{value:"rejected",children:"Rejected"}),t.jsx("option",{value:"under_review",children:"Under Review"})]}),t.jsxs("select",{value:v,onChange:D=>b(D.target.value),className:"px-4 py-2.5 border border-gray-200 dark:border-slate-700 rounded-xl text-sm bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-[#4A90E2] focus:outline-none",children:[t.jsx("option",{value:"latest",children:"Latest First"}),t.jsx("option",{value:"oldest",children:"Oldest First"})]}),t.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2.5 bg-[#4A90E2] text-white rounded-xl text-sm font-medium hover:bg-[#3a7bc8] transition",children:[t.jsx(Ya,{className:"w-4 h-4"})," Refresh"]})]}),s?t.jsxs("div",{className:"flex items-center justify-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-[#4A90E2] border-t-transparent rounded-full"}),t.jsx("span",{className:"ml-3 text-gray-500",children:"Loading applications..."})]}):n?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ks,{className:"w-12 h-12 text-red-400 mx-auto mb-3"}),t.jsx("p",{className:"text-red-600 font-medium",children:n}),t.jsx("button",{onClick:j,className:"mt-3 text-sm text-[#4A90E2] hover:underline",children:"Try again"})]}):E.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Kt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500",children:"No applications found"})]}):t.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200 dark:border-slate-700",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800",children:t.jsx("tr",{children:["ID","Applicant","Project / Location","Type","Status","Date","Action"].map(D=>t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:D},D))})}),t.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:E.map(D=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition",children:[t.jsxs("td",{className:"px-4 py-3 text-sm font-mono text-gray-900 dark:text-white",children:["#",D.application_id||D.permit_id]}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[D.first_name," ",D.last_name]}),t.jsx("p",{className:"text-xs text-gray-500",children:D.email||D.contact_no||""})]}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:D.project_title||D.scope_of_work||"N/A"}),t.jsxs("p",{className:"text-xs text-gray-500",children:[D.lot_number||""," ",D.barangay||""]})]}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-300",children:D.permit_type||D.scope_of_work||"Building"}),t.jsx("td",{className:"px-4 py-3",children:M(D.status)}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:Qde(D.created_at||D.application_date)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("button",{onClick:()=>{l(D),u(D.admin_note||"")},className:"inline-flex items-center gap-1 px-3 py-1.5 bg-[#4A90E2] text-white text-xs font-medium rounded-lg hover:bg-[#3a7bc8] transition",children:[t.jsx(ws,{className:"w-3 h-3"})," Review"]})})]},D.application_id||D.permit_id))})]})}),o&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[t.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(ll,{className:"w-5 h-5 text-[#4A90E2]"}),"Application #",o.application_id||o.permit_id]}),t.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-red-500 text-xl font-bold",children:""})]}),t.jsxs("div",{className:"p-6 space-y-5",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Current Status:"}),M(o.status)]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[t.jsx(gr,{className:"w-4 h-4"})," Applicant Information"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Name:"})," ",t.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[o.first_name," ",o.middle_initial||""," ",o.last_name]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Email:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Contact:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.contact_no||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"TIN:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.tin||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Address:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.home_address||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Ownership:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.form_of_ownership||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[t.jsx(ll,{className:"w-4 h-4"})," Project Details"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Project Title:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.project_title||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Scope of Work:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.scope_of_work||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Permit Type:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.permit_type||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Lot Number:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.lot_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Barangay:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.barangay||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Estimated Cost:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.estimated_cost?`${parseFloat(o.estimated_cost).toLocaleString()}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Floor Area:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.total_floor_area||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Storeys:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.number_of_storeys||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[t.jsx(Ec,{className:"w-4 h-4"})," Location Details"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"TCT/OCT No:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.tct_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Tax Dec No:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.tax_dec_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Street:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.street||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"City:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.city_municipality||"General Santos City"})]})]})]}),t.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Admin Notes / Remarks"}),t.jsx("textarea",{value:c,onChange:D=>u(D.target.value),rows:3,className:"w-full border border-gray-200 dark:border-slate-700 rounded-xl p-3 text-sm bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-[#4A90E2] focus:outline-none",placeholder:"Add remarks or processing notes..."})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[t.jsxs("button",{onClick:()=>T("Approved"),className:"flex items-center gap-2 px-5 py-2.5 bg-[#4CAF50] text-white rounded-xl text-sm font-semibold hover:bg-green-700 transition",children:[t.jsx(Us,{className:"w-4 h-4"})," Approve"]}),t.jsxs("button",{onClick:()=>T("Rejected"),className:"flex items-center gap-2 px-5 py-2.5 bg-[#E53935] text-white rounded-xl text-sm font-semibold hover:bg-red-700 transition",children:[t.jsx(Ka,{className:"w-4 h-4"})," Reject"]}),t.jsxs("button",{onClick:()=>T("Pending"),className:"flex items-center gap-2 px-5 py-2.5 bg-[#4A90E2] text-white rounded-xl text-sm font-semibold hover:bg-blue-700 transition",children:[t.jsx(jr,{className:"w-4 h-4"})," Set Pending"]}),t.jsx("button",{onClick:()=>l(null),className:"ml-auto px-5 py-2.5 border border-gray-300 dark:border-slate-600 text-gray-600 dark:text-gray-300 rounded-xl text-sm font-medium hover:bg-gray-100 dark:hover:bg-slate-800 transition",children:"Close"})]})]})]})}),y.isOpen&&t.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-sm p-6 shadow-2xl text-center",children:t.jsxs("div",{className:"flex flex-col items-center gap-3",children:[y.status==="Approved"&&t.jsx(Us,{className:"w-12 h-12 text-green-500"}),y.status==="Rejected"&&t.jsx(Ka,{className:"w-12 h-12 text-red-500"}),y.status==="Pending"&&t.jsx(jr,{className:"w-12 h-12 text-blue-500"}),t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:["Building Permit #",y.permitId," has been ",t.jsx("span",{className:"lowercase",children:y.status})]}),t.jsx("button",{onClick:()=>w({...y,isOpen:!1}),className:"mt-3 bg-[#4A90E2] text-white px-6 py-2 rounded-xl text-sm font-medium hover:bg-[#3a7bc8] transition",children:"Done"})]})})})]})}Eu.register(Gp,Wp,Hp,Up,Qp,Fu,$p,qp,zp,Vp);const Vde="/backend/building_permit",YD={Architect:["Designer of Record","Interior Design Consultant","Landscape Designer","Consultant"],"Civil Engineer":["Designer of Record","Structural Designer","Inspector / Supervisor","Contractor"],"Structural Engineer":["Structural Designer","Inspector / Supervisor","Consultant"],"Electrical Engineer":["Electrical Designer","Inspector / Supervisor","Consultant"],"Mechanical Engineer":["Mechanical Designer","Consultant"],"Electronics Engineer":["Electronics Designer","Consultant"],"Sanitary Engineer":["Sanitary / Plumbing Designer","Consultant"],"Master Plumber":["Plumbing Designer","Consultant"],"Geodetic Engineer":["Surveyor"],"Interior Designer":["Interior Design Consultant"],"Landscape Architect":["Landscape Designer"],"Environmental Planner":["Environmental Consultant"],"Fire Protection Engineer":["Fire Safety Consultant"],Contractor:["Contractor"]},KD={Architect:"#4CAF50","Civil Engineer":"#FDA811","Structural Engineer":"#4A90E2","Electrical Engineer":"#9C27B0","Mechanical Engineer":"#2196F3","Electronics Engineer":"#795548","Sanitary Engineer":"#607D8B","Master Plumber":"#3F51B5","Geodetic Engineer":"#E91E63","Interior Designer":"#FF9800","Landscape Architect":"#4CAF50","Environmental Planner":"#8BC34A","Fire Protection Engineer":"#F44336",Contractor:"#00BCD4"};function zde(){const[a,e]=C.useState([]),[s,r]=C.useState([]),[n,i]=C.useState(!0),[o,l]=C.useState(null),[c,u]=C.useState([null,null]),[m,A]=c,[g,p]=C.useState(""),[v,b]=C.useState("all"),[y,w]=C.useState("all"),[B,j]=C.useState(!1),[E,S]=C.useState(""),[T,M]=C.useState(!1),[D,P]=C.useState(null),[Y,Q]=C.useState(1),[L,ae]=C.useState("dashboard"),[ne,V]=C.useState(""),[O,X]=C.useState(!1),[$,H]=C.useState({}),te=C.useRef(null),K=15,I=async()=>{try{i(!0),l(null);const Oe=await fetch(`${Vde}/professional_registration.php`);if(!Oe.ok)throw new Error(`HTTP error! status: ${Oe.status}`);const ze=await Oe.json();if(ze.success&&ze.data)e(ze.data);else throw new Error(ze.message||"Failed to fetch registrations")}catch(Oe){l(Oe.message),console.error("Error fetching registrations:",Oe)}finally{i(!1)}},R=C.useMemo(()=>{const Oe=a.length,ze=a.filter(J=>J.status?.toUpperCase()==="APPROVED").length,Le=a.filter(J=>J.status?.toUpperCase()==="REJECTED").length,oe=a.filter(J=>J.status?.toUpperCase()==="PENDING"||!J.status).length,he=Object.keys(YD).map(J=>{const He=a.filter(Ct=>Ct.profession===J).length,xt=a.filter(Ct=>Ct.profession===J&&Ct.status?.toUpperCase()==="APPROVED").length,Xe=He>0?(xt/He*100).toFixed(1):0;return{profession:J,count:He,approvedCount:xt,approvalRate:Xe,color:KD[J]||"#4CAF50"}}).filter(J=>J.count>0).sort((J,He)=>He.count-J.count),W=he[0]||{profession:"N/A",count:0},ve=5,Qe=Math.floor(Oe*.85),Ze=Oe>0?((Oe-Qe)/Qe*100).toFixed(1):0;return{total:Oe,approved:ze,rejected:Le,pending:oe,professionStats:he,topProfession:W,avgProcessingTime:ve,trend:Ze,approvalRate:Oe>0?(ze/Oe*100).toFixed(1):0,completionRate:Oe>0?((ze+Le)/Oe*100).toFixed(1):0}},[a]),G=C.useMemo(()=>{const Oe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ze=new Date().getMonth(),Le=new Date().getFullYear(),oe=Oe.slice(Math.max(0,ze-5),ze+1),he=R.professionStats.slice(0,3),W={};he.forEach(Qe=>{W[Qe.profession]=Array(oe.length).fill(0)}),a.forEach(Qe=>{if(!Qe.date_submitted)return;const Ze=new Date(Qe.date_submitted),J=Ze.getMonth();if(Ze.getFullYear()===Le&&J<=ze&&J>=ze-5){const xt=J-(ze-5);xt>=0&&he.forEach(Xe=>{Qe.profession===Xe.profession&&W[Xe.profession][xt]++})}});const ve=["#4CAF50","#FDA811","#4A90E2"];return{labels:oe,datasets:he.map((Qe,Ze)=>({label:Qe.profession,data:W[Qe.profession]||Array(oe.length).fill(0),borderColor:ve[Ze],backgroundColor:ve[Ze]+"20",fill:!0,tension:.4}))}},[a,R.professionStats]),se=C.useMemo(()=>({labels:["Approved","Rejected","Pending"],datasets:[{data:[R.approved||0,R.rejected||0,R.pending||0],backgroundColor:["#4CAF50","#E53935","#4A90E2"],hoverBackgroundColor:["#45a049","#d32f2f","#3d7bc7"],borderColor:"#ffffff",borderWidth:3}]}),[R]),le=Oe=>{switch((Oe||"").toUpperCase()){case"APPROVED":return{text:"Approved",color:"text-[#4CAF50]",bgColor:"bg-[#4CAF50]/10",icon:Us};case"REJECTED":return{text:"Rejected",color:"text-[#E53935]",bgColor:"bg-[#E53935]/10",icon:Ka};default:return{text:"Pending",color:"text-[#4A90E2]",bgColor:"bg-[#4A90E2]/10",icon:jr}}};C.useEffect(()=>{let Oe=[...a];const ze=g.toLowerCase();m&&A&&(Oe=Oe.filter(Le=>{if(!Le.date_submitted)return!1;const oe=new Date(Le.date_submitted);return oe>=m&&oe<=A})),g&&(Oe=Oe.filter(Le=>Le.first_name?.toLowerCase().includes(ze)||Le.last_name?.toLowerCase().includes(ze)||Le.profession?.toLowerCase().includes(ze)||Le.prc_license?.toLowerCase().includes(ze)||Le.registration_id?.toLowerCase().includes(ze))),v!=="all"&&(Oe=Oe.filter(Le=>(Le.status||"").toUpperCase()===v.toUpperCase())),y!=="all"&&(Oe=Oe.filter(Le=>Le.profession===y)),r(Oe),Q(1)},[a,m,A,g,v,y]),C.useEffect(()=>{I()},[]);const ye=()=>{j(!0),S("csv");const ze=[["Registration ID","Name","Profession","Role","PRC License","PRC Expiry","PTR Number","TIN","Contact","Email","Birth Date","Status","Date Submitted"].join(","),...a.map(W=>[W.registration_id,`${W.last_name}, ${W.first_name} ${W.middle_initial||""}`.trim(),W.profession,W.role_in_project,W.prc_license,W.prc_expiry,W.ptr_number,W.tin,W.contact_number,W.email,W.birth_date,le(W.status).text,W.date_submitted?new Date(W.date_submitted).toLocaleDateString():""].map(ve=>`"${ve||""}"`).join(","))].join(`
`),Le=new Blob([ze],{type:"text/csv"}),oe=window.URL.createObjectURL(Le),he=document.createElement("a");he.href=oe,he.download=`professional-registrations-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(he),he.click(),document.body.removeChild(he),window.URL.revokeObjectURL(oe),j(!1),S("")},De=async()=>{j(!0),S("pdf");try{dt.fire({title:"Generating PDF...",text:"Please wait while we create your report",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{dt.showLoading()}}),await new Promise(He=>setTimeout(He,500));const Oe=document.createElement("div");Oe.style.cssText="position: absolute; left: -9999px; width: 1200px; background: #FBFBFB; padding: 30px; font-family: Arial, sans-serif;",Oe.innerHTML=`
        <div style="margin-bottom: 30px;">
          <h1 style="color: #4D4A4A; font-size: 28px; margin: 0 0 10px 0;">Professional Registration Analytics</h1>
          <p style="color: #666; margin: 0;">Generated on ${new Date().toLocaleDateString()}</p>
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 30px;">
          ${[{title:"Total Registrations",value:R.total,color:"#4CAF50"},{title:"Approved",value:R.approved,color:"#4CAF50"},{title:"Pending",value:R.pending,color:"#4A90E2"},{title:"Rejected",value:R.rejected,color:"#E53935"}].map(He=>`
            <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 20px; background: white;">
              <p style="color: #666; font-size: 12px; margin: 0 0 10px 0;">${He.title}</p>
              <p style="color: ${He.color}; font-size: 32px; font-weight: bold; margin: 0;">${He.value}</p>
            </div>
          `).join("")}
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Top Professions</h2>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            ${R.professionStats.slice(0,6).map((He,xt)=>{const Xe=R.total>0?(He.count/R.total*100).toFixed(1):0;return`
                <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 12px; background: white; border-left: 5px solid ${He.color};">
                  <p style="color: #4D4A4A; font-size: 12px; margin: 0 0 5px 0; font-weight: 500;">${He.profession}</p>
                  <p style="color: #4D4A4A; font-size: 20px; font-weight: bold; margin: 0;">${He.count}</p>
                  <p style="color: #666; font-size: 11px; margin: 3px 0 0 0;">${Xe}% of total</p>
                </div>
              `}).join("")}
          </div>
        </div>
      `,document.body.appendChild(Oe),await new Promise(He=>setTimeout(He,100));const ze=await Tu(Oe,{scale:2,backgroundColor:"#FBFBFB",logging:!1});document.body.removeChild(Oe);const Le=ze.toDataURL("image/png"),oe=new Es({orientation:"portrait",unit:"mm",format:"a4"}),he=oe.internal.pageSize.getWidth(),W=oe.internal.pageSize.getHeight(),ve=he-20,Qe=ze.height*ve/ze.width;let Ze=Qe,J=10;for(oe.addImage(Le,"PNG",10,J,ve,Qe),Ze-=W;Ze>0;)J=Ze-Qe+10,oe.addPage(),oe.addImage(Le,"PNG",10,J,ve,Qe),Ze-=W;oe.save(`professional-registrations-${new Date().toISOString().split("T")[0]}.pdf`),dt.fire({icon:"success",title:"PDF Downloaded!",text:"Your report has been downloaded successfully.",timer:2e3,showConfirmButton:!1})}catch(Oe){console.error("Error generating PDF:",Oe),dt.fire({title:"Export Failed",text:Oe.message||"Failed to generate PDF. Please try again.",icon:"error"})}finally{j(!1),S("")}},me=Math.ceil(s.length/K),Te=(Y-1)*K,we=Te+K,st=s.slice(Te,we),ce=Oe=>{P(Oe),V(""),X(!1),M(!0)},tt=()=>{P(null),V(""),X(!1),M(!1)},Ae=Oe=>{if(!Oe||typeof Oe!="string")return[];try{const ze=Oe.split(/(?=---\s+.+?\s+---)/g),Le=[];for(let oe of ze){if(oe=oe.trim(),!oe)continue;const he=oe.match(/^---\s+(.+?)\s+---\n([\s\S]*)$/);if(he){const W=he[1].trim(),ve=he[2].trim();ve&&Le.push({timestamp:W,comment:ve})}else Le.push({timestamp:"Just now",comment:oe})}return Le}catch(ze){return console.error("Error formatting comments:",ze),[{timestamp:"Recent",comment:Oe}]}},gt=async()=>{if(!D||!ne.trim())return;const Le=`--- ${new Date().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})} ---
${ne}
`+(D.remarks||"");e(oe=>oe.map(he=>he.registration_id===D.registration_id?{...he,remarks:Le}:he)),P(oe=>({...oe,remarks:Le})),V(""),dt.fire({icon:"success",title:"Comment Saved!",text:"Your comment has been added.",confirmButtonColor:"#4CAF50",timer:2e3,showConfirmButton:!0})},q=async()=>{if(!D)return;const Oe=await dt.fire({title:"Approve Registration?",html:`<div class="text-left"><p class="mb-2">Approve this professional registration:</p><div class="bg-gray-50 p-3 rounded-lg mb-3"><p class="text-sm"><strong>Registration ID:</strong> ${D.registration_id}</p><p class="text-sm"><strong>Professional:</strong> ${D.last_name}, ${D.first_name}</p><p class="text-sm"><strong>Profession:</strong> ${D.profession}</p></div></div>`,icon:"question",input:"textarea",inputLabel:"Add approval notes (optional)",inputPlaceholder:"Enter any additional notes...",inputValue:ne,showCancelButton:!0,confirmButtonText:"Yes, Approve",cancelButtonText:"Cancel",confirmButtonColor:"#4CAF50",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-left"}});if(Oe.isConfirmed){const ze=Oe.value||ne,Le=new Date().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),oe=ze?`--- ${Le} ---
${ze}
`:"",he=oe?oe+(D.remarks||""):D.remarks;e(W=>W.map(ve=>ve.registration_id===D.registration_id?{...ve,status:"APPROVED",remarks:he}:ve)),P(W=>({...W,status:"APPROVED",remarks:he})),H(W=>({...W,[D.registration_id]:[...W[D.registration_id]||[],{action:"Approved",timestamp:Le,notes:ze||"",by:"Admin"}]})),V(""),dt.fire({icon:"success",title:"Success!",text:"Registration approved!",confirmButtonColor:"#4CAF50",timer:2e3,showConfirmButton:!0})}},Qt=async()=>{if(!D)return;const Oe=await dt.fire({title:"Reject Registration?",html:`<div class="text-left"><p class="mb-2">Reject this professional registration:</p><div class="bg-gray-50 p-3 rounded-lg mb-3"><p class="text-sm"><strong>Registration ID:</strong> ${D.registration_id}</p><p class="text-sm"><strong>Professional:</strong> ${D.last_name}, ${D.first_name}</p></div><p class="text-sm text-red-600">Please provide a reason for rejection.</p></div>`,icon:"warning",input:"textarea",inputLabel:"Reason for rejection (required)",inputPlaceholder:"Enter the reason...",inputValue:ne,inputValidator:ze=>{if(!ze)return"You must provide a reason!"},showCancelButton:!0,confirmButtonText:"Yes, Reject",cancelButtonText:"Cancel",confirmButtonColor:"#E53935",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-left"}});if(Oe.isConfirmed){const ze=new Date().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),Le=Oe.value?`--- ${ze} ---
${Oe.value}
`:"",oe=Le?Le+(D.remarks||""):D.remarks;e(he=>he.map(W=>W.registration_id===D.registration_id?{...W,status:"REJECTED",remarks:oe}:W)),P(he=>({...he,status:"REJECTED",remarks:oe})),H(he=>({...he,[D.registration_id]:[...he[D.registration_id]||[],{action:"Rejected",timestamp:ze,notes:Oe.value||"",by:"Admin"}]})),V(""),dt.fire({icon:"success",title:"Rejected",text:"Registration has been rejected.",confirmButtonColor:"#E53935",timer:2e3,showConfirmButton:!0})}},yt=async(Oe,ze,Le,oe="#4CAF50")=>{if(!D)return;const he=await dt.fire({title:ze,html:`<div class="text-left"><p class="mb-2">${Le}</p><div class="bg-gray-50 p-3 rounded-lg mb-3"><p class="text-sm"><strong>Registration ID:</strong> ${D.registration_id}</p><p class="text-sm"><strong>Professional:</strong> ${D.last_name}, ${D.first_name}</p></div><p class="text-sm text-gray-600">Add notes (optional).</p></div>`,icon:"question",input:"textarea",inputLabel:"Status update notes",inputPlaceholder:"Enter any relevant notes...",inputValue:ne,showCancelButton:!0,confirmButtonText:"Update Status",cancelButtonText:"Cancel",confirmButtonColor:oe,cancelButtonColor:"#6b7280",customClass:{popup:"text-left"}});if(he.isConfirmed){const W=he.value||"",ve=new Date().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),Qe=W?`--- ${ve} ---
${W}
`:"",Ze=Qe?Qe+(D.remarks||""):D.remarks,J=Oe.toUpperCase().replace(/\s+/g,"_");e(He=>He.map(xt=>xt.registration_id===D.registration_id?{...xt,status:J,remarks:Ze}:xt)),P(He=>({...He,status:J,remarks:Ze})),H(He=>({...He,[D.registration_id]:[...He[D.registration_id]||[],{action:Oe,timestamp:ve,notes:W,by:"Admin"}]})),V(""),dt.fire({icon:"success",title:"Status Updated!",text:`Status changed to ${Oe}`,confirmButtonColor:oe,timer:2e3,showConfirmButton:!0})}};return n?t.jsx("div",{className:"min-h-screen bg-[#FBFBFB] p-6 flex items-center justify-center font-poppins",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4CAF50] mx-auto"}),t.jsx("p",{className:"mt-4 text-[#4D4A4A]",children:"Loading professional registrations..."})]})}):t.jsxs("div",{className:"min-h-screen bg-[#FBFBFB] p-4 md:p-6 font-poppins",children:[t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"border-b border-[#E9E7E7]",children:t.jsxs("div",{className:"flex space-x-8",children:[t.jsxs("button",{onClick:()=>ae("dashboard"),className:`pb-4 px-2 font-medium transition-colors relative ${L==="dashboard"?"text-[#4CAF50]":"text-[#4D4A4A] hover:text-[#4CAF50]"}`,children:["Dashboard",L==="dashboard"&&t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#4CAF50]"})]}),t.jsxs("button",{onClick:()=>ae("application"),className:`pb-4 px-2 font-medium transition-colors relative ${L==="application"?"text-[#4CAF50]":"text-[#4D4A4A] hover:text-[#4CAF50]"}`,children:["Application",L==="application"&&t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#4CAF50]"})]})]})})}),L==="dashboard"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-[#4D4A4A] font-montserrat",children:"Professional Registration Dashboard"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 mt-2",children:"Track and analyze professional registrations by profession and status"})]}),t.jsxs("div",{className:"flex items-center space-x-3 mt-4 md:mt-0",children:[t.jsx("button",{onClick:I,className:"p-2 rounded-lg bg-white border border-[#E9E7E7] hover:bg-gray-50 transition-colors",title:"Refresh Data",children:t.jsx(Ya,{className:"w-5 h-5 text-[#4D4A4A]"})}),t.jsxs("button",{onClick:ye,disabled:B&&E==="csv",className:"px-4 py-2 bg-white border border-[#E9E7E7] text-[#4D4A4A] rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2 disabled:opacity-50 font-montserrat",children:[t.jsx(Dj,{className:"w-5 h-5"}),t.jsx("span",{children:B&&E==="csv"?"Exporting...":"Export CSV"})]}),t.jsxs("button",{onClick:De,disabled:B&&E==="pdf",className:"px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-opacity-90 transition-colors flex items-center space-x-2 disabled:opacity-50 font-montserrat",children:[t.jsx(nn,{className:"w-5 h-5"}),t.jsx("span",{children:B&&E==="pdf"?"Generating...":"Export PDF"})]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[{title:"Total Registrations",value:R.total,icon:yd,color:"#4CAF50",trend:`${R.trend}%`,trendUp:R.trend>0,description:"All professionals"},{title:"Approved",value:R.approved,icon:Us,color:"#4CAF50",trend:`${R.approvalRate}% approval rate`,trendUp:!0,description:"Verified professionals"},{title:"Top Profession",value:R.topProfession.profession,icon:_h,color:R.topProfession.color||"#4CAF50",trend:`${R.topProfession.count} registrations`,trendUp:!0,description:"Most registered"},{title:"Pending Review",value:R.pending,icon:jr,color:"#4A90E2",trend:`${R.avgProcessingTime} days avg`,trendUp:!1,description:"Awaiting approval"}].map((Oe,ze)=>t.jsx("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] transition-all hover:shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:Oe.title}),t.jsx("p",{className:"text-2xl font-bold text-[#4D4A4A] mt-2 font-montserrat",children:Oe.value}),t.jsxs("div",{className:"mt-2",children:[t.jsxs("div",{className:"flex items-center",children:[Oe.trendUp?t.jsx(dl,{className:"w-4 h-4 text-[#4CAF50] mr-1"}):t.jsx(d0,{className:"w-4 h-4 text-[#E53935] mr-1"}),t.jsx("span",{className:`text-sm ${Oe.trendUp?"text-[#4CAF50]":"text-[#E53935]"}`,children:Oe.trend})]}),t.jsx("span",{className:"text-xs text-[#4D4A4A] text-opacity-60",children:Oe.description})]})]}),t.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:Oe.color},children:t.jsx(Oe.icon,{className:"w-6 h-6 text-white"})})]})},ze))}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Approval Rate"}),t.jsxs("p",{className:"text-xl font-bold text-[#4CAF50]",children:[R.approvalRate,"%"]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Avg Processing"}),t.jsxs("p",{className:"text-xl font-bold text-[#4A90E2]",children:[R.avgProcessingTime," days"]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Completion Rate"}),t.jsxs("p",{className:"text-xl font-bold text-[#9C27B0]",children:[R.completionRate,"%"]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Monthly Trends by Profession"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Registrations for top professions"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:G.datasets.map((Oe,ze)=>t.jsxs("span",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Oe.borderColor}}),t.jsx("span",{className:"text-sm text-[#4D4A4A] ml-2",children:Oe.label})]},ze))})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(Wi,{data:G,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1}},scales:{x:{grid:{color:"rgba(233, 231, 231, 0.5)"},ticks:{color:"#4D4A4A",font:{family:"Poppins"}}},y:{grid:{color:"rgba(233, 231, 231, 0.5)"},ticks:{color:"#4D4A4A",font:{family:"Poppins"}}}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Status Distribution"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"By approval status"})]}),t.jsx("div",{className:"h-[250px] flex items-center justify-center",children:t.jsx(Cu,{data:se,options:{maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"bottom",labels:{color:"#4D4A4A",padding:20,usePointStyle:!0,font:{family:"Poppins"}}}}}})})]})]}),t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsx("div",{className:"flex items-center justify-between mb-6",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Registrations by Profession"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Distribution across different professional fields"})]})}),t.jsx("div",{className:"h-[300px]",children:t.jsx(vc,{data:{labels:R.professionStats.map(Oe=>Oe.profession),datasets:[{label:"Registrations",data:R.professionStats.map(Oe=>Oe.count),backgroundColor:R.professionStats.map(Oe=>Oe.color),borderRadius:6,borderWidth:1,borderColor:"#E9E7E7"}]},options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})}),t.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:R.professionStats.slice(0,8).map((Oe,ze)=>t.jsxs("div",{className:"p-3 rounded-lg border border-[#E9E7E7] hover:shadow transition-all",style:{borderLeftColor:Oe.color,borderLeftWidth:"4px"},children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(_h,{className:"w-5 h-5 mr-2",style:{color:Oe.color}}),t.jsx("span",{className:"text-sm font-medium text-[#4D4A4A] font-poppins truncate",children:Oe.profession})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-lg font-bold text-[#4D4A4A] font-montserrat",children:Oe.count}),t.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-[#FBFBFB] text-[#4D4A4A]",children:[Oe.approvalRate,"% approved"]})]})]},ze))})]})]}),L==="application"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-[#E9E7E7]",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#4D4A4A] text-opacity-50 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search by name, profession, or PRC license...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",value:g,onChange:Oe=>p(Oe.target.value)})]})}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx(B0,{selectsRange:!0,startDate:m,endDate:A,onChange:Oe=>u(Oe),className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins w-full md:w-auto",placeholderText:"Select date range"}),t.jsx(bn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-[#4D4A4A] text-opacity-50 w-5 h-5 pointer-events-none"})]}),t.jsxs("select",{value:v,onChange:Oe=>b(Oe.target.value),className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"approved",children:"Approved"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"rejected",children:"Rejected"})]}),t.jsxs("select",{value:y,onChange:Oe=>w(Oe.target.value),className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Professions"}),Object.keys(YD).map(Oe=>t.jsx("option",{value:Oe,children:Oe},Oe))]})]})]})})}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-[#E9E7E7] overflow-hidden",children:[t.jsx("div",{className:"p-5 border-b border-[#E9E7E7]",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Professional Registrations"}),t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:["Showing ",Te+1,"-",Math.min(we,s.length)," of ",s.length," registrations"]})]}),t.jsx("div",{className:"flex items-center space-x-3",children:t.jsxs("button",{onClick:()=>window.print(),className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors flex items-center font-poppins",title:"Print Report",children:[t.jsx(rA,{className:"w-4 h-4 mr-2"}),"Print"]})})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-[#FBFBFB]",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Registration ID"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Professional"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Profession"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Role"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"PRC License"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Date Submitted"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-[#E9E7E7]",children:st.map((Oe,ze)=>{const Le=le(Oe.status),oe=Le.icon;return t.jsxs("tr",{className:"hover:bg-[#FBFBFB] transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"font-mono text-sm text-[#4D4A4A] font-medium",children:Oe.registration_id})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium text-[#4D4A4A] font-montserrat",children:[Oe.last_name,", ",Oe.first_name," ",Oe.middle_initial]}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:Oe.email})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(_h,{className:"w-5 h-5 mr-3",style:{color:KD[Oe.profession]||"#4CAF50"}}),t.jsx("span",{className:"text-[#4D4A4A] font-poppins",children:Oe.profession||"N/A"})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-sm text-[#4D4A4A] font-poppins",children:Oe.role_in_project||"N/A"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-sm text-[#4D4A4A] font-poppins",children:Oe.prc_license||"N/A"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:Oe.date_submitted?new Date(Oe.date_submitted).toLocaleDateString():"N/A"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:`inline-flex items-center px-3 py-1.5 rounded-full ${Le.bgColor} ${Le.color}`,children:[t.jsx(oe,{className:`w-4 h-4 mr-2 ${Le.color}`}),t.jsx("span",{className:`text-sm font-medium ${Le.color} font-poppins`,children:Le.text})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx("button",{onClick:()=>ce(Oe),title:"View Details",className:"p-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#4A90E2]/80 transition-colors",children:t.jsx(ws,{className:"w-5 h-5"})})})})]},ze)})})]})}),s.length===0&&!n&&t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(Pj,{className:"w-12 h-12 text-[#E9E7E7] mx-auto mb-4"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70",children:"No registrations match your filters"}),t.jsx("button",{onClick:()=>{p(""),b("all"),w("all"),u([null,null])},className:"mt-4 text-[#4CAF50] hover:underline font-poppins",children:"Clear all filters"})]}),s.length>K&&t.jsx("div",{className:"p-5 border-t border-[#E9E7E7]",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:["Page ",Y," of ",me]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>Q(Oe=>Math.max(Oe-1,1)),disabled:Y===1,className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-poppins",children:"Previous"}),t.jsx("button",{onClick:()=>Q(Oe=>Math.min(Oe+1,me)),disabled:Y===me,className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-poppins",children:"Next"})]})]})})]})]}),o&&t.jsx("div",{className:"mt-6 p-4 bg-[#E53935] bg-opacity-20 border border-[#E53935] border-opacity-30 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ks,{className:"w-5 h-5 text-[#E53935] mr-3"}),t.jsx("p",{className:"text-[#4D4A4A] font-poppins",children:o}),t.jsx("button",{onClick:()=>l(null),className:"ml-auto text-sm text-[#4CAF50] hover:underline",children:"Dismiss"})]})}),T&&D&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-md p-4 overflow-auto animate-fadeIn",children:t.jsxs("div",{className:"w-full max-w-4xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl transform transition-all",children:[t.jsxs("div",{className:"relative p-6 bg-gradient-to-r from-gray-50 via-white to-gray-50 dark:from-slate-800 dark:via-slate-700 dark:to-slate-800 border-b-4 border-green-400",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-400 to-green-500 p-3 rounded-2xl shadow-xl",children:t.jsx(Pj,{className:"w-10 h-10 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Professional Registration"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Registration Details"})]})]}),t.jsx("button",{onClick:tt,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-all",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-blue-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Registration ID"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white font-mono",children:D.registration_id})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-purple-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Date Submitted"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:D.date_submitted?new Date(D.date_submitted).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-green-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Status"}),t.jsx("span",{className:`inline-block px-3 py-1 text-sm font-bold rounded-full ${le(D.status).bgColor} ${le(D.status).color}`,children:le(D.status).text})]})]})]}),t.jsxs("div",{className:"p-8 space-y-8 max-h-[80vh] overflow-y-auto bg-gradient-to-b from-gray-50 to-white dark:from-slate-900 dark:to-slate-800",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-blue-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:t.jsx(gr,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Personal Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white mt-1",children:[D.last_name,", ",D.first_name," ",D.middle_initial," ",D.suffix]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Birth Date"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:D.birth_date?new Date(D.birth_date).toLocaleDateString():"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Contact Number"}),t.jsxs("p",{className:"text-gray-900 dark:text-white mt-1 flex items-center",children:[t.jsx(r5,{className:"w-4 h-4 mr-2"}),D.contact_number||"N/A"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email Address"}),t.jsxs("p",{className:"text-gray-900 dark:text-white mt-1 flex items-center",children:[t.jsx(cw,{className:"w-4 h-4 mr-2"}),D.email||"N/A"]})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-green-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-3 rounded-xl shadow-lg",children:t.jsx(_h,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Professional Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Profession"}),t.jsx("p",{className:"text-xl font-bold text-[#4CAF50] mt-1",children:D.profession||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Role in Project"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:D.role_in_project||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"PRC License Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-mono",children:D.prc_license||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"PRC License Expiry"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:D.prc_expiry?new Date(D.prc_expiry).toLocaleDateString():"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"PTR Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-mono",children:D.ptr_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"TIN"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1 font-mono",children:D.tin||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-yellow-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 p-3 rounded-xl shadow-lg",children:t.jsx(c0,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Review Comments"}),D.remarks&&t.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",Ae(D.remarks).length," comment",Ae(D.remarks).length!==1?"s":"",")"]})]})]}),t.jsx("div",{className:"space-y-4 mb-6",children:D.remarks&&D.remarks.trim()?t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600 overflow-hidden",children:[t.jsx("div",{className:"max-h-64 overflow-y-auto p-4",children:Ae(D.remarks).map((Oe,ze)=>t.jsxs("div",{className:`mb-4 ${ze!==0?"pt-4 border-t border-gray-200 dark:border-slate-600":""}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Admin Comment"]}),t.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[t.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Oe.timestamp]})]}),t.jsx("div",{className:"pl-6",children:t.jsx("p",{className:"text-gray-900 dark:text-white bg-white dark:bg-slate-800 p-3 rounded border border-gray-100 dark:border-slate-500",children:Oe.comment})})]},ze))}),t.jsx("div",{className:"px-4 py-3 bg-gray-100 dark:bg-slate-800 border-t border-gray-200 dark:border-slate-600",children:t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: ",Ae(D.remarks).length," comment",Ae(D.remarks).length!==1?"s":""]})})]}):t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600",children:[t.jsx("svg",{className:"w-12 h-12 text-gray-300 dark:text-gray-500 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No comments yet. Add your first comment below."})]})}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Add New Comment"}),t.jsx("textarea",{value:ne,onChange:Oe=>V(Oe.target.value),placeholder:"Enter your review notes here...",className:"w-full border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-3 bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent",rows:3}),ne.trim()&&t.jsx("div",{className:"mt-4 flex justify-end",children:t.jsxs("button",{onClick:gt,className:"px-6 py-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#4A90E2]/80 transition-colors font-medium flex items-center shadow-sm hover:shadow",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Comment"]})})]})]}),(()=>{const Oe=$[D.registration_id]||[];return Oe.length>0?t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-blue-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:t.jsx(jr,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Action History"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[Oe.length," action",Oe.length!==1?"s":""," taken this session"]})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-[17px] top-0 bottom-0 w-0.5 bg-blue-200 dark:bg-slate-600"}),t.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:[...Oe].reverse().map((ze,Le)=>t.jsxs("div",{className:"relative pl-10",children:[t.jsx("div",{className:`absolute left-[10px] top-1.5 w-4 h-4 rounded-full border-2 border-white dark:border-slate-800 shadow ${ze.action==="Approved"?"bg-green-500":ze.action==="Rejected"?"bg-red-500":ze.action==="Pending"?"bg-yellow-500":"bg-blue-500"}`}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg p-3 border border-gray-200 dark:border-slate-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:`text-sm font-semibold px-2 py-0.5 rounded-full ${ze.action==="Approved"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":ze.action==="Rejected"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":ze.action==="Pending"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}`,children:ze.action}),t.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:ze.timestamp})]}),ze.notes&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 pl-1",children:ze.notes}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1 pl-1",children:["by ",ze.by]})]})]},Le))})]})]}):null})(),t.jsxs("div",{className:"flex gap-4 justify-between pt-8 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-6 border-t-4 border-gray-300 dark:border-slate-600",children:[D.status?.toUpperCase()!=="REJECTED"&&t.jsxs("div",{className:"relative",ref:te,children:[t.jsxs("button",{onClick:()=>X(!O),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2",children:["Actions",t.jsx("svg",{className:`w-4 h-4 transition-transform ${O?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),O&&t.jsxs("div",{className:"absolute left-0 bottom-full mb-2 w-72 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden z-50 max-h-96 overflow-y-auto",children:[t.jsx("div",{className:"px-3 py-2 bg-gray-100 dark:bg-slate-700 border-b border-gray-200 dark:border-slate-600",children:t.jsx("p",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Processing Steps"})}),t.jsxs("button",{onClick:()=>{X(!1),yt("Under Review","Mark as Under Review","Registration is now being reviewed.","#3B82F6")},className:"w-full px-4 py-3 text-left hover:bg-blue-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(ws,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Under Review"})]}),t.jsxs("button",{onClick:()=>{X(!1),yt("Document Verification","Document Verification","Documents are being verified.","#8B5CF6")},className:"w-full px-4 py-3 text-left hover:bg-purple-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Kt,{className:"w-5 h-5 text-purple-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Document Verification"})]}),t.jsxs("button",{onClick:()=>{X(!1),yt("For Manager Approval","Send for Manager Approval","Registration is being sent to manager.","#6366F1")},className:"w-full px-4 py-3 text-left hover:bg-indigo-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(gr,{className:"w-5 h-5 text-indigo-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"For Manager Approval"})]}),t.jsxs("button",{onClick:()=>{X(!1),yt("Ready for Release","Mark Ready for Release","Registration is ready for release.","#10B981")},className:"w-full px-4 py-3 text-left hover:bg-emerald-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Us,{className:"w-5 h-5 text-emerald-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Ready for Release"})]}),t.jsx("div",{className:"px-3 py-2 bg-gray-100 dark:bg-slate-700 border-b border-gray-200 dark:border-slate-600",children:t.jsx("p",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Actions"})}),t.jsxs("button",{onClick:()=>{X(!1),yt("Pending","Set to Pending","Mark this registration as pending.","#FDA811")},className:"w-full px-4 py-3 text-left hover:bg-yellow-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Ks,{className:"w-5 h-5 text-yellow-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Mark as Pending"})]}),t.jsxs("button",{onClick:()=>{X(!1),Qt()},className:"w-full px-4 py-3 text-left hover:bg-red-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(ls,{className:"w-5 h-5 text-red-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Reject Registration"})]}),t.jsxs("button",{onClick:()=>{X(!1),q()},className:"w-full px-4 py-3 text-left hover:bg-green-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3",children:[t.jsx(Us,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:" Approve Registration"})]})]})]}),t.jsxs("button",{onClick:tt,className:"px-8 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2 ml-auto",children:[t.jsx(ls,{className:"w-5 h-5"}),"Close"]})]})]})]})})]})}Eu.register(Gp,Wp,Hp,Up,Qp,Fu,$p,qp,zp,Vp);const gh=(a,e)=>a?a.startsWith("image/"):e?[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"].some(r=>e.toLowerCase().endsWith(r)):!1,Nj=(a,e)=>{if(a){if(a==="application/pdf")return"PDF Document";if(a.startsWith("image/"))return`${a.split("/")[1].toUpperCase()} Image`;if(a.startsWith("application/")){if(a.includes("word"))return"Word Document";if(a.includes("excel"))return"Excel Spreadsheet";if(a.includes("zip"))return"ZIP Archive";if(a.includes("rar"))return"RAR Archive"}if(a.startsWith("text/"))return a.includes("csv")?"CSV File":"Text File"}if(e)switch(e.split(".").pop().toLowerCase()){case"pdf":return"PDF Document";case"jpg":case"jpeg":return"JPEG Image";case"png":return"PNG Image";case"gif":return"GIF Image";case"bmp":return"BMP Image";case"webp":return"WebP Image";case"doc":case"docx":return"Word Document";case"txt":return"Text File";case"csv":return"CSV File";case"xls":case"xlsx":return"Excel Spreadsheet";case"zip":return"ZIP Archive";case"rar":return"RAR Archive";default:return"File"}return"File"};function $de(){const[a,e]=C.useState([]),[s,r]=C.useState(1),[n,i]=C.useState(null),[o,l]=C.useState(!1),[c,u]=C.useState("all"),[m,A]=C.useState(""),[g,p]=C.useState([null,null]),[v,b]=g,[y,w]=C.useState("all"),[B,j]=C.useState("all"),[E,S]=C.useState("all"),[T,M]=C.useState(!1),[D,P]=C.useState(""),[Y,Q]=C.useState(!0),[L,ae]=C.useState(null),[ne,V]=C.useState({total:0,pending:0,approved:0,rejected:0,under_review:0,mtop:0,franchise:0,new:0,renewal:0}),[O,X]=C.useState(null),[$,H]=C.useState(!1),[te,K]=C.useState(100),[I,R]=C.useState(!1),[G,se]=C.useState(""),[le,ye]=C.useState(!1),[De,me]=C.useState(""),Te=C.useRef(null),we=C.useRef(!1),st=C.useRef({x:0,y:0}),ce=C.useRef({x:0,y:0}),tt=8,Ae="/backend/franchise_permit",gt=Ne=>Ne&&{pending:"For Compliance",under_review:"For Compliance",approved:"Approved",rejected:"Rejected"}[Ne.toLowerCase()]||"For Compliance",q=Ne=>{if(!Ne)return"N/A";try{return new Date(Ne).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},Qt=async()=>{try{Q(!0),ae(null);const Ne=new URLSearchParams({page:s,limit:tt});y!=="all"&&Ne.append("status",y),B!=="all"&&Ne.append("permit_subtype",B.toUpperCase()),E!=="all"&&Ne.append("permit_type",E.toUpperCase()),m.trim()&&Ne.append("search",m.trim());const Je=`${Ae}/admin_fetch.php?${Ne}`,ht=await fetch(Je,{method:"GET",headers:{Accept:"application/json"}});if(!ht.ok)throw new Error(`Server error: ${ht.status}`);const It=await ht.json();if(It.success){const Pe=It.data.map(Ke=>{const nt=`${Ke.first_name||""} ${Ke.middle_initial?Ke.middle_initial+".":""} ${Ke.last_name||""}`.trim();return{id:`FP-${String(Ke.application_id).padStart(4,"0")}`,application_id:Ke.application_id,type:Ke.permit_type==="RENEWAL"?"Renewal":"New",permit_type:Ke.permit_type||"NEW",permit_subtype:Ke.permit_subtype||"FRANCHISE",application_date:Ke.created_at,created_at:Ke.created_at,full_name:nt||"N/A",contact_number:Ke.contact_number||"N/A",email:Ke.email||"N/A",home_address:Ke.home_address||"N/A",make_brand:Ke.make_brand||"N/A",model:Ke.model||"N/A",route_zone:Ke.route_zone||"N/A",toda_name:Ke.toda_name||"N/A",barangay_of_operation:Ke.barangay_of_operation||"N/A",status:gt(Ke.status),plate_number:Ke.plate_number||"N/A",year_acquired:Ke.year_acquired||"N/A",color:Ke.color||"N/A",vehicle_type:Ke.vehicle_type||"Tricycle",lto_or_number:Ke.lto_or_number||"N/A",lto_cr_number:Ke.lto_cr_number||"N/A",engine_number:Ke.engine_number||"N/A",chassis_number:Ke.chassis_number||"N/A",district:Ke.district||"N/A",remarks:Ke.remarks||"",operator_type:Ke.operator_type||"N/A",citizenship:Ke.citizenship||"N/A",birth_date:Ke.birth_date||"N/A",id_type:Ke.id_type||"N/A",id_number:Ke.id_number||"N/A",lto_expiration_date:Ke.lto_expiration_date||"N/A",mv_file_number:Ke.mv_file_number||"N/A",franchise_fee_or:Ke.franchise_fee_or||"N/A",sticker_id_fee_or:Ke.sticker_id_fee_or||"N/A",inspection_fee_or:Ke.inspection_fee_or||"N/A",date_submitted:Ke.date_submitted||Ke.created_at,attachments:Ke.attachments||""}});e(Pe),It.stats&&It.stats.overall&&V({total:It.stats.overall.total||0,pending:It.stats.overall.pending||0,approved:It.stats.overall.approved||0,rejected:It.stats.overall.rejected||0,under_review:It.stats.overall.under_review||0,mtop:It.stats.overall.mtop||0,franchise:It.stats.overall.franchise||0,new:It.stats.overall.new||0,renewal:It.stats.overall.renewal||0}),ae(null)}else throw new Error(It.message||"Failed to fetch data from server")}catch(Ne){console.error("Error fetching data:",Ne),ae(`Failed to load data: ${Ne.message}`),e([])}finally{Q(!1)}};C.useEffect(()=>{Qt()},[s,y,B,E]);const yt=C.useMemo(()=>{let Ne=[...a];if(m){const Je=m.toLowerCase();Ne=Ne.filter(ht=>ht.full_name?.toLowerCase().includes(Je)||ht.plate_number?.toLowerCase().includes(Je)||ht.toda_name?.toLowerCase().includes(Je)||ht.barangay_of_operation?.toLowerCase().includes(Je)||ht.application_id?.toString().includes(Je)||ht.email?.toLowerCase().includes(Je))}return c!=="all"&&(Ne=Ne.filter(Je=>Je.permit_subtype?.toLowerCase()===c.toLowerCase())),v&&b&&(Ne=Ne.filter(Je=>{if(!Je.created_at)return!1;const ht=new Date(Je.created_at);return ht>=v&&ht<=b})),Ne},[a,c,m,v,b]),Oe=Math.ceil(yt.length/tt),ze=(s-1)*tt,Le=ze+tt,oe=yt.slice(ze,Le),he=C.useMemo(()=>{const Ne=ne.total,Je=ne.approved,ht=ne.pending+ne.under_review,It=ne.rejected,Pe=Ne>0?(Je/Ne*100).toFixed(1):0,Ke=Ne>0?((Je+It)/Ne*100).toFixed(1):0,nt={};a.forEach(de=>{const ie=de.toda_name||"Unknown";ie!=="N/A"&&ie&&(nt[ie]=(nt[ie]||0)+1)});const zt=Object.entries(nt).sort(([,de],[,ie])=>ie-de)[0]||["No TODA data",0],is=Math.floor(Ne*.8),ke=Ne>0?((Ne-is)/is*100).toFixed(1):0;return{total:Ne,approved:Je,pending:ht,rejected:It,approvalRate:Pe,completionRate:Ke,trend:ke,topTODA:{name:zt[0],count:zt[1]}}},[ne,a]),W=C.useMemo(()=>{const Je=[...new Set(a.map(ht=>ht.toda_name).filter(ht=>ht&&ht!=="N/A"))].slice(0,6);return{labels:Je.length>0?Je:["No TODA Data"],datasets:[{label:"Applications",data:Je.length>0?Je.map(ht=>a.filter(It=>It.toda_name===ht).length):[0],backgroundColor:"#4CAF50",hoverBackgroundColor:"#45a049",borderRadius:8,borderWidth:0}]}},[a]),ve=C.useMemo(()=>({labels:["Approved","For Compliance","Rejected"],datasets:[{data:[ne.approved||0,ne.pending+ne.under_review||0,ne.rejected||0],backgroundColor:["#4CAF50","#FDA811","#E53935"],hoverBackgroundColor:["#45a049","#fc9d0b","#d32f2f"],borderColor:"#ffffff",borderWidth:3,hoverBorderWidth:4}]}),[ne]),Qe=C.useMemo(()=>{const Ne=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Je=new Date().getMonth(),ht=new Date().getFullYear(),It=Ne.slice(Math.max(0,Je-5),Je+1),Pe=["MTOP","FRANCHISE"],Ke={};Pe.forEach(zt=>{Ke[zt]=Array(It.length).fill(0)}),a.forEach(zt=>{if(!zt.created_at)return;const is=new Date(zt.created_at),ke=is.getMonth();if(is.getFullYear()===ht&&ke<=Je&&ke>=Je-5){const ie=ke-(Je-5);if(ie>=0){const Ue=zt.permit_subtype||"";Ke[Ue]&&Ke[Ue][ie]++}}});const nt=["#4CAF50","#4A90E2"];return{labels:It,datasets:Pe.map((zt,is)=>({label:zt,data:Ke[zt]||Array(It.length).fill(0),borderColor:nt[is],backgroundColor:is===0?"rgba(76, 175, 80, 0.15)":"rgba(74, 144, 226, 0.15)",fill:!0,tension:.4,borderWidth:3,pointBackgroundColor:nt[is],pointBorderColor:"#ffffff",pointBorderWidth:3,pointRadius:6,pointHoverRadius:8,pointHoverBackgroundColor:is===0?"#45a049":"#3d7bc7"}))}},[a]),Ze=C.useMemo(()=>{const Ne=a.filter(ht=>ht.permit_type?.toLowerCase()==="new").length,Je=a.filter(ht=>ht.permit_type?.toLowerCase()==="renewal").length;return{labels:["New Applications","Renewals"],datasets:[{data:[Ne,Je],backgroundColor:["#4CAF50","#4A90E2"],hoverBackgroundColor:["#45a049","#3d7bc7"],borderColor:"#ffffff",borderWidth:3}]}},[a]),J=C.useMemo(()=>{const Ne={};a.forEach(ht=>{const It=ht.barangay_of_operation||"Unknown";It!=="N/A"&&(Ne[It]=(Ne[It]||0)+1)});const Je=Object.entries(Ne).sort(([,ht],[,It])=>It-ht).slice(0,6);return{labels:Je.length>0?Je.map(([ht])=>ht):["No Data"],datasets:[{label:"Applications",data:Je.length>0?Je.map(([,ht])=>ht):[0],backgroundColor:"#FDA811",hoverBackgroundColor:"#fc9d0b",borderRadius:8,borderWidth:0}]}},[a]),He=C.useMemo(()=>{const Ne={};return a.forEach(Je=>{const ht=Je.operator_type||"Unknown";Ne[ht]=(Ne[ht]||0)+1}),Ne},[a]),xt=C.useMemo(()=>{const Ne=[],Je=new Date;for(let ht=7;ht>=0;ht--){const It=new Date(Je);It.setDate(Je.getDate()-ht*7),It.setHours(0,0,0,0);const Pe=new Date(It);Pe.setDate(It.getDate()+6),Pe.setHours(23,59,59,999);const Ke=`Week ${8-ht}`,nt=a.filter(zt=>{const is=new Date(zt.created_at);return is>=It&&is<=Pe}).length;Ne.push({label:Ke,count:nt,weekStart:It,weekEnd:Pe})}return{labels:Ne.map(ht=>ht.label),datasets:[{label:"Total Applications",data:Ne.map(ht=>ht.count),borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.1)",fill:!0,tension:.4,borderWidth:3,pointBackgroundColor:"#4CAF50",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:5,pointHoverRadius:7}],rawData:Ne}},[a]),Xe=C.useMemo(()=>{const Ne=[],Je=new Date,ht=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let It=11;It>=0;It--){const Pe=new Date(Je.getFullYear(),Je.getMonth()-It,1),Ke=new Date(Pe.getFullYear(),Pe.getMonth(),1),nt=new Date(Pe.getFullYear(),Pe.getMonth()+1,0,23,59,59,999),zt=`${ht[Pe.getMonth()]} ${Pe.getFullYear().toString().slice(-2)}`,is=a.filter(ke=>{const de=new Date(ke.created_at);return de>=Ke&&de<=nt}).length;Ne.push({label:zt,count:is,monthStart:Ke,monthEnd:nt})}return{labels:Ne.map(It=>It.label),datasets:[{label:"Total Applications",data:Ne.map(It=>It.count),borderColor:"#4A90E2",backgroundColor:"rgba(74, 144, 226, 0.1)",fill:!0,tension:.4,borderWidth:3,pointBackgroundColor:"#4A90E2",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:5,pointHoverRadius:7}],rawData:Ne}},[a]),Ct=C.useMemo(()=>{const Ne=new Date().getFullYear(),Je={"0-5 years":0,"6-10 years":0,"11-15 years":0,"16+ years":0,Unknown:0};return a.forEach(ht=>{if(ht.year_acquired){const It=Ne-ht.year_acquired;It<=5?Je["0-5 years"]++:It<=10?Je["6-10 years"]++:It<=15?Je["11-15 years"]++:Je["16+ years"]++}else Je.Unknown++}),Je},[a]),_e=Ne=>{switch(Ne){case"Approved":return{text:"text-[#4CAF50]",icon:Us,badge:"text-[#4CAF50] bg-[#4CAF50]/10"};case"Rejected":return{text:"text-[#E53935]",icon:Ka,badge:"text-[#E53935] bg-[#E53935]/10"};case"For Compliance":return{text:"text-[#FDA811]",icon:Ks,badge:"text-[#FDA811] bg-[#FDA811]/10"};default:return{text:"text-[#4D4A4A]",icon:Ks,badge:"text-gray-600 bg-gray-100"}}},Se=Ne=>{switch(Ne){case"MTOP":return{bg:"bg-purple-100",text:"text-purple-800"};case"FRANCHISE":return{bg:"bg-orange-100",text:"text-orange-800"};default:return{bg:"bg-gray-100",text:"text-gray-800"}}},Ve=Ne=>{switch(Ne){case"NEW":return{bg:"bg-blue-100",text:"text-blue-800"};case"RENEWAL":return{bg:"bg-green-100",text:"text-green-800"};default:return{bg:"bg-gray-100",text:"text-gray-800"}}},et=[{key:"all",label:"All Applications"},{key:"mtop",label:"MTOP Applications"},{key:"franchise",label:"Franchise Applications"}],vt={all:a.length,mtop:a.filter(Ne=>Ne.permit_subtype==="MTOP").length,franchise:a.filter(Ne=>Ne.permit_subtype==="FRANCHISE").length},Mt=Ne=>{if(!Ne)return[];try{const Je=[],ht=Ne.application_id||Ne.id?.replace("FP-","");return["proof_of_residency","barangay_clearance","lto_or_cr","insurance_certificate","drivers_license","emission_test","id_picture","official_receipt","nbi_clearance","police_clearance","medical_certificate","toda_endorsement","toda_president_cert","franchise_fee_receipt","sticker_id_fee_receipt","inspection_fee_receipt","applicant_signature"].forEach(Pe=>{const Ke=Ne[Pe];if(Ke&&Ke.trim()!==""){const nt=`${Ae}/uploads/${ht}/${Ke}`;Je.push({id:Pe,name:Ke,type:Ye(Ke),url:nt,field_name:Pe.replace(/_/g," ").replace(/\b\w/g,zt=>zt.toUpperCase())})}}),Je}catch(Je){return console.error("Error parsing attachments:",Je),[]}},Ye=Ne=>{if(!Ne||typeof Ne!="string")return"application/octet-stream";switch(Ne.split(".").pop().toLowerCase()){case"pdf":return"application/pdf";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"webp":return"image/webp";case"doc":case"docx":return"application/msword";case"txt":return"text/plain";case"csv":return"text/csv";case"xls":case"xlsx":return"application/vnd.ms-excel";case"zip":return"application/zip";case"rar":return"application/x-rar-compressed";default:return"application/octet-stream"}},Et=Ne=>{if(!Ne||typeof Ne!="string")return[];try{const Je=Ne.trim();if(!Je)return[];const ht=Je.split(/(?=---\s+.+?\s+---)/g),It=[];for(let Pe of ht){if(Pe=Pe.trim(),!Pe)continue;const Ke=Pe.match(/^---\s+(.+?)\s+---\n([\s\S]*)$/);if(Ke){const nt=Ke[1].trim(),zt=Ke[2].trim();zt&&It.push({timestamp:nt,comment:zt})}else It.push({timestamp:"Just now",comment:Pe})}return It}catch(Je){return console.error("Error formatting comments:",Je),[{timestamp:"Recent",comment:Ne}]}},Gt=async Ne=>{try{const Je=a.find(ht=>ht.id===Ne);if(Je){const ht=await fetch(`${Ae}/fetch_single.php?application_id=${Je.application_id}`);if(ht.ok){const It=await ht.json();if(It.success&&It.data){const Pe=Mt(It.data);i({...Je,...It.data,email_address:It.data.email||Je.email,address:It.data.home_address||Je.home_address||"N/A",year_model:It.data.year_acquired||Je.year_acquired,vehicle_color:It.data.color||Je.color,or_number:It.data.lto_or_number||Je.lto_or_number,cr_number:It.data.lto_cr_number||Je.lto_cr_number,driver_license:It.data.id_number||Je.id_number||"N/A",franchise_number:Ne,date_applied:q(It.data.date_submitted||Je.created_at),attachments:Pe,status:gt(It.data.status),remarks:It.data.remarks||Je.remarks})}else{const Pe=Mt(Je);i({...Je,email_address:Je.email,address:Je.home_address||"N/A",year_model:Je.year_acquired,vehicle_color:Je.color,or_number:Je.lto_or_number,cr_number:Je.lto_cr_number,driver_license:Je.id_number||"N/A",franchise_number:Ne,date_applied:q(Je.created_at),attachments:Pe,remarks:Je.remarks||""})}}else{const It=Mt(Je);i({...Je,email_address:Je.email,address:Je.home_address||"N/A",year_model:Je.year_acquired,vehicle_color:Je.color,or_number:Je.lto_or_number,cr_number:Je.lto_cr_number,driver_license:Je.id_number||"N/A",franchise_number:Ne,date_applied:q(Je.created_at),attachments:It,remarks:Je.remarks||""})}l(!0)}}catch(Je){console.error("Error viewing franchise:",Je);const ht=a.find(It=>It.id===Ne);if(ht){const It=Mt(ht);i({...ht,email_address:ht.email,address:ht.home_address||"N/A",year_model:ht.year_acquired,vehicle_color:ht.color,or_number:ht.lto_or_number,cr_number:ht.lto_cr_number,driver_license:ht.id_number||"N/A",franchise_number:Ne,date_applied:q(ht.created_at),attachments:It,remarks:ht.remarks||""}),l(!0)}}},ee=()=>{l(!1),i(null),se(""),X(null),H(!1),R(!1)},Ie=()=>{M(!0),P("csv");const Ne=["Application ID","Applicant Name","Permit Type","Permit Subtype","Operator Type","TODA","Barangay","District","Route/Zone","Vehicle Make","Vehicle Model","Plate Number","Year Acquired","Vehicle Age","Engine Number","Chassis Number","Status","Contact","Email","Home Address","Application Date"],Je=new Date().getFullYear(),ht=[Ne.join(","),...a.map(nt=>{const zt=nt.year_acquired?Je-nt.year_acquired:"N/A";return[nt.id,nt.full_name,nt.permit_type,nt.permit_subtype,nt.operator_type,nt.toda_name,nt.barangay_of_operation,nt.district,nt.route_zone,nt.make_brand,nt.model,nt.plate_number,nt.year_acquired,zt,nt.engine_number,nt.chassis_number,nt.status,nt.contact_number,nt.email,nt.home_address,q(nt.created_at)].map(is=>`"${is||""}"`).join(",")})].join(`
`),It=new Blob([ht],{type:"text/csv"}),Pe=window.URL.createObjectURL(It),Ke=document.createElement("a");Ke.href=Pe,Ke.download=`franchise-permits-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Ke),Ke.click(),document.body.removeChild(Ke),window.URL.revokeObjectURL(Pe),M(!1),P("")},ue=async()=>{M(!0),P("pdf");try{dt.fire({title:"Generating PDF...",text:"Please wait while we create your report",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{dt.showLoading()}}),await new Promise(de=>setTimeout(de,500));const Ne=document.createElement("div");Ne.style.cssText="position: absolute; left: -9999px; width: 1200px; background: #FBFBFB; padding: 30px; font-family: Arial, sans-serif;",Ne.innerHTML=`
        <div style="margin-bottom: 30px;">
          <h1 style="color: #4D4A4A; font-size: 28px; margin: 0 0 10px 0;">Franchise Permit Analytics</h1>
          <p style="color: #666; margin: 0;">Generated on ${new Date().toLocaleDateString()}</p>
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 30px;">
          ${[{title:"Total Applications",value:he.total,color:"#4CAF50"},{title:"Approved",value:he.approved,color:"#4CAF50"},{title:"Pending",value:he.pending,color:"#FDA811"},{title:"Rejected",value:he.rejected,color:"#E53935"}].map(de=>`
            <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 20px; background: white;">
              <p style="color: #666; font-size: 12px; margin: 0 0 10px 0;">${de.title}</p>
              <p style="color: ${de.color}; font-size: 32px; font-weight: bold; margin: 0;">${de.value}</p>
            </div>
          `).join("")}
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Applications by Status</h2>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
            ${[{label:"Approved",value:ne.approved||0,color:"#4CAF50"},{label:"For Compliance",value:ne.pending+ne.under_review||0,color:"#FDA811"},{label:"Rejected",value:ne.rejected||0,color:"#E53935"}].map(de=>`
              <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 15px; background: white; border-left: 5px solid ${de.color};">
                <p style="color: #4D4A4A; font-size: 14px; margin: 0 0 8px 0;">${de.label}</p>
                <p style="color: #4D4A4A; font-size: 24px; font-weight: bold; margin: 0;">${de.value}</p>
              </div>
            `).join("")}
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Application Type Breakdown</h2>
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
            ${[{label:"New Applications",value:Ze.datasets[0].data[0],color:"#4CAF50"},{label:"Renewals",value:Ze.datasets[0].data[1],color:"#4A90E2"}].map(de=>`
              <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 15px; background: white; border-left: 5px solid ${de.color};">
                <p style="color: #4D4A4A; font-size: 14px; margin: 0 0 8px 0;">${de.label}</p>
                <p style="color: #4D4A4A; font-size: 24px; font-weight: bold; margin: 0;">${de.value}</p>
                <p style="color: #666; font-size: 12px; margin: 5px 0 0 0;">${(de.value/yt.length*100).toFixed(1)}% of total</p>
              </div>
            `).join("")}
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Operator Type Distribution</h2>
          <div style="display: grid; grid-template-columns: 1fr; gap: 10px;">
            ${Object.entries(He).map(([de,ie],Ue)=>{const bt=(ie/yt.length*100).toFixed(1),ot=["#4CAF50","#4A90E2","#FDA811","#9C27B0","#E53935"],Dt=ot[Ue%ot.length];return`
                <div style="border: 1px solid #E9E7E7; border-radius: 6px; padding: 12px; background: white;">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="color: #4D4A4A; font-size: 13px; font-weight: 500;">${de}</span>
                    <span style="color: #4D4A4A; font-size: 13px; font-weight: bold;">${ie} (${bt}%)</span>
                  </div>
                  <div style="width: 100%; background: #E9E7E7; border-radius: 10px; height: 8px;">
                    <div style="width: ${bt}%; background: ${Dt}; border-radius: 10px; height: 8px;"></div>
                  </div>
                </div>
              `}).join("")}
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Top Barangays of Operation</h2>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            ${J.labels.slice(0,6).map((de,ie)=>{const Ue=J.datasets[0].data[ie],bt=(Ue/yt.length*100).toFixed(1);return`
                <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 12px; background: white; border-left: 5px solid #FDA811;">
                  <p style="color: #4D4A4A; font-size: 12px; margin: 0 0 5px 0; font-weight: 500;">${de}</p>
                  <p style="color: #4D4A4A; font-size: 20px; font-weight: bold; margin: 0;">${Ue}</p>
                  <p style="color: #666; font-size: 11px; margin: 3px 0 0 0;">${bt}% of total</p>
                </div>
              `}).join("")}
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Weekly Applications Trend (Last 8 Weeks)</h2>
          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
            ${xt.rawData.map((de,ie)=>`
                <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 12px; background: white; text-align: center; border-left: 5px solid #4CAF50;">
                  <p style="color: #666; font-size: 11px; margin: 0 0 5px 0;">${de.label}</p>
                  <p style="color: #4CAF50; font-size: 24px; font-weight: bold; margin: 0;">${de.count}</p>
                  <p style="color: #666; font-size: 10px; margin: 3px 0 0 0;">${new Date(de.weekStart).toLocaleDateString()} - ${new Date(de.weekEnd).toLocaleDateString()}</p>
                </div>
              `).join("")}
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Monthly Applications Trend (Last 12 Months)</h2>
          <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 8px;">
            ${Xe.rawData.map((de,ie)=>`
                <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 10px; background: white; text-align: center; border-left: 5px solid #4A90E2;">
                  <p style="color: #666; font-size: 10px; margin: 0 0 5px 0;">${de.label}</p>
                  <p style="color: #4A90E2; font-size: 20px; font-weight: bold; margin: 0;">${de.count}</p>
                </div>
              `).join("")}
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Vehicle Age Distribution</h2>
          <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px;">
            ${Object.entries(Ct).map(([de,ie],Ue)=>{const ot=["#4CAF50","#4A90E2","#FDA811","#9C27B0","#757575"][Ue],Dt=yt.length>0?(ie/yt.length*100).toFixed(1):0;return`
                <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 12px; background: white; border-left: 5px solid ${ot};">
                  <p style="color: #666; font-size: 11px; margin: 0 0 5px 0;">${de}</p>
                  <p style="color: #4D4A4A; font-size: 22px; font-weight: bold; margin: 0 0 3px 0;">${ie}</p>
                  <p style="color: #666; font-size: 11px; margin: 0;">${Dt}%</p>
                </div>
              `}).join("")}
          </div>
        </div>
      `,document.body.appendChild(Ne),await new Promise(de=>setTimeout(de,100));const Je=await Tu(Ne,{scale:2,backgroundColor:"#FBFBFB",logging:!1});document.body.removeChild(Ne);const ht=Je.toDataURL("image/png"),It=new Es({orientation:"portrait",unit:"mm",format:"a4"}),Pe=It.internal.pageSize.getWidth(),Ke=It.internal.pageSize.getHeight(),nt=Pe-20,zt=Je.height*nt/Je.width;let is=zt,ke=10;for(It.addImage(ht,"PNG",10,ke,nt,zt),is-=Ke;is>0;)ke=is-zt+10,It.addPage(),It.addImage(ht,"PNG",10,ke,nt,zt),is-=Ke;It.save(`franchise-analytics-${new Date().toISOString().split("T")[0]}.pdf`),dt.fire({icon:"success",title:"PDF Downloaded!",text:"Your report has been downloaded successfully.",timer:2e3,showConfirmButton:!1})}catch(Ne){console.error("Error generating PDF:",Ne),dt.fire({title:"Export Failed",text:Ne.message||"Failed to generate PDF. Please try again.",icon:"error"})}finally{M(!1),P("")}},fe=Ne=>{A(Ne.target.value),r(1)},xe=()=>{A(""),w("all"),j("all"),S("all"),p([null,null]),r(1)},Me=C.useCallback(()=>{if(Te.current){const Ne=Te.current.style.transform||"scale(1)",Je=parseFloat(Ne.match(/scale\(([^)]+)\)/)?.[1]||1);K(Math.round(Je*100))}},[]);C.useEffect(()=>{const Ne=Je=>{Je.key==="Escape"&&$&&mt()};return window.addEventListener("keydown",Ne),()=>{window.removeEventListener("keydown",Ne)}},[$]),C.useEffect(()=>{O&&Te.current&&(Te.current.style.transform="scale(1)",Te.current.style.left="0px",Te.current.style.top="0px",Te.current.style.cursor="default",K(100),ce.current={x:0,y:0})},[O]);const ct=C.useCallback(Ne=>{if(!(!Te.current||!gh(O?.file_type,O?.name))&&(Ne.preventDefault(),Ne.stopPropagation(),Ne.deltaY!==0)){const Je=Te.current.style.transform||"scale(1)",ht=parseFloat(Je.match(/scale\(([^)]+)\)/)?.[1]||1),It=Ne.deltaY>0?-.1:.1,Pe=Math.max(.5,Math.min(ht+It,5));Te.current.style.transform=`scale(${Pe})`,Te.current.style.cursor=Pe>1?"grab":"default",Me()}},[O,Me]),Pt=C.useCallback(Ne=>{if(!Te.current||!gh(O?.file_type,O?.name))return;const Je=Te.current.style.transform||"scale(1)";if(parseFloat(Je.match(/scale\(([^)]+)\)/)?.[1]||1)>1){Ne.preventDefault(),we.current=!0,st.current={x:Ne.clientX,y:Ne.clientY},Te.current.style.cursor="grabbing";const It=Ke=>{if(!we.current||!Te.current)return;const nt=Ke.clientX-st.current.x,zt=Ke.clientY-st.current.y,is=ce.current.x+nt,ke=ce.current.y+zt;Te.current.style.left=`${is}px`,Te.current.style.top=`${ke}px`},Pe=()=>{Te.current&&(we.current=!1,Te.current.style.cursor="grab",Te.current.style.left&&Te.current.style.top&&(ce.current.x=parseFloat(Te.current.style.left),ce.current.y=parseFloat(Te.current.style.top)),document.removeEventListener("mousemove",It),document.removeEventListener("mouseup",Pe))};document.addEventListener("mousemove",It),document.addEventListener("mouseup",Pe)}},[O]),ts=C.useCallback(()=>{if(!Te.current)return;const Ne=Te.current.style.transform||"scale(1)",Je=parseFloat(Ne.match(/scale\(([^)]+)\)/)?.[1]||1),ht=Math.min(Je+.25,5);Te.current.style.transform=`scale(${ht})`,Te.current.style.cursor=ht>1?"grab":"default",Me()},[Me]),as=C.useCallback(()=>{if(!Te.current)return;const Ne=Te.current.style.transform||"scale(1)",Je=parseFloat(Ne.match(/scale\(([^)]+)\)/)?.[1]||1),ht=Math.max(Je-.25,.5);Te.current.style.transform=`scale(${ht})`,Te.current.style.cursor=ht>1?"grab":"default",Me()},[Me]),Zt=C.useCallback(()=>{Te.current&&(Te.current.style.transform="scale(1)",Te.current.style.left="0px",Te.current.style.top="0px",Te.current.style.cursor="default",K(100),ce.current={x:0,y:0})},[]),Be=Ne=>{console.log("Viewing file:",Ne);let Je=Ne.url;Ne.url&&!Ne.url.startsWith("http")&&(Je=`${Ae}/${Ne.url}`);const ht={...Ne,file_type:Ne.type||Ye(Ne.name),url:Je};X(ht),H(!0)},mt=()=>{X(null),H(!1),K(100),we.current=!1,st.current={x:0,y:0},ce.current={x:0,y:0}},Nt=()=>{R(!I)};return Y?t.jsx("div",{className:"min-h-screen bg-[#FBFBFB] p-6 flex items-center justify-center font-poppins",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4CAF50] mx-auto"}),t.jsx("p",{className:"mt-4 text-[#4D4A4A]",children:"Loading franchise analytics..."})]})}):t.jsxs("div",{className:"min-h-screen bg-[#FBFBFB] p-4 md:p-6 font-poppins",id:"franchise-dashboard-content",children:[L&&t.jsx("div",{className:"mb-6 p-4 bg-[#E53935] bg-opacity-20 border border-[#E53935] border-opacity-30 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ks,{className:"w-5 h-5 text-[#E53935] mr-3"}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-[#4D4A4A] font-poppins",children:L})}),t.jsx("button",{onClick:Qt,className:"text-sm text-[#4CAF50] hover:underline",children:"Retry Connection"})]})}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-[#4D4A4A] font-montserrat",children:"Franchise Permit Analytics"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 mt-2",children:"Track and analyze tricycle franchise applications and renewals"}),a.length>0&&t.jsxs("p",{className:"text-sm text-[#4CAF50] mt-1",children:[a.length," applications loaded"]})]}),t.jsxs("div",{className:"flex items-center space-x-3 mt-4 md:mt-0",children:[t.jsx("button",{onClick:Qt,className:"p-2 rounded-lg bg-white border border-[#E9E7E7] hover:bg-gray-50 transition-colors",title:"Refresh Data",children:t.jsx(Ya,{className:"w-5 h-5 text-[#4D4A4A]"})}),t.jsxs("button",{onClick:Ie,disabled:T||a.length===0,className:"px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-opacity-90 transition-colors flex items-center space-x-2 disabled:opacity-50 font-montserrat",children:[t.jsx(Kf,{className:"w-5 h-5"}),t.jsx("span",{children:T&&D==="csv"?"Exporting CSV...":"Export CSV"})]}),t.jsxs("button",{onClick:ue,disabled:T||a.length===0,className:"px-4 py-2 bg-[#E53935] text-white rounded-lg hover:bg-opacity-90 transition-colors flex items-center space-x-2 disabled:opacity-50 font-montserrat",children:[t.jsx(mp,{className:"w-5 h-5"}),t.jsx("span",{children:T&&D==="pdf"?"Generating PDF...":"Export PDF"})]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[{title:"Total Applications",value:he.total,icon:Kt,color:"#4CAF50",trend:`${he.trend}%`,trendUp:he.trend>0,description:`MTOP: ${ne.mtop}  Franchise: ${ne.franchise}`},{title:"Approval Rate",value:`${he.approvalRate}%`,icon:dl,color:"#4A90E2",trend:he.approvalRate>0?"+5.2%":"0%",trendUp:he.approvalRate>0,description:`${he.approved} approved`},{title:"Top TODA",value:he.topTODA.name,icon:Ur,color:"#FDA811",trend:`${he.topTODA.count} applications`,trendUp:he.topTODA.count>0,description:"Most applications"},{title:"For Compliance",value:he.pending,icon:Ks,color:"#9C27B0",trend:`${he.pending} pending`,trendUp:he.pending>0,description:"Requires action"}].map((Ne,Je)=>t.jsx("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] transition-all hover:shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:Ne.title}),t.jsx("p",{className:"text-2xl font-bold text-[#4D4A4A] mt-2 font-montserrat",children:Ne.value}),t.jsxs("div",{className:"mt-2",children:[t.jsxs("div",{className:"flex items-center",children:[Ne.trendUp?t.jsx(dl,{className:"w-4 h-4 text-[#4CAF50] mr-1"}):t.jsx(d0,{className:"w-4 h-4 text-[#E53935] mr-1"}),t.jsx("span",{className:`text-sm ${Ne.trendUp?"text-[#4CAF50]":"text-[#E53935]"}`,children:Ne.trend})]}),t.jsx("span",{className:"text-xs text-[#4D4A4A] text-opacity-60",children:Ne.description})]})]}),t.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:Ne.color},children:t.jsx(Ne.icon,{className:"w-6 h-6 text-white"})})]})},Je))})]}),t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-[#E9E7E7]",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#4D4A4A] text-opacity-50 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search by name, plate number, TODA, barangay, email...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",value:m,onChange:fe})]})}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx(B0,{selectsRange:!0,startDate:v,endDate:b,onChange:Ne=>{p(Ne),r(1)},className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins w-full md:w-auto",placeholderText:"Select date range"}),t.jsx(bn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-[#4D4A4A] text-opacity-50 w-5 h-5 pointer-events-none"})]}),t.jsxs("select",{value:y,onChange:Ne=>{w(Ne.target.value),r(1)},className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"pending",children:"For Compliance"}),t.jsx("option",{value:"approved",children:"Approved"}),t.jsx("option",{value:"rejected",children:"Rejected"})]}),t.jsxs("select",{value:E,onChange:Ne=>{S(Ne.target.value),r(1)},className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Permit Types"}),t.jsx("option",{value:"new",children:"New"}),t.jsx("option",{value:"renewal",children:"Renewal"})]}),t.jsxs("select",{value:B,onChange:Ne=>{j(Ne.target.value),r(1)},className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Subtypes"}),t.jsx("option",{value:"mtop",children:"MTOP"}),t.jsx("option",{value:"franchise",children:"Franchise"})]}),(m||y!=="all"||E!=="all"||B!=="all"||v||b)&&t.jsx("button",{onClick:xe,className:"px-4 py-2 text-sm text-[#4D4A4A] hover:text-[#4CAF50] hover:bg-[#FBFBFB] rounded-lg transition-colors font-poppins",children:"Clear Filters"})]})]})})}),a.length>0&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Monthly Trends by Permit Type"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Applications for MTOP vs Franchise"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:Qe.datasets.map((Ne,Je)=>t.jsxs("span",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Ne.borderColor}}),t.jsx("span",{className:"text-sm text-[#4D4A4A] ml-2",children:Ne.label})]},Je))})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(Wi,{data:Qe,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1}},scales:{x:{grid:{color:"rgba(233, 231, 231, 0.5)"},ticks:{color:"#4D4A4A",font:{family:"Poppins"}}},y:{grid:{color:"rgba(233, 231, 231, 0.5)"},ticks:{color:"#4D4A4A",font:{family:"Poppins"}}}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Status Distribution"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Current application status"})]}),t.jsx("div",{className:"h-[250px] flex items-center justify-center",children:t.jsx(Cu,{data:ve,options:{maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"bottom",labels:{color:"#4D4A4A",padding:20,usePointStyle:!0,font:{family:"Poppins"}}}}}})}),t.jsx("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[{label:"Approved",value:ne.approved||0},{label:"For Compliance",value:ne.pending+ne.under_review||0},{label:"Rejected",value:ne.rejected||0}].map((Ne,Je)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#FBFBFB] rounded-lg border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${Ne.label==="Approved"?"bg-[#4CAF50]":Ne.label==="For Compliance"?"bg-[#FDA811]":"bg-[#E53935]"} mr-3`}),t.jsx("span",{className:"text-sm text-[#4D4A4A] font-poppins",children:Ne.label})]}),t.jsx("span",{className:"font-semibold text-[#4D4A4A] font-montserrat",children:Ne.value})]},Je))})]})]}),a.length>0&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Application Type Breakdown"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"New vs Renewal applications"})]}),t.jsx("div",{className:"h-[250px] flex items-center justify-center",children:t.jsx(Cu,{data:Ze,options:{maintainAspectRatio:!1,cutout:"65%",plugins:{legend:{position:"bottom",labels:{color:"#4D4A4A",padding:15,usePointStyle:!0,font:{family:"Poppins"}}}}}})}),t.jsx("div",{className:"mt-4 grid grid-cols-2 gap-3",children:Ze.labels.map((Ne,Je)=>t.jsxs("div",{className:"p-3 bg-[#FBFBFB] rounded-lg border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center mb-1",children:[t.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:Ze.datasets[0].backgroundColor[Je]}}),t.jsx("span",{className:"text-xs text-[#4D4A4A] font-poppins",children:Ne})]}),t.jsx("p",{className:"text-lg font-bold text-[#4D4A4A] font-montserrat",children:Ze.datasets[0].data[Je]}),t.jsxs("p",{className:"text-xs text-[#4D4A4A] text-opacity-70",children:[(Ze.datasets[0].data[Je]/a.length*100).toFixed(1),"% of total"]})]},Je))})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Operator Type Distribution"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Breakdown by operator classification"})]}),t.jsx("div",{className:"space-y-3",children:Object.entries(He).map(([Ne,Je],ht)=>{const It=(Je/a.length*100).toFixed(1),Pe=["#4CAF50","#4A90E2","#FDA811","#9C27B0","#E53935"],Ke=Pe[ht%Pe.length];return t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-[#4D4A4A] font-poppins",children:Ne}),t.jsx("span",{className:"text-sm font-bold text-[#4D4A4A] font-montserrat",children:Je})]}),t.jsx("div",{className:"w-full bg-[#E9E7E7] rounded-full h-2.5",children:t.jsx("div",{className:"h-2.5 rounded-full transition-all",style:{width:`${It}%`,backgroundColor:Ke}})}),t.jsxs("span",{className:"text-xs text-[#4D4A4A] text-opacity-70 mt-1",children:[It,"%"]})]},Ne)})})]})]}),a.length>0&&J.labels[0]!=="No Data"&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Top Barangays of Operation"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Application distribution by barangay location"})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("span",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:["Top ",Math.min(6,J.labels.length)," barangays"]})})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(vc,{data:J,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})})]}),a.length>0&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Weekly Applications Trend"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Total applications submitted in the last 8 weeks"})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(Wi,{data:xt,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!0,position:"top",labels:{color:"#4D4A4A",font:{family:"Poppins"}}},tooltip:{callbacks:{title:Ne=>{const Je=xt.rawData[Ne[0].dataIndex],ht=new Date(Je.weekStart).toLocaleDateString(),It=new Date(Je.weekEnd).toLocaleDateString();return`${Je.label}: ${ht} - ${It}`}}}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"},stepSize:1},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})}),t.jsx("div",{className:"mt-4 grid grid-cols-4 md:grid-cols-8 gap-2",children:xt.rawData.map((Ne,Je)=>t.jsxs("div",{className:"text-center p-2 bg-[#FBFBFB] rounded border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins",children:Ne.label}),t.jsx("p",{className:"text-lg font-bold text-[#4CAF50] font-montserrat",children:Ne.count})]},Je))})]}),a.length>0&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Monthly Applications Trend"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Total applications submitted over the last 12 months"})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(Wi,{data:Xe,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!0,position:"top",labels:{color:"#4D4A4A",font:{family:"Poppins"}}}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"},stepSize:1},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})}),t.jsx("div",{className:"mt-4 grid grid-cols-6 md:grid-cols-12 gap-2",children:Xe.rawData.map((Ne,Je)=>t.jsxs("div",{className:"text-center p-2 bg-[#FBFBFB] rounded border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins",children:Ne.label}),t.jsx("p",{className:"text-lg font-bold text-[#4A90E2] font-montserrat",children:Ne.count})]},Je))})]}),a.length>0&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Vehicle Age Distribution"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Age breakdown of registered vehicles"})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(Ct).map(([Ne,Je],ht)=>{const Pe=["#4CAF50","#4A90E2","#FDA811","#9C27B0","#757575"][ht],Ke=a.length>0?(Je/a.length*100).toFixed(1):0;return t.jsxs("div",{className:"p-4 rounded-lg border-2 border-[#E9E7E7] hover:shadow-md transition-all",style:{borderLeftColor:Pe,borderLeftWidth:"4px"},children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 mb-1 font-poppins",children:Ne}),t.jsx("p",{className:"text-2xl font-bold text-[#4D4A4A] font-montserrat mb-1",children:Je}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-1 bg-[#E9E7E7] rounded-full h-1.5 mr-2",children:t.jsx("div",{className:"h-1.5 rounded-full",style:{width:`${Ke}%`,backgroundColor:Pe}})}),t.jsxs("span",{className:"text-xs text-[#4D4A4A] text-opacity-70",children:[Ke,"%"]})]})]},Ne)})})]}),a.length>0&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Applications by TODA"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Distribution across different TODA organizations"})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("span",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:["Showing top ",Math.min(6,W.labels.length)," TODAs"]})})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(vc,{data:W,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})}),W.labels.length>0&&W.labels[0]!=="No TODA Data"&&t.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:W.labels.slice(0,6).map((Ne,Je)=>{const ht=W.datasets[0].data[Je],It="#4CAF50";return t.jsxs("div",{className:"p-3 rounded-lg border border-[#E9E7E7] hover:shadow transition-all",style:{borderLeftColor:It,borderLeftWidth:"4px"},children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(Ur,{className:"w-5 h-5 mr-2",style:{color:It}}),t.jsx("span",{className:"text-sm font-medium text-[#4D4A4A] font-poppins truncate",children:Ne})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-lg font-bold text-[#4D4A4A] font-montserrat",children:ht}),t.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-[#FBFBFB] text-[#4D4A4A]",children:[(ht/a.length*100).toFixed(1),"% of total"]})]})]},Je)})})]}),a.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-[#E9E7E7] overflow-hidden",children:[t.jsxs("div",{className:"p-6 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Applications List"}),t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:["Showing ",ze+1,"-",Math.min(Le,yt.length)," of ",yt.length," applications"]})]}),t.jsx("div",{className:"flex items-center space-x-3",children:t.jsxs("button",{onClick:()=>window.print(),className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors flex items-center font-poppins",title:"Print Report",children:[t.jsx(rA,{className:"w-4 h-4 mr-2"}),"Print"]})})]}),t.jsx("nav",{className:"flex space-x-6",children:et.map(Ne=>t.jsxs("button",{onClick:()=>{u(Ne.key),j(Ne.key==="all"?"all":Ne.key),r(1)},className:`py-2 px-3 border-b-2 font-medium text-sm flex items-center gap-2 transition-all whitespace-nowrap ${c===Ne.key?"border-[#4CAF50] text-[#4CAF50]":"border-transparent text-[#4D4A4A] hover:text-[#4CAF50]"}`,children:[Ne.label,t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c===Ne.key?"bg-[#4CAF50] text-white":"bg-[#FBFBFB] text-[#4D4A4A] border border-[#E9E7E7]"}`,children:vt[Ne.key]})]},Ne.key))})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-[#FBFBFB]",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Application ID"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Applicant"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Permit Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Subtype"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"TODA"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Vehicle"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-[#E9E7E7]",children:oe.length>0?oe.map((Ne,Je)=>{const ht=_e(Ne.status),It=ht.icon,Pe=Ve(Ne.permit_type),Ke=Se(Ne.permit_subtype);return t.jsxs("tr",{className:"hover:bg-[#FBFBFB] transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"font-mono text-sm text-[#4D4A4A] font-medium",children:Ne.id})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-[#4D4A4A] font-montserrat",children:Ne.full_name}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:Ne.contact_number})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${Pe.bg} ${Pe.text}`,children:Ne.permit_type})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${Ke.bg} ${Ke.text}`,children:Ne.permit_subtype})}),t.jsx("td",{className:"px-6 py-4 text-[#4D4A4A] font-poppins",children:Ne.toda_name}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsxs("p",{className:"text-[#4D4A4A] font-poppins",children:[Ne.make_brand," ",Ne.model]}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:Ne.plate_number})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(It,{className:`w-4 h-4 mr-2 ${ht.text}`}),t.jsx("span",{className:`text-sm font-medium ${ht.text} font-poppins`,children:Ne.status})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:q(Ne.created_at)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-center space-x-3",children:t.jsx("button",{onClick:()=>Gt(Ne.id),title:"View Details",className:"p-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#FDA811]/80 transition-colors",children:t.jsx(ws,{className:"w-5 h-5"})})})})]},Je)}):t.jsx("tr",{children:t.jsxs("td",{colSpan:"9",className:"px-6 py-12 text-center",children:[t.jsx(Ad,{className:"w-12 h-12 text-[#E9E7E7] mx-auto mb-4"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70",children:a.length===0?"No applications found in database. Please check your connection.":"No applications match your filters"}),a.length===0&&t.jsx("button",{onClick:Qt,className:"mt-4 px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-opacity-90 transition-colors font-poppins",children:"Retry Connection"}),a.length>0&&t.jsx("button",{onClick:xe,className:"mt-4 px-4 py-2 border border-[#E9E7E7] text-[#4D4A4A] rounded-lg hover:bg-[#FBFBFB] transition-colors font-poppins",children:"Clear Filters"})]})})})]})}),yt.length>tt&&t.jsx("div",{className:"p-5 border-t border-[#E9E7E7]",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:["Page ",s," of ",Oe]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>r(Ne=>Math.max(Ne-1,1)),disabled:s===1,className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-poppins",children:"Previous"}),t.jsx("button",{onClick:()=>r(Ne=>Math.min(Ne+1,Oe)),disabled:s===Oe,className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-poppins",children:"Next"})]})]})})]}),o&&n&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-md p-4 overflow-auto animate-fadeIn",children:t.jsxs("div",{className:"w-full max-w-7xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl transform transition-all",children:[t.jsxs("div",{className:"relative p-6 bg-gradient-to-r from-gray-50 via-white to-gray-50 dark:from-slate-800 dark:via-slate-700 dark:to-slate-800 border-b-4 border-orange-400",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-orange-400 to-orange-500 p-3 rounded-2xl shadow-xl",children:t.jsx(Ad,{className:"w-10 h-10 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Transport Permit"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Franchise Application Details"})]})]}),t.jsx("button",{onClick:ee,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-all",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-blue-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Application ID"}),t.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white font-mono",children:["FP-",String(n.id).padStart(4,"0")]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-purple-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Date Applied"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:q(n.date_applied||n.created_at)})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-green-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Status"}),t.jsx("span",{className:`inline-block px-3 py-1 text-sm font-bold rounded-full ${_e(n.status).badge}`,children:n.status})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-orange-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Permit Info"}),t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[t.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${n.permit_type==="NEW"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:n.permit_type==="NEW"?"New":"Renewal"}),t.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${n.permit_subtype==="MTOP"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:n.permit_subtype})]})]})]})]}),t.jsxs("div",{className:"p-8 space-y-8 max-h-[80vh] overflow-y-auto bg-gradient-to-b from-gray-50 to-white dark:from-slate-900 dark:to-slate-800",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-blue-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:t.jsx(gr,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Personal Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white mt-1",children:n.full_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Contact Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.contact_number})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email Address"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.email_address||n.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Address"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.address||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-green-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-3 rounded-xl shadow-lg",children:t.jsx(Ad,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Vehicle Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Make/Brand"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.make_brand})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Model"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.model})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Plate Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.plate_number})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Vehicle Color"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.vehicle_color})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Year Model"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.year_model})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Vehicle Type"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.vehicle_type})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-orange-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Franchise & Route Details"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"TODA Name"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.toda_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Barangay of Operation"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.barangay_of_operation})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Permit Type"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Ve(n.permit_type).bg} ${Ve(n.permit_type).text}`,children:n.permit_type})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Permit Subtype"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Se(n.permit_subtype).bg} ${Se(n.permit_subtype).text}`,children:n.permit_subtype})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Date Applied"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.date_applied||q(n.created_at)})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-purple-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"LTO Registration Documents"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"LTO OR Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.or_number||n.lto_or_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"LTO CR Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.cr_number||n.lto_cr_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Engine Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.engine_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Chassis Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.chassis_number||"N/A"})]})]})]}),n.attachments&&n.attachments.length>0?t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-indigo-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Submitted Documents"}),t.jsxs("span",{className:"ml-2 bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-sm font-bold",children:[n.attachments.length," files"]})]}),t.jsxs("button",{onClick:Nt,className:"flex items-center gap-2 text-sm text-[#4CAF50] hover:text-[#FDA811] transition-colors",children:[t.jsxs("span",{children:[I?"Hide":"View"," Documents"]}),t.jsx(pA,{className:`w-4 h-4 transition-transform ${I?"rotate-90":""}`})]})]}),I&&t.jsx("div",{className:"mt-4",children:n.attachments&&n.attachments.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.attachments.map(Ne=>t.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-3 rounded-lg ${gh(Ne.type,Ne.name)?"bg-green-100 dark:bg-green-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:gh(Ne.type,Ne.name)?t.jsx(io,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):t.jsx(Kt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:Ne.field_name}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:Ne.name}),t.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:Nj(Ne.type,Ne.name)})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>Be(Ne),className:"p-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#FDA811] transition-colors",title:"View document",children:t.jsx(ws,{className:"w-4 h-4"})}),t.jsx("a",{href:Ne.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#4A90E2]/80 transition-colors",title:"Download document",download:!0,children:t.jsx(nn,{className:"w-4 h-4"})})]})]},Ne.id))}):t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600",children:[t.jsx(Kt,{className:"w-12 h-12 text-gray-300 dark:text-gray-500 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No documents submitted for this application."})]})})]}):t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-gray-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-gray-400 to-gray-500 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Submitted Documents"})]}),t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-xl",children:[t.jsx(Kt,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No files uploaded for this application."})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-yellow-100 dark:border-slate-700",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Review Comments",n.remarks&&t.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",Et(n.remarks).length," comment",Et(n.remarks).length!==1?"s":"",")"]})]}),t.jsx("div",{className:"space-y-4 mb-6",children:n.remarks&&n.remarks.trim()?t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600 overflow-hidden",children:[t.jsx("div",{className:"max-h-64 overflow-y-auto p-4",children:Et(n.remarks).map((Ne,Je)=>t.jsxs("div",{className:`mb-4 ${Je!==0?"pt-4 border-t border-gray-200 dark:border-slate-600":""}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[t.jsx(gr,{className:"w-4 h-4 mr-2"}),"Admin Comment"]}),t.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[t.jsx(jr,{className:"w-3 h-3 mr-1"}),Ne.timestamp]})]}),t.jsx("div",{className:"pl-6",children:t.jsx("p",{className:"text-gray-900 dark:text-white bg-white dark:bg-slate-800 p-3 rounded border border-gray-100 dark:border-slate-500",children:Ne.comment})})]},Je))}),t.jsx("div",{className:"px-4 py-3 bg-gray-100 dark:bg-slate-800 border-t border-gray-200 dark:border-slate-600",children:t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: ",Et(n.remarks).length," comment",Et(n.remarks).length!==1?"s":""]})})]}):t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600",children:[t.jsx(c0,{className:"w-12 h-12 text-gray-300 dark:text-gray-500 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No comments yet. Add your first comment below."})]})})]}),t.jsx("div",{className:"flex justify-end pt-8 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-6 border-t-4 border-gray-300 dark:border-slate-600",children:t.jsxs("button",{onClick:ee,className:"px-8 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2",children:[t.jsx(ls,{className:"w-5 h-5"}),"Close"]})})]})]})}),$&&O&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-0",children:t.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[t.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 p-4 flex justify-between items-center bg-gradient-to-b from-black/70 to-transparent",children:[t.jsx("div",{className:"flex items-center gap-3 text-white",children:t.jsxs("div",{className:"flex items-center gap-2",children:[gh(O.file_type,O.name)?t.jsx(io,{className:"w-5 h-5"}):t.jsx(Kt,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm font-medium truncate max-w-xs",children:O.name}),t.jsx("span",{className:"text-xs text-gray-300",children:Nj(O.file_type,O.name)})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[gh(O.file_type,O.name)&&t.jsxs("div",{className:"flex items-center gap-1 mr-4 bg-black/40 rounded-lg p-1",children:[t.jsx("button",{onClick:as,className:"p-2 text-white hover:bg-white/10 rounded transition-colors",title:"Zoom Out",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})})}),t.jsxs("button",{onClick:Zt,className:"px-3 py-2 text-xs text-white hover:bg-white/10 rounded transition-colors",title:"Reset Zoom",children:[te,"%"]}),t.jsx("button",{onClick:ts,className:"p-2 text-white hover:bg-white/10 rounded transition-colors",title:"Zoom In",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})]}),t.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm flex items-center gap-1.5 transition-colors",download:!0,children:[t.jsx(nn,{className:"w-4 h-4 mr-2"}),"Download"]}),t.jsx("button",{onClick:mt,className:"ml-2 p-2 text-white hover:bg-white/10 rounded-lg transition-colors",title:"Close preview",children:t.jsx(ls,{className:"w-6 h-6"})})]})]}),gh(O.file_type,O.name)?t.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-hidden cursor-move",onWheel:ct,onMouseDown:Pt,children:t.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:t.jsx("img",{ref:Te,id:"preview-image",src:O.url,alt:O.name,className:"max-w-full max-h-[80vh] object-contain rounded-lg shadow-2xl transition-transform duration-200 ease-out",style:{transform:"scale(1)",position:"relative",left:"0px",top:"0px",cursor:"default"},onError:Ne=>{console.error("Failed to load image:",O.url),Ne.target.onerror=null,Ne.target.src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300"><rect width="400" height="300" fill="%23222222"/><text x="200" y="150" text-anchor="middle" font-family="Arial" font-size="16" fill="%23ffffff">Image not found</text><text x="200" y="170" text-anchor="middle" font-family="Arial" font-size="12" fill="%23999999">URL: '+O.url+"</text></svg>",Ne.target.className="max-w-md mx-auto bg-gray-800 rounded-lg p-8"}})})}):t.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:t.jsxs("div",{className:"text-center max-w-md bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20",children:[t.jsx("div",{className:"text-gray-300 mb-6",children:O.file_type?.includes("pdf")||O.name?.endsWith(".pdf")?t.jsx(Kt,{className:"w-24 h-24 mx-auto"}):O.file_type?.includes("image/")?t.jsx(io,{className:"w-24 h-24 mx-auto"}):t.jsx(Kt,{className:"w-24 h-24 mx-auto"})}),t.jsx("h3",{className:"text-xl font-medium text-white mb-3",children:Nj(O.file_type,O.name)}),t.jsx("p",{className:"text-gray-300 mb-6",children:"This file cannot be previewed in browser."}),t.jsxs("div",{className:"flex gap-3 justify-center",children:[t.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",download:!0,children:[t.jsx(nn,{className:"w-5 h-5 mr-2"}),"Download"]}),t.jsx("button",{onClick:mt,className:"inline-flex items-center justify-center px-5 py-2.5 border border-white/30 text-white hover:bg-white/10 rounded-lg transition-colors",children:"Close"})]})]})}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 p-4 flex justify-between items-center text-white/60 text-sm",children:[t.jsx("div",{className:"flex items-center gap-2",children:gh(O.file_type,O.name)&&t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})}),t.jsxs("span",{children:[te,"%"]}),t.jsx("span",{className:"text-xs ml-4",children:"Drag to pan when zoomed"})]})}),t.jsxs("div",{children:[t.jsx("span",{className:"hidden sm:inline",children:"Press "}),t.jsx("kbd",{className:"px-2 py-1 bg-black/40 rounded text-xs mx-1",children:"ESC"}),t.jsx("span",{className:"hidden sm:inline",children:" to close"})]})]}),t.jsx("div",{className:"absolute inset-0 -z-10 cursor-pointer",onClick:mt})]})}),le&&t.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:t.jsx("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-xl shadow-2xl p-6 transform transition-all",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:t.jsx(Us,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Success!"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:De}),t.jsx("div",{className:"flex justify-center space-x-3",children:t.jsxs("button",{onClick:()=>{ye(!1),me("")},className:"px-6 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#4CAF50]/80 transition-colors font-medium flex items-center",children:[t.jsx(Us,{className:"w-4 h-4 mr-2"}),"Continue"]})})]})})})]})}const Tf=(a,e)=>a?a.startsWith("image/"):e?[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"].some(r=>e.toLowerCase().endsWith(r)):!1,XD=(a,e)=>{if(a){if(a==="application/pdf")return"PDF Document";if(a.startsWith("image/"))return`${a.split("/")[1].toUpperCase()} Image`;if(a.startsWith("application/")){if(a.includes("word"))return"Word Document";if(a.includes("excel"))return"Excel Spreadsheet";if(a.includes("zip"))return"ZIP Archive";if(a.includes("rar"))return"RAR Archive"}if(a.startsWith("text/"))return a.includes("csv")?"CSV File":"Text File"}if(e)switch(e.split(".").pop().toLowerCase()){case"pdf":return"PDF Document";case"jpg":case"jpeg":return"JPEG Image";case"png":return"PNG Image";case"gif":return"GIF Image";case"bmp":return"BMP Image";case"webp":return"WebP Image";case"doc":case"docx":return"Word Document";case"txt":return"Text File";case"csv":return"CSV File";case"xls":case"xlsx":return"Excel Spreadsheet";case"zip":return"ZIP Archive";case"rar":return"RAR Archive";default:return"File"}return"File"},jj=a=>a?{pending:"Pending",approved:"Approved",rejected:"Rejected",under_review:"Under Review",document_verification:"Document Verification",field_inspection_scheduled:"Field Inspection Scheduled",payment_verification:"Payment Verification",for_manager_approval:"For Manager Approval",printing_processing:"Printing Processing",ready_for_release:"Ready for Release"}[a.toLowerCase()]||a:"Pending",qde=a=>a?a.toLowerCase().replace(/\s+/g,"_"):"pending";function Gde(){const[a,e]=C.useState([]),[s,r]=C.useState(1),[n,i]=C.useState(null),[o,l]=C.useState(!1),[c,u]=C.useState("all"),[m,A]=C.useState(""),[g,p]=C.useState("all"),[v,b]=C.useState("all"),[y,w]=C.useState("all"),[B,j]=C.useState(!1),[E,S]=C.useState(""),[T,M]=C.useState(!0),[D,P]=C.useState(null),[Y,Q]=C.useState(""),[L,ae]=C.useState("latest"),[ne,V]=C.useState(""),[O,X]=C.useState(null),[$,H]=C.useState(!1),[te,K]=C.useState(100),[I,R]=C.useState(!1),[G,se]=C.useState({}),le=C.useRef(null),ye=C.useRef(!1),De=C.useRef({x:0,y:0}),me=C.useRef({x:0,y:0}),Te=10,we="/backend/franchise_permit",st=ee=>{if(!ee)return"N/A";try{return new Date(ee).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},ce=async()=>{try{M(!0),P(null);const ee=new URLSearchParams({page:s,limit:Te});g!=="all"&&ee.append("status",g),v!=="all"&&ee.append("permit_subtype",v.toUpperCase()),y!=="all"&&ee.append("permit_type",y.toUpperCase()),m.trim()&&ee.append("search",m.trim());const Ie=`${we}/admin_fetch.php?${ee}`,ue=await fetch(Ie,{method:"GET",headers:{Accept:"application/json"}});if(!ue.ok)throw new Error(`Server error: ${ue.status}`);const fe=await ue.json();if(fe.success){const xe=fe.data.map(Me=>{const ct=`${Me.first_name||""} ${Me.middle_initial?Me.middle_initial+".":""} ${Me.last_name||""}`.trim();return{id:Me.application_id,application_id:Me.application_id,type:Me.permit_type==="RENEWAL"?"Renewal":"New",permit_type:Me.permit_type||"NEW",permit_subtype:Me.permit_subtype||"FRANCHISE",application_date:Me.created_at,created_at:Me.created_at,full_name:ct||"N/A",contact_number:Me.contact_number||"N/A",email:Me.email||"N/A",home_address:Me.home_address||"N/A",make_brand:Me.make_brand||"N/A",model:Me.model||"N/A",route_zone:Me.route_zone||"N/A",toda_name:Me.toda_name||"N/A",barangay_of_operation:Me.barangay_of_operation||"N/A",status:jj(Me.status),plate_number:Me.plate_number||"N/A",year_acquired:Me.year_acquired||"N/A",color:Me.color||"N/A",vehicle_type:Me.vehicle_type||"Tricycle",lto_or_number:Me.lto_or_number||"N/A",lto_cr_number:Me.lto_cr_number||"N/A",engine_number:Me.engine_number||"N/A",chassis_number:Me.chassis_number||"N/A",district:Me.district||"N/A",remarks:Me.remarks||"",operator_type:Me.operator_type||"N/A",citizenship:Me.citizenship||"N/A",birth_date:Me.birth_date||"N/A",id_type:Me.id_type||"N/A",id_number:Me.id_number||"N/A",lto_expiration_date:Me.lto_expiration_date||"N/A",mv_file_number:Me.mv_file_number||"N/A",franchise_fee_or:Me.franchise_fee_or||"N/A",sticker_id_fee_or:Me.sticker_id_fee_or||"N/A",inspection_fee_or:Me.inspection_fee_or||"N/A",date_submitted:Me.date_submitted||Me.created_at,attachments:Me.attachments||{}}});e(xe),P(null)}else throw new Error(fe.message||"Failed to fetch data from server")}catch(ee){console.error("Error fetching data:",ee),P(`Failed to load data: ${ee.message}`),e([])}finally{M(!1)}};C.useEffect(()=>{ce()},[s,g,v,y]);const tt=C.useCallback(()=>{if(le.current){const ee=le.current.style.transform||"scale(1)",Ie=parseFloat(ee.match(/scale\(([^)]+)\)/)?.[1]||1);K(Math.round(Ie*100))}},[]),Ae=C.useCallback(ee=>{if(!(!le.current||!Tf(O?.file_type,O?.name))&&(ee.preventDefault(),ee.stopPropagation(),ee.deltaY!==0)){const Ie=le.current.style.transform||"scale(1)",ue=parseFloat(Ie.match(/scale\(([^)]+)\)/)?.[1]||1),fe=ee.deltaY>0?-.1:.1,xe=Math.max(.5,Math.min(ue+fe,5));le.current.style.transform=`scale(${xe})`,le.current.style.cursor=xe>1?"grab":"default",tt()}},[O,tt]),gt=C.useCallback(ee=>{if(!le.current||!Tf(O?.file_type,O?.name))return;const Ie=le.current.style.transform||"scale(1)";if(parseFloat(Ie.match(/scale\(([^)]+)\)/)?.[1]||1)>1){ee.preventDefault(),ye.current=!0,De.current={x:ee.clientX,y:ee.clientY},le.current.style.cursor="grabbing";const fe=Me=>{if(!ye.current||!le.current)return;const ct=Me.clientX-De.current.x,Pt=Me.clientY-De.current.y,ts=me.current.x+ct,as=me.current.y+Pt;le.current.style.left=`${ts}px`,le.current.style.top=`${as}px`},xe=()=>{le.current&&(ye.current=!1,le.current.style.cursor="grab",le.current.style.left&&le.current.style.top&&(me.current.x=parseFloat(le.current.style.left),me.current.y=parseFloat(le.current.style.top)),document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",xe))};document.addEventListener("mousemove",fe),document.addEventListener("mouseup",xe)}},[O]),q=C.useCallback(()=>{if(!le.current)return;const ee=le.current.style.transform||"scale(1)",Ie=parseFloat(ee.match(/scale\(([^)]+)\)/)?.[1]||1),ue=Math.min(Ie+.25,5);le.current.style.transform=`scale(${ue})`,le.current.style.cursor=ue>1?"grab":"default",tt()},[tt]),Qt=C.useCallback(()=>{if(!le.current)return;const ee=le.current.style.transform||"scale(1)",Ie=parseFloat(ee.match(/scale\(([^)]+)\)/)?.[1]||1),ue=Math.max(Ie-.25,.5);le.current.style.transform=`scale(${ue})`,le.current.style.cursor=ue>1?"grab":"default",tt()},[tt]),yt=C.useCallback(()=>{le.current&&(le.current.style.transform="scale(1)",le.current.style.left="0px",le.current.style.top="0px",le.current.style.cursor="default",K(100),me.current={x:0,y:0})},[]);C.useEffect(()=>{O&&le.current&&(le.current.style.transform="scale(1)",le.current.style.left="0px",le.current.style.top="0px",le.current.style.cursor="default",K(100),me.current={x:0,y:0})},[O]),C.useEffect(()=>{const ee=Ie=>{Ie.key==="Escape"&&$&&Ve()};return window.addEventListener("keydown",ee),()=>{window.removeEventListener("keydown",ee)}},[$]);const Oe=async()=>{if(!(!n||!Y.trim()))try{const ee=await fetch(`${we}/update_status.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({application_id:n.application_id||n.id,remarks:Y,updated_by:"Admin"})});if(!ee.ok)throw new Error(`HTTP error: ${ee.status}`);const Ie=await ee.json();if(Ie.success){const xe=`--- ${new Date().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})} (Admin) ---
${Y}

`,Me=Ie.data?.remarks||(n.remarks?xe+n.remarks:xe);i({...n,remarks:Me}),dt.fire({icon:"success",title:"Comment Saved!",text:"Your comment has been saved successfully.",confirmButtonColor:"#4CAF50",timer:2e3,showConfirmButton:!0}),Q("")}else throw new Error(Ie.message||"Failed to save comment")}catch(ee){console.error("Error saving comment:",ee),dt.fire("Error","Failed to save comment: "+ee.message,"error")}},ze=()=>{let ee=[...a];if(ne){const Ie=ne.toLowerCase();ee=ee.filter(ue=>ue.full_name?.toLowerCase().includes(Ie)||ue.plate_number?.toLowerCase().includes(Ie)||ue.toda_name?.toLowerCase().includes(Ie)||ue.barangay_of_operation?.toLowerCase().includes(Ie)||ue.application_id?.toString().includes(Ie)||ue.email?.toLowerCase().includes(Ie))}return c!=="all"&&(ee=ee.filter(Ie=>Ie.permit_subtype?.toLowerCase()===c.toLowerCase())),ee},Le=(ee,Ie)=>{const ue=[...ee];switch(Ie){case"latest":return ue.sort((xe,Me)=>new Date(Me.created_at||0)-new Date(xe.created_at||0));case"oldest":return ue.sort((xe,Me)=>new Date(xe.created_at||0)-new Date(Me.created_at||0));case"name_asc":return ue.sort((xe,Me)=>{const ct=xe.full_name.toLowerCase(),Pt=Me.full_name.toLowerCase();return ct.localeCompare(Pt)});case"name_desc":return ue.sort((xe,Me)=>{const ct=xe.full_name.toLowerCase();return Me.full_name.toLowerCase().localeCompare(ct)});case"status_priority":const fe={Pending:1,Approved:2,Rejected:3};return ue.sort((xe,Me)=>(fe[xe.status]||4)-(fe[Me.status]||4));default:return ue}},oe=()=>{let ee=ze();return ee=Le(ee,L),ee},he=C.useMemo(()=>{const ee=a.length,Ie=a.filter(as=>as.status==="Approved").length,ue=a.filter(as=>as.status==="Rejected").length,fe=a.filter(as=>as.status==="Pending").length,xe=a.filter(as=>as.permit_subtype==="MTOP").length,Me=a.filter(as=>as.permit_subtype==="FRANCHISE").length,ct=ee>0?(Ie/ee*100).toFixed(1):0,Pt={};a.forEach(as=>{const Zt=as.toda_name||"Unknown";Zt!=="N/A"&&Zt&&(Pt[Zt]=(Pt[Zt]||0)+1)});const ts=Object.entries(Pt).sort(([,as],[,Zt])=>Zt-as)[0]||["No TODA data",0];return{total:ee,approved:Ie,rejected:ue,pending:fe,mtop:xe,franchise:Me,approvalRate:ct,topTODA:{name:ts[0],count:ts[1]}}},[a]),W=ee=>{switch(ee){case"Approved":return"text-[#4CAF50] bg-[#4CAF50]/10";case"Rejected":return"text-[#E53935] bg-[#E53935]/10";case"Pending":return"text-[#FDA811] bg-[#FDA811]/10";case"Under Review":return"text-[#3B82F6] bg-[#3B82F6]/10";case"Document Verification":return"text-[#8B5CF6] bg-[#8B5CF6]/10";case"Field Inspection Scheduled":return"text-[#0EA5E9] bg-[#0EA5E9]/10";case"Payment Verification":return"text-[#F59E0B] bg-[#F59E0B]/10";case"For Manager Approval":return"text-[#6366F1] bg-[#6366F1]/10";case"Printing Processing":return"text-[#14B8A6] bg-[#14B8A6]/10";case"Ready for Release":return"text-[#10B981] bg-[#10B981]/10";default:return"text-gray-600 bg-gray-100"}},ve=ee=>ee===c?"bg-[#4CAF50] text-white":"bg-gray-100 text-gray-600",Qe=ee=>ee===c?"border-[#4CAF50]":"border-transparent",Ze=ee=>ee===c?"text-[#4CAF50]":"text-gray-500 hover:text-gray-700",J=async ee=>{try{const Ie=ee.application_id||ee.id,ue=await fetch(`${we}/fetch_single.php?application_id=${Ie}`);if(!ue.ok)throw new Error(`HTTP error: ${ue.status}`);const fe=ue.headers.get("content-type");if(!fe||!fe.includes("application/json")){const Me=await ue.text();throw console.error("Non-JSON response:",Me),new Error("Server returned invalid response format. Please check the backend endpoint.")}const xe=await ue.json();if(xe.success&&xe.data){const Me=xe.data,ct=Ct(Me);i({...Me,email_address:Me.email,address:Me.home_address||"N/A",year_model:Me.year_acquired,vehicle_color:Me.color,or_number:Me.lto_or_number,cr_number:Me.lto_cr_number,driver_license:Me.id_number||"N/A",franchise_number:Me.application_id,date_applied:Me.formatted_date_submitted||st(Me.date_submitted),attachments:ct,status:jj(Me.status)}),l(!0)}else throw new Error(xe.message||"Failed to fetch details")}catch(Ie){console.error("Error viewing franchise:",Ie),dt.fire("Error","Failed to load application details: "+Ie.message,"error")}},He=()=>{l(!1),i(null),Q(""),X(null),H(!1)},xt=async(ee,Ie="")=>{if(n)try{const ue=qde(ee),fe=await fetch(`${we}/update_status.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({application_id:n.application_id||n.id,status:ue,remarks:Ie,updated_by:"Admin"})});if(!fe.ok)throw new Error(`HTTP error: ${fe.status}`);const xe=await fe.json();if(xe.success){const Me=n.application_id||n.id,ct={action:ee,timestamp:new Date().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),notes:Ie||"",by:"Admin"};se(ts=>({...ts,[Me]:[...ts[Me]||[],ct]})),dt.fire({icon:"success",title:"Success!",text:`Permit ${ee.toLowerCase()} successfully!`,confirmButtonColor:"#4CAF50",timer:2e3,showConfirmButton:!0}),await ce();const Pt=xe.data?.status?jj(xe.data.status):ee;i(ts=>({...ts,status:Pt,remarks:xe.data?.remarks||ts.remarks}))}else dt.fire("Error",xe.message||"Failed to update status","error")}catch(ue){console.error("Error updating status:",ue),dt.fire("Error","Failed to update status. Please try again.","error")}},Xe=ee=>{if(!ee||typeof ee!="string")return[];try{const Ie=ee.trim();if(!Ie)return[];const ue=Ie.split(/(?=---\s+.+?\s+---)/g),fe=[];for(let xe of ue){if(xe=xe.trim(),!xe)continue;const Me=xe.match(/^---\s+(.+?)\s+---\n([\s\S]*)$/);if(Me){const ct=Me[1].trim(),Pt=Me[2].trim();Pt&&fe.push({timestamp:ct,comment:Pt})}else fe.push({timestamp:"Just now",comment:xe})}return fe}catch(Ie){return console.error("Error formatting comments:",Ie),[{timestamp:"Recent",comment:ee}]}},Ct=ee=>{if(!ee)return[];try{const Ie=[],ue=ee.application_id;return["proof_of_residency","barangay_clearance","lto_or_cr","insurance_certificate","drivers_license","emission_test","id_picture","official_receipt","nbi_clearance","police_clearance","medical_certificate","toda_endorsement","toda_president_cert","franchise_fee_receipt","sticker_id_fee_receipt","inspection_fee_receipt","applicant_signature"].forEach(xe=>{const Me=ee[xe];if(Me&&Me.trim()!==""){const ct=`${we}/uploads/${ue}/${Me}`;Ie.push({id:xe,name:Me,type:_e(Me),url:ct,field_name:xe.replace(/_/g," ").replace(/\b\w/g,Pt=>Pt.toUpperCase())})}}),Ie}catch(Ie){return console.error("Error parsing attachments:",Ie),[]}},_e=ee=>{if(!ee||typeof ee!="string")return"application/octet-stream";switch(ee.split(".").pop().toLowerCase()){case"pdf":return"application/pdf";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"webp":return"image/webp";case"doc":case"docx":return"application/msword";case"txt":return"text/plain";case"csv":return"text/csv";case"xls":case"xlsx":return"application/vnd.ms-excel";case"zip":return"application/zip";case"rar":return"application/x-rar-compressed";default:return"application/octet-stream"}},Se=ee=>{let Ie=ee.url;ee.url&&!ee.url.startsWith("http")&&(Ie=`${we}/${ee.url}`);const ue={...ee,file_type:ee.type||_e(ee.name),url:Ie};console.log("Viewing file:",ue),X(ue),H(!0)},Ve=()=>{X(null),H(!1),K(100),ye.current=!1,De.current={x:0,y:0},me.current={x:0,y:0}},et=()=>{j(!0),S("csv");const Ie=[["Application ID","Applicant Name","Permit Type","Permit Subtype","TODA","Barangay","Vehicle","Plate Number","Status","Contact","Email","Application Date"].join(","),...a.map(Me=>[Me.id,Me.full_name,Me.permit_type,Me.permit_subtype,Me.toda_name,Me.barangay_of_operation,`${Me.make_brand} ${Me.model}`,Me.plate_number,Me.status,Me.contact_number,Me.email,st(Me.created_at)].map(ct=>`"${ct||""}"`).join(","))].join(`
`),ue=new Blob([Ie],{type:"text/csv"}),fe=window.URL.createObjectURL(ue),xe=document.createElement("a");xe.href=fe,xe.download=`franchise-permits-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),window.URL.revokeObjectURL(fe),j(!1),S("")},vt=async()=>{j(!0),S("pdf");try{const ee=document.createElement("div");ee.style.position="absolute",ee.style.left="-9999px",ee.style.width="800px",ee.style.backgroundColor="#ffffff",ee.style.padding="20px",ee.style.fontFamily="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",ee.style.color="#1f2937",document.body.appendChild(ee);const Ie=document.createElement("div");Ie.style.marginBottom="20px",Ie.style.borderBottom="2px solid #4CAF50",Ie.style.paddingBottom="15px",Ie.innerHTML=`
        <h1 style="color: #1f2937; font-size: 24px; font-weight: bold; margin: 0;">
          Franchise Permit Report
        </h1>
        <p style="color: #6b7280; margin: 5px 0;">
          Generated on ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}
        </p>
        <div style="display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap;">
          <span style="background: #4CAF50; color: white; padding: 3px 10px; border-radius: 15px; font-size: 11px;">
            Total: ${he.total}
          </span>
          <span style="background: #4CAF50; color: white; padding: 3px 10px; border-radius: 15px; font-size: 11px;">
            Approved: ${he.approved}
          </span>
          <span style="background: #FDA811; color: white; padding: 3px 10px; border-radius: 15px; font-size: 11px;">
            Pending: ${he.pending}
          </span>
          <span style="background: #E53935; color: white; padding: 3px 10px; border-radius: 15px; font-size: 11px;">
            Rejected: ${he.rejected}
          </span>
        </div>
      `,ee.appendChild(Ie);const ue=document.createElement("div");ue.style.marginBottom="25px",ue.style.padding="15px",ue.style.backgroundColor="#f9fafb",ue.style.borderRadius="8px",ue.style.border="1px solid #e5e7eb",ue.innerHTML=`
        <h2 style="color: #1f2937; font-size: 16px; font-weight: bold; margin: 0 0 10px 0;">Summary</h2>
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; font-size: 12px;">
          <div>
            <strong>Approval Rate:</strong> ${he.approvalRate}%
          </div>
          <div>
            <strong>Top TODA:</strong> ${he.topTODA.name} (${he.topTODA.count} applications)
          </div>
          <div>
            <strong>MTOP Applications:</strong> ${he.mtop}
          </div>
          <div>
            <strong>Franchise Applications:</strong> ${he.franchise}
          </div>
        </div>
      `,ee.appendChild(ue);const fe=document.createElement("div");fe.innerHTML=`
        <h2 style="color: #1f2937; font-size: 18px; font-weight: bold; margin-bottom: 15px;">Applications List</h2>
        <table style="width: 100%; border-collapse: collapse; font-size: 10px;">
          <thead>
            <tr style="background: #f3f4f6; border-bottom: 2px solid #e5e7eb;">
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">ID</th>
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">Applicant</th>
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">Vehicle</th>
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">TODA</th>
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">Status</th>
              <th style="padding: 8px; text-align: left; color: #374151; font-weight: 600; border: 1px solid #e5e7eb;">Date</th>
            </tr>
          </thead>
          <tbody>
            ${oe().slice(0,20).map(Ne=>{const Je=Ne.status==="Approved"?"#4CAF50":Ne.status==="Pending"?"#FDA811":"#E53935";return`
                <tr style="border-bottom: 1px solid #e5e7eb;">
                  <td style="padding: 8px; border: 1px solid #e5e7eb;">FP-${String(Ne.application_id).padStart(4,"0")}</td>
                  <td style="padding: 8px; border: 1px solid #e5e7eb;">${Ne.full_name}</td>
                  <td style="padding: 8px; border: 1px solid #e5e7eb;">${Ne.plate_number}</td>
                  <td style="padding: 8px; border: 1px solid #e5e7eb;">${Ne.toda_name}</td>
                  <td style="padding: 8px; border: 1px solid #e5e7eb; color: ${Je}; font-weight: 500;">
                    ${Ne.status}
                  </td>
                  <td style="padding: 8px; border: 1px solid #e5e7eb;">${st(Ne.created_at)}</td>
                </tr>
              `}).join("")}
          </tbody>
        </table>
        ${oe().length>20?`<p style="text-align: center; color: #6b7280; font-size: 10px; margin-top: 10px;">
            ... and ${oe().length-20} more applications
          </p>`:""}
      `,ee.appendChild(fe);const xe=document.createElement("div");xe.style.marginTop="25px",xe.style.padding="15px",xe.style.backgroundColor="#f9fafb",xe.style.borderRadius="8px",xe.style.border="1px solid #e5e7eb",xe.innerHTML=`
        <h2 style="color: #1f2937; font-size: 16px; font-weight: bold; margin: 0 0 10px 0;">Status Distribution</h2>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; font-size: 12px;">
          <div style="text-align: center;">
            <div style="font-size: 20px; font-weight: bold; color: #4CAF50;">${he.approved}</div>
            <div style="color: #6b7280;">Approved</div>
          </div>
          <div style="text-align: center;">
            <div style="font-size: 20px; font-weight: bold; color: #FDA811;">${he.pending}</div>
            <div style="color: #6b7280;">Pending</div>
          </div>
          <div style="text-align: center;">
            <div style="font-size: 20px; font-weight: bold; color: #E53935;">${he.rejected}</div>
            <div style="color: #6b7280;">Rejected</div>
          </div>
        </div>
      `,ee.appendChild(xe);const Me=document.createElement("div");Me.style.marginTop="30px",Me.style.paddingTop="15px",Me.style.borderTop="1px solid #e5e7eb",Me.style.color="#6b7280",Me.style.fontSize="10px",Me.innerHTML=`
        <p style="margin: 0;">Generated by Franchise Permit Management System</p>
        <p style="margin: 5px 0 0 0;">Total Records: ${a.length}  Filtered: ${oe().length}</p>
      `,ee.appendChild(Me),await new Promise(Ne=>setTimeout(Ne,100));const ct=await Tu(ee,{scale:2,useCORS:!0,backgroundColor:"#ffffff",logging:!1}),Pt=ct.toDataURL("image/png"),ts=new Es({orientation:"portrait",unit:"mm",format:"a4"}),as=190,Zt=280,Be=ct.height*as/ct.width;let mt=Be,Nt=10;for(ts.addImage(Pt,"PNG",10,Nt,as,Be),mt-=Zt;mt>=0;)Nt=mt-Be,ts.addPage(),ts.addImage(Pt,"PNG",10,Nt,as,Be),mt-=Zt;ts.save(`franchise-report-${new Date().toISOString().split("T")[0]}.pdf`),document.body.removeChild(ee)}catch(ee){console.error("Error generating PDF:",ee),dt.fire({title:"Export Failed",text:"Failed to generate PDF. Please try again.",icon:"error"})}finally{j(!1),S("")}},Mt=async()=>{if(!n)return;const ee=await dt.fire({title:"Approve Permit?",html:`
        <div class="text-left">
          <p class="mb-2">You are about to approve this permit application:</p>
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <p class="text-sm"><strong>Application ID:</strong> ${n.application_id}</p>
            <p class="text-sm"><strong>Applicant:</strong> ${n.full_name}</p>
            <p class="text-sm"><strong>Type:</strong> ${n.permit_type} - ${n.permit_subtype}</p>
          </div>
          <p class="text-sm text-gray-600">This action will approve the application.</p>
        </div>
      `,icon:"question",input:"textarea",inputLabel:"Add approval notes (optional)",inputPlaceholder:"Enter any additional notes...",inputValue:Y,showCancelButton:!0,confirmButtonText:"Yes, Approve",cancelButtonText:"Cancel",confirmButtonColor:"#4CAF50",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-left"}});if(ee.isConfirmed){const Ie=ee.value||Y;await xt("Approved",Ie),Q("")}},Ye=async()=>{if(!n)return;const ee=await dt.fire({title:"Reject Application?",html:`
        <div class="text-left">
          <p class="mb-2">You are about to reject this permit application:</p>
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <p class="text-sm"><strong>Application ID:</strong> ${n.application_id}</p>
            <p class="text-sm"><strong>Applicant:</strong> ${n.full_name}</p>
            <p class="text-sm"><strong>Type:</strong> ${n.permit_type} - ${n.permit_subtype}</p>
          </div>
          <p class="text-sm text-red-600">Please provide a reason for rejection.</p>
        </div>
      `,icon:"warning",input:"textarea",inputLabel:"Reason for rejection (required)",inputPlaceholder:"Enter the reason for rejecting this application...",inputValue:Y,inputValidator:Ie=>{if(!Ie)return"You must provide a reason for rejection!"},showCancelButton:!0,confirmButtonText:"Yes, Reject",cancelButtonText:"Cancel",confirmButtonColor:"#E53935",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-left"}});ee.isConfirmed&&(await xt("Rejected",ee.value),Q(""))},Et=async(ee,Ie,ue,fe="#4CAF50")=>{if(!n)return;const xe=await dt.fire({title:Ie,html:`
        <div class="text-left">
          <p class="mb-2">${ue}</p>
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <p class="text-sm"><strong>Application ID:</strong> ${n.application_id}</p>
            <p class="text-sm"><strong>Applicant:</strong> ${n.full_name}</p>
            <p class="text-sm"><strong>Type:</strong> ${n.permit_type} - ${n.permit_subtype}</p>
          </div>
          <p class="text-sm text-gray-600">Add notes about this status update (optional).</p>
        </div>
      `,icon:"question",input:"textarea",inputLabel:"Status update notes",inputPlaceholder:"Enter any relevant notes...",inputValue:Y,showCancelButton:!0,confirmButtonText:"Update Status",cancelButtonText:"Cancel",confirmButtonColor:fe,cancelButtonColor:"#6b7280",customClass:{popup:"text-left"},preConfirm:Me=>Me});xe.isConfirmed&&await xt(ee,xe.value||"")},Gt=async()=>{if(!n)return;const ee=await dt.fire({title:"Mark as Pending?",html:`
        <div class="text-left">
          <p class="mb-2">Mark this application as pending:</p>
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <p class="text-sm"><strong>Application ID:</strong> ${n.application_id}</p>
            <p class="text-sm"><strong>Applicant:</strong> ${n.full_name}</p>
            <p class="text-sm"><strong>Type:</strong> ${n.permit_type} - ${n.permit_subtype}</p>
          </div>
          <p class="text-sm text-gray-600">Please add any notes if needed.</p>
        </div>
      `,icon:"info",input:"textarea",inputLabel:"Notes (optional)",inputPlaceholder:"Add notes...",inputValue:Y,showCancelButton:!0,confirmButtonText:"Mark as Pending",cancelButtonText:"Cancel",confirmButtonColor:"#FDA811",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-left"}});if(ee.isConfirmed){const Ie=ee.value||Y;await xt("Pending",Ie),Q("")}};return T?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#4CAF50]"})}):t.jsxs("div",{className:"bg-white dark:bg-slate-700 p-6 rounded-lg",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Franchise Permit Analytics"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and track all franchise permit applications"})]}),D&&t.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-center",children:[t.jsx("div",{className:"text-red-600 font-semibold",children:D}),t.jsx("button",{onClick:ce,className:"mt-2 px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#4CAF50]/80 transition-colors",children:"Retry Connection"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-[#4CAF50]/10 p-4 rounded-lg border border-[#4CAF50]/20",children:[t.jsx("p",{className:"text-[#4CAF50] text-sm font-medium",children:"Total Applications"}),t.jsx("p",{className:"text-[#4CAF50] text-2xl font-bold",children:he.total}),t.jsxs("p",{className:"text-[#4CAF50] text-xs mt-1",children:["MTOP: ",he.mtop,"  Franchise: ",he.franchise]})]}),t.jsxs("div",{className:"bg-[#4A90E2]/10 p-4 rounded-lg border border-[#4A90E2]/20",children:[t.jsx("p",{className:"text-[#4A90E2] text-sm font-medium",children:"Approved"}),t.jsx("p",{className:"text-[#4A90E2] text-2xl font-bold",children:he.approved}),t.jsxs("p",{className:"text-[#4A90E2] text-xs mt-1",children:[he.approvalRate,"% approval rate"]})]}),t.jsxs("div",{className:"bg-[#FDA811]/10 p-4 rounded-lg border border-[#FDA811]/20",children:[t.jsx("p",{className:"text-[#FDA811] text-sm font-medium",children:"Pending"}),t.jsx("p",{className:"text-[#FDA811] text-2xl font-bold",children:he.pending}),t.jsx("p",{className:"text-[#FDA811] text-xs mt-1",children:"Requires review"})]}),t.jsxs("div",{className:"bg-[#E53935]/10 p-4 rounded-lg border border-[#E53935]/20",children:[t.jsx("p",{className:"text-[#E53935] text-sm font-medium",children:"Rejected"}),t.jsx("p",{className:"text-[#E53935] text-2xl font-bold",children:he.rejected}),t.jsx("p",{className:"text-[#E53935] text-xs mt-1",children:"Not approved"})]})]}),t.jsxs("div",{className:"mb-6 bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 shadow-sm",children:[t.jsx("div",{className:"border-b border-gray-200 dark:border-slate-700 overflow-x-auto",children:t.jsx("nav",{className:"flex space-x-6 px-6 min-w-max",children:[{key:"all",label:"All Applications"},{key:"mtop",label:"MTOP"},{key:"franchise",label:"Franchise"}].map(ee=>t.jsxs("button",{onClick:()=>{u(ee.key),b(ee.key==="all"?"all":ee.key),r(1)},className:`py-4 px-2 border-b-2 font-medium text-sm flex items-center gap-2 transition-all ${Qe(ee.key)} ${Ze(ee.key)}`,children:[ee.label,t.jsxs("span",{className:`px-2 py-1 text-xs rounded-full ${ve(ee.key)}`,children:[ee.key==="all"&&a.length,ee.key==="mtop"&&a.filter(Ie=>Ie.permit_subtype==="MTOP").length,ee.key==="franchise"&&a.filter(Ie=>Ie.permit_subtype==="FRANCHISE").length]})]},ee.key))})}),t.jsx("div",{className:"px-6 py-4 bg-gray-50 dark:bg-slate-700/50 border-b border-gray-200 dark:border-slate-700",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Permit Type:"}),t.jsx("div",{className:"flex gap-2",children:[{value:"all",label:"All",count:a.length},{value:"new",label:"New Applications",count:a.filter(ee=>ee.permit_type==="NEW").length},{value:"renewal",label:"Renewals",count:a.filter(ee=>ee.permit_type==="RENEWAL").length}].map(ee=>t.jsxs("button",{onClick:()=>{w(ee.value),r(1)},className:`px-4 py-2 text-sm font-medium rounded-lg transition-all ${y===ee.value?"bg-[#4CAF50] text-white shadow-md":"bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-slate-600 hover:bg-gray-100 dark:hover:bg-slate-700"}`,children:[ee.label,t.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full ${y===ee.value?"bg-white/20 text-white":"bg-gray-200 dark:bg-slate-700 text-gray-600 dark:text-gray-400"}`,children:ee.count})]},ee.value))})]})}),t.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-slate-700 bg-gradient-to-r from-[#4CAF50]/5 to-[#4A90E2]/5",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[c==="all"&&"All Franchise Applications",c==="mtop"&&"MTOP Applications",c==="franchise"&&"Franchise Applications"]}),t.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:["Showing ",oe().length," of ",a.length," records"]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:ne,onChange:ee=>V(ee.target.value),placeholder:"Search applications...",className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent w-64"}),t.jsx(sa,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),ne&&t.jsx("button",{onClick:()=>V(""),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:""})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:L,onChange:ee=>ae(ee.target.value),className:"px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent appearance-none pr-10",children:[t.jsx("option",{value:"latest",children:"Latest First"}),t.jsx("option",{value:"oldest",children:"Oldest First"}),t.jsx("option",{value:"name_asc",children:"Name (A-Z)"}),t.jsx("option",{value:"name_desc",children:"Name (Z-A)"}),t.jsx("option",{value:"status_priority",children:"Status Priority"})]}),t.jsx("svg",{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("button",{onClick:ce,className:"px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#4CAF50]/80 transition-colors flex items-center gap-2",children:[t.jsx(Ya,{className:"w-4 h-4"}),"Refresh"]}),t.jsxs("div",{className:"relative group",children:[t.jsxs("button",{disabled:B||a.length===0,className:"px-4 py-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#4A90E2]/80 transition-colors flex items-center gap-2 disabled:opacity-50",children:[t.jsx(nn,{className:"w-4 h-4"}),t.jsx("span",{children:B?"Exporting...":"Export"})]}),t.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:[t.jsxs("button",{onClick:et,disabled:B||a.length===0,className:"w-full px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center gap-2 border-b border-gray-100 dark:border-slate-700",children:[t.jsx(Kt,{className:"w-4 h-4"}),t.jsx("span",{children:"Export as CSV"})]}),t.jsxs("button",{onClick:vt,disabled:B||a.length===0,className:"w-full px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center gap-2",children:[t.jsx(mp,{className:"w-4 h-4"}),t.jsx("span",{children:"Export as PDF"})]})]})]})]})]}),ne&&t.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Search results for: ",t.jsxs("span",{className:"font-semibold",children:['"',ne,'"']})]}),t.jsxs("button",{onClick:()=>V(""),className:"text-sm text-[#4CAF50] hover:text-[#FDA811] flex items-center gap-1",children:[t.jsx(ls,{className:"w-4 h-4"}),"Clear search"]})]})]}),t.jsx("div",{className:"p-6",children:a.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ad,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No franchise applications found"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:D||"There are currently no franchise applications in the system."}),t.jsx("button",{onClick:ce,className:"px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#FDA811] transition-colors",children:"Refresh Data"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full bg-white dark:bg-slate-800 shadow rounded-lg",children:[t.jsx("thead",{className:"bg-gradient-to-r from-[#4CAF50]/10 to-[#4A90E2]/10",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Application No."}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Type"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Applicant"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Vehicle Details"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"TODA"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Applied Date"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:oe().map(ee=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[t.jsxs("td",{className:"px-6 py-4 text-sm font-mono text-gray-600 dark:text-gray-300",children:["FP-",String(ee.application_id).padStart(4,"0")]}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full inline-block w-fit ${ee.permit_type==="NEW"?"bg-blue-100 text-blue-700 border border-blue-200":"bg-purple-100 text-purple-700 border border-purple-200"}`,children:ee.permit_type==="NEW"?"New":"Renewal"}),t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full inline-block w-fit ${ee.permit_subtype==="MTOP"?"bg-green-100 text-green-700 border border-green-200":"bg-orange-100 text-orange-700 border border-orange-200"}`,children:ee.permit_subtype})]})}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white font-medium",children:ee.full_name}),t.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:[t.jsxs("div",{children:[ee.vehicle_type,"  ",ee.plate_number]}),t.jsxs("div",{className:"text-xs text-gray-500",children:[ee.make_brand," ",ee.model]})]}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:ee.toda_name}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:st(ee.created_at)}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsx("span",{className:`px-3 py-1.5 text-xs font-medium rounded-full border ${W(ee.status)} border-current border-opacity-30`,children:ee.status})}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsx("button",{onClick:()=>J(ee),className:"inline-flex items-center px-4 py-2 text-xs font-medium rounded-lg text-white bg-[#4CAF50] hover:bg-[#FDA811] transition-all shadow-sm hover:shadow-md",children:"View"})})]},ee.id))})]})})})]}),o&&n&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-md p-4 overflow-auto animate-fadeIn",children:t.jsxs("div",{className:"w-full max-w-7xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl transform transition-all",children:[t.jsxs("div",{className:"relative p-6 bg-gradient-to-r from-gray-50 via-white to-gray-50 dark:from-slate-800 dark:via-slate-700 dark:to-slate-800 border-b-4 border-orange-400",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-orange-400 to-orange-500 p-3 rounded-2xl shadow-xl",children:t.jsx(Ad,{className:"w-10 h-10 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Transport Permit"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Franchise Application Details"})]})]}),t.jsx("button",{onClick:He,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-all",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-blue-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Application ID"}),t.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white font-mono",children:["FP-",String(n.application_id).padStart(4,"0")]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-purple-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Date Applied"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:st(n.created_at)})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-green-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Status"}),t.jsx("span",{className:`inline-block px-3 py-1 text-sm font-bold rounded-full ${W(n.status)}`,children:n.status})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-orange-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Permit Info"}),t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[t.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${n.permit_type==="NEW"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:n.permit_type==="NEW"?"New":"Renewal"}),t.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${n.permit_subtype==="MTOP"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:n.permit_subtype})]})]})]})]}),t.jsxs("div",{className:"p-8 space-y-8 max-h-[80vh] overflow-y-auto bg-gradient-to-b from-gray-50 to-white dark:from-slate-900 dark:to-slate-800",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-blue-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:t.jsx(gr,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Personal Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-slate-700 dark:to-slate-600 p-4 rounded-xl",children:[t.jsx("label",{className:"text-xs font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:"Full Name"}),t.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-2",children:n.full_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Contact Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.contact_number})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email Address"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Home Address"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.home_address})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Citizenship"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.citizenship})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Birth Date"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:st(n.birth_date)})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-green-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-3 rounded-xl shadow-lg",children:t.jsx(Ad,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Vehicle Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Vehicle Type"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.vehicle_type})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Make/Brand"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.make_brand})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Model"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.model})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Plate Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.plate_number})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Year Acquired"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.year_acquired})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Color"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.color})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Engine Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.engine_number})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Chassis Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.chassis_number})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-orange-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Franchise & Route Details"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Permit Type"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.permit_type})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Permit Subtype"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.permit_subtype})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"TODA Name"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.toda_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Barangay of Operation"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.barangay_of_operation})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Route/Zone"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.route_zone})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"District"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.district})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-purple-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"LTO Registration Documents"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"LTO OR Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.lto_or_number})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"LTO CR Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.lto_cr_number})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"LTO Expiration Date"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:st(n.lto_expiration_date)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"MV File Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:n.mv_file_number})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-slate-800 dark:to-slate-700 rounded-2xl shadow-lg p-6 border-2 border-green-200 dark:border-slate-600",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-3 rounded-xl shadow-lg",children:t.jsx(fu,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Payment Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-green-500 relative",children:[t.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Franchise Fee"}),t.jsx("p",{className:"text-3xl font-black text-green-600 mt-2",children:"250.00"}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:"PAID"}),n.franchise_fee_or&&t.jsxs("span",{className:"text-xs text-gray-500",children:["OR: ",n.franchise_fee_or]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-blue-500 relative",children:[t.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Sticker ID Fee"}),t.jsx("p",{className:"text-3xl font-black text-blue-600 mt-2",children:"150.00"}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:"PAID"}),n.sticker_id_fee_or&&t.jsxs("span",{className:"text-xs text-gray-500",children:["OR: ",n.sticker_id_fee_or]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-orange-500 relative",children:[t.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Inspection Fee"}),t.jsx("p",{className:"text-3xl font-black text-orange-600 mt-2",children:"100.00"}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:"PAID"}),n.inspection_fee_or&&t.jsxs("span",{className:"text-xs text-gray-500",children:["OR: ",n.inspection_fee_or]})]})]})]}),t.jsxs("div",{className:"mt-6 p-4 bg-white dark:bg-slate-800 rounded-xl border-2 border-dashed border-green-300",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-lg font-bold text-gray-700 dark:text-gray-300",children:"Total Amount Paid:"}),t.jsx("span",{className:"text-4xl font-black text-green-600",children:"500.00"})]}),t.jsx("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 text-center",children:"Franchise Fee + Sticker Fee + Inspection Fee"})]})]}),n.attachments&&n.attachments.length>0?t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-indigo-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Submitted Documents"}),t.jsxs("span",{className:"ml-auto bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-sm font-bold",children:[n.attachments.length," files"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:n.attachments.map(ee=>t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-slate-600 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[ee.type.includes("image")?t.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:t.jsx(io,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}):t.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:t.jsx(Kt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:ee.name}),t.jsx("p",{className:"text-xs text-gray-500 truncate",children:ee.field_name})]})]}),t.jsx("button",{onClick:()=>Se(ee),className:"px-3 py-1 text-xs bg-[#4CAF50] text-white rounded hover:bg-[#FDA811] transition-colors whitespace-nowrap",children:"View"})]},ee.id))})]}):t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-gray-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-gray-400 to-gray-500 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Submitted Documents"})]}),t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-xl",children:[t.jsx(Kt,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No files uploaded for this application."})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-yellow-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 p-3 rounded-xl shadow-lg",children:t.jsx(gr,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Review Comments"}),n.remarks&&t.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",Xe(n.remarks).length," comment",Xe(n.remarks).length!==1?"s":"",")"]})]})]}),t.jsx("div",{className:"space-y-4 mb-6",children:n.remarks&&n.remarks.trim()?t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600 overflow-hidden",children:[t.jsx("div",{className:"max-h-64 overflow-y-auto p-4",children:Xe(n.remarks).map((ee,Ie)=>t.jsxs("div",{className:`mb-4 ${Ie!==0?"pt-4 border-t border-gray-200 dark:border-slate-600":""}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[t.jsx(gr,{className:"w-4 h-4 mr-2"}),"Admin Comment"]}),t.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[t.jsx(jr,{className:"w-3 h-3 mr-1"}),ee.timestamp]})]}),t.jsx("div",{className:"pl-6",children:t.jsx("p",{className:"text-gray-900 dark:text-white bg-white dark:bg-slate-800 p-3 rounded border border-gray-100 dark:border-slate-500",children:ee.comment})})]},Ie))}),t.jsx("div",{className:"px-4 py-3 bg-gray-100 dark:bg-slate-800 border-t border-gray-200 dark:border-slate-600",children:t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: ",Xe(n.remarks).length," comment",Xe(n.remarks).length!==1?"s":""]})})]}):t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600",children:[t.jsx("svg",{className:"w-12 h-12 text-gray-300 dark:text-gray-500 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No comments yet. Add your first comment below."})]})}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Add New Comment"}),t.jsx("textarea",{value:Y,onChange:ee=>Q(ee.target.value),className:"w-full border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-3 bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent",rows:3,placeholder:"Enter your review notes here..."}),Y.trim()&&t.jsx("div",{className:"mt-4 flex justify-end",children:t.jsxs("button",{onClick:Oe,className:"px-6 py-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#4A90E2]/80 transition-colors font-medium flex items-center shadow-sm hover:shadow",children:[t.jsx(Us,{className:"w-5 h-5 mr-2"}),"Save Comment"]})})]})]}),(()=>{const ee=n.application_id||n.id,Ie=G[ee]||[];return Ie.length>0?t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-blue-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:t.jsx(jr,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Action History"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[Ie.length," action",Ie.length!==1?"s":""," taken this session"]})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-[17px] top-0 bottom-0 w-0.5 bg-blue-200 dark:bg-slate-600"}),t.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:[...Ie].reverse().map((ue,fe)=>t.jsxs("div",{className:"relative pl-10",children:[t.jsx("div",{className:`absolute left-[10px] top-1.5 w-4 h-4 rounded-full border-2 border-white dark:border-slate-800 shadow ${ue.action==="Approved"?"bg-green-500":ue.action==="Rejected"?"bg-red-500":ue.action==="Pending"?"bg-yellow-500":"bg-blue-500"}`}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg p-3 border border-gray-200 dark:border-slate-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:`text-sm font-semibold px-2 py-0.5 rounded-full ${ue.action==="Approved"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":ue.action==="Rejected"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":ue.action==="Pending"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}`,children:ue.action}),t.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:ue.timestamp})]}),ue.notes&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 pl-1",children:ue.notes}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1 pl-1",children:["by ",ue.by]})]})]},fe))})]})]}):null})(),t.jsxs("div",{className:"flex gap-4 justify-between pt-8 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-6 border-t-4 border-gray-300 dark:border-slate-600",children:[n.status!=="Rejected"&&t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>R(!I),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2",children:["Actions",t.jsx("svg",{className:`w-4 h-4 transition-transform ${I?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),I&&t.jsxs("div",{className:"absolute left-0 bottom-full mb-2 w-72 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden z-50 max-h-96 overflow-y-auto",children:[t.jsx("div",{className:"px-3 py-2 bg-gray-100 dark:bg-slate-700 border-b border-gray-200 dark:border-slate-600",children:t.jsx("p",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Processing Steps"})}),t.jsxs("button",{onClick:()=>{R(!1),Et("Under Review","Mark as Under Review","Application is now being reviewed by the team.","#3B82F6")},className:"w-full px-4 py-3 text-left hover:bg-blue-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(sa,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Under Review"})]}),t.jsxs("button",{onClick:()=>{R(!1),Et("Document Verification","Document Verification","Documents are being verified for completeness and authenticity.","#8B5CF6")},className:"w-full px-4 py-3 text-left hover:bg-purple-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Kt,{className:"w-5 h-5 text-purple-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Document Verification"})]}),t.jsxs("button",{onClick:()=>{R(!1),Et("Field Inspection Scheduled","Schedule Field Inspection","Field inspection has been scheduled for this vehicle.","#0EA5E9")},className:"w-full px-4 py-3 text-left hover:bg-cyan-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Ad,{className:"w-5 h-5 text-cyan-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Field Inspection Scheduled"})]}),t.jsxs("button",{onClick:()=>{R(!1),Et("Payment Verification","Verify Payment","Payment is being verified.","#F59E0B")},className:"w-full px-4 py-3 text-left hover:bg-amber-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(fu,{className:"w-5 h-5 text-amber-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Payment Verification"})]}),t.jsxs("button",{onClick:()=>{R(!1),Et("For Manager Approval","Send for Manager Approval","Application is being sent to manager for approval.","#6366F1")},className:"w-full px-4 py-3 text-left hover:bg-indigo-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(gr,{className:"w-5 h-5 text-indigo-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"For Manager Approval"})]}),t.jsxs("button",{onClick:()=>{R(!1),Et("Printing Processing","Mark as Printing","Permit is being printed and processed.","#14B8A6")},className:"w-full px-4 py-3 text-left hover:bg-teal-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Kt,{className:"w-5 h-5 text-teal-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Printing/Processing"})]}),t.jsxs("button",{onClick:()=>{R(!1),Et("Ready for Release","Mark Ready for Release","Permit is ready for release to applicant.","#10B981")},className:"w-full px-4 py-3 text-left hover:bg-emerald-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Us,{className:"w-5 h-5 text-emerald-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Ready for Release"})]}),t.jsx("div",{className:"px-3 py-2 bg-gray-100 dark:bg-slate-700 border-b border-gray-200 dark:border-slate-600",children:t.jsx("p",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Actions"})}),t.jsxs("button",{onClick:()=>{R(!1),Gt()},className:"w-full px-4 py-3 text-left hover:bg-yellow-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Ks,{className:"w-5 h-5 text-yellow-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Mark as Pending"})]}),t.jsxs("button",{onClick:()=>{R(!1),Ye()},className:"w-full px-4 py-3 text-left hover:bg-red-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(ls,{className:"w-5 h-5 text-red-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Reject Application"})]}),t.jsxs("button",{onClick:()=>{R(!1),Mt()},className:"w-full px-4 py-3 text-left hover:bg-green-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3",children:[t.jsx(Us,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:" Approve Permit"})]})]})]}),t.jsxs("button",{onClick:He,className:"px-8 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2 ml-auto",children:[t.jsx(ls,{className:"w-5 h-5"}),"Close"]})]})]})]})}),$&&O&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-0",children:t.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[t.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 p-4 flex justify-between items-center bg-gradient-to-b from-black/70 to-transparent",children:[t.jsx("div",{className:"flex items-center gap-3 text-white",children:t.jsxs("div",{className:"flex items-center gap-2",children:[Tf(O.file_type,O.name)?t.jsx(io,{className:"w-5 h-5"}):t.jsx(Kt,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm font-medium truncate max-w-xs",children:O.name}),t.jsx("span",{className:"text-xs text-gray-300",children:XD(O.file_type,O.name)})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[Tf(O.file_type,O.name)&&t.jsxs("div",{className:"flex items-center gap-1 mr-4 bg-black/40 rounded-lg p-1",children:[t.jsx("button",{onClick:Qt,className:"p-2 text-white hover:bg-white/10 rounded transition-colors",title:"Zoom Out",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})})}),t.jsxs("button",{onClick:yt,className:"px-3 py-2 text-xs text-white hover:bg-white/10 rounded transition-colors",title:"Reset Zoom",children:[te,"%"]}),t.jsx("button",{onClick:q,className:"p-2 text-white hover:bg-white/10 rounded transition-colors",title:"Zoom In",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})]}),t.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm flex items-center gap-1.5 transition-colors",download:!0,children:[t.jsx(nn,{className:"w-4 h-4 mr-2"}),"Download"]}),t.jsx("button",{onClick:Ve,className:"ml-2 p-2 text-white hover:bg-white/10 rounded-lg transition-colors",title:"Close preview",children:t.jsx(ls,{className:"w-6 h-6"})})]})]}),Tf(O.file_type,O.name)?t.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-hidden cursor-move",onWheel:Ae,onMouseDown:gt,children:t.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:t.jsx("img",{ref:le,id:"preview-image",src:O.url,alt:O.name,className:"max-w-full max-h-[80vh] object-contain rounded-lg shadow-2xl transition-transform duration-200 ease-out",style:{transform:"scale(1)",position:"relative",left:"0px",top:"0px",cursor:"default"},onError:ee=>{console.error("Failed to load image:",O.url),ee.target.onerror=null,ee.target.src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300"><rect width="400" height="300" fill="%23222222"/><text x="200" y="150" text-anchor="middle" font-family="Arial" font-size="16" fill="%23ffffff">Image not found</text><text x="200" y="170" text-anchor="middle" font-family="Arial" font-size="12" fill="%23999999">URL: '+O.url+"</text></svg>",ee.target.className="max-w-md mx-auto bg-gray-800 rounded-lg p-8"}})})}):t.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:t.jsxs("div",{className:"text-center max-w-md bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20",children:[t.jsx("div",{className:"text-gray-300 mb-6",children:O.file_type?.includes("pdf")||O.name?.endsWith(".pdf")?t.jsx(Kt,{className:"w-24 h-24 mx-auto"}):O.file_type?.includes("image/")?t.jsx(io,{className:"w-24 h-24 mx-auto"}):t.jsx(Kt,{className:"w-24 h-24 mx-auto"})}),t.jsx("h3",{className:"text-xl font-medium text-white mb-3",children:XD(O.file_type,O.name)}),t.jsx("p",{className:"text-gray-300 mb-6",children:"This file cannot be previewed in browser."}),t.jsxs("div",{className:"flex gap-3 justify-center",children:[t.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",download:!0,children:[t.jsx(nn,{className:"w-5 h-5 mr-2"}),"Download"]}),t.jsx("button",{onClick:Ve,className:"inline-flex items-center justify-center px-5 py-2.5 border border-white/30 text-white hover:bg-white/10 rounded-lg transition-colors",children:"Close"})]})]})}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 p-4 flex justify-between items-center text-white/60 text-sm",children:[t.jsx("div",{className:"flex items-center gap-2",children:Tf(O.file_type,O.name)&&t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})}),t.jsxs("span",{children:[te,"%"]}),t.jsx("span",{className:"text-xs ml-4",children:"Drag to pan when zoomed"})]})}),t.jsxs("div",{children:[t.jsx("span",{className:"hidden sm:inline",children:"Press "}),t.jsx("kbd",{className:"px-2 py-1 bg-black/40 rounded text-xs mx-1",children:"ESC"}),t.jsx("span",{className:"hidden sm:inline",children:" to close"})]})]}),t.jsx("div",{className:"absolute inset-0 -z-10 cursor-pointer",onClick:Ve})]})})]})}const JD="/backend/franchise_permit",ZD={pending:{label:"Pending",color:"bg-amber-100 text-amber-800",icon:jr},approved:{label:"Approved",color:"bg-green-100 text-green-800",icon:Us},rejected:{label:"Rejected",color:"bg-red-100 text-red-800",icon:Ka},under_review:{label:"Under Review",color:"bg-blue-100 text-blue-800",icon:ws},document_verification:{label:"Document Verification",color:"bg-purple-100 text-purple-800",icon:Kt},field_inspection_scheduled:{label:"Field Inspection",color:"bg-cyan-100 text-cyan-800",icon:Ec},payment_verification:{label:"Payment Verification",color:"bg-yellow-100 text-yellow-800",icon:Ks},for_manager_approval:{label:"For Manager Approval",color:"bg-indigo-100 text-indigo-800",icon:U6},ready_for_release:{label:"Ready for Release",color:"bg-emerald-100 text-emerald-800",icon:Us}},e6=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},t6=a=>a?{pending:"Pending",approved:"Approved",rejected:"Rejected",under_review:"Under Review",document_verification:"Document Verification",field_inspection_scheduled:"Field Inspection",payment_verification:"Payment Verification",for_manager_approval:"For Manager Approval",ready_for_release:"Ready for Release"}[a.toLowerCase()]||a:"Pending";function Wde(){const[a,e]=C.useState([]),[s,r]=C.useState(!0),[n,i]=C.useState(null),[o,l]=C.useState(null),[c,u]=C.useState(""),[m,A]=C.useState(""),[g,p]=C.useState("all"),[v,b]=C.useState("latest"),[y,w]=C.useState("all"),B=C.useMemo(()=>{const P=a.length,Y=a.filter(ne=>(ne.status||"").toLowerCase()==="approved").length,Q=a.filter(ne=>!ne.status||(ne.status||"").toLowerCase()==="pending").length,L=a.filter(ne=>(ne.status||"").toLowerCase()==="rejected").length,ae=P-Y-Q-L;return{total:P,approved:Y,pending:Q,rejected:L,inProcess:ae}},[a]),j=async()=>{try{r(!0),i(null);const P=await fetch(`${JD}/admin_fetch.php`);if(!P.ok)throw new Error(`Server error: ${P.status}`);const Y=await P.json();if(Y.success&&Array.isArray(Y.data)){const Q=Y.data.map(L=>({...L,full_name:`${L.first_name||""} ${L.middle_initial?L.middle_initial+".":""} ${L.last_name||""}`.trim()||"N/A",display_status:t6(L.status)}));e(Q)}else throw new Error(Y.message||"Failed to fetch applications")}catch(P){console.error("Error loading franchise applications:",P),i(P.message)}finally{r(!1)}};C.useEffect(()=>{j()},[]);const E=C.useMemo(()=>{let P=[...a];if(g!=="all"&&(P=P.filter(Y=>(Y.status||"pending").toLowerCase()===g)),y!=="all"&&(P=P.filter(Y=>(Y.permit_subtype||"").toLowerCase()===y.toLowerCase())),m.trim()){const Y=m.toLowerCase();P=P.filter(Q=>(Q.full_name||"").toLowerCase().includes(Y)||(Q.plate_number||"").toLowerCase().includes(Y)||(Q.toda_name||"").toLowerCase().includes(Y)||(Q.application_id||"").toString().includes(Y)||(Q.route_zone||"").toLowerCase().includes(Y))}return v==="latest"?P.sort((Y,Q)=>new Date(Q.created_at||0)-new Date(Y.created_at||0)):v==="oldest"?P.sort((Y,Q)=>new Date(Y.created_at||0)-new Date(Q.created_at||0)):v==="name_asc"&&P.sort((Y,Q)=>(Y.full_name||"").localeCompare(Q.full_name||"")),P},[a,g,m,v,y]),S=async(P,Y,Q="")=>{try{const ae=await(await fetch(`${JD}/update_status.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({application_id:P,status:Y.toLowerCase().replace(/\s+/g,"_"),remarks:Q,updated_by:"Admin"})})).json();ae.success?(dt.fire({icon:"success",title:"Updated!",text:`Application ${Y.toLowerCase()} successfully.`,confirmButtonColor:"#4CAF50",timer:2e3}),await j(),o&&o.application_id===P&&l(ne=>({...ne,status:Y.toLowerCase().replace(/\s+/g,"_"),display_status:t6(Y.toLowerCase().replace(/\s+/g,"_")),remarks:ae.data?.remarks||ne.remarks}))):dt.fire({icon:"error",title:"Error",text:ae.message||"Failed to update status",confirmButtonColor:"#E53935"})}catch(L){dt.fire({icon:"error",title:"Error",text:"Error updating status: "+L.message,confirmButtonColor:"#E53935"})}},T=async P=>{if(!o)return;const Y=o.application_id||o.id,Q=await dt.fire({title:`${P} this application?`,html:`<div class="text-left text-sm">
        <p><strong>ID:</strong> ${Y}</p>
        <p><strong>Applicant:</strong> ${o.full_name}</p>
        <p><strong>Vehicle:</strong> ${o.plate_number||"N/A"}</p>
      </div>`,icon:P==="Rejected"?"warning":"question",input:"textarea",inputLabel:P==="Rejected"?"Reason for rejection (required)":"Add notes (optional)",inputPlaceholder:"Enter notes...",inputValue:c,inputValidator:P==="Rejected"?L=>L?null:"Rejection reason is required":void 0,showCancelButton:!0,confirmButtonText:`Yes, ${P}`,confirmButtonColor:P==="Approved"?"#4CAF50":P==="Rejected"?"#E53935":"#4A90E2",cancelButtonColor:"#6b7280"});Q.isConfirmed&&(await S(Y,P,Q.value||""),u(""))},M=P=>{const Y=(P||"pending").toLowerCase().replace(/\s+/g,"_"),Q=ZD[Y]||ZD.pending;return t.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold ${Q.color}`,children:[t.jsx(Q.icon,{className:"w-3 h-3"}),Q.label]})},D=[{key:"all",label:"All"},{key:"franchise",label:"Franchise"},{key:"mtop",label:"MTOP"}];return t.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-lg min-h-screen font-[Montserrat,Arial,sans-serif]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(hp,{className:"w-7 h-7 text-[#4A90E2]"}),"Franchise Permit Processing"]}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Review and process franchise/MTOP permit applications"})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[{label:"Total",value:B.total,bg:"bg-blue-50 dark:bg-blue-900/20",text:"text-blue-700 dark:text-blue-300"},{label:"Pending",value:B.pending,bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-700 dark:text-amber-300"},{label:"Approved",value:B.approved,bg:"bg-green-50 dark:bg-green-900/20",text:"text-green-700 dark:text-green-300"},{label:"Rejected",value:B.rejected,bg:"bg-red-50 dark:bg-red-900/20",text:"text-red-700 dark:text-red-300"},{label:"In Process",value:B.inProcess,bg:"bg-indigo-50 dark:bg-indigo-900/20",text:"text-indigo-700 dark:text-indigo-300"}].map(P=>t.jsxs("div",{className:`${P.bg} rounded-xl p-4`,children:[t.jsx("p",{className:`text-xs font-medium ${P.text} opacity-80`,children:P.label}),t.jsx("p",{className:`text-2xl font-bold ${P.text}`,children:P.value})]},P.label))}),t.jsx("div",{className:"flex gap-1 mb-4 border-b border-gray-200 dark:border-slate-700",children:D.map(P=>t.jsx("button",{onClick:()=>w(P.key),className:`px-4 py-2.5 text-sm font-medium border-b-2 transition ${y===P.key?"border-[#4CAF50] text-[#4CAF50]":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:P.label},P.key))}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by name, plate, TODA, route...",value:m,onChange:P=>A(P.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 dark:border-slate-700 rounded-xl text-sm bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-[#4A90E2] focus:outline-none"})]}),t.jsxs("select",{value:g,onChange:P=>p(P.target.value),className:"px-4 py-2.5 border border-gray-200 dark:border-slate-700 rounded-xl text-sm bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-[#4A90E2] focus:outline-none",children:[t.jsx("option",{value:"all",children:"All Statuses"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"approved",children:"Approved"}),t.jsx("option",{value:"rejected",children:"Rejected"}),t.jsx("option",{value:"under_review",children:"Under Review"}),t.jsx("option",{value:"document_verification",children:"Document Verification"}),t.jsx("option",{value:"payment_verification",children:"Payment Verification"})]}),t.jsxs("select",{value:v,onChange:P=>b(P.target.value),className:"px-4 py-2.5 border border-gray-200 dark:border-slate-700 rounded-xl text-sm bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-[#4A90E2] focus:outline-none",children:[t.jsx("option",{value:"latest",children:"Latest First"}),t.jsx("option",{value:"oldest",children:"Oldest First"}),t.jsx("option",{value:"name_asc",children:"Name A-Z"})]}),t.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2.5 bg-[#4A90E2] text-white rounded-xl text-sm font-medium hover:bg-[#3a7bc8] transition",children:[t.jsx(Ya,{className:"w-4 h-4"})," Refresh"]})]}),s?t.jsxs("div",{className:"flex items-center justify-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-[#4A90E2] border-t-transparent rounded-full"}),t.jsx("span",{className:"ml-3 text-gray-500",children:"Loading applications..."})]}):n?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ks,{className:"w-12 h-12 text-red-400 mx-auto mb-3"}),t.jsx("p",{className:"text-red-600 font-medium",children:n}),t.jsx("button",{onClick:j,className:"mt-3 text-sm text-[#4A90E2] hover:underline",children:"Try again"})]}):E.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Kt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500",children:"No applications found"})]}):t.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200 dark:border-slate-700",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800",children:t.jsx("tr",{children:["ID","Applicant","Vehicle / Plate","TODA / Route","Type","Status","Date","Action"].map(P=>t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:P},P))})}),t.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:E.map(P=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition",children:[t.jsxs("td",{className:"px-4 py-3 text-sm font-mono text-gray-900 dark:text-white",children:["#",P.application_id||P.id]}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:P.full_name}),t.jsx("p",{className:"text-xs text-gray-500",children:P.contact_number||""})]}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[P.make_brand||""," ",P.model||""]}),t.jsx("p",{className:"text-xs text-gray-500 font-mono",children:P.plate_number||"N/A"})]}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:P.toda_name||"N/A"}),t.jsx("p",{className:"text-xs text-gray-500",children:P.route_zone||""})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:"text-xs font-medium px-2 py-0.5 rounded bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300",children:[P.permit_type||"NEW"," / ",P.permit_subtype||"FRANCHISE"]})}),t.jsx("td",{className:"px-4 py-3",children:M(P.status)}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:e6(P.created_at)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("button",{onClick:()=>{l(P),u("")},className:"inline-flex items-center gap-1 px-3 py-1.5 bg-[#4A90E2] text-white text-xs font-medium rounded-lg hover:bg-[#3a7bc8] transition",children:[t.jsx(ws,{className:"w-3 h-3"})," Review"]})})]},P.application_id||P.id))})]})}),o&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[t.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(hp,{className:"w-5 h-5 text-[#4A90E2]"}),"Application #",o.application_id||o.id]}),t.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-red-500 text-xl font-bold",children:""})]}),t.jsxs("div",{className:"p-6 space-y-5",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Current Status:"}),M(o.status)]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[t.jsx(gr,{className:"w-4 h-4"})," Applicant Information"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Name:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.full_name})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Email:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Contact:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.contact_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Address:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.home_address||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Operator Type:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.operator_type||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Citizenship:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.citizenship||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[t.jsx(Ad,{className:"w-4 h-4"})," Vehicle Information"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Make/Brand:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.make_brand||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Model:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.model||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Plate Number:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white font-mono",children:o.plate_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Color:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.color||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Year Acquired:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.year_acquired||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Vehicle Type:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.vehicle_type||"Tricycle"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Engine No:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.engine_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Chassis No:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.chassis_number||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[t.jsx(Ec,{className:"w-4 h-4"})," Route & Franchise Details"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"TODA Name:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.toda_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Route/Zone:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.route_zone||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Barangay:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.barangay_of_operation||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"District:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.district||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Permit Type:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.permit_type||"NEW"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Subtype:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.permit_subtype||"FRANCHISE"})]})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[t.jsx(Kt,{className:"w-4 h-4"})," LTO & Registration"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"LTO OR No:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.lto_or_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"LTO CR No:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.lto_cr_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"MV File No:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.mv_file_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"LTO Expiry:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e6(o.lto_expiration_date)})]})]})]}),o.remarks&&t.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-xl p-4 border border-amber-200 dark:border-amber-700",children:[t.jsx("h3",{className:"text-sm font-semibold text-amber-800 dark:text-amber-300 mb-2",children:"Previous Remarks"}),t.jsx("pre",{className:"text-xs text-amber-700 dark:text-amber-400 whitespace-pre-wrap font-sans",children:o.remarks})]}),t.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Admin Notes / Remarks"}),t.jsx("textarea",{value:c,onChange:P=>u(P.target.value),rows:3,className:"w-full border border-gray-200 dark:border-slate-700 rounded-xl p-3 text-sm bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-[#4A90E2] focus:outline-none",placeholder:"Add processing remarks..."})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[t.jsxs("button",{onClick:()=>T("Approved"),className:"flex items-center gap-2 px-5 py-2.5 bg-[#4CAF50] text-white rounded-xl text-sm font-semibold hover:bg-green-700 transition",children:[t.jsx(Us,{className:"w-4 h-4"})," Approve"]}),t.jsxs("button",{onClick:()=>T("Rejected"),className:"flex items-center gap-2 px-5 py-2.5 bg-[#E53935] text-white rounded-xl text-sm font-semibold hover:bg-red-700 transition",children:[t.jsx(Ka,{className:"w-4 h-4"})," Reject"]}),t.jsxs("button",{onClick:()=>T("Under Review"),className:"flex items-center gap-2 px-5 py-2.5 bg-[#3B82F6] text-white rounded-xl text-sm font-semibold hover:bg-blue-700 transition",children:[t.jsx(ws,{className:"w-4 h-4"})," Under Review"]}),t.jsxs("button",{onClick:()=>T("Pending"),className:"flex items-center gap-2 px-5 py-2.5 bg-[#FDA811] text-white rounded-xl text-sm font-semibold hover:bg-amber-600 transition",children:[t.jsx(jr,{className:"w-4 h-4"})," Set Pending"]}),t.jsx("button",{onClick:()=>l(null),className:"ml-auto px-5 py-2.5 border border-gray-300 dark:border-slate-600 text-gray-600 dark:text-gray-300 rounded-xl text-sm font-medium hover:bg-gray-100 dark:hover:bg-slate-800 transition",children:"Close"})]})]})]})})]})}Eu.register(Gp,Wp,Hp,Up,Qp,Fu,$p,qp,zp,Vp);const Iy="/backend/barangay_permit",ix=[{value:"For personal identification",label:"Personal Identification",icon:gr,color:"#4CAF50"},{value:"For residency verification",label:"Residency Verification",icon:rn,color:"#4A90E2"},{value:"For school requirement",label:"School Requirement",icon:Kt,color:"#FDA811"},{value:"For scholarship application",label:"Scholarship Application",color:"#9C27B0",icon:Kt},{value:"For government assistance",label:"Government Assistance",color:"#2196F3",icon:Pf},{value:"For medical assistance application",label:"Medical Assistance",color:"#F44336",icon:gr},{value:"For financial assistance or aid",label:"Financial Assistance",color:"#FF9800",icon:Kt},{value:"For barangay ID application",label:"Barangay ID",color:"#795548",icon:gr},{value:"For court requirement / affidavit / legal matter",label:"Court Requirement",color:"#607D8B",icon:Ij},{value:"For police clearance / NBI clearance requirement",label:"Police/NBI Clearance",color:"#3F51B5",icon:Pr},{value:"For local employment",label:"Local Employment",color:"#4CAF50",icon:Ba},{value:"For job application (private company)",label:"Private Job Application",color:"#4A90E2",icon:Ba},{value:"For government employment",label:"Government Employment",color:"#FDA811",icon:Pf},{value:"For on-the-job training (OJT)",label:"OJT",color:"#9C27B0",icon:Ba},{value:"For job order / contractual employment",label:"Job Order",color:"#2196F3",icon:Ba},{value:"For agency employment requirement",label:"Agency Employment",color:"#F44336",icon:Ba},{value:"For renewal of work contract",label:"Contract Renewal",color:"#FF9800",icon:Ba},{value:"For employment abroad (POEA / OFW)",label:"Overseas Employment",color:"#795548",icon:cB},{value:"For new business permit application",label:"New Business Permit",color:"#4CAF50",icon:Ur},{value:"For renewal of business permit",label:"Business Renewal",color:"#4A90E2",icon:Ur},{value:"For DTI / SEC business registration",label:"DTI/SEC Registration",color:"#FDA811",icon:Pf},{value:"For business tax application",label:"Business Tax",color:"#9C27B0",icon:Kt},{value:"For stall rental or space lease",label:"Stall Rental",color:"#2196F3",icon:Ur},{value:"For business name registration",label:"Business Name",color:"#F44336",icon:Kt},{value:"For operation of new establishment",label:"New Establishment",color:"#FF9800",icon:Ur},{value:"For business closure / cancellation",label:"Business Closure",color:"#795548",icon:Ur},{value:"For relocation / change of business address",label:"Business Relocation",color:"#607D8B",icon:Ur},{value:"For proof of residency",label:"Proof of Residency",color:"#4CAF50",icon:rn},{value:"For transfer of residence",label:"Transfer Residence",color:"#4A90E2",icon:rn},{value:"For lot / land ownership verification",label:"Land Ownership",color:"#FDA811",icon:rn},{value:"For construction permit requirement",label:"Construction Permit",color:"#9C27B0",icon:Ur},{value:"For fencing / excavation / building permit application",label:"Fencing/Building Permit",color:"#2196F3",icon:PQ},{value:"For utility connection",label:"Utility Connection",color:"#F44336",icon:rn},{value:"For barangay boundary certification",label:"Boundary Certification",color:"#FF9800",icon:Pr},{value:"For marriage license application",label:"Marriage License",color:"#4CAF50",icon:Kt},{value:"For travel / local mobility clearance",label:"Travel Clearance",color:"#4A90E2",icon:cB},{value:"For firearm license application",label:"Firearm License",color:"#FDA811",icon:Pr},{value:"For barangay mediation / complaint settlement record",label:"Mediation Record",color:"#9C27B0",icon:Ij},{value:"For notarization requirement",label:"Notarization",color:"#2196F3",icon:Kt},{value:"For business closure or transfer",label:"Business Transfer",color:"#F44336",icon:Ur},{value:"For franchise or transport operation permit",label:"Franchise Permit",color:"#FF9800",icon:Ba},{value:"For cooperative registration",label:"Cooperative Registration",color:"#795548",icon:Pf},{value:"For loan application",label:"Loan Application",color:"#607D8B",icon:Kt},{value:"For SSS / Pag-IBIG / PhilHealth registration",label:"Gov't Benefits",color:"#3F51B5",icon:Pf}],s6=[{value:"personal",label:"Personal Purposes",icon:gr},{value:"employment",label:"Employment-Related",icon:Ba},{value:"business",label:"Business-Related",icon:Ur},{value:"residency",label:"Residency/Property",icon:rn},{value:"official",label:"Official/Legal",icon:Ij}],xh=(a,e)=>a&&a.startsWith("image/")?!0:e?[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"].some(r=>e.toLowerCase().endsWith(r)):!1,Yde=(a,e)=>!!(a&&a==="application/pdf"||e&&e.toLowerCase().endsWith(".pdf")),_j=(a,e)=>{if(a){if(a==="application/pdf")return"PDF Document";if(a.startsWith("image/"))return`${a.split("/")[1].toUpperCase()} Image`;if(a.startsWith("application/")){if(a.includes("word"))return"Word Document";if(a.includes("excel"))return"Excel Spreadsheet";if(a.includes("zip"))return"ZIP Archive";if(a.includes("rar"))return"RAR Archive"}if(a.startsWith("text/"))return a.includes("csv")?"CSV File":"Text File"}if(e)switch(e.split(".").pop().toLowerCase()){case"pdf":return"PDF Document";case"jpg":case"jpeg":return"JPEG Image";case"png":return"PNG Image";case"gif":return"GIF Image";case"bmp":return"BMP Image";case"webp":return"WebP Image";case"doc":case"docx":return"Word Document";case"txt":return"Text File";case"csv":return"CSV File";case"xls":case"xlsx":return"Excel Spreadsheet";case"zip":return"ZIP Archive";case"rar":return"RAR Archive";default:return"File"}return"File"};function Kde(){const[a,e]=C.useState([]),[s,r]=C.useState([]),[n,i]=C.useState(!0),[o,l]=C.useState(null),[c,u]=C.useState([null,null]),[m,A]=c,[g,p]=C.useState(""),[v,b]=C.useState("all"),[y,w]=C.useState("all"),[B,j]=C.useState("all"),[E,S]=C.useState(!1),[T,M]=C.useState(""),[D,P]=C.useState(!1),[Y,Q]=C.useState(null),[L,ae]=C.useState(""),[ne,V]=C.useState(1),[O,X]=C.useState(!1),[$,H]=C.useState(null),[te,K]=C.useState(!1),[I,R]=C.useState(100),[G,se]=C.useState(!1),le=C.useRef(null),ye=C.useRef(!1),De=C.useRef({x:0,y:0}),me=C.useRef({x:0,y:0}),Te=15,we=async()=>{try{i(!0),l(null);const ee=await fetch(`${Iy}/admin_fetch.php`);if(!ee.ok)throw new Error(`HTTP error! status: ${ee.status}`);const Ie=await ee.json();if(Ie.success&&Ie.data)e(Ie.data);else throw new Error(Ie.message||"Failed to fetch permits")}catch(ee){l(ee.message),console.error("Error fetching permits:",ee)}finally{i(!1)}},st=async ee=>{try{const Ie=await fetch(`${Iy}/fetch_single.php?permit_id=${ee}`);if(!Ie.ok)throw new Error(`HTTP error! status: ${Ie.status}`);const ue=await Ie.json();if(ue.success&&ue.data)return ue.data;throw new Error(ue.message||"Failed to fetch permit details")}catch(Ie){return console.error("Error fetching single permit:",Ie),null}},ce=ee=>{if(!ee)return[];try{let Ie;if(typeof ee=="object"&&ee!==null)Ie=ee;else if(typeof ee=="string"&&ee.trim()!=="")Ie=JSON.parse(ee);else return console.warn("Invalid attachments format:",ee),[];const ue=[];return Object.entries(Ie).forEach(([fe,xe])=>{if(xe&&typeof xe=="string"&&xe.trim()!==""){const Me=xe.split("/").pop();ue.push({id:fe,name:Me,type:tt(Me),url:`${Iy}/uploads/${Me}`})}else if(xe&&typeof xe=="object"){const Me=xe.name||xe.filename||fe;Me&&Me.trim()!==""&&ue.push({id:fe,name:Me,type:tt(Me),url:`${Iy}/uploads/${Me}`})}}),ue}catch(Ie){return console.error("Error parsing attachments:",Ie,"Data:",ee),[]}},tt=ee=>{if(!ee||typeof ee!="string")return"application/octet-stream";switch(ee.split(".").pop().toLowerCase()){case"pdf":return"application/pdf";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"webp":return"image/webp";case"doc":return"application/msword";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"txt":return"text/plain";case"csv":return"text/csv";case"xls":case"xlsx":return"application/vnd.ms-excel";case"zip":return"application/zip";case"rar":return"application/x-rar-compressed";default:return"application/octet-stream"}},Ae=ee=>{if(!ee)return"For Compliance";switch(ee.toLowerCase()){case"approved":return"Approved";case"rejected":return"Rejected";case"pending":return"For Compliance";default:return"For Compliance"}},gt=C.useCallback(()=>{if(le.current){const ee=le.current.style.transform||"scale(1)",Ie=parseFloat(ee.match(/scale\(([^)]+)\)/)?.[1]||1);R(Math.round(Ie*100))}},[]);C.useEffect(()=>{const ee=Ie=>{Ie.key==="Escape"&&te&&oe()};return window.addEventListener("keydown",ee),()=>{window.removeEventListener("keydown",ee)}},[te]),C.useEffect(()=>{$&&le.current&&(le.current.style.transform="scale(1)",le.current.style.left="0px",le.current.style.top="0px",le.current.style.cursor="default",R(100),me.current={x:0,y:0})},[$]);const q=C.useCallback(ee=>{if(!(!le.current||!xh($?.file_type,$?.name))&&(ee.preventDefault(),ee.stopPropagation(),ee.deltaY!==0)){const Ie=le.current.style.transform||"scale(1)",ue=parseFloat(Ie.match(/scale\(([^)]+)\)/)?.[1]||1),fe=ee.deltaY>0?-.1:.1,xe=Math.max(.5,Math.min(ue+fe,5));le.current.style.transform=`scale(${xe})`,le.current.style.cursor=xe>1?"grab":"default",gt()}},[$,gt]),Qt=C.useCallback(ee=>{if(!le.current||!xh($?.file_type,$?.name))return;const Ie=le.current.style.transform||"scale(1)";if(parseFloat(Ie.match(/scale\(([^)]+)\)/)?.[1]||1)>1){ee.preventDefault(),ye.current=!0,De.current={x:ee.clientX,y:ee.clientY},le.current.style.cursor="grabbing";const fe=Me=>{if(!ye.current||!le.current)return;const ct=Me.clientX-De.current.x,Pt=Me.clientY-De.current.y,ts=me.current.x+ct,as=me.current.y+Pt;le.current.style.left=`${ts}px`,le.current.style.top=`${as}px`},xe=()=>{le.current&&(ye.current=!1,le.current.style.cursor="grab",le.current.style.left&&le.current.style.top&&(me.current.x=parseFloat(le.current.style.left),me.current.y=parseFloat(le.current.style.top)),document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",xe))};document.addEventListener("mousemove",fe),document.addEventListener("mouseup",xe)}},[$]),yt=C.useCallback(()=>{if(!le.current)return;const ee=le.current.style.transform||"scale(1)",Ie=parseFloat(ee.match(/scale\(([^)]+)\)/)?.[1]||1),ue=Math.min(Ie+.25,5);le.current.style.transform=`scale(${ue})`,le.current.style.cursor=ue>1?"grab":"default",gt()},[gt]),Oe=C.useCallback(()=>{if(!le.current)return;const ee=le.current.style.transform||"scale(1)",Ie=parseFloat(ee.match(/scale\(([^)]+)\)/)?.[1]||1),ue=Math.max(Ie-.25,.5);le.current.style.transform=`scale(${ue})`,le.current.style.cursor=ue>1?"grab":"default",gt()},[gt]),ze=C.useCallback(()=>{le.current&&(le.current.style.transform="scale(1)",le.current.style.left="0px",le.current.style.top="0px",le.current.style.cursor="default",R(100),me.current={x:0,y:0})},[]),Le=ee=>{console.log("Viewing file:",ee);let Ie=ee.url;Ie&&!Ie.startsWith("http")&&(Ie=`${Ie.startsWith("/")?"":"/"}${Ie}`);const ue={...ee,url:Ie,file_type:ee.type||tt(ee.name)};H(ue),K(!0)},oe=()=>{H(null),K(!1),R(100),ye.current=!1,De.current={x:0,y:0},me.current={x:0,y:0}},he=C.useMemo(()=>{const ee=a.length,Ie=a.filter(as=>as.status?.toLowerCase()==="approved").length,ue=a.filter(as=>as.status?.toLowerCase()==="rejected").length,fe=a.filter(as=>as.status?.toLowerCase()==="pending"||!as.status).length,xe=ix.map(as=>{const Zt=a.filter(Nt=>Nt.purpose?.toLowerCase()===as.value.toLowerCase()).length,Be=a.filter(Nt=>Nt.purpose?.toLowerCase()===as.value.toLowerCase()&&Nt.status?.toLowerCase()==="approved").length,mt=Zt>0?(Be/Zt*100).toFixed(1):0;return{...as,count:Zt,approvedCount:Be,approvalRate:mt}}).filter(as=>as.count>0).sort((as,Zt)=>Zt.count-as.count),Me=xe[0]||{label:"N/A",count:0},ct=ee>0?(Ie/ee*100).toFixed(1):0,Pt=Math.floor(ee*.8),ts=ee>0?((ee-Pt)/Pt*100).toFixed(1):0;return{total:ee,approved:Ie,rejected:ue,pending:fe,purposeStats:xe,topPurpose:Me,approvalRate:ct,trend:ts,completionRate:ee>0?((Ie+ue)/ee*100).toFixed(1):0}},[a]),W=C.useMemo(()=>he.purposeStats.slice(0,6),[he.purposeStats]),ve=C.useMemo(()=>({labels:W.map(ee=>ee.label),counts:W.map(ee=>ee.count),colors:W.map(ee=>ee.color)}),[W]),Qe=C.useMemo(()=>{const ee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ie=new Date().getMonth(),ue=new Date().getFullYear(),fe=ee.slice(Math.max(0,Ie-5),Ie+1),xe=W.slice(0,3),Me={};xe.forEach(Pt=>{Me[Pt.value]=Array(fe.length).fill(0)}),a.forEach(Pt=>{if(!Pt.application_date)return;const ts=new Date(Pt.application_date),as=ts.getMonth();if(ts.getFullYear()===ue&&as<=Ie&&as>=Ie-5){const Be=as-(Ie-5);if(Be>=0){const mt=Pt.purpose||"",Nt=xe.find(Ne=>Ne.value===mt);Nt&&Me[Nt.value]&&Me[Nt.value][Be]++}}});const ct=["#4CAF50","#FDA811","#4A90E2"];return{labels:fe,datasets:xe.map((Pt,ts)=>({label:Pt.label,data:Me[Pt.value]||Array(fe.length).fill(0),borderColor:ct[ts],backgroundColor:ct[ts]+"20",fill:!0,tension:.4}))}},[a,W]),Ze=ee=>{switch((ee||"").toLowerCase()){case"approved":return{text:"Approved",color:"text-[#4CAF50]",icon:Us};case"rejected":return{text:"Rejected",color:"text-[#E53935]",icon:Ka};case"pending":return{text:"For Compliance",color:"text-[#FDA811]",icon:jr};case"for compliance":return{text:"For Compliance",color:"text-[#FDA811]",icon:Ks};default:return{text:"For Compliance",color:"text-[#4D4A4A]",icon:Ks}}},J=C.useCallback(ee=>ix.find(ue=>ue.value.toLowerCase()===ee?.toLowerCase())?.icon||Kt,[a,W]),He=C.useMemo(()=>{const ee=[],Ie=new Date;for(let ue=7;ue>=0;ue--){const fe=new Date(Ie);fe.setDate(Ie.getDate()-ue*7),fe.setHours(0,0,0,0);const xe=new Date(fe);xe.setDate(fe.getDate()+6),xe.setHours(23,59,59,999);const Me=`Week ${8-ue}`,ct=a.filter(Pt=>{const ts=new Date(Pt.application_date);return ts>=fe&&ts<=xe}).length;ee.push({label:Me,count:ct,weekStart:fe,weekEnd:xe})}return{labels:ee.map(ue=>ue.label),datasets:[{label:"Total Applications",data:ee.map(ue=>ue.count),borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.1)",fill:!0,tension:.4,borderWidth:3,pointBackgroundColor:"#4CAF50",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:5,pointHoverRadius:7}],rawData:ee}},[a]),xt=C.useMemo(()=>{const ee=[],Ie=new Date,ue=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let fe=11;fe>=0;fe--){const xe=new Date(Ie.getFullYear(),Ie.getMonth()-fe,1),Me=new Date(xe.getFullYear(),xe.getMonth(),1),ct=new Date(xe.getFullYear(),xe.getMonth()+1,0,23,59,59,999),Pt=`${ue[xe.getMonth()]} ${xe.getFullYear().toString().slice(-2)}`,ts=a.filter(as=>{const Zt=new Date(as.application_date);return Zt>=Me&&Zt<=ct}).length;ee.push({label:Pt,count:ts,monthStart:Me,monthEnd:ct})}return{labels:ee.map(fe=>fe.label),datasets:[{label:"Total Applications",data:ee.map(fe=>fe.count),borderColor:"#4A90E2",backgroundColor:"rgba(74, 144, 226, 0.1)",fill:!0,tension:.4,borderWidth:3,pointBackgroundColor:"#4A90E2",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:5,pointHoverRadius:7}],rawData:ee}},[a]),Xe=C.useMemo(()=>({labels:["Approved","For Compliance","Rejected"],datasets:[{data:[he.approved||0,he.pending||0,he.rejected||0],backgroundColor:["#4CAF50","#FDA811","#E53935"],hoverBackgroundColor:["#45a049","#fc9d0b","#d32f2f"],borderColor:"#ffffff",borderWidth:3}]}),[he]);C.useEffect(()=>{let ee=[...a];const Ie=g.toLowerCase();if(m&&A&&(ee=ee.filter(ue=>{if(!ue.application_date)return!1;const fe=new Date(ue.application_date);return fe>=m&&fe<=A})),g&&(ee=ee.filter(ue=>ue.first_name?.toLowerCase().includes(Ie)||ue.last_name?.toLowerCase().includes(Ie)||ue.middle_name?.toLowerCase().includes(Ie)||ue.purpose?.toLowerCase().includes(Ie)||ue.barangay?.toLowerCase().includes(Ie)||`BP-${String(ue.permit_id).padStart(4,"0")}`.toLowerCase().includes(Ie))),v!=="all"&&(ee=ee.filter(ue=>Ae(ue.status).toLowerCase()===v.toLowerCase())),y!=="all"&&(ee=ee.filter(ue=>ue.purpose?.toLowerCase()===y.toLowerCase())),B!=="all"){const fe={personal:["personal identification","residency verification","school requirement","scholarship","government assistance","medical assistance","financial assistance","barangay id","court","police clearance","nbi"],employment:["employment","job","ojt","contract","agency","overseas","ofw","poea"],business:["business","dti","sec","tax","stall","establishment","closure"],residency:["residency","residence","land","lot","construction","fencing","excavation","utility","boundary"],official:["marriage","travel","firearm","mediation","notarization","franchise","cooperative","loan","sss","pag-ibig","philhealth"]}[B]||[];ee=ee.filter(xe=>{const Me=xe.purpose?.toLowerCase()||"";return fe.some(ct=>Me.includes(ct))})}r(ee),V(1)},[a,m,A,g,v,y,B]),C.useEffect(()=>{we()},[]);const Ct=C.useCallback(()=>{S(!0),M("csv");const Ie=[["Permit ID","Applicant Name","Purpose","Category","Barangay","Status","Application Date","Clearance Fee","Contact Number","Email","Address","Valid ID Type","Valid ID Number"].join(","),...a.map(Me=>{const ct=ix.find(ts=>ts.value===Me.purpose),Pt=ct&&s6.find(ts=>ct.label.includes(ts.label.split("-")[0]))?.label||"Other";return[`BP-${String(Me.permit_id).padStart(4,"0")}`,`${Me.first_name} ${Me.middle_name||""} ${Me.last_name} ${Me.suffix||""}`.trim(),Me.purpose||"N/A",Pt,Me.barangay||"N/A",Ae(Me.status),Me.application_date?new Date(Me.application_date).toLocaleDateString():"N/A",Me.clearance_fee||"0.00",Me.mobile_number||"N/A",Me.email||"N/A",Me.address||"N/A",Me.valid_id_type||"N/A",Me.valid_id_number||"N/A"].map(ts=>`"${ts||""}"`).join(",")})].join(`
`),ue=new Blob([Ie],{type:"text/csv"}),fe=window.URL.createObjectURL(ue),xe=document.createElement("a");xe.href=fe,xe.download=`barangay-permits-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),window.URL.revokeObjectURL(fe),S(!1),M("")},[a]),_e=async()=>{S(!0),M("pdf");try{dt.fire({title:"Generating PDF...",text:"Please wait while we create your report",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{dt.showLoading()}}),await new Promise(Zt=>setTimeout(Zt,500));const ee=document.createElement("div");ee.style.cssText="position: absolute; left: -9999px; width: 1200px; background: #FBFBFB; padding: 30px; font-family: Arial, sans-serif;",ee.innerHTML=`
        <div style="margin-bottom: 30px;">
          <h1 style="color: #4D4A4A; font-size: 28px; margin: 0 0 10px 0;">Barangay Clearance Analytics</h1>
          <p style="color: #666; margin: 0;">Generated on ${new Date().toLocaleDateString()}</p>
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 30px;">
          ${[{title:"Total Applications",value:he.total,color:"#4CAF50"},{title:"Approved",value:he.approved,color:"#4CAF50"},{title:"Pending",value:he.pending,color:"#FDA811"},{title:"Rejected",value:he.rejected,color:"#E53935"}].map(Zt=>`
            <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 20px; background: white;">
              <p style="color: #666; font-size: 12px; margin: 0 0 10px 0;">${Zt.title}</p>
              <p style="color: ${Zt.color}; font-size: 32px; font-weight: bold; margin: 0;">${Zt.value}</p>
            </div>
          `).join("")}
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Applications by Status</h2>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
            ${[{label:"Approved",value:he.approved||0,color:"#4CAF50"},{label:"For Compliance",value:he.pending||0,color:"#FDA811"},{label:"Rejected",value:he.rejected||0,color:"#E53935"}].map(Zt=>`
              <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 15px; background: white; border-left: 5px solid ${Zt.color};">
                <p style="color: #4D4A4A; font-size: 14px; margin: 0 0 8px 0;">${Zt.label}</p>
                <p style="color: #4D4A4A; font-size: 24px; font-weight: bold; margin: 0;">${Zt.value}</p>
              </div>
            `).join("")}
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Top Permit Purposes</h2>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            ${W.slice(0,6).map((Zt,Be)=>{const mt=he.total>0?(Zt.count/he.total*100).toFixed(1):0;return`
                <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 12px; background: white; border-left: 5px solid ${Zt.color};">
                  <p style="color: #4D4A4A; font-size: 12px; margin: 0 0 5px 0; font-weight: 500;">${Zt.label}</p>
                  <p style="color: #4D4A4A; font-size: 20px; font-weight: bold; margin: 0;">${Zt.count}</p>
                  <p style="color: #666; font-size: 11px; margin: 3px 0 0 0;">${mt}% of total</p>
                </div>
              `}).join("")}
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Weekly Applications Trend (Last 8 Weeks)</h2>
          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
            ${He.rawData.map((Zt,Be)=>`
                <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 12px; background: white; text-align: center; border-left: 5px solid #4CAF50;">
                  <p style="color: #666; font-size: 11px; margin: 0 0 5px 0;">${Zt.label}</p>
                  <p style="color: #4CAF50; font-size: 24px; font-weight: bold; margin: 0;">${Zt.count}</p>
                  <p style="color: #666; font-size: 10px; margin: 3px 0 0 0;">${new Date(Zt.weekStart).toLocaleDateString()} - ${new Date(Zt.weekEnd).toLocaleDateString()}</p>
                </div>
              `).join("")}
          </div>
        </div>
        
        <div style="margin-bottom: 30px;">
          <h2 style="color: #4D4A4A; font-size: 20px; margin: 0 0 15px 0;">Monthly Applications Trend (Last 12 Months)</h2>
          <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 8px;">
            ${xt.rawData.map((Zt,Be)=>`
                <div style="border: 2px solid #E9E7E7; border-radius: 8px; padding: 10px; background: white; text-align: center; border-left: 5px solid #4A90E2;">
                  <p style="color: #666; font-size: 10px; margin: 0 0 5px 0;">${Zt.label}</p>
                  <p style="color: #4A90E2; font-size: 20px; font-weight: bold; margin: 0;">${Zt.count}</p>
                </div>
              `).join("")}
          </div>
        </div>
      `,document.body.appendChild(ee),await new Promise(Zt=>setTimeout(Zt,100));const Ie=await Tu(ee,{scale:2,backgroundColor:"#FBFBFB",logging:!1});document.body.removeChild(ee);const ue=Ie.toDataURL("image/png"),fe=new Es({orientation:"portrait",unit:"mm",format:"a4"}),xe=fe.internal.pageSize.getWidth(),Me=fe.internal.pageSize.getHeight(),ct=xe-20,Pt=Ie.height*ct/Ie.width;let ts=Pt,as=10;for(fe.addImage(ue,"PNG",10,as,ct,Pt),ts-=Me;ts>0;)as=ts-Pt+10,fe.addPage(),fe.addImage(ue,"PNG",10,as,ct,Pt),ts-=Me;fe.save(`barangay-clearance-analytics-${new Date().toISOString().split("T")[0]}.pdf`),dt.fire({icon:"success",title:"PDF Downloaded!",text:"Your report has been downloaded successfully.",timer:2e3,showConfirmButton:!1})}catch(ee){console.error("Error generating PDF:",ee),dt.fire({title:"Export Failed",text:ee.message||"Failed to generate PDF. Please try again.",icon:"error"})}finally{S(!1),M("")}},Se=Math.ceil(s.length/Te),Ve=(ne-1)*Te,et=Ve+Te,vt=s.slice(Ve,et),Mt=async ee=>{try{const Ie=await st(ee.permit_id);Q(Ie||ee),ae(""),P(!0)}catch(Ie){console.error("Error opening modal:",Ie),Q(ee),ae(""),P(!0)}},Ye=()=>{Q(null),ae(""),P(!1),se(!1)},Et=()=>{se(ee=>!ee)},Gt=ee=>{if(!ee||typeof ee!="string")return[];try{const ue=ee.trim().split(/---\s+/),fe=[];for(let xe=1;xe<ue.length;xe++){const Me=ue[xe].trim();if(!Me)continue;const ct=Me.indexOf(` ---
`);if(ct!==-1){const Pt=Me.substring(0,ct).trim(),ts=Me.substring(ct+5).trim();ts&&fe.push({timestamp:Pt,comment:ts})}else fe.push({timestamp:"No timestamp",comment:Me})}return fe.reverse()}catch(Ie){return console.error("Error formatting comments:",Ie),[{timestamp:"Error parsing",comment:ee}]}};return n?t.jsx("div",{className:"min-h-screen bg-[#FBFBFB] p-6 flex items-center justify-center font-poppins",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#4CAF50] mx-auto"}),t.jsx("p",{className:"mt-4 text-[#4D4A4A]",children:"Loading permit analytics..."})]})}):t.jsxs("div",{className:"min-h-screen bg-[#FBFBFB] p-4 md:p-6 font-poppins",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-[#4D4A4A] font-montserrat",children:"Barangay Permit Analytics"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 mt-2",children:"Track and analyze permit applications by purpose and status"})]}),t.jsxs("div",{className:"flex items-center space-x-3 mt-4 md:mt-0",children:[t.jsx("button",{onClick:we,className:"p-2 rounded-lg bg-white border border-[#E9E7E7] hover:bg-gray-50 transition-colors",title:"Refresh Data",children:t.jsx(Ya,{className:"w-5 h-5 text-[#4D4A4A]"})}),t.jsxs("button",{onClick:Ct,disabled:E&&T==="csv",className:"px-4 py-2 bg-white border border-[#E9E7E7] text-[#4D4A4A] rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2 disabled:opacity-50 font-montserrat",children:[t.jsx(Kt,{className:"w-5 h-5"}),t.jsx("span",{children:E&&T==="csv"?"Exporting...":"Export CSV"})]}),t.jsxs("button",{onClick:_e,disabled:E&&T==="pdf",className:"px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-opacity-90 transition-colors flex items-center space-x-2 disabled:opacity-50 font-montserrat",children:[t.jsx(nn,{className:"w-5 h-5"}),t.jsx("span",{children:E&&T==="pdf"?"Generating...":"Export PDF"})]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[{title:"Total Applications",value:he.total,icon:Kt,color:"#4CAF50",trend:`${he.trend}%`,trendUp:he.trend>0,description:"All permit purposes"},{title:"Approval Rate",value:`${he.approvalRate}%`,icon:dl,color:"#4A90E2",trend:he.approvalRate>0?"+5.2%":"0%",trendUp:he.approvalRate>0,description:"Overall approval"},{title:"Top Purpose",value:he.topPurpose.label,icon:he.topPurpose.icon||Kt,color:he.topPurpose.color||"#4CAF50",trend:`${he.topPurpose.count} applications`,trendUp:!0,description:"Most requested"},{title:"Pending Review",value:he.pending,icon:jr,color:"#FDA811",trend:`${he.pending} pending`,trendUp:he.pending>0,description:"For compliance"}].map((ee,Ie)=>t.jsx("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] transition-all hover:shadow",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:ee.title}),t.jsx("p",{className:"text-2xl font-bold text-[#4D4A4A] mt-2 font-montserrat",children:ee.value}),t.jsxs("div",{className:"mt-2",children:[t.jsxs("div",{className:"flex items-center",children:[ee.trendUp?t.jsx(dl,{className:"w-4 h-4 text-[#4CAF50] mr-1"}):t.jsx(d0,{className:"w-4 h-4 text-[#E53935] mr-1"}),t.jsx("span",{className:`text-sm ${ee.trendUp?"text-[#4CAF50]":"text-[#E53935]"}`,children:ee.trend})]}),t.jsx("span",{className:"text-xs text-[#4D4A4A] text-opacity-60",children:ee.description})]})]}),t.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:ee.color},children:t.jsx(ee.icon,{className:"w-6 h-6 text-white"})})]})},Ie))})]}),t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-[#E9E7E7]",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#4D4A4A] text-opacity-50 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search applicants, purposes, or barangays...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",value:g,onChange:ee=>p(ee.target.value)})]})}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx(B0,{selectsRange:!0,startDate:m,endDate:A,onChange:ee=>u(ee),className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins w-full md:w-auto",placeholderText:"Select date range"}),t.jsx(bn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-[#4D4A4A] text-opacity-50 w-5 h-5 pointer-events-none"})]}),t.jsxs("select",{value:v,onChange:ee=>b(ee.target.value),className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"approved",children:"Approved"}),t.jsx("option",{value:"for compliance",children:"For Compliance"}),t.jsx("option",{value:"rejected",children:"Rejected"})]}),t.jsxs("select",{value:B,onChange:ee=>j(ee.target.value),className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Categories"}),s6.map(ee=>t.jsx("option",{value:ee.value,children:ee.label},ee.value))]}),t.jsxs("select",{value:y,onChange:ee=>w(ee.target.value),className:"px-4 py-2 rounded-lg border border-[#E9E7E7] bg-white text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Purposes"}),ix.map(ee=>t.jsx("option",{value:ee.value.toLowerCase(),children:ee.label},ee.value))]})]})]})})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Monthly Trends by Purpose"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Applications for top permit purposes"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:Qe.datasets.map((ee,Ie)=>t.jsxs("span",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ee.borderColor}}),t.jsx("span",{className:"text-sm text-[#4D4A4A] ml-2",children:ee.label})]},Ie))})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(Wi,{data:Qe,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1}},scales:{x:{grid:{color:"rgba(233, 231, 231, 0.5)"},ticks:{color:"#4D4A4A",font:{family:"Poppins"}}},y:{grid:{color:"rgba(233, 231, 231, 0.5)"},ticks:{color:"#4D4A4A",font:{family:"Poppins"}}}}}})})]}),t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Status Distribution"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Current application status"})]}),t.jsx("div",{className:"h-[250px] flex items-center justify-center",children:t.jsx(Cu,{data:{labels:["Approved","For Compliance","Rejected"],datasets:[{data:[he.approved,he.pending,he.rejected],backgroundColor:["rgba(76, 175, 80, 0.8)","rgba(253, 168, 17, 0.8)","rgba(229, 57, 53, 0.8)"],borderColor:"#FBFBFB",borderWidth:2}]},options:{maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"bottom",labels:{color:"#4D4A4A",padding:20,usePointStyle:!0,font:{family:"Poppins"}}}}}})}),t.jsx("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[{label:"Approved",value:he.approved},{label:"For Compliance",value:he.pending},{label:"Rejected",value:he.rejected}].map((ee,Ie)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#FBFBFB] rounded-lg border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${ee.label==="Approved"?"bg-[#4CAF50]":ee.label==="For Compliance"?"bg-[#FDA811]":"bg-[#E53935]"} mr-3`}),t.jsx("span",{className:"text-sm text-[#4D4A4A] font-poppins",children:ee.label})]}),t.jsx("span",{className:"font-semibold text-[#4D4A4A] font-montserrat",children:ee.value})]},Ie))})]})]}),t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Applications by Purpose"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Distribution across different permit purposes"})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("span",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:["Showing top ",W.length," purposes"]})})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(vc,{data:{labels:ve.labels,datasets:[{label:"Applications",data:ve.counts,backgroundColor:ve.colors,borderRadius:6,borderWidth:1,borderColor:"#E9E7E7"}]},options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})}),t.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:W.map((ee,Ie)=>{const ue=ee.icon;return t.jsxs("div",{className:"p-3 rounded-lg border border-[#E9E7E7] hover:shadow transition-all",style:{borderLeftColor:ee.color,borderLeftWidth:"4px"},children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(ue,{className:"w-5 h-5 mr-2",style:{color:ee.color}}),t.jsx("span",{className:"text-sm font-medium text-[#4D4A4A] font-poppins truncate",children:ee.label})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-lg font-bold text-[#4D4A4A] font-montserrat",children:ee.count}),t.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-[#FBFBFB] text-[#4D4A4A]",children:[ee.approvalRate,"% approved"]})]})]},Ie)})})]}),a.length>0&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Status Distribution"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Applications by approval status"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-1 h-[250px] flex items-center justify-center",children:t.jsx(Cu,{data:Xe,options:{maintainAspectRatio:!1,cutout:"65%",plugins:{legend:{position:"bottom",labels:{color:"#4D4A4A",padding:15,usePointStyle:!0,font:{family:"Poppins"}}}}}})}),t.jsx("div",{className:"lg:col-span-2 flex flex-col justify-center space-y-3",children:[{label:"Approved",value:he.approved||0,color:"#4CAF50"},{label:"For Compliance",value:he.pending||0,color:"#FDA811"},{label:"Rejected",value:he.rejected||0,color:"#E53935"}].map((ee,Ie)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#FBFBFB] rounded-lg border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 rounded-full mr-3",style:{backgroundColor:ee.color}}),t.jsx("span",{className:"text-sm text-[#4D4A4A] font-poppins",children:ee.label})]}),t.jsx("span",{className:"font-semibold text-[#4D4A4A] font-montserrat",children:ee.value})]},Ie))})]})]}),a.length>0&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Weekly Applications Trend"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Total applications submitted in the last 8 weeks"})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(Wi,{data:He,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!0,position:"top",labels:{color:"#4D4A4A",font:{family:"Poppins"}}},tooltip:{callbacks:{title:ee=>{const Ie=He.rawData[ee[0].dataIndex],ue=new Date(Ie.weekStart).toLocaleDateString(),fe=new Date(Ie.weekEnd).toLocaleDateString();return`${Ie.label}: ${ue} - ${fe}`}}}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"},stepSize:1},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})}),t.jsx("div",{className:"mt-4 grid grid-cols-4 md:grid-cols-8 gap-2",children:He.rawData.map((ee,Ie)=>t.jsxs("div",{className:"text-center p-2 bg-[#FBFBFB] rounded border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins",children:ee.label}),t.jsx("p",{className:"text-lg font-bold text-[#4CAF50] font-montserrat",children:ee.count})]},Ie))})]}),a.length>0&&t.jsxs("div",{className:"mb-6 bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Monthly Applications Trend"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:"Total applications submitted over the last 12 months"})]}),t.jsx("div",{className:"h-[300px]",children:t.jsx(Wi,{data:xt,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!0,position:"top",labels:{color:"#4D4A4A",font:{family:"Poppins"}}}},scales:{x:{ticks:{color:"#4D4A4A",font:{family:"Poppins"}},grid:{color:"rgba(233, 231, 231, 0.5)"}},y:{ticks:{color:"#4D4A4A",font:{family:"Poppins"},stepSize:1},grid:{color:"rgba(233, 231, 231, 0.5)"},beginAtZero:!0}}}})}),t.jsx("div",{className:"mt-4 grid grid-cols-6 md:grid-cols-12 gap-2",children:xt.rawData.map((ee,Ie)=>t.jsxs("div",{className:"text-center p-2 bg-[#FBFBFB] rounded border border-[#E9E7E7]",children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-70 font-poppins",children:ee.label}),t.jsx("p",{className:"text-lg font-bold text-[#4A90E2] font-montserrat",children:ee.count})]},Ie))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-[#E9E7E7] overflow-hidden",children:[t.jsx("div",{className:"p-5 border-b border-[#E9E7E7]",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Permit Applications"}),t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70",children:["Showing ",Ve+1,"-",Math.min(et,s.length)," of ",s.length," applications"]})]}),t.jsx("div",{className:"flex items-center space-x-3",children:t.jsxs("button",{onClick:()=>window.print(),className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors flex items-center font-poppins",title:"Print Report",children:[t.jsx(rA,{className:"w-4 h-4 mr-2"}),"Print"]})})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-[#FBFBFB]",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Permit ID"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Applicant"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Purpose"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Barangay"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Date"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-[#E9E7E7]",children:vt.map((ee,Ie)=>{const ue=Ze(Ae(ee.status)),fe=ue.icon,xe=J(ee.purpose),Me=ix.find(ct=>ct.value.toLowerCase()===ee.purpose?.toLowerCase());return t.jsxs("tr",{className:"hover:bg-[#FBFBFB] transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"font-mono text-sm text-[#4D4A4A] font-medium",children:["BP-",String(ee.permit_id).padStart(4,"0")]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium text-[#4D4A4A] font-montserrat",children:[ee.first_name," ",ee.last_name]}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:ee.email||ee.mobile_number||"No contact"})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(xe,{className:"w-5 h-5 mr-3",style:{color:Me?.color||"#4D4A4A"}}),t.jsx("span",{className:"text-[#4D4A4A] font-poppins truncate max-w-[200px]",children:ee.purpose||"N/A"})]})}),t.jsx("td",{className:"px-6 py-4 text-[#4D4A4A] font-poppins",children:ee.barangay||"N/A"}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:ee.application_date?new Date(ee.application_date).toLocaleDateString():"N/A"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(fe,{className:`w-4 h-4 mr-2 ${ue.color}`}),t.jsx("span",{className:`text-sm font-medium ${ue.color} font-poppins`,children:ue.text})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-center space-x-3",children:t.jsx("button",{onClick:()=>Mt(ee),title:"View Details",className:"p-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#FDA811]/80 transition-colors",children:t.jsx(ws,{className:"w-5 h-5"})})})})]},Ie)})})]})}),s.length===0&&!n&&t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(Kt,{className:"w-12 h-12 text-[#E9E7E7] mx-auto mb-4"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70",children:"No permits match your filters"}),t.jsx("button",{onClick:()=>{p(""),b("all"),w("all"),j("all"),u([null,null])},className:"mt-4 text-[#4CAF50] hover:underline font-poppins",children:"Clear all filters"})]}),s.length>Te&&t.jsx("div",{className:"p-5 border-t border-[#E9E7E7]",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:["Page ",ne," of ",Se]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>V(ee=>Math.max(ee-1,1)),disabled:ne===1,className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-poppins",children:"Previous"}),t.jsx("button",{onClick:()=>V(ee=>Math.min(ee+1,Se)),disabled:ne===Se,className:"px-3 py-2 text-sm border border-[#E9E7E7] rounded-lg hover:bg-[#FBFBFB] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-poppins",children:"Next"})]})]})})]}),o&&t.jsx("div",{className:"mt-6 p-4 bg-[#E53935] bg-opacity-20 border border-[#E53935] border-opacity-30 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ks,{className:"w-5 h-5 text-[#E53935] mr-3"}),t.jsx("p",{className:"text-[#4D4A4A] font-poppins",children:o}),t.jsx("button",{onClick:()=>l(null),className:"ml-auto text-sm text-[#4CAF50] hover:underline",children:"Dismiss"})]})}),D&&Y&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-md p-4 overflow-auto animate-fadeIn",children:t.jsxs("div",{className:"w-full max-w-7xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl transform transition-all",children:[t.jsxs("div",{className:"relative p-6 bg-gradient-to-r from-gray-50 via-white to-gray-50 dark:from-slate-800 dark:via-slate-700 dark:to-slate-800 border-b-4 border-green-400",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-400 to-green-500 p-3 rounded-2xl shadow-xl",children:t.jsx(Pr,{className:"w-10 h-10 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Barangay Permit"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Barangay Clearance Application Details"})]})]}),t.jsx("button",{onClick:Ye,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-all",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-blue-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Permit ID"}),t.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white font-mono",children:["BP-",String(Y.permit_id).padStart(4,"0")]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-purple-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Date Applied"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:Y.application_date?new Date(Y.application_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-green-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Status"}),t.jsx("span",{className:`inline-block px-3 py-1 text-sm font-bold rounded-full ${Ae(Y.status)==="Approved"?"text-[#4CAF50] bg-[#4CAF50]/10":Ae(Y.status)==="Rejected"?"text-[#E53935] bg-[#E53935]/10":"text-[#FDA811] bg-[#FDA811]/10"}`,children:Ae(Y.status)})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-orange-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Purpose"}),t.jsx("p",{className:"text-sm font-bold text-gray-800 dark:text-white truncate",title:Y.purpose||"N/A",children:Y.purpose||"N/A"})]})]})]}),t.jsxs("div",{className:"p-8 space-y-8 max-h-[80vh] overflow-y-auto bg-gradient-to-b from-gray-50 to-white dark:from-slate-900 dark:to-slate-800",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-blue-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:t.jsx(gr,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Personal Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white mt-1",children:[Y.first_name," ",Y.middle_name," ",Y.last_name," ",Y.suffix]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Mobile Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:Y.mobile_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email Address"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:Y.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Birth Date"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:Y.birthdate?new Date(Y.birthdate).toLocaleDateString():"N/A"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-green-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-3 rounded-xl shadow-lg",children:t.jsx(Ec,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Address Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"House No."}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:Y.house_no||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Street"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:Y.street||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Barangay"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:Y.barangay||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"City/Municipality"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:Y.city_municipality||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-orange-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Permit Details"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Purpose"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:Y.purpose||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Application Date"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:Y.application_date?new Date(Y.application_date).toLocaleDateString():"N/A"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-purple-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-3 rounded-xl shadow-lg",children:t.jsx(AQ,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Payment Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Clearance Fee"}),t.jsxs("p",{className:"text-xl font-bold text-[#4CAF50] mt-1",children:["",Y.clearance_fee||"0.00"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Receipt Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:Y.receipt_number||"N/A"})]})]})]}),ce(Y.attachments).length>0?t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-indigo-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Submitted Documents"}),t.jsxs("span",{className:"ml-2 bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-sm font-bold",children:[ce(Y.attachments).length," files"]})]}),t.jsxs("button",{onClick:Et,className:"flex items-center gap-2 text-sm text-[#4CAF50] hover:text-[#FDA811] transition-colors",children:[t.jsxs("span",{children:[G?"Hide":"View"," Documents"]}),t.jsx(pA,{className:`w-4 h-4 transition-transform ${G?"rotate-90":""}`})]})]}),G&&t.jsx("div",{className:"mt-4",children:ce(Y.attachments).length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ce(Y.attachments).map(ee=>t.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-slate-600 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-3 rounded-lg ${xh(ee.type,ee.name)?"bg-green-100 dark:bg-green-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:xh(ee.type,ee.name)?t.jsx(io,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):t.jsx(Kt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:ee.id.replace(/_/g," ").replace(/\b\w/g,Ie=>Ie.toUpperCase())}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:ee.name}),t.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:_j(ee.type,ee.name)})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>Le(ee),className:"p-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#FDA811] transition-colors",title:"View document",children:t.jsx(ws,{className:"w-4 h-4"})}),t.jsx("a",{href:ee.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#4A90E2]/80 transition-colors",title:"Download document",download:!0,children:t.jsx(nn,{className:"w-4 h-4"})})]})]},ee.id))}):t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600",children:[t.jsx(Kt,{className:"w-12 h-12 text-gray-300 dark:text-gray-500 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No documents submitted for this application."})]})})]}):t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-gray-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-gray-400 to-gray-500 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Submitted Documents"})]}),t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-xl",children:[t.jsx(Kt,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No files uploaded for this application."})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-yellow-100 dark:border-slate-700",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Review Comments",Y.comments&&t.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",Gt(Y.comments).length," comment",Gt(Y.comments).length!==1?"s":"",")"]})]}),t.jsx("div",{className:"space-y-4 mb-6",children:Y.comments&&Y.comments.trim()?t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600 overflow-hidden",children:[t.jsx("div",{className:"max-h-64 overflow-y-auto p-4",children:Gt(Y.comments).map((ee,Ie)=>t.jsxs("div",{className:`mb-4 ${Ie!==0?"pt-4 border-t border-gray-200 dark:border-slate-600":""}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[t.jsx(gr,{className:"w-4 h-4 mr-2"}),"Admin Comment"]}),t.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[t.jsx(jr,{className:"w-3 h-3 mr-1"}),ee.timestamp]})]}),t.jsx("div",{className:"pl-6",children:t.jsx("p",{className:"text-gray-900 dark:text-white bg-white dark:bg-slate-800 p-3 rounded border border-gray-100 dark:border-slate-500",children:ee.comment})})]},Ie))}),t.jsx("div",{className:"px-4 py-3 bg-gray-100 dark:bg-slate-800 border-t border-gray-200 dark:border-slate-600",children:t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: ",Gt(Y.comments).length," comment",Gt(Y.comments).length!==1?"s":""]})})]}):t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600",children:[t.jsx(c0,{className:"w-12 h-12 text-gray-300 dark:text-gray-500 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No comments yet. Add your first comment below."})]})})]}),t.jsx("div",{className:"flex justify-end pt-8 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-6 border-t-4 border-gray-300 dark:border-slate-600",children:t.jsxs("button",{onClick:Ye,className:"px-8 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2",children:[t.jsx(ls,{className:"w-5 h-5"}),"Close"]})})]})]})}),te&&$&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-0",children:t.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[t.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 p-4 flex justify-between items-center bg-gradient-to-b from-black/70 to-transparent",children:[t.jsx("div",{className:"flex items-center gap-3 text-white",children:t.jsxs("div",{className:"flex items-center gap-2",children:[xh($.file_type,$.name)?t.jsx(io,{className:"w-5 h-5"}):t.jsx(Kt,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm font-medium truncate max-w-xs",children:$.name}),t.jsx("span",{className:"text-xs text-gray-300",children:_j($.file_type,$.name)})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[xh($.file_type,$.name)&&t.jsxs("div",{className:"flex items-center gap-1 mr-4 bg-black/40 rounded-lg p-1",children:[t.jsx("button",{onClick:Oe,className:"p-2 text-white hover:bg-white/10 rounded transition-colors",title:"Zoom Out",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})})}),t.jsxs("button",{onClick:ze,className:"px-3 py-2 text-xs text-white hover:bg-white/10 rounded transition-colors",title:"Reset Zoom",children:[I,"%"]}),t.jsx("button",{onClick:yt,className:"p-2 text-white hover:bg-white/10 rounded transition-colors",title:"Zoom In",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})]}),t.jsxs("a",{href:$.url,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm flex items-center gap-1.5 transition-colors",download:!0,children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]}),t.jsx("button",{onClick:oe,className:"ml-2 p-2 text-white hover:bg-white/10 rounded-lg transition-colors",title:"Close preview",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),xh($.file_type,$.name)?t.jsx("div",{className:"flex-1 flex items-center justify-center p-4 pt-20 pb-16 overflow-hidden cursor-move",onWheel:q,onMouseDown:Qt,children:t.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:t.jsx("img",{ref:le,id:"preview-image",src:$.url,alt:$.name,crossOrigin:"anonymous",className:"max-w-full max-h-[80vh] object-contain rounded-lg shadow-2xl transition-transform duration-200 ease-out",style:{transform:`scale(${I/100})`,position:"relative",left:"0px",top:"0px",cursor:I>100?"move":"default"},onLoad:()=>console.log("Image loaded successfully:",$.url),onError:ee=>{console.error("Failed to load image:",$.url),ee.target.onerror=null,ee.target.src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300"><rect width="400" height="300" fill="%23222222"/><text x="200" y="140" text-anchor="middle" font-family="Arial" font-size="16" fill="%23ffffff">Image failed to load</text><text x="200" y="170" text-anchor="middle" font-family="Arial" font-size="11" fill="%23999999">Check browser console for URL</text></svg>',ee.target.className="max-w-md mx-auto bg-gray-800 rounded-lg p-8"}})})}):Yde($.file_type,$.name)?t.jsx("div",{className:"flex-1 flex items-center justify-center p-4 pt-20 pb-16",children:t.jsx("iframe",{src:$.url,title:$.name,className:"w-full h-full rounded-lg border-0",style:{minHeight:"70vh"}})}):t.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:t.jsxs("div",{className:"text-center max-w-md bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20",children:[t.jsx("div",{className:"text-gray-300 mb-6",children:t.jsx(Kt,{className:"w-24 h-24 mx-auto"})}),t.jsx("h3",{className:"text-xl font-medium text-white mb-3",children:_j($.file_type,$.name)}),t.jsx("p",{className:"text-gray-300 mb-6",children:"This file cannot be previewed in browser."}),t.jsxs("div",{className:"flex gap-3 justify-center",children:[t.jsxs("a",{href:$.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",download:!0,children:[t.jsx(nn,{className:"w-5 h-5 mr-2"}),"Download"]}),t.jsx("button",{onClick:oe,className:"inline-flex items-center justify-center px-5 py-2.5 border border-white/30 text-white hover:bg-white/10 rounded-lg transition-colors",children:"Close"})]})]})}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 p-4 flex justify-between items-center text-white/60 text-sm",children:[t.jsx("div",{className:"flex items-center gap-2",children:xh($.file_type,$.name)&&t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})}),t.jsxs("span",{children:[I,"%"]}),t.jsx("span",{className:"text-xs ml-4",children:"Drag to pan when zoomed"})]})}),t.jsxs("div",{children:[t.jsx("span",{className:"hidden sm:inline",children:"Press "}),t.jsx("kbd",{className:"px-2 py-1 bg-black/40 rounded text-xs mx-1",children:"ESC"}),t.jsx("span",{className:"hidden sm:inline",children:" to close"})]})]}),t.jsx("div",{className:"absolute inset-0 -z-10 cursor-pointer",onClick:oe})]})})]})}const Fm="/backend/barangay_permit",ox=(a,e)=>a?a.startsWith("image/"):e?[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"].some(r=>e.toLowerCase().endsWith(r)):!1,r6=(a,e)=>{if(a){if(a==="application/pdf")return"PDF Document";if(a.startsWith("image/"))return`${a.split("/")[1].toUpperCase()} Image`;if(a.startsWith("application/")){if(a.includes("word"))return"Word Document";if(a.includes("excel"))return"Excel Spreadsheet";if(a.includes("zip"))return"ZIP Archive";if(a.includes("rar"))return"RAR Archive"}if(a.startsWith("text/"))return a.includes("csv")?"CSV File":"Text File"}if(e)switch(e.split(".").pop().toLowerCase()){case"pdf":return"PDF Document";case"jpg":case"jpeg":return"JPEG Image";case"png":return"PNG Image";case"gif":return"GIF Image";case"bmp":return"BMP Image";case"webp":return"WebP Image";case"doc":case"docx":return"Word Document";case"txt":return"Text File";case"csv":return"CSV File";case"xls":case"xlsx":return"Excel Spreadsheet";case"zip":return"ZIP Archive";case"rar":return"RAR Archive";default:return"File"}return"File"};function Xde(){const[a,e]=C.useState(null),[s,r]=C.useState(!1),[n,i]=C.useState([]),[o,l]=C.useState(""),[c,u]=C.useState(!0),[m,A]=C.useState(null),[g,p]=C.useState(null),[v,b]=C.useState(!1),[y,w]=C.useState("all"),[B,j]=C.useState(!1),[E,S]=C.useState(""),[T,M]=C.useState("latest"),[D,P]=C.useState(""),[Y,Q]=C.useState(!1),[L,ae]=C.useState({}),[ne,V]=C.useState(100),O=C.useRef(null),X=C.useRef(!1),$=C.useRef({x:0,y:0}),H=C.useRef({x:0,y:0}),te=C.useCallback(()=>{if(O.current){const _e=O.current.style.transform||"scale(1)",Se=parseFloat(_e.match(/scale\(([^)]+)\)/)?.[1]||1);V(Math.round(Se*100))}},[]);C.useEffect(()=>{const _e=Se=>{Se.key==="Escape"&&v&&Ze()};return window.addEventListener("keydown",_e),()=>{window.removeEventListener("keydown",_e)}},[v]),C.useEffect(()=>{g&&O.current&&(O.current.style.transform="scale(1)",O.current.style.left="0px",O.current.style.top="0px",O.current.style.cursor="default",V(100),H.current={x:0,y:0})},[g]);const K=C.useCallback(_e=>{if(!(!O.current||!ox(g?.file_type,g?.name))&&(_e.preventDefault(),_e.stopPropagation(),_e.deltaY!==0)){const Se=O.current.style.transform||"scale(1)",Ve=parseFloat(Se.match(/scale\(([^)]+)\)/)?.[1]||1),et=_e.deltaY>0?-.1:.1,vt=Math.max(.5,Math.min(Ve+et,5));O.current.style.transform=`scale(${vt})`,O.current.style.cursor=vt>1?"grab":"default",te()}},[g,te]),I=C.useCallback(_e=>{if(!O.current||!ox(g?.file_type,g?.name))return;const Se=O.current.style.transform||"scale(1)";if(parseFloat(Se.match(/scale\(([^)]+)\)/)?.[1]||1)>1){_e.preventDefault(),X.current=!0,$.current={x:_e.clientX,y:_e.clientY},O.current.style.cursor="grabbing";const et=Mt=>{if(!X.current||!O.current)return;const Ye=Mt.clientX-$.current.x,Et=Mt.clientY-$.current.y,Gt=H.current.x+Ye,ee=H.current.y+Et;O.current.style.left=`${Gt}px`,O.current.style.top=`${ee}px`},vt=()=>{O.current&&(X.current=!1,O.current.style.cursor="grab",O.current.style.left&&O.current.style.top&&(H.current.x=parseFloat(O.current.style.left),H.current.y=parseFloat(O.current.style.top)),document.removeEventListener("mousemove",et),document.removeEventListener("mouseup",vt))};document.addEventListener("mousemove",et),document.addEventListener("mouseup",vt)}},[g]),R=C.useCallback(()=>{if(!O.current)return;const _e=O.current.style.transform||"scale(1)",Se=parseFloat(_e.match(/scale\(([^)]+)\)/)?.[1]||1),Ve=Math.min(Se+.25,5);O.current.style.transform=`scale(${Ve})`,O.current.style.cursor=Ve>1?"grab":"default",te()},[te]),G=C.useCallback(()=>{if(!O.current)return;const _e=O.current.style.transform||"scale(1)",Se=parseFloat(_e.match(/scale\(([^)]+)\)/)?.[1]||1),Ve=Math.max(Se-.25,.5);O.current.style.transform=`scale(${Ve})`,O.current.style.cursor=Ve>1?"grab":"default",te()},[te]),se=C.useCallback(()=>{O.current&&(O.current.style.transform="scale(1)",O.current.style.left="0px",O.current.style.top="0px",O.current.style.cursor="default",V(100),H.current={x:0,y:0})},[]),le=(_e,Se)=>{const Ve=[..._e];switch(Se){case"latest":return Ve.sort((vt,Mt)=>new Date(Mt.application_date||Mt.created_at||0)-new Date(vt.application_date||vt.created_at||0));case"oldest":return Ve.sort((vt,Mt)=>new Date(vt.application_date||vt.created_at||0)-new Date(Mt.application_date||Mt.created_at||0));case"name_asc":return Ve.sort((vt,Mt)=>{const Ye=`${vt.first_name} ${vt.last_name}`.toLowerCase(),Et=`${Mt.first_name} ${Mt.last_name}`.toLowerCase();return Ye.localeCompare(Et)});case"name_desc":return Ve.sort((vt,Mt)=>{const Ye=`${vt.first_name} ${vt.last_name}`.toLowerCase();return`${Mt.first_name} ${Mt.last_name}`.toLowerCase().localeCompare(Ye)});case"status_priority":const et={pending:1,approved:2,rejected:3};return Ve.sort((vt,Mt)=>(et[vt.status]||4)-(et[Mt.status]||4));default:return Ve}},ye=(_e,Se)=>{if(!Se.trim())return _e;const Ve=Se.toLowerCase();return _e.filter(et=>{const vt=`${et.first_name} ${et.middle_name} ${et.last_name} ${et.suffix}`.toLowerCase(),Mt=`BP-${String(et.permit_id).padStart(4,"0")}`.toLowerCase(),Ye=(et.barangay||"").toLowerCase(),Et=(et.purpose||"").toLowerCase(),Gt=(et.email||"").toLowerCase(),ee=(et.mobile_number||"").toLowerCase();return vt.includes(Ve)||Mt.includes(Ve)||Ye.includes(Ve)||Et.includes(Ve)||Gt.includes(Ve)||ee.includes(Ve)})},De=()=>{let _e=n;return y!=="all"&&(_e=_e.filter(Se=>y==="approved"?Se.status==="approved":y==="pending"?Se.status==="pending"||!Se.status:y==="rejected"?Se.status==="rejected":!0)),_e=ye(_e,D),_e=le(_e,T),_e},me=_e=>_e?{pending:"Compliance",approved:"Approved",rejected:"Rejected",under_review:"Under Review",document_verification:"Document Verification",payment_verification:"Payment Verification",for_manager_approval:"For Manager Approval",ready_for_release:"Ready for Release"}[_e.toLowerCase()]||_e:"Compliance",Te=_e=>!_e||_e==="Compliance"?"pending":_e.toLowerCase().replace(/\s+/g,"_"),we=_e=>{if(!_e)return[];try{let Se;if(typeof _e=="object"&&_e!==null)Se=_e;else if(typeof _e=="string"&&_e.trim()!=="")Se=JSON.parse(_e);else return console.warn("Invalid attachments format:",_e),[];const Ve=[];return Object.entries(Se).forEach(([et,vt])=>{if(vt&&typeof vt=="string"&&vt.trim()!==""){const Mt=vt.split("/").pop();Ve.push({id:et,name:Mt,type:st(Mt),url:`${Fm}/uploads/${Mt}`})}else if(vt&&typeof vt=="object"){const Mt=vt.name||vt.filename||et;Mt&&Mt.trim()!==""&&Ve.push({id:et,name:Mt,type:st(Mt),url:`${Fm}/uploads/${Mt}`})}}),Ve}catch(Se){return console.error("Error parsing attachments:",Se,"Data:",_e),[]}},st=_e=>{if(!_e||typeof _e!="string")return"application/octet-stream";switch(_e.split(".").pop().toLowerCase()){case"pdf":return"application/pdf";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"webp":return"image/webp";case"doc":return"application/msword";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"txt":return"text/plain";case"csv":return"text/csv";case"xls":case"xlsx":return"application/vnd.ms-excel";case"zip":return"application/zip";case"rar":return"application/x-rar-compressed";default:return"application/octet-stream"}},ce=_e=>{switch(me(_e)){case"Approved":return"text-[#4CAF50] bg-[#4CAF50]/10";case"Rejected":return"text-[#E53935] bg-[#E53935]/10";case"Compliance":return"text-[#FDA811] bg-[#FDA811]/10";case"Under Review":return"text-[#3B82F6] bg-[#3B82F6]/10";case"Document Verification":return"text-[#8B5CF6] bg-[#8B5CF6]/10";case"Payment Verification":return"text-[#F59E0B] bg-[#F59E0B]/10";case"For Manager Approval":return"text-[#6366F1] bg-[#6366F1]/10";case"Ready for Release":return"text-[#10B981] bg-[#10B981]/10";default:return"text-gray-600 bg-gray-100"}},tt=_e=>_e===y?"bg-[#4CAF50] text-white":"bg-gray-100 text-gray-600",Ae=_e=>_e===y?"border-[#4CAF50]":"border-transparent",gt=_e=>_e===y?"text-[#4CAF50] dark:text-[#4CAF50]":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",q=async()=>{try{u(!0),A(null);const _e=await fetch(`${Fm}/admin_fetch.php`);if(!_e.ok)throw new Error(`HTTP error! status: ${_e.status}`);const Se=await _e.json();if(Se.success&&Se.data)i(Se.data);else throw new Error(Se.message||"Failed to fetch permits")}catch(_e){A(_e.message),console.error("Error fetching permits:",_e)}finally{u(!1)}},Qt=async _e=>{try{const Se=await fetch(`${Fm}/fetch_single.php?permit_id=${_e}`);if(!Se.ok)throw new Error(`HTTP error! status: ${Se.status}`);const Ve=await Se.json();if(Ve.success&&Ve.data)return Ve.data;throw new Error(Ve.message||"Failed to fetch permit details")}catch(Se){return console.error("Error fetching single permit:",Se),null}},yt=async(_e,Se,Ve="")=>{try{const et=Te(Se);let vt="";Ve.trim()&&(vt=`--- ${new Date().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})} ---
${Ve}
`);const Mt=await fetch(`${Fm}/update_status.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({permit_id:_e,status:et,comments:vt})});if(!Mt.ok){const ue=await Mt.json().catch(()=>({}));throw new Error(ue.message||"Failed to update permit status")}const Ye=await Mt.json();if(!Ye.success)throw new Error(Ye.message||"Failed to update permit status");const Et={action:Se,timestamp:new Date().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),notes:Ve||"",by:"Admin"};ae(ue=>({...ue,[_e]:[...ue[_e]||[],Et]}));const Gt=Ye.data?.status||et,ee=me(Gt),Ie=Ye.data?.comments||(Ve.trim()&&a?a.comments?a.comments+vt:vt:a?.comments);a&&e(ue=>({...ue,comments:Ie||ue.comments,status:Gt,uiStatus:ee})),await q(),l(""),alert(`Permit ${Se.toLowerCase()} successfully!`);try{tw({service:"barangay",permitId:_e,action:"update_status",status:Se,comment:Ve})}catch(ue){console.error("Error logging transaction:",ue)}}catch(et){console.error("Error updating permit status:",et),A(et.message||"Failed to update permit status"),alert("Error updating status: "+et.message)}},Oe=async()=>{if(!(!a||!o.trim()))try{const Se=new Date().toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),Ve=`--- ${Se} ---
${o}
`,et=await fetch(`${Fm}/update_status.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({permit_id:a.permit_id,comments:Ve})});if(!et.ok){const Ye=await et.json().catch(()=>({}));throw new Error(Ye.message||"Failed to save comment")}const vt=await et.json();if(!vt.success)throw new Error(vt.message||"Failed to save comment");const Mt=vt.data?.comments||(a.comments?Ve+a.comments:Ve);e({...a,comments:Mt}),i(Ye=>Ye.map(Et=>Et.permit_id===a.permit_id?{...Et,comments:Mt}:Et)),l(""),S("Comment saved successfully!"),j(!0);try{tw({service:"barangay",permitId:a.permit_id,action:"add_comment",comment:o,timestamp:Se})}catch(Ye){console.error("Error logging transaction:",Ye)}}catch(_e){console.error("Error saving comment:",_e),A(_e.message||"Failed to save comment"),alert("Error saving comment: "+_e.message)}};C.useEffect(()=>{q()},[]);const ze=async _e=>{try{const Se=await Qt(_e.permit_id);if(Se){const Ve=me(Se.status);e({...Se,uiStatus:Ve})}else{const Ve=me(_e.status);e({..._e,uiStatus:Ve})}l(""),r(!0)}catch(Se){console.error("Error opening modal:",Se);const Ve=me(_e.status);e({..._e,uiStatus:Ve}),l(""),r(!0)}},Le=()=>{e(null),l(""),p(null),b(!1),r(!1)},oe=async()=>{if(!a)return;const _e=await dt.fire({title:"Approve Permit?",html:`
        <div class="text-left">
          <p class="mb-2">You are about to approve this barangay permit application:</p>
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <p class="text-sm"><strong>Permit ID:</strong> ${a.permit_id}</p>
            <p class="text-sm"><strong>Applicant:</strong> ${a.first_name} ${a.last_name}</p>
            <p class="text-sm"><strong>Purpose:</strong> ${a.purpose||"N/A"}</p>
          </div>
          <p class="text-sm text-gray-600">This action will approve the application.</p>
        </div>
      `,icon:"question",input:"textarea",inputLabel:"Add approval notes (optional)",inputPlaceholder:"Enter any additional notes...",inputValue:o,showCancelButton:!0,confirmButtonText:"Yes, Approve",cancelButtonText:"Cancel",confirmButtonColor:"#4CAF50",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-left"}});if(_e.isConfirmed){const Se=_e.value||o;await yt(a.permit_id,"Approved",Se),l("")}},he=async()=>{if(!a)return;const _e=await dt.fire({title:"Reject Application?",html:`
        <div class="text-left">
          <p class="mb-2">You are about to reject this barangay permit application:</p>
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <p class="text-sm"><strong>Permit ID:</strong> ${a.permit_id}</p>
            <p class="text-sm"><strong>Applicant:</strong> ${a.first_name} ${a.last_name}</p>
            <p class="text-sm"><strong>Purpose:</strong> ${a.purpose||"N/A"}</p>
          </div>
          <p class="text-sm text-red-600">Please provide a reason for rejection.</p>
        </div>
      `,icon:"warning",input:"textarea",inputLabel:"Reason for rejection (required)",inputPlaceholder:"Enter the reason for rejecting this application...",inputValue:o,inputValidator:Se=>{if(!Se)return"You must provide a reason for rejection!"},showCancelButton:!0,confirmButtonText:"Yes, Reject",cancelButtonText:"Cancel",confirmButtonColor:"#E53935",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-left"}});_e.isConfirmed&&(await yt(a.permit_id,"Rejected",_e.value),l(""))},W=async()=>{if(!a)return;const _e=await dt.fire({title:"Mark for Compliance?",html:`
        <div class="text-left">
          <p class="mb-2">Mark this application for compliance review:</p>
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <p class="text-sm"><strong>Permit ID:</strong> ${a.permit_id}</p>
            <p class="text-sm"><strong>Applicant:</strong> ${a.first_name} ${a.last_name}</p>
          </div>
          <p class="text-sm text-gray-600">Please specify what compliance items are needed.</p>
        </div>
      `,icon:"info",input:"textarea",inputLabel:"Compliance notes (optional)",inputPlaceholder:"List required compliance items...",inputValue:o,showCancelButton:!0,confirmButtonText:"Mark for Compliance",cancelButtonText:"Cancel",confirmButtonColor:"#FDA811",cancelButtonColor:"#6b7280",customClass:{popup:"text-left",htmlContainer:"text-left"}});if(_e.isConfirmed){const Se=_e.value||o;await yt(a.permit_id,"Compliance",Se),l("")}},ve=async(_e,Se,Ve,et="#4CAF50")=>{if(!a)return;const vt=await dt.fire({title:Se,html:`
        <div class="text-left">
          <p class="mb-2">${Ve}</p>
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <p class="text-sm"><strong>Permit ID:</strong> BP-${String(a.permit_id).padStart(4,"0")}</p>
            <p class="text-sm"><strong>Applicant:</strong> ${a.first_name} ${a.last_name}</p>
            <p class="text-sm"><strong>Purpose:</strong> ${a.purpose||"N/A"}</p>
          </div>
          <p class="text-sm text-gray-600">Add notes about this status update (optional).</p>
        </div>
      `,icon:"question",input:"textarea",inputLabel:"Status update notes",inputPlaceholder:"Enter any relevant notes...",inputValue:o,showCancelButton:!0,confirmButtonText:"Update Status",cancelButtonText:"Cancel",confirmButtonColor:et,cancelButtonColor:"#6b7280",customClass:{popup:"text-left"},preConfirm:Mt=>Mt});vt.isConfirmed&&await yt(a.permit_id,_e,vt.value||"")},Qe=_e=>{console.log("Viewing file:",_e);let Se=_e.url;_e.url&&!_e.url.startsWith("http")&&(Se=`${Fm}/${_e.url}`);const Ve={..._e,file_type:_e.type||st(_e.name),url:Se};p(Ve),b(!0)},Ze=()=>{p(null),b(!1),V(100),X.current=!1,$.current={x:0,y:0},H.current={x:0,y:0}},J=_e=>{if(!_e||typeof _e!="string")return[];try{const Se=_e.trim();if(!Se)return[];const Ve=Se.split(/(?=---\s+.+?\s+---)/g),et=[];for(let vt of Ve){if(vt=vt.trim(),!vt)continue;const Mt=vt.match(/^---\s+(.+?)\s+---\n([\s\S]*)$/);if(Mt){const Ye=Mt[1].trim(),Et=Mt[2].trim();Et&&et.push({timestamp:Ye,comment:Et})}else et.push({timestamp:"Just now",comment:vt})}return et}catch(Se){return console.error("Error formatting comments:",Se),[{timestamp:"Recent",comment:_e}]}},He=n.length,xt=n.filter(_e=>_e.status==="approved").length,Xe=n.filter(_e=>_e.status==="rejected").length,Ct=n.filter(_e=>_e.status==="pending"||!_e.status).length;return c?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#4CAF50]"})}):t.jsxs("div",{className:"bg-white dark:bg-slate-700 p-6 rounded-lg",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Barangay Permits Dashboard"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and track all barangay permit applications"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-[#4CAF50]/10 p-4 rounded-lg border border-[#4CAF50]/20",children:[t.jsx("p",{className:"text-[#4CAF50] text-sm font-medium",children:"Total Permits"}),t.jsx("p",{className:"text-[#4CAF50] text-2xl font-bold",children:He})]}),t.jsxs("div",{className:"bg-[#4A90E2]/10 p-4 rounded-lg border border-[#4A90E2]/20",children:[t.jsx("p",{className:"text-[#4A90E2] text-sm font-medium",children:"Approved"}),t.jsx("p",{className:"text-[#4A90E2] text-2xl font-bold",children:xt})]}),t.jsxs("div",{className:"bg-[#FDA811]/10 p-4 rounded-lg border border-[#FDA811]/20",children:[t.jsx("p",{className:"text-[#FDA811] text-sm font-medium",children:"Compliance"}),t.jsx("p",{className:"text-[#FDA811] text-2xl font-bold",children:Ct})]}),t.jsxs("div",{className:"bg-[#E53935]/10 p-4 rounded-lg border border-[#E53935]/20",children:[t.jsx("p",{className:"text-[#E53935] text-sm font-medium",children:"Rejected"}),t.jsx("p",{className:"text-[#E53935] text-2xl font-bold",children:Xe})]})]}),t.jsxs("div",{className:"mb-6 bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 shadow-sm",children:[t.jsx("div",{className:"border-b border-gray-200 dark:border-slate-700 overflow-x-auto",children:t.jsx("nav",{className:"flex space-x-6 px-6 min-w-max",children:[{key:"all",label:"All Permits"},{key:"approved",label:"Approved"},{key:"pending",label:"Compliance"},{key:"rejected",label:"Rejected"}].map(_e=>t.jsxs("button",{onClick:()=>w(_e.key),className:`py-4 px-2 border-b-2 font-medium text-sm flex items-center gap-2 transition-all ${Ae(_e.key)} ${gt(_e.key)}`,children:[_e.label,t.jsxs("span",{className:`px-2 py-1 text-xs rounded-full ${tt(_e.key)}`,children:[_e.key==="all"&&He,_e.key==="approved"&&xt,_e.key==="pending"&&Ct,_e.key==="rejected"&&Xe]})]},_e.key))})}),t.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-slate-700 bg-gradient-to-r from-[#4CAF50]/5 to-[#4A90E2]/5",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[y==="all"&&"All Barangay Permits",y==="approved"&&"Approved Permits",y==="pending"&&"Compliance",y==="rejected"&&"Rejected Permits"]}),t.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:["Showing ",De().length," of ",n.length," records"]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:D,onChange:_e=>P(_e.target.value),placeholder:"Search permits...",className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent w-64"}),t.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),D&&t.jsx("button",{onClick:()=>P(""),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:""})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:T,onChange:_e=>M(_e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent appearance-none pr-10",children:[t.jsx("option",{value:"latest",children:"Latest First"}),t.jsx("option",{value:"oldest",children:"Oldest First"}),t.jsx("option",{value:"name_asc",children:"Name (A-Z)"}),t.jsx("option",{value:"name_desc",children:"Name (Z-A)"}),t.jsx("option",{value:"status_priority",children:"Status Priority"})]}),t.jsx("svg",{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("button",{onClick:q,className:"px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#4CAF50]/80 transition-colors flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})]}),D&&t.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Search results for: ",t.jsxs("span",{className:"font-semibold",children:['"',D,'"']})]}),t.jsxs("button",{onClick:()=>P(""),className:"text-sm text-[#4CAF50] hover:text-[#FDA811] flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear search"]})]})]}),t.jsxs("div",{className:"p-6",children:[m&&t.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-center",children:t.jsx("div",{className:"text-red-600 font-semibold",children:m})}),n.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No barangay permits found"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"There are currently no barangay permits in the system."}),t.jsx("button",{onClick:q,className:"px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#FDA811] transition-colors",children:"Refresh Data"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full bg-white dark:bg-slate-800 shadow rounded-lg",children:[t.jsx("thead",{className:"bg-gradient-to-r from-[#4CAF50]/10 to-[#4A90E2]/10",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Permit No."}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Applicant"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Barangay"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Purpose"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Applied Date"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:De().map(_e=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[t.jsxs("td",{className:"px-6 py-4 text-sm font-mono text-gray-600 dark:text-gray-300",children:["BP-",String(_e.permit_id).padStart(4,"0")]}),t.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white font-medium",children:[_e.first_name," ",_e.middle_name," ",_e.last_name," ",_e.suffix]}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:_e.barangay||"N/A"}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:_e.purpose||"N/A"}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-300",children:_e.application_date?new Date(_e.application_date).toLocaleDateString():"N/A"}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsx("span",{className:`px-3 py-1.5 text-xs font-medium rounded-full border ${ce(_e.status)} border-current border-opacity-30`,children:me(_e.status)})}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsx("button",{onClick:()=>ze(_e),className:"inline-flex items-center px-4 py-2 text-xs font-medium rounded-lg text-white bg-[#4CAF50] hover:bg-[#FDA811] transition-all shadow-sm hover:shadow-md",children:"View"})})]},_e.permit_id))})]})})]})]}),s&&a&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-md p-4 overflow-auto animate-fadeIn",children:t.jsxs("div",{className:"w-full max-w-7xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl transform transition-all",children:[t.jsxs("div",{className:"relative p-6 bg-gradient-to-r from-gray-50 via-white to-gray-50 dark:from-slate-800 dark:via-slate-700 dark:to-slate-800 border-b-4 border-[#4CAF50]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-[#4CAF50] to-[#45a049] p-3 rounded-2xl shadow-xl",children:t.jsx(Kt,{className:"w-10 h-10 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Barangay Permit"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Barangay Permit Application Details"})]})]}),t.jsx("button",{onClick:Le,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-all",children:t.jsx(ls,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-blue-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Permit ID"}),t.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white font-mono",children:["BP-",String(a.permit_id).padStart(4,"0")]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-purple-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Applicant ID"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:a.applicant_id||"N/A"})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-green-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Status"}),t.jsx("span",{className:`inline-block px-3 py-1 text-sm font-bold rounded-full ${ce(a.status)}`,children:a.uiStatus||me(a.status)})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 shadow-md border-l-4 border-orange-500",children:[t.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Application Date"}),t.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:a.application_date?new Date(a.application_date).toLocaleDateString():"N/A"})]})]})]}),t.jsxs("div",{className:"p-8 space-y-8 max-h-[80vh] overflow-y-auto bg-gradient-to-b from-gray-50 to-white dark:from-slate-900 dark:to-slate-800",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-blue-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:t.jsx(gr,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Personal Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Applicant ID"}),t.jsx("p",{className:"text-lg font-mono font-bold text-[#4CAF50] mt-1",children:a.applicant_id||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white mt-1",children:[a.first_name," ",a.middle_name," ",a.last_name," ",a.suffix]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Mobile Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.mobile_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email Address"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Birth Date"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.birthdate?new Date(a.birthdate).toLocaleDateString():"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Gender"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.gender||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Civil Status"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.civil_status||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Nationality"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.nationality||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-green-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-3 rounded-xl shadow-lg",children:t.jsxs("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Address Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"House No."}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.house_no||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Street"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.street||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Barangay"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.barangay||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"City/Municipality"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.city_municipality||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Province"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.province||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Zip Code"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.zip_code||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-orange-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-xl shadow-lg",children:t.jsx(Kt,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Permit Details"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Purpose"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.purpose||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Duration"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.duration||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"ID Type"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.id_type||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"ID Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.id_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Application Date"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.application_date?new Date(a.application_date).toLocaleDateString():"N/A"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-purple-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-3 rounded-xl shadow-lg",children:t.jsx(fu,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Payment Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Clearance Fee"}),t.jsxs("p",{className:"text-xl font-bold text-[#4CAF50] mt-1",children:["",a.clearance_fee||"0.00"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Receipt Number"}),t.jsx("p",{className:"text-gray-900 dark:text-white mt-1",children:a.receipt_number||"N/A"})]})]})]}),we(a.attachments).length>0&&t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-cyan-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 p-3 rounded-xl shadow-lg",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),t.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Submitted Files"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:we(a.attachments).map(_e=>t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-slate-600 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[_e.type.includes("image")?t.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:t.jsx("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}):t.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:t.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:_e.name})]}),t.jsx("button",{onClick:()=>Qe(_e),className:"px-3 py-1 text-xs bg-[#4CAF50] text-white rounded hover:bg-[#FDA811] transition-colors",children:"View"})]},_e.id))})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-yellow-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 p-3 rounded-xl shadow-lg",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Review Comments"}),a.comments&&t.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",J(a.comments).length," comment",J(a.comments).length!==1?"s":"",")"]})]})]}),t.jsx("div",{className:"space-y-4 mb-6",children:a.comments&&a.comments.trim()?t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600 overflow-hidden",children:[t.jsx("div",{className:"max-h-64 overflow-y-auto p-4",children:J(a.comments).map((_e,Se)=>t.jsxs("div",{className:`mb-4 ${Se!==0?"pt-4 border-t border-gray-200 dark:border-slate-600":""}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Admin Comment"]}),t.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[t.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),_e.timestamp]})]}),t.jsx("div",{className:"pl-6",children:t.jsx("p",{className:"text-gray-900 dark:text-white bg-white dark:bg-slate-800 p-3 rounded border border-gray-100 dark:border-slate-500",children:_e.comment})})]},Se))}),t.jsx("div",{className:"px-4 py-3 bg-gray-100 dark:bg-slate-800 border-t border-gray-200 dark:border-slate-600",children:t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total: ",J(a.comments).length," comment",J(a.comments).length!==1?"s":""]})})]}):t.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600",children:[t.jsx("svg",{className:"w-12 h-12 text-gray-300 dark:text-gray-500 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No comments yet. Add your first comment below."})]})}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Add New Comment"}),t.jsx("textarea",{value:o,onChange:_e=>l(_e.target.value),className:"w-full border border-gray-300 dark:border-slate-600 rounded-lg px-4 py-3 bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent",rows:3,placeholder:"Enter your review notes here..."}),o.trim()&&t.jsx("div",{className:"mt-4 flex justify-end",children:t.jsxs("button",{onClick:Oe,className:"px-6 py-2 bg-[#4A90E2] text-white rounded-lg hover:bg-[#4A90E2]/80 transition-colors font-medium flex items-center shadow-sm hover:shadow",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Comment"]})})]})]}),(()=>{const _e=L[a.permit_id]||[];return _e.length>0?t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-6 border-2 border-blue-100 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl shadow-lg",children:t.jsx(jr,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Action History"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[_e.length," action",_e.length!==1?"s":""," taken this session"]})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-[17px] top-0 bottom-0 w-0.5 bg-blue-200 dark:bg-slate-600"}),t.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:[..._e].reverse().map((Se,Ve)=>t.jsxs("div",{className:"relative pl-10",children:[t.jsx("div",{className:`absolute left-[10px] top-1.5 w-4 h-4 rounded-full border-2 border-white dark:border-slate-800 shadow ${Se.action==="Approved"?"bg-green-500":Se.action==="Rejected"?"bg-red-500":Se.action==="Compliance"?"bg-yellow-500":"bg-blue-500"}`}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg p-3 border border-gray-200 dark:border-slate-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:`text-sm font-semibold px-2 py-0.5 rounded-full ${Se.action==="Approved"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":Se.action==="Rejected"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":Se.action==="Compliance"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}`,children:Se.action}),t.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:Se.timestamp})]}),Se.notes&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 pl-1",children:Se.notes}),t.jsxs("p",{className:"text-xs text-gray-400 mt-1 pl-1",children:["by ",Se.by]})]})]},Ve))})]})]}):null})(),t.jsxs("div",{className:"flex gap-4 justify-between pt-8 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-6 border-t-4 border-gray-300 dark:border-slate-600",children:[a.status!=="rejected"&&t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>Q(!Y),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2",children:["Actions",t.jsx("svg",{className:`w-4 h-4 transition-transform ${Y?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Y&&t.jsxs("div",{className:"absolute left-0 bottom-full mb-2 w-72 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 overflow-hidden z-50 max-h-96 overflow-y-auto",children:[t.jsx("div",{className:"px-3 py-2 bg-gray-100 dark:bg-slate-700 border-b border-gray-200 dark:border-slate-600",children:t.jsx("p",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Processing Steps"})}),t.jsxs("button",{onClick:()=>{Q(!1),ve("Under Review","Mark as Under Review","Application is now being reviewed by the team.","#3B82F6")},className:"w-full px-4 py-3 text-left hover:bg-blue-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(sa,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Under Review"})]}),t.jsxs("button",{onClick:()=>{Q(!1),ve("Document Verification","Document Verification","Documents are being verified for completeness and authenticity.","#8B5CF6")},className:"w-full px-4 py-3 text-left hover:bg-purple-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Kt,{className:"w-5 h-5 text-purple-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Document Verification"})]}),t.jsxs("button",{onClick:()=>{Q(!1),ve("Payment Verification","Verify Payment","Payment is being verified.","#F59E0B")},className:"w-full px-4 py-3 text-left hover:bg-amber-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(fu,{className:"w-5 h-5 text-amber-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Payment Verification"})]}),t.jsxs("button",{onClick:()=>{Q(!1),ve("For Manager Approval","Send for Manager Approval","Application is being sent to manager for approval.","#6366F1")},className:"w-full px-4 py-3 text-left hover:bg-indigo-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(gr,{className:"w-5 h-5 text-indigo-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"For Manager Approval"})]}),t.jsxs("button",{onClick:()=>{Q(!1),ve("Ready for Release","Mark Ready for Release","Permit is ready for release to applicant.","#10B981")},className:"w-full px-4 py-3 text-left hover:bg-emerald-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Us,{className:"w-5 h-5 text-emerald-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Ready for Release"})]}),t.jsx("div",{className:"px-3 py-2 bg-gray-100 dark:bg-slate-700 border-b border-gray-200 dark:border-slate-600",children:t.jsx("p",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 uppercase",children:"Actions"})}),t.jsxs("button",{onClick:()=>{Q(!1),W()},className:"w-full px-4 py-3 text-left hover:bg-yellow-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(Ks,{className:"w-5 h-5 text-yellow-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Mark for Compliance"})]}),t.jsxs("button",{onClick:()=>{Q(!1),he()},className:"w-full px-4 py-3 text-left hover:bg-red-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 border-b border-gray-100 dark:border-slate-600",children:[t.jsx(ls,{className:"w-5 h-5 text-red-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Reject Application"})]}),t.jsxs("button",{onClick:()=>{Q(!1),oe()},className:"w-full px-4 py-3 text-left hover:bg-green-50 dark:hover:bg-slate-700 transition-colors flex items-center gap-3",children:[t.jsx(Us,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:" Approve Permit"})]})]})]}),t.jsxs("button",{onClick:Le,className:"px-8 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2 ml-auto",children:[t.jsx(ls,{className:"w-5 h-5"}),"Close"]})]})]})]})}),v&&g&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-0",children:t.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[t.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 p-4 flex justify-between items-center bg-gradient-to-b from-black/70 to-transparent",children:[t.jsx("div",{className:"flex items-center gap-3 text-white",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),t.jsx("span",{className:"text-sm font-medium truncate max-w-xs",children:g.name}),t.jsx("span",{className:"text-xs text-gray-300",children:r6(g.file_type,g.name)})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[ox(g.file_type,g.name)&&t.jsxs("div",{className:"flex items-center gap-1 mr-4 bg-black/40 rounded-lg p-1",children:[t.jsx("button",{onClick:G,className:"p-2 text-white hover:bg-white/10 rounded transition-colors",title:"Zoom Out",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})})}),t.jsxs("button",{onClick:se,className:"px-3 py-2 text-xs text-white hover:bg-white/10 rounded transition-colors",title:"Reset Zoom",children:[ne,"%"]}),t.jsx("button",{onClick:R,className:"p-2 text-white hover:bg-white/10 rounded transition-colors",title:"Zoom In",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})]}),t.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm flex items-center gap-1.5 transition-colors",download:!0,children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]}),t.jsx("button",{onClick:Ze,className:"ml-2 p-2 text-white hover:bg-white/10 rounded-lg transition-colors",title:"Close preview",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),ox(g.file_type,g.name)?t.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-hidden cursor-move",onWheel:K,onMouseDown:I,children:t.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:t.jsx("img",{ref:O,id:"preview-image",src:g.url,alt:g.name,className:"max-w-full max-h-[80vh] object-contain rounded-lg shadow-2xl transition-transform duration-200 ease-out",style:{transform:"scale(1)",position:"relative",left:"0px",top:"0px",cursor:"default"},onError:_e=>{console.error("Failed to load image:",g.url),_e.target.onerror=null,_e.target.src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300"><rect width="400" height="300" fill="%23222222"/><text x="200" y="150" text-anchor="middle" font-family="Arial" font-size="16" fill="%23ffffff">Image not found</text><text x="200" y="170" text-anchor="middle" font-family="Arial" font-size="12" fill="%23999999">URL: '+g.url+"</text></svg>",_e.target.className="max-w-md mx-auto bg-gray-800 rounded-lg p-8"}})})}):t.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:t.jsxs("div",{className:"text-center max-w-md bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20",children:[t.jsx("div",{className:"text-gray-300 mb-6",children:g.file_type?.includes("pdf")||g.name?.endsWith(".pdf")?t.jsx(Kt,{className:"w-24 h-24 mx-auto"}):g.file_type?.includes("image/")?t.jsx(io,{className:"w-24 h-24 mx-auto"}):t.jsx("svg",{className:"w-24 h-24 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),t.jsx("h3",{className:"text-xl font-medium text-white mb-3",children:r6(g.file_type,g.name)}),t.jsx("p",{className:"text-gray-300 mb-6",children:"This file cannot be previewed in browser."}),t.jsxs("div",{className:"flex gap-3 justify-center",children:[t.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",download:!0,children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]}),t.jsx("button",{onClick:Ze,className:"inline-flex items-center justify-center px-5 py-2.5 border border-white/30 text-white hover:bg-white/10 rounded-lg transition-colors",children:"Close"})]})]})}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 p-4 flex justify-between items-center text-white/60 text-sm",children:[t.jsx("div",{className:"flex items-center gap-2",children:ox(g.file_type,g.name)&&t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})}),t.jsxs("span",{children:[ne,"%"]}),t.jsx("span",{className:"text-xs ml-4",children:"Drag to pan when zoomed"})]})}),t.jsxs("div",{children:[t.jsx("span",{className:"hidden sm:inline",children:"Press "}),t.jsx("kbd",{className:"px-2 py-1 bg-black/40 rounded text-xs mx-1",children:"ESC"}),t.jsx("span",{className:"hidden sm:inline",children:" to close"})]})]}),t.jsx("div",{className:"absolute inset-0 -z-10 cursor-pointer",onClick:Ze})]})}),B&&t.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:t.jsx("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-xl shadow-2xl p-6 transform transition-all",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:t.jsx("svg",{className:"h-10 w-10 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Success!"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:E}),t.jsx("div",{className:"flex justify-center space-x-3",children:t.jsxs("button",{onClick:()=>{j(!1),S("")},className:"px-6 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#4CAF50]/80 transition-colors font-medium flex items-center",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Continue"]})})]})})})]})}const a6="/backend/barangay_permit",n6={pending:{label:"Pending",color:"bg-amber-100 text-amber-800",icon:jr},approved:{label:"Approved",color:"bg-green-100 text-green-800",icon:Us},rejected:{label:"Rejected",color:"bg-red-100 text-red-800",icon:Ka}},Cj=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};function Jde(){const[a,e]=C.useState([]),[s,r]=C.useState(!0),[n,i]=C.useState(null),[o,l]=C.useState(null),[c,u]=C.useState(""),[m,A]=C.useState(""),[g,p]=C.useState("all"),[v,b]=C.useState("latest"),y=C.useMemo(()=>{const T=a.length,M=a.filter(Y=>(Y.status||"").toLowerCase()==="approved").length,D=a.filter(Y=>!Y.status||(Y.status||"").toLowerCase()==="pending").length,P=a.filter(Y=>(Y.status||"").toLowerCase()==="rejected").length;return{total:T,approved:M,pending:D,rejected:P}},[a]),w=async()=>{try{r(!0),i(null);const T=await fetch(`${a6}/admin_fetch.php`);if(!T.ok)throw new Error(`Server error: ${T.status}`);const M=await T.json();if(M.success&&Array.isArray(M.data))e(M.data);else throw new Error(M.message||"Failed to fetch applications")}catch(T){console.error("Error loading barangay applications:",T),i(T.message)}finally{r(!1)}};C.useEffect(()=>{w()},[]);const B=C.useMemo(()=>{let T=[...a];if(g!=="all"&&(T=T.filter(M=>(M.status||"pending").toLowerCase()===g)),m.trim()){const M=m.toLowerCase();T=T.filter(D=>(D.first_name||"").toLowerCase().includes(M)||(D.last_name||"").toLowerCase().includes(M)||(D.purpose||"").toLowerCase().includes(M)||(D.permit_id||"").toString().includes(M)||(D.barangay||"").toLowerCase().includes(M)||(D.email||"").toLowerCase().includes(M))}return v==="latest"?T.sort((M,D)=>new Date(D.created_at||0)-new Date(M.created_at||0)):v==="oldest"?T.sort((M,D)=>new Date(M.created_at||0)-new Date(D.created_at||0)):v==="name_asc"&&T.sort((M,D)=>`${M.last_name} ${M.first_name}`.localeCompare(`${D.last_name} ${D.first_name}`)),T},[a,g,m,v]),j=async(T,M,D="")=>{try{const Y=await(await fetch(`${a6}/update_status.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({permit_id:T,status:M.toLowerCase(),comments:D})})).json();Y.success?(dt.fire({icon:"success",title:"Updated!",text:`Clearance request ${M.toLowerCase()} successfully.`,confirmButtonColor:"#4CAF50",timer:2e3}),await w(),o&&o.permit_id===T&&l(Q=>({...Q,status:M.toLowerCase()}))):dt.fire({icon:"error",title:"Error",text:Y.message||"Failed to update status",confirmButtonColor:"#E53935"})}catch(P){dt.fire({icon:"error",title:"Error",text:"Error updating status: "+P.message,confirmButtonColor:"#E53935"})}},E=async T=>{if(!o)return;const M=await dt.fire({title:`${T} this clearance request?`,html:`<div class="text-left text-sm">
        <p><strong>Permit ID:</strong> ${o.permit_id}</p>
        <p><strong>Applicant:</strong> ${o.first_name} ${o.last_name}</p>
        <p><strong>Purpose:</strong> ${o.purpose||"N/A"}</p>
      </div>`,icon:T==="Rejected"?"warning":"question",input:"textarea",inputLabel:T==="Rejected"?"Reason for rejection (required)":"Add notes (optional)",inputPlaceholder:"Enter notes...",inputValue:c,inputValidator:T==="Rejected"?D=>D?null:"Rejection reason is required":void 0,showCancelButton:!0,confirmButtonText:`Yes, ${T}`,confirmButtonColor:T==="Approved"?"#4CAF50":T==="Rejected"?"#E53935":"#4A90E2",cancelButtonColor:"#6b7280"});M.isConfirmed&&(await j(o.permit_id,T,M.value||""),u(""))},S=T=>{const M=(T||"pending").toLowerCase(),D=n6[M]||n6.pending;return t.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold ${D.color}`,children:[t.jsx(D.icon,{className:"w-3 h-3"}),D.label]})};return t.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-lg min-h-screen font-[Montserrat,Arial,sans-serif]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(Pr,{className:"w-7 h-7 text-[#4A90E2]"}),"Barangay Clearance Processing"]}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Review, approve, or reject barangay clearance requests"})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[{label:"Total Requests",value:y.total,bg:"bg-blue-50 dark:bg-blue-900/20",text:"text-blue-700 dark:text-blue-300"},{label:"Pending",value:y.pending,bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-700 dark:text-amber-300"},{label:"Approved",value:y.approved,bg:"bg-green-50 dark:bg-green-900/20",text:"text-green-700 dark:text-green-300"},{label:"Rejected",value:y.rejected,bg:"bg-red-50 dark:bg-red-900/20",text:"text-red-700 dark:text-red-300"}].map(T=>t.jsxs("div",{className:`${T.bg} rounded-xl p-4`,children:[t.jsx("p",{className:`text-xs font-medium ${T.text} opacity-80`,children:T.label}),t.jsx("p",{className:`text-2xl font-bold ${T.text}`,children:T.value})]},T.label))}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search by name, purpose, barangay, ID...",value:m,onChange:T=>A(T.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 dark:border-slate-700 rounded-xl text-sm bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-[#4A90E2] focus:outline-none"})]}),t.jsxs("select",{value:g,onChange:T=>p(T.target.value),className:"px-4 py-2.5 border border-gray-200 dark:border-slate-700 rounded-xl text-sm bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-[#4A90E2] focus:outline-none",children:[t.jsx("option",{value:"all",children:"All Statuses"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"approved",children:"Approved"}),t.jsx("option",{value:"rejected",children:"Rejected"})]}),t.jsxs("select",{value:v,onChange:T=>b(T.target.value),className:"px-4 py-2.5 border border-gray-200 dark:border-slate-700 rounded-xl text-sm bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-[#4A90E2] focus:outline-none",children:[t.jsx("option",{value:"latest",children:"Latest First"}),t.jsx("option",{value:"oldest",children:"Oldest First"}),t.jsx("option",{value:"name_asc",children:"Name A-Z"})]}),t.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2.5 bg-[#4A90E2] text-white rounded-xl text-sm font-medium hover:bg-[#3a7bc8] transition",children:[t.jsx(Ya,{className:"w-4 h-4"})," Refresh"]})]}),s?t.jsxs("div",{className:"flex items-center justify-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-[#4A90E2] border-t-transparent rounded-full"}),t.jsx("span",{className:"ml-3 text-gray-500",children:"Loading requests..."})]}):n?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ks,{className:"w-12 h-12 text-red-400 mx-auto mb-3"}),t.jsx("p",{className:"text-red-600 font-medium",children:n}),t.jsx("button",{onClick:w,className:"mt-3 text-sm text-[#4A90E2] hover:underline",children:"Try again"})]}):B.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Kt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500",children:"No clearance requests found"})]}):t.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200 dark:border-slate-700",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800",children:t.jsx("tr",{children:["ID","Applicant","Barangay","Purpose","Status","Date","Action"].map(T=>t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:T},T))})}),t.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:B.map(T=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition",children:[t.jsxs("td",{className:"px-4 py-3 text-sm font-mono text-gray-900 dark:text-white",children:["#",T.permit_id]}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[T.first_name," ",T.middle_name||""," ",T.last_name]}),t.jsx("p",{className:"text-xs text-gray-500",children:T.email||T.mobile_number||""})]}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-300",children:T.barangay||"N/A"}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("p",{className:"text-sm text-gray-900 dark:text-white truncate max-w-[200px]",children:T.purpose||"N/A"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Duration: ",T.duration||"N/A"]})]}),t.jsx("td",{className:"px-4 py-3",children:S(T.status)}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:Cj(T.created_at||T.application_date)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("button",{onClick:()=>{l(T),u("")},className:"inline-flex items-center gap-1 px-3 py-1.5 bg-[#4A90E2] text-white text-xs font-medium rounded-lg hover:bg-[#3a7bc8] transition",children:[t.jsx(ws,{className:"w-3 h-3"})," Review"]})})]},T.permit_id))})]})}),o&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[t.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(Pr,{className:"w-5 h-5 text-[#4A90E2]"}),"Clearance Request #",o.permit_id]}),t.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-red-500 text-xl font-bold",children:""})]}),t.jsxs("div",{className:"p-6 space-y-5",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Current Status:"}),S(o.status)]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[t.jsx(gr,{className:"w-4 h-4"})," Personal Information"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Name:"})," ",t.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[o.first_name," ",o.middle_name||""," ",o.last_name," ",o.suffix||""]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Email:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Mobile:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.mobile_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Gender:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.gender||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Civil Status:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.civil_status||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Nationality:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.nationality||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Birthdate:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Cj(o.birthdate)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"ID Type:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.id_type||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[t.jsx(Ec,{className:"w-4 h-4"})," Address"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"House No:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.house_no||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Street:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.street||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Barangay:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.barangay||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"City:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.city_municipality||"General Santos City"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Province:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.province||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Zip Code:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.zip_code||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 rounded-xl p-4",children:[t.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[t.jsx(rn,{className:"w-4 h-4"})," Clearance Details"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Purpose:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.purpose||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Duration:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.duration||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Clearance Fee:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.clearance_fee?`${parseFloat(o.clearance_fee).toFixed(2)}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Receipt No:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:o.receipt_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Date Applied:"})," ",t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Cj(o.application_date||o.created_at)})]})]})]}),o.comments&&t.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-xl p-4 border border-amber-200 dark:border-amber-700",children:[t.jsx("h3",{className:"text-sm font-semibold text-amber-800 dark:text-amber-300 mb-2",children:"Previous Comments"}),t.jsx("pre",{className:"text-xs text-amber-700 dark:text-amber-400 whitespace-pre-wrap font-sans",children:o.comments})]}),t.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Admin Notes / Comments"}),t.jsx("textarea",{value:c,onChange:T=>u(T.target.value),rows:3,className:"w-full border border-gray-200 dark:border-slate-700 rounded-xl p-3 text-sm bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-[#4A90E2] focus:outline-none",placeholder:"Add processing comments..."})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[t.jsxs("button",{onClick:()=>E("Approved"),className:"flex items-center gap-2 px-5 py-2.5 bg-[#4CAF50] text-white rounded-xl text-sm font-semibold hover:bg-green-700 transition",children:[t.jsx(Us,{className:"w-4 h-4"})," Approve"]}),t.jsxs("button",{onClick:()=>E("Rejected"),className:"flex items-center gap-2 px-5 py-2.5 bg-[#E53935] text-white rounded-xl text-sm font-semibold hover:bg-red-700 transition",children:[t.jsx(Ka,{className:"w-4 h-4"})," Reject"]}),t.jsxs("button",{onClick:()=>E("Pending"),className:"flex items-center gap-2 px-5 py-2.5 bg-[#4A90E2] text-white rounded-xl text-sm font-semibold hover:bg-blue-700 transition",children:[t.jsx(jr,{className:"w-4 h-4"})," Set Pending"]}),t.jsx("button",{onClick:()=>l(null),className:"ml-auto px-5 py-2.5 border border-gray-300 dark:border-slate-600 text-gray-600 dark:text-gray-300 rounded-xl text-sm font-medium hover:bg-gray-100 dark:hover:bg-slate-800 transition",children:"Close"})]})]})]})})]})}const kj={business:{label:"Business Permit",icon:Ba,color:"border-blue-500",headerBg:"bg-blue-50 dark:bg-blue-900/20",headerText:"text-blue-800 dark:text-blue-300",types:{new:{label:"New Business Permit",requirements:[{id:"b1",name:"Barangay Clearance",required:!0,description:"Clearance from the barangay where the business is located"},{id:"b2",name:"DTI/SEC/CDA Registration",required:!0,description:"Business name registration from DTI (sole), SEC (corporation), or CDA (cooperative)"},{id:"b3",name:"Community Tax Certificate (Cedula)",required:!0,description:"Current year community tax certificate"},{id:"b4",name:"Contract of Lease / Land Title",required:!0,description:"Proof of business location ownership or lease"},{id:"b5",name:"Fire Safety Inspection Certificate",required:!0,description:"Certificate from the Bureau of Fire Protection"},{id:"b6",name:"Sanitary Permit",required:!0,description:"Health/sanitary clearance for food-related businesses"},{id:"b7",name:"Zoning Clearance",required:!0,description:"Clearance from the City Planning Office"},{id:"b8",name:"SSS/PhilHealth/Pag-IBIG Registration",required:!1,description:"Employee benefit registrations (if with employees)"},{id:"b9",name:"Environmental Compliance Certificate",required:!1,description:"For businesses with environmental impact"},{id:"b10",name:"2x2 ID Photo of Owner",required:!0,description:"Recent photo of the business owner"}]},renewal:{label:"Business Renewal",requirements:[{id:"br1",name:"Previous Business Permit",required:!0,description:"Copy of the previous year's business permit"},{id:"br2",name:"Barangay Clearance (Updated)",required:!0,description:"Current year barangay clearance"},{id:"br3",name:"Community Tax Certificate (Cedula)",required:!0,description:"Current year community tax certificate"},{id:"br4",name:"Fire Safety Inspection Certificate",required:!0,description:"Updated FSIC from BFP"},{id:"br5",name:"Sanitary Permit (Updated)",required:!0,description:"Current year sanitary permit"},{id:"br6",name:"Financial Statement / ITR",required:!0,description:"Latest financial statements or income tax return"},{id:"br7",name:"Official Receipt of Previous Payment",required:!0,description:"Proof of previous year's permit fee payment"}]}}},building:{label:"Building Permit",icon:ll,color:"border-green-500",headerBg:"bg-green-50 dark:bg-green-900/20",headerText:"text-green-800 dark:text-green-300",types:{new:{label:"New Building Permit",requirements:[{id:"bp1",name:"Duly Accomplished Application Form",required:!0,description:"Unified building permit application form"},{id:"bp2",name:"Certified True Copy of Land Title (TCT/OCT)",required:!0,description:"Title of the property where construction will be done"},{id:"bp3",name:"Tax Declaration of Lot",required:!0,description:"Latest tax declaration from the assessor's office"},{id:"bp4",name:"Current Real Property Tax Receipt",required:!0,description:"Proof of real property tax payment"},{id:"bp5",name:"Five (5) Sets of Architectural Plans",required:!0,description:"Signed and sealed by a licensed architect"},{id:"bp6",name:"Five (5) Sets of Structural Plans",required:!0,description:"Signed and sealed by a licensed civil/structural engineer"},{id:"bp7",name:"Five (5) Sets of Electrical Plans",required:!0,description:"Signed and sealed by a licensed electrical engineer"},{id:"bp8",name:"Five (5) Sets of Plumbing/Sanitary Plans",required:!0,description:"Signed and sealed by a licensed sanitary engineer"},{id:"bp9",name:"Barangay Clearance",required:!0,description:"Clearance from the barangay of the project location"},{id:"bp10",name:"Locational Clearance / Zoning",required:!0,description:"From the City Planning and Development Office"},{id:"bp11",name:"Fire Safety Evaluation Clearance",required:!0,description:"From the Bureau of Fire Protection"},{id:"bp12",name:"Lot Plan with Vicinity Map",required:!0,description:"Geodetic engineer-prepared lot plan"},{id:"bp13",name:"Bill of Materials and Cost Estimate",required:!0,description:"Detailed materials and cost breakdown"},{id:"bp14",name:"Structural Analysis/Design",required:!1,description:"For multi-storey or special structures"},{id:"bp15",name:"Soil/Geotechnical Investigation",required:!1,description:"For buildings 3 storeys and above"}]},occupancy:{label:"Certificate of Occupancy",requirements:[{id:"occ1",name:"Building Permit (Original)",required:!0,description:"The original approved building permit"},{id:"occ2",name:"Certificate of Completion",required:!0,description:"Signed by the building official"},{id:"occ3",name:"Fire Safety Inspection Certificate",required:!0,description:"Final FSIC from BFP"},{id:"occ4",name:"As-Built Plans",required:!0,description:"Final plans reflecting actual construction"},{id:"occ5",name:"Logbook of Construction Activities",required:!0,description:"Complete construction logbook"}]}}},franchise:{label:"Franchise Permit (Transport)",icon:hp,color:"border-purple-500",headerBg:"bg-purple-50 dark:bg-purple-900/20",headerText:"text-purple-800 dark:text-purple-300",types:{new:{label:"New Franchise / MTOP",requirements:[{id:"f1",name:"Duly Accomplished Application Form",required:!0,description:"Complete franchise/MTOP application form"},{id:"f2",name:"LTO Official Receipt (OR)",required:!0,description:"Current year LTO official receipt"},{id:"f3",name:"LTO Certificate of Registration (CR)",required:!0,description:"Vehicle certificate of registration"},{id:"f4",name:"Driver's License",required:!0,description:"Valid professional driver's license"},{id:"f5",name:"Barangay Clearance",required:!0,description:"From the operator's barangay of residence"},{id:"f6",name:"TODA Endorsement / Certification",required:!0,description:"Endorsement from the TODA organization"},{id:"f7",name:"Insurance Certificate (CTPL)",required:!0,description:"Compulsory Third Party Liability insurance"},{id:"f8",name:"Vehicle Emission Test Result",required:!0,description:"Valid emission compliance certificate"},{id:"f9",name:"NBI / Police Clearance",required:!0,description:"NBI or police clearance of the operator"},{id:"f10",name:"2x2 ID Photo",required:!0,description:"Recent ID photo of the operator"},{id:"f11",name:"Medical Certificate",required:!1,description:"Health certificate of the operator"},{id:"f12",name:"Proof of Residency",required:!0,description:"Proof of residence within the city"}]},renewal:{label:"Franchise / MTOP Renewal",requirements:[{id:"fr1",name:"Previous Franchise Permit / MTOP",required:!0,description:"Copy of the previous permit"},{id:"fr2",name:"LTO OR/CR (Updated)",required:!0,description:"Current year LTO registration documents"},{id:"fr3",name:"Insurance Certificate (Updated CTPL)",required:!0,description:"Current CTPL insurance"},{id:"fr4",name:"Emission Test (Updated)",required:!0,description:"Valid emission compliance certificate"},{id:"fr5",name:"TODA Certification (Updated)",required:!0,description:"Current TODA endorsement"},{id:"fr6",name:"Barangay Clearance (Updated)",required:!0,description:"Current year barangay clearance"},{id:"fr7",name:"Vehicle Inspection Report",required:!0,description:"Roadworthiness inspection from the city"}]}}},barangay:{label:"Barangay Clearance",icon:rn,color:"border-amber-500",headerBg:"bg-amber-50 dark:bg-amber-900/20",headerText:"text-amber-800 dark:text-amber-300",types:{clearance:{label:"Barangay Clearance",requirements:[{id:"bc1",name:"Valid Government-Issued ID",required:!0,description:"Any valid government-issued identification"},{id:"bc2",name:"Community Tax Certificate (Cedula)",required:!0,description:"Current year cedula"},{id:"bc3",name:"Proof of Residency",required:!0,description:"Utility bill, lease contract, or certificate of residency"},{id:"bc4",name:"2x2 ID Photo",required:!0,description:"Recent 2x2 ID photo"},{id:"bc5",name:"Clearance Fee Payment",required:!0,description:"Official receipt of clearance fee"},{id:"bc6",name:"Applicant Signature",required:!0,description:"Signature on the application form"}]}}}};function Zde(){const[a,e]=C.useState(""),[s,r]=C.useState(new Set(["business","building","franchise","barangay"])),[n,i]=C.useState(new Set),o=m=>{r(A=>{const g=new Set(A);return g.has(m)?g.delete(m):g.add(m),g})},l=m=>{i(A=>{const g=new Set(A);return g.has(m)?g.delete(m):g.add(m),g})},c=C.useMemo(()=>{if(!a.trim())return kj;const m=a.toLowerCase(),A={};return Object.entries(kj).forEach(([g,p])=>{const v={};Object.entries(p.types).forEach(([b,y])=>{const w=y.requirements.filter(B=>B.name.toLowerCase().includes(m)||B.description.toLowerCase().includes(m));w.length>0&&(v[b]={...y,requirements:w})}),Object.keys(v).length>0&&(A[g]={...p,types:v})}),A},[a]),u=C.useMemo(()=>{let m=0;return Object.values(kj).forEach(A=>{Object.values(A.types).forEach(g=>{m+=g.requirements.length})}),m},[]);return t.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-lg min-h-screen font-[Montserrat,Arial,sans-serif]",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(IU,{className:"w-7 h-7 text-[#4A90E2]"}),"Requirements Checklist"]}),t.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:["Complete reference of document requirements for all permit types (",u," items)"]})]}),t.jsxs("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-xl p-4 flex items-start gap-3",children:[t.jsx(iw,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[t.jsx("p",{className:"font-semibold mb-1",children:"Admin Reference Guide"}),t.jsxs("p",{children:["Use this checklist when reviewing applications to ensure all required documents are submitted. Items marked ",t.jsx("span",{className:"text-red-600 font-semibold",children:"*Required"})," must be present before approval."]})]})]}),t.jsxs("div",{className:"relative mb-6",children:[t.jsx(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search requirements across all permit types...",value:a,onChange:m=>e(m.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 dark:border-slate-700 rounded-xl text-sm bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-[#4A90E2] focus:outline-none"})]}),t.jsx("div",{className:"space-y-4",children:Object.entries(c).map(([m,A])=>{const g=A.icon,p=s.has(m);return t.jsxs("div",{className:`border-l-4 ${A.color} rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden`,children:[t.jsxs("button",{onClick:()=>o(m),className:`w-full flex items-center justify-between px-5 py-4 ${A.headerBg} transition hover:opacity-90`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(g,{className:`w-5 h-5 ${A.headerText}`}),t.jsx("span",{className:`font-bold ${A.headerText}`,children:A.label}),t.jsxs("span",{className:"text-xs bg-white/70 dark:bg-slate-800/70 px-2 py-0.5 rounded-full text-gray-600 dark:text-gray-400",children:[Object.values(A.types).reduce((v,b)=>v+b.requirements.length,0)," items"]})]}),p?t.jsx(Vf,{className:`w-5 h-5 ${A.headerText}`}):t.jsx(fd,{className:`w-5 h-5 ${A.headerText}`})]}),p&&t.jsx("div",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:Object.entries(A.types).map(([v,b])=>{const y=`${m}-${v}`,w=n.has(y),B=b.requirements.filter(j=>j.required).length;return t.jsxs("div",{children:[t.jsxs("button",{onClick:()=>l(y),className:"w-full flex items-center justify-between px-6 py-3 bg-white dark:bg-slate-900 hover:bg-gray-50 dark:hover:bg-slate-800 transition",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Kt,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:b.label}),t.jsxs("span",{className:"text-xs text-gray-400",children:[B," required, ",b.requirements.length-B," optional"]})]}),w?t.jsx(Vf,{className:"w-4 h-4 text-gray-400"}):t.jsx(fd,{className:"w-4 h-4 text-gray-400"})]}),w&&t.jsx("div",{className:"px-6 pb-4",children:t.jsx("div",{className:"space-y-2",children:b.requirements.map(j=>t.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-gray-50 dark:bg-slate-800 border border-gray-100 dark:border-slate-700",children:[t.jsx("div",{className:`mt-0.5 flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center ${j.required?"bg-red-100 text-red-600":"bg-gray-100 text-gray-400"}`,children:j.required?t.jsx(Ks,{className:"w-3 h-3"}):t.jsx(Us,{className:"w-3 h-3"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:j.name}),j.required?t.jsx("span",{className:"text-[10px] font-bold text-red-600 bg-red-50 dark:bg-red-900/30 px-1.5 py-0.5 rounded",children:"REQUIRED"}):t.jsx("span",{className:"text-[10px] font-bold text-gray-500 bg-gray-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:"OPTIONAL"})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:j.description})]})]},j.id))})})]},v)})})]},m)})}),Object.keys(c).length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(sa,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500",children:"No requirements match your search"})]})]})}const eue="/backend/api";function tue(){const[a,e]=C.useState(!0),[s,r]=C.useState(null),[n,i]=C.useState(null),[o,l]=C.useState("all"),[c,u]=C.useState("all"),m=async()=>{try{e(!0),r(null);const y=await fetch(`${eue}/dashboard_stats.php`);if(!y.ok)throw new Error(`Server error: ${y.status}`);const w=await y.json();if(w.success)i(w);else throw new Error(w.message||"Failed to fetch data")}catch(y){console.error("Error fetching report data:",y),r(y.message)}finally{e(!1)}};C.useEffect(()=>{m()},[]);const A=C.useMemo(()=>{if(!n)return[];const y=[{key:"business",label:"Business Permits",icon:Ba,color:"bg-blue-500",lightBg:"bg-blue-50 dark:bg-blue-900/20",textColor:"text-blue-700 dark:text-blue-300",data:n.business||{}},{key:"building",label:"Building Permits",icon:ll,color:"bg-green-500",lightBg:"bg-green-50 dark:bg-green-900/20",textColor:"text-green-700 dark:text-green-300",data:n.building||{}},{key:"franchise",label:"Franchise / Transport",icon:hp,color:"bg-purple-500",lightBg:"bg-purple-50 dark:bg-purple-900/20",textColor:"text-purple-700 dark:text-purple-300",data:n.franchise||{}},{key:"barangay",label:"Barangay Clearance",icon:rn,color:"bg-amber-500",lightBg:"bg-amber-50 dark:bg-amber-900/20",textColor:"text-amber-700 dark:text-amber-300",data:n.barangay||{}}];return c!=="all"?y.filter(w=>w.key===c):y},[n,c]),g=C.useMemo(()=>{if(!n)return{total:0,approved:0,pending:0,rejected:0};const y=[n.business,n.building,n.franchise,n.barangay].filter(Boolean);return{total:y.reduce((w,B)=>w+(B.total||0),0),approved:y.reduce((w,B)=>w+(B.approved||0),0),pending:y.reduce((w,B)=>w+(B.pending||0),0),rejected:y.reduce((w,B)=>w+(B.rejected||0),0)}},[n]),p=g.total>0?(g.approved/g.total*100).toFixed(1):"0.0",v=()=>{if(!n)return;const y=[["Department","Total","Approved","Pending","Rejected","Approval Rate"]];A.forEach(S=>{const T=S.data,M=T.total||0,D=T.approved||0,P=M>0?(D/M*100).toFixed(1)+"%":"0%";y.push([S.label,M,D,T.pending||0,T.rejected||0,P])}),y.push(["TOTAL",g.total,g.approved,g.pending,g.rejected,p+"%"]);const w=y.map(S=>S.map(T=>`"${T}"`).join(",")).join(`
`),B=new Blob([w],{type:"text/csv"}),j=window.URL.createObjectURL(B),E=document.createElement("a");E.href=j,E.download=`permit-report-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),window.URL.revokeObjectURL(j)},b=(y,w)=>!w||w===0?"0%":`${Math.max(y/w*100,2)}%`;return t.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-lg min-h-screen font-[Montserrat,Arial,sans-serif]",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(P6,{className:"w-7 h-7 text-[#4A90E2]"}),"Permit Reports & Analytics"]}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Cross-department permit application overview"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 bg-[#4A90E2] text-white rounded-xl text-sm font-medium hover:bg-[#3a7bc8] transition",children:[t.jsx(Ya,{className:"w-4 h-4"})," Refresh"]}),t.jsxs("button",{onClick:v,disabled:!n,className:"flex items-center gap-2 px-4 py-2 bg-[#4CAF50] text-white rounded-xl text-sm font-medium hover:bg-green-700 transition disabled:opacity-50",children:[t.jsx(nn,{className:"w-4 h-4"})," Export CSV"]})]})]}),t.jsx("div",{className:"flex gap-3 mb-6",children:t.jsxs("select",{value:c,onChange:y=>u(y.target.value),className:"px-4 py-2.5 border border-gray-200 dark:border-slate-700 rounded-xl text-sm bg-white dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-[#4A90E2] focus:outline-none",children:[t.jsx("option",{value:"all",children:"All Departments"}),t.jsx("option",{value:"business",children:"Business"}),t.jsx("option",{value:"building",children:"Building"}),t.jsx("option",{value:"franchise",children:"Franchise / Transport"}),t.jsx("option",{value:"barangay",children:"Barangay"})]})}),a?t.jsxs("div",{className:"flex items-center justify-center py-20",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-[#4A90E2] border-t-transparent rounded-full"}),t.jsx("span",{className:"ml-3 text-gray-500",children:"Loading report data..."})]}):s?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ks,{className:"w-12 h-12 text-red-400 mx-auto mb-3"}),t.jsx("p",{className:"text-red-600 font-medium",children:s}),t.jsx("button",{onClick:m,className:"mt-3 text-sm text-[#4A90E2] hover:underline",children:"Try again"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[{label:"Total Applications",value:g.total,icon:Kt,bg:"bg-slate-50 dark:bg-slate-800",text:"text-slate-700 dark:text-slate-200"},{label:"Approved",value:g.approved,icon:Us,bg:"bg-green-50 dark:bg-green-900/20",text:"text-green-700 dark:text-green-300"},{label:"Pending",value:g.pending,icon:jr,bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-700 dark:text-amber-300"},{label:"Rejected",value:g.rejected,icon:Ka,bg:"bg-red-50 dark:bg-red-900/20",text:"text-red-700 dark:text-red-300"},{label:"Approval Rate",value:`${p}%`,icon:dl,bg:"bg-indigo-50 dark:bg-indigo-900/20",text:"text-indigo-700 dark:text-indigo-300"}].map(y=>t.jsxs("div",{className:`${y.bg} rounded-xl p-4 border border-gray-100 dark:border-slate-700`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(y.icon,{className:`w-4 h-4 ${y.text} opacity-70`}),t.jsx("p",{className:`text-xs font-medium ${y.text} opacity-80`,children:y.label})]}),t.jsx("p",{className:`text-2xl font-bold ${y.text}`,children:y.value})]},y.label))}),t.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx(_U,{className:"w-5 h-5 text-[#4A90E2]"})," Department Breakdown"]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:A.map(y=>{const w=y.icon,B=y.data,j=B.total||0,E=B.approved||0,S=B.pending||0,T=B.rejected||0,M=j>0?(E/j*100).toFixed(1):"0.0";return t.jsxs("div",{className:`${y.lightBg} rounded-xl p-5 border border-gray-100 dark:border-slate-700`,children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:`w-10 h-10 ${y.color} rounded-lg flex items-center justify-center`,children:t.jsx(w,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:`font-bold ${y.textColor}`,children:y.label}),t.jsxs("p",{className:"text-xs text-gray-500",children:[j," total applications"]})]}),t.jsxs("div",{className:"ml-auto text-right",children:[t.jsxs("p",{className:`text-2xl font-bold ${y.textColor}`,children:[M,"%"]}),t.jsx("p",{className:"text-xs text-gray-500",children:"approval rate"})]})]}),t.jsx("div",{className:"space-y-2",children:[{label:"Approved",value:E,color:"bg-green-500"},{label:"Pending",value:S,color:"bg-amber-500"},{label:"Rejected",value:T,color:"bg-red-500"}].map(D=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 w-16",children:D.label}),t.jsx("div",{className:"flex-1 bg-white/50 dark:bg-slate-800/50 rounded-full h-4 overflow-hidden",children:t.jsx("div",{className:`h-full ${D.color} rounded-full transition-all duration-500`,style:{width:b(D.value,j)}})}),t.jsx("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 w-8 text-right",children:D.value})]},D.label))})]},y.key)})}),t.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx(Kt,{className:"w-5 h-5 text-[#4A90E2]"})," Summary Table"]}),t.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200 dark:border-slate-700",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-slate-800",children:t.jsx("tr",{children:["Department","Total","Approved","Pending","Rejected","Approval Rate"].map(y=>t.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:y},y))})}),t.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:[A.map(y=>{const w=y.data,B=w.total||0,j=w.approved||0,E=B>0?(j/B*100).toFixed(1):"0.0",S=y.icon;return t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition",children:[t.jsx("td",{className:"px-5 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(S,{className:`w-4 h-4 ${y.textColor}`}),t.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.label})]})}),t.jsx("td",{className:"px-5 py-4 text-sm font-semibold text-gray-900 dark:text-white",children:B}),t.jsx("td",{className:"px-5 py-4",children:t.jsx("span",{className:"text-sm font-medium text-green-700 bg-green-50 dark:bg-green-900/30 px-2 py-0.5 rounded",children:j})}),t.jsx("td",{className:"px-5 py-4",children:t.jsx("span",{className:"text-sm font-medium text-amber-700 bg-amber-50 dark:bg-amber-900/30 px-2 py-0.5 rounded",children:w.pending||0})}),t.jsx("td",{className:"px-5 py-4",children:t.jsx("span",{className:"text-sm font-medium text-red-700 bg-red-50 dark:bg-red-900/30 px-2 py-0.5 rounded",children:w.rejected||0})}),t.jsx("td",{className:"px-5 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-16 bg-gray-200 dark:bg-slate-700 rounded-full h-2",children:t.jsx("div",{className:"bg-[#4CAF50] h-2 rounded-full",style:{width:`${E}%`}})}),t.jsxs("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:[E,"%"]})]})})]},y.key)}),t.jsxs("tr",{className:"bg-gray-50 dark:bg-slate-800 font-bold",children:[t.jsx("td",{className:"px-5 py-4 text-sm text-gray-900 dark:text-white",children:"GRAND TOTAL"}),t.jsx("td",{className:"px-5 py-4 text-sm text-gray-900 dark:text-white",children:g.total}),t.jsx("td",{className:"px-5 py-4 text-sm text-green-700",children:g.approved}),t.jsx("td",{className:"px-5 py-4 text-sm text-amber-700",children:g.pending}),t.jsx("td",{className:"px-5 py-4 text-sm text-red-700",children:g.rejected}),t.jsx("td",{className:"px-5 py-4",children:t.jsxs("span",{className:"text-sm font-bold text-[#4CAF50]",children:[p,"%"]})})]})]})]})})]})]})}const Dm={business:"Business Permit",building:"Building Permit",transport:"Franchise Permit",barangay:"Barangay Permit"},Ly={"Business Permit":"#4CAF50","Franchise Permit":"#4A90E2","Building Permit":"#FDA811","Barangay Permit":"#9C27B0"},sue={"Business Permit":Ba,"Franchise Permit":yd,"Building Permit":Ur,"Barangay Permit":rn},rue={Approved:"#4CAF50",APPROVED:"#4CAF50",Pending:"#FDA811",pending:"#FDA811",Rejected:"#E53935",rejected:"#E53935","For Compliance":"#4A90E2","Under Review":"#4A90E2"},Tm=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return a}};function aue(){const{user:a}=nw(),e=a?.department||"super",s=e==="super",[r,n]=C.useState([]),[i,o]=C.useState({total:0,approved:0,pending:0,rejected:0,totalExpired:0,expiringSoon:0}),[l,c]=C.useState(!0),[u,m]=C.useState(null),[A,g]=C.useState(""),[p,v]=C.useState("all"),[b,y]=C.useState("all"),[w,B]=C.useState("date"),[j,E]=C.useState("desc"),[S,T]=C.useState(1),[M,D]=C.useState(10),[P,Y]=C.useState(null),[Q,L]=C.useState(null),[ae,ne]=C.useState(""),[V,O]=C.useState(""),[X,$]=C.useState(!1),[H,te]=C.useState(null),K=async()=>{c(!0),m(null);try{const we=!s&&Dm[e]?`?department=${encodeURIComponent(Dm[e])}`:"",st=await fetch(`/backend/api/issued_permits.php${we}`);if(!st.ok)throw new Error(`HTTP ${st.status}`);const ce=await st.json();if(ce.success)n(ce.permits||[]),o(ce.stats||{});else throw new Error(ce.message||"Failed to fetch")}catch(we){console.error("IssuedPermits fetch error:",we),m("Failed to load permits. "+we.message)}finally{c(!1)}};C.useEffect(()=>{K()},[]);const I=s?["Business Permit","Building Permit","Franchise Permit","Barangay Permit"]:Dm[e]?[Dm[e]]:[],R=C.useMemo(()=>{let we=[...r];if(!s&&Dm[e]&&(we=we.filter(st=>st.permitCategory===Dm[e])),A.trim()){const st=A.toLowerCase();we=we.filter(ce=>(ce.applicantName||"").toLowerCase().includes(st)||(ce.businessName||"").toLowerCase().includes(st)||(ce.email||"").toLowerCase().includes(st)||(ce.id+"").toLowerCase().includes(st)||(ce.permitCategory||"").toLowerCase().includes(st))}return p!=="all"&&(we=we.filter(st=>st.permitCategory===p)),b!=="all"&&(b==="expired"?we=we.filter(st=>st.isExpired):b==="expiring"?we=we.filter(st=>!st.isExpired&&st.daysUntilExpiry!==null&&st.daysUntilExpiry<=30):we=we.filter(st=>st.status?.toLowerCase()===b.toLowerCase())),we.sort((st,ce)=>{const tt=j==="asc"?1:-1;return w==="date"?(new Date(st.submittedDate||0)-new Date(ce.submittedDate||0))*tt:w==="expiration"?(new Date(st.expirationDate||"2099-12-31")-new Date(ce.expirationDate||"2099-12-31"))*tt:w==="name"?(st.applicantName||"").localeCompare(ce.applicantName||"")*tt:w==="status"?(st.status||"").localeCompare(ce.status||"")*tt:0}),we},[r,A,p,b,w,j,s,e]),G=Math.max(1,Math.ceil(R.length/M)),se=R.slice((S-1)*M,S*M);C.useEffect(()=>{S>G&&T(1)},[G]);const le=we=>{const st=new Date().toISOString().split("T")[0],ce=we.approvedDate?we.approvedDate.split(" ")[0]:st;ne(ce);const tt=new Date(ce);tt.setFullYear(tt.getFullYear()+1),O(we.expirationDate?we.expirationDate.split(" ")[0]:tt.toISOString().split("T")[0]),L(we),te(null)},ye=we=>{if(ne(we),we){const st=new Date(we);st.setFullYear(st.getFullYear()+1),O(st.toISOString().split("T")[0])}},De=async()=>{if(Q){$(!0),te(null);try{const st=await(await fetch("/backend/api/update_expiration.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({permit_id:Q.id,permit_category:Q.permitCategory,approved_date:ae,expiration_date:V})})).json();if(st.success)te({type:"success",text:"Expiration date saved successfully!"}),setTimeout(()=>{L(null),te(null),K()},1500);else throw new Error(st.message||"Save failed")}catch(we){te({type:"error",text:"Failed to save: "+we.message})}finally{$(!1)}}},me=()=>{const we=["ID","Permit Category","Type","Status","Applicant","Business/Purpose","Email","Submitted","Approved Date","Expiration Date"],st=R.map(q=>[q.id,q.permitCategory,q.permitType,q.status,q.applicantName,q.businessName,q.email,q.submittedDate||"",q.approvedDate||"",q.expirationDate||""]),ce=[we,...st].map(q=>q.map(Qt=>`"${String(Qt||"").replace(/"/g,'""')}"`).join(",")).join(`
`),tt=new Blob(["\uFEFF"+ce],{type:"text/csv;charset=utf-8;"}),Ae=URL.createObjectURL(tt),gt=document.createElement("a");gt.href=Ae,gt.download=`permit_applications_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(gt),gt.click(),gt.remove(),URL.revokeObjectURL(Ae)},Te=we=>{const st=rue[we]||"#4D4A4A";return t.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full",style:{backgroundColor:`${st}15`,color:st},children:we})};return l?t.jsx("div",{className:"min-h-screen p-4 md:p-6 bg-[#FBFBFB] font-poppins flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-[#4CAF50] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-[#4D4A4A] font-montserrat",children:"Loading permit applications..."})]})}):u&&r.length===0?t.jsx("div",{className:"min-h-screen p-4 md:p-6 bg-[#FBFBFB] font-poppins flex items-center justify-center",children:t.jsxs("div",{className:"text-center bg-white rounded-lg p-8 shadow-sm border border-[#E9E7E7] max-w-md",children:[t.jsx(Ks,{className:"w-12 h-12 text-[#E53935] mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat mb-2",children:"Failed to Load"}),t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 mb-4",children:u}),t.jsxs("button",{onClick:K,className:"bg-[#4CAF50] text-white px-6 py-2 rounded-lg hover:bg-[#45a049] transition-colors font-montserrat",children:[t.jsx(Ya,{className:"w-4 h-4 inline mr-2"}),"Retry"]})]})}):t.jsxs("div",{className:"min-h-screen p-4 md:p-6 bg-[#FBFBFB] font-poppins",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-[#4D4A4A] font-montserrat",children:"Permit Applications"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 mt-2",children:s?"All permit applications across departments":`${Dm[e]||"Department"} applications`})]}),t.jsxs("div",{className:"flex items-center space-x-3 mt-3 md:mt-0",children:[t.jsxs("button",{onClick:K,disabled:l,className:"flex items-center space-x-2 bg-white border border-[#E9E7E7] text-[#4D4A4A] px-4 py-2 rounded-lg hover:bg-[#FBFBFB] transition-colors font-montserrat text-sm",children:[t.jsx(Ya,{className:`w-4 h-4 ${l?"animate-spin":""}`}),t.jsx("span",{children:"Refresh"})]}),t.jsxs("button",{onClick:me,className:"flex items-center space-x-2 bg-[#4CAF50] text-white px-4 py-2 rounded-lg hover:bg-[#45a049] transition-colors font-montserrat text-sm",children:[t.jsx(nn,{className:"w-4 h-4"}),t.jsx("span",{children:"Export CSV"})]})]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[{title:"Total Applications",value:i.total||0,icon:Kt,color:"#4CAF50",sub:"Across all statuses"},{title:"Approved",value:i.approved||0,icon:Us,color:"#4CAF50",sub:i.total>0?`${(i.approved/i.total*100).toFixed(1)}% approval rate`:"0%"},{title:"Pending",value:i.pending||0,icon:jr,color:"#FDA811",sub:i.total>0?`${(i.pending/i.total*100).toFixed(1)}% awaiting review`:"0%"},{title:"Rejected",value:i.rejected||0,icon:Ka,color:"#E53935",sub:i.total>0?`${(i.rejected/i.total*100).toFixed(1)}% rejection rate`:"0%"}].map((we,st)=>t.jsx("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] transition-all hover:shadow-md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:we.title}),t.jsx("p",{className:"text-2xl font-bold text-[#4D4A4A] mt-2 font-montserrat",children:we.value}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60 mt-1",children:we.sub})]}),t.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:we.color},children:t.jsx(we.icon,{className:"w-6 h-6 text-white"})})]})},st))}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:I.map((we,st)=>{const ce=r.filter(yt=>yt.permitCategory===we),tt=ce.filter(yt=>yt.status?.toUpperCase()==="APPROVED").length,Ae=ce.filter(yt=>yt.status?.toLowerCase()==="pending").length,gt=ce.filter(yt=>yt.status?.toLowerCase()==="rejected").length,q=Ly[we]||"#4D4A4A",Qt=sue[we]||Kt;return t.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] hover:shadow-md transition-all",style:{borderTopWidth:"3px",borderTopColor:q},children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${q}15`},children:t.jsx(Qt,{className:"w-5 h-5",style:{color:q}})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-[#4D4A4A] font-montserrat text-sm",children:we.replace(" Permit","")}),t.jsx("p",{className:"text-xl font-bold font-montserrat",style:{color:q},children:ce.length})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[t.jsxs("div",{className:"bg-[#4CAF50]/10 rounded-lg py-1.5",children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60",children:"Approved"}),t.jsx("p",{className:"text-sm font-bold text-[#4CAF50]",children:tt})]}),t.jsxs("div",{className:"bg-[#FDA811]/10 rounded-lg py-1.5",children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60",children:"Pending"}),t.jsx("p",{className:"text-sm font-bold text-[#FDA811]",children:Ae})]}),t.jsxs("div",{className:"bg-[#E53935]/10 rounded-lg py-1.5",children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60",children:"Rejected"}),t.jsx("p",{className:"text-sm font-bold text-[#E53935]",children:gt})]})]})]},st)})}),(i.totalExpired>0||i.expiringSoon>0)&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.totalExpired>0&&t.jsx("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] border-l-4 border-l-[#E53935]",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 text-sm font-poppins",children:"Expired Permits"}),t.jsx("p",{className:"text-2xl font-bold text-[#E53935] font-montserrat mt-1",children:i.totalExpired}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60 mt-1",children:"Permits past their expiration date"})]}),t.jsx(Ka,{className:"w-8 h-8 text-[#E53935]"})]})}),i.expiringSoon>0&&t.jsx("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-[#E9E7E7] border-l-4 border-l-[#FDA811]",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[#4D4A4A] text-opacity-70 text-sm font-poppins",children:"Expiring Soon (30 days)"}),t.jsx("p",{className:"text-2xl font-bold text-[#FDA811] font-montserrat mt-1",children:i.expiringSoon}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60 mt-1",children:"Approved permits expiring within 30 days"})]}),t.jsx(Ap,{className:"w-8 h-8 text-[#FDA811]"})]})})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-[#E9E7E7] p-5 mb-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[t.jsx("div",{className:"flex items-center space-x-3 flex-1",children:t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(sa,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-[#4D4A4A] text-opacity-50"}),t.jsx("input",{type:"text",placeholder:"Search applications...",value:A,onChange:we=>{g(we.target.value),T(1)},className:"w-full pl-9 pr-4 py-2 bg-white border border-[#E9E7E7] rounded-lg text-sm text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins"})]})}),t.jsxs("div",{className:"flex items-center space-x-3 flex-wrap gap-y-2",children:[s&&t.jsxs("select",{value:p,onChange:we=>{v(we.target.value),T(1)},className:"bg-white border border-[#E9E7E7] rounded-lg px-3 py-2 text-sm text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Categories"}),I.map(we=>t.jsx("option",{value:we,children:we},we))]}),t.jsxs("select",{value:b,onChange:we=>{y(we.target.value),T(1)},className:"bg-white border border-[#E9E7E7] rounded-lg px-3 py-2 text-sm text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"approved",children:"Approved"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"rejected",children:"Rejected"}),t.jsx("option",{value:"expired",children:"Expired"}),t.jsx("option",{value:"expiring",children:"Expiring Soon"})]}),t.jsxs("select",{value:w,onChange:we=>B(we.target.value),className:"bg-white border border-[#E9E7E7] rounded-lg px-3 py-2 text-sm text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins",children:[t.jsx("option",{value:"date",children:"Sort by Date"}),t.jsx("option",{value:"expiration",children:"Sort by Expiration"}),t.jsx("option",{value:"name",children:"Sort by Name"}),t.jsx("option",{value:"status",children:"Sort by Status"})]}),t.jsx("button",{onClick:()=>E(we=>we==="asc"?"desc":"asc"),className:"px-3 py-2 bg-white border border-[#E9E7E7] rounded-lg text-sm text-[#4D4A4A] hover:bg-[#FBFBFB] font-poppins",children:j==="asc"?" Asc":" Desc"})]})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-[#E9E7E7] overflow-hidden mb-6",children:[t.jsxs("div",{className:"p-5 border-b border-[#E9E7E7]",children:[t.jsx("h3",{className:"text-lg font-semibold text-[#4D4A4A] font-montserrat",children:"Permit Applications"}),t.jsxs("p",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:["Showing ",se.length," of ",R.length," applications"]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-[#FBFBFB]",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"ID"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Category"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Applicant"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Business / Purpose"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Date"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Expiration"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-[#4D4A4A] uppercase tracking-wider font-montserrat",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-[#E9E7E7]",children:se.length>0?se.map((we,st)=>{const ce=Ly[we.permitCategory]||"#4D4A4A";return t.jsxs("tr",{className:"hover:bg-[#FBFBFB] transition-colors",children:[t.jsx("td",{className:"px-4 py-3 text-sm font-mono font-semibold text-[#4D4A4A]",children:we.id}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:ce}}),t.jsx("span",{className:"text-xs font-medium text-[#4D4A4A] font-poppins",children:we.permitCategory.replace(" Permit","")})]})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"text-sm font-medium text-[#4D4A4A]",children:we.applicantName||"N/A"}),t.jsx("div",{className:"text-xs text-[#4D4A4A] text-opacity-50",children:we.email})]}),t.jsx("td",{className:"px-4 py-3 text-sm text-[#4D4A4A] text-opacity-70 max-w-[180px] truncate",children:we.businessName||"N/A"}),t.jsx("td",{className:"px-4 py-3 text-xs text-[#4D4A4A] text-opacity-70",children:Tm(we.submittedDate||we.approvedDate)}),t.jsx("td",{className:"px-4 py-3",children:Te(we.status)}),t.jsx("td",{className:"px-4 py-3",children:we.status?.toUpperCase()==="APPROVED"?t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-[#4D4A4A] font-medium",children:Tm(we.expirationDate)}),we.isExpired&&t.jsxs("span",{className:"text-xs font-semibold text-[#E53935]",children:[Math.abs(we.daysUntilExpiry),"d overdue"]}),!we.isExpired&&we.daysUntilExpiry!==null&&we.daysUntilExpiry<=30&&t.jsxs("span",{className:"text-xs font-semibold text-[#FDA811]",children:[we.daysUntilExpiry,"d left"]}),!we.isExpired&&we.daysUntilExpiry!==null&&we.daysUntilExpiry>30&&t.jsxs("span",{className:"text-xs text-[#4CAF50]",children:[we.daysUntilExpiry,"d left"]})]}):t.jsx("span",{className:"text-xs text-[#4D4A4A] text-opacity-40",children:""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("button",{onClick:()=>Y(we),className:"p-1.5 text-[#4A90E2] hover:bg-[#4A90E2]/10 rounded-lg transition-colors",title:"View Details",children:t.jsx(ws,{className:"w-4 h-4"})}),we.status?.toUpperCase()==="APPROVED"&&t.jsx("button",{onClick:()=>le(we),className:"p-1.5 text-[#4CAF50] hover:bg-[#4CAF50]/10 rounded-lg transition-colors",title:"Set Expiration",children:t.jsx(iB,{className:"w-4 h-4"})})]})})]},`${we.permitCategory}-${we.id}-${st}`)}):t.jsx("tr",{children:t.jsxs("td",{colSpan:"8",className:"px-6 py-12 text-center",children:[t.jsx(Kt,{className:"w-12 h-12 text-[#4D4A4A] text-opacity-30 mx-auto mb-3"}),t.jsx("p",{className:"text-[#4D4A4A] text-opacity-60 font-poppins",children:"No applications found matching your filters."})]})})})]})}),t.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-t border-[#E9E7E7] bg-[#FBFBFB]",children:[t.jsxs("div",{className:"text-sm text-[#4D4A4A] text-opacity-60 font-poppins",children:["Page ",S," of ",G]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("select",{value:M,onChange:we=>{D(Number(we.target.value)),T(1)},className:"border border-[#E9E7E7] rounded px-2 py-1 text-sm text-[#4D4A4A] font-poppins",children:[t.jsx("option",{value:10,children:"10/page"}),t.jsx("option",{value:25,children:"25/page"}),t.jsx("option",{value:50,children:"50/page"})]}),t.jsx("button",{onClick:()=>T(we=>Math.max(1,we-1)),disabled:S===1,className:"p-1.5 border border-[#E9E7E7] rounded hover:bg-white disabled:opacity-40 transition-colors",children:t.jsx(s5,{className:"w-4 h-4 text-[#4D4A4A]"})}),t.jsx("button",{onClick:()=>T(we=>Math.min(G,we+1)),disabled:S===G,className:"p-1.5 border border-[#E9E7E7] rounded hover:bg-white disabled:opacity-40 transition-colors",children:t.jsx(pA,{className:"w-4 h-4 text-[#4D4A4A]"})})]})]})]}),P&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Y(null)}),t.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-lg p-6 z-10 mx-4 border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-start justify-between mb-5",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-[#4D4A4A] font-montserrat",children:"Application Details"}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Ly[P.permitCategory]||"#4D4A4A"}}),t.jsx("span",{className:"text-sm text-[#4D4A4A] text-opacity-70 font-poppins",children:P.permitCategory})]})]}),t.jsx("button",{onClick:()=>Y(null),className:"text-[#4D4A4A] text-opacity-40 hover:text-opacity-100 text-xl leading-none",children:""})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex justify-center mb-2",children:Te(P.status)}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-50 font-montserrat uppercase tracking-wide",children:"Permit ID"}),t.jsx("p",{className:"font-mono font-semibold text-[#4D4A4A]",children:P.id})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-50 font-montserrat uppercase tracking-wide",children:"Type"}),t.jsx("p",{className:"font-medium text-[#4D4A4A]",children:P.permitType})]})]}),t.jsxs("div",{className:"bg-[#FBFBFB] rounded-lg p-4 border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(gr,{className:"w-4 h-4 text-[#4D4A4A] text-opacity-50 mr-2"}),t.jsx("span",{className:"text-sm font-medium text-[#4D4A4A]",children:P.applicantName||"N/A"})]}),t.jsxs("div",{className:"text-xs text-[#4D4A4A] text-opacity-60 space-y-1 ml-6",children:[t.jsx("p",{children:P.email||"N/A"}),t.jsx("p",{children:P.contactNumber||"N/A"}),t.jsx("p",{children:P.address||"N/A"})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-50 font-montserrat uppercase tracking-wide",children:"Business / Purpose"}),t.jsx("p",{className:"text-sm text-[#4D4A4A]",children:P.businessName||"N/A"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-3 border-t border-[#E9E7E7]",children:[t.jsxs("div",{className:"text-center p-3 bg-[#FBFBFB] rounded-lg",children:[t.jsx(bn,{className:"w-4 h-4 mx-auto mb-1 text-[#4A90E2]"}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-50",children:"Submitted"}),t.jsx("p",{className:"text-xs font-semibold text-[#4D4A4A]",children:Tm(P.submittedDate)})]}),t.jsxs("div",{className:"text-center p-3 bg-[#FBFBFB] rounded-lg",children:[t.jsx(Us,{className:"w-4 h-4 mx-auto mb-1 text-[#4CAF50]"}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-50",children:"Approved"}),t.jsx("p",{className:"text-xs font-semibold text-[#4CAF50]",children:Tm(P.approvedDate)})]}),t.jsxs("div",{className:"text-center p-3 bg-[#FBFBFB] rounded-lg",children:[t.jsx(Ap,{className:"w-4 h-4 mx-auto mb-1 text-[#FDA811]"}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-50",children:"Expires"}),t.jsx("p",{className:`text-xs font-semibold ${P.isExpired?"text-[#E53935]":"text-[#4D4A4A]"}`,children:Tm(P.expirationDate)})]})]})]}),t.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[P.status?.toUpperCase()==="APPROVED"&&t.jsxs("button",{onClick:()=>{Y(null),le(P)},className:"flex items-center space-x-2 bg-[#4CAF50] text-white px-4 py-2 rounded-lg hover:bg-[#45a049] transition-colors font-montserrat text-sm",children:[t.jsx(iB,{className:"w-4 h-4"}),t.jsx("span",{children:"Set Expiration"})]}),t.jsx("button",{onClick:()=>Y(null),className:"px-4 py-2 bg-white border border-[#E9E7E7] text-[#4D4A4A] rounded-lg hover:bg-[#FBFBFB] transition-colors font-montserrat text-sm",children:"Close"})]})]})]}),Q&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>!X&&L(null)}),t.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-md p-6 z-10 mx-4 border border-[#E9E7E7]",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-lg font-bold text-[#4D4A4A] font-montserrat flex items-center gap-2",children:[t.jsx(T6,{className:"w-5 h-5 text-[#4CAF50]"})," Generate Expiration Date"]}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-60 mt-1 font-poppins",children:"Visible to the applicant in their tracker."})]}),t.jsx("button",{onClick:()=>!X&&L(null),className:"text-[#4D4A4A] text-opacity-40 hover:text-opacity-100 text-xl leading-none",children:""})]}),t.jsx("div",{className:"bg-[#FBFBFB] rounded-lg p-3 mb-4 border border-[#E9E7E7]",children:t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-[#4D4A4A] text-opacity-50 text-xs",children:"Permit ID"}),t.jsx("p",{className:"font-mono font-semibold text-[#4D4A4A]",children:Q.id})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-[#4D4A4A] text-opacity-50 text-xs",children:"Category"}),t.jsx("p",{className:"text-xs font-medium",style:{color:Ly[Q.permitCategory]},children:Q.permitCategory})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("span",{className:"text-[#4D4A4A] text-opacity-50 text-xs",children:"Applicant"}),t.jsx("p",{className:"font-medium text-[#4D4A4A]",children:Q.applicantName||"N/A"})]})]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[#4D4A4A] mb-1 font-montserrat",children:"Approved Date"}),t.jsx("input",{type:"date",value:ae,onChange:we=>ye(we.target.value),className:"w-full px-3 py-2 border border-[#E9E7E7] rounded-lg text-sm text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[#4D4A4A] mb-1 font-montserrat",children:"Expiration Date"}),t.jsx("input",{type:"date",value:V,onChange:we=>O(we.target.value),className:"w-full px-3 py-2 border border-[#E9E7E7] rounded-lg text-sm text-[#4D4A4A] focus:ring-2 focus:ring-[#4CAF50] focus:border-transparent font-poppins"}),t.jsx("p",{className:"text-xs text-[#4D4A4A] text-opacity-50 mt-1",children:"Defaults to 1 year after approval."})]}),ae&&V&&t.jsxs("div",{className:"bg-[#4CAF50]/10 border border-[#4CAF50]/30 rounded-lg p-3 text-sm",children:[t.jsx("p",{className:"text-[#4CAF50] font-semibold font-montserrat",children:"Validity Period:"}),t.jsxs("p",{className:"text-[#4D4A4A]",children:[Tm(ae),"  ",Tm(V),t.jsxs("span",{className:"text-[#4CAF50] ml-1 font-semibold",children:["(",Math.round((new Date(V)-new Date(ae))/864e5)," days)"]})]})]}),H&&t.jsx("div",{className:`p-3 rounded-lg text-sm border ${H.type==="success"?"bg-[#4CAF50]/10 border-[#4CAF50]/30 text-[#4CAF50]":"bg-[#E53935]/10 border-[#E53935]/30 text-[#E53935]"}`,children:H.text})]}),t.jsxs("div",{className:"mt-5 flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>!X&&L(null),disabled:X,className:"px-4 py-2 bg-white border border-[#E9E7E7] text-[#4D4A4A] rounded-lg hover:bg-[#FBFBFB] transition-colors font-montserrat text-sm",children:"Cancel"}),t.jsxs("button",{onClick:De,disabled:X||!ae||!V,className:"px-4 py-2 bg-[#4CAF50] text-white rounded-lg hover:bg-[#45a049] transition-colors font-montserrat text-sm flex items-center gap-1 disabled:opacity-50",children:[X?t.jsx(Or,{className:"w-4 h-4 animate-spin"}):t.jsx(X8,{className:"w-4 h-4"}),X?"Saving...":"Save Expiration"]})]})]})]})]})}function nue(){const a=ka(),[e,s]=C.useState([]),[r,n]=C.useState(!0),[i,o]=C.useState(null),[l,c]=C.useState(""),[u,m]=C.useState("all"),[A,g]=C.useState("date"),[p,v]=C.useState("desc"),[b,y]=C.useState(1),[w,B]=C.useState(10),[j,E]=C.useState(null),S=($,H,te)=>{const K=$.id||$.permit?.permitNo||$.permit_number||`${H}-${te}`,I=$.applicant?.full_name||$.applicant?.contact_person||[$.applicant?.first_name,$.applicant?.last_name].filter(Boolean).join(" ")||$.name||"",R=$.permit_type||($.permit&&$.permit.status?$.permit.status:"")||$.permit?.permitNo||$.permit_number||"",G=$.status||$.permit?.status||$.review_status||$.internal_status||"Pending",se=$.submitted_at||$.last_updated||$.permit?.issued||$.date_submitted||$.date_paid||null,le=$.internal_notes||$.review_comments||$.remarks||"";return{id:K,permitType:R,applicantName:I,status:G,timestamp:se,comment:le,source:H,raw:$}},T=()=>{const $=[];[{data:franchiseFormMock,source:"franchise-form"},{data:franchiseAdminMock,source:"franchise-admin"},{data:businessAdminMock,source:"business"},{data:buildingAdminMock,source:"building"},{data:barangayAdminMock,source:"barangay"}].forEach(te=>{Array.isArray(te.data)&&te.data.forEach((K,I)=>$.push(S(K,te.source,I)))});const H=new Map;return $.forEach(te=>{H.has(te.id)||H.set(te.id,te)}),Array.from(H.values())};C.useEffect(()=>{let $=!0;return n(!0),o(null),fetch("/api/permittracker/track").then(H=>{if(!H.ok)throw new Error(`HTTP ${H.status}`);return H.json()}).then(H=>{if(!$)return;const te=Array.isArray(H)?H:[],K=T(),I=new Map;te.forEach((R,G)=>{const se=R.id||`fetched-${G}`;I.set(se,{id:se,permitType:R.permitType||R.permit_type||R.permit_number||"",applicantName:R.applicantName||R.applicant?.full_name||"",status:R.status||"",timestamp:R.timestamp||R.date||R.submitted_at||null,comment:R.comment||"",source:"api",raw:R})}),K.forEach(R=>{I.has(R.id)||I.set(R.id,R)}),s(Array.from(I.values())),n(!1)}).catch(H=>{console.warn("E-Permit Tracker Service error, loading local mocks and tx_log:",H);try{const te=getTxs?getTxs():JSON.parse(localStorage.getItem("tx_log")||"[]"),K=Array.isArray(te)?te.map((G,se)=>({id:G.id||`local-${se}`,permitType:G.permitType||G.permit_type||"",applicantName:G.applicantName||G.applicant?.full_name||"",status:G.status||"",timestamp:G.timestamp||G.date||G.submitted_at||null,comment:G.comment||"",source:"local",raw:G})):[],I=T(),R=new Map;K.forEach(G=>R.set(G.id,G)),I.forEach(G=>{R.has(G.id)||R.set(G.id,G)}),$&&s(Array.from(R.values()))}catch(te){console.error("Failed to load fallback tx_log:",te),$&&o("Failed to load transactions")}finally{$&&n(!1)}}),()=>$=!1},[]);const M=$=>{if(!$)return"N/A";try{const H=new Date($);return new Intl.DateTimeFormat(void 0,{dateStyle:"medium",timeStyle:"short"}).format(H)}catch{return $}},D=$=>$==="Approved"?"text-green-700 bg-green-100":$==="Pending"?"text-yellow-700 bg-yellow-100":"text-red-700 bg-red-100",P=C.useMemo(()=>{let $=e||[];if(l.trim()){const H=l.toLowerCase();$=$.filter(te=>(te.id+" "+(te.permitType||"")+" "+(te.applicantName||"")).toLowerCase().includes(H))}return u!=="all"&&($=$.filter(H=>H.status===u)),$=$.slice().sort((H,te)=>{const K=p==="asc"?1:-1;return A==="date"?(new Date(H.timestamp||H.date||0)-new Date(te.timestamp||te.date||0))*K:A==="id"?(H.id||"").localeCompare(te.id||"")*K:A==="status"?(H.status||"").localeCompare(te.status||"")*K:0}),$},[e,l,u,A,p]),Y=P.length,Q=Math.max(1,Math.ceil(Y/w)),L=P.slice((b-1)*w,b*w);C.useEffect(()=>{b>Q&&y(1)},[Q]);const ae=$=>{E($)},ne=$=>{a&&a(`/admin/permit-tracker/edit/${$}`)},V=async $=>{if(window.confirm("Are you sure you want to delete transaction "+$+"?"))try{const te=await fetch(`/api/permittracker/delete/${$}`,{method:"DELETE"});if(!te.ok)throw new Error(`HTTP ${te.status}`);s(K=>K.filter(I=>I.id!==$));try{const I=JSON.parse(localStorage.getItem("tx_log")||"[]").filter(R=>R.id!==$);localStorage.setItem("tx_log",JSON.stringify(I))}catch{}}catch(te){console.warn("Delete API failed, deleting locally:",te),s(K=>K.filter(I=>I.id!==$));try{const I=JSON.parse(localStorage.getItem("tx_log")||"[]").filter(R=>R.id!==$);localStorage.setItem("tx_log",JSON.stringify(I))}catch(K){console.error("Failed to update local tx_log:",K)}}},O=()=>{const H=[["ID","Permit Type","Applicant","Status","Date","Comment"],...P.map(R=>[R.id||"",R.permitType||"",R.applicantName||"",R.status||"",R.timestamp||R.date||"",(R.comment||"").replace(/\n/g," ")])].map(R=>R.map(G=>`"${String(G).replace(/"/g,'""')}"`).join(",")).join(`
`),te=new Blob([H],{type:"text/csv;charset=utf-8;"}),K=URL.createObjectURL(te),I=document.createElement("a");I.href=K,I.download=`transactions_${new Date().toISOString()}.csv`,document.body.appendChild(I),I.click(),I.remove(),URL.revokeObjectURL(K)},X=()=>{try{const $=getTxs?getTxs():JSON.parse(localStorage.getItem("tx_log")||"[]");s(Array.isArray($)?$:[])}catch($){console.error("Load sample failed:",$),o("Failed to load sample data")}};return r?t.jsx("p",{children:"Loading transactions..."}):t.jsxs("div",{className:"p-6 bg-gray-50 rounded-lg shadow",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"E-Permit Tracker"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:O,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",title:"Export visible transactions to CSV",children:"Export CSV"}),t.jsx("button",{onClick:X,className:"px-3 py-1 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",title:"Reload sample data from local tx_log",children:"Load sample"})]})]}),i&&t.jsx("div",{className:"mb-4 text-red-600",children:i}),t.jsxs("div",{className:"flex gap-3 items-center mb-3",children:[t.jsx("input",{"aria-label":"Search transactions",className:"border p-2 rounded w-64",placeholder:"Search by ID, applicant, permit type...",value:l,onChange:$=>c($.target.value)}),t.jsxs("select",{value:u,onChange:$=>m($.target.value),className:"border p-2 rounded",children:[t.jsx("option",{value:"all",children:"All status"}),t.jsx("option",{value:"Pending",children:"Pending"}),t.jsx("option",{value:"Approved",children:"Approved"}),t.jsx("option",{value:"Rejected",children:"Rejected"})]}),t.jsxs("select",{value:A,onChange:$=>g($.target.value),className:"border p-2 rounded",children:[t.jsx("option",{value:"date",children:"Sort by Date"}),t.jsx("option",{value:"id",children:"Sort by ID"}),t.jsx("option",{value:"status",children:"Sort by Status"})]}),t.jsx("button",{onClick:()=>v($=>$==="asc"?"desc":"asc"),className:"px-2 py-1 border rounded",title:"Toggle sort direction",children:p==="asc"?"":""}),t.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[t.jsx("label",{className:"text-sm",children:"Page size"}),t.jsxs("select",{value:w,onChange:$=>B(Number($.target.value)),className:"border p-1 rounded",children:[t.jsx("option",{value:5,children:"5"}),t.jsx("option",{value:10,children:"10"}),t.jsx("option",{value:25,children:"25"})]})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border border-gray-200 text-sm",children:[t.jsx("thead",{className:"bg-gray-100",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-2 border text-left",children:"ID"}),t.jsx("th",{className:"p-2 border text-left",children:"Permit Type"}),t.jsx("th",{className:"p-2 border text-left",children:"Applicant"}),t.jsx("th",{className:"p-2 border text-left",children:"Status"}),t.jsx("th",{className:"p-2 border text-left",children:"Date"}),t.jsx("th",{className:"p-2 border text-left",children:"Actions"})]})}),t.jsx("tbody",{children:L.length>0?L.map($=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"p-2 border",children:$.id}),t.jsx("td",{className:"p-2 border",children:$.permitType||"-"}),t.jsx("td",{className:"p-2 border",children:$.applicantName||"-"}),t.jsx("td",{className:"p-2 border",children:t.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-medium rounded ${D($.status)}`,children:$.status||"Unknown"})}),t.jsx("td",{className:"p-2 border",children:M($.timestamp||$.date)}),t.jsxs("td",{className:"p-2 border flex gap-2",children:[t.jsx("button",{onClick:()=>ae($),className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"View"}),t.jsx("button",{onClick:()=>ne($.id),className:"px-2 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Edit"}),t.jsx("button",{onClick:()=>V($.id),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})]})]},$.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:"6",className:"text-center p-4 text-gray-500",children:"No transactions found."})})})]})}),t.jsxs("div",{className:"flex items-center justify-between mt-4",children:[t.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",L.length," of ",Y," transactions"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>y($=>Math.max(1,$-1)),className:"px-2 py-1 border rounded",disabled:b===1,children:"Prev"}),t.jsxs("div",{className:"px-3 py-1 border rounded",children:[b," / ",Q]}),t.jsx("button",{onClick:()=>y($=>Math.min(Q,$+1)),className:"px-2 py-1 border rounded",disabled:b===Q,children:"Next"})]})]}),j&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-black opacity-30",onClick:()=>E(null)}),t.jsxs("div",{className:"relative bg-white rounded shadow-lg w-full max-w-2xl p-6 z-10",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("h2",{className:"text-xl font-semibold",children:["Transaction ",j.id]}),t.jsx("button",{"aria-label":"Close",onClick:()=>E(null),className:"text-gray-600 hover:text-black",children:""})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"Permit type"}),t.jsx("div",{className:"font-medium",children:j.permitType||"-"}),t.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Applicant"}),t.jsx("div",{className:"font-medium",children:j.applicantName||"-"}),t.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Status"}),t.jsx("div",{className:`inline-block px-2 py-0.5 mt-1 text-sm rounded ${D(j.status)}`,children:j.status})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"Date"}),t.jsx("div",{className:"font-medium",children:M(j.timestamp||j.date)}),t.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Reference / Comment"}),t.jsx("div",{className:"whitespace-pre-wrap mt-1",children:j.comment||"-"})]})]}),t.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>{E(null),ne(j.id)},className:"px-3 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Edit"}),t.jsx("button",{onClick:()=>{V(j.id),E(null)},className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"}),t.jsx("button",{onClick:()=>E(null),className:"px-3 py-1 border rounded",children:"Close"})]})]})]})]})}const iue={login:ow,logout:lw,registration:aA,"account registration":aA,"permit submission":Fp,"permit approved":Us,"permit rejected":Ka,"for compliance":Ap,"under review":ws,"profile update":gr,"password change":Pr,"page visit":ws},i6={account:{bg:"bg-cyan-100 dark:bg-cyan-900/30",text:"text-cyan-700 dark:text-cyan-300",label:"Account"},permit:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300",label:"Permit"},navigation:{bg:"bg-slate-100 dark:bg-slate-700",text:"text-slate-600 dark:text-slate-300",label:"Navigation"},system:{bg:"bg-gray-100 dark:bg-gray-900/30",text:"text-gray-700 dark:text-gray-300",label:"System"}};function oue(){const[a,e]=C.useState([]),[s,r]=C.useState(null),[n,i]=C.useState([]),[o,l]=C.useState(!0),[c,u]=C.useState(null),[m,A]=C.useState(""),[g,p]=C.useState("all"),[v,b]=C.useState(""),[y,w]=C.useState(""),[B,j]=C.useState(""),[E,S]=C.useState(1),[T,M]=C.useState(null),[D,P]=C.useState(null),[Y,Q]=C.useState(!0),[L,ae]=C.useState(20),[ne,V]=C.useState(!1);C.useEffect(()=>{O()},[E,g,v,L]);const O=async()=>{try{l(!0),u(null);const se=new URLSearchParams({mode:"all",page:E,limit:L,category:g});m&&se.append("search",m),v&&se.append("filter_user",v),y&&se.append("date_from",y),B&&se.append("date_to",B);const le=await fetch(`/backend/api/audit_trail.php?${se}`,{credentials:"include"});if(!le.ok)throw new Error(`HTTP ${le.status}`);const ye=await le.json();ye.success?(e(ye.activities||[]),r(ye.stats||null),M(ye.pagination||null),ye.users&&i(ye.users)):u(ye.message||"Failed to fetch audit trail")}catch(se){console.error("Audit trail fetch error:",se),u("Failed to load audit trail. Please try again.")}finally{l(!1)}},X=se=>{se.preventDefault(),S(1),O()},$=()=>{S(1),O()},H=()=>{A(""),p("all"),b(""),w(""),j(""),S(1),setTimeout(()=>O(),0)},te=se=>{b(se),S(1),V(!1),setTimeout(()=>O(),0)},K=se=>iue[se?.toLowerCase()]||bd,I=se=>i6[se]||i6.system,R=se=>se?new Date(se).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",G=()=>{if(!a.length)return;const se=["ID","Date","User","Email","Role","Action","Category","Description","Module","Reference"],le=a.map(we=>[we.id,we.date||"",we.user_name,we.user_email,we.user_role,we.action,we.action_category,we.description,we.module,we.reference_id]),ye=[se,...le].map(we=>we.map(st=>`"${(st||"").replace(/"/g,'""')}"`).join(",")).join(`
`),De=new Blob([ye],{type:"text/csv"}),me=URL.createObjectURL(De),Te=document.createElement("a");Te.href=me,Te.download=`audit_trail_${new Date().toISOString().split("T")[0]}.csv`,Te.click(),URL.revokeObjectURL(me)};return t.jsxs("div",{className:"max-w-full mx-auto space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(bd,{className:"w-7 h-7 text-[#4CAF50]"}),"Audit Activity Trail"]}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Track every user action across the entire system"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>V(!ne),className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[t.jsx(yd,{className:"w-4 h-4"}),"Users (",n.length,")"]}),t.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[t.jsx(Ya,{className:`w-4 h-4 ${o?"animate-spin":""}`}),"Refresh"]}),t.jsxs("button",{onClick:G,className:"flex items-center gap-2 px-4 py-2 bg-[#4CAF50] text-white rounded-xl text-sm hover:bg-[#43A047] transition-colors",children:[t.jsx(nn,{className:"w-4 h-4"}),"Export"]})]})]}),s&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-2xl p-4 border border-blue-100 dark:border-blue-800",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(bd,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"text-2xl font-bold text-blue-600",children:s.total})]}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:"Total Activities"})]}),t.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-2xl p-4 border border-indigo-100 dark:border-indigo-800",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(yd,{className:"w-5 h-5 text-indigo-600"}),t.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:s.unique_users})]}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:"Unique Users"})]}),t.jsxs("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 rounded-2xl p-4 border border-cyan-100 dark:border-cyan-800",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ow,{className:"w-5 h-5 text-cyan-600"}),t.jsx("span",{className:"text-2xl font-bold text-cyan-600",children:s.by_category?.account||0})]}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:"Account Activities"})]}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-2xl p-4 border border-green-100 dark:border-green-800",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(Fp,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-2xl font-bold text-green-600",children:s.by_category?.permit||0})]}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:"Permit Activities"})]})]}),s?.by_action&&Object.keys(s.by_action).length>0&&t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3",children:"Activity Breakdown"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(s.by_action).sort((se,le)=>le[1]-se[1]).map(([se,le])=>{const ye=K(se);return t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 text-xs font-medium text-slate-700 dark:text-slate-300",children:[t.jsx(ye,{className:"w-3.5 h-3.5"}),se,t.jsx("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-slate-200 dark:bg-slate-700 text-xs font-bold",children:le})]},se)})})]}),ne&&n.length>0&&t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(yd,{className:"w-4 h-4 text-slate-400"}),"System Users"]}),v&&t.jsx("button",{onClick:()=>te(""),className:"text-xs text-red-500 hover:underline",children:"Clear user filter"})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 max-h-60 overflow-y-auto",children:n.map(se=>t.jsxs("button",{onClick:()=>te(se.email),className:`flex items-center gap-3 p-3 rounded-xl border text-left transition-colors ${v===se.email?"bg-[#4CAF50]/10 border-[#4CAF50] ring-1 ring-[#4CAF50]":"border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[t.jsx("div",{className:"w-9 h-9 rounded-full bg-slate-200 dark:bg-slate-600 flex items-center justify-center shrink-0",children:t.jsx(gr,{className:"w-4 h-4 text-slate-500 dark:text-slate-300"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white truncate",children:se.name||se.email.split("@")[0]}),t.jsx("p",{className:"text-xs text-slate-400 truncate",children:se.email})]}),t.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-100 dark:bg-slate-700 text-xs font-bold text-slate-600 dark:text-slate-300 shrink-0",children:se.activity_count})]},se.email))})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4",children:[t.jsxs("button",{onClick:()=>Q(!Y),className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-200 w-full",children:[t.jsx(Rx,{className:"w-4 h-4"}),"Filters & Search",v&&t.jsxs("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-[#4CAF50]/10 text-[#4CAF50] text-xs",children:["Filtered: ",v]}),t.jsx(fd,{className:`w-4 h-4 ml-auto transition-transform ${Y?"rotate-180":""}`})]}),Y&&t.jsxs("div",{className:"mt-4 space-y-4",children:[t.jsxs("form",{onSubmit:X,className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),t.jsx("input",{type:"text",value:m,onChange:se=>A(se.target.value),placeholder:"Search by user name, email, description...",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#4CAF50] dark:text-white"})]}),t.jsx("button",{type:"submit",className:"px-4 py-2.5 bg-[#4CAF50] text-white rounded-xl text-sm hover:bg-[#43A047] transition-colors",children:"Search"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[t.jsxs("select",{value:g,onChange:se=>{p(se.target.value),S(1)},className:"px-3 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#4CAF50] dark:text-white",children:[t.jsx("option",{value:"all",children:"All Categories"}),t.jsx("option",{value:"account",children:"Account (Login/Register/Logout)"}),t.jsx("option",{value:"permit",children:"Permit Activities"}),t.jsx("option",{value:"navigation",children:"Page Visits"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),t.jsx("input",{type:"date",value:y,onChange:se=>w(se.target.value),className:"w-full pl-10 pr-3 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#4CAF50] dark:text-white"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),t.jsx("input",{type:"date",value:B,onChange:se=>j(se.target.value),className:"w-full pl-10 pr-3 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#4CAF50] dark:text-white"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:$,className:"flex-1 px-3 py-2.5 bg-blue-600 text-white rounded-xl text-sm hover:bg-blue-700 transition-colors",children:"Apply"}),t.jsx("button",{onClick:H,className:"px-3 py-2.5 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl text-sm hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Clear"})]})]})]})]}),t.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:o?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[t.jsx(Or,{className:"w-8 h-8 text-[#4CAF50] animate-spin mb-3"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Loading audit trail..."})]}):c?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[t.jsx(Ka,{className:"w-8 h-8 text-red-400 mb-3"}),t.jsx("p",{className:"text-sm text-red-500",children:c}),t.jsx("button",{onClick:O,className:"mt-3 px-4 py-2 bg-[#4CAF50] text-white rounded-xl text-sm hover:bg-[#43A047]",children:"Retry"})]}):a.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[t.jsx(Kt,{className:"w-8 h-8 text-slate-300 mb-3"}),t.jsx("p",{className:"text-sm text-slate-500",children:"No activities found"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/50 border-b border-slate-200 dark:border-slate-700",children:[t.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Date & Time"}),t.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"User"}),t.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Action"}),t.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Category"}),t.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Description"}),t.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Module"}),t.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider w-10"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:a.map((se,le)=>{const ye=K(se.action),De=I(se.action_category);return t.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors cursor-pointer",onClick:()=>P(se),children:[t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:R(se.date)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center shrink-0",children:t.jsx(gr,{className:"w-4 h-4 text-slate-500 dark:text-slate-400"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white truncate",children:se.user_name||"Unknown"}),t.jsx("p",{className:"text-xs text-slate-400 truncate",children:se.user_email})]})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:"inline-flex items-center gap-1.5 text-sm text-slate-700 dark:text-slate-300",children:[t.jsx(ye,{className:"w-4 h-4 text-slate-400"}),se.action]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-lg text-xs font-medium ${De.bg} ${De.text}`,children:De.label})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 max-w-xs truncate",children:se.description})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:se.module||""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("button",{className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:t.jsx(ws,{className:"w-4 h-4 text-slate-400"})})})]},`${se.id}-${le}`)})})]})}),T&&t.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-3 border-t border-slate-200 dark:border-slate-700 gap-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"text-sm text-slate-500",children:["Showing ",(T.current_page-1)*T.per_page+1," to"," ",Math.min(T.current_page*T.per_page,T.total_items)," of"," ",T.total_items]}),t.jsxs("select",{value:L,onChange:se=>{ae(Number(se.target.value)),S(1)},className:"px-2 py-1 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-lg text-sm dark:text-white",children:[t.jsx("option",{value:10,children:"10"}),t.jsx("option",{value:20,children:"20"}),t.jsx("option",{value:50,children:"50"}),t.jsx("option",{value:100,children:"100"})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>S(se=>Math.max(1,se-1)),disabled:E<=1,className:"p-2 rounded-lg border border-slate-200 dark:border-slate-600 disabled:opacity-30 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:t.jsx(s5,{className:"w-4 h-4 text-slate-600 dark:text-slate-300"})}),Array.from({length:Math.min(5,T.total_pages)},(se,le)=>{let ye;return T.total_pages<=5||E<=3?ye=le+1:E>=T.total_pages-2?ye=T.total_pages-4+le:ye=E-2+le,t.jsx("button",{onClick:()=>S(ye),className:`w-9 h-9 rounded-lg text-sm font-medium transition-colors ${E===ye?"bg-[#4CAF50] text-white":"text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:ye},ye)}),t.jsx("button",{onClick:()=>S(se=>Math.min(T.total_pages,se+1)),disabled:E>=T.total_pages,className:"p-2 rounded-lg border border-slate-200 dark:border-slate-600 disabled:opacity-30 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:t.jsx(pA,{className:"w-4 h-4 text-slate-600 dark:text-slate-300"})})]})]})]})}),D&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:()=>P(null),children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-lg mx-4 overflow-hidden",onClick:se=>se.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50",children:[t.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(Kt,{className:"w-5 h-5 text-[#4CAF50]"}),"Activity Details"]}),t.jsx("button",{onClick:()=>P(null),className:"p-1.5 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:t.jsx(ls,{className:"w-5 h-5 text-slate-500"})})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[[{label:"Activity ID",value:D.id},{label:"Date & Time",value:R(D.date)},{label:"User",value:D.user_name||"N/A"},{label:"Email",value:D.user_email||"N/A"},{label:"Role",value:D.user_role||"N/A"},{label:"Action",value:D.action},{label:"Category",value:D.action_category},{label:"Description",value:D.description},{label:"Module",value:D.module||"N/A"},{label:"Reference ID",value:D.reference_id||"N/A"},{label:"IP Address",value:D.ip_address||"N/A"}].map((se,le)=>t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 w-32 shrink-0",children:se.label}),t.jsx("span",{className:"text-sm text-slate-800 dark:text-white text-right break-all",children:se.value})]},le)),D.metadata&&t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 block mb-1",children:"Metadata"}),t.jsx("pre",{className:"text-xs bg-slate-50 dark:bg-slate-900 rounded-lg p-3 text-slate-600 dark:text-slate-400 overflow-auto max-h-32",children:JSON.stringify(D.metadata,null,2)})]})]}),t.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700 flex justify-end",children:t.jsx("button",{onClick:()=>P(null),className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl text-sm hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Close"})})]})})]})}const lue={login:ow,logout:lw,registration:aA,"account registration":aA,"permit submission":Fp,"permit approved":Us,"permit rejected":Ka,"for compliance":Ap,"under review":ws,"profile update":gr,"password change":Pr,"page visit":ws},o6={account:{bg:"bg-cyan-100 dark:bg-cyan-900/30",text:"text-cyan-700 dark:text-cyan-300",label:"Account"},permit:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300",label:"Permit"},navigation:{bg:"bg-slate-100 dark:bg-slate-700",text:"text-slate-600 dark:text-slate-300",label:"Navigation"},system:{bg:"bg-gray-100 dark:bg-gray-900/30",text:"text-gray-700 dark:text-gray-300",label:"System"}};function cue(){const{user:a}=nw(),e=ka(),[s,r]=C.useState([]),[n,i]=C.useState(null),[o,l]=C.useState(!0),[c,u]=C.useState(null),[m,A]=C.useState("all"),[g,p]=C.useState(""),[v,b]=C.useState(""),[y,w]=C.useState(1),[B,j]=C.useState(null),[E,S]=C.useState(null),[T,M]=C.useState(!1),[D,P]=C.useState(15);C.useEffect(()=>{a?.email&&Y()},[a,y,m,D]);const Y=async()=>{if(!a?.email){u("User not authenticated"),l(!1);return}try{l(!0),u(null);const X=new URLSearchParams({mode:"user",email:a.email,page:y,limit:D,category:m});g&&X.append("date_from",g),v&&X.append("date_to",v);const $=await fetch(`/backend/api/audit_trail.php?${X}`,{credentials:"include"});if(!$.ok)throw new Error(`HTTP ${$.status}`);const H=await $.json();H.success?(r(H.activities||[]),i(H.stats||null),j(H.pagination||null)):u(H.message||"Failed to fetch activity trail")}catch(X){console.error("Activity trail fetch error:",X),u("Failed to load your activity trail. Please try again.")}finally{l(!1)}},Q=()=>{w(1),Y()},L=()=>{A("all"),p(""),b(""),w(1),setTimeout(()=>Y(),0)},ae=X=>lue[X?.toLowerCase()]||bd,ne=X=>o6[X]||o6.system,V=X=>X?new Date(X).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",O=X=>{if(!X)return"";const $=new Date(X),te=new Date-$,K=Math.floor(te/6e4),I=Math.floor(te/36e5),R=Math.floor(te/864e5);return K<1?"Just now":K<60?`${K}m ago`:I<24?`${I}h ago`:R<7?`${R}d ago`:V(X)};return t.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("button",{onClick:()=>e("/user/dashboard"),className:"flex items-center gap-1.5 text-sm text-slate-500 dark:text-slate-400 hover:text-[#4CAF50] dark:hover:text-[#4CAF50] transition-colors mb-2",children:[t.jsx(Vh,{className:"w-4 h-4"}),"Back to Dashboard"]}),t.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(bd,{className:"w-7 h-7 text-[#4CAF50]"}),"My Activity Trail"]}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Your complete activity history across the system"})]}),t.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors self-start",children:[t.jsx(Ya,{className:`w-4 h-4 ${o?"animate-spin":""}`}),"Refresh"]})]}),n&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-2xl p-5 border border-blue-200 dark:border-blue-800",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(bd,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"text-3xl font-bold text-blue-600",children:n.total})]}),t.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Total Activities"})]}),t.jsxs("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 rounded-2xl p-5 border border-cyan-200 dark:border-cyan-800",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(ow,{className:"w-5 h-5 text-cyan-600"}),t.jsx("span",{className:"text-3xl font-bold text-cyan-600",children:n.by_category?.account||0})]}),t.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Account Activities"})]}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-2xl p-5 border border-green-200 dark:border-green-800",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(Fp,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-3xl font-bold text-green-600",children:n.by_category?.permit||0})]}),t.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Permit Activities"})]}),t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-2xl p-5 border border-slate-200 dark:border-slate-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(ws,{className:"w-5 h-5 text-slate-500"}),t.jsx("span",{className:"text-3xl font-bold text-slate-600 dark:text-slate-300",children:n.by_category?.navigation||0})]}),t.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Page Visits"})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4",children:[t.jsxs("button",{onClick:()=>M(!T),className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-200 w-full",children:[t.jsx(Rx,{className:"w-4 h-4"}),"Filters",t.jsx(fd,{className:`w-4 h-4 ml-auto transition-transform ${T?"rotate-180":""}`})]}),T&&t.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[t.jsxs("select",{value:m,onChange:X=>{A(X.target.value),w(1)},className:"px-3 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#4CAF50] dark:text-white",children:[t.jsx("option",{value:"all",children:"All Categories"}),t.jsx("option",{value:"account",children:"Account (Login/Logout)"}),t.jsx("option",{value:"permit",children:"Permit Activities"}),t.jsx("option",{value:"navigation",children:"Page Visits"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),t.jsx("input",{type:"date",value:g,onChange:X=>p(X.target.value),className:"w-full pl-10 pr-3 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#4CAF50] dark:text-white"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(bn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),t.jsx("input",{type:"date",value:v,onChange:X=>b(X.target.value),className:"w-full pl-10 pr-3 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#4CAF50] dark:text-white"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:Q,className:"flex-1 px-3 py-2.5 bg-[#4CAF50] text-white rounded-xl text-sm hover:bg-[#43A047] transition-colors",children:"Apply"}),t.jsx("button",{onClick:L,className:"px-3 py-2.5 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl text-sm hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Clear"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:t.jsxs("h2",{className:"text-base font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(jr,{className:"w-4 h-4 text-slate-400"}),"Activity Timeline"]})}),o?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[t.jsx(Or,{className:"w-8 h-8 text-[#4CAF50] animate-spin mb-3"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Loading your activities..."})]}):c?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[t.jsx(Ka,{className:"w-8 h-8 text-red-400 mb-3"}),t.jsx("p",{className:"text-sm text-red-500",children:c}),t.jsx("button",{onClick:Y,className:"mt-3 px-4 py-2 bg-[#4CAF50] text-white rounded-xl text-sm",children:"Retry"})]}):s.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[t.jsx(Kt,{className:"w-10 h-10 text-slate-300 dark:text-slate-600 mb-3"}),t.jsx("p",{className:"text-base font-medium text-slate-500 dark:text-slate-400",children:"No activities yet"}),t.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500 mt-1",children:"Your activities will appear here as you use the system"})]}):t.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:s.map((X,$)=>{const H=ae(X.action),te=ne(X.action_category);return t.jsxs("div",{className:"flex items-start gap-4 p-4 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors cursor-pointer",onClick:()=>S(X),children:[t.jsx("div",{className:`mt-0.5 w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${te.bg}`,children:t.jsx(H,{className:`w-5 h-5 ${te.text}`})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white",children:X.description}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1.5",children:[t.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-md text-xs font-medium ${te.bg} ${te.text}`,children:te.label}),X.module&&t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:X.module}),X.reference_id&&t.jsx("span",{className:"text-xs text-slate-400 font-mono",children:X.reference_id})]})]}),t.jsxs("div",{className:"text-right shrink-0",children:[t.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-slate-500 dark:text-slate-400",children:[t.jsx(H,{className:"w-3 h-3"}),X.action]}),t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:O(X.date)})]})]})})]},`${X.id}-${$}`)})}),B&&B.total_pages>1&&t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 dark:border-slate-700",children:[t.jsxs("span",{className:"text-sm text-slate-500",children:["Page ",B.current_page," of ",B.total_pages]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>w(X=>Math.max(1,X-1)),disabled:y<=1,className:"p-2 rounded-lg border border-slate-200 dark:border-slate-600 disabled:opacity-30 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:t.jsx(s5,{className:"w-4 h-4 text-slate-600 dark:text-slate-300"})}),Array.from({length:Math.min(5,B.total_pages)},(X,$)=>{let H;return B.total_pages<=5||y<=3?H=$+1:y>=B.total_pages-2?H=B.total_pages-4+$:H=y-2+$,t.jsx("button",{onClick:()=>w(H),className:`w-9 h-9 rounded-lg text-sm font-medium transition-colors ${y===H?"bg-[#4CAF50] text-white":"text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:H},H)}),t.jsx("button",{onClick:()=>w(X=>Math.min(B.total_pages,X+1)),disabled:y>=B.total_pages,className:"p-2 rounded-lg border border-slate-200 dark:border-slate-600 disabled:opacity-30 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:t.jsx(pA,{className:"w-4 h-4 text-slate-600 dark:text-slate-300"})})]})]})]}),E&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",onClick:()=>S(null),children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden",onClick:X=>X.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50",children:[t.jsxs("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(Kt,{className:"w-5 h-5 text-[#4CAF50]"}),"Activity Details"]}),t.jsx("button",{onClick:()=>S(null),className:"p-1.5 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:t.jsx(ls,{className:"w-5 h-5 text-slate-500"})})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[[{label:"Activity ID",value:E.id},{label:"Date & Time",value:V(E.date)},{label:"Action",value:E.action},{label:"Category",value:E.action_category},{label:"Description",value:E.description},{label:"Module",value:E.module||"N/A"},{label:"Reference",value:E.reference_id||"N/A"}].map((X,$)=>t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 w-28 shrink-0",children:X.label}),t.jsx("span",{className:"text-sm text-slate-800 dark:text-white text-right",children:X.value})]},$)),E.metadata&&t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 block mb-1",children:"Details"}),t.jsx("pre",{className:"text-xs bg-slate-50 dark:bg-slate-900 rounded-lg p-3 text-slate-600 dark:text-slate-400 overflow-auto max-h-32",children:JSON.stringify(E.metadata,null,2)})]})]}),t.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700 flex justify-end",children:t.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl text-sm hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Close"})})]})})]})}function due(){return t.jsxs(tU,{children:[" ",t.jsxs(p7,{children:[t.jsx(Gs,{path:"/",element:t.jsx(bh,{to:"/home",replace:!0})}),t.jsx(Gs,{path:"/home",element:t.jsx(YQ,{})}),t.jsx(Gs,{path:"/login",element:t.jsx(UV,{})}),t.jsx(Gs,{path:"/register",element:t.jsx(QV,{})}),t.jsxs(Gs,{path:"/user",element:t.jsx(Hn,{requiredRole:"user",children:t.jsx(VQ,{})}),children:[t.jsx(Gs,{index:!0,element:t.jsx(uB,{})}),t.jsx(Gs,{path:"dashboard",element:t.jsx(uB,{})}),t.jsx(Gs,{path:"newbusiness",element:t.jsx(bh,{to:"/user/business/new",replace:!0})}),t.jsx(Gs,{path:"newfranchise",element:t.jsx(bh,{to:"/user/franchise/new",replace:!0})}),t.jsx(Gs,{path:"businesspermittype",element:t.jsx(bh,{to:"/user/business/type",replace:!0})}),t.jsx(Gs,{path:"franchisepermit",element:t.jsx(bh,{to:"/user/franchise/type",replace:!0})}),t.jsx(Gs,{path:"business/new",element:t.jsx(cq,{})}),t.jsx(Gs,{path:"business/type",element:t.jsx(HV,{})}),t.jsx(Gs,{path:"business/renewal",element:t.jsx(mq,{})}),t.jsx(Gs,{path:"business/amendment",element:t.jsx(gq,{})}),t.jsx(Gs,{path:"business/liquor",element:t.jsx(Aq,{})}),t.jsx(Gs,{path:"business/special",element:t.jsx(pq,{})}),t.jsx(Gs,{path:"building/new",element:t.jsx(bq,{})}),t.jsx(Gs,{path:"building/type",element:t.jsx(yq,{})}),t.jsx(Gs,{path:"building/renewal",element:t.jsx(wq,{})}),t.jsx(Gs,{path:"building/ancillary",element:t.jsx(kq,{})}),t.jsx(Gs,{path:"building/professional",element:t.jsx(Bq,{})}),t.jsx(Gs,{path:"franchise/new",element:t.jsx(Fq,{})}),t.jsx(Gs,{path:"franchise/renew",element:t.jsx(Tq,{})}),t.jsx(Gs,{path:"franchise/type",element:t.jsx(Sq,{})}),t.jsx(Gs,{path:"barangay/new",element:t.jsx(Iq,{})}),t.jsx(Gs,{path:"permittracker",element:t.jsx(RY,{})}),t.jsx(Gs,{path:"general",element:t.jsx(OY,{})}),t.jsx(Gs,{path:"security",element:t.jsx(UY,{})}),t.jsx(Gs,{path:"activity",element:t.jsx(cue,{})})]}),t.jsxs(Gs,{path:"/admin",element:t.jsx(Hn,{requiredRole:"admin",children:t.jsx(qQ,{})}),children:[t.jsx(Gs,{index:!0,element:t.jsx(nF,{})}),t.jsx(Gs,{path:"dashboard",element:t.jsx(nF,{})}),t.jsx(Gs,{path:"businesspermit",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["business","super"],children:t.jsx(Lde,{})})}),t.jsx(Gs,{path:"businessdashboard",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["business","super"],children:t.jsx(Ide,{})})}),t.jsx(Gs,{path:"businessprocessing",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["business","super"],children:t.jsx(Rde,{})})}),t.jsx(Gs,{path:"buildingpermit",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["building","super"],children:t.jsx(Ode,{})})}),t.jsx(Gs,{path:"buildingdashboard",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["building","super"],children:t.jsx(Ude,{})})}),t.jsx(Gs,{path:"buildingprocessing",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["building","super"],children:t.jsx(Hde,{})})}),t.jsx(Gs,{path:"professionals",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["building","super"],children:t.jsx(zde,{})})}),t.jsx(Gs,{path:"franchisedashboard",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["transport","super"],children:t.jsx($de,{})})}),t.jsx(Gs,{path:"franchisepermit",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["transport","super"],children:t.jsx(Gde,{})})}),t.jsx(Gs,{path:"franchiseprocessing",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["transport","super"],children:t.jsx(Wde,{})})}),t.jsx(Gs,{path:"brgydashboard",element:t.jsxs(Hn,{requiredRole:"admin",allowedDepartments:["barangay","super"],children:[t.jsx(Kde,{}),"  "]})}),t.jsx(Gs,{path:"brgypermit",element:t.jsxs(Hn,{requiredRole:"admin",allowedDepartments:["barangay","super"],children:[t.jsx(Xde,{}),"  "]})}),t.jsx(Gs,{path:"brgyprocessing",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["barangay","super"],children:t.jsx(Jde,{})})}),t.jsx(Gs,{path:"requirements",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["business","building","transport","barangay","super"],children:t.jsx(Zde,{})})}),t.jsx(Gs,{path:"reports",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["super"],children:t.jsx(tue,{})})}),t.jsx(Gs,{path:"issuedpermits",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["business","building","transport","barangay","super"],children:t.jsx(aue,{})})}),t.jsx(Gs,{path:"permittracker",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["super"],children:t.jsx(nue,{})})}),t.jsx(Gs,{path:"audittrail",element:t.jsx(Hn,{requiredRole:"admin",allowedDepartments:["super"],children:t.jsx(oue,{})})}),t.jsx(Gs,{path:"barangay",element:t.jsx(bh,{to:"/admin/barangaypermit",replace:!0})})]}),t.jsx(Gs,{path:"*",element:t.jsx(bh,{to:"/login",replace:!0})})]})]})}gO.createRoot(document.getElementById("root")).render(t.jsx(qt.StrictMode,{children:t.jsx(U7,{children:t.jsx(due,{})})}));export{ha as _,hue as c,G_ as g};
